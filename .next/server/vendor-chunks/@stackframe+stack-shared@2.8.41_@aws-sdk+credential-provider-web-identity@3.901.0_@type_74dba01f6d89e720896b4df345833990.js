"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990";
exports.ids = ["vendor-chunks/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/helpers/production-mode.js":
/*!*******************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/helpers/production-mode.js ***!
  \*******************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getProductionModeErrors: () => (/* binding */ getProductionModeErrors)\n/* harmony export */ });\n/* harmony import */ var _utils_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/errors.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n/* harmony import */ var _utils_urls_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/urls.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/urls.js\");\n// src/helpers/production-mode.ts\n\n\nfunction getProductionModeErrors(project) {\n  const errors = [];\n  const domainsFixUrl = `/projects/${project.id}/domains`;\n  if (project.config.allow_localhost) {\n    errors.push({\n      message: \"Localhost is not allowed in production mode, turn off 'Allow localhost' in project settings\",\n      relativeFixUrl: domainsFixUrl\n    });\n  }\n  for (const { domain } of project.config.domains) {\n    let url;\n    try {\n      const normalizedDomain = domain.replace(/\\*+/g, \"wildcard-placeholder\");\n      url = new URL(normalizedDomain);\n    } catch (e) {\n      (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_0__.captureError)(\"production-mode-domain-not-valid\", new _utils_errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Domain was somehow not a valid URL; we should've caught this when setting the domain in the first place\", {\n        domain,\n        projectId: project\n      }));\n      errors.push({\n        message: \"Trusted domain is not a valid URL: \" + domain,\n        relativeFixUrl: domainsFixUrl\n      });\n      continue;\n    }\n    if ((0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_1__.isLocalhost)(url)) {\n      errors.push({\n        message: \"Localhost domains are not allowed to be trusted in production mode: \" + domain,\n        relativeFixUrl: domainsFixUrl\n      });\n    } else if (url.hostname.match(/^\\d+(\\.\\d+)*$/)) {\n      errors.push({\n        message: \"Direct IPs are not valid for trusted domains in production mode: \" + domain,\n        relativeFixUrl: domainsFixUrl\n      });\n    } else if (url.protocol !== \"https:\") {\n      errors.push({\n        message: \"Trusted domains should be HTTPS: \" + domain,\n        relativeFixUrl: domainsFixUrl\n      });\n    }\n  }\n  return errors;\n}\n\n//# sourceMappingURL=production-mode.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vaGVscGVycy9wcm9kdWN0aW9uLW1vZGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDdUU7QUFDeEI7QUFDL0M7QUFDQTtBQUNBLHFDQUFxQyxXQUFXO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLE1BQU0sOERBQVkseUNBQXlDLGlFQUFtQixzQ0FBc0M7QUFDcEg7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLFFBQVEsMkRBQVc7QUFDbkI7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZngyZWRlbm9hc2lzL0Rvd25sb2Fkcy9EZXZlbG9wbWVudC9Fc3BhZGEvbm9kZV9tb2R1bGVzLy5wbnBtL0BzdGFja2ZyYW1lK3N0YWNrLXNoYXJlZEAyLjguNDFfQGF3cy1zZGsrY3JlZGVudGlhbC1wcm92aWRlci13ZWItaWRlbnRpdHlAMy45MDEuMF9AdHlwZV83NGRiYTAxZjZkODllNzIwODk2YjRkZjM0NTgzMzk5MC9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvZXNtL2hlbHBlcnMvcHJvZHVjdGlvbi1tb2RlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9oZWxwZXJzL3Byb2R1Y3Rpb24tbW9kZS50c1xuaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciwgY2FwdHVyZUVycm9yIH0gZnJvbSBcIi4uL3V0aWxzL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgaXNMb2NhbGhvc3QgfSBmcm9tIFwiLi4vdXRpbHMvdXJscy5qc1wiO1xuZnVuY3Rpb24gZ2V0UHJvZHVjdGlvbk1vZGVFcnJvcnMocHJvamVjdCkge1xuICBjb25zdCBlcnJvcnMgPSBbXTtcbiAgY29uc3QgZG9tYWluc0ZpeFVybCA9IGAvcHJvamVjdHMvJHtwcm9qZWN0LmlkfS9kb21haW5zYDtcbiAgaWYgKHByb2plY3QuY29uZmlnLmFsbG93X2xvY2FsaG9zdCkge1xuICAgIGVycm9ycy5wdXNoKHtcbiAgICAgIG1lc3NhZ2U6IFwiTG9jYWxob3N0IGlzIG5vdCBhbGxvd2VkIGluIHByb2R1Y3Rpb24gbW9kZSwgdHVybiBvZmYgJ0FsbG93IGxvY2FsaG9zdCcgaW4gcHJvamVjdCBzZXR0aW5nc1wiLFxuICAgICAgcmVsYXRpdmVGaXhVcmw6IGRvbWFpbnNGaXhVcmxcbiAgICB9KTtcbiAgfVxuICBmb3IgKGNvbnN0IHsgZG9tYWluIH0gb2YgcHJvamVjdC5jb25maWcuZG9tYWlucykge1xuICAgIGxldCB1cmw7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWREb21haW4gPSBkb21haW4ucmVwbGFjZSgvXFwqKy9nLCBcIndpbGRjYXJkLXBsYWNlaG9sZGVyXCIpO1xuICAgICAgdXJsID0gbmV3IFVSTChub3JtYWxpemVkRG9tYWluKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjYXB0dXJlRXJyb3IoXCJwcm9kdWN0aW9uLW1vZGUtZG9tYWluLW5vdC12YWxpZFwiLCBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkRvbWFpbiB3YXMgc29tZWhvdyBub3QgYSB2YWxpZCBVUkw7IHdlIHNob3VsZCd2ZSBjYXVnaHQgdGhpcyB3aGVuIHNldHRpbmcgdGhlIGRvbWFpbiBpbiB0aGUgZmlyc3QgcGxhY2VcIiwge1xuICAgICAgICBkb21haW4sXG4gICAgICAgIHByb2plY3RJZDogcHJvamVjdFxuICAgICAgfSkpO1xuICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICBtZXNzYWdlOiBcIlRydXN0ZWQgZG9tYWluIGlzIG5vdCBhIHZhbGlkIFVSTDogXCIgKyBkb21haW4sXG4gICAgICAgIHJlbGF0aXZlRml4VXJsOiBkb21haW5zRml4VXJsXG4gICAgICB9KTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoaXNMb2NhbGhvc3QodXJsKSkge1xuICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICBtZXNzYWdlOiBcIkxvY2FsaG9zdCBkb21haW5zIGFyZSBub3QgYWxsb3dlZCB0byBiZSB0cnVzdGVkIGluIHByb2R1Y3Rpb24gbW9kZTogXCIgKyBkb21haW4sXG4gICAgICAgIHJlbGF0aXZlRml4VXJsOiBkb21haW5zRml4VXJsXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKHVybC5ob3N0bmFtZS5tYXRjaCgvXlxcZCsoXFwuXFxkKykqJC8pKSB7XG4gICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgIG1lc3NhZ2U6IFwiRGlyZWN0IElQcyBhcmUgbm90IHZhbGlkIGZvciB0cnVzdGVkIGRvbWFpbnMgaW4gcHJvZHVjdGlvbiBtb2RlOiBcIiArIGRvbWFpbixcbiAgICAgICAgcmVsYXRpdmVGaXhVcmw6IGRvbWFpbnNGaXhVcmxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAodXJsLnByb3RvY29sICE9PSBcImh0dHBzOlwiKSB7XG4gICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgIG1lc3NhZ2U6IFwiVHJ1c3RlZCBkb21haW5zIHNob3VsZCBiZSBIVFRQUzogXCIgKyBkb21haW4sXG4gICAgICAgIHJlbGF0aXZlRml4VXJsOiBkb21haW5zRml4VXJsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGVycm9ycztcbn1cbmV4cG9ydCB7XG4gIGdldFByb2R1Y3Rpb25Nb2RlRXJyb3JzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvZHVjdGlvbi1tb2RlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/helpers/production-mode.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/helpers/vault/client-side.js":
/*!*********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/helpers/vault/client-side.js ***!
  \*********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decryptValue: () => (/* binding */ decryptValue),\n/* harmony export */   encryptValue: () => (/* binding */ encryptValue),\n/* harmony export */   hashKey: () => (/* binding */ hashKey)\n/* harmony export */ });\n/* harmony import */ var _utils_bytes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/bytes.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/bytes.js\");\n/* harmony import */ var _utils_crypto_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/crypto.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/crypto.js\");\n// src/helpers/vault/client-side.ts\n\n\nvar hashPurpose = \"stack-data-vault-client-side-encryption-key-hash\";\nvar encryptionSecretPurpose = \"stack-data-vault-client-side-encryption-value-encryption-key-hash\";\nvar encryptionValuePurpose = \"stack-data-vault-client-side-encryption-value-encryption-value-encryption\";\nasync function getDerivedKey(secret, key) {\n  return await (0,_utils_crypto_js__WEBPACK_IMPORTED_MODULE_1__.iteratedHash)({\n    purpose: encryptionSecretPurpose,\n    extra: secret,\n    value: key,\n    iterations: 1e5\n  });\n}\nasync function hashKey(secret, key) {\n  return (0,_utils_bytes_js__WEBPACK_IMPORTED_MODULE_0__.encodeBase64)(await (0,_utils_crypto_js__WEBPACK_IMPORTED_MODULE_1__.hash)({\n    purpose: hashPurpose,\n    extra: secret,\n    value: await getDerivedKey(secret, key)\n  }));\n}\nasync function encryptValue(secret, key, value) {\n  const valueEncryptionDerivedKey = await getDerivedKey(secret, key);\n  const bytes = await (0,_utils_crypto_js__WEBPACK_IMPORTED_MODULE_1__.encrypt)({\n    purpose: encryptionValuePurpose,\n    secret: valueEncryptionDerivedKey,\n    value: new TextEncoder().encode(value)\n  });\n  return (0,_utils_bytes_js__WEBPACK_IMPORTED_MODULE_0__.encodeBase64)(bytes);\n}\nasync function decryptValue(secret, key, encryptedValue) {\n  const valueEncryptionDerivedKey = await getDerivedKey(secret, key);\n  const bytesResult = await (0,_utils_crypto_js__WEBPACK_IMPORTED_MODULE_1__.decrypt)({\n    purpose: encryptionValuePurpose,\n    secret: valueEncryptionDerivedKey,\n    cipher: (0,_utils_bytes_js__WEBPACK_IMPORTED_MODULE_0__.decodeBase64)(encryptedValue)\n  });\n  if (bytesResult.status === \"error\") throw new Error(\"Data vault client-side decryption failed. Are you sure you're using the correct secret?\", { cause: bytesResult.error });\n  return new TextDecoder().decode(bytesResult.data);\n}\n\n//# sourceMappingURL=client-side.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vaGVscGVycy92YXVsdC9jbGllbnQtc2lkZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ2tFO0FBQ1c7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDhEQUFZO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxTQUFTLDZEQUFZLE9BQU8sc0RBQUk7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix5REFBTztBQUM3QjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsU0FBUyw2REFBWTtBQUNyQjtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIseURBQU87QUFDbkM7QUFDQTtBQUNBLFlBQVksNkRBQVk7QUFDeEIsR0FBRztBQUNILG1KQUFtSiwwQkFBMEI7QUFDN0s7QUFDQTtBQUtFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZngyZWRlbm9hc2lzL0Rvd25sb2Fkcy9EZXZlbG9wbWVudC9Fc3BhZGEvbm9kZV9tb2R1bGVzLy5wbnBtL0BzdGFja2ZyYW1lK3N0YWNrLXNoYXJlZEAyLjguNDFfQGF3cy1zZGsrY3JlZGVudGlhbC1wcm92aWRlci13ZWItaWRlbnRpdHlAMy45MDEuMF9AdHlwZV83NGRiYTAxZjZkODllNzIwODk2YjRkZjM0NTgzMzk5MC9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvZXNtL2hlbHBlcnMvdmF1bHQvY2xpZW50LXNpZGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2hlbHBlcnMvdmF1bHQvY2xpZW50LXNpZGUudHNcbmltcG9ydCB7IGRlY29kZUJhc2U2NCwgZW5jb2RlQmFzZTY0IH0gZnJvbSBcIi4uLy4uL3V0aWxzL2J5dGVzLmpzXCI7XG5pbXBvcnQgeyBkZWNyeXB0LCBlbmNyeXB0LCBoYXNoLCBpdGVyYXRlZEhhc2ggfSBmcm9tIFwiLi4vLi4vdXRpbHMvY3J5cHRvLmpzXCI7XG52YXIgaGFzaFB1cnBvc2UgPSBcInN0YWNrLWRhdGEtdmF1bHQtY2xpZW50LXNpZGUtZW5jcnlwdGlvbi1rZXktaGFzaFwiO1xudmFyIGVuY3J5cHRpb25TZWNyZXRQdXJwb3NlID0gXCJzdGFjay1kYXRhLXZhdWx0LWNsaWVudC1zaWRlLWVuY3J5cHRpb24tdmFsdWUtZW5jcnlwdGlvbi1rZXktaGFzaFwiO1xudmFyIGVuY3J5cHRpb25WYWx1ZVB1cnBvc2UgPSBcInN0YWNrLWRhdGEtdmF1bHQtY2xpZW50LXNpZGUtZW5jcnlwdGlvbi12YWx1ZS1lbmNyeXB0aW9uLXZhbHVlLWVuY3J5cHRpb25cIjtcbmFzeW5jIGZ1bmN0aW9uIGdldERlcml2ZWRLZXkoc2VjcmV0LCBrZXkpIHtcbiAgcmV0dXJuIGF3YWl0IGl0ZXJhdGVkSGFzaCh7XG4gICAgcHVycG9zZTogZW5jcnlwdGlvblNlY3JldFB1cnBvc2UsXG4gICAgZXh0cmE6IHNlY3JldCxcbiAgICB2YWx1ZToga2V5LFxuICAgIGl0ZXJhdGlvbnM6IDFlNVxuICB9KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGhhc2hLZXkoc2VjcmV0LCBrZXkpIHtcbiAgcmV0dXJuIGVuY29kZUJhc2U2NChhd2FpdCBoYXNoKHtcbiAgICBwdXJwb3NlOiBoYXNoUHVycG9zZSxcbiAgICBleHRyYTogc2VjcmV0LFxuICAgIHZhbHVlOiBhd2FpdCBnZXREZXJpdmVkS2V5KHNlY3JldCwga2V5KVxuICB9KSk7XG59XG5hc3luYyBmdW5jdGlvbiBlbmNyeXB0VmFsdWUoc2VjcmV0LCBrZXksIHZhbHVlKSB7XG4gIGNvbnN0IHZhbHVlRW5jcnlwdGlvbkRlcml2ZWRLZXkgPSBhd2FpdCBnZXREZXJpdmVkS2V5KHNlY3JldCwga2V5KTtcbiAgY29uc3QgYnl0ZXMgPSBhd2FpdCBlbmNyeXB0KHtcbiAgICBwdXJwb3NlOiBlbmNyeXB0aW9uVmFsdWVQdXJwb3NlLFxuICAgIHNlY3JldDogdmFsdWVFbmNyeXB0aW9uRGVyaXZlZEtleSxcbiAgICB2YWx1ZTogbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHZhbHVlKVxuICB9KTtcbiAgcmV0dXJuIGVuY29kZUJhc2U2NChieXRlcyk7XG59XG5hc3luYyBmdW5jdGlvbiBkZWNyeXB0VmFsdWUoc2VjcmV0LCBrZXksIGVuY3J5cHRlZFZhbHVlKSB7XG4gIGNvbnN0IHZhbHVlRW5jcnlwdGlvbkRlcml2ZWRLZXkgPSBhd2FpdCBnZXREZXJpdmVkS2V5KHNlY3JldCwga2V5KTtcbiAgY29uc3QgYnl0ZXNSZXN1bHQgPSBhd2FpdCBkZWNyeXB0KHtcbiAgICBwdXJwb3NlOiBlbmNyeXB0aW9uVmFsdWVQdXJwb3NlLFxuICAgIHNlY3JldDogdmFsdWVFbmNyeXB0aW9uRGVyaXZlZEtleSxcbiAgICBjaXBoZXI6IGRlY29kZUJhc2U2NChlbmNyeXB0ZWRWYWx1ZSlcbiAgfSk7XG4gIGlmIChieXRlc1Jlc3VsdC5zdGF0dXMgPT09IFwiZXJyb3JcIikgdGhyb3cgbmV3IEVycm9yKFwiRGF0YSB2YXVsdCBjbGllbnQtc2lkZSBkZWNyeXB0aW9uIGZhaWxlZC4gQXJlIHlvdSBzdXJlIHlvdSdyZSB1c2luZyB0aGUgY29ycmVjdCBzZWNyZXQ/XCIsIHsgY2F1c2U6IGJ5dGVzUmVzdWx0LmVycm9yIH0pO1xuICByZXR1cm4gbmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKGJ5dGVzUmVzdWx0LmRhdGEpO1xufVxuZXhwb3J0IHtcbiAgZGVjcnlwdFZhbHVlLFxuICBlbmNyeXB0VmFsdWUsXG4gIGhhc2hLZXlcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQtc2lkZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/helpers/vault/client-side.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/index.js":
/*!*************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/index.js ***!
  \*************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KnownError: () => (/* reexport safe */ _known_errors_js__WEBPACK_IMPORTED_MODULE_3__.KnownError),\n/* harmony export */   KnownErrors: () => (/* reexport safe */ _known_errors_js__WEBPACK_IMPORTED_MODULE_3__.KnownErrors),\n/* harmony export */   StackAdminInterface: () => (/* reexport safe */ _interface_admin_interface_js__WEBPACK_IMPORTED_MODULE_0__.StackAdminInterface),\n/* harmony export */   StackClientInterface: () => (/* reexport safe */ _interface_client_interface_js__WEBPACK_IMPORTED_MODULE_1__.StackClientInterface),\n/* harmony export */   StackServerInterface: () => (/* reexport safe */ _interface_server_interface_js__WEBPACK_IMPORTED_MODULE_2__.StackServerInterface)\n/* harmony export */ });\n/* harmony import */ var _interface_admin_interface_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interface/admin-interface.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/admin-interface.js\");\n/* harmony import */ var _interface_client_interface_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./interface/client-interface.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/client-interface.js\");\n/* harmony import */ var _interface_server_interface_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./interface/server-interface.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/server-interface.js\");\n/* harmony import */ var _known_errors_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./known-errors.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/known-errors.js\");\n// src/index.ts\n\n\n\n\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7QUFHd0M7QUFHQztBQUdBO0FBSWQ7QUFPekI7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2dmeDJlZGVub2FzaXMvRG93bmxvYWRzL0RldmVsb3BtZW50L0VzcGFkYS9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2luZGV4LnRzXG5pbXBvcnQge1xuICBTdGFja0FkbWluSW50ZXJmYWNlXG59IGZyb20gXCIuL2ludGVyZmFjZS9hZG1pbi1pbnRlcmZhY2UuanNcIjtcbmltcG9ydCB7XG4gIFN0YWNrQ2xpZW50SW50ZXJmYWNlXG59IGZyb20gXCIuL2ludGVyZmFjZS9jbGllbnQtaW50ZXJmYWNlLmpzXCI7XG5pbXBvcnQge1xuICBTdGFja1NlcnZlckludGVyZmFjZVxufSBmcm9tIFwiLi9pbnRlcmZhY2Uvc2VydmVyLWludGVyZmFjZS5qc1wiO1xuaW1wb3J0IHtcbiAgS25vd25FcnJvcixcbiAgS25vd25FcnJvcnNcbn0gZnJvbSBcIi4va25vd24tZXJyb3JzLmpzXCI7XG5leHBvcnQge1xuICBLbm93bkVycm9yLFxuICBLbm93bkVycm9ycyxcbiAgU3RhY2tBZG1pbkludGVyZmFjZSxcbiAgU3RhY2tDbGllbnRJbnRlcmZhY2UsXG4gIFN0YWNrU2VydmVySW50ZXJmYWNlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/admin-interface.js":
/*!*********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/admin-interface.js ***!
  \*********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StackAdminInterface: () => (/* binding */ StackAdminInterface)\n/* harmony export */ });\n/* harmony import */ var _known_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../known-errors.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/known-errors.js\");\n/* harmony import */ var _utils_results_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/results.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/results.js\");\n/* harmony import */ var _server_interface_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./server-interface.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/server-interface.js\");\n// src/interface/admin-interface.ts\n\n\n\nvar StackAdminInterface = class extends _server_interface_js__WEBPACK_IMPORTED_MODULE_2__.StackServerInterface {\n  constructor(options) {\n    super(options);\n    this.options = options;\n  }\n  async sendAdminRequest(path, options, session, requestType = \"admin\") {\n    return await this.sendServerRequest(\n      path,\n      {\n        ...options,\n        headers: {\n          \"x-stack-super-secret-admin-key\": \"superSecretAdminKey\" in this.options ? this.options.superSecretAdminKey : \"\",\n          ...options.headers\n        }\n      },\n      session,\n      requestType\n    );\n  }\n  async sendAdminRequestAndCatchKnownError(path, requestOptions, tokenStoreOrNull, errorsToCatch) {\n    try {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_1__.Result.ok(await this.sendAdminRequest(path, requestOptions, tokenStoreOrNull));\n    } catch (e) {\n      for (const errorType of errorsToCatch) {\n        if (errorType.isInstance(e)) {\n          return _utils_results_js__WEBPACK_IMPORTED_MODULE_1__.Result.error(e);\n        }\n      }\n      throw e;\n    }\n  }\n  async getProject() {\n    const response = await this.sendAdminRequest(\n      \"/internal/projects/current\",\n      {\n        method: \"GET\"\n      },\n      null\n    );\n    return await response.json();\n  }\n  async updateProject(update) {\n    const response = await this.sendAdminRequest(\n      \"/internal/projects/current\",\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(update)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async createInternalApiKey(options) {\n    const response = await this.sendAdminRequest(\n      \"/internal/api-keys\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(options)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async listInternalApiKeys() {\n    const response = await this.sendAdminRequest(\"/internal/api-keys\", {}, null);\n    const result = await response.json();\n    return result.items;\n  }\n  async revokeInternalApiKeyById(id) {\n    await this.sendAdminRequest(\n      `/internal/api-keys/${id}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          revoked: true\n        })\n      },\n      null\n    );\n  }\n  async getInternalApiKey(id, session) {\n    const response = await this.sendAdminRequest(`/internal/api-keys/${id}`, {}, session);\n    return await response.json();\n  }\n  async listInternalEmailTemplates() {\n    const response = await this.sendAdminRequest(`/internal/email-templates`, {}, null);\n    const result = await response.json();\n    return result.templates;\n  }\n  async listInternalEmailDrafts() {\n    const response = await this.sendAdminRequest(`/internal/email-drafts`, {}, null);\n    const result = await response.json();\n    return result.drafts;\n  }\n  async createEmailDraft(options) {\n    const response = await this.sendAdminRequest(\n      `/internal/email-drafts`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(options)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async updateEmailDraft(id, data) {\n    await this.sendAdminRequest(\n      `/internal/email-drafts/${id}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      null\n    );\n  }\n  async listEmailThemes() {\n    const response = await this.sendAdminRequest(`/internal/email-themes`, {}, null);\n    const result = await response.json();\n    return result.themes;\n  }\n  // Team permission definitions methods\n  async listTeamPermissionDefinitions() {\n    const response = await this.sendAdminRequest(`/team-permission-definitions`, {}, null);\n    const result = await response.json();\n    return result.items;\n  }\n  async createTeamPermissionDefinition(data) {\n    const response = await this.sendAdminRequest(\n      \"/team-permission-definitions\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async updateTeamPermissionDefinition(permissionId, data) {\n    const response = await this.sendAdminRequest(\n      `/team-permission-definitions/${permissionId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async deleteTeamPermissionDefinition(permissionId) {\n    await this.sendAdminRequest(\n      `/team-permission-definitions/${permissionId}`,\n      { method: \"DELETE\" },\n      null\n    );\n  }\n  async listProjectPermissionDefinitions() {\n    const response = await this.sendAdminRequest(`/project-permission-definitions`, {}, null);\n    const result = await response.json();\n    return result.items;\n  }\n  async createProjectPermissionDefinition(data) {\n    const response = await this.sendAdminRequest(\n      \"/project-permission-definitions\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async updateProjectPermissionDefinition(permissionId, data) {\n    const response = await this.sendAdminRequest(\n      `/project-permission-definitions/${permissionId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async deleteProjectPermissionDefinition(permissionId) {\n    await this.sendAdminRequest(\n      `/project-permission-definitions/${permissionId}`,\n      { method: \"DELETE\" },\n      null\n    );\n  }\n  async getSvixToken() {\n    const response = await this.sendAdminRequest(\n      \"/webhooks/svix-token\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({})\n      },\n      null\n    );\n    return await response.json();\n  }\n  async deleteProject() {\n    await this.sendAdminRequest(\n      \"/internal/projects/current\",\n      {\n        method: \"DELETE\"\n      },\n      null\n    );\n  }\n  async transferProject(session, newTeamId) {\n    await this.sendAdminRequest(\n      \"/internal/projects/transfer\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          project_id: this.options.projectId,\n          new_team_id: newTeamId\n        })\n      },\n      session\n    );\n  }\n  async getMetrics(includeAnonymous = false) {\n    const params = new URLSearchParams();\n    if (includeAnonymous) {\n      params.append(\"include_anonymous\", \"true\");\n    }\n    const queryString = params.toString();\n    const response = await this.sendAdminRequest(\n      `/internal/metrics${queryString ? `?${queryString}` : \"\"}`,\n      {\n        method: \"GET\"\n      },\n      null\n    );\n    return await response.json();\n  }\n  async sendTestEmail(data) {\n    const response = await this.sendAdminRequest(`/internal/send-test-email`, {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify(data)\n    }, null);\n    return await response.json();\n  }\n  async listSentEmails() {\n    const response = await this.sendAdminRequest(\"/internal/emails\", {\n      method: \"GET\"\n    }, null);\n    return await response.json();\n  }\n  async sendSignInInvitationEmail(email, callbackUrl) {\n    await this.sendAdminRequest(\n      \"/internal/send-sign-in-invitation\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          callback_url: callbackUrl\n        })\n      },\n      null\n    );\n  }\n  async sendChatMessage(threadId, contextType, messages, abortSignal) {\n    const response = await this.sendAdminRequest(\n      `/internal/ai-chat/${threadId}`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({ context_type: contextType, messages }),\n        signal: abortSignal\n      },\n      null\n    );\n    return await response.json();\n  }\n  async saveChatMessage(threadId, message) {\n    await this.sendAdminRequest(\n      `/internal/ai-chat/${threadId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({ message })\n      },\n      null\n    );\n  }\n  async listChatMessages(threadId) {\n    const response = await this.sendAdminRequest(\n      `/internal/ai-chat/${threadId}`,\n      { method: \"GET\" },\n      null\n    );\n    return await response.json();\n  }\n  async renderEmailPreview(options) {\n    const response = await this.sendAdminRequest(`/emails/render-email`, {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        theme_id: options.themeId,\n        theme_tsx_source: options.themeTsxSource,\n        template_id: options.templateId,\n        template_tsx_source: options.templateTsxSource\n      })\n    }, null);\n    return await response.json();\n  }\n  async createEmailTheme(displayName) {\n    const response = await this.sendAdminRequest(\n      `/internal/email-themes`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          display_name: displayName\n        })\n      },\n      null\n    );\n    return await response.json();\n  }\n  async getEmailTheme(id) {\n    const response = await this.sendAdminRequest(\n      `/internal/email-themes/${id}`,\n      { method: \"GET\" },\n      null\n    );\n    return await response.json();\n  }\n  async updateEmailTheme(id, tsxSource) {\n    await this.sendAdminRequest(\n      `/internal/email-themes/${id}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          tsx_source: tsxSource\n        })\n      },\n      null\n    );\n  }\n  async updateEmailTemplate(id, tsxSource, themeId) {\n    const response = await this.sendAdminRequest(\n      `/internal/email-templates/${id}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({ tsx_source: tsxSource, theme_id: themeId })\n      },\n      null\n    );\n    return await response.json();\n  }\n  async getConfig() {\n    const response = await this.sendAdminRequest(\n      `/internal/config`,\n      { method: \"GET\" },\n      null\n    );\n    return await response.json();\n  }\n  async updateConfig(data) {\n    const response = await this.sendAdminRequest(\n      `/internal/config/override`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({ config_override_string: JSON.stringify(data.configOverride) })\n      },\n      null\n    );\n    return await response.json();\n  }\n  async createEmailTemplate(displayName) {\n    const response = await this.sendAdminRequest(\n      `/internal/email-templates`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          display_name: displayName\n        })\n      },\n      null\n    );\n    return await response.json();\n  }\n  async setupPayments() {\n    const response = await this.sendAdminRequest(\n      \"/internal/payments/setup\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({})\n      },\n      null\n    );\n    return await response.json();\n  }\n  async getStripeAccountInfo() {\n    const response = await this.sendAdminRequestAndCatchKnownError(\n      \"/internal/payments/stripe/account-info\",\n      {},\n      null,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.StripeAccountInfoNotFound]\n    );\n    if (response.status === \"error\") {\n      return null;\n    }\n    return await response.data.json();\n  }\n  async createStripeWidgetAccountSession() {\n    const response = await this.sendAdminRequest(\n      \"/internal/payments/stripe-widgets/account-session\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({})\n      },\n      null\n    );\n    return await response.json();\n  }\n  async listTransactions(params) {\n    const qs = new URLSearchParams();\n    if (params?.cursor) qs.set(\"cursor\", params.cursor);\n    if (typeof params?.limit === \"number\") qs.set(\"limit\", String(params.limit));\n    if (params?.type) qs.set(\"type\", params.type);\n    if (params?.customerType) qs.set(\"customer_type\", params.customerType);\n    const response = await this.sendAdminRequest(\n      `/internal/payments/transactions${qs.size ? `?${qs.toString()}` : \"\"}`,\n      { method: \"GET\" },\n      null\n    );\n    const json = await response.json();\n    return { transactions: json.transactions, nextCursor: json.next_cursor };\n  }\n  async testModePurchase(options) {\n    await this.sendAdminRequest(\n      \"/internal/payments/test-mode-purchase-session\",\n      {\n        method: \"POST\",\n        headers: { \"content-type\": \"application/json\" },\n        body: JSON.stringify(options)\n      },\n      null\n    );\n  }\n};\n\n//# sourceMappingURL=admin-interface.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vaW50ZXJmYWNlL2FkbWluLWludGVyZmFjZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDaUQ7QUFDSjtBQUNnQjtBQUM3RCx3Q0FBd0Msc0VBQW9CO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEscURBQU07QUFDbkIsTUFBTTtBQUNOO0FBQ0E7QUFDQSxpQkFBaUIscURBQU07QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RUFBeUU7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixHQUFHO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLEdBQUcsS0FBSztBQUMvRTtBQUNBO0FBQ0E7QUFDQSxnRkFBZ0Y7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QztBQUN2RDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZngyZWRlbm9hc2lzL0Rvd25sb2Fkcy9EZXZlbG9wbWVudC9Fc3BhZGEvbm9kZV9tb2R1bGVzLy5wbnBtL0BzdGFja2ZyYW1lK3N0YWNrLXNoYXJlZEAyLjguNDFfQGF3cy1zZGsrY3JlZGVudGlhbC1wcm92aWRlci13ZWItaWRlbnRpdHlAMy45MDEuMF9AdHlwZV83NGRiYTAxZjZkODllNzIwODk2YjRkZjM0NTgzMzk5MC9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvZXNtL2ludGVyZmFjZS9hZG1pbi1pbnRlcmZhY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2ludGVyZmFjZS9hZG1pbi1pbnRlcmZhY2UudHNcbmltcG9ydCB7IEtub3duRXJyb3JzIH0gZnJvbSBcIi4uL2tub3duLWVycm9ycy5qc1wiO1xuaW1wb3J0IHsgUmVzdWx0IH0gZnJvbSBcIi4uL3V0aWxzL3Jlc3VsdHMuanNcIjtcbmltcG9ydCB7IFN0YWNrU2VydmVySW50ZXJmYWNlIH0gZnJvbSBcIi4vc2VydmVyLWludGVyZmFjZS5qc1wiO1xudmFyIFN0YWNrQWRtaW5JbnRlcmZhY2UgPSBjbGFzcyBleHRlbmRzIFN0YWNrU2VydmVySW50ZXJmYWNlIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cbiAgYXN5bmMgc2VuZEFkbWluUmVxdWVzdChwYXRoLCBvcHRpb25zLCBzZXNzaW9uLCByZXF1ZXN0VHlwZSA9IFwiYWRtaW5cIikge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgcGF0aCxcbiAgICAgIHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwieC1zdGFjay1zdXBlci1zZWNyZXQtYWRtaW4ta2V5XCI6IFwic3VwZXJTZWNyZXRBZG1pbktleVwiIGluIHRoaXMub3B0aW9ucyA/IHRoaXMub3B0aW9ucy5zdXBlclNlY3JldEFkbWluS2V5IDogXCJcIixcbiAgICAgICAgICAuLi5vcHRpb25zLmhlYWRlcnNcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNlc3Npb24sXG4gICAgICByZXF1ZXN0VHlwZVxuICAgICk7XG4gIH1cbiAgYXN5bmMgc2VuZEFkbWluUmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihwYXRoLCByZXF1ZXN0T3B0aW9ucywgdG9rZW5TdG9yZU9yTnVsbCwgZXJyb3JzVG9DYXRjaCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gUmVzdWx0Lm9rKGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChwYXRoLCByZXF1ZXN0T3B0aW9ucywgdG9rZW5TdG9yZU9yTnVsbCkpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGZvciAoY29uc3QgZXJyb3JUeXBlIG9mIGVycm9yc1RvQ2F0Y2gpIHtcbiAgICAgICAgaWYgKGVycm9yVHlwZS5pc0luc3RhbmNlKGUpKSB7XG4gICAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgZ2V0UHJvamVjdCgpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcbiAgICAgIFwiL2ludGVybmFsL3Byb2plY3RzL2N1cnJlbnRcIixcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkdFVFwiXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyB1cGRhdGVQcm9qZWN0KHVwZGF0ZSkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgXCIvaW50ZXJuYWwvcHJvamVjdHMvY3VycmVudFwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHVwZGF0ZSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIGNyZWF0ZUludGVybmFsQXBpS2V5KG9wdGlvbnMpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcbiAgICAgIFwiL2ludGVybmFsL2FwaS1rZXlzXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvcHRpb25zKVxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgbGlzdEludGVybmFsQXBpS2V5cygpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcIi9pbnRlcm5hbC9hcGkta2V5c1wiLCB7fSwgbnVsbCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiByZXN1bHQuaXRlbXM7XG4gIH1cbiAgYXN5bmMgcmV2b2tlSW50ZXJuYWxBcGlLZXlCeUlkKGlkKSB7XG4gICAgYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgYC9pbnRlcm5hbC9hcGkta2V5cy8ke2lkfWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHJldm9rZWQ6IHRydWVcbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuICBhc3luYyBnZXRJbnRlcm5hbEFwaUtleShpZCwgc2Vzc2lvbikge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KGAvaW50ZXJuYWwvYXBpLWtleXMvJHtpZH1gLCB7fSwgc2Vzc2lvbik7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBsaXN0SW50ZXJuYWxFbWFpbFRlbXBsYXRlcygpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChgL2ludGVybmFsL2VtYWlsLXRlbXBsYXRlc2AsIHt9LCBudWxsKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHJlc3VsdC50ZW1wbGF0ZXM7XG4gIH1cbiAgYXN5bmMgbGlzdEludGVybmFsRW1haWxEcmFmdHMoKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoYC9pbnRlcm5hbC9lbWFpbC1kcmFmdHNgLCB7fSwgbnVsbCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiByZXN1bHQuZHJhZnRzO1xuICB9XG4gIGFzeW5jIGNyZWF0ZUVtYWlsRHJhZnQob3B0aW9ucykge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgYC9pbnRlcm5hbC9lbWFpbC1kcmFmdHNgLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkob3B0aW9ucylcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIHVwZGF0ZUVtYWlsRHJhZnQoaWQsIGRhdGEpIHtcbiAgICBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoXG4gICAgICBgL2ludGVybmFsL2VtYWlsLWRyYWZ0cy8ke2lkfWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuICBhc3luYyBsaXN0RW1haWxUaGVtZXMoKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoYC9pbnRlcm5hbC9lbWFpbC10aGVtZXNgLCB7fSwgbnVsbCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiByZXN1bHQudGhlbWVzO1xuICB9XG4gIC8vIFRlYW0gcGVybWlzc2lvbiBkZWZpbml0aW9ucyBtZXRob2RzXG4gIGFzeW5jIGxpc3RUZWFtUGVybWlzc2lvbkRlZmluaXRpb25zKCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KGAvdGVhbS1wZXJtaXNzaW9uLWRlZmluaXRpb25zYCwge30sIG51bGwpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4gcmVzdWx0Lml0ZW1zO1xuICB9XG4gIGFzeW5jIGNyZWF0ZVRlYW1QZXJtaXNzaW9uRGVmaW5pdGlvbihkYXRhKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoXG4gICAgICBcIi90ZWFtLXBlcm1pc3Npb24tZGVmaW5pdGlvbnNcIixcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyB1cGRhdGVUZWFtUGVybWlzc2lvbkRlZmluaXRpb24ocGVybWlzc2lvbklkLCBkYXRhKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoXG4gICAgICBgL3RlYW0tcGVybWlzc2lvbi1kZWZpbml0aW9ucy8ke3Blcm1pc3Npb25JZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBkZWxldGVUZWFtUGVybWlzc2lvbkRlZmluaXRpb24ocGVybWlzc2lvbklkKSB7XG4gICAgYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgYC90ZWFtLXBlcm1pc3Npb24tZGVmaW5pdGlvbnMvJHtwZXJtaXNzaW9uSWR9YCxcbiAgICAgIHsgbWV0aG9kOiBcIkRFTEVURVwiIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuICBhc3luYyBsaXN0UHJvamVjdFBlcm1pc3Npb25EZWZpbml0aW9ucygpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChgL3Byb2plY3QtcGVybWlzc2lvbi1kZWZpbml0aW9uc2AsIHt9LCBudWxsKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHJlc3VsdC5pdGVtcztcbiAgfVxuICBhc3luYyBjcmVhdGVQcm9qZWN0UGVybWlzc2lvbkRlZmluaXRpb24oZGF0YSkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgXCIvcHJvamVjdC1wZXJtaXNzaW9uLWRlZmluaXRpb25zXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlUHJvamVjdFBlcm1pc3Npb25EZWZpbml0aW9uKHBlcm1pc3Npb25JZCwgZGF0YSkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgYC9wcm9qZWN0LXBlcm1pc3Npb24tZGVmaW5pdGlvbnMvJHtwZXJtaXNzaW9uSWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgZGVsZXRlUHJvamVjdFBlcm1pc3Npb25EZWZpbml0aW9uKHBlcm1pc3Npb25JZCkge1xuICAgIGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcbiAgICAgIGAvcHJvamVjdC1wZXJtaXNzaW9uLWRlZmluaXRpb25zLyR7cGVybWlzc2lvbklkfWAsXG4gICAgICB7IG1ldGhvZDogXCJERUxFVEVcIiB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gIH1cbiAgYXN5bmMgZ2V0U3ZpeFRva2VuKCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgXCIvd2ViaG9va3Mvc3ZpeC10b2tlblwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe30pXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBkZWxldGVQcm9qZWN0KCkge1xuICAgIGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcbiAgICAgIFwiL2ludGVybmFsL3Byb2plY3RzL2N1cnJlbnRcIixcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gIH1cbiAgYXN5bmMgdHJhbnNmZXJQcm9qZWN0KHNlc3Npb24sIG5ld1RlYW1JZCkge1xuICAgIGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcbiAgICAgIFwiL2ludGVybmFsL3Byb2plY3RzL3RyYW5zZmVyXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgcHJvamVjdF9pZDogdGhpcy5vcHRpb25zLnByb2plY3RJZCxcbiAgICAgICAgICBuZXdfdGVhbV9pZDogbmV3VGVhbUlkXG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gIH1cbiAgYXN5bmMgZ2V0TWV0cmljcyhpbmNsdWRlQW5vbnltb3VzID0gZmFsc2UpIHtcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gICAgaWYgKGluY2x1ZGVBbm9ueW1vdXMpIHtcbiAgICAgIHBhcmFtcy5hcHBlbmQoXCJpbmNsdWRlX2Fub255bW91c1wiLCBcInRydWVcIik7XG4gICAgfVxuICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gcGFyYW1zLnRvU3RyaW5nKCk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoXG4gICAgICBgL2ludGVybmFsL21ldHJpY3Mke3F1ZXJ5U3RyaW5nID8gYD8ke3F1ZXJ5U3RyaW5nfWAgOiBcIlwifWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJHRVRcIlxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgc2VuZFRlc3RFbWFpbChkYXRhKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoYC9pbnRlcm5hbC9zZW5kLXRlc3QtZW1haWxgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXG4gICAgfSwgbnVsbCk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBsaXN0U2VudEVtYWlscygpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcIi9pbnRlcm5hbC9lbWFpbHNcIiwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiXG4gICAgfSwgbnVsbCk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBzZW5kU2lnbkluSW52aXRhdGlvbkVtYWlsKGVtYWlsLCBjYWxsYmFja1VybCkge1xuICAgIGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcbiAgICAgIFwiL2ludGVybmFsL3NlbmQtc2lnbi1pbi1pbnZpdGF0aW9uXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgZW1haWwsXG4gICAgICAgICAgY2FsbGJhY2tfdXJsOiBjYWxsYmFja1VybFxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICB9XG4gIGFzeW5jIHNlbmRDaGF0TWVzc2FnZSh0aHJlYWRJZCwgY29udGV4dFR5cGUsIG1lc3NhZ2VzLCBhYm9ydFNpZ25hbCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgYC9pbnRlcm5hbC9haS1jaGF0LyR7dGhyZWFkSWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgY29udGV4dF90eXBlOiBjb250ZXh0VHlwZSwgbWVzc2FnZXMgfSksXG4gICAgICAgIHNpZ25hbDogYWJvcnRTaWduYWxcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIHNhdmVDaGF0TWVzc2FnZSh0aHJlYWRJZCwgbWVzc2FnZSkge1xuICAgIGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcbiAgICAgIGAvaW50ZXJuYWwvYWktY2hhdC8ke3RocmVhZElkfWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlIH0pXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gIH1cbiAgYXN5bmMgbGlzdENoYXRNZXNzYWdlcyh0aHJlYWRJZCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgYC9pbnRlcm5hbC9haS1jaGF0LyR7dGhyZWFkSWR9YCxcbiAgICAgIHsgbWV0aG9kOiBcIkdFVFwiIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIHJlbmRlckVtYWlsUHJldmlldyhvcHRpb25zKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoYC9lbWFpbHMvcmVuZGVyLWVtYWlsYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHRoZW1lX2lkOiBvcHRpb25zLnRoZW1lSWQsXG4gICAgICAgIHRoZW1lX3RzeF9zb3VyY2U6IG9wdGlvbnMudGhlbWVUc3hTb3VyY2UsXG4gICAgICAgIHRlbXBsYXRlX2lkOiBvcHRpb25zLnRlbXBsYXRlSWQsXG4gICAgICAgIHRlbXBsYXRlX3RzeF9zb3VyY2U6IG9wdGlvbnMudGVtcGxhdGVUc3hTb3VyY2VcbiAgICAgIH0pXG4gICAgfSwgbnVsbCk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBjcmVhdGVFbWFpbFRoZW1lKGRpc3BsYXlOYW1lKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoXG4gICAgICBgL2ludGVybmFsL2VtYWlsLXRoZW1lc2AsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgZGlzcGxheV9uYW1lOiBkaXNwbGF5TmFtZVxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgZ2V0RW1haWxUaGVtZShpZCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgYC9pbnRlcm5hbC9lbWFpbC10aGVtZXMvJHtpZH1gLFxuICAgICAgeyBtZXRob2Q6IFwiR0VUXCIgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlRW1haWxUaGVtZShpZCwgdHN4U291cmNlKSB7XG4gICAgYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgYC9pbnRlcm5hbC9lbWFpbC10aGVtZXMvJHtpZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICB0c3hfc291cmNlOiB0c3hTb3VyY2VcbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuICBhc3luYyB1cGRhdGVFbWFpbFRlbXBsYXRlKGlkLCB0c3hTb3VyY2UsIHRoZW1lSWQpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcbiAgICAgIGAvaW50ZXJuYWwvZW1haWwtdGVtcGxhdGVzLyR7aWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHRzeF9zb3VyY2U6IHRzeFNvdXJjZSwgdGhlbWVfaWQ6IHRoZW1lSWQgfSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIGdldENvbmZpZygpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcbiAgICAgIGAvaW50ZXJuYWwvY29uZmlnYCxcbiAgICAgIHsgbWV0aG9kOiBcIkdFVFwiIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIHVwZGF0ZUNvbmZpZyhkYXRhKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoXG4gICAgICBgL2ludGVybmFsL2NvbmZpZy9vdmVycmlkZWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBjb25maWdfb3ZlcnJpZGVfc3RyaW5nOiBKU09OLnN0cmluZ2lmeShkYXRhLmNvbmZpZ092ZXJyaWRlKSB9KVxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgY3JlYXRlRW1haWxUZW1wbGF0ZShkaXNwbGF5TmFtZSkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgYC9pbnRlcm5hbC9lbWFpbC10ZW1wbGF0ZXNgLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGRpc3BsYXlfbmFtZTogZGlzcGxheU5hbWVcbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIHNldHVwUGF5bWVudHMoKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoXG4gICAgICBcIi9pbnRlcm5hbC9wYXltZW50cy9zZXR1cFwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe30pXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBnZXRTdHJpcGVBY2NvdW50SW5mbygpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcbiAgICAgIFwiL2ludGVybmFsL3BheW1lbnRzL3N0cmlwZS9hY2NvdW50LWluZm9cIixcbiAgICAgIHt9LFxuICAgICAgbnVsbCxcbiAgICAgIFtLbm93bkVycm9ycy5TdHJpcGVBY2NvdW50SW5mb05vdEZvdW5kXVxuICAgICk7XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmRhdGEuanNvbigpO1xuICB9XG4gIGFzeW5jIGNyZWF0ZVN0cmlwZVdpZGdldEFjY291bnRTZXNzaW9uKCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgXCIvaW50ZXJuYWwvcGF5bWVudHMvc3RyaXBlLXdpZGdldHMvYWNjb3VudC1zZXNzaW9uXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7fSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIGxpc3RUcmFuc2FjdGlvbnMocGFyYW1zKSB7XG4gICAgY29uc3QgcXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gICAgaWYgKHBhcmFtcz8uY3Vyc29yKSBxcy5zZXQoXCJjdXJzb3JcIiwgcGFyYW1zLmN1cnNvcik7XG4gICAgaWYgKHR5cGVvZiBwYXJhbXM/LmxpbWl0ID09PSBcIm51bWJlclwiKSBxcy5zZXQoXCJsaW1pdFwiLCBTdHJpbmcocGFyYW1zLmxpbWl0KSk7XG4gICAgaWYgKHBhcmFtcz8udHlwZSkgcXMuc2V0KFwidHlwZVwiLCBwYXJhbXMudHlwZSk7XG4gICAgaWYgKHBhcmFtcz8uY3VzdG9tZXJUeXBlKSBxcy5zZXQoXCJjdXN0b21lcl90eXBlXCIsIHBhcmFtcy5jdXN0b21lclR5cGUpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgYC9pbnRlcm5hbC9wYXltZW50cy90cmFuc2FjdGlvbnMke3FzLnNpemUgPyBgPyR7cXMudG9TdHJpbmcoKX1gIDogXCJcIn1gLFxuICAgICAgeyBtZXRob2Q6IFwiR0VUXCIgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHsgdHJhbnNhY3Rpb25zOiBqc29uLnRyYW5zYWN0aW9ucywgbmV4dEN1cnNvcjoganNvbi5uZXh0X2N1cnNvciB9O1xuICB9XG4gIGFzeW5jIHRlc3RNb2RlUHVyY2hhc2Uob3B0aW9ucykge1xuICAgIGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcbiAgICAgIFwiL2ludGVybmFsL3BheW1lbnRzL3Rlc3QtbW9kZS1wdXJjaGFzZS1zZXNzaW9uXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHsgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkob3B0aW9ucylcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxufTtcbmV4cG9ydCB7XG4gIFN0YWNrQWRtaW5JbnRlcmZhY2Vcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZG1pbi1pbnRlcmZhY2UuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/admin-interface.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/client-interface.js":
/*!**********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/client-interface.js ***!
  \**********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StackClientInterface: () => (/* binding */ StackClientInterface)\n/* harmony export */ });\n/* harmony import */ var oauth4webapi__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! oauth4webapi */ \"(rsc)/./node_modules/.pnpm/oauth4webapi@2.17.0/node_modules/oauth4webapi/build/index.js\");\n/* harmony import */ var _known_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../known-errors.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/known-errors.js\");\n/* harmony import */ var _sessions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sessions.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/sessions.js\");\n/* harmony import */ var _utils_crypto_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/crypto.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/crypto.js\");\n/* harmony import */ var _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/errors.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n/* harmony import */ var _utils_globals_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/globals.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/globals.js\");\n/* harmony import */ var _utils_http_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/http.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/http.js\");\n/* harmony import */ var _utils_objects_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/objects.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/objects.js\");\n/* harmony import */ var _utils_promises_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/promises.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/promises.js\");\n/* harmony import */ var _utils_results_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/results.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/results.js\");\n/* harmony import */ var _utils_strings_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/strings.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/strings.js\");\n/* harmony import */ var _utils_urls_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utils/urls.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/urls.js\");\n// src/interface/client-interface.ts\n\n\n\n\n\n\n\n\n\n\n\n\nvar StackClientInterface = class {\n  constructor(options) {\n    this.options = options;\n  }\n  get projectId() {\n    return this.options.projectId;\n  }\n  getApiUrl() {\n    return this.options.getBaseUrl() + \"/api/v1\";\n  }\n  async runNetworkDiagnostics(session, requestType) {\n    const tryRequest = async (cb) => {\n      try {\n        await cb();\n        return \"OK\";\n      } catch (e) {\n        return `${e}`;\n      }\n    };\n    const cfTrace = await tryRequest(async () => {\n      const res = await fetch(\"https://1.1.1.1/cdn-cgi/trace\");\n      if (!res.ok) {\n        throw new Error(`${res.status} ${res.statusText}: ${await res.text()}`);\n      }\n    });\n    const apiRoot = session !== void 0 && requestType !== void 0 ? await tryRequest(async () => {\n      const res = await this.sendClientRequestInner(\"/\", {}, session, requestType);\n      if (res.status === \"error\") {\n        throw res.error;\n      }\n    }) : \"Not tested\";\n    const baseUrlBackend = await tryRequest(async () => {\n      const res = await fetch(new URL(\"/health\", this.getApiUrl()));\n      if (!res.ok) {\n        throw new Error(`${res.status} ${res.statusText}: ${await res.text()}`);\n      }\n    });\n    const prodDashboard = await tryRequest(async () => {\n      const res = await fetch(\"https://app.stack-auth.com/health\");\n      if (!res.ok) {\n        throw new Error(`${res.status} ${res.statusText}: ${await res.text()}`);\n      }\n    });\n    const prodBackend = await tryRequest(async () => {\n      const res = await fetch(\"https://api.stack-auth.com/health\");\n      if (!res.ok) {\n        throw new Error(`${res.status} ${res.statusText}: ${await res.text()}`);\n      }\n    });\n    return {\n      \"navigator?.onLine\": _utils_globals_js__WEBPACK_IMPORTED_MODULE_4__.globalVar.navigator?.onLine,\n      cfTrace,\n      apiRoot,\n      baseUrlBackend,\n      prodDashboard,\n      prodBackend\n    };\n  }\n  async _createNetworkError(cause, session, requestType) {\n    return new Error((0,_utils_strings_js__WEBPACK_IMPORTED_MODULE_9__.deindent)`\n      Stack Auth is unable to connect to the server. Please check your internet connection and try again.\n\n      If the problem persists, please contact support and provide a screenshot of your entire browser console.\n\n      ${cause}\n\n      ${JSON.stringify(await this.runNetworkDiagnostics(session, requestType), null, 2)}\n    `, { cause });\n  }\n  async _networkRetry(cb, session, requestType) {\n    const retriedResult = await _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.retry(\n      cb,\n      5,\n      { exponentialDelayBase: 1e3 }\n    );\n    if (retriedResult.status === \"error\") {\n      if (_utils_globals_js__WEBPACK_IMPORTED_MODULE_4__.globalVar.navigator && _utils_globals_js__WEBPACK_IMPORTED_MODULE_4__.globalVar.navigator.onLine === false) {\n        throw new Error(\"You are offline. Please check your internet connection and try again. (window.navigator.onLine is false)\", { cause: retriedResult.error });\n      }\n      throw await this._createNetworkError(retriedResult.error, session, requestType);\n    }\n    return retriedResult.data;\n  }\n  async _networkRetryException(cb, session, requestType) {\n    return await this._networkRetry(async () => await _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.fromThrowingAsync(cb), session, requestType);\n  }\n  async fetchNewAccessToken(refreshToken) {\n    if (!(\"publishableClientKey\" in this.options)) {\n      throw new Error(\"Admin session token is currently not supported for fetching new access token. Did you try to log in on a StackApp initiated with the admin session?\");\n    }\n    const as = {\n      issuer: this.options.getBaseUrl(),\n      algorithm: \"oauth2\",\n      token_endpoint: this.getApiUrl() + \"/auth/oauth/token\"\n    };\n    const client = {\n      client_id: this.projectId,\n      client_secret: this.options.publishableClientKey,\n      token_endpoint_auth_method: \"client_secret_post\"\n    };\n    const rawResponse = await this._networkRetryException(\n      async () => await oauth4webapi__WEBPACK_IMPORTED_MODULE_11__.refreshTokenGrantRequest(\n        as,\n        client,\n        refreshToken.token\n      )\n    );\n    const response = await this._processResponse(rawResponse);\n    if (response.status === \"error\") {\n      const error = response.error;\n      if (_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.RefreshTokenError.isInstance(error)) {\n        return null;\n      }\n      throw error;\n    }\n    if (!response.data.ok) {\n      const body = await response.data.text();\n      throw new Error(`Failed to send refresh token request: ${response.status} ${body}`);\n    }\n    const result = await oauth4webapi__WEBPACK_IMPORTED_MODULE_11__.processRefreshTokenResponse(as, client, response.data);\n    if (oauth4webapi__WEBPACK_IMPORTED_MODULE_11__.isOAuth2Error(result)) {\n      throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"OAuth error\", { result });\n    }\n    if (!result.access_token) {\n      throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Access token not found in token endpoint response, this is weird!\");\n    }\n    return _sessions_js__WEBPACK_IMPORTED_MODULE_1__.AccessToken.createIfValid(result.access_token) ?? (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.throwErr)(\"Access token in fetchNewAccessToken is invalid, looks like the backend is returning an invalid token!\", { result });\n  }\n  async sendClientRequest(path, requestOptions, session, requestType = \"client\") {\n    session ??= this.createSession({\n      refreshToken: null\n    });\n    return await this._networkRetry(\n      () => this.sendClientRequestInner(path, requestOptions, session, requestType),\n      session,\n      requestType\n    );\n  }\n  createSession(options) {\n    const session = new _sessions_js__WEBPACK_IMPORTED_MODULE_1__.InternalSession({\n      refreshAccessTokenCallback: async (refreshToken) => await this.fetchNewAccessToken(refreshToken),\n      ...options\n    });\n    return session;\n  }\n  async sendClientRequestAndCatchKnownError(path, requestOptions, tokenStoreOrNull, errorsToCatch) {\n    try {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(await this.sendClientRequest(path, requestOptions, tokenStoreOrNull));\n    } catch (e) {\n      for (const errorType of errorsToCatch) {\n        if (errorType.isInstance(e)) {\n          return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(e);\n        }\n      }\n      throw e;\n    }\n  }\n  async sendClientRequestInner(path, options, session, requestType) {\n    let tokenObj = await session.getOrFetchLikelyValidTokens(2e4);\n    let adminSession = \"projectOwnerSession\" in this.options ? this.options.projectOwnerSession : null;\n    let adminTokenObj = adminSession ? await adminSession.getOrFetchLikelyValidTokens(2e4) : null;\n    await this.options.prepareRequest?.();\n    let url = this.getApiUrl() + path;\n    if (url.endsWith(\"/\")) {\n      url = url.slice(0, -1);\n    }\n    const params = {\n      /**\n       * This fetch may be cross-origin, in which case we don't want to send cookies of the\n       * original origin (this is the default behavior of `credentials`).\n       *\n       * To help debugging, also omit cookies on same-origin, so we don't accidentally\n       * implement reliance on cookies anywhere.\n       *\n       * However, Cloudflare Workers don't actually support `credentials`, so we only set it\n       * if Cloudflare-exclusive globals are not detected. https://github.com/cloudflare/workers-sdk/issues/2514\n       */\n      ...\"WebSocketPair\" in _utils_globals_js__WEBPACK_IMPORTED_MODULE_4__.globalVar ? {} : {\n        credentials: \"omit\"\n      },\n      ...options,\n      headers: {\n        \"X-Stack-Override-Error-Status\": \"true\",\n        \"X-Stack-Project-Id\": this.projectId,\n        \"X-Stack-Access-Type\": requestType,\n        \"X-Stack-Client-Version\": this.options.clientVersion,\n        ...tokenObj ? {\n          \"X-Stack-Access-Token\": tokenObj.accessToken.token\n        } : {},\n        ...tokenObj?.refreshToken ? {\n          \"X-Stack-Refresh-Token\": tokenObj.refreshToken.token\n        } : {},\n        \"X-Stack-Allow-Anonymous-User\": \"true\",\n        ...\"publishableClientKey\" in this.options ? {\n          \"X-Stack-Publishable-Client-Key\": this.options.publishableClientKey\n        } : {},\n        ...adminTokenObj ? {\n          \"X-Stack-Admin-Access-Token\": adminTokenObj.accessToken.token\n        } : {},\n        /**\n         * Next.js until v15 would cache fetch requests by default, and forcefully disabling it was nearly impossible.\n         *\n         * This header is used to change the cache key and hence always disable it, because we do our own caching.\n         *\n         * When we drop support for Next.js <15, we may be able to remove this header, but please make sure that this is\n         * the case (I haven't actually tested.)\n         */\n        \"X-Stack-Random-Nonce\": (0,_utils_crypto_js__WEBPACK_IMPORTED_MODULE_2__.generateSecureRandomString)(),\n        // don't show a warning when proxying the API through ngrok (only relevant if the API url is an ngrok site)\n        \"ngrok-skip-browser-warning\": \"true\",\n        ...this.options.extraRequestHeaders,\n        ...options.headers\n      },\n      /**\n       * Cloudflare Workers does not support cache, so don't pass it there\n       */\n      ...\"WebSocketPair\" in _utils_globals_js__WEBPACK_IMPORTED_MODULE_4__.globalVar ? {} : {\n        cache: \"no-store\"\n      }\n    };\n    let rawRes;\n    try {\n      rawRes = await fetch(url, params);\n    } catch (e) {\n      if (e instanceof TypeError) {\n        if (_utils_http_js__WEBPACK_IMPORTED_MODULE_5__.HTTP_METHODS[params.method ?? \"GET\"].idempotent) {\n          return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(e);\n        } else {\n          throw await this._createNetworkError(e, session, requestType);\n        }\n      }\n      throw e;\n    }\n    const processedRes = await this._processResponse(rawRes);\n    if (processedRes.status === \"error\") {\n      if (_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.InvalidAccessToken.isInstance(processedRes.error)) {\n        if (!tokenObj) {\n          throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Received invalid access token, but session is not logged in\", { tokenObj, processedRes });\n        }\n        session.markAccessTokenExpired(tokenObj.accessToken);\n        return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(processedRes.error);\n      }\n      if (adminSession && (_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.InvalidAdminAccessToken.isInstance(processedRes.error) || _known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.ApiKeyNotFound.isInstance(processedRes.error))) {\n        if (!adminTokenObj) {\n          throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Received invalid admin access token, but admin session is not logged in\", { adminTokenObj, processedRes });\n        }\n        adminSession.markAccessTokenExpired(adminTokenObj.accessToken);\n        return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(processedRes.error);\n      }\n      throw processedRes.error;\n    }\n    const res = Object.assign(processedRes.data, {\n      usedTokens: tokenObj\n    });\n    if (res.ok) {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(res);\n    } else if (res.status === 429) {\n      const retryAfter = res.headers.get(\"Retry-After\");\n      if (retryAfter !== null) {\n        console.log(`Rate limited while sending request to ${url}. Will retry after ${retryAfter} seconds...`);\n        await (0,_utils_promises_js__WEBPACK_IMPORTED_MODULE_7__.wait)(Number(retryAfter) * 1e3);\n        return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(new Error(`Rate limited, retrying after ${retryAfter} seconds`));\n      }\n      console.log(`Rate limited while sending request to ${url}, no retry-after header received. Retrying...`);\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(new Error(\"Rate limited, no retry-after header received\"));\n    } else {\n      const error = await res.text();\n      const errorObj = new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(`Failed to send request to ${url}: ${res.status} ${error}`, { request: params, res, path });\n      if (res.status === 508 && error.includes(\"INFINITE_LOOP_DETECTED\")) {\n        return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(errorObj);\n      }\n      throw errorObj;\n    }\n  }\n  async _processResponse(rawRes) {\n    let res = rawRes;\n    if (rawRes.headers.has(\"x-stack-actual-status\")) {\n      const actualStatus = Number(rawRes.headers.get(\"x-stack-actual-status\"));\n      res = new Response(rawRes.body, {\n        status: actualStatus,\n        statusText: rawRes.statusText,\n        headers: rawRes.headers\n      });\n    }\n    if (res.headers.has(\"x-stack-known-error\")) {\n      const errorJson = await res.json();\n      if (res.headers.get(\"x-stack-known-error\") !== errorJson.code) {\n        throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Mismatch between x-stack-known-error header and error code in body; the server's response is invalid\");\n      }\n      const error = _known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownError.fromJson(errorJson);\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(error);\n    }\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(res);\n  }\n  async checkFeatureSupport(options) {\n    const res = await this.sendClientRequest(\"/check-feature-support\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(options)\n    }, null);\n    throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(await res.text());\n  }\n  async sendForgotPasswordEmail(email, callbackUrl) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/password/send-reset-code\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          callback_url: callbackUrl\n        })\n      },\n      null,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.UserNotFound]\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    } else {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(void 0);\n    }\n  }\n  async sendVerificationEmail(email, callbackUrl, session) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/contact-channels/send-verification-code\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          callback_url: callbackUrl\n        })\n      },\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.EmailAlreadyVerified]\n    );\n    if (res.status === \"error\") {\n      return res.error;\n    }\n  }\n  async sendMagicLinkEmail(email, callbackUrl) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/otp/send-sign-in-code\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          callback_url: callbackUrl\n        })\n      },\n      null,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.RedirectUrlNotWhitelisted]\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    } else {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(await res.data.json());\n    }\n  }\n  async resetPassword(options) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"onlyVerifyCode\" in options ? \"/auth/password/reset/check-code\" : \"/auth/password/reset\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          code: options.code,\n          ...\"password\" in options ? { password: options.password } : {}\n        })\n      },\n      null,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.VerificationCodeError]\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    } else {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(void 0);\n    }\n  }\n  async updatePassword(options, session) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/password/update\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          old_password: options.oldPassword,\n          new_password: options.newPassword\n        })\n      },\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.PasswordConfirmationMismatch, _known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.PasswordRequirementsNotMet]\n    );\n    if (res.status === \"error\") {\n      return res.error;\n    }\n  }\n  async setPassword(options, session) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/password/set\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(options)\n      },\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.PasswordRequirementsNotMet]\n    );\n    if (res.status === \"error\") {\n      return res.error;\n    }\n  }\n  async verifyPasswordResetCode(code) {\n    const res = await this.resetPassword({ code, onlyVerifyCode: true });\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    } else {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(void 0);\n    }\n  }\n  async verifyEmail(code) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/contact-channels/verify\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          code\n        })\n      },\n      null,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.VerificationCodeError]\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    } else {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(void 0);\n    }\n  }\n  async initiatePasskeyRegistration(options, session) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/passkey/initiate-passkey-registration\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(options)\n      },\n      session,\n      []\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    }\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(await res.data.json());\n  }\n  async registerPasskey(options, session) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/passkey/register\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(options)\n      },\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.PasskeyRegistrationFailed]\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    }\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(void 0);\n  }\n  async initiatePasskeyAuthentication(options, session) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/passkey/initiate-passkey-authentication\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(options)\n      },\n      session,\n      []\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    }\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(await res.data.json());\n  }\n  async sendTeamInvitation(options) {\n    await this.sendClientRequest(\n      \"/team-invitations/send-code\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email: options.email,\n          team_id: options.teamId,\n          callback_url: options.callbackUrl\n        })\n      },\n      options.session\n    );\n  }\n  async acceptTeamInvitation(options) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      options.type === \"check\" ? \"/team-invitations/accept/check-code\" : options.type === \"details\" ? \"/team-invitations/accept/details\" : \"/team-invitations/accept\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          code: options.code\n        })\n      },\n      options.session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.VerificationCodeError]\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    } else {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(await res.data.json());\n    }\n  }\n  async totpMfa(attemptCode, totp, session) {\n    const res = await this.sendClientRequest(\"/auth/mfa/sign-in\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        code: attemptCode,\n        type: \"totp\",\n        totp\n      })\n    }, session);\n    const result = await res.json();\n    return {\n      accessToken: result.access_token,\n      refreshToken: result.refresh_token,\n      newUser: result.is_new_user\n    };\n  }\n  async signInWithCredential(email, password, session) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/password/sign-in\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      },\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.EmailPasswordMismatch]\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    }\n    const result = await res.data.json();\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok({\n      accessToken: result.access_token,\n      refreshToken: result.refresh_token\n    });\n  }\n  async signUpWithCredential(email, password, emailVerificationRedirectUrl, session) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/password/sign-up\",\n      {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        method: \"POST\",\n        body: JSON.stringify({\n          email,\n          password,\n          verification_callback_url: emailVerificationRedirectUrl\n        })\n      },\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.UserWithEmailAlreadyExists, _known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.PasswordRequirementsNotMet]\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    }\n    const result = await res.data.json();\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok({\n      accessToken: result.access_token,\n      refreshToken: result.refresh_token\n    });\n  }\n  async signUpAnonymously(session) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/anonymous/sign-up\",\n      {\n        method: \"POST\"\n      },\n      session,\n      []\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    }\n    const result = await res.data.json();\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok({\n      accessToken: result.access_token,\n      refreshToken: result.refresh_token\n    });\n  }\n  async signInWithMagicLink(code, session) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/otp/sign-in\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          code\n        })\n      },\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.VerificationCodeError]\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    }\n    const result = await res.data.json();\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok({\n      accessToken: result.access_token,\n      refreshToken: result.refresh_token,\n      newUser: result.is_new_user\n    });\n  }\n  async signInWithMfa(totp, code, session) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/mfa/sign-in\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          type: \"totp\",\n          totp,\n          code\n        })\n      },\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.VerificationCodeError]\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    }\n    const result = await res.data.json();\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok({\n      accessToken: result.access_token,\n      refreshToken: result.refresh_token,\n      newUser: result.is_new_user\n    });\n  }\n  async signInWithPasskey(body, session) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/passkey/sign-in\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(body)\n      },\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.PasskeyAuthenticationFailed]\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    }\n    const result = await res.data.json();\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok({\n      accessToken: result.access_token,\n      refreshToken: result.refresh_token\n    });\n  }\n  async getOAuthUrl(options) {\n    const updatedRedirectUrl = new URL(options.redirectUrl);\n    for (const key of [\"code\", \"state\"]) {\n      if (updatedRedirectUrl.searchParams.has(key)) {\n        console.warn(\"Redirect URL already contains \" + key + \" parameter, removing it as it will be overwritten by the OAuth callback\");\n      }\n      updatedRedirectUrl.searchParams.delete(key);\n    }\n    if (!(\"publishableClientKey\" in this.options)) {\n      throw new Error(\"Admin session token is currently not supported for OAuth\");\n    }\n    const url = new URL(this.getApiUrl() + \"/auth/oauth/authorize/\" + options.provider.toLowerCase());\n    url.searchParams.set(\"client_id\", this.projectId);\n    url.searchParams.set(\"client_secret\", this.options.publishableClientKey);\n    url.searchParams.set(\"redirect_uri\", updatedRedirectUrl.toString());\n    url.searchParams.set(\"scope\", \"legacy\");\n    url.searchParams.set(\"state\", options.state);\n    url.searchParams.set(\"grant_type\", \"authorization_code\");\n    url.searchParams.set(\"code_challenge\", options.codeChallenge);\n    url.searchParams.set(\"code_challenge_method\", \"S256\");\n    url.searchParams.set(\"response_type\", \"code\");\n    url.searchParams.set(\"type\", options.type);\n    url.searchParams.set(\"error_redirect_url\", options.errorRedirectUrl);\n    const tokens = await options.session.getOrFetchLikelyValidTokens(2e4);\n    if (tokens) {\n      url.searchParams.set(\"token\", tokens.accessToken.token);\n    }\n    if (options.afterCallbackRedirectUrl) {\n      url.searchParams.set(\"after_callback_redirect_url\", options.afterCallbackRedirectUrl);\n    }\n    if (options.providerScope) {\n      url.searchParams.set(\"provider_scope\", options.providerScope);\n    }\n    return url.toString();\n  }\n  async callOAuthCallback(options) {\n    if (!(\"publishableClientKey\" in this.options)) {\n      throw new Error(\"Admin session token is currently not supported for OAuth\");\n    }\n    const as = {\n      issuer: this.options.getBaseUrl(),\n      algorithm: \"oauth2\",\n      token_endpoint: this.getApiUrl() + \"/auth/oauth/token\"\n    };\n    const client = {\n      client_id: this.projectId,\n      client_secret: this.options.publishableClientKey,\n      token_endpoint_auth_method: \"client_secret_post\"\n    };\n    const params = await this._networkRetryException(\n      async () => oauth4webapi__WEBPACK_IMPORTED_MODULE_11__.validateAuthResponse(as, client, options.oauthParams, options.state)\n    );\n    if (oauth4webapi__WEBPACK_IMPORTED_MODULE_11__.isOAuth2Error(params)) {\n      throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Error validating outer OAuth response\", { params });\n    }\n    const response = await oauth4webapi__WEBPACK_IMPORTED_MODULE_11__.authorizationCodeGrantRequest(\n      as,\n      client,\n      params,\n      options.redirectUri,\n      options.codeVerifier\n    );\n    const result = await oauth4webapi__WEBPACK_IMPORTED_MODULE_11__.processAuthorizationCodeOAuth2Response(as, client, response);\n    if (oauth4webapi__WEBPACK_IMPORTED_MODULE_11__.isOAuth2Error(result)) {\n      if (\"code\" in result && result.code === \"MULTI_FACTOR_AUTHENTICATION_REQUIRED\") {\n        throw new _known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.MultiFactorAuthenticationRequired(result.details.attempt_code);\n      }\n      throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Outer OAuth error during authorization code response\", { result });\n    }\n    return {\n      newUser: result.is_new_user,\n      afterCallbackRedirectUrl: result.after_callback_redirect_url,\n      accessToken: result.access_token,\n      refreshToken: result.refresh_token ?? (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.throwErr)(\"Refresh token not found in outer OAuth response\")\n    };\n  }\n  async signOut(session) {\n    const tokenObj = await session.getOrFetchLikelyValidTokens(2e4);\n    if (tokenObj) {\n      const resOrError = await this.sendClientRequestAndCatchKnownError(\n        \"/auth/sessions/current\",\n        {\n          method: \"DELETE\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({})\n        },\n        session,\n        [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.RefreshTokenError]\n      );\n      if (resOrError.status === \"error\") {\n        if (_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.RefreshTokenError.isInstance(resOrError.error)) {\n        } else {\n          throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Unexpected error\", { error: resOrError.error });\n        }\n      } else {\n      }\n    }\n    session.markInvalid();\n  }\n  async getClientUserByToken(session) {\n    const responseOrError = await this.sendClientRequestAndCatchKnownError(\n      \"/users/me\",\n      {},\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.CannotGetOwnUserWithoutUser]\n    );\n    if (responseOrError.status === \"error\") {\n      if (_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.CannotGetOwnUserWithoutUser.isInstance(responseOrError.error)) {\n        return null;\n      } else {\n        throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Unexpected uncaught error\", { cause: responseOrError.error });\n      }\n    }\n    const response = responseOrError.data;\n    const user = await response.json();\n    if (!user) throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"User endpoint returned null; this should never happen\");\n    return user;\n  }\n  async listTeamInvitations(options, session) {\n    const response = await this.sendClientRequest(\n      \"/team-invitations?\" + new URLSearchParams({ team_id: options.teamId }),\n      {},\n      session\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async revokeTeamInvitation(invitationId, teamId, session) {\n    await this.sendClientRequest(\n      `/team-invitations/${invitationId}?team_id=${teamId}`,\n      { method: \"DELETE\" },\n      session\n    );\n  }\n  async listTeamMemberProfiles(options, session) {\n    const response = await this.sendClientRequest(\n      \"/team-member-profiles?\" + new URLSearchParams((0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_6__.filterUndefined)({\n        team_id: options.teamId,\n        user_id: options.userId\n      })),\n      {},\n      session\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async getTeamMemberProfile(options, session) {\n    const response = await this.sendClientRequest(\n      `/team-member-profiles/${options.teamId}/${options.userId}`,\n      {},\n      session\n    );\n    return await response.json();\n  }\n  async leaveTeam(teamId, session) {\n    await this.sendClientRequest(\n      `/team-memberships/${teamId}/me`,\n      {\n        method: \"DELETE\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({})\n      },\n      session\n    );\n  }\n  async updateTeamMemberProfile(options, session) {\n    await this.sendClientRequest(\n      `/team-member-profiles/${options.teamId}/${options.userId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(options.profile)\n      },\n      session\n    );\n  }\n  async updateTeam(options, session) {\n    await this.sendClientRequest(\n      `/teams/${options.teamId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(options.data)\n      },\n      session\n    );\n  }\n  async listCurrentUserTeamPermissions(options, session) {\n    const response = await this.sendClientRequest(\n      `/team-permissions?team_id=${options.teamId}&user_id=me&recursive=${options.recursive}`,\n      {},\n      session\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async listCurrentUserProjectPermissions(options, session) {\n    const response = await this.sendClientRequest(\n      `/project-permissions?user_id=me&recursive=${options.recursive}`,\n      {},\n      session\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async listCurrentUserTeams(session) {\n    const response = await this.sendClientRequest(\n      \"/teams?user_id=me\",\n      {},\n      session\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async getClientProject() {\n    const responseOrError = await this.sendClientRequestAndCatchKnownError(\"/projects/current\", {}, null, [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.ProjectNotFound]);\n    if (responseOrError.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(responseOrError.error);\n    }\n    const response = responseOrError.data;\n    const project = await response.json();\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(project);\n  }\n  async updateClientUser(update, session) {\n    await this.sendClientRequest(\n      \"/users/me\",\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(update)\n      },\n      session\n    );\n  }\n  async listProjects(session) {\n    const response = await this.sendClientRequest(\"/internal/projects\", {}, session);\n    if (!response.ok) {\n      throw new Error(\"Failed to list projects: \" + response.status + \" \" + await response.text());\n    }\n    const json = await response.json();\n    return json.items;\n  }\n  async createProject(project, session) {\n    const fetchResponse = await this.sendClientRequest(\n      \"/internal/projects\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(project)\n      },\n      session\n    );\n    if (!fetchResponse.ok) {\n      throw new Error(\"Failed to create project: \" + fetchResponse.status + \" \" + await fetchResponse.text());\n    }\n    const json = await fetchResponse.json();\n    return json;\n  }\n  async createProviderAccessToken(provider, scope, session) {\n    const response = await this.sendClientRequest(\n      `/connected-accounts/me/${provider}/access-token`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({ scope })\n      },\n      session\n    );\n    return await response.json();\n  }\n  async createClientTeam(data, session) {\n    const response = await this.sendClientRequest(\n      \"/teams\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      session\n    );\n    return await response.json();\n  }\n  async deleteTeam(teamId, session) {\n    await this.sendClientRequest(\n      `/teams/${teamId}`,\n      {\n        method: \"DELETE\"\n      },\n      session\n    );\n  }\n  async deleteCurrentUser(session) {\n    await this.sendClientRequest(\n      \"/users/me\",\n      {\n        method: \"DELETE\"\n      },\n      session\n    );\n  }\n  async createClientContactChannel(data, session) {\n    const response = await this.sendClientRequest(\n      \"/contact-channels\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      session\n    );\n    return await response.json();\n  }\n  async updateClientContactChannel(id, data, session) {\n    const response = await this.sendClientRequest(\n      `/contact-channels/me/${id}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      session\n    );\n    return await response.json();\n  }\n  async deleteClientContactChannel(id, session) {\n    await this.sendClientRequest(\n      `/contact-channels/me/${id}`,\n      {\n        method: \"DELETE\"\n      },\n      session\n    );\n  }\n  async deleteSession(sessionId, session) {\n    await this.sendClientRequest(\n      `/auth/sessions/${sessionId}?user_id=me`,\n      {\n        method: \"DELETE\"\n      },\n      session\n    );\n  }\n  async listSessions(session) {\n    const response = await this.sendClientRequest(\n      \"/auth/sessions?user_id=me\",\n      {\n        method: \"GET\"\n      },\n      session\n    );\n    return await response.json();\n  }\n  async listClientContactChannels(session) {\n    const response = await this.sendClientRequest(\n      \"/contact-channels?user_id=me\",\n      {\n        method: \"GET\"\n      },\n      session\n    );\n    const json = await response.json();\n    return json.items;\n  }\n  async sendCurrentUserContactChannelVerificationEmail(contactChannelId, callbackUrl, session) {\n    const responseOrError = await this.sendClientRequestAndCatchKnownError(\n      `/contact-channels/me/${contactChannelId}/send-verification-code`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({ callback_url: callbackUrl })\n      },\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.EmailAlreadyVerified]\n    );\n    if (responseOrError.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(responseOrError.error);\n    }\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(void 0);\n  }\n  async cliLogin(loginCode, refreshToken, session) {\n    const responseOrError = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/cli/complete\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          login_code: loginCode,\n          refresh_token: refreshToken\n        })\n      },\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.SchemaError]\n    );\n    if (responseOrError.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(responseOrError.error);\n    }\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(void 0);\n  }\n  async _getApiKeyRequestInfo(options) {\n    if (\"user_id\" in options && \"team_id\" in options) {\n      throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Cannot specify both user_id and team_id in _getApiKeyRequestInfo\");\n    }\n    return {\n      endpoint: \"team_id\" in options ? \"/team-api-keys\" : \"/user-api-keys\",\n      queryParams: new URLSearchParams((0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_6__.filterUndefinedOrNull)(options))\n    };\n  }\n  async listProjectApiKeys(options, session, requestType) {\n    const sendRequest = (requestType === \"client\" ? this.sendClientRequest : this.sendServerRequest).bind(this);\n    const { endpoint, queryParams } = await this._getApiKeyRequestInfo(options);\n    const response = await sendRequest(\n      `${endpoint}?${queryParams.toString()}`,\n      {\n        method: \"GET\"\n      },\n      session,\n      requestType\n    );\n    const json = await response.json();\n    return json.items;\n  }\n  async createProjectApiKey(data, session, requestType) {\n    const sendRequest = (requestType === \"client\" ? this.sendClientRequest : this.sendServerRequest).bind(this);\n    const { endpoint } = await this._getApiKeyRequestInfo(data);\n    const response = await sendRequest(\n      `${endpoint}`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      session,\n      requestType\n    );\n    return await response.json();\n  }\n  async getProjectApiKey(options, keyId, session, requestType) {\n    const sendRequest = (requestType === \"client\" ? this.sendClientRequest : this.sendServerRequest).bind(this);\n    const { endpoint, queryParams } = await this._getApiKeyRequestInfo(options);\n    const response = await sendRequest(\n      `${endpoint}/${keyId}?${queryParams.toString()}`,\n      {\n        method: \"GET\"\n      },\n      session,\n      requestType\n    );\n    return await response.json();\n  }\n  async updateProjectApiKey(options, keyId, data, session, requestType) {\n    const sendRequest = (requestType === \"client\" ? this.sendClientRequest : this.sendServerRequest).bind(this);\n    const { endpoint, queryParams } = await this._getApiKeyRequestInfo(options);\n    const response = await sendRequest(\n      `${endpoint}/${keyId}?${queryParams.toString()}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      session,\n      requestType\n    );\n    return await response.json();\n  }\n  async checkProjectApiKey(type, apiKey, session, requestType) {\n    const sendRequest = (requestType === \"client\" ? this.sendClientRequestAndCatchKnownError : this.sendServerRequestAndCatchKnownError).bind(this);\n    const result = await sendRequest(\n      `/${type}-api-keys/check`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({ api_key: apiKey })\n      },\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.ApiKeyNotValid]\n    );\n    if (result.status === \"error\") {\n      return null;\n    }\n    return await result.data.json();\n  }\n  async listNotificationCategories(session) {\n    const response = await this.sendClientRequest(\n      `/emails/notification-preference/me`,\n      {},\n      session\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async setNotificationsEnabled(notificationCategoryId, enabled, session) {\n    await this.sendClientRequest(\n      `/emails/notification-preference/me/${notificationCategoryId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          enabled\n        })\n      },\n      session\n    );\n  }\n  async getOAuthProvider(userId, providerId, session) {\n    const response = await this.sendClientRequest(\n      `/oauth-providers/${userId}/${providerId}`,\n      {\n        method: \"GET\"\n      },\n      session\n    );\n    return await response.json();\n  }\n  async updateOAuthProvider(userId, providerId, data, session) {\n    const response = await this.sendClientRequest(\n      `/oauth-providers/${userId}/${providerId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      session\n    );\n    return await response.json();\n  }\n  async listOAuthProviders(options = {}, session) {\n    const queryParams = new URLSearchParams((0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_6__.filterUndefined)(options));\n    const response = await this.sendClientRequest(\n      `/oauth-providers${queryParams.toString() ? `?${queryParams.toString()}` : \"\"}`,\n      {\n        method: \"GET\"\n      },\n      session\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async deleteOAuthProvider(userId, providerId, session) {\n    const response = await this.sendClientRequest(\n      `/oauth-providers/${userId}/${providerId}`,\n      {\n        method: \"DELETE\"\n      },\n      session\n    );\n    return await response.json();\n  }\n  async getItem(options, session) {\n    let customerType;\n    let customerId;\n    if (\"userId\" in options) {\n      customerType = \"user\";\n      customerId = options.userId;\n    } else if (\"teamId\" in options) {\n      customerType = \"team\";\n      customerId = options.teamId;\n    } else if (\"customCustomerId\" in options) {\n      customerType = \"custom\";\n      customerId = options.customCustomerId;\n    } else {\n      throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"getItem requires one of userId, teamId, or customCustomerId\");\n    }\n    const response = await this.sendClientRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_10__.urlString)`/payments/items/${customerType}/${customerId}/${options.itemId}`,\n      {},\n      session\n    );\n    return await response.json();\n  }\n  async createCheckoutUrl(customer_type, customer_id, offerIdOrInline, session) {\n    const offerBody = typeof offerIdOrInline === \"string\" ? { offer_id: offerIdOrInline } : { inline_offer: offerIdOrInline };\n    const response = await this.sendClientRequest(\n      \"/payments/purchases/create-purchase-url\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({ customer_type, customer_id, ...offerBody })\n      },\n      session\n    );\n    const { url } = await response.json();\n    return url;\n  }\n};\n\n//# sourceMappingURL=client-interface.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vaW50ZXJmYWNlL2NsaWVudC1pbnRlcmZhY2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ3NDO0FBQ3VCO0FBQ0M7QUFDRTtBQUNHO0FBQ25CO0FBQ0E7QUFDNkI7QUFDakM7QUFDQztBQUNFO0FBQ0Y7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSLGtCQUFrQixFQUFFO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsWUFBWSxFQUFFLGVBQWUsSUFBSSxpQkFBaUI7QUFDN0U7QUFDQSxLQUFLO0FBQ0w7QUFDQSwyREFBMkQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixZQUFZLEVBQUUsZUFBZSxJQUFJLGlCQUFpQjtBQUM3RTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsWUFBWSxFQUFFLGVBQWUsSUFBSSxpQkFBaUI7QUFDN0U7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLFlBQVksRUFBRSxlQUFlLElBQUksaUJBQWlCO0FBQzdFO0FBQ0EsS0FBSztBQUNMO0FBQ0EsMkJBQTJCLHdEQUFTO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMkRBQVE7QUFDN0I7O0FBRUE7O0FBRUEsUUFBUTs7QUFFUixRQUFRO0FB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Q0EsdUNBQXVDO0FBQ3ZDLDRDQUE0QyxrRUFBZTtBQUMzRDtBQUNBLHlCQUF5Qiw2QkFBNkIsdUJBQXVCLE9BQU87QUFDcEY7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixPQUFPLEdBQUcsV0FBVztBQUMvQztBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTixnQkFBZ0IsaUVBQW1CO0FBQ25DO0FBQ0E7QUFDQSxNQUFNLDBEQUFTLG1CQUFtQixhQUFhLEdBQUcsV0FBVyxHQUFHLGVBQWU7QUFDL0UsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4REFBOEQsNEJBQTRCLElBQUk7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULCtCQUErQiwwQ0FBMEM7QUFDekUsT0FBTztBQUNQO0FBQ0E7QUFDQSxZQUFZLE1BQU07QUFDbEI7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2dmeDJlZGVub2FzaXMvRG93bmxvYWRzL0RldmVsb3BtZW50L0VzcGFkYS9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vaW50ZXJmYWNlL2NsaWVudC1pbnRlcmZhY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2ludGVyZmFjZS9jbGllbnQtaW50ZXJmYWNlLnRzXG5pbXBvcnQgKiBhcyBvYXV0aCBmcm9tIFwib2F1dGg0d2ViYXBpXCI7XG5pbXBvcnQgeyBLbm93bkVycm9yLCBLbm93bkVycm9ycyB9IGZyb20gXCIuLi9rbm93bi1lcnJvcnMuanNcIjtcbmltcG9ydCB7IEFjY2Vzc1Rva2VuLCBJbnRlcm5hbFNlc3Npb24gfSBmcm9tIFwiLi4vc2Vzc2lvbnMuanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlU2VjdXJlUmFuZG9tU3RyaW5nIH0gZnJvbSBcIi4uL3V0aWxzL2NyeXB0by5qc1wiO1xuaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciwgdGhyb3dFcnIgfSBmcm9tIFwiLi4vdXRpbHMvZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBnbG9iYWxWYXIgfSBmcm9tIFwiLi4vdXRpbHMvZ2xvYmFscy5qc1wiO1xuaW1wb3J0IHsgSFRUUF9NRVRIT0RTIH0gZnJvbSBcIi4uL3V0aWxzL2h0dHAuanNcIjtcbmltcG9ydCB7IGZpbHRlclVuZGVmaW5lZCwgZmlsdGVyVW5kZWZpbmVkT3JOdWxsIH0gZnJvbSBcIi4uL3V0aWxzL29iamVjdHMuanNcIjtcbmltcG9ydCB7IHdhaXQgfSBmcm9tIFwiLi4vdXRpbHMvcHJvbWlzZXMuanNcIjtcbmltcG9ydCB7IFJlc3VsdCB9IGZyb20gXCIuLi91dGlscy9yZXN1bHRzLmpzXCI7XG5pbXBvcnQgeyBkZWluZGVudCB9IGZyb20gXCIuLi91dGlscy9zdHJpbmdzLmpzXCI7XG5pbXBvcnQgeyB1cmxTdHJpbmcgfSBmcm9tIFwiLi4vdXRpbHMvdXJscy5qc1wiO1xudmFyIFN0YWNrQ2xpZW50SW50ZXJmYWNlID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuICBnZXQgcHJvamVjdElkKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMucHJvamVjdElkO1xuICB9XG4gIGdldEFwaVVybCgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmdldEJhc2VVcmwoKSArIFwiL2FwaS92MVwiO1xuICB9XG4gIGFzeW5jIHJ1bk5ldHdvcmtEaWFnbm9zdGljcyhzZXNzaW9uLCByZXF1ZXN0VHlwZSkge1xuICAgIGNvbnN0IHRyeVJlcXVlc3QgPSBhc3luYyAoY2IpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGNiKCk7XG4gICAgICAgIHJldHVybiBcIk9LXCI7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBgJHtlfWA7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBjZlRyYWNlID0gYXdhaXQgdHJ5UmVxdWVzdChhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcImh0dHBzOi8vMS4xLjEuMS9jZG4tY2dpL3RyYWNlXCIpO1xuICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3Jlcy5zdGF0dXN9ICR7cmVzLnN0YXR1c1RleHR9OiAke2F3YWl0IHJlcy50ZXh0KCl9YCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgYXBpUm9vdCA9IHNlc3Npb24gIT09IHZvaWQgMCAmJiByZXF1ZXN0VHlwZSAhPT0gdm9pZCAwID8gYXdhaXQgdHJ5UmVxdWVzdChhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0SW5uZXIoXCIvXCIsIHt9LCBzZXNzaW9uLCByZXF1ZXN0VHlwZSk7XG4gICAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgIHRocm93IHJlcy5lcnJvcjtcbiAgICAgIH1cbiAgICB9KSA6IFwiTm90IHRlc3RlZFwiO1xuICAgIGNvbnN0IGJhc2VVcmxCYWNrZW5kID0gYXdhaXQgdHJ5UmVxdWVzdChhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChuZXcgVVJMKFwiL2hlYWx0aFwiLCB0aGlzLmdldEFwaVVybCgpKSk7XG4gICAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7cmVzLnN0YXR1c30gJHtyZXMuc3RhdHVzVGV4dH06ICR7YXdhaXQgcmVzLnRleHQoKX1gKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBwcm9kRGFzaGJvYXJkID0gYXdhaXQgdHJ5UmVxdWVzdChhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcImh0dHBzOi8vYXBwLnN0YWNrLWF1dGguY29tL2hlYWx0aFwiKTtcbiAgICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtyZXMuc3RhdHVzfSAke3Jlcy5zdGF0dXNUZXh0fTogJHthd2FpdCByZXMudGV4dCgpfWApO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IHByb2RCYWNrZW5kID0gYXdhaXQgdHJ5UmVxdWVzdChhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcImh0dHBzOi8vYXBpLnN0YWNrLWF1dGguY29tL2hlYWx0aFwiKTtcbiAgICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtyZXMuc3RhdHVzfSAke3Jlcy5zdGF0dXNUZXh0fTogJHthd2FpdCByZXMudGV4dCgpfWApO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICBcIm5hdmlnYXRvcj8ub25MaW5lXCI6IGdsb2JhbFZhci5uYXZpZ2F0b3I/Lm9uTGluZSxcbiAgICAgIGNmVHJhY2UsXG4gICAgICBhcGlSb290LFxuICAgICAgYmFzZVVybEJhY2tlbmQsXG4gICAgICBwcm9kRGFzaGJvYXJkLFxuICAgICAgcHJvZEJhY2tlbmRcbiAgICB9O1xuICB9XG4gIGFzeW5jIF9jcmVhdGVOZXR3b3JrRXJyb3IoY2F1c2UsIHNlc3Npb24sIHJlcXVlc3RUeXBlKSB7XG4gICAgcmV0dXJuIG5ldyBFcnJvcihkZWluZGVudGBcbiAgICAgIFN0YWNrIEF1dGggaXMgdW5hYmxlIHRvIGNvbm5lY3QgdG8gdGhlIHNlcnZlci4gUGxlYXNlIGNoZWNrIHlvdXIgaW50ZXJuZXQgY29ubmVjdGlvbiBhbmQgdHJ5IGFnYWluLlxuXG4gICAgICBJZiB0aGUgcHJvYmxlbSBwZXJzaXN0cywgcGxlYXNlIGNvbnRhY3Qgc3VwcG9ydCBhbmQgcHJvdmlkZSBhIHNjcmVlbnNob3Qgb2YgeW91ciBlbnRpcmUgYnJvd3NlciBjb25zb2xlLlxuXG4gICAgICAke2NhdXNlfVxuXG4gICAgICAke0pTT04uc3RyaW5naWZ5KGF3YWl0IHRoaXMucnVuTmV0d29ya0RpYWdub3N0aWNzKHNlc3Npb24sIHJlcXVlc3RUeXBlKSwgbnVsbCwgMil9XG4gICAgYCwgeyBjYXVzZSB9KTtcbiAgfVxuICBhc3luYyBfbmV0d29ya1JldHJ5KGNiLCBzZXNzaW9uLCByZXF1ZXN0VHlwZSkge1xuICAgIGNvbnN0IHJldHJpZWRSZXN1bHQgPSBhd2FpdCBSZXN1bHQucmV0cnkoXG4gICAgICBjYixcbiAgICAgIDUsXG4gICAgICB7IGV4cG9uZW50aWFsRGVsYXlCYXNlOiAxZTMgfVxuICAgICk7XG4gICAgaWYgKHJldHJpZWRSZXN1bHQuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgIGlmIChnbG9iYWxWYXIubmF2aWdhdG9yICYmIGdsb2JhbFZhci5uYXZpZ2F0b3Iub25MaW5lID09PSBmYWxzZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgYXJlIG9mZmxpbmUuIFBsZWFzZSBjaGVjayB5b3VyIGludGVybmV0IGNvbm5lY3Rpb24gYW5kIHRyeSBhZ2Fpbi4gKHdpbmRvdy5uYXZpZ2F0b3Iub25MaW5lIGlzIGZhbHNlKVwiLCB7IGNhdXNlOiByZXRyaWVkUmVzdWx0LmVycm9yIH0pO1xuICAgICAgfVxuICAgICAgdGhyb3cgYXdhaXQgdGhpcy5fY3JlYXRlTmV0d29ya0Vycm9yKHJldHJpZWRSZXN1bHQuZXJyb3IsIHNlc3Npb24sIHJlcXVlc3RUeXBlKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldHJpZWRSZXN1bHQuZGF0YTtcbiAgfVxuICBhc3luYyBfbmV0d29ya1JldHJ5RXhjZXB0aW9uKGNiLCBzZXNzaW9uLCByZXF1ZXN0VHlwZSkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLl9uZXR3b3JrUmV0cnkoYXN5bmMgKCkgPT4gYXdhaXQgUmVzdWx0LmZyb21UaHJvd2luZ0FzeW5jKGNiKSwgc2Vzc2lvbiwgcmVxdWVzdFR5cGUpO1xuICB9XG4gIGFzeW5jIGZldGNoTmV3QWNjZXNzVG9rZW4ocmVmcmVzaFRva2VuKSB7XG4gICAgaWYgKCEoXCJwdWJsaXNoYWJsZUNsaWVudEtleVwiIGluIHRoaXMub3B0aW9ucykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFkbWluIHNlc3Npb24gdG9rZW4gaXMgY3VycmVudGx5IG5vdCBzdXBwb3J0ZWQgZm9yIGZldGNoaW5nIG5ldyBhY2Nlc3MgdG9rZW4uIERpZCB5b3UgdHJ5IHRvIGxvZyBpbiBvbiBhIFN0YWNrQXBwIGluaXRpYXRlZCB3aXRoIHRoZSBhZG1pbiBzZXNzaW9uP1wiKTtcbiAgICB9XG4gICAgY29uc3QgYXMgPSB7XG4gICAgICBpc3N1ZXI6IHRoaXMub3B0aW9ucy5nZXRCYXNlVXJsKCksXG4gICAgICBhbGdvcml0aG06IFwib2F1dGgyXCIsXG4gICAgICB0b2tlbl9lbmRwb2ludDogdGhpcy5nZXRBcGlVcmwoKSArIFwiL2F1dGgvb2F1dGgvdG9rZW5cIlxuICAgIH07XG4gICAgY29uc3QgY2xpZW50ID0ge1xuICAgICAgY2xpZW50X2lkOiB0aGlzLnByb2plY3RJZCxcbiAgICAgIGNsaWVudF9zZWNyZXQ6IHRoaXMub3B0aW9ucy5wdWJsaXNoYWJsZUNsaWVudEtleSxcbiAgICAgIHRva2VuX2VuZHBvaW50X2F1dGhfbWV0aG9kOiBcImNsaWVudF9zZWNyZXRfcG9zdFwiXG4gICAgfTtcbiAgICBjb25zdCByYXdSZXNwb25zZSA9IGF3YWl0IHRoaXMuX25ldHdvcmtSZXRyeUV4Y2VwdGlvbihcbiAgICAgIGFzeW5jICgpID0+IGF3YWl0IG9hdXRoLnJlZnJlc2hUb2tlbkdyYW50UmVxdWVzdChcbiAgICAgICAgYXMsXG4gICAgICAgIGNsaWVudCxcbiAgICAgICAgcmVmcmVzaFRva2VuLnRva2VuXG4gICAgICApXG4gICAgKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuX3Byb2Nlc3NSZXNwb25zZShyYXdSZXNwb25zZSk7XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICBjb25zdCBlcnJvciA9IHJlc3BvbnNlLmVycm9yO1xuICAgICAgaWYgKEtub3duRXJyb3JzLlJlZnJlc2hUb2tlbkVycm9yLmlzSW5zdGFuY2UoZXJyb3IpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIGlmICghcmVzcG9uc2UuZGF0YS5vaykge1xuICAgICAgY29uc3QgYm9keSA9IGF3YWl0IHJlc3BvbnNlLmRhdGEudGV4dCgpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gc2VuZCByZWZyZXNoIHRva2VuIHJlcXVlc3Q6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke2JvZHl9YCk7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9hdXRoLnByb2Nlc3NSZWZyZXNoVG9rZW5SZXNwb25zZShhcywgY2xpZW50LCByZXNwb25zZS5kYXRhKTtcbiAgICBpZiAob2F1dGguaXNPQXV0aDJFcnJvcihyZXN1bHQpKSB7XG4gICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIk9BdXRoIGVycm9yXCIsIHsgcmVzdWx0IH0pO1xuICAgIH1cbiAgICBpZiAoIXJlc3VsdC5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiQWNjZXNzIHRva2VuIG5vdCBmb3VuZCBpbiB0b2tlbiBlbmRwb2ludCByZXNwb25zZSwgdGhpcyBpcyB3ZWlyZCFcIik7XG4gICAgfVxuICAgIHJldHVybiBBY2Nlc3NUb2tlbi5jcmVhdGVJZlZhbGlkKHJlc3VsdC5hY2Nlc3NfdG9rZW4pID8/IHRocm93RXJyKFwiQWNjZXNzIHRva2VuIGluIGZldGNoTmV3QWNjZXNzVG9rZW4gaXMgaW52YWxpZCwgbG9va3MgbGlrZSB0aGUgYmFja2VuZCBpcyByZXR1cm5pbmcgYW4gaW52YWxpZCB0b2tlbiFcIiwgeyByZXN1bHQgfSk7XG4gIH1cbiAgYXN5bmMgc2VuZENsaWVudFJlcXVlc3QocGF0aCwgcmVxdWVzdE9wdGlvbnMsIHNlc3Npb24sIHJlcXVlc3RUeXBlID0gXCJjbGllbnRcIikge1xuICAgIHNlc3Npb24gPz89IHRoaXMuY3JlYXRlU2Vzc2lvbih7XG4gICAgICByZWZyZXNoVG9rZW46IG51bGxcbiAgICB9KTtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fbmV0d29ya1JldHJ5KFxuICAgICAgKCkgPT4gdGhpcy5zZW5kQ2xpZW50UmVxdWVzdElubmVyKHBhdGgsIHJlcXVlc3RPcHRpb25zLCBzZXNzaW9uLCByZXF1ZXN0VHlwZSksXG4gICAgICBzZXNzaW9uLFxuICAgICAgcmVxdWVzdFR5cGVcbiAgICApO1xuICB9XG4gIGNyZWF0ZVNlc3Npb24ob3B0aW9ucykge1xuICAgIGNvbnN0IHNlc3Npb24gPSBuZXcgSW50ZXJuYWxTZXNzaW9uKHtcbiAgICAgIHJlZnJlc2hBY2Nlc3NUb2tlbkNhbGxiYWNrOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiBhd2FpdCB0aGlzLmZldGNoTmV3QWNjZXNzVG9rZW4ocmVmcmVzaFRva2VuKSxcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9KTtcbiAgICByZXR1cm4gc2Vzc2lvbjtcbiAgfVxuICBhc3luYyBzZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihwYXRoLCByZXF1ZXN0T3B0aW9ucywgdG9rZW5TdG9yZU9yTnVsbCwgZXJyb3JzVG9DYXRjaCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gUmVzdWx0Lm9rKGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QocGF0aCwgcmVxdWVzdE9wdGlvbnMsIHRva2VuU3RvcmVPck51bGwpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBmb3IgKGNvbnN0IGVycm9yVHlwZSBvZiBlcnJvcnNUb0NhdGNoKSB7XG4gICAgICAgIGlmIChlcnJvclR5cGUuaXNJbnN0YW5jZShlKSkge1xuICAgICAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IoZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9XG4gIGFzeW5jIHNlbmRDbGllbnRSZXF1ZXN0SW5uZXIocGF0aCwgb3B0aW9ucywgc2Vzc2lvbiwgcmVxdWVzdFR5cGUpIHtcbiAgICBsZXQgdG9rZW5PYmogPSBhd2FpdCBzZXNzaW9uLmdldE9yRmV0Y2hMaWtlbHlWYWxpZFRva2VucygyZTQpO1xuICAgIGxldCBhZG1pblNlc3Npb24gPSBcInByb2plY3RPd25lclNlc3Npb25cIiBpbiB0aGlzLm9wdGlvbnMgPyB0aGlzLm9wdGlvbnMucHJvamVjdE93bmVyU2Vzc2lvbiA6IG51bGw7XG4gICAgbGV0IGFkbWluVG9rZW5PYmogPSBhZG1pblNlc3Npb24gPyBhd2FpdCBhZG1pblNlc3Npb24uZ2V0T3JGZXRjaExpa2VseVZhbGlkVG9rZW5zKDJlNCkgOiBudWxsO1xuICAgIGF3YWl0IHRoaXMub3B0aW9ucy5wcmVwYXJlUmVxdWVzdD8uKCk7XG4gICAgbGV0IHVybCA9IHRoaXMuZ2V0QXBpVXJsKCkgKyBwYXRoO1xuICAgIGlmICh1cmwuZW5kc1dpdGgoXCIvXCIpKSB7XG4gICAgICB1cmwgPSB1cmwuc2xpY2UoMCwgLTEpO1xuICAgIH1cbiAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAvKipcbiAgICAgICAqIFRoaXMgZmV0Y2ggbWF5IGJlIGNyb3NzLW9yaWdpbiwgaW4gd2hpY2ggY2FzZSB3ZSBkb24ndCB3YW50IHRvIHNlbmQgY29va2llcyBvZiB0aGVcbiAgICAgICAqIG9yaWdpbmFsIG9yaWdpbiAodGhpcyBpcyB0aGUgZGVmYXVsdCBiZWhhdmlvciBvZiBgY3JlZGVudGlhbHNgKS5cbiAgICAgICAqXG4gICAgICAgKiBUbyBoZWxwIGRlYnVnZ2luZywgYWxzbyBvbWl0IGNvb2tpZXMgb24gc2FtZS1vcmlnaW4sIHNvIHdlIGRvbid0IGFjY2lkZW50YWxseVxuICAgICAgICogaW1wbGVtZW50IHJlbGlhbmNlIG9uIGNvb2tpZXMgYW55d2hlcmUuXG4gICAgICAgKlxuICAgICAgICogSG93ZXZlciwgQ2xvdWRmbGFyZSBXb3JrZXJzIGRvbid0IGFjdHVhbGx5IHN1cHBvcnQgYGNyZWRlbnRpYWxzYCwgc28gd2Ugb25seSBzZXQgaXRcbiAgICAgICAqIGlmIENsb3VkZmxhcmUtZXhjbHVzaXZlIGdsb2JhbHMgYXJlIG5vdCBkZXRlY3RlZC4gaHR0cHM6Ly9naXRodWIuY29tL2Nsb3VkZmxhcmUvd29ya2Vycy1zZGsvaXNzdWVzLzI1MTRcbiAgICAgICAqL1xuICAgICAgLi4uXCJXZWJTb2NrZXRQYWlyXCIgaW4gZ2xvYmFsVmFyID8ge30gOiB7XG4gICAgICAgIGNyZWRlbnRpYWxzOiBcIm9taXRcIlxuICAgICAgfSxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIFwiWC1TdGFjay1PdmVycmlkZS1FcnJvci1TdGF0dXNcIjogXCJ0cnVlXCIsXG4gICAgICAgIFwiWC1TdGFjay1Qcm9qZWN0LUlkXCI6IHRoaXMucHJvamVjdElkLFxuICAgICAgICBcIlgtU3RhY2stQWNjZXNzLVR5cGVcIjogcmVxdWVzdFR5cGUsXG4gICAgICAgIFwiWC1TdGFjay1DbGllbnQtVmVyc2lvblwiOiB0aGlzLm9wdGlvbnMuY2xpZW50VmVyc2lvbixcbiAgICAgICAgLi4udG9rZW5PYmogPyB7XG4gICAgICAgICAgXCJYLVN0YWNrLUFjY2Vzcy1Ub2tlblwiOiB0b2tlbk9iai5hY2Nlc3NUb2tlbi50b2tlblxuICAgICAgICB9IDoge30sXG4gICAgICAgIC4uLnRva2VuT2JqPy5yZWZyZXNoVG9rZW4gPyB7XG4gICAgICAgICAgXCJYLVN0YWNrLVJlZnJlc2gtVG9rZW5cIjogdG9rZW5PYmoucmVmcmVzaFRva2VuLnRva2VuXG4gICAgICAgIH0gOiB7fSxcbiAgICAgICAgXCJYLVN0YWNrLUFsbG93LUFub255bW91cy1Vc2VyXCI6IFwidHJ1ZVwiLFxuICAgICAgICAuLi5cInB1Ymxpc2hhYmxlQ2xpZW50S2V5XCIgaW4gdGhpcy5vcHRpb25zID8ge1xuICAgICAgICAgIFwiWC1TdGFjay1QdWJsaXNoYWJsZS1DbGllbnQtS2V5XCI6IHRoaXMub3B0aW9ucy5wdWJsaXNoYWJsZUNsaWVudEtleVxuICAgICAgICB9IDoge30sXG4gICAgICAgIC4uLmFkbWluVG9rZW5PYmogPyB7XG4gICAgICAgICAgXCJYLVN0YWNrLUFkbWluLUFjY2Vzcy1Ub2tlblwiOiBhZG1pblRva2VuT2JqLmFjY2Vzc1Rva2VuLnRva2VuXG4gICAgICAgIH0gOiB7fSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE5leHQuanMgdW50aWwgdjE1IHdvdWxkIGNhY2hlIGZldGNoIHJlcXVlc3RzIGJ5IGRlZmF1bHQsIGFuZCBmb3JjZWZ1bGx5IGRpc2FibGluZyBpdCB3YXMgbmVhcmx5IGltcG9zc2libGUuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgaGVhZGVyIGlzIHVzZWQgdG8gY2hhbmdlIHRoZSBjYWNoZSBrZXkgYW5kIGhlbmNlIGFsd2F5cyBkaXNhYmxlIGl0LCBiZWNhdXNlIHdlIGRvIG91ciBvd24gY2FjaGluZy5cbiAgICAgICAgICpcbiAgICAgICAgICogV2hlbiB3ZSBkcm9wIHN1cHBvcnQgZm9yIE5leHQuanMgPDE1LCB3ZSBtYXkgYmUgYWJsZSB0byByZW1vdmUgdGhpcyBoZWFkZXIsIGJ1dCBwbGVhc2UgbWFrZSBzdXJlIHRoYXQgdGhpcyBpc1xuICAgICAgICAgKiB0aGUgY2FzZSAoSSBoYXZlbid0IGFjdHVhbGx5IHRlc3RlZC4pXG4gICAgICAgICAqL1xuICAgICAgICBcIlgtU3RhY2stUmFuZG9tLU5vbmNlXCI6IGdlbmVyYXRlU2VjdXJlUmFuZG9tU3RyaW5nKCksXG4gICAgICAgIC8vIGRvbid0IHNob3cgYSB3YXJuaW5nIHdoZW4gcHJveHlpbmcgdGhlIEFQSSB0aHJvdWdoIG5ncm9rIChvbmx5IHJlbGV2YW50IGlmIHRoZSBBUEkgdXJsIGlzIGFuIG5ncm9rIHNpdGUpXG4gICAgICAgIFwibmdyb2stc2tpcC1icm93c2VyLXdhcm5pbmdcIjogXCJ0cnVlXCIsXG4gICAgICAgIC4uLnRoaXMub3B0aW9ucy5leHRyYVJlcXVlc3RIZWFkZXJzLFxuICAgICAgICAuLi5vcHRpb25zLmhlYWRlcnNcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIENsb3VkZmxhcmUgV29ya2VycyBkb2VzIG5vdCBzdXBwb3J0IGNhY2hlLCBzbyBkb24ndCBwYXNzIGl0IHRoZXJlXG4gICAgICAgKi9cbiAgICAgIC4uLlwiV2ViU29ja2V0UGFpclwiIGluIGdsb2JhbFZhciA/IHt9IDoge1xuICAgICAgICBjYWNoZTogXCJuby1zdG9yZVwiXG4gICAgICB9XG4gICAgfTtcbiAgICBsZXQgcmF3UmVzO1xuICAgIHRyeSB7XG4gICAgICByYXdSZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHBhcmFtcyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKGUgaW5zdGFuY2VvZiBUeXBlRXJyb3IpIHtcbiAgICAgICAgaWYgKEhUVFBfTUVUSE9EU1twYXJhbXMubWV0aG9kID8/IFwiR0VUXCJdLmlkZW1wb3RlbnQpIHtcbiAgICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IGF3YWl0IHRoaXMuX2NyZWF0ZU5ldHdvcmtFcnJvcihlLCBzZXNzaW9uLCByZXF1ZXN0VHlwZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRocm93IGU7XG4gICAgfVxuICAgIGNvbnN0IHByb2Nlc3NlZFJlcyA9IGF3YWl0IHRoaXMuX3Byb2Nlc3NSZXNwb25zZShyYXdSZXMpO1xuICAgIGlmIChwcm9jZXNzZWRSZXMuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgIGlmIChLbm93bkVycm9ycy5JbnZhbGlkQWNjZXNzVG9rZW4uaXNJbnN0YW5jZShwcm9jZXNzZWRSZXMuZXJyb3IpKSB7XG4gICAgICAgIGlmICghdG9rZW5PYmopIHtcbiAgICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIlJlY2VpdmVkIGludmFsaWQgYWNjZXNzIHRva2VuLCBidXQgc2Vzc2lvbiBpcyBub3QgbG9nZ2VkIGluXCIsIHsgdG9rZW5PYmosIHByb2Nlc3NlZFJlcyB9KTtcbiAgICAgICAgfVxuICAgICAgICBzZXNzaW9uLm1hcmtBY2Nlc3NUb2tlbkV4cGlyZWQodG9rZW5PYmouYWNjZXNzVG9rZW4pO1xuICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHByb2Nlc3NlZFJlcy5lcnJvcik7XG4gICAgICB9XG4gICAgICBpZiAoYWRtaW5TZXNzaW9uICYmIChLbm93bkVycm9ycy5JbnZhbGlkQWRtaW5BY2Nlc3NUb2tlbi5pc0luc3RhbmNlKHByb2Nlc3NlZFJlcy5lcnJvcikgfHwgS25vd25FcnJvcnMuQXBpS2V5Tm90Rm91bmQuaXNJbnN0YW5jZShwcm9jZXNzZWRSZXMuZXJyb3IpKSkge1xuICAgICAgICBpZiAoIWFkbWluVG9rZW5PYmopIHtcbiAgICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIlJlY2VpdmVkIGludmFsaWQgYWRtaW4gYWNjZXNzIHRva2VuLCBidXQgYWRtaW4gc2Vzc2lvbiBpcyBub3QgbG9nZ2VkIGluXCIsIHsgYWRtaW5Ub2tlbk9iaiwgcHJvY2Vzc2VkUmVzIH0pO1xuICAgICAgICB9XG4gICAgICAgIGFkbWluU2Vzc2lvbi5tYXJrQWNjZXNzVG9rZW5FeHBpcmVkKGFkbWluVG9rZW5PYmouYWNjZXNzVG9rZW4pO1xuICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHByb2Nlc3NlZFJlcy5lcnJvcik7XG4gICAgICB9XG4gICAgICB0aHJvdyBwcm9jZXNzZWRSZXMuZXJyb3I7XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IE9iamVjdC5hc3NpZ24ocHJvY2Vzc2VkUmVzLmRhdGEsIHtcbiAgICAgIHVzZWRUb2tlbnM6IHRva2VuT2JqXG4gICAgfSk7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIFJlc3VsdC5vayhyZXMpO1xuICAgIH0gZWxzZSBpZiAocmVzLnN0YXR1cyA9PT0gNDI5KSB7XG4gICAgICBjb25zdCByZXRyeUFmdGVyID0gcmVzLmhlYWRlcnMuZ2V0KFwiUmV0cnktQWZ0ZXJcIik7XG4gICAgICBpZiAocmV0cnlBZnRlciAhPT0gbnVsbCkge1xuICAgICAgICBjb25zb2xlLmxvZyhgUmF0ZSBsaW1pdGVkIHdoaWxlIHNlbmRpbmcgcmVxdWVzdCB0byAke3VybH0uIFdpbGwgcmV0cnkgYWZ0ZXIgJHtyZXRyeUFmdGVyfSBzZWNvbmRzLi4uYCk7XG4gICAgICAgIGF3YWl0IHdhaXQoTnVtYmVyKHJldHJ5QWZ0ZXIpICogMWUzKTtcbiAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihuZXcgRXJyb3IoYFJhdGUgbGltaXRlZCwgcmV0cnlpbmcgYWZ0ZXIgJHtyZXRyeUFmdGVyfSBzZWNvbmRzYCkpO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coYFJhdGUgbGltaXRlZCB3aGlsZSBzZW5kaW5nIHJlcXVlc3QgdG8gJHt1cmx9LCBubyByZXRyeS1hZnRlciBoZWFkZXIgcmVjZWl2ZWQuIFJldHJ5aW5nLi4uYCk7XG4gICAgICByZXR1cm4gUmVzdWx0LmVycm9yKG5ldyBFcnJvcihcIlJhdGUgbGltaXRlZCwgbm8gcmV0cnktYWZ0ZXIgaGVhZGVyIHJlY2VpdmVkXCIpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZXJyb3IgPSBhd2FpdCByZXMudGV4dCgpO1xuICAgICAgY29uc3QgZXJyb3JPYmogPSBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihgRmFpbGVkIHRvIHNlbmQgcmVxdWVzdCB0byAke3VybH06ICR7cmVzLnN0YXR1c30gJHtlcnJvcn1gLCB7IHJlcXVlc3Q6IHBhcmFtcywgcmVzLCBwYXRoIH0pO1xuICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDUwOCAmJiBlcnJvci5pbmNsdWRlcyhcIklORklOSVRFX0xPT1BfREVURUNURURcIikpIHtcbiAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihlcnJvck9iaik7XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnJvck9iajtcbiAgICB9XG4gIH1cbiAgYXN5bmMgX3Byb2Nlc3NSZXNwb25zZShyYXdSZXMpIHtcbiAgICBsZXQgcmVzID0gcmF3UmVzO1xuICAgIGlmIChyYXdSZXMuaGVhZGVycy5oYXMoXCJ4LXN0YWNrLWFjdHVhbC1zdGF0dXNcIikpIHtcbiAgICAgIGNvbnN0IGFjdHVhbFN0YXR1cyA9IE51bWJlcihyYXdSZXMuaGVhZGVycy5nZXQoXCJ4LXN0YWNrLWFjdHVhbC1zdGF0dXNcIikpO1xuICAgICAgcmVzID0gbmV3IFJlc3BvbnNlKHJhd1Jlcy5ib2R5LCB7XG4gICAgICAgIHN0YXR1czogYWN0dWFsU3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiByYXdSZXMuc3RhdHVzVGV4dCxcbiAgICAgICAgaGVhZGVyczogcmF3UmVzLmhlYWRlcnNcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAocmVzLmhlYWRlcnMuaGFzKFwieC1zdGFjay1rbm93bi1lcnJvclwiKSkge1xuICAgICAgY29uc3QgZXJyb3JKc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIGlmIChyZXMuaGVhZGVycy5nZXQoXCJ4LXN0YWNrLWtub3duLWVycm9yXCIpICE9PSBlcnJvckpzb24uY29kZSkge1xuICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIk1pc21hdGNoIGJldHdlZW4geC1zdGFjay1rbm93bi1lcnJvciBoZWFkZXIgYW5kIGVycm9yIGNvZGUgaW4gYm9keTsgdGhlIHNlcnZlcidzIHJlc3BvbnNlIGlzIGludmFsaWRcIik7XG4gICAgICB9XG4gICAgICBjb25zdCBlcnJvciA9IEtub3duRXJyb3IuZnJvbUpzb24oZXJyb3JKc29uKTtcbiAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgICByZXR1cm4gUmVzdWx0Lm9rKHJlcyk7XG4gIH1cbiAgYXN5bmMgY2hlY2tGZWF0dXJlU3VwcG9ydChvcHRpb25zKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcIi9jaGVjay1mZWF0dXJlLXN1cHBvcnRcIiwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvcHRpb25zKVxuICAgIH0sIG51bGwpO1xuICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKGF3YWl0IHJlcy50ZXh0KCkpO1xuICB9XG4gIGFzeW5jIHNlbmRGb3Jnb3RQYXNzd29yZEVtYWlsKGVtYWlsLCBjYWxsYmFja1VybCkge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXG4gICAgICBcIi9hdXRoL3Bhc3N3b3JkL3NlbmQtcmVzZXQtY29kZVwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgIGNhbGxiYWNrX3VybDogY2FsbGJhY2tVcmxcbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBudWxsLFxuICAgICAgW0tub3duRXJyb3JzLlVzZXJOb3RGb3VuZF1cbiAgICApO1xuICAgIGlmIChyZXMuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IocmVzLmVycm9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFJlc3VsdC5vayh2b2lkIDApO1xuICAgIH1cbiAgfVxuICBhc3luYyBzZW5kVmVyaWZpY2F0aW9uRW1haWwoZW1haWwsIGNhbGxiYWNrVXJsLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcbiAgICAgIFwiL2NvbnRhY3QtY2hhbm5lbHMvc2VuZC12ZXJpZmljYXRpb24tY29kZVwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgIGNhbGxiYWNrX3VybDogY2FsbGJhY2tVcmxcbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBzZXNzaW9uLFxuICAgICAgW0tub3duRXJyb3JzLkVtYWlsQWxyZWFkeVZlcmlmaWVkXVxuICAgICk7XG4gICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgcmV0dXJuIHJlcy5lcnJvcjtcbiAgICB9XG4gIH1cbiAgYXN5bmMgc2VuZE1hZ2ljTGlua0VtYWlsKGVtYWlsLCBjYWxsYmFja1VybCkge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXG4gICAgICBcIi9hdXRoL290cC9zZW5kLXNpZ24taW4tY29kZVwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgIGNhbGxiYWNrX3VybDogY2FsbGJhY2tVcmxcbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBudWxsLFxuICAgICAgW0tub3duRXJyb3JzLlJlZGlyZWN0VXJsTm90V2hpdGVsaXN0ZWRdXG4gICAgKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlcy5lcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBSZXN1bHQub2soYXdhaXQgcmVzLmRhdGEuanNvbigpKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgcmVzZXRQYXNzd29yZChvcHRpb25zKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcbiAgICAgIFwib25seVZlcmlmeUNvZGVcIiBpbiBvcHRpb25zID8gXCIvYXV0aC9wYXNzd29yZC9yZXNldC9jaGVjay1jb2RlXCIgOiBcIi9hdXRoL3Bhc3N3b3JkL3Jlc2V0XCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgY29kZTogb3B0aW9ucy5jb2RlLFxuICAgICAgICAgIC4uLlwicGFzc3dvcmRcIiBpbiBvcHRpb25zID8geyBwYXNzd29yZDogb3B0aW9ucy5wYXNzd29yZCB9IDoge31cbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBudWxsLFxuICAgICAgW0tub3duRXJyb3JzLlZlcmlmaWNhdGlvbkNvZGVFcnJvcl1cbiAgICApO1xuICAgIGlmIChyZXMuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IocmVzLmVycm9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFJlc3VsdC5vayh2b2lkIDApO1xuICAgIH1cbiAgfVxuICBhc3luYyB1cGRhdGVQYXNzd29yZChvcHRpb25zLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcbiAgICAgIFwiL2F1dGgvcGFzc3dvcmQvdXBkYXRlXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgb2xkX3Bhc3N3b3JkOiBvcHRpb25zLm9sZFBhc3N3b3JkLFxuICAgICAgICAgIG5ld19wYXNzd29yZDogb3B0aW9ucy5uZXdQYXNzd29yZFxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIHNlc3Npb24sXG4gICAgICBbS25vd25FcnJvcnMuUGFzc3dvcmRDb25maXJtYXRpb25NaXNtYXRjaCwgS25vd25FcnJvcnMuUGFzc3dvcmRSZXF1aXJlbWVudHNOb3RNZXRdXG4gICAgKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gcmVzLmVycm9yO1xuICAgIH1cbiAgfVxuICBhc3luYyBzZXRQYXNzd29yZChvcHRpb25zLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcbiAgICAgIFwiL2F1dGgvcGFzc3dvcmQvc2V0XCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvcHRpb25zKVxuICAgICAgfSxcbiAgICAgIHNlc3Npb24sXG4gICAgICBbS25vd25FcnJvcnMuUGFzc3dvcmRSZXF1aXJlbWVudHNOb3RNZXRdXG4gICAgKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gcmVzLmVycm9yO1xuICAgIH1cbiAgfVxuICBhc3luYyB2ZXJpZnlQYXNzd29yZFJlc2V0Q29kZShjb2RlKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5yZXNldFBhc3N3b3JkKHsgY29kZSwgb25seVZlcmlmeUNvZGU6IHRydWUgfSk7XG4gICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihyZXMuZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gUmVzdWx0Lm9rKHZvaWQgMCk7XG4gICAgfVxuICB9XG4gIGFzeW5jIHZlcmlmeUVtYWlsKGNvZGUpIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFxuICAgICAgXCIvY29udGFjdC1jaGFubmVscy92ZXJpZnlcIixcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBjb2RlXG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgbnVsbCxcbiAgICAgIFtLbm93bkVycm9ycy5WZXJpZmljYXRpb25Db2RlRXJyb3JdXG4gICAgKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlcy5lcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBSZXN1bHQub2sodm9pZCAwKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgaW5pdGlhdGVQYXNza2V5UmVnaXN0cmF0aW9uKG9wdGlvbnMsIHNlc3Npb24pIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFxuICAgICAgXCIvYXV0aC9wYXNza2V5L2luaXRpYXRlLXBhc3NrZXktcmVnaXN0cmF0aW9uXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvcHRpb25zKVxuICAgICAgfSxcbiAgICAgIHNlc3Npb24sXG4gICAgICBbXVxuICAgICk7XG4gICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihyZXMuZXJyb3IpO1xuICAgIH1cbiAgICByZXR1cm4gUmVzdWx0Lm9rKGF3YWl0IHJlcy5kYXRhLmpzb24oKSk7XG4gIH1cbiAgYXN5bmMgcmVnaXN0ZXJQYXNza2V5KG9wdGlvbnMsIHNlc3Npb24pIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFxuICAgICAgXCIvYXV0aC9wYXNza2V5L3JlZ2lzdGVyXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvcHRpb25zKVxuICAgICAgfSxcbiAgICAgIHNlc3Npb24sXG4gICAgICBbS25vd25FcnJvcnMuUGFzc2tleVJlZ2lzdHJhdGlvbkZhaWxlZF1cbiAgICApO1xuICAgIGlmIChyZXMuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IocmVzLmVycm9yKTtcbiAgICB9XG4gICAgcmV0dXJuIFJlc3VsdC5vayh2b2lkIDApO1xuICB9XG4gIGFzeW5jIGluaXRpYXRlUGFzc2tleUF1dGhlbnRpY2F0aW9uKG9wdGlvbnMsIHNlc3Npb24pIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFxuICAgICAgXCIvYXV0aC9wYXNza2V5L2luaXRpYXRlLXBhc3NrZXktYXV0aGVudGljYXRpb25cIixcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpXG4gICAgICB9LFxuICAgICAgc2Vzc2lvbixcbiAgICAgIFtdXG4gICAgKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlcy5lcnJvcik7XG4gICAgfVxuICAgIHJldHVybiBSZXN1bHQub2soYXdhaXQgcmVzLmRhdGEuanNvbigpKTtcbiAgfVxuICBhc3luYyBzZW5kVGVhbUludml0YXRpb24ob3B0aW9ucykge1xuICAgIGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXG4gICAgICBcIi90ZWFtLWludml0YXRpb25zL3NlbmQtY29kZVwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGVtYWlsOiBvcHRpb25zLmVtYWlsLFxuICAgICAgICAgIHRlYW1faWQ6IG9wdGlvbnMudGVhbUlkLFxuICAgICAgICAgIGNhbGxiYWNrX3VybDogb3B0aW9ucy5jYWxsYmFja1VybFxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIG9wdGlvbnMuc2Vzc2lvblxuICAgICk7XG4gIH1cbiAgYXN5bmMgYWNjZXB0VGVhbUludml0YXRpb24ob3B0aW9ucykge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXG4gICAgICBvcHRpb25zLnR5cGUgPT09IFwiY2hlY2tcIiA/IFwiL3RlYW0taW52aXRhdGlvbnMvYWNjZXB0L2NoZWNrLWNvZGVcIiA6IG9wdGlvbnMudHlwZSA9PT0gXCJkZXRhaWxzXCIgPyBcIi90ZWFtLWludml0YXRpb25zL2FjY2VwdC9kZXRhaWxzXCIgOiBcIi90ZWFtLWludml0YXRpb25zL2FjY2VwdFwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGNvZGU6IG9wdGlvbnMuY29kZVxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIG9wdGlvbnMuc2Vzc2lvbixcbiAgICAgIFtLbm93bkVycm9ycy5WZXJpZmljYXRpb25Db2RlRXJyb3JdXG4gICAgKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlcy5lcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBSZXN1bHQub2soYXdhaXQgcmVzLmRhdGEuanNvbigpKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgdG90cE1mYShhdHRlbXB0Q29kZSwgdG90cCwgc2Vzc2lvbikge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXCIvYXV0aC9tZmEvc2lnbi1pblwiLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgY29kZTogYXR0ZW1wdENvZGUsXG4gICAgICAgIHR5cGU6IFwidG90cFwiLFxuICAgICAgICB0b3RwXG4gICAgICB9KVxuICAgIH0sIHNlc3Npb24pO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFjY2Vzc1Rva2VuOiByZXN1bHQuYWNjZXNzX3Rva2VuLFxuICAgICAgcmVmcmVzaFRva2VuOiByZXN1bHQucmVmcmVzaF90b2tlbixcbiAgICAgIG5ld1VzZXI6IHJlc3VsdC5pc19uZXdfdXNlclxuICAgIH07XG4gIH1cbiAgYXN5bmMgc2lnbkluV2l0aENyZWRlbnRpYWwoZW1haWwsIHBhc3N3b3JkLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcbiAgICAgIFwiL2F1dGgvcGFzc3dvcmQvc2lnbi1pblwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgIHBhc3N3b3JkXG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgc2Vzc2lvbixcbiAgICAgIFtLbm93bkVycm9ycy5FbWFpbFBhc3N3b3JkTWlzbWF0Y2hdXG4gICAgKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlcy5lcnJvcik7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlcy5kYXRhLmpzb24oKTtcbiAgICByZXR1cm4gUmVzdWx0Lm9rKHtcbiAgICAgIGFjY2Vzc1Rva2VuOiByZXN1bHQuYWNjZXNzX3Rva2VuLFxuICAgICAgcmVmcmVzaFRva2VuOiByZXN1bHQucmVmcmVzaF90b2tlblxuICAgIH0pO1xuICB9XG4gIGFzeW5jIHNpZ25VcFdpdGhDcmVkZW50aWFsKGVtYWlsLCBwYXNzd29yZCwgZW1haWxWZXJpZmljYXRpb25SZWRpcmVjdFVybCwgc2Vzc2lvbikge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXG4gICAgICBcIi9hdXRoL3Bhc3N3b3JkL3NpZ24tdXBcIixcbiAgICAgIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICBwYXNzd29yZCxcbiAgICAgICAgICB2ZXJpZmljYXRpb25fY2FsbGJhY2tfdXJsOiBlbWFpbFZlcmlmaWNhdGlvblJlZGlyZWN0VXJsXG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgc2Vzc2lvbixcbiAgICAgIFtLbm93bkVycm9ycy5Vc2VyV2l0aEVtYWlsQWxyZWFkeUV4aXN0cywgS25vd25FcnJvcnMuUGFzc3dvcmRSZXF1aXJlbWVudHNOb3RNZXRdXG4gICAgKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlcy5lcnJvcik7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlcy5kYXRhLmpzb24oKTtcbiAgICByZXR1cm4gUmVzdWx0Lm9rKHtcbiAgICAgIGFjY2Vzc1Rva2VuOiByZXN1bHQuYWNjZXNzX3Rva2VuLFxuICAgICAgcmVmcmVzaFRva2VuOiByZXN1bHQucmVmcmVzaF90b2tlblxuICAgIH0pO1xuICB9XG4gIGFzeW5jIHNpZ25VcEFub255bW91c2x5KHNlc3Npb24pIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFxuICAgICAgXCIvYXV0aC9hbm9ueW1vdXMvc2lnbi11cFwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiXG4gICAgICB9LFxuICAgICAgc2Vzc2lvbixcbiAgICAgIFtdXG4gICAgKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlcy5lcnJvcik7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlcy5kYXRhLmpzb24oKTtcbiAgICByZXR1cm4gUmVzdWx0Lm9rKHtcbiAgICAgIGFjY2Vzc1Rva2VuOiByZXN1bHQuYWNjZXNzX3Rva2VuLFxuICAgICAgcmVmcmVzaFRva2VuOiByZXN1bHQucmVmcmVzaF90b2tlblxuICAgIH0pO1xuICB9XG4gIGFzeW5jIHNpZ25JbldpdGhNYWdpY0xpbmsoY29kZSwgc2Vzc2lvbikge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXG4gICAgICBcIi9hdXRoL290cC9zaWduLWluXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgY29kZVxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIHNlc3Npb24sXG4gICAgICBbS25vd25FcnJvcnMuVmVyaWZpY2F0aW9uQ29kZUVycm9yXVxuICAgICk7XG4gICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihyZXMuZXJyb3IpO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXMuZGF0YS5qc29uKCk7XG4gICAgcmV0dXJuIFJlc3VsdC5vayh7XG4gICAgICBhY2Nlc3NUb2tlbjogcmVzdWx0LmFjY2Vzc190b2tlbixcbiAgICAgIHJlZnJlc2hUb2tlbjogcmVzdWx0LnJlZnJlc2hfdG9rZW4sXG4gICAgICBuZXdVc2VyOiByZXN1bHQuaXNfbmV3X3VzZXJcbiAgICB9KTtcbiAgfVxuICBhc3luYyBzaWduSW5XaXRoTWZhKHRvdHAsIGNvZGUsIHNlc3Npb24pIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFxuICAgICAgXCIvYXV0aC9tZmEvc2lnbi1pblwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHR5cGU6IFwidG90cFwiLFxuICAgICAgICAgIHRvdHAsXG4gICAgICAgICAgY29kZVxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIHNlc3Npb24sXG4gICAgICBbS25vd25FcnJvcnMuVmVyaWZpY2F0aW9uQ29kZUVycm9yXVxuICAgICk7XG4gICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihyZXMuZXJyb3IpO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXMuZGF0YS5qc29uKCk7XG4gICAgcmV0dXJuIFJlc3VsdC5vayh7XG4gICAgICBhY2Nlc3NUb2tlbjogcmVzdWx0LmFjY2Vzc190b2tlbixcbiAgICAgIHJlZnJlc2hUb2tlbjogcmVzdWx0LnJlZnJlc2hfdG9rZW4sXG4gICAgICBuZXdVc2VyOiByZXN1bHQuaXNfbmV3X3VzZXJcbiAgICB9KTtcbiAgfVxuICBhc3luYyBzaWduSW5XaXRoUGFzc2tleShib2R5LCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcbiAgICAgIFwiL2F1dGgvcGFzc2tleS9zaWduLWluXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxuICAgICAgfSxcbiAgICAgIHNlc3Npb24sXG4gICAgICBbS25vd25FcnJvcnMuUGFzc2tleUF1dGhlbnRpY2F0aW9uRmFpbGVkXVxuICAgICk7XG4gICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihyZXMuZXJyb3IpO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXMuZGF0YS5qc29uKCk7XG4gICAgcmV0dXJuIFJlc3VsdC5vayh7XG4gICAgICBhY2Nlc3NUb2tlbjogcmVzdWx0LmFjY2Vzc190b2tlbixcbiAgICAgIHJlZnJlc2hUb2tlbjogcmVzdWx0LnJlZnJlc2hfdG9rZW5cbiAgICB9KTtcbiAgfVxuICBhc3luYyBnZXRPQXV0aFVybChvcHRpb25zKSB7XG4gICAgY29uc3QgdXBkYXRlZFJlZGlyZWN0VXJsID0gbmV3IFVSTChvcHRpb25zLnJlZGlyZWN0VXJsKTtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbXCJjb2RlXCIsIFwic3RhdGVcIl0pIHtcbiAgICAgIGlmICh1cGRhdGVkUmVkaXJlY3RVcmwuc2VhcmNoUGFyYW1zLmhhcyhrZXkpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIlJlZGlyZWN0IFVSTCBhbHJlYWR5IGNvbnRhaW5zIFwiICsga2V5ICsgXCIgcGFyYW1ldGVyLCByZW1vdmluZyBpdCBhcyBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuIGJ5IHRoZSBPQXV0aCBjYWxsYmFja1wiKTtcbiAgICAgIH1cbiAgICAgIHVwZGF0ZWRSZWRpcmVjdFVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKGtleSk7XG4gICAgfVxuICAgIGlmICghKFwicHVibGlzaGFibGVDbGllbnRLZXlcIiBpbiB0aGlzLm9wdGlvbnMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBZG1pbiBzZXNzaW9uIHRva2VuIGlzIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkIGZvciBPQXV0aFwiKTtcbiAgICB9XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTCh0aGlzLmdldEFwaVVybCgpICsgXCIvYXV0aC9vYXV0aC9hdXRob3JpemUvXCIgKyBvcHRpb25zLnByb3ZpZGVyLnRvTG93ZXJDYXNlKCkpO1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiY2xpZW50X2lkXCIsIHRoaXMucHJvamVjdElkKTtcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcImNsaWVudF9zZWNyZXRcIiwgdGhpcy5vcHRpb25zLnB1Ymxpc2hhYmxlQ2xpZW50S2V5KTtcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcInJlZGlyZWN0X3VyaVwiLCB1cGRhdGVkUmVkaXJlY3RVcmwudG9TdHJpbmcoKSk7XG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJzY29wZVwiLCBcImxlZ2FjeVwiKTtcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcInN0YXRlXCIsIG9wdGlvbnMuc3RhdGUpO1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiZ3JhbnRfdHlwZVwiLCBcImF1dGhvcml6YXRpb25fY29kZVwiKTtcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcImNvZGVfY2hhbGxlbmdlXCIsIG9wdGlvbnMuY29kZUNoYWxsZW5nZSk7XG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJjb2RlX2NoYWxsZW5nZV9tZXRob2RcIiwgXCJTMjU2XCIpO1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwicmVzcG9uc2VfdHlwZVwiLCBcImNvZGVcIik7XG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJ0eXBlXCIsIG9wdGlvbnMudHlwZSk7XG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJlcnJvcl9yZWRpcmVjdF91cmxcIiwgb3B0aW9ucy5lcnJvclJlZGlyZWN0VXJsKTtcbiAgICBjb25zdCB0b2tlbnMgPSBhd2FpdCBvcHRpb25zLnNlc3Npb24uZ2V0T3JGZXRjaExpa2VseVZhbGlkVG9rZW5zKDJlNCk7XG4gICAgaWYgKHRva2Vucykge1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJ0b2tlblwiLCB0b2tlbnMuYWNjZXNzVG9rZW4udG9rZW4pO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5hZnRlckNhbGxiYWNrUmVkaXJlY3RVcmwpIHtcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiYWZ0ZXJfY2FsbGJhY2tfcmVkaXJlY3RfdXJsXCIsIG9wdGlvbnMuYWZ0ZXJDYWxsYmFja1JlZGlyZWN0VXJsKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMucHJvdmlkZXJTY29wZSkge1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJwcm92aWRlcl9zY29wZVwiLCBvcHRpb25zLnByb3ZpZGVyU2NvcGUpO1xuICAgIH1cbiAgICByZXR1cm4gdXJsLnRvU3RyaW5nKCk7XG4gIH1cbiAgYXN5bmMgY2FsbE9BdXRoQ2FsbGJhY2sob3B0aW9ucykge1xuICAgIGlmICghKFwicHVibGlzaGFibGVDbGllbnRLZXlcIiBpbiB0aGlzLm9wdGlvbnMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBZG1pbiBzZXNzaW9uIHRva2VuIGlzIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkIGZvciBPQXV0aFwiKTtcbiAgICB9XG4gICAgY29uc3QgYXMgPSB7XG4gICAgICBpc3N1ZXI6IHRoaXMub3B0aW9ucy5nZXRCYXNlVXJsKCksXG4gICAgICBhbGdvcml0aG06IFwib2F1dGgyXCIsXG4gICAgICB0b2tlbl9lbmRwb2ludDogdGhpcy5nZXRBcGlVcmwoKSArIFwiL2F1dGgvb2F1dGgvdG9rZW5cIlxuICAgIH07XG4gICAgY29uc3QgY2xpZW50ID0ge1xuICAgICAgY2xpZW50X2lkOiB0aGlzLnByb2plY3RJZCxcbiAgICAgIGNsaWVudF9zZWNyZXQ6IHRoaXMub3B0aW9ucy5wdWJsaXNoYWJsZUNsaWVudEtleSxcbiAgICAgIHRva2VuX2VuZHBvaW50X2F1dGhfbWV0aG9kOiBcImNsaWVudF9zZWNyZXRfcG9zdFwiXG4gICAgfTtcbiAgICBjb25zdCBwYXJhbXMgPSBhd2FpdCB0aGlzLl9uZXR3b3JrUmV0cnlFeGNlcHRpb24oXG4gICAgICBhc3luYyAoKSA9PiBvYXV0aC52YWxpZGF0ZUF1dGhSZXNwb25zZShhcywgY2xpZW50LCBvcHRpb25zLm9hdXRoUGFyYW1zLCBvcHRpb25zLnN0YXRlKVxuICAgICk7XG4gICAgaWYgKG9hdXRoLmlzT0F1dGgyRXJyb3IocGFyYW1zKSkge1xuICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJFcnJvciB2YWxpZGF0aW5nIG91dGVyIE9BdXRoIHJlc3BvbnNlXCIsIHsgcGFyYW1zIH0pO1xuICAgIH1cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG9hdXRoLmF1dGhvcml6YXRpb25Db2RlR3JhbnRSZXF1ZXN0KFxuICAgICAgYXMsXG4gICAgICBjbGllbnQsXG4gICAgICBwYXJhbXMsXG4gICAgICBvcHRpb25zLnJlZGlyZWN0VXJpLFxuICAgICAgb3B0aW9ucy5jb2RlVmVyaWZpZXJcbiAgICApO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9hdXRoLnByb2Nlc3NBdXRob3JpemF0aW9uQ29kZU9BdXRoMlJlc3BvbnNlKGFzLCBjbGllbnQsIHJlc3BvbnNlKTtcbiAgICBpZiAob2F1dGguaXNPQXV0aDJFcnJvcihyZXN1bHQpKSB7XG4gICAgICBpZiAoXCJjb2RlXCIgaW4gcmVzdWx0ICYmIHJlc3VsdC5jb2RlID09PSBcIk1VTFRJX0ZBQ1RPUl9BVVRIRU5USUNBVElPTl9SRVFVSVJFRFwiKSB7XG4gICAgICAgIHRocm93IG5ldyBLbm93bkVycm9ycy5NdWx0aUZhY3RvckF1dGhlbnRpY2F0aW9uUmVxdWlyZWQocmVzdWx0LmRldGFpbHMuYXR0ZW1wdF9jb2RlKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiT3V0ZXIgT0F1dGggZXJyb3IgZHVyaW5nIGF1dGhvcml6YXRpb24gY29kZSByZXNwb25zZVwiLCB7IHJlc3VsdCB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIG5ld1VzZXI6IHJlc3VsdC5pc19uZXdfdXNlcixcbiAgICAgIGFmdGVyQ2FsbGJhY2tSZWRpcmVjdFVybDogcmVzdWx0LmFmdGVyX2NhbGxiYWNrX3JlZGlyZWN0X3VybCxcbiAgICAgIGFjY2Vzc1Rva2VuOiByZXN1bHQuYWNjZXNzX3Rva2VuLFxuICAgICAgcmVmcmVzaFRva2VuOiByZXN1bHQucmVmcmVzaF90b2tlbiA/PyB0aHJvd0VycihcIlJlZnJlc2ggdG9rZW4gbm90IGZvdW5kIGluIG91dGVyIE9BdXRoIHJlc3BvbnNlXCIpXG4gICAgfTtcbiAgfVxuICBhc3luYyBzaWduT3V0KHNlc3Npb24pIHtcbiAgICBjb25zdCB0b2tlbk9iaiA9IGF3YWl0IHNlc3Npb24uZ2V0T3JGZXRjaExpa2VseVZhbGlkVG9rZW5zKDJlNCk7XG4gICAgaWYgKHRva2VuT2JqKSB7XG4gICAgICBjb25zdCByZXNPckVycm9yID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcbiAgICAgICAgXCIvYXV0aC9zZXNzaW9ucy9jdXJyZW50XCIsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHt9KVxuICAgICAgICB9LFxuICAgICAgICBzZXNzaW9uLFxuICAgICAgICBbS25vd25FcnJvcnMuUmVmcmVzaFRva2VuRXJyb3JdXG4gICAgICApO1xuICAgICAgaWYgKHJlc09yRXJyb3Iuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgaWYgKEtub3duRXJyb3JzLlJlZnJlc2hUb2tlbkVycm9yLmlzSW5zdGFuY2UocmVzT3JFcnJvci5lcnJvcikpIHtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIlVuZXhwZWN0ZWQgZXJyb3JcIiwgeyBlcnJvcjogcmVzT3JFcnJvci5lcnJvciB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgIH1cbiAgICB9XG4gICAgc2Vzc2lvbi5tYXJrSW52YWxpZCgpO1xuICB9XG4gIGFzeW5jIGdldENsaWVudFVzZXJCeVRva2VuKHNlc3Npb24pIHtcbiAgICBjb25zdCByZXNwb25zZU9yRXJyb3IgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFxuICAgICAgXCIvdXNlcnMvbWVcIixcbiAgICAgIHt9LFxuICAgICAgc2Vzc2lvbixcbiAgICAgIFtLbm93bkVycm9ycy5DYW5ub3RHZXRPd25Vc2VyV2l0aG91dFVzZXJdXG4gICAgKTtcbiAgICBpZiAocmVzcG9uc2VPckVycm9yLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICBpZiAoS25vd25FcnJvcnMuQ2Fubm90R2V0T3duVXNlcldpdGhvdXRVc2VyLmlzSW5zdGFuY2UocmVzcG9uc2VPckVycm9yLmVycm9yKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiVW5leHBlY3RlZCB1bmNhdWdodCBlcnJvclwiLCB7IGNhdXNlOiByZXNwb25zZU9yRXJyb3IuZXJyb3IgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJlc3BvbnNlID0gcmVzcG9uc2VPckVycm9yLmRhdGE7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICBpZiAoIXVzZXIpIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiVXNlciBlbmRwb2ludCByZXR1cm5lZCBudWxsOyB0aGlzIHNob3VsZCBuZXZlciBoYXBwZW5cIik7XG4gICAgcmV0dXJuIHVzZXI7XG4gIH1cbiAgYXN5bmMgbGlzdFRlYW1JbnZpdGF0aW9ucyhvcHRpb25zLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgXCIvdGVhbS1pbnZpdGF0aW9ucz9cIiArIG5ldyBVUkxTZWFyY2hQYXJhbXMoeyB0ZWFtX2lkOiBvcHRpb25zLnRlYW1JZCB9KSxcbiAgICAgIHt9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiByZXN1bHQuaXRlbXM7XG4gIH1cbiAgYXN5bmMgcmV2b2tlVGVhbUludml0YXRpb24oaW52aXRhdGlvbklkLCB0ZWFtSWQsIHNlc3Npb24pIHtcbiAgICBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgYC90ZWFtLWludml0YXRpb25zLyR7aW52aXRhdGlvbklkfT90ZWFtX2lkPSR7dGVhbUlkfWAsXG4gICAgICB7IG1ldGhvZDogXCJERUxFVEVcIiB9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gIH1cbiAgYXN5bmMgbGlzdFRlYW1NZW1iZXJQcm9maWxlcyhvcHRpb25zLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgXCIvdGVhbS1tZW1iZXItcHJvZmlsZXM/XCIgKyBuZXcgVVJMU2VhcmNoUGFyYW1zKGZpbHRlclVuZGVmaW5lZCh7XG4gICAgICAgIHRlYW1faWQ6IG9wdGlvbnMudGVhbUlkLFxuICAgICAgICB1c2VyX2lkOiBvcHRpb25zLnVzZXJJZFxuICAgICAgfSkpLFxuICAgICAge30sXG4gICAgICBzZXNzaW9uXG4gICAgKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHJlc3VsdC5pdGVtcztcbiAgfVxuICBhc3luYyBnZXRUZWFtTWVtYmVyUHJvZmlsZShvcHRpb25zLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgYC90ZWFtLW1lbWJlci1wcm9maWxlcy8ke29wdGlvbnMudGVhbUlkfS8ke29wdGlvbnMudXNlcklkfWAsXG4gICAgICB7fSxcbiAgICAgIHNlc3Npb25cbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgbGVhdmVUZWFtKHRlYW1JZCwgc2Vzc2lvbikge1xuICAgIGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXG4gICAgICBgL3RlYW0tbWVtYmVyc2hpcHMvJHt0ZWFtSWR9L21lYCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe30pXG4gICAgICB9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlVGVhbU1lbWJlclByb2ZpbGUob3B0aW9ucywgc2Vzc2lvbikge1xuICAgIGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXG4gICAgICBgL3RlYW0tbWVtYmVyLXByb2ZpbGVzLyR7b3B0aW9ucy50ZWFtSWR9LyR7b3B0aW9ucy51c2VySWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvcHRpb25zLnByb2ZpbGUpXG4gICAgICB9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlVGVhbShvcHRpb25zLCBzZXNzaW9uKSB7XG4gICAgYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcbiAgICAgIGAvdGVhbXMvJHtvcHRpb25zLnRlYW1JZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMuZGF0YSlcbiAgICAgIH0sXG4gICAgICBzZXNzaW9uXG4gICAgKTtcbiAgfVxuICBhc3luYyBsaXN0Q3VycmVudFVzZXJUZWFtUGVybWlzc2lvbnMob3B0aW9ucywgc2Vzc2lvbikge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcbiAgICAgIGAvdGVhbS1wZXJtaXNzaW9ucz90ZWFtX2lkPSR7b3B0aW9ucy50ZWFtSWR9JnVzZXJfaWQ9bWUmcmVjdXJzaXZlPSR7b3B0aW9ucy5yZWN1cnNpdmV9YCxcbiAgICAgIHt9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiByZXN1bHQuaXRlbXM7XG4gIH1cbiAgYXN5bmMgbGlzdEN1cnJlbnRVc2VyUHJvamVjdFBlcm1pc3Npb25zKG9wdGlvbnMsIHNlc3Npb24pIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXG4gICAgICBgL3Byb2plY3QtcGVybWlzc2lvbnM/dXNlcl9pZD1tZSZyZWN1cnNpdmU9JHtvcHRpb25zLnJlY3Vyc2l2ZX1gLFxuICAgICAge30sXG4gICAgICBzZXNzaW9uXG4gICAgKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHJlc3VsdC5pdGVtcztcbiAgfVxuICBhc3luYyBsaXN0Q3VycmVudFVzZXJUZWFtcyhzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgXCIvdGVhbXM/dXNlcl9pZD1tZVwiLFxuICAgICAge30sXG4gICAgICBzZXNzaW9uXG4gICAgKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHJlc3VsdC5pdGVtcztcbiAgfVxuICBhc3luYyBnZXRDbGllbnRQcm9qZWN0KCkge1xuICAgIGNvbnN0IHJlc3BvbnNlT3JFcnJvciA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXCIvcHJvamVjdHMvY3VycmVudFwiLCB7fSwgbnVsbCwgW0tub3duRXJyb3JzLlByb2plY3ROb3RGb3VuZF0pO1xuICAgIGlmIChyZXNwb25zZU9yRXJyb3Iuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IocmVzcG9uc2VPckVycm9yLmVycm9yKTtcbiAgICB9XG4gICAgY29uc3QgcmVzcG9uc2UgPSByZXNwb25zZU9yRXJyb3IuZGF0YTtcbiAgICBjb25zdCBwcm9qZWN0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiBSZXN1bHQub2socHJvamVjdCk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlQ2xpZW50VXNlcih1cGRhdGUsIHNlc3Npb24pIHtcbiAgICBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgXCIvdXNlcnMvbWVcIixcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh1cGRhdGUpXG4gICAgICB9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gIH1cbiAgYXN5bmMgbGlzdFByb2plY3RzKHNlc3Npb24pIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXCIvaW50ZXJuYWwvcHJvamVjdHNcIiwge30sIHNlc3Npb24pO1xuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBsaXN0IHByb2plY3RzOiBcIiArIHJlc3BvbnNlLnN0YXR1cyArIFwiIFwiICsgYXdhaXQgcmVzcG9uc2UudGV4dCgpKTtcbiAgICB9XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4ganNvbi5pdGVtcztcbiAgfVxuICBhc3luYyBjcmVhdGVQcm9qZWN0KHByb2plY3QsIHNlc3Npb24pIHtcbiAgICBjb25zdCBmZXRjaFJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcbiAgICAgIFwiL2ludGVybmFsL3Byb2plY3RzXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwcm9qZWN0KVxuICAgICAgfSxcbiAgICAgIHNlc3Npb25cbiAgICApO1xuICAgIGlmICghZmV0Y2hSZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGNyZWF0ZSBwcm9qZWN0OiBcIiArIGZldGNoUmVzcG9uc2Uuc3RhdHVzICsgXCIgXCIgKyBhd2FpdCBmZXRjaFJlc3BvbnNlLnRleHQoKSk7XG4gICAgfVxuICAgIGNvbnN0IGpzb24gPSBhd2FpdCBmZXRjaFJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4ganNvbjtcbiAgfVxuICBhc3luYyBjcmVhdGVQcm92aWRlckFjY2Vzc1Rva2VuKHByb3ZpZGVyLCBzY29wZSwgc2Vzc2lvbikge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcbiAgICAgIGAvY29ubmVjdGVkLWFjY291bnRzL21lLyR7cHJvdmlkZXJ9L2FjY2Vzcy10b2tlbmAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHNjb3BlIH0pXG4gICAgICB9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBjcmVhdGVDbGllbnRUZWFtKGRhdGEsIHNlc3Npb24pIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXG4gICAgICBcIi90ZWFtc1wiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0sXG4gICAgICBzZXNzaW9uXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIGRlbGV0ZVRlYW0odGVhbUlkLCBzZXNzaW9uKSB7XG4gICAgYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcbiAgICAgIGAvdGVhbXMvJHt0ZWFtSWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiXG4gICAgICB9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gIH1cbiAgYXN5bmMgZGVsZXRlQ3VycmVudFVzZXIoc2Vzc2lvbikge1xuICAgIGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXG4gICAgICBcIi91c2Vycy9tZVwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCJcbiAgICAgIH0sXG4gICAgICBzZXNzaW9uXG4gICAgKTtcbiAgfVxuICBhc3luYyBjcmVhdGVDbGllbnRDb250YWN0Q2hhbm5lbChkYXRhLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgXCIvY29udGFjdC1jaGFubmVsc1wiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0sXG4gICAgICBzZXNzaW9uXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIHVwZGF0ZUNsaWVudENvbnRhY3RDaGFubmVsKGlkLCBkYXRhLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgYC9jb250YWN0LWNoYW5uZWxzL21lLyR7aWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgICAgfSxcbiAgICAgIHNlc3Npb25cbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgZGVsZXRlQ2xpZW50Q29udGFjdENoYW5uZWwoaWQsIHNlc3Npb24pIHtcbiAgICBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgYC9jb250YWN0LWNoYW5uZWxzL21lLyR7aWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiXG4gICAgICB9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gIH1cbiAgYXN5bmMgZGVsZXRlU2Vzc2lvbihzZXNzaW9uSWQsIHNlc3Npb24pIHtcbiAgICBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgYC9hdXRoL3Nlc3Npb25zLyR7c2Vzc2lvbklkfT91c2VyX2lkPW1lYCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiXG4gICAgICB9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gIH1cbiAgYXN5bmMgbGlzdFNlc3Npb25zKHNlc3Npb24pIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXG4gICAgICBcIi9hdXRoL3Nlc3Npb25zP3VzZXJfaWQ9bWVcIixcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkdFVFwiXG4gICAgICB9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBsaXN0Q2xpZW50Q29udGFjdENoYW5uZWxzKHNlc3Npb24pIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXG4gICAgICBcIi9jb250YWN0LWNoYW5uZWxzP3VzZXJfaWQ9bWVcIixcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkdFVFwiXG4gICAgICB9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4ganNvbi5pdGVtcztcbiAgfVxuICBhc3luYyBzZW5kQ3VycmVudFVzZXJDb250YWN0Q2hhbm5lbFZlcmlmaWNhdGlvbkVtYWlsKGNvbnRhY3RDaGFubmVsSWQsIGNhbGxiYWNrVXJsLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzcG9uc2VPckVycm9yID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcbiAgICAgIGAvY29udGFjdC1jaGFubmVscy9tZS8ke2NvbnRhY3RDaGFubmVsSWR9L3NlbmQtdmVyaWZpY2F0aW9uLWNvZGVgLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBjYWxsYmFja191cmw6IGNhbGxiYWNrVXJsIH0pXG4gICAgICB9LFxuICAgICAgc2Vzc2lvbixcbiAgICAgIFtLbm93bkVycm9ycy5FbWFpbEFscmVhZHlWZXJpZmllZF1cbiAgICApO1xuICAgIGlmIChyZXNwb25zZU9yRXJyb3Iuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IocmVzcG9uc2VPckVycm9yLmVycm9yKTtcbiAgICB9XG4gICAgcmV0dXJuIFJlc3VsdC5vayh2b2lkIDApO1xuICB9XG4gIGFzeW5jIGNsaUxvZ2luKGxvZ2luQ29kZSwgcmVmcmVzaFRva2VuLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzcG9uc2VPckVycm9yID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcbiAgICAgIFwiL2F1dGgvY2xpL2NvbXBsZXRlXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbG9naW5fY29kZTogbG9naW5Db2RlLFxuICAgICAgICAgIHJlZnJlc2hfdG9rZW46IHJlZnJlc2hUb2tlblxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIHNlc3Npb24sXG4gICAgICBbS25vd25FcnJvcnMuU2NoZW1hRXJyb3JdXG4gICAgKTtcbiAgICBpZiAocmVzcG9uc2VPckVycm9yLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlc3BvbnNlT3JFcnJvci5lcnJvcik7XG4gICAgfVxuICAgIHJldHVybiBSZXN1bHQub2sodm9pZCAwKTtcbiAgfVxuICBhc3luYyBfZ2V0QXBpS2V5UmVxdWVzdEluZm8ob3B0aW9ucykge1xuICAgIGlmIChcInVzZXJfaWRcIiBpbiBvcHRpb25zICYmIFwidGVhbV9pZFwiIGluIG9wdGlvbnMpIHtcbiAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiQ2Fubm90IHNwZWNpZnkgYm90aCB1c2VyX2lkIGFuZCB0ZWFtX2lkIGluIF9nZXRBcGlLZXlSZXF1ZXN0SW5mb1wiKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGVuZHBvaW50OiBcInRlYW1faWRcIiBpbiBvcHRpb25zID8gXCIvdGVhbS1hcGkta2V5c1wiIDogXCIvdXNlci1hcGkta2V5c1wiLFxuICAgICAgcXVlcnlQYXJhbXM6IG5ldyBVUkxTZWFyY2hQYXJhbXMoZmlsdGVyVW5kZWZpbmVkT3JOdWxsKG9wdGlvbnMpKVxuICAgIH07XG4gIH1cbiAgYXN5bmMgbGlzdFByb2plY3RBcGlLZXlzKG9wdGlvbnMsIHNlc3Npb24sIHJlcXVlc3RUeXBlKSB7XG4gICAgY29uc3Qgc2VuZFJlcXVlc3QgPSAocmVxdWVzdFR5cGUgPT09IFwiY2xpZW50XCIgPyB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0IDogdGhpcy5zZW5kU2VydmVyUmVxdWVzdCkuYmluZCh0aGlzKTtcbiAgICBjb25zdCB7IGVuZHBvaW50LCBxdWVyeVBhcmFtcyB9ID0gYXdhaXQgdGhpcy5fZ2V0QXBpS2V5UmVxdWVzdEluZm8ob3B0aW9ucyk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzZW5kUmVxdWVzdChcbiAgICAgIGAke2VuZHBvaW50fT8ke3F1ZXJ5UGFyYW1zLnRvU3RyaW5nKCl9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkdFVFwiXG4gICAgICB9LFxuICAgICAgc2Vzc2lvbixcbiAgICAgIHJlcXVlc3RUeXBlXG4gICAgKTtcbiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiBqc29uLml0ZW1zO1xuICB9XG4gIGFzeW5jIGNyZWF0ZVByb2plY3RBcGlLZXkoZGF0YSwgc2Vzc2lvbiwgcmVxdWVzdFR5cGUpIHtcbiAgICBjb25zdCBzZW5kUmVxdWVzdCA9IChyZXF1ZXN0VHlwZSA9PT0gXCJjbGllbnRcIiA/IHRoaXMuc2VuZENsaWVudFJlcXVlc3QgOiB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KS5iaW5kKHRoaXMpO1xuICAgIGNvbnN0IHsgZW5kcG9pbnQgfSA9IGF3YWl0IHRoaXMuX2dldEFwaUtleVJlcXVlc3RJbmZvKGRhdGEpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2VuZFJlcXVlc3QoXG4gICAgICBgJHtlbmRwb2ludH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0sXG4gICAgICBzZXNzaW9uLFxuICAgICAgcmVxdWVzdFR5cGVcbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgZ2V0UHJvamVjdEFwaUtleShvcHRpb25zLCBrZXlJZCwgc2Vzc2lvbiwgcmVxdWVzdFR5cGUpIHtcbiAgICBjb25zdCBzZW5kUmVxdWVzdCA9IChyZXF1ZXN0VHlwZSA9PT0gXCJjbGllbnRcIiA/IHRoaXMuc2VuZENsaWVudFJlcXVlc3QgOiB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KS5iaW5kKHRoaXMpO1xuICAgIGNvbnN0IHsgZW5kcG9pbnQsIHF1ZXJ5UGFyYW1zIH0gPSBhd2FpdCB0aGlzLl9nZXRBcGlLZXlSZXF1ZXN0SW5mbyhvcHRpb25zKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNlbmRSZXF1ZXN0KFxuICAgICAgYCR7ZW5kcG9pbnR9LyR7a2V5SWR9PyR7cXVlcnlQYXJhbXMudG9TdHJpbmcoKX1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiR0VUXCJcbiAgICAgIH0sXG4gICAgICBzZXNzaW9uLFxuICAgICAgcmVxdWVzdFR5cGVcbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlUHJvamVjdEFwaUtleShvcHRpb25zLCBrZXlJZCwgZGF0YSwgc2Vzc2lvbiwgcmVxdWVzdFR5cGUpIHtcbiAgICBjb25zdCBzZW5kUmVxdWVzdCA9IChyZXF1ZXN0VHlwZSA9PT0gXCJjbGllbnRcIiA/IHRoaXMuc2VuZENsaWVudFJlcXVlc3QgOiB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KS5iaW5kKHRoaXMpO1xuICAgIGNvbnN0IHsgZW5kcG9pbnQsIHF1ZXJ5UGFyYW1zIH0gPSBhd2FpdCB0aGlzLl9nZXRBcGlLZXlSZXF1ZXN0SW5mbyhvcHRpb25zKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNlbmRSZXF1ZXN0KFxuICAgICAgYCR7ZW5kcG9pbnR9LyR7a2V5SWR9PyR7cXVlcnlQYXJhbXMudG9TdHJpbmcoKX1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXG4gICAgICB9LFxuICAgICAgc2Vzc2lvbixcbiAgICAgIHJlcXVlc3RUeXBlXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIGNoZWNrUHJvamVjdEFwaUtleSh0eXBlLCBhcGlLZXksIHNlc3Npb24sIHJlcXVlc3RUeXBlKSB7XG4gICAgY29uc3Qgc2VuZFJlcXVlc3QgPSAocmVxdWVzdFR5cGUgPT09IFwiY2xpZW50XCIgPyB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yIDogdGhpcy5zZW5kU2VydmVyUmVxdWVzdEFuZENhdGNoS25vd25FcnJvcikuYmluZCh0aGlzKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZW5kUmVxdWVzdChcbiAgICAgIGAvJHt0eXBlfS1hcGkta2V5cy9jaGVja2AsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGFwaV9rZXk6IGFwaUtleSB9KVxuICAgICAgfSxcbiAgICAgIHNlc3Npb24sXG4gICAgICBbS25vd25FcnJvcnMuQXBpS2V5Tm90VmFsaWRdXG4gICAgKTtcbiAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHJlc3VsdC5kYXRhLmpzb24oKTtcbiAgfVxuICBhc3luYyBsaXN0Tm90aWZpY2F0aW9uQ2F0ZWdvcmllcyhzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgYC9lbWFpbHMvbm90aWZpY2F0aW9uLXByZWZlcmVuY2UvbWVgLFxuICAgICAge30sXG4gICAgICBzZXNzaW9uXG4gICAgKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHJlc3VsdC5pdGVtcztcbiAgfVxuICBhc3luYyBzZXROb3RpZmljYXRpb25zRW5hYmxlZChub3RpZmljYXRpb25DYXRlZ29yeUlkLCBlbmFibGVkLCBzZXNzaW9uKSB7XG4gICAgYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcbiAgICAgIGAvZW1haWxzL25vdGlmaWNhdGlvbi1wcmVmZXJlbmNlL21lLyR7bm90aWZpY2F0aW9uQ2F0ZWdvcnlJZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBlbmFibGVkXG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gIH1cbiAgYXN5bmMgZ2V0T0F1dGhQcm92aWRlcih1c2VySWQsIHByb3ZpZGVySWQsIHNlc3Npb24pIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXG4gICAgICBgL29hdXRoLXByb3ZpZGVycy8ke3VzZXJJZH0vJHtwcm92aWRlcklkfWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJHRVRcIlxuICAgICAgfSxcbiAgICAgIHNlc3Npb25cbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlT0F1dGhQcm92aWRlcih1c2VySWQsIHByb3ZpZGVySWQsIGRhdGEsIHNlc3Npb24pIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXG4gICAgICBgL29hdXRoLXByb3ZpZGVycy8ke3VzZXJJZH0vJHtwcm92aWRlcklkfWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0sXG4gICAgICBzZXNzaW9uXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIGxpc3RPQXV0aFByb3ZpZGVycyhvcHRpb25zID0ge30sIHNlc3Npb24pIHtcbiAgICBjb25zdCBxdWVyeVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoZmlsdGVyVW5kZWZpbmVkKG9wdGlvbnMpKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXG4gICAgICBgL29hdXRoLXByb3ZpZGVycyR7cXVlcnlQYXJhbXMudG9TdHJpbmcoKSA/IGA/JHtxdWVyeVBhcmFtcy50b1N0cmluZygpfWAgOiBcIlwifWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJHRVRcIlxuICAgICAgfSxcbiAgICAgIHNlc3Npb25cbiAgICApO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4gcmVzdWx0Lml0ZW1zO1xuICB9XG4gIGFzeW5jIGRlbGV0ZU9BdXRoUHJvdmlkZXIodXNlcklkLCBwcm92aWRlcklkLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgYC9vYXV0aC1wcm92aWRlcnMvJHt1c2VySWR9LyR7cHJvdmlkZXJJZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCJcbiAgICAgIH0sXG4gICAgICBzZXNzaW9uXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIGdldEl0ZW0ob3B0aW9ucywgc2Vzc2lvbikge1xuICAgIGxldCBjdXN0b21lclR5cGU7XG4gICAgbGV0IGN1c3RvbWVySWQ7XG4gICAgaWYgKFwidXNlcklkXCIgaW4gb3B0aW9ucykge1xuICAgICAgY3VzdG9tZXJUeXBlID0gXCJ1c2VyXCI7XG4gICAgICBjdXN0b21lcklkID0gb3B0aW9ucy51c2VySWQ7XG4gICAgfSBlbHNlIGlmIChcInRlYW1JZFwiIGluIG9wdGlvbnMpIHtcbiAgICAgIGN1c3RvbWVyVHlwZSA9IFwidGVhbVwiO1xuICAgICAgY3VzdG9tZXJJZCA9IG9wdGlvbnMudGVhbUlkO1xuICAgIH0gZWxzZSBpZiAoXCJjdXN0b21DdXN0b21lcklkXCIgaW4gb3B0aW9ucykge1xuICAgICAgY3VzdG9tZXJUeXBlID0gXCJjdXN0b21cIjtcbiAgICAgIGN1c3RvbWVySWQgPSBvcHRpb25zLmN1c3RvbUN1c3RvbWVySWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiZ2V0SXRlbSByZXF1aXJlcyBvbmUgb2YgdXNlcklkLCB0ZWFtSWQsIG9yIGN1c3RvbUN1c3RvbWVySWRcIik7XG4gICAgfVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcbiAgICAgIHVybFN0cmluZ2AvcGF5bWVudHMvaXRlbXMvJHtjdXN0b21lclR5cGV9LyR7Y3VzdG9tZXJJZH0vJHtvcHRpb25zLml0ZW1JZH1gLFxuICAgICAge30sXG4gICAgICBzZXNzaW9uXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIGNyZWF0ZUNoZWNrb3V0VXJsKGN1c3RvbWVyX3R5cGUsIGN1c3RvbWVyX2lkLCBvZmZlcklkT3JJbmxpbmUsIHNlc3Npb24pIHtcbiAgICBjb25zdCBvZmZlckJvZHkgPSB0eXBlb2Ygb2ZmZXJJZE9ySW5saW5lID09PSBcInN0cmluZ1wiID8geyBvZmZlcl9pZDogb2ZmZXJJZE9ySW5saW5lIH0gOiB7IGlubGluZV9vZmZlcjogb2ZmZXJJZE9ySW5saW5lIH07XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgXCIvcGF5bWVudHMvcHVyY2hhc2VzL2NyZWF0ZS1wdXJjaGFzZS11cmxcIixcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgY3VzdG9tZXJfdHlwZSwgY3VzdG9tZXJfaWQsIC4uLm9mZmVyQm9keSB9KVxuICAgICAgfSxcbiAgICAgIHNlc3Npb25cbiAgICApO1xuICAgIGNvbnN0IHsgdXJsIH0gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxufTtcbmV4cG9ydCB7XG4gIFN0YWNrQ2xpZW50SW50ZXJmYWNlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50LWludGVyZmFjZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/client-interface.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/server-interface.js":
/*!**********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/server-interface.js ***!
  \**********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StackServerInterface: () => (/* binding */ StackServerInterface)\n/* harmony export */ });\n/* harmony import */ var _helpers_vault_client_side_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../helpers/vault/client-side.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/helpers/vault/client-side.js\");\n/* harmony import */ var _known_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../known-errors.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/known-errors.js\");\n/* harmony import */ var _utils_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/errors.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n/* harmony import */ var _utils_objects_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/objects.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/objects.js\");\n/* harmony import */ var _utils_results_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/results.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/results.js\");\n/* harmony import */ var _utils_urls_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/urls.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/urls.js\");\n/* harmony import */ var _client_interface_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./client-interface.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/client-interface.js\");\n// src/interface/server-interface.ts\n\n\n\n\n\n\n\nvar StackServerInterface = class extends _client_interface_js__WEBPACK_IMPORTED_MODULE_6__.StackClientInterface {\n  constructor(options) {\n    super(options);\n    this.options = options;\n  }\n  async sendServerRequest(path, options, session, requestType = \"server\") {\n    return await this.sendClientRequest(\n      path,\n      {\n        ...options,\n        headers: {\n          \"x-stack-secret-server-key\": \"secretServerKey\" in this.options ? this.options.secretServerKey : \"\",\n          ...options.headers\n        }\n      },\n      session,\n      requestType\n    );\n  }\n  async sendServerRequestAndCatchKnownError(path, requestOptions, tokenStoreOrNull, errorsToCatch) {\n    try {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_4__.Result.ok(await this.sendServerRequest(path, requestOptions, tokenStoreOrNull));\n    } catch (e) {\n      for (const errorType of errorsToCatch) {\n        if (errorType.isInstance(e)) {\n          return _utils_results_js__WEBPACK_IMPORTED_MODULE_4__.Result.error(e);\n        }\n      }\n      throw e;\n    }\n  }\n  async createServerUser(data) {\n    const response = await this.sendServerRequest(\n      \"/users\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async getServerUserByToken(session) {\n    const responseOrError = await this.sendServerRequestAndCatchKnownError(\n      \"/users/me\",\n      {},\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.CannotGetOwnUserWithoutUser]\n    );\n    if (responseOrError.status === \"error\") {\n      if (_known_errors_js__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.CannotGetOwnUserWithoutUser.isInstance(responseOrError.error)) {\n        return null;\n      } else {\n        throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_2__.StackAssertionError(\"Unexpected uncaught error\", { cause: responseOrError.error });\n      }\n    }\n    const response = responseOrError.data;\n    const user = await response.json();\n    if (!user) throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_2__.StackAssertionError(\"User endpoint returned null; this should never happen\");\n    return user;\n  }\n  async getServerUserById(userId) {\n    const responseOrError = await this.sendServerRequestAndCatchKnownError(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/users/${userId}`,\n      {},\n      null,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.UserNotFound]\n    );\n    if (responseOrError.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_4__.Result.error(responseOrError.error);\n    }\n    const user = await responseOrError.data.json();\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_4__.Result.ok(user);\n  }\n  async listServerTeamInvitations(options) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/team-invitations?team_id=${options.teamId}`,\n      {},\n      null\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async revokeServerTeamInvitation(invitationId, teamId) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/team-invitations/${invitationId}?team_id=${teamId}`,\n      { method: \"DELETE\" },\n      null\n    );\n  }\n  async listServerTeamMemberProfiles(options) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/team-member-profiles?team_id=${options.teamId}`,\n      {},\n      null\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async getServerTeamMemberProfile(options) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/team-member-profiles/${options.teamId}/${options.userId}`,\n      {},\n      null\n    );\n    return await response.json();\n  }\n  async listServerTeamPermissions(options, session) {\n    const response = await this.sendServerRequest(\n      `/team-permissions?${new URLSearchParams((0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_3__.filterUndefined)({\n        user_id: options.userId,\n        team_id: options.teamId,\n        recursive: options.recursive.toString()\n      }))}`,\n      {},\n      session\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async listServerProjectPermissions(options, session) {\n    const response = await this.sendServerRequest(\n      `/project-permissions?${new URLSearchParams((0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_3__.filterUndefined)({\n        user_id: options.userId,\n        recursive: options.recursive.toString()\n      }))}`,\n      {},\n      session\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async listServerUsers(options) {\n    const searchParams = new URLSearchParams((0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_3__.filterUndefined)({\n      cursor: options.cursor,\n      limit: options.limit?.toString(),\n      desc: options.desc?.toString(),\n      ...options.orderBy ? {\n        order_by: {\n          signedUpAt: \"signed_up_at\"\n        }[options.orderBy]\n      } : {},\n      ...options.query ? {\n        query: options.query\n      } : {},\n      ...options.includeAnonymous ? {\n        include_anonymous: \"true\"\n      } : {}\n    }));\n    const response = await this.sendServerRequest(\"/users?\" + searchParams.toString(), {}, null);\n    return await response.json();\n  }\n  async listServerTeams(options) {\n    const response = await this.sendServerRequest(\n      `/teams?${new URLSearchParams((0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_3__.filterUndefined)({\n        user_id: options?.userId\n      }))}`,\n      {},\n      null\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async getServerTeam(teamId) {\n    const response = await this.sendServerRequest(\n      `/teams/${teamId}`,\n      {},\n      null\n    );\n    return await response.json();\n  }\n  async listServerTeamUsers(teamId) {\n    const response = await this.sendServerRequest(`/users?team_id=${teamId}`, {}, null);\n    const result = await response.json();\n    return result.items;\n  }\n  /* when passing a session, the user will be added to the team */\n  async createServerTeam(data) {\n    const response = await this.sendServerRequest(\n      \"/teams\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async updateServerTeam(teamId, data) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/teams/${teamId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async deleteServerTeam(teamId) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/teams/${teamId}`,\n      { method: \"DELETE\" },\n      null\n    );\n  }\n  async addServerUserToTeam(options) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/team-memberships/${options.teamId}/${options.userId}`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({})\n      },\n      null\n    );\n    return await response.json();\n  }\n  async removeServerUserFromTeam(options) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/team-memberships/${options.teamId}/${options.userId}`,\n      {\n        method: \"DELETE\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({})\n      },\n      null\n    );\n  }\n  async updateServerUser(userId, update) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/users/${userId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(update)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async createServerProviderAccessToken(userId, provider, scope) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/connected-accounts/${userId}/${provider}/access-token`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({ scope })\n      },\n      null\n    );\n    return await response.json();\n  }\n  async createServerUserSession(userId, expiresInMillis, isImpersonation) {\n    const response = await this.sendServerRequest(\n      \"/auth/sessions\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          user_id: userId,\n          expires_in_millis: expiresInMillis,\n          is_impersonation: isImpersonation\n        })\n      },\n      null\n    );\n    const result = await response.json();\n    return {\n      accessToken: result.access_token,\n      refreshToken: result.refresh_token\n    };\n  }\n  async leaveServerTeam(options) {\n    await this.sendClientRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/team-memberships/${options.teamId}/${options.userId}`,\n      {\n        method: \"DELETE\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({})\n      },\n      null\n    );\n  }\n  async updateServerTeamMemberProfile(options) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/team-member-profiles/${options.teamId}/${options.userId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(options.profile)\n      },\n      null\n    );\n  }\n  async grantServerTeamUserPermission(teamId, userId, permissionId) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/team-permissions/${teamId}/${userId}/${permissionId}`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({})\n      },\n      null\n    );\n  }\n  async grantServerProjectPermission(userId, permissionId) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/project-permissions/${userId}/${permissionId}`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({})\n      },\n      null\n    );\n  }\n  async revokeServerTeamUserPermission(teamId, userId, permissionId) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/team-permissions/${teamId}/${userId}/${permissionId}`,\n      {\n        method: \"DELETE\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({})\n      },\n      null\n    );\n  }\n  async revokeServerProjectPermission(userId, permissionId) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/project-permissions/${userId}/${permissionId}`,\n      {\n        method: \"DELETE\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({})\n      },\n      null\n    );\n  }\n  async deleteServerUser(userId) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/users/${userId}`,\n      {\n        method: \"DELETE\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({})\n      },\n      null\n    );\n  }\n  async createServerContactChannel(data) {\n    const response = await this.sendServerRequest(\n      \"/contact-channels\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async updateServerContactChannel(userId, contactChannelId, data) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/contact-channels/${userId}/${contactChannelId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async deleteServerContactChannel(userId, contactChannelId) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/contact-channels/${userId}/${contactChannelId}`,\n      {\n        method: \"DELETE\"\n      },\n      null\n    );\n  }\n  async listServerContactChannels(userId) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/contact-channels?user_id=${userId}`,\n      {\n        method: \"GET\"\n      },\n      null\n    );\n    const json = await response.json();\n    return json.items;\n  }\n  async listServerNotificationCategories(userId) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/emails/notification-preference/${userId}`,\n      {\n        method: \"GET\"\n      },\n      null\n    );\n    const json = await response.json();\n    return json.items;\n  }\n  async setServerNotificationsEnabled(userId, notificationCategoryId, enabled) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/emails/notification-preference/${userId}/${notificationCategoryId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          enabled\n        })\n      },\n      null\n    );\n  }\n  async sendServerContactChannelVerificationEmail(userId, contactChannelId, callbackUrl) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/contact-channels/${userId}/${contactChannelId}/send-verification-code`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({ callback_url: callbackUrl })\n      },\n      null\n    );\n  }\n  async listServerSessions(userId) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/auth/sessions?user_id=${userId}`,\n      {\n        method: \"GET\"\n      },\n      null\n    );\n    return await response.json();\n  }\n  async deleteServerSession(sessionId) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/auth/sessions/${sessionId}`,\n      {\n        method: \"DELETE\"\n      },\n      null\n    );\n  }\n  async sendServerTeamInvitation(options) {\n    await this.sendServerRequest(\n      \"/team-invitations/send-code\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email: options.email,\n          team_id: options.teamId,\n          callback_url: options.callbackUrl\n        })\n      },\n      null\n    );\n  }\n  async updatePassword(options) {\n    const res = await this.sendServerRequestAndCatchKnownError(\n      \"/auth/password/update\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          old_password: options.oldPassword,\n          new_password: options.newPassword\n        })\n      },\n      null,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.PasswordConfirmationMismatch, _known_errors_js__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.PasswordRequirementsNotMet]\n    );\n    if (res.status === \"error\") {\n      return res.error;\n    }\n  }\n  // OAuth Providers CRUD operations\n  async createServerOAuthProvider(data) {\n    const response = await this.sendServerRequest(\n      \"/oauth-providers\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async listServerOAuthProviders(options = {}) {\n    const queryParams = new URLSearchParams((0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_3__.filterUndefined)(options));\n    const response = await this.sendServerRequest(\n      `/oauth-providers${queryParams.toString() ? `?${queryParams.toString()}` : \"\"}`,\n      {\n        method: \"GET\"\n      },\n      null\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async updateServerOAuthProvider(userId, providerId, data) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/oauth-providers/${userId}/${providerId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async deleteServerOAuthProvider(userId, providerId) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/oauth-providers/${userId}/${providerId}`,\n      {\n        method: \"DELETE\"\n      },\n      null\n    );\n    return await response.json();\n  }\n  async sendEmail(options) {\n    const res = await this.sendServerRequest(\n      \"/emails/send-email\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          user_ids: options.userIds,\n          all_users: options.allUsers,\n          theme_id: options.themeId,\n          html: options.html,\n          subject: options.subject,\n          notification_category_name: options.notificationCategoryName,\n          template_id: options.templateId,\n          variables: options.variables,\n          draft_id: options.draftId\n        })\n      },\n      null\n    );\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_4__.Result.ok(void 0);\n  }\n  async updateItemQuantity(options, data) {\n    let customerType;\n    let customerId;\n    const itemId = options.itemId;\n    if (\"userId\" in options) {\n      customerType = \"user\";\n      customerId = options.userId;\n    } else if (\"teamId\" in options) {\n      customerType = \"team\";\n      customerId = options.teamId;\n    } else if (\"customCustomerId\" in options) {\n      customerType = \"custom\";\n      customerId = options.customCustomerId;\n    } else {\n      throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_2__.StackAssertionError(\"updateItemQuantity requires one of userId, teamId, or customCustomerId\");\n    }\n    const queryParams = new URLSearchParams({ allow_negative: (data.allow_negative ?? false).toString() });\n    await this.sendServerRequest(\n      `/payments/items/${customerType}/${customerId}/${itemId}/update-quantity?${queryParams.toString()}`,\n      {\n        method: \"POST\",\n        headers: { \"content-type\": \"application/json\" },\n        body: JSON.stringify({ delta: data.delta, expires_at: data.expires_at, description: data.description })\n      },\n      null\n    );\n  }\n  async getDataVaultStoreValue(secret, storeId, key) {\n    const hashedKey = await (0,_helpers_vault_client_side_js__WEBPACK_IMPORTED_MODULE_0__.hashKey)(secret, key);\n    const response = await this.sendServerRequestAndCatchKnownError(\n      `/data-vault/stores/${storeId}/get`,\n      {\n        method: \"POST\",\n        headers: { \"content-type\": \"application/json\" },\n        body: JSON.stringify({ hashed_key: hashedKey })\n      },\n      null,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.DataVaultStoreHashedKeyDoesNotExist]\n    );\n    if (response.status === \"error\") {\n      if (_known_errors_js__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.DataVaultStoreHashedKeyDoesNotExist.isInstance(response.error)) {\n        return null;\n      } else {\n        throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_2__.StackAssertionError(\"Unexpected uncaught error\", { cause: response.error });\n      }\n    }\n    const json = await response.data.json();\n    const encryptedValue = json.encrypted_value;\n    if (typeof encryptedValue !== \"string\") throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_2__.StackAssertionError(\"encrypted_value is not a string\", { type: typeof encryptedValue });\n    return await (0,_helpers_vault_client_side_js__WEBPACK_IMPORTED_MODULE_0__.decryptValue)(secret, key, encryptedValue);\n  }\n  async setDataVaultStoreValue(secret, storeId, key, value) {\n    const hashedKey = await (0,_helpers_vault_client_side_js__WEBPACK_IMPORTED_MODULE_0__.hashKey)(secret, key);\n    const encryptedValue = await (0,_helpers_vault_client_side_js__WEBPACK_IMPORTED_MODULE_0__.encryptValue)(secret, key, value);\n    await this.sendServerRequest(\n      `/data-vault/stores/${storeId}/set`,\n      {\n        method: \"POST\",\n        headers: { \"content-type\": \"application/json\" },\n        body: JSON.stringify({ hashed_key: hashedKey, encrypted_value: encryptedValue })\n      },\n      null\n    );\n  }\n};\n\n//# sourceMappingURL=server-interface.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vaW50ZXJmYWNlL3NlcnZlci1pbnRlcmZhY2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNzRjtBQUNyQztBQUNRO0FBQ0g7QUFDVDtBQUNBO0FBR2Q7QUFDL0IseUNBQXlDLHNFQUFvQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHFEQUFNO0FBQ25CLE1BQU07QUFDTjtBQUNBO0FBQ0EsaUJBQWlCLHFEQUFNO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLE9BQU8seURBQVc7QUFDbEI7QUFDQTtBQUNBLFVBQVUseURBQVc7QUFDckI7QUFDQSxRQUFRO0FBQ1Isa0JBQWtCLGlFQUFtQixnQ0FBZ0MsOEJBQThCO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGlFQUFtQiwrQkFBK0I7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHlEQUFTLFVBQVUsT0FBTztBQUNoQyxRQUFRO0FBQ1I7QUFDQSxPQUFPLHlEQUFXO0FBQ2xCO0FBQ0E7QUFDQSxhQUFhLHFEQUFNO0FBQ25CO0FBQ0E7QUFDQSxXQUFXLHFEQUFNO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLE1BQU0seURBQVMsNkJBQTZCLGVBQWU7QUFDM0QsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSx5REFBUyxxQkFBcUIsYUFBYSxXQUFXLE9BQU87QUFDbkUsUUFBUSxrQkFBa0I7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0seURBQVMsaUNBQWlDLGVBQWU7QUFDL0QsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSx5REFBUyx5QkFBeUIsZUFBZSxHQUFHLGVBQWU7QUFDekUsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixvQkFBb0Isa0VBQWU7QUFDOUQ7QUFDQTtBQUNBO0FBQ0EsT0FBTyxHQUFHO0FBQ1YsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLG9CQUFvQixrRUFBZTtBQUNqRTtBQUNBO0FBQ0EsT0FBTyxHQUFHO0FBQ1YsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxrRUFBZTtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUSxJQUFJO0FBQ1o7QUFDQTtBQUNBLFFBQVEsSUFBSTtBQUNaO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsS0FBSztBQUNMLHlGQUF5RjtBQUN6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixvQkFBb0Isa0VBQWU7QUFDbkQ7QUFDQSxPQUFPLEdBQUc7QUFDVixRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsT0FBTztBQUN2QixRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSxPQUFPLEtBQUs7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHlEQUFTLFVBQVUsT0FBTztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHlEQUFTLFVBQVUsT0FBTztBQUNoQyxRQUFRLGtCQUFrQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSx5REFBUyxxQkFBcUIsZUFBZSxHQUFHLGVBQWU7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsK0JBQStCO0FBQy9CLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHlEQUFTLHFCQUFxQixlQUFlLEdBQUcsZUFBZTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCwrQkFBK0I7QUFDL0IsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHlEQUFTLFVBQVUsT0FBTztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHlEQUFTLHVCQUF1QixPQUFPLEdBQUcsU0FBUztBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCwrQkFBK0IsT0FBTztBQUN0QyxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHlEQUFTLHFCQUFxQixlQUFlLEdBQUcsZUFBZTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCwrQkFBK0I7QUFDL0IsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHlEQUFTLHlCQUF5QixlQUFlLEdBQUcsZUFBZTtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSx5REFBUyxxQkFBcUIsT0FBTyxHQUFHLE9BQU8sR0FBRyxhQUFhO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULCtCQUErQjtBQUMvQixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0seURBQVMsd0JBQXdCLE9BQU8sR0FBRyxhQUFhO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULCtCQUErQjtBQUMvQixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0seURBQVMscUJBQXFCLE9BQU8sR0FBRyxPQUFPLEdBQUcsYUFBYTtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCwrQkFBK0I7QUFDL0IsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHlEQUFTLHdCQUF3QixPQUFPLEdBQUcsYUFBYTtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCwrQkFBK0I7QUFDL0IsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHlEQUFTLFVBQVUsT0FBTztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCwrQkFBK0I7QUFDL0IsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0seURBQVMscUJBQXFCLE9BQU8sR0FBRyxpQkFBaUI7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSx5REFBUyxxQkFBcUIsT0FBTyxHQUFHLGlCQUFpQjtBQUMvRDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHlEQUFTLDZCQUE2QixPQUFPO0FBQ25EO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHlEQUFTLG1DQUFtQyxPQUFPO0FBQ3pEO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHlEQUFTLG1DQUFtQyxPQUFPLEdBQUcsdUJBQXVCO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHlEQUFTLHFCQUFxQixPQUFPLEdBQUcsaUJBQWlCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULCtCQUErQiwyQkFBMkI7QUFDMUQsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHlEQUFTLDBCQUEwQixPQUFPO0FBQ2hEO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSx5REFBUyxrQkFBa0IsVUFBVTtBQUMzQztBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0EsT0FBTyx5REFBVywrQkFBK0IseURBQVc7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0MsNENBQTRDLGtFQUFlO0FBQzNEO0FBQ0EseUJBQXlCLDZCQUE2Qix1QkFBdUIsT0FBTztBQUNwRjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSx5REFBUyxvQkFBb0IsT0FBTyxHQUFHLFdBQVc7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSx5REFBUyxvQkFBb0IsT0FBTyxHQUFHLFdBQVc7QUFDeEQ7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0EsV0FBVyxxREFBTTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTixnQkFBZ0IsaUVBQW1CO0FBQ25DO0FBQ0EsOENBQThDLDJEQUEyRDtBQUN6RztBQUNBLHlCQUF5QixhQUFhLEdBQUcsV0FBVyxHQUFHLE9BQU8sbUJBQW1CLHVCQUF1QjtBQUN4RztBQUNBO0FBQ0EsbUJBQW1CLG9DQUFvQztBQUN2RCwrQkFBK0IsK0VBQStFO0FBQzlHLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixzRUFBTztBQUNuQztBQUNBLDRCQUE0QixRQUFRO0FBQ3BDO0FBQ0E7QUFDQSxtQkFBbUIsb0NBQW9DO0FBQ3ZELCtCQUErQix1QkFBdUI7QUFDdEQsT0FBTztBQUNQO0FBQ0EsT0FBTyx5REFBVztBQUNsQjtBQUNBO0FBQ0EsVUFBVSx5REFBVztBQUNyQjtBQUNBLFFBQVE7QUFDUixrQkFBa0IsaUVBQW1CLGdDQUFnQyx1QkFBdUI7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsaUVBQW1CLHNDQUFzQyw2QkFBNkI7QUFDNUksaUJBQWlCLDJFQUFZO0FBQzdCO0FBQ0E7QUFDQSw0QkFBNEIsc0VBQU87QUFDbkMsaUNBQWlDLDJFQUFZO0FBQzdDO0FBQ0EsNEJBQTRCLFFBQVE7QUFDcEM7QUFDQTtBQUNBLG1CQUFtQixvQ0FBb0M7QUFDdkQsK0JBQStCLHdEQUF3RDtBQUN2RixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS9pbnRlcmZhY2Uvc2VydmVyLWludGVyZmFjZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvaW50ZXJmYWNlL3NlcnZlci1pbnRlcmZhY2UudHNcbmltcG9ydCB7IGRlY3J5cHRWYWx1ZSwgZW5jcnlwdFZhbHVlLCBoYXNoS2V5IH0gZnJvbSBcIi4uL2hlbHBlcnMvdmF1bHQvY2xpZW50LXNpZGUuanNcIjtcbmltcG9ydCB7IEtub3duRXJyb3JzIH0gZnJvbSBcIi4uL2tub3duLWVycm9ycy5qc1wiO1xuaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciB9IGZyb20gXCIuLi91dGlscy9lcnJvcnMuanNcIjtcbmltcG9ydCB7IGZpbHRlclVuZGVmaW5lZCB9IGZyb20gXCIuLi91dGlscy9vYmplY3RzLmpzXCI7XG5pbXBvcnQgeyBSZXN1bHQgfSBmcm9tIFwiLi4vdXRpbHMvcmVzdWx0cy5qc1wiO1xuaW1wb3J0IHsgdXJsU3RyaW5nIH0gZnJvbSBcIi4uL3V0aWxzL3VybHMuanNcIjtcbmltcG9ydCB7XG4gIFN0YWNrQ2xpZW50SW50ZXJmYWNlXG59IGZyb20gXCIuL2NsaWVudC1pbnRlcmZhY2UuanNcIjtcbnZhciBTdGFja1NlcnZlckludGVyZmFjZSA9IGNsYXNzIGV4dGVuZHMgU3RhY2tDbGllbnRJbnRlcmZhY2Uge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgc3VwZXIob3B0aW9ucyk7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuICBhc3luYyBzZW5kU2VydmVyUmVxdWVzdChwYXRoLCBvcHRpb25zLCBzZXNzaW9uLCByZXF1ZXN0VHlwZSA9IFwic2VydmVyXCIpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcbiAgICAgIHBhdGgsXG4gICAgICB7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIngtc3RhY2stc2VjcmV0LXNlcnZlci1rZXlcIjogXCJzZWNyZXRTZXJ2ZXJLZXlcIiBpbiB0aGlzLm9wdGlvbnMgPyB0aGlzLm9wdGlvbnMuc2VjcmV0U2VydmVyS2V5IDogXCJcIixcbiAgICAgICAgICAuLi5vcHRpb25zLmhlYWRlcnNcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNlc3Npb24sXG4gICAgICByZXF1ZXN0VHlwZVxuICAgICk7XG4gIH1cbiAgYXN5bmMgc2VuZFNlcnZlclJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IocGF0aCwgcmVxdWVzdE9wdGlvbnMsIHRva2VuU3RvcmVPck51bGwsIGVycm9yc1RvQ2F0Y2gpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIFJlc3VsdC5vayhhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KHBhdGgsIHJlcXVlc3RPcHRpb25zLCB0b2tlblN0b3JlT3JOdWxsKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgZm9yIChjb25zdCBlcnJvclR5cGUgb2YgZXJyb3JzVG9DYXRjaCkge1xuICAgICAgICBpZiAoZXJyb3JUeXBlLmlzSW5zdGFuY2UoZSkpIHtcbiAgICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgfVxuICBhc3luYyBjcmVhdGVTZXJ2ZXJVc2VyKGRhdGEpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXG4gICAgICBcIi91c2Vyc1wiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIGdldFNlcnZlclVzZXJCeVRva2VuKHNlc3Npb24pIHtcbiAgICBjb25zdCByZXNwb25zZU9yRXJyb3IgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFxuICAgICAgXCIvdXNlcnMvbWVcIixcbiAgICAgIHt9LFxuICAgICAgc2Vzc2lvbixcbiAgICAgIFtLbm93bkVycm9ycy5DYW5ub3RHZXRPd25Vc2VyV2l0aG91dFVzZXJdXG4gICAgKTtcbiAgICBpZiAocmVzcG9uc2VPckVycm9yLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICBpZiAoS25vd25FcnJvcnMuQ2Fubm90R2V0T3duVXNlcldpdGhvdXRVc2VyLmlzSW5zdGFuY2UocmVzcG9uc2VPckVycm9yLmVycm9yKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiVW5leHBlY3RlZCB1bmNhdWdodCBlcnJvclwiLCB7IGNhdXNlOiByZXNwb25zZU9yRXJyb3IuZXJyb3IgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJlc3BvbnNlID0gcmVzcG9uc2VPckVycm9yLmRhdGE7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICBpZiAoIXVzZXIpIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiVXNlciBlbmRwb2ludCByZXR1cm5lZCBudWxsOyB0aGlzIHNob3VsZCBuZXZlciBoYXBwZW5cIik7XG4gICAgcmV0dXJuIHVzZXI7XG4gIH1cbiAgYXN5bmMgZ2V0U2VydmVyVXNlckJ5SWQodXNlcklkKSB7XG4gICAgY29uc3QgcmVzcG9uc2VPckVycm9yID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcbiAgICAgIHVybFN0cmluZ2AvdXNlcnMvJHt1c2VySWR9YCxcbiAgICAgIHt9LFxuICAgICAgbnVsbCxcbiAgICAgIFtLbm93bkVycm9ycy5Vc2VyTm90Rm91bmRdXG4gICAgKTtcbiAgICBpZiAocmVzcG9uc2VPckVycm9yLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlc3BvbnNlT3JFcnJvci5lcnJvcik7XG4gICAgfVxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCByZXNwb25zZU9yRXJyb3IuZGF0YS5qc29uKCk7XG4gICAgcmV0dXJuIFJlc3VsdC5vayh1c2VyKTtcbiAgfVxuICBhc3luYyBsaXN0U2VydmVyVGVhbUludml0YXRpb25zKG9wdGlvbnMpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXG4gICAgICB1cmxTdHJpbmdgL3RlYW0taW52aXRhdGlvbnM/dGVhbV9pZD0ke29wdGlvbnMudGVhbUlkfWAsXG4gICAgICB7fSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4gcmVzdWx0Lml0ZW1zO1xuICB9XG4gIGFzeW5jIHJldm9rZVNlcnZlclRlYW1JbnZpdGF0aW9uKGludml0YXRpb25JZCwgdGVhbUlkKSB7XG4gICAgYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIHVybFN0cmluZ2AvdGVhbS1pbnZpdGF0aW9ucy8ke2ludml0YXRpb25JZH0/dGVhbV9pZD0ke3RlYW1JZH1gLFxuICAgICAgeyBtZXRob2Q6IFwiREVMRVRFXCIgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICB9XG4gIGFzeW5jIGxpc3RTZXJ2ZXJUZWFtTWVtYmVyUHJvZmlsZXMob3B0aW9ucykge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIHVybFN0cmluZ2AvdGVhbS1tZW1iZXItcHJvZmlsZXM/dGVhbV9pZD0ke29wdGlvbnMudGVhbUlkfWAsXG4gICAgICB7fSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4gcmVzdWx0Lml0ZW1zO1xuICB9XG4gIGFzeW5jIGdldFNlcnZlclRlYW1NZW1iZXJQcm9maWxlKG9wdGlvbnMpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXG4gICAgICB1cmxTdHJpbmdgL3RlYW0tbWVtYmVyLXByb2ZpbGVzLyR7b3B0aW9ucy50ZWFtSWR9LyR7b3B0aW9ucy51c2VySWR9YCxcbiAgICAgIHt9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBsaXN0U2VydmVyVGVhbVBlcm1pc3Npb25zKG9wdGlvbnMsIHNlc3Npb24pIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXG4gICAgICBgL3RlYW0tcGVybWlzc2lvbnM/JHtuZXcgVVJMU2VhcmNoUGFyYW1zKGZpbHRlclVuZGVmaW5lZCh7XG4gICAgICAgIHVzZXJfaWQ6IG9wdGlvbnMudXNlcklkLFxuICAgICAgICB0ZWFtX2lkOiBvcHRpb25zLnRlYW1JZCxcbiAgICAgICAgcmVjdXJzaXZlOiBvcHRpb25zLnJlY3Vyc2l2ZS50b1N0cmluZygpXG4gICAgICB9KSl9YCxcbiAgICAgIHt9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiByZXN1bHQuaXRlbXM7XG4gIH1cbiAgYXN5bmMgbGlzdFNlcnZlclByb2plY3RQZXJtaXNzaW9ucyhvcHRpb25zLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgYC9wcm9qZWN0LXBlcm1pc3Npb25zPyR7bmV3IFVSTFNlYXJjaFBhcmFtcyhmaWx0ZXJVbmRlZmluZWQoe1xuICAgICAgICB1c2VyX2lkOiBvcHRpb25zLnVzZXJJZCxcbiAgICAgICAgcmVjdXJzaXZlOiBvcHRpb25zLnJlY3Vyc2l2ZS50b1N0cmluZygpXG4gICAgICB9KSl9YCxcbiAgICAgIHt9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiByZXN1bHQuaXRlbXM7XG4gIH1cbiAgYXN5bmMgbGlzdFNlcnZlclVzZXJzKG9wdGlvbnMpIHtcbiAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGZpbHRlclVuZGVmaW5lZCh7XG4gICAgICBjdXJzb3I6IG9wdGlvbnMuY3Vyc29yLFxuICAgICAgbGltaXQ6IG9wdGlvbnMubGltaXQ/LnRvU3RyaW5nKCksXG4gICAgICBkZXNjOiBvcHRpb25zLmRlc2M/LnRvU3RyaW5nKCksXG4gICAgICAuLi5vcHRpb25zLm9yZGVyQnkgPyB7XG4gICAgICAgIG9yZGVyX2J5OiB7XG4gICAgICAgICAgc2lnbmVkVXBBdDogXCJzaWduZWRfdXBfYXRcIlxuICAgICAgICB9W29wdGlvbnMub3JkZXJCeV1cbiAgICAgIH0gOiB7fSxcbiAgICAgIC4uLm9wdGlvbnMucXVlcnkgPyB7XG4gICAgICAgIHF1ZXJ5OiBvcHRpb25zLnF1ZXJ5XG4gICAgICB9IDoge30sXG4gICAgICAuLi5vcHRpb25zLmluY2x1ZGVBbm9ueW1vdXMgPyB7XG4gICAgICAgIGluY2x1ZGVfYW5vbnltb3VzOiBcInRydWVcIlxuICAgICAgfSA6IHt9XG4gICAgfSkpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcIi91c2Vycz9cIiArIHNlYXJjaFBhcmFtcy50b1N0cmluZygpLCB7fSwgbnVsbCk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBsaXN0U2VydmVyVGVhbXMob3B0aW9ucykge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIGAvdGVhbXM/JHtuZXcgVVJMU2VhcmNoUGFyYW1zKGZpbHRlclVuZGVmaW5lZCh7XG4gICAgICAgIHVzZXJfaWQ6IG9wdGlvbnM/LnVzZXJJZFxuICAgICAgfSkpfWAsXG4gICAgICB7fSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4gcmVzdWx0Lml0ZW1zO1xuICB9XG4gIGFzeW5jIGdldFNlcnZlclRlYW0odGVhbUlkKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgYC90ZWFtcy8ke3RlYW1JZH1gLFxuICAgICAge30sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIGxpc3RTZXJ2ZXJUZWFtVXNlcnModGVhbUlkKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KGAvdXNlcnM/dGVhbV9pZD0ke3RlYW1JZH1gLCB7fSwgbnVsbCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiByZXN1bHQuaXRlbXM7XG4gIH1cbiAgLyogd2hlbiBwYXNzaW5nIGEgc2Vzc2lvbiwgdGhlIHVzZXIgd2lsbCBiZSBhZGRlZCB0byB0aGUgdGVhbSAqL1xuICBhc3luYyBjcmVhdGVTZXJ2ZXJUZWFtKGRhdGEpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXG4gICAgICBcIi90ZWFtc1wiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIHVwZGF0ZVNlcnZlclRlYW0odGVhbUlkLCBkYXRhKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgdXJsU3RyaW5nYC90ZWFtcy8ke3RlYW1JZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBkZWxldGVTZXJ2ZXJUZWFtKHRlYW1JZCkge1xuICAgIGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXG4gICAgICB1cmxTdHJpbmdgL3RlYW1zLyR7dGVhbUlkfWAsXG4gICAgICB7IG1ldGhvZDogXCJERUxFVEVcIiB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gIH1cbiAgYXN5bmMgYWRkU2VydmVyVXNlclRvVGVhbShvcHRpb25zKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgdXJsU3RyaW5nYC90ZWFtLW1lbWJlcnNoaXBzLyR7b3B0aW9ucy50ZWFtSWR9LyR7b3B0aW9ucy51c2VySWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHt9KVxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgcmVtb3ZlU2VydmVyVXNlckZyb21UZWFtKG9wdGlvbnMpIHtcbiAgICBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgdXJsU3RyaW5nYC90ZWFtLW1lbWJlcnNoaXBzLyR7b3B0aW9ucy50ZWFtSWR9LyR7b3B0aW9ucy51c2VySWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe30pXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlU2VydmVyVXNlcih1c2VySWQsIHVwZGF0ZSkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIHVybFN0cmluZ2AvdXNlcnMvJHt1c2VySWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh1cGRhdGUpXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBjcmVhdGVTZXJ2ZXJQcm92aWRlckFjY2Vzc1Rva2VuKHVzZXJJZCwgcHJvdmlkZXIsIHNjb3BlKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgdXJsU3RyaW5nYC9jb25uZWN0ZWQtYWNjb3VudHMvJHt1c2VySWR9LyR7cHJvdmlkZXJ9L2FjY2Vzcy10b2tlbmAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHNjb3BlIH0pXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBjcmVhdGVTZXJ2ZXJVc2VyU2Vzc2lvbih1c2VySWQsIGV4cGlyZXNJbk1pbGxpcywgaXNJbXBlcnNvbmF0aW9uKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgXCIvYXV0aC9zZXNzaW9uc1wiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgICAgICBleHBpcmVzX2luX21pbGxpczogZXhwaXJlc0luTWlsbGlzLFxuICAgICAgICAgIGlzX2ltcGVyc29uYXRpb246IGlzSW1wZXJzb25hdGlvblxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4ge1xuICAgICAgYWNjZXNzVG9rZW46IHJlc3VsdC5hY2Nlc3NfdG9rZW4sXG4gICAgICByZWZyZXNoVG9rZW46IHJlc3VsdC5yZWZyZXNoX3Rva2VuXG4gICAgfTtcbiAgfVxuICBhc3luYyBsZWF2ZVNlcnZlclRlYW0ob3B0aW9ucykge1xuICAgIGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXG4gICAgICB1cmxTdHJpbmdgL3RlYW0tbWVtYmVyc2hpcHMvJHtvcHRpb25zLnRlYW1JZH0vJHtvcHRpb25zLnVzZXJJZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7fSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuICBhc3luYyB1cGRhdGVTZXJ2ZXJUZWFtTWVtYmVyUHJvZmlsZShvcHRpb25zKSB7XG4gICAgYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIHVybFN0cmluZ2AvdGVhbS1tZW1iZXItcHJvZmlsZXMvJHtvcHRpb25zLnRlYW1JZH0vJHtvcHRpb25zLnVzZXJJZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMucHJvZmlsZSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuICBhc3luYyBncmFudFNlcnZlclRlYW1Vc2VyUGVybWlzc2lvbih0ZWFtSWQsIHVzZXJJZCwgcGVybWlzc2lvbklkKSB7XG4gICAgYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIHVybFN0cmluZ2AvdGVhbS1wZXJtaXNzaW9ucy8ke3RlYW1JZH0vJHt1c2VySWR9LyR7cGVybWlzc2lvbklkfWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7fSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuICBhc3luYyBncmFudFNlcnZlclByb2plY3RQZXJtaXNzaW9uKHVzZXJJZCwgcGVybWlzc2lvbklkKSB7XG4gICAgYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIHVybFN0cmluZ2AvcHJvamVjdC1wZXJtaXNzaW9ucy8ke3VzZXJJZH0vJHtwZXJtaXNzaW9uSWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHt9KVxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICB9XG4gIGFzeW5jIHJldm9rZVNlcnZlclRlYW1Vc2VyUGVybWlzc2lvbih0ZWFtSWQsIHVzZXJJZCwgcGVybWlzc2lvbklkKSB7XG4gICAgYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIHVybFN0cmluZ2AvdGVhbS1wZXJtaXNzaW9ucy8ke3RlYW1JZH0vJHt1c2VySWR9LyR7cGVybWlzc2lvbklkfWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHt9KVxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICB9XG4gIGFzeW5jIHJldm9rZVNlcnZlclByb2plY3RQZXJtaXNzaW9uKHVzZXJJZCwgcGVybWlzc2lvbklkKSB7XG4gICAgYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIHVybFN0cmluZ2AvcHJvamVjdC1wZXJtaXNzaW9ucy8ke3VzZXJJZH0vJHtwZXJtaXNzaW9uSWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe30pXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gIH1cbiAgYXN5bmMgZGVsZXRlU2VydmVyVXNlcih1c2VySWQpIHtcbiAgICBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgdXJsU3RyaW5nYC91c2Vycy8ke3VzZXJJZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7fSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuICBhc3luYyBjcmVhdGVTZXJ2ZXJDb250YWN0Q2hhbm5lbChkYXRhKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgXCIvY29udGFjdC1jaGFubmVsc1wiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIHVwZGF0ZVNlcnZlckNvbnRhY3RDaGFubmVsKHVzZXJJZCwgY29udGFjdENoYW5uZWxJZCwgZGF0YSkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIHVybFN0cmluZ2AvY29udGFjdC1jaGFubmVscy8ke3VzZXJJZH0vJHtjb250YWN0Q2hhbm5lbElkfWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIGRlbGV0ZVNlcnZlckNvbnRhY3RDaGFubmVsKHVzZXJJZCwgY29udGFjdENoYW5uZWxJZCkge1xuICAgIGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXG4gICAgICB1cmxTdHJpbmdgL2NvbnRhY3QtY2hhbm5lbHMvJHt1c2VySWR9LyR7Y29udGFjdENoYW5uZWxJZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCJcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuICBhc3luYyBsaXN0U2VydmVyQ29udGFjdENoYW5uZWxzKHVzZXJJZCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIHVybFN0cmluZ2AvY29udGFjdC1jaGFubmVscz91c2VyX2lkPSR7dXNlcklkfWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJHRVRcIlxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIGpzb24uaXRlbXM7XG4gIH1cbiAgYXN5bmMgbGlzdFNlcnZlck5vdGlmaWNhdGlvbkNhdGVnb3JpZXModXNlcklkKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgdXJsU3RyaW5nYC9lbWFpbHMvbm90aWZpY2F0aW9uLXByZWZlcmVuY2UvJHt1c2VySWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkdFVFwiXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4ganNvbi5pdGVtcztcbiAgfVxuICBhc3luYyBzZXRTZXJ2ZXJOb3RpZmljYXRpb25zRW5hYmxlZCh1c2VySWQsIG5vdGlmaWNhdGlvbkNhdGVnb3J5SWQsIGVuYWJsZWQpIHtcbiAgICBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgdXJsU3RyaW5nYC9lbWFpbHMvbm90aWZpY2F0aW9uLXByZWZlcmVuY2UvJHt1c2VySWR9LyR7bm90aWZpY2F0aW9uQ2F0ZWdvcnlJZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBlbmFibGVkXG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gIH1cbiAgYXN5bmMgc2VuZFNlcnZlckNvbnRhY3RDaGFubmVsVmVyaWZpY2F0aW9uRW1haWwodXNlcklkLCBjb250YWN0Q2hhbm5lbElkLCBjYWxsYmFja1VybCkge1xuICAgIGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXG4gICAgICB1cmxTdHJpbmdgL2NvbnRhY3QtY2hhbm5lbHMvJHt1c2VySWR9LyR7Y29udGFjdENoYW5uZWxJZH0vc2VuZC12ZXJpZmljYXRpb24tY29kZWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGNhbGxiYWNrX3VybDogY2FsbGJhY2tVcmwgfSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuICBhc3luYyBsaXN0U2VydmVyU2Vzc2lvbnModXNlcklkKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgdXJsU3RyaW5nYC9hdXRoL3Nlc3Npb25zP3VzZXJfaWQ9JHt1c2VySWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkdFVFwiXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBkZWxldGVTZXJ2ZXJTZXNzaW9uKHNlc3Npb25JZCkge1xuICAgIGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXG4gICAgICB1cmxTdHJpbmdgL2F1dGgvc2Vzc2lvbnMvJHtzZXNzaW9uSWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gIH1cbiAgYXN5bmMgc2VuZFNlcnZlclRlYW1JbnZpdGF0aW9uKG9wdGlvbnMpIHtcbiAgICBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgXCIvdGVhbS1pbnZpdGF0aW9ucy9zZW5kLWNvZGVcIixcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBlbWFpbDogb3B0aW9ucy5lbWFpbCxcbiAgICAgICAgICB0ZWFtX2lkOiBvcHRpb25zLnRlYW1JZCxcbiAgICAgICAgICBjYWxsYmFja191cmw6IG9wdGlvbnMuY2FsbGJhY2tVcmxcbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuICBhc3luYyB1cGRhdGVQYXNzd29yZChvcHRpb25zKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcbiAgICAgIFwiL2F1dGgvcGFzc3dvcmQvdXBkYXRlXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgb2xkX3Bhc3N3b3JkOiBvcHRpb25zLm9sZFBhc3N3b3JkLFxuICAgICAgICAgIG5ld19wYXNzd29yZDogb3B0aW9ucy5uZXdQYXNzd29yZFxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIG51bGwsXG4gICAgICBbS25vd25FcnJvcnMuUGFzc3dvcmRDb25maXJtYXRpb25NaXNtYXRjaCwgS25vd25FcnJvcnMuUGFzc3dvcmRSZXF1aXJlbWVudHNOb3RNZXRdXG4gICAgKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gcmVzLmVycm9yO1xuICAgIH1cbiAgfVxuICAvLyBPQXV0aCBQcm92aWRlcnMgQ1JVRCBvcGVyYXRpb25zXG4gIGFzeW5jIGNyZWF0ZVNlcnZlck9BdXRoUHJvdmlkZXIoZGF0YSkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIFwiL29hdXRoLXByb3ZpZGVyc1wiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIGxpc3RTZXJ2ZXJPQXV0aFByb3ZpZGVycyhvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBxdWVyeVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoZmlsdGVyVW5kZWZpbmVkKG9wdGlvbnMpKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXG4gICAgICBgL29hdXRoLXByb3ZpZGVycyR7cXVlcnlQYXJhbXMudG9TdHJpbmcoKSA/IGA/JHtxdWVyeVBhcmFtcy50b1N0cmluZygpfWAgOiBcIlwifWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJHRVRcIlxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4gcmVzdWx0Lml0ZW1zO1xuICB9XG4gIGFzeW5jIHVwZGF0ZVNlcnZlck9BdXRoUHJvdmlkZXIodXNlcklkLCBwcm92aWRlcklkLCBkYXRhKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgdXJsU3RyaW5nYC9vYXV0aC1wcm92aWRlcnMvJHt1c2VySWR9LyR7cHJvdmlkZXJJZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBkZWxldGVTZXJ2ZXJPQXV0aFByb3ZpZGVyKHVzZXJJZCwgcHJvdmlkZXJJZCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIHVybFN0cmluZ2Avb2F1dGgtcHJvdmlkZXJzLyR7dXNlcklkfS8ke3Byb3ZpZGVySWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBzZW5kRW1haWwob3B0aW9ucykge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXG4gICAgICBcIi9lbWFpbHMvc2VuZC1lbWFpbFwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHVzZXJfaWRzOiBvcHRpb25zLnVzZXJJZHMsXG4gICAgICAgICAgYWxsX3VzZXJzOiBvcHRpb25zLmFsbFVzZXJzLFxuICAgICAgICAgIHRoZW1lX2lkOiBvcHRpb25zLnRoZW1lSWQsXG4gICAgICAgICAgaHRtbDogb3B0aW9ucy5odG1sLFxuICAgICAgICAgIHN1YmplY3Q6IG9wdGlvbnMuc3ViamVjdCxcbiAgICAgICAgICBub3RpZmljYXRpb25fY2F0ZWdvcnlfbmFtZTogb3B0aW9ucy5ub3RpZmljYXRpb25DYXRlZ29yeU5hbWUsXG4gICAgICAgICAgdGVtcGxhdGVfaWQ6IG9wdGlvbnMudGVtcGxhdGVJZCxcbiAgICAgICAgICB2YXJpYWJsZXM6IG9wdGlvbnMudmFyaWFibGVzLFxuICAgICAgICAgIGRyYWZ0X2lkOiBvcHRpb25zLmRyYWZ0SWRcbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gUmVzdWx0Lm9rKHZvaWQgMCk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlSXRlbVF1YW50aXR5KG9wdGlvbnMsIGRhdGEpIHtcbiAgICBsZXQgY3VzdG9tZXJUeXBlO1xuICAgIGxldCBjdXN0b21lcklkO1xuICAgIGNvbnN0IGl0ZW1JZCA9IG9wdGlvbnMuaXRlbUlkO1xuICAgIGlmIChcInVzZXJJZFwiIGluIG9wdGlvbnMpIHtcbiAgICAgIGN1c3RvbWVyVHlwZSA9IFwidXNlclwiO1xuICAgICAgY3VzdG9tZXJJZCA9IG9wdGlvbnMudXNlcklkO1xuICAgIH0gZWxzZSBpZiAoXCJ0ZWFtSWRcIiBpbiBvcHRpb25zKSB7XG4gICAgICBjdXN0b21lclR5cGUgPSBcInRlYW1cIjtcbiAgICAgIGN1c3RvbWVySWQgPSBvcHRpb25zLnRlYW1JZDtcbiAgICB9IGVsc2UgaWYgKFwiY3VzdG9tQ3VzdG9tZXJJZFwiIGluIG9wdGlvbnMpIHtcbiAgICAgIGN1c3RvbWVyVHlwZSA9IFwiY3VzdG9tXCI7XG4gICAgICBjdXN0b21lcklkID0gb3B0aW9ucy5jdXN0b21DdXN0b21lcklkO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcInVwZGF0ZUl0ZW1RdWFudGl0eSByZXF1aXJlcyBvbmUgb2YgdXNlcklkLCB0ZWFtSWQsIG9yIGN1c3RvbUN1c3RvbWVySWRcIik7XG4gICAgfVxuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7IGFsbG93X25lZ2F0aXZlOiAoZGF0YS5hbGxvd19uZWdhdGl2ZSA/PyBmYWxzZSkudG9TdHJpbmcoKSB9KTtcbiAgICBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgYC9wYXltZW50cy9pdGVtcy8ke2N1c3RvbWVyVHlwZX0vJHtjdXN0b21lcklkfS8ke2l0ZW1JZH0vdXBkYXRlLXF1YW50aXR5PyR7cXVlcnlQYXJhbXMudG9TdHJpbmcoKX1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7IFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgZGVsdGE6IGRhdGEuZGVsdGEsIGV4cGlyZXNfYXQ6IGRhdGEuZXhwaXJlc19hdCwgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24gfSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuICBhc3luYyBnZXREYXRhVmF1bHRTdG9yZVZhbHVlKHNlY3JldCwgc3RvcmVJZCwga2V5KSB7XG4gICAgY29uc3QgaGFzaGVkS2V5ID0gYXdhaXQgaGFzaEtleShzZWNyZXQsIGtleSk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFxuICAgICAgYC9kYXRhLXZhdWx0L3N0b3Jlcy8ke3N0b3JlSWR9L2dldGAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHsgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBoYXNoZWRfa2V5OiBoYXNoZWRLZXkgfSlcbiAgICAgIH0sXG4gICAgICBudWxsLFxuICAgICAgW0tub3duRXJyb3JzLkRhdGFWYXVsdFN0b3JlSGFzaGVkS2V5RG9lc05vdEV4aXN0XVxuICAgICk7XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICBpZiAoS25vd25FcnJvcnMuRGF0YVZhdWx0U3RvcmVIYXNoZWRLZXlEb2VzTm90RXhpc3QuaXNJbnN0YW5jZShyZXNwb25zZS5lcnJvcikpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIlVuZXhwZWN0ZWQgdW5jYXVnaHQgZXJyb3JcIiwgeyBjYXVzZTogcmVzcG9uc2UuZXJyb3IgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXNwb25zZS5kYXRhLmpzb24oKTtcbiAgICBjb25zdCBlbmNyeXB0ZWRWYWx1ZSA9IGpzb24uZW5jcnlwdGVkX3ZhbHVlO1xuICAgIGlmICh0eXBlb2YgZW5jcnlwdGVkVmFsdWUgIT09IFwic3RyaW5nXCIpIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiZW5jcnlwdGVkX3ZhbHVlIGlzIG5vdCBhIHN0cmluZ1wiLCB7IHR5cGU6IHR5cGVvZiBlbmNyeXB0ZWRWYWx1ZSB9KTtcbiAgICByZXR1cm4gYXdhaXQgZGVjcnlwdFZhbHVlKHNlY3JldCwga2V5LCBlbmNyeXB0ZWRWYWx1ZSk7XG4gIH1cbiAgYXN5bmMgc2V0RGF0YVZhdWx0U3RvcmVWYWx1ZShzZWNyZXQsIHN0b3JlSWQsIGtleSwgdmFsdWUpIHtcbiAgICBjb25zdCBoYXNoZWRLZXkgPSBhd2FpdCBoYXNoS2V5KHNlY3JldCwga2V5KTtcbiAgICBjb25zdCBlbmNyeXB0ZWRWYWx1ZSA9IGF3YWl0IGVuY3J5cHRWYWx1ZShzZWNyZXQsIGtleSwgdmFsdWUpO1xuICAgIGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXG4gICAgICBgL2RhdGEtdmF1bHQvc3RvcmVzLyR7c3RvcmVJZH0vc2V0YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczogeyBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGhhc2hlZF9rZXk6IGhhc2hlZEtleSwgZW5jcnlwdGVkX3ZhbHVlOiBlbmNyeXB0ZWRWYWx1ZSB9KVxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICB9XG59O1xuZXhwb3J0IHtcbiAgU3RhY2tTZXJ2ZXJJbnRlcmZhY2Vcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXJ2ZXItaW50ZXJmYWNlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/server-interface.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/known-errors.js":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/known-errors.js ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KnownError: () => (/* binding */ KnownError),\n/* harmony export */   KnownErrors: () => (/* binding */ KnownErrors)\n/* harmony export */ });\n/* harmony import */ var _utils_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/errors.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n/* harmony import */ var _utils_functions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/functions.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/functions.js\");\n/* harmony import */ var _utils_strings_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/strings.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/strings.js\");\n// src/known-errors.tsx\n\n\n\nvar KnownError = class extends _utils_errors_js__WEBPACK_IMPORTED_MODULE_0__.StatusError {\n  constructor(statusCode, humanReadableMessage, details) {\n    super(\n      statusCode,\n      humanReadableMessage\n    );\n    this.statusCode = statusCode;\n    this.humanReadableMessage = humanReadableMessage;\n    this.details = details;\n    this.__stackKnownErrorBrand = \"stack-known-error-brand-sentinel\";\n    this.name = \"KnownError\";\n  }\n  static isKnownError(error) {\n    return typeof error === \"object\" && error !== null && \"__stackKnownErrorBrand\" in error && error.__stackKnownErrorBrand === \"stack-known-error-brand-sentinel\";\n  }\n  getBody() {\n    return new TextEncoder().encode(JSON.stringify(this.toDescriptiveJson(), void 0, 2));\n  }\n  getHeaders() {\n    return {\n      \"Content-Type\": [\"application/json; charset=utf-8\"],\n      \"X-Stack-Known-Error\": [this.errorCode]\n    };\n  }\n  toDescriptiveJson() {\n    return {\n      code: this.errorCode,\n      ...this.details ? { details: this.details } : {},\n      error: this.humanReadableMessage\n    };\n  }\n  get errorCode() {\n    return this.constructor.errorCode ?? (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_0__.throwErr)(`Can't find error code for this KnownError. Is its constructor a KnownErrorConstructor? ${this}`);\n  }\n  static constructorArgsFromJson(json) {\n    return [\n      400,\n      json.message,\n      json\n    ];\n  }\n  static fromJson(json) {\n    for (const [_, KnownErrorType] of Object.entries(KnownErrors)) {\n      if (json.code === KnownErrorType.prototype.errorCode) {\n        const constructorArgs = KnownErrorType.constructorArgsFromJson(json);\n        return new KnownErrorType(\n          ...constructorArgs\n        );\n      }\n    }\n    throw new Error(`Unknown KnownError code. You may need to update your version of Stack to see more detailed information. ${json.code}: ${json.message}`);\n  }\n};\nvar knownErrorConstructorErrorCodeSentinel = Symbol(\"knownErrorConstructorErrorCodeSentinel\");\nfunction createKnownErrorConstructor(SuperClass, errorCode, create, constructorArgsFromJson) {\n  const createFn = create === \"inherit\" ? _utils_functions_js__WEBPACK_IMPORTED_MODULE_1__.identityArgs : create;\n  const constructorArgsFromJsonFn = constructorArgsFromJson === \"inherit\" ? SuperClass.constructorArgsFromJson : constructorArgsFromJson;\n  class KnownErrorImpl extends SuperClass {\n    constructor(...args) {\n      super(...createFn(...args));\n      this.name = `KnownError<${errorCode}>`;\n      this.constructorArgs = args;\n    }\n    static constructorArgsFromJson(json) {\n      return constructorArgsFromJsonFn(json.details);\n    }\n    static isInstance(error) {\n      if (!KnownError.isKnownError(error)) return false;\n      let current = error;\n      while (true) {\n        current = Object.getPrototypeOf(current);\n        if (!current) break;\n        if (\"errorCode\" in current.constructor && current.constructor.errorCode === errorCode) return true;\n      }\n      return false;\n    }\n  }\n  KnownErrorImpl.errorCode = errorCode;\n  ;\n  return KnownErrorImpl;\n}\nvar UnsupportedError = createKnownErrorConstructor(\n  KnownError,\n  \"UNSUPPORTED_ERROR\",\n  (originalErrorCode) => [\n    500,\n    `An error occurred that is not currently supported (possibly because it was added in a version of Stack that is newer than this client). The original unsupported error code was: ${originalErrorCode}`,\n    {\n      originalErrorCode\n    }\n  ],\n  (json) => [\n    json?.originalErrorCode ?? (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"originalErrorCode not found in UnsupportedError details\")\n  ]\n);\nvar BodyParsingError = createKnownErrorConstructor(\n  KnownError,\n  \"BODY_PARSING_ERROR\",\n  (message) => [\n    400,\n    message\n  ],\n  (json) => [json.message]\n);\nvar SchemaError = createKnownErrorConstructor(\n  KnownError,\n  \"SCHEMA_ERROR\",\n  (message) => [\n    400,\n    message || (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"SchemaError requires a message\"),\n    {\n      message\n    }\n  ],\n  (json) => [json.message]\n);\nvar AllOverloadsFailed = createKnownErrorConstructor(\n  KnownError,\n  \"ALL_OVERLOADS_FAILED\",\n  (overloadErrors) => [\n    400,\n    (0,_utils_strings_js__WEBPACK_IMPORTED_MODULE_2__.deindent)`\n      This endpoint has multiple overloads, but they all failed to process the request.\n\n        ${overloadErrors.map((e, i) => (0,_utils_strings_js__WEBPACK_IMPORTED_MODULE_2__.deindent)`\n          Overload ${i + 1}: ${JSON.stringify(e, void 0, 2)}\n        `).join(\"\\n\\n\")}\n    `,\n    {\n      overload_errors: overloadErrors\n    }\n  ],\n  (json) => [\n    json?.overload_errors ?? (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"overload_errors not found in AllOverloadsFailed details\")\n  ]\n);\nvar ProjectAuthenticationError = createKnownErrorConstructor(\n  KnownError,\n  \"PROJECT_AUTHENTICATION_ERROR\",\n  \"inherit\",\n  \"inherit\"\n);\nvar InvalidProjectAuthentication = createKnownErrorConstructor(\n  ProjectAuthenticationError,\n  \"INVALID_PROJECT_AUTHENTICATION\",\n  \"inherit\",\n  \"inherit\"\n);\nvar ProjectKeyWithoutAccessType = createKnownErrorConstructor(\n  InvalidProjectAuthentication,\n  \"PROJECT_KEY_WITHOUT_ACCESS_TYPE\",\n  () => [\n    400,\n    \"Either an API key or an admin access token was provided, but the x-stack-access-type header is missing. Set it to 'client', 'server', or 'admin' as appropriate.\"\n  ],\n  () => []\n);\nvar InvalidAccessType = createKnownErrorConstructor(\n  InvalidProjectAuthentication,\n  \"INVALID_ACCESS_TYPE\",\n  (accessType) => [\n    400,\n    `The x-stack-access-type header must be 'client', 'server', or 'admin', but was '${accessType}'.`\n  ],\n  (json) => [\n    json?.accessType ?? (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"accessType not found in InvalidAccessType details\")\n  ]\n);\nvar AccessTypeWithoutProjectId = createKnownErrorConstructor(\n  InvalidProjectAuthentication,\n  \"ACCESS_TYPE_WITHOUT_PROJECT_ID\",\n  (accessType) => [\n    400,\n    (0,_utils_strings_js__WEBPACK_IMPORTED_MODULE_2__.deindent)`\n      The x-stack-access-type header was '${accessType}', but the x-stack-project-id header was not provided.\n      \n      For more information, see the docs on REST API authentication: https://docs.stack-auth.com/rest-api/overview#authentication\n    `,\n    {\n      request_type: accessType\n    }\n  ],\n  (json) => [json.request_type]\n);\nvar AccessTypeRequired = createKnownErrorConstructor(\n  InvalidProjectAuthentication,\n  \"ACCESS_TYPE_REQUIRED\",\n  () => [\n    400,\n    (0,_utils_strings_js__WEBPACK_IMPORTED_MODULE_2__.deindent)`\n      You must specify an access level for this Stack project. Make sure project API keys are provided (eg. x-stack-publishable-client-key) and you set the x-stack-access-type header to 'client', 'server', or 'admin'.\n      \n      For more information, see the docs on REST API authentication: https://docs.stack-auth.com/rest-api/overview#authentication\n    `\n  ],\n  () => []\n);\nvar InsufficientAccessType = createKnownErrorConstructor(\n  InvalidProjectAuthentication,\n  \"INSUFFICIENT_ACCESS_TYPE\",\n  (actualAccessType, allowedAccessTypes) => [\n    401,\n    `The x-stack-access-type header must be ${allowedAccessTypes.map((s) => `'${s}'`).join(\" or \")}, but was '${actualAccessType}'.`,\n    {\n      actual_access_type: actualAccessType,\n      allowed_access_types: allowedAccessTypes\n    }\n  ],\n  (json) => [\n    json.actual_access_type,\n    json.allowed_access_types\n  ]\n);\nvar InvalidPublishableClientKey = createKnownErrorConstructor(\n  InvalidProjectAuthentication,\n  \"INVALID_PUBLISHABLE_CLIENT_KEY\",\n  (projectId) => [\n    401,\n    `The publishable key is not valid for the project ${JSON.stringify(projectId)}. Does the project and/or the key exist?`,\n    {\n      project_id: projectId\n    }\n  ],\n  (json) => [json.project_id]\n);\nvar InvalidSecretServerKey = createKnownErrorConstructor(\n  InvalidProjectAuthentication,\n  \"INVALID_SECRET_SERVER_KEY\",\n  (projectId) => [\n    401,\n    `The secret server key is not valid for the project ${JSON.stringify(projectId)}. Does the project and/or the key exist?`,\n    {\n      project_id: projectId\n    }\n  ],\n  (json) => [json.project_id]\n);\nvar InvalidSuperSecretAdminKey = createKnownErrorConstructor(\n  InvalidProjectAuthentication,\n  \"INVALID_SUPER_SECRET_ADMIN_KEY\",\n  (projectId) => [\n    401,\n    `The super secret admin key is not valid for the project ${JSON.stringify(projectId)}. Does the project and/or the key exist?`,\n    {\n      project_id: projectId\n    }\n  ],\n  (json) => [json.project_id]\n);\nvar InvalidAdminAccessToken = createKnownErrorConstructor(\n  InvalidProjectAuthentication,\n  \"INVALID_ADMIN_ACCESS_TOKEN\",\n  \"inherit\",\n  \"inherit\"\n);\nvar UnparsableAdminAccessToken = createKnownErrorConstructor(\n  InvalidAdminAccessToken,\n  \"UNPARSABLE_ADMIN_ACCESS_TOKEN\",\n  () => [\n    401,\n    \"Admin access token is not parsable.\"\n  ],\n  () => []\n);\nvar AdminAccessTokenExpired = createKnownErrorConstructor(\n  InvalidAdminAccessToken,\n  \"ADMIN_ACCESS_TOKEN_EXPIRED\",\n  (expiredAt) => [\n    401,\n    `Admin access token has expired. Please refresh it and try again.${expiredAt ? ` (The access token expired at ${expiredAt.toISOString()}.)` : \"\"}`,\n    { expired_at_millis: expiredAt?.getTime() ?? null }\n  ],\n  (json) => [json.expired_at_millis ?? void 0]\n);\nvar InvalidProjectForAdminAccessToken = createKnownErrorConstructor(\n  InvalidAdminAccessToken,\n  \"INVALID_PROJECT_FOR_ADMIN_ACCESS_TOKEN\",\n  () => [\n    401,\n    \"Admin access tokens must be created on the internal project.\"\n  ],\n  () => []\n);\nvar AdminAccessTokenIsNotAdmin = createKnownErrorConstructor(\n  InvalidAdminAccessToken,\n  \"ADMIN_ACCESS_TOKEN_IS_NOT_ADMIN\",\n  () => [\n    401,\n    \"Admin access token does not have the required permissions to access this project.\"\n  ],\n  () => []\n);\nvar ProjectAuthenticationRequired = createKnownErrorConstructor(\n  ProjectAuthenticationError,\n  \"PROJECT_AUTHENTICATION_REQUIRED\",\n  \"inherit\",\n  \"inherit\"\n);\nvar ClientAuthenticationRequired = createKnownErrorConstructor(\n  ProjectAuthenticationRequired,\n  \"CLIENT_AUTHENTICATION_REQUIRED\",\n  () => [\n    401,\n    \"The publishable client key must be provided.\"\n  ],\n  () => []\n);\nvar ServerAuthenticationRequired = createKnownErrorConstructor(\n  ProjectAuthenticationRequired,\n  \"SERVER_AUTHENTICATION_REQUIRED\",\n  () => [\n    401,\n    \"The secret server key must be provided.\"\n  ],\n  () => []\n);\nvar ClientOrServerAuthenticationRequired = createKnownErrorConstructor(\n  ProjectAuthenticationRequired,\n  \"CLIENT_OR_SERVER_AUTHENTICATION_REQUIRED\",\n  () => [\n    401,\n    \"Either the publishable client key or the secret server key must be provided.\"\n  ],\n  () => []\n);\nvar ClientOrAdminAuthenticationRequired = createKnownErrorConstructor(\n  ProjectAuthenticationRequired,\n  \"CLIENT_OR_ADMIN_AUTHENTICATION_REQUIRED\",\n  () => [\n    401,\n    \"Either the publishable client key or the super secret admin key must be provided.\"\n  ],\n  () => []\n);\nvar ClientOrServerOrAdminAuthenticationRequired = createKnownErrorConstructor(\n  ProjectAuthenticationRequired,\n  \"CLIENT_OR_SERVER_OR_ADMIN_AUTHENTICATION_REQUIRED\",\n  () => [\n    401,\n    \"Either the publishable client key, the secret server key, or the super secret admin key must be provided.\"\n  ],\n  () => []\n);\nvar AdminAuthenticationRequired = createKnownErrorConstructor(\n  ProjectAuthenticationRequired,\n  \"ADMIN_AUTHENTICATION_REQUIRED\",\n  () => [\n    401,\n    \"The super secret admin key must be provided.\"\n  ],\n  () => []\n);\nvar ExpectedInternalProject = createKnownErrorConstructor(\n  ProjectAuthenticationError,\n  \"EXPECTED_INTERNAL_PROJECT\",\n  () => [\n    401,\n    \"The project ID is expected to be internal.\"\n  ],\n  () => []\n);\nvar SessionAuthenticationError = createKnownErrorConstructor(\n  KnownError,\n  \"SESSION_AUTHENTICATION_ERROR\",\n  \"inherit\",\n  \"inherit\"\n);\nvar InvalidSessionAuthentication = createKnownErrorConstructor(\n  SessionAuthenticationError,\n  \"INVALID_SESSION_AUTHENTICATION\",\n  \"inherit\",\n  \"inherit\"\n);\nvar InvalidAccessToken = createKnownErrorConstructor(\n  InvalidSessionAuthentication,\n  \"INVALID_ACCESS_TOKEN\",\n  \"inherit\",\n  \"inherit\"\n);\nvar UnparsableAccessToken = createKnownErrorConstructor(\n  InvalidAccessToken,\n  \"UNPARSABLE_ACCESS_TOKEN\",\n  () => [\n    401,\n    \"Access token is not parsable.\"\n  ],\n  () => []\n);\nvar AccessTokenExpired = createKnownErrorConstructor(\n  InvalidAccessToken,\n  \"ACCESS_TOKEN_EXPIRED\",\n  (expiredAt) => [\n    401,\n    `Access token has expired. Please refresh it and try again.${expiredAt ? ` (The access token expired at ${expiredAt.toISOString()}.)` : \"\"}`,\n    { expired_at_millis: expiredAt?.getTime() ?? null }\n  ],\n  (json) => [json.expired_at_millis ? new Date(json.expired_at_millis) : void 0]\n);\nvar InvalidProjectForAccessToken = createKnownErrorConstructor(\n  InvalidAccessToken,\n  \"INVALID_PROJECT_FOR_ACCESS_TOKEN\",\n  (expectedProjectId, actualProjectId) => [\n    401,\n    `Access token not valid for this project. Expected project ID ${JSON.stringify(expectedProjectId)}, but the token is for project ID ${JSON.stringify(actualProjectId)}.`,\n    {\n      expected_project_id: expectedProjectId,\n      actual_project_id: actualProjectId\n    }\n  ],\n  (json) => [json.expected_project_id, json.actual_project_id]\n);\nvar RefreshTokenError = createKnownErrorConstructor(\n  KnownError,\n  \"REFRESH_TOKEN_ERROR\",\n  \"inherit\",\n  \"inherit\"\n);\nvar RefreshTokenNotFoundOrExpired = createKnownErrorConstructor(\n  RefreshTokenError,\n  \"REFRESH_TOKEN_NOT_FOUND_OR_EXPIRED\",\n  () => [\n    401,\n    \"Refresh token not found for this project, or the session has expired/been revoked.\"\n  ],\n  () => []\n);\nvar CannotDeleteCurrentSession = createKnownErrorConstructor(\n  RefreshTokenError,\n  \"CANNOT_DELETE_CURRENT_SESSION\",\n  () => [\n    400,\n    \"Cannot delete the current session.\"\n  ],\n  () => []\n);\nvar ProviderRejected = createKnownErrorConstructor(\n  RefreshTokenError,\n  \"PROVIDER_REJECTED\",\n  () => [\n    401,\n    \"The provider refused to refresh their token. This usually means that the provider used to authenticate the user no longer regards this session as valid, and the user must re-authenticate.\"\n  ],\n  () => []\n);\nvar UserWithEmailAlreadyExists = createKnownErrorConstructor(\n  KnownError,\n  \"USER_EMAIL_ALREADY_EXISTS\",\n  (email, wouldWorkIfEmailWasVerified = false) => [\n    409,\n    `A user with email ${JSON.stringify(email)} already exists${wouldWorkIfEmailWasVerified ? \" but the email is not verified. Please login to your existing account with the method you used to sign up, and then verify your email to sign in with this login method.\" : \".\"}`,\n    {\n      email,\n      would_work_if_email_was_verified: wouldWorkIfEmailWasVerified\n    }\n  ],\n  (json) => [json.email, json.would_work_if_email_was_verified ?? false]\n);\nvar EmailNotVerified = createKnownErrorConstructor(\n  KnownError,\n  \"EMAIL_NOT_VERIFIED\",\n  () => [\n    400,\n    \"The email is not verified.\"\n  ],\n  () => []\n);\nvar CannotGetOwnUserWithoutUser = createKnownErrorConstructor(\n  KnownError,\n  \"CANNOT_GET_OWN_USER_WITHOUT_USER\",\n  () => [\n    400,\n    \"You have specified 'me' as a userId, but did not provide authentication for a user.\"\n  ],\n  () => []\n);\nvar UserIdDoesNotExist = createKnownErrorConstructor(\n  KnownError,\n  \"USER_ID_DOES_NOT_EXIST\",\n  (userId) => [\n    400,\n    `The given user with the ID ${userId} does not exist.`,\n    {\n      user_id: userId\n    }\n  ],\n  (json) => [json.user_id]\n);\nvar UserNotFound = createKnownErrorConstructor(\n  KnownError,\n  \"USER_NOT_FOUND\",\n  () => [\n    404,\n    \"User not found.\"\n  ],\n  () => []\n);\nvar ProjectNotFound = createKnownErrorConstructor(\n  KnownError,\n  \"PROJECT_NOT_FOUND\",\n  (projectId) => {\n    if (typeof projectId !== \"string\") throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"projectId of KnownErrors.ProjectNotFound must be a string\");\n    return [\n      404,\n      `Project ${projectId} not found or is not accessible with the current user.`,\n      {\n        project_id: projectId\n      }\n    ];\n  },\n  (json) => [json.project_id]\n);\nvar CurrentProjectNotFound = createKnownErrorConstructor(\n  KnownError,\n  \"CURRENT_PROJECT_NOT_FOUND\",\n  (projectId) => [\n    400,\n    `The current project with ID ${projectId} was not found. Please check the value of the x-stack-project-id header.`,\n    {\n      project_id: projectId\n    }\n  ],\n  (json) => [json.project_id]\n);\nvar BranchDoesNotExist = createKnownErrorConstructor(\n  KnownError,\n  \"BRANCH_DOES_NOT_EXIST\",\n  (branchId) => [\n    400,\n    `The branch with ID ${branchId} does not exist.`,\n    {\n      branch_id: branchId\n    }\n  ],\n  (json) => [json.branch_id]\n);\nvar SignUpNotEnabled = createKnownErrorConstructor(\n  KnownError,\n  \"SIGN_UP_NOT_ENABLED\",\n  () => [\n    400,\n    \"Creation of new accounts is not enabled for this project. Please ask the project owner to enable it.\"\n  ],\n  () => []\n);\nvar PasswordAuthenticationNotEnabled = createKnownErrorConstructor(\n  KnownError,\n  \"PASSWORD_AUTHENTICATION_NOT_ENABLED\",\n  () => [\n    400,\n    \"Password authentication is not enabled for this project.\"\n  ],\n  () => []\n);\nvar DataVaultStoreDoesNotExist = createKnownErrorConstructor(\n  KnownError,\n  \"DATA_VAULT_STORE_DOES_NOT_EXIST\",\n  (storeId) => [\n    400,\n    `Data vault store with ID ${storeId} does not exist.`,\n    {\n      store_id: storeId\n    }\n  ],\n  (json) => [json.store_id]\n);\nvar DataVaultStoreHashedKeyDoesNotExist = createKnownErrorConstructor(\n  KnownError,\n  \"DATA_VAULT_STORE_HASHED_KEY_DOES_NOT_EXIST\",\n  (storeId, hashedKey) => [\n    400,\n    `Data vault store with ID ${storeId} does not contain a key with hash ${hashedKey}.`,\n    {\n      store_id: storeId,\n      hashed_key: hashedKey\n    }\n  ],\n  (json) => [json.store_id, json.hashed_key]\n);\nvar PasskeyAuthenticationNotEnabled = createKnownErrorConstructor(\n  KnownError,\n  \"PASSKEY_AUTHENTICATION_NOT_ENABLED\",\n  () => [\n    400,\n    \"Passkey authentication is not enabled for this project.\"\n  ],\n  () => []\n);\nvar AnonymousAccountsNotEnabled = createKnownErrorConstructor(\n  KnownError,\n  \"ANONYMOUS_ACCOUNTS_NOT_ENABLED\",\n  () => [\n    400,\n    \"Anonymous accounts are not enabled for this project.\"\n  ],\n  () => []\n);\nvar AnonymousAuthenticationNotAllowed = createKnownErrorConstructor(\n  KnownError,\n  \"ANONYMOUS_AUTHENTICATION_NOT_ALLOWED\",\n  () => [\n    401,\n    \"X-Stack-Access-Token is for an anonymous user, but anonymous users are not enabled. Set the X-Stack-Allow-Anonymous-User header of this request to 'true' to allow anonymous users.\"\n  ],\n  () => []\n);\nvar EmailPasswordMismatch = createKnownErrorConstructor(\n  KnownError,\n  \"EMAIL_PASSWORD_MISMATCH\",\n  () => [\n    400,\n    \"Wrong e-mail or password.\"\n  ],\n  () => []\n);\nvar RedirectUrlNotWhitelisted = createKnownErrorConstructor(\n  KnownError,\n  \"REDIRECT_URL_NOT_WHITELISTED\",\n  () => [\n    400,\n    \"Redirect URL not whitelisted. Did you forget to add this domain to the trusted domains list on the Stack Auth dashboard?\"\n  ],\n  () => []\n);\nvar PasswordRequirementsNotMet = createKnownErrorConstructor(\n  KnownError,\n  \"PASSWORD_REQUIREMENTS_NOT_MET\",\n  \"inherit\",\n  \"inherit\"\n);\nvar PasswordTooShort = createKnownErrorConstructor(\n  PasswordRequirementsNotMet,\n  \"PASSWORD_TOO_SHORT\",\n  (minLength) => [\n    400,\n    `Password too short. Minimum length is ${minLength}.`,\n    {\n      min_length: minLength\n    }\n  ],\n  (json) => [\n    json?.min_length ?? (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"min_length not found in PasswordTooShort details\")\n  ]\n);\nvar PasswordTooLong = createKnownErrorConstructor(\n  PasswordRequirementsNotMet,\n  \"PASSWORD_TOO_LONG\",\n  (maxLength) => [\n    400,\n    `Password too long. Maximum length is ${maxLength}.`,\n    {\n      maxLength\n    }\n  ],\n  (json) => [\n    json?.maxLength ?? (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"maxLength not found in PasswordTooLong details\")\n  ]\n);\nvar UserDoesNotHavePassword = createKnownErrorConstructor(\n  KnownError,\n  \"USER_DOES_NOT_HAVE_PASSWORD\",\n  () => [\n    400,\n    \"This user does not have password authentication enabled.\"\n  ],\n  () => []\n);\nvar VerificationCodeError = createKnownErrorConstructor(\n  KnownError,\n  \"VERIFICATION_ERROR\",\n  \"inherit\",\n  \"inherit\"\n);\nvar VerificationCodeNotFound = createKnownErrorConstructor(\n  VerificationCodeError,\n  \"VERIFICATION_CODE_NOT_FOUND\",\n  () => [\n    404,\n    \"The verification code does not exist for this project.\"\n  ],\n  () => []\n);\nvar VerificationCodeExpired = createKnownErrorConstructor(\n  VerificationCodeError,\n  \"VERIFICATION_CODE_EXPIRED\",\n  () => [\n    400,\n    \"The verification code has expired.\"\n  ],\n  () => []\n);\nvar VerificationCodeAlreadyUsed = createKnownErrorConstructor(\n  VerificationCodeError,\n  \"VERIFICATION_CODE_ALREADY_USED\",\n  () => [\n    409,\n    \"The verification link has already been used.\"\n  ],\n  () => []\n);\nvar VerificationCodeMaxAttemptsReached = createKnownErrorConstructor(\n  VerificationCodeError,\n  \"VERIFICATION_CODE_MAX_ATTEMPTS_REACHED\",\n  () => [\n    400,\n    \"The verification code nonce has reached the maximum number of attempts. This code is not valid anymore.\"\n  ],\n  () => []\n);\nvar PasswordConfirmationMismatch = createKnownErrorConstructor(\n  KnownError,\n  \"PASSWORD_CONFIRMATION_MISMATCH\",\n  () => [\n    400,\n    \"Passwords do not match.\"\n  ],\n  () => []\n);\nvar EmailAlreadyVerified = createKnownErrorConstructor(\n  KnownError,\n  \"EMAIL_ALREADY_VERIFIED\",\n  () => [\n    409,\n    \"The e-mail is already verified.\"\n  ],\n  () => []\n);\nvar EmailNotAssociatedWithUser = createKnownErrorConstructor(\n  KnownError,\n  \"EMAIL_NOT_ASSOCIATED_WITH_USER\",\n  () => [\n    400,\n    \"The e-mail is not associated with a user that could log in with that e-mail.\"\n  ],\n  () => []\n);\nvar EmailIsNotPrimaryEmail = createKnownErrorConstructor(\n  KnownError,\n  \"EMAIL_IS_NOT_PRIMARY_EMAIL\",\n  (email, primaryEmail) => [\n    400,\n    `The given e-mail (${email}) must equal the user's primary e-mail (${primaryEmail}).`,\n    {\n      email,\n      primary_email: primaryEmail\n    }\n  ],\n  (json) => [json.email, json.primary_email]\n);\nvar PasskeyRegistrationFailed = createKnownErrorConstructor(\n  KnownError,\n  \"PASSKEY_REGISTRATION_FAILED\",\n  (message) => [\n    400,\n    message\n  ],\n  (json) => [json.message]\n);\nvar PasskeyWebAuthnError = createKnownErrorConstructor(\n  KnownError,\n  \"PASSKEY_WEBAUTHN_ERROR\",\n  (message, code) => [\n    400,\n    message,\n    {\n      message,\n      code\n    }\n  ],\n  (json) => [json.message, json.code]\n);\nvar PasskeyAuthenticationFailed = createKnownErrorConstructor(\n  KnownError,\n  \"PASSKEY_AUTHENTICATION_FAILED\",\n  (message) => [\n    400,\n    message\n  ],\n  (json) => [json.message]\n);\nvar PermissionNotFound = createKnownErrorConstructor(\n  KnownError,\n  \"PERMISSION_NOT_FOUND\",\n  (permissionId) => [\n    404,\n    `Permission \"${permissionId}\" not found. Make sure you created it on the dashboard.`,\n    {\n      permission_id: permissionId\n    }\n  ],\n  (json) => [json.permission_id]\n);\nvar PermissionScopeMismatch = createKnownErrorConstructor(\n  KnownError,\n  \"WRONG_PERMISSION_SCOPE\",\n  (permissionId, expectedScope, actualScope) => [\n    404,\n    `Permission ${JSON.stringify(permissionId)} not found. (It was found for a different scope ${JSON.stringify(actualScope)}, but scope ${JSON.stringify(expectedScope)} was expected.)`,\n    {\n      permission_id: permissionId,\n      expected_scope: expectedScope,\n      actual_scope: actualScope\n    }\n  ],\n  (json) => [json.permission_id, json.expected_scope, json.actual_scope]\n);\nvar ContainedPermissionNotFound = createKnownErrorConstructor(\n  KnownError,\n  \"CONTAINED_PERMISSION_NOT_FOUND\",\n  (permissionId) => [\n    400,\n    `Contained permission with ID \"${permissionId}\" not found. Make sure you created it on the dashboard.`,\n    {\n      permission_id: permissionId\n    }\n  ],\n  (json) => [json.permission_id]\n);\nvar TeamNotFound = createKnownErrorConstructor(\n  KnownError,\n  \"TEAM_NOT_FOUND\",\n  (teamId) => [\n    404,\n    `Team ${teamId} not found.`,\n    {\n      team_id: teamId\n    }\n  ],\n  (json) => [json.team_id]\n);\nvar TeamAlreadyExists = createKnownErrorConstructor(\n  KnownError,\n  \"TEAM_ALREADY_EXISTS\",\n  (teamId) => [\n    409,\n    `Team ${teamId} already exists.`,\n    {\n      team_id: teamId\n    }\n  ],\n  (json) => [json.team_id]\n);\nvar TeamMembershipNotFound = createKnownErrorConstructor(\n  KnownError,\n  \"TEAM_MEMBERSHIP_NOT_FOUND\",\n  (teamId, userId) => [\n    404,\n    `User ${userId} is not found in team ${teamId}.`,\n    {\n      team_id: teamId,\n      user_id: userId\n    }\n  ],\n  (json) => [json.team_id, json.user_id]\n);\nvar EmailTemplateAlreadyExists = createKnownErrorConstructor(\n  KnownError,\n  \"EMAIL_TEMPLATE_ALREADY_EXISTS\",\n  () => [\n    409,\n    \"Email template already exists.\"\n  ],\n  () => []\n);\nvar OAuthConnectionNotConnectedToUser = createKnownErrorConstructor(\n  KnownError,\n  \"OAUTH_CONNECTION_NOT_CONNECTED_TO_USER\",\n  () => [\n    400,\n    \"The OAuth connection is not connected to any user.\"\n  ],\n  () => []\n);\nvar OAuthConnectionAlreadyConnectedToAnotherUser = createKnownErrorConstructor(\n  KnownError,\n  \"OAUTH_CONNECTION_ALREADY_CONNECTED_TO_ANOTHER_USER\",\n  () => [\n    409,\n    \"The OAuth connection is already connected to another user.\"\n  ],\n  () => []\n);\nvar OAuthConnectionDoesNotHaveRequiredScope = createKnownErrorConstructor(\n  KnownError,\n  \"OAUTH_CONNECTION_DOES_NOT_HAVE_REQUIRED_SCOPE\",\n  () => [\n    400,\n    \"The OAuth connection does not have the required scope.\"\n  ],\n  () => []\n);\nvar OAuthExtraScopeNotAvailableWithSharedOAuthKeys = createKnownErrorConstructor(\n  KnownError,\n  \"OAUTH_EXTRA_SCOPE_NOT_AVAILABLE_WITH_SHARED_OAUTH_KEYS\",\n  () => [\n    400,\n    \"Extra scopes are not available with shared OAuth keys. Please add your own OAuth keys on the Stack dashboard to use extra scopes.\"\n  ],\n  () => []\n);\nvar OAuthAccessTokenNotAvailableWithSharedOAuthKeys = createKnownErrorConstructor(\n  KnownError,\n  \"OAUTH_ACCESS_TOKEN_NOT_AVAILABLE_WITH_SHARED_OAUTH_KEYS\",\n  () => [\n    400,\n    \"Access tokens are not available with shared OAuth keys. Please add your own OAuth keys on the Stack dashboard to use access tokens.\"\n  ],\n  () => []\n);\nvar InvalidOAuthClientIdOrSecret = createKnownErrorConstructor(\n  KnownError,\n  \"INVALID_OAUTH_CLIENT_ID_OR_SECRET\",\n  (clientId) => [\n    400,\n    \"The OAuth client ID or secret is invalid. The client ID must be equal to the project ID (potentially with a hash and a branch ID), and the client secret must be a publishable client key.\",\n    {\n      client_id: clientId ?? null\n    }\n  ],\n  (json) => [json.client_id ?? void 0]\n);\nvar InvalidScope = createKnownErrorConstructor(\n  KnownError,\n  \"INVALID_SCOPE\",\n  (scope) => [\n    400,\n    `The scope \"${scope}\" is not a valid OAuth scope for Stack.`\n  ],\n  (json) => [json.scope]\n);\nvar UserAlreadyConnectedToAnotherOAuthConnection = createKnownErrorConstructor(\n  KnownError,\n  \"USER_ALREADY_CONNECTED_TO_ANOTHER_OAUTH_CONNECTION\",\n  () => [\n    409,\n    \"The user is already connected to another OAuth account. Did you maybe selected the wrong account?\"\n  ],\n  () => []\n);\nvar OuterOAuthTimeout = createKnownErrorConstructor(\n  KnownError,\n  \"OUTER_OAUTH_TIMEOUT\",\n  () => [\n    408,\n    \"The OAuth flow has timed out. Please sign in again.\"\n  ],\n  () => []\n);\nvar OAuthProviderNotFoundOrNotEnabled = createKnownErrorConstructor(\n  KnownError,\n  \"OAUTH_PROVIDER_NOT_FOUND_OR_NOT_ENABLED\",\n  () => [\n    400,\n    \"The OAuth provider is not found or not enabled.\"\n  ],\n  () => []\n);\nvar OAuthProviderAccountIdAlreadyUsedForSignIn = createKnownErrorConstructor(\n  KnownError,\n  \"OAUTH_PROVIDER_ACCOUNT_ID_ALREADY_USED_FOR_SIGN_IN\",\n  () => [\n    400,\n    `A provider with the same account ID is already used for signing in.`\n  ],\n  () => []\n);\nvar MultiFactorAuthenticationRequired = createKnownErrorConstructor(\n  KnownError,\n  \"MULTI_FACTOR_AUTHENTICATION_REQUIRED\",\n  (attemptCode) => [\n    400,\n    `Multi-factor authentication is required for this user.`,\n    {\n      attempt_code: attemptCode\n    }\n  ],\n  (json) => [json.attempt_code]\n);\nvar InvalidTotpCode = createKnownErrorConstructor(\n  KnownError,\n  \"INVALID_TOTP_CODE\",\n  () => [\n    400,\n    \"The TOTP code is invalid. Please try again.\"\n  ],\n  () => []\n);\nvar UserAuthenticationRequired = createKnownErrorConstructor(\n  KnownError,\n  \"USER_AUTHENTICATION_REQUIRED\",\n  () => [\n    401,\n    \"User authentication required for this endpoint.\"\n  ],\n  () => []\n);\nvar TeamMembershipAlreadyExists = createKnownErrorConstructor(\n  KnownError,\n  \"TEAM_MEMBERSHIP_ALREADY_EXISTS\",\n  () => [\n    409,\n    \"Team membership already exists.\"\n  ],\n  () => []\n);\nvar ProjectPermissionRequired = createKnownErrorConstructor(\n  KnownError,\n  \"PROJECT_PERMISSION_REQUIRED\",\n  (userId, permissionId) => [\n    401,\n    `User ${userId} does not have permission ${permissionId}.`,\n    {\n      user_id: userId,\n      permission_id: permissionId\n    }\n  ],\n  (json) => [json.user_id, json.permission_id]\n);\nvar TeamPermissionRequired = createKnownErrorConstructor(\n  KnownError,\n  \"TEAM_PERMISSION_REQUIRED\",\n  (teamId, userId, permissionId) => [\n    401,\n    `User ${userId} does not have permission ${permissionId} in team ${teamId}.`,\n    {\n      team_id: teamId,\n      user_id: userId,\n      permission_id: permissionId\n    }\n  ],\n  (json) => [json.team_id, json.user_id, json.permission_id]\n);\nvar TeamPermissionNotFound = createKnownErrorConstructor(\n  KnownError,\n  \"TEAM_PERMISSION_NOT_FOUND\",\n  (teamId, userId, permissionId) => [\n    401,\n    `User ${userId} does not have permission ${permissionId} in team ${teamId}.`,\n    {\n      team_id: teamId,\n      user_id: userId,\n      permission_id: permissionId\n    }\n  ],\n  (json) => [json.team_id, json.user_id, json.permission_id]\n);\nvar InvalidSharedOAuthProviderId = createKnownErrorConstructor(\n  KnownError,\n  \"INVALID_SHARED_OAUTH_PROVIDER_ID\",\n  (providerId) => [\n    400,\n    `The shared OAuth provider with ID ${providerId} is not valid.`,\n    {\n      provider_id: providerId\n    }\n  ],\n  (json) => [json.provider_id]\n);\nvar InvalidStandardOAuthProviderId = createKnownErrorConstructor(\n  KnownError,\n  \"INVALID_STANDARD_OAUTH_PROVIDER_ID\",\n  (providerId) => [\n    400,\n    `The standard OAuth provider with ID ${providerId} is not valid.`,\n    {\n      provider_id: providerId\n    }\n  ],\n  (json) => [json.provider_id]\n);\nvar InvalidAuthorizationCode = createKnownErrorConstructor(\n  KnownError,\n  \"INVALID_AUTHORIZATION_CODE\",\n  () => [\n    400,\n    \"The given authorization code is invalid.\"\n  ],\n  () => []\n);\nvar OAuthProviderAccessDenied = createKnownErrorConstructor(\n  KnownError,\n  \"OAUTH_PROVIDER_ACCESS_DENIED\",\n  () => [\n    400,\n    \"The OAuth provider denied access to the user.\"\n  ],\n  () => []\n);\nvar ContactChannelAlreadyUsedForAuthBySomeoneElse = createKnownErrorConstructor(\n  KnownError,\n  \"CONTACT_CHANNEL_ALREADY_USED_FOR_AUTH_BY_SOMEONE_ELSE\",\n  (type, contactChannelValue, wouldWorkIfEmailWasVerified = false) => [\n    409,\n    `This ${type} ${contactChannelValue ? `\"(${contactChannelValue})\"` : \"\"} is already used for authentication by another account${wouldWorkIfEmailWasVerified ? \" but the email is not verified. Please login to your existing account with the method you used to sign up, and then verify your email to sign in with this login method.\" : \".\"}`,\n    {\n      type,\n      contact_channel_value: contactChannelValue ?? null,\n      would_work_if_email_was_verified: wouldWorkIfEmailWasVerified\n    }\n  ],\n  (json) => [json.type, json.contact_channel_value, json.would_work_if_email_was_verified ?? false]\n);\nvar InvalidPollingCodeError = createKnownErrorConstructor(\n  KnownError,\n  \"INVALID_POLLING_CODE\",\n  (details) => [\n    400,\n    \"The polling code is invalid or does not exist.\",\n    details\n  ],\n  (json) => [json]\n);\nvar CliAuthError = createKnownErrorConstructor(\n  KnownError,\n  \"CLI_AUTH_ERROR\",\n  (message) => [\n    400,\n    message\n  ],\n  (json) => [json.message]\n);\nvar CliAuthExpiredError = createKnownErrorConstructor(\n  KnownError,\n  \"CLI_AUTH_EXPIRED_ERROR\",\n  (message = \"CLI authentication request expired. Please try again.\") => [\n    400,\n    message\n  ],\n  (json) => [json.message]\n);\nvar CliAuthUsedError = createKnownErrorConstructor(\n  KnownError,\n  \"CLI_AUTH_USED_ERROR\",\n  (message = \"This authentication token has already been used.\") => [\n    400,\n    message\n  ],\n  (json) => [json.message]\n);\nvar ApiKeyNotValid = createKnownErrorConstructor(\n  KnownError,\n  \"API_KEY_NOT_VALID\",\n  \"inherit\",\n  \"inherit\"\n);\nvar ApiKeyExpired = createKnownErrorConstructor(\n  ApiKeyNotValid,\n  \"API_KEY_EXPIRED\",\n  () => [\n    401,\n    \"API key has expired.\"\n  ],\n  () => []\n);\nvar ApiKeyRevoked = createKnownErrorConstructor(\n  ApiKeyNotValid,\n  \"API_KEY_REVOKED\",\n  () => [\n    401,\n    \"API key has been revoked.\"\n  ],\n  () => []\n);\nvar WrongApiKeyType = createKnownErrorConstructor(\n  ApiKeyNotValid,\n  \"WRONG_API_KEY_TYPE\",\n  (expectedType, actualType) => [\n    400,\n    `This endpoint is for ${expectedType} API keys, but a ${actualType} API key was provided.`,\n    { expected_type: expectedType, actual_type: actualType }\n  ],\n  (json) => [json.expected_type, json.actual_type]\n);\nvar ApiKeyNotFound = createKnownErrorConstructor(\n  ApiKeyNotValid,\n  \"API_KEY_NOT_FOUND\",\n  () => [\n    404,\n    \"API key not found.\"\n  ],\n  () => []\n);\nvar PublicApiKeyCannotBeRevoked = createKnownErrorConstructor(\n  ApiKeyNotValid,\n  \"PUBLIC_API_KEY_CANNOT_BE_REVOKED\",\n  () => [\n    400,\n    \"Public API keys cannot be revoked by the secretscanner endpoint.\"\n  ],\n  () => []\n);\nvar PermissionIdAlreadyExists = createKnownErrorConstructor(\n  KnownError,\n  \"PERMISSION_ID_ALREADY_EXISTS\",\n  (permissionId) => [\n    400,\n    `Permission with ID \"${permissionId}\" already exists. Choose a different ID.`,\n    {\n      permission_id: permissionId\n    }\n  ],\n  (json) => [json.permission_id]\n);\nvar EmailRenderingError = createKnownErrorConstructor(\n  KnownError,\n  \"EMAIL_RENDERING_ERROR\",\n  (error) => [\n    400,\n    `Failed to render email with theme: ${error}`,\n    { error }\n  ],\n  (json) => [json.error]\n);\nvar RequiresCustomEmailServer = createKnownErrorConstructor(\n  KnownError,\n  \"REQUIRES_CUSTOM_EMAIL_SERVER\",\n  () => [\n    400,\n    `This action requires a custom SMTP server. Please edit your email server configuration and try again.`\n  ],\n  () => []\n);\nvar ItemNotFound = createKnownErrorConstructor(\n  KnownError,\n  \"ITEM_NOT_FOUND\",\n  (itemId) => [\n    404,\n    `Item with ID \"${itemId}\" not found.`,\n    {\n      item_id: itemId\n    }\n  ],\n  (json) => [json.item_id]\n);\nvar ItemCustomerTypeDoesNotMatch = createKnownErrorConstructor(\n  KnownError,\n  \"ITEM_CUSTOMER_TYPE_DOES_NOT_MATCH\",\n  (itemId, customerId, itemCustomerType, actualCustomerType) => [\n    400,\n    `The ${actualCustomerType} with ID ${JSON.stringify(customerId)} is not a valid customer for the item with ID ${JSON.stringify(itemId)}. ${itemCustomerType ? `The item is configured to only be available for ${itemCustomerType} customers, but the customer is a ${actualCustomerType}.` : `The item is missing a customer type field. Please make sure it is set up correctly in your project configuration.`}`,\n    {\n      item_id: itemId,\n      customer_id: customerId,\n      item_customer_type: itemCustomerType ?? null,\n      actual_customer_type: actualCustomerType\n    }\n  ],\n  (json) => [json.item_id, json.customer_id, json.item_customer_type ?? void 0, json.actual_customer_type]\n);\nvar CustomerDoesNotExist = createKnownErrorConstructor(\n  KnownError,\n  \"CUSTOMER_DOES_NOT_EXIST\",\n  (customerId) => [\n    400,\n    `Customer with ID ${JSON.stringify(customerId)} does not exist.`,\n    {\n      customer_id: customerId\n    }\n  ],\n  (json) => [json.customer_id]\n);\nvar OfferDoesNotExist = createKnownErrorConstructor(\n  KnownError,\n  \"OFFER_DOES_NOT_EXIST\",\n  (offerId, accessType) => [\n    400,\n    `Offer with ID ${JSON.stringify(offerId)} does not exist${accessType === \"client\" ? \" or you don't have permissions to access it.\" : \".\"}`,\n    {\n      offer_id: offerId,\n      access_type: accessType\n    }\n  ],\n  (json) => [json.offer_id, json.access_type]\n);\nvar OfferCustomerTypeDoesNotMatch = createKnownErrorConstructor(\n  KnownError,\n  \"OFFER_CUSTOMER_TYPE_DOES_NOT_MATCH\",\n  (offerId, customerId, offerCustomerType, actualCustomerType) => [\n    400,\n    `The ${actualCustomerType} with ID ${JSON.stringify(customerId)} is not a valid customer for the inline offer that has been passed in. ${offerCustomerType ? `The offer is configured to only be available for ${offerCustomerType} customers, but the customer is a ${actualCustomerType}.` : `The offer is missing a customer type field. Please make sure it is set up correctly in your project configuration.`}`,\n    {\n      offer_id: offerId ?? null,\n      customer_id: customerId,\n      offer_customer_type: offerCustomerType ?? null,\n      actual_customer_type: actualCustomerType\n    }\n  ],\n  (json) => [json.offer_id ?? void 0, json.customer_id, json.offer_customer_type ?? void 0, json.actual_customer_type]\n);\nvar ItemQuantityInsufficientAmount = createKnownErrorConstructor(\n  KnownError,\n  \"ITEM_QUANTITY_INSUFFICIENT_AMOUNT\",\n  (itemId, customerId, quantity) => [\n    400,\n    `The item with ID ${JSON.stringify(itemId)} has an insufficient quantity for the customer with ID ${JSON.stringify(customerId)}. An attempt was made to charge ${quantity} credits.`,\n    {\n      item_id: itemId,\n      customer_id: customerId,\n      quantity\n    }\n  ],\n  (json) => [json.item_id, json.customer_id, json.quantity]\n);\nvar StripeAccountInfoNotFound = createKnownErrorConstructor(\n  KnownError,\n  \"STRIPE_ACCOUNT_INFO_NOT_FOUND\",\n  () => [\n    404,\n    \"Stripe account information not found. Please make sure the user has onboarded with Stripe.\"\n  ],\n  () => []\n);\nvar WorkflowTokenDoesNotExist = createKnownErrorConstructor(\n  KnownError,\n  \"WORKFLOW_TOKEN_DOES_NOT_EXIST\",\n  () => [\n    400,\n    \"The workflow token you specified does not exist. Make sure the value in x-stack-workflow-token is correct.\"\n  ],\n  () => []\n);\nvar WorkflowTokenExpired = createKnownErrorConstructor(\n  KnownError,\n  \"WORKFLOW_TOKEN_EXPIRED\",\n  () => [\n    400,\n    \"The workflow token you specified has expired. Make sure the value in x-stack-workflow-token is correct.\"\n  ],\n  () => []\n);\nvar KnownErrors = {\n  CannotDeleteCurrentSession,\n  UnsupportedError,\n  BodyParsingError,\n  SchemaError,\n  AllOverloadsFailed,\n  ProjectAuthenticationError,\n  PermissionIdAlreadyExists,\n  CliAuthError,\n  CliAuthExpiredError,\n  CliAuthUsedError,\n  InvalidProjectAuthentication,\n  ProjectKeyWithoutAccessType,\n  InvalidAccessType,\n  AccessTypeWithoutProjectId,\n  AccessTypeRequired,\n  CannotGetOwnUserWithoutUser,\n  InsufficientAccessType,\n  InvalidPublishableClientKey,\n  InvalidSecretServerKey,\n  InvalidSuperSecretAdminKey,\n  InvalidAdminAccessToken,\n  UnparsableAdminAccessToken,\n  AdminAccessTokenExpired,\n  InvalidProjectForAdminAccessToken,\n  AdminAccessTokenIsNotAdmin,\n  ProjectAuthenticationRequired,\n  ClientAuthenticationRequired,\n  ServerAuthenticationRequired,\n  ClientOrServerAuthenticationRequired,\n  ClientOrAdminAuthenticationRequired,\n  ClientOrServerOrAdminAuthenticationRequired,\n  AdminAuthenticationRequired,\n  ExpectedInternalProject,\n  SessionAuthenticationError,\n  InvalidSessionAuthentication,\n  InvalidAccessToken,\n  UnparsableAccessToken,\n  AccessTokenExpired,\n  InvalidProjectForAccessToken,\n  RefreshTokenError,\n  ProviderRejected,\n  RefreshTokenNotFoundOrExpired,\n  UserWithEmailAlreadyExists,\n  EmailNotVerified,\n  UserIdDoesNotExist,\n  UserNotFound,\n  ApiKeyNotFound,\n  PublicApiKeyCannotBeRevoked,\n  ProjectNotFound,\n  CurrentProjectNotFound,\n  BranchDoesNotExist,\n  SignUpNotEnabled,\n  PasswordAuthenticationNotEnabled,\n  PasskeyAuthenticationNotEnabled,\n  AnonymousAccountsNotEnabled,\n  AnonymousAuthenticationNotAllowed,\n  EmailPasswordMismatch,\n  RedirectUrlNotWhitelisted,\n  PasswordRequirementsNotMet,\n  PasswordTooShort,\n  PasswordTooLong,\n  UserDoesNotHavePassword,\n  VerificationCodeError,\n  VerificationCodeNotFound,\n  VerificationCodeExpired,\n  VerificationCodeAlreadyUsed,\n  VerificationCodeMaxAttemptsReached,\n  PasswordConfirmationMismatch,\n  EmailAlreadyVerified,\n  EmailNotAssociatedWithUser,\n  EmailIsNotPrimaryEmail,\n  PasskeyRegistrationFailed,\n  PasskeyWebAuthnError,\n  PasskeyAuthenticationFailed,\n  PermissionNotFound,\n  PermissionScopeMismatch,\n  ContainedPermissionNotFound,\n  TeamNotFound,\n  TeamMembershipNotFound,\n  EmailTemplateAlreadyExists,\n  OAuthConnectionNotConnectedToUser,\n  OAuthConnectionAlreadyConnectedToAnotherUser,\n  OAuthConnectionDoesNotHaveRequiredScope,\n  OAuthExtraScopeNotAvailableWithSharedOAuthKeys,\n  OAuthAccessTokenNotAvailableWithSharedOAuthKeys,\n  InvalidOAuthClientIdOrSecret,\n  InvalidScope,\n  UserAlreadyConnectedToAnotherOAuthConnection,\n  OuterOAuthTimeout,\n  OAuthProviderNotFoundOrNotEnabled,\n  OAuthProviderAccountIdAlreadyUsedForSignIn,\n  MultiFactorAuthenticationRequired,\n  InvalidTotpCode,\n  UserAuthenticationRequired,\n  TeamMembershipAlreadyExists,\n  ProjectPermissionRequired,\n  TeamPermissionRequired,\n  InvalidSharedOAuthProviderId,\n  InvalidStandardOAuthProviderId,\n  InvalidAuthorizationCode,\n  TeamPermissionNotFound,\n  OAuthProviderAccessDenied,\n  ContactChannelAlreadyUsedForAuthBySomeoneElse,\n  InvalidPollingCodeError,\n  ApiKeyNotValid,\n  ApiKeyExpired,\n  ApiKeyRevoked,\n  WrongApiKeyType,\n  EmailRenderingError,\n  RequiresCustomEmailServer,\n  ItemNotFound,\n  ItemCustomerTypeDoesNotMatch,\n  CustomerDoesNotExist,\n  OfferDoesNotExist,\n  OfferCustomerTypeDoesNotMatch,\n  ItemQuantityInsufficientAmount,\n  StripeAccountInfoNotFound,\n  DataVaultStoreDoesNotExist,\n  DataVaultStoreHashedKeyDoesNotExist,\n  WorkflowTokenDoesNotExist,\n  WorkflowTokenExpired\n};\nvar knownErrorCodes = /* @__PURE__ */ new Set();\nfor (const [_, KnownError2] of Object.entries(KnownErrors)) {\n  if (knownErrorCodes.has(KnownError2.errorCode)) {\n    throw new Error(`Duplicate known error code: ${KnownError2.errorCode}`);\n  }\n  knownErrorCodes.add(KnownError2.errorCode);\n}\n\n//# sourceMappingURL=known-errors.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20va25vd24tZXJyb3JzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDK0U7QUFDM0I7QUFDTjtBQUM5QywrQkFBK0IseURBQVc7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHdCQUF3QixJQUFJO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLDBEQUFRLDJGQUEyRixLQUFLO0FBQ2pKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrSEFBK0gsVUFBVSxJQUFJLGFBQWE7QUFDMUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsNkRBQVk7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsVUFBVTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdMQUF3TCxrQkFBa0I7QUFDMU07QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiwwREFBUTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMERBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksMkRBQVE7QUFDWjs7QUFFQSxVQUFVLDZCQUE2QiwyREFBUTtBQUMvQyxxQkFBcUIsTUFBTSxJQUFJO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDBEQUFRO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUZBQXVGLFdBQVc7QUFDbEc7QUFDQTtBQUNBLHdCQUF3QiwwREFBUTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksMkRBQVE7QUFDWiw0Q0FBNEMsV0FBVztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSwyREFBUTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxrQ0FBa0MsRUFBRSxpQkFBaUIsYUFBYSxpQkFBaUI7QUFDakk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELDBCQUEwQjtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELDBCQUEwQjtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELDBCQUEwQjtBQUN6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLDZDQUE2Qyx3QkFBd0IsU0FBUztBQUNySixNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSw2Q0FBNkMsd0JBQXdCLFNBQVM7QUFDL0ksTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRUFBb0Usa0NBQWtDLG9DQUFvQyxnQ0FBZ0M7QUFDMUs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QixnQkFBZ0IsK01BQStNO0FBQy9RO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxRQUFRO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELGlFQUFtQjtBQUNwRTtBQUNBO0FBQ0EsaUJBQWlCLFdBQVc7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsV0FBVztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLFVBQVU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxTQUFTO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsU0FBUyxtQ0FBbUMsVUFBVTtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsVUFBVTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDBEQUFRO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLFVBQVU7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwwREFBUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixNQUFNLDBDQUEwQyxhQUFhO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGFBQWE7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw4QkFBOEIsaURBQWlELDRCQUE0QixjQUFjLCtCQUErQjtBQUMxSztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxhQUFhO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFFBQVE7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksUUFBUTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxRQUFRLHVCQUF1QixPQUFPO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixNQUFNO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFFBQVEsMkJBQTJCLGFBQWE7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxRQUFRLDJCQUEyQixjQUFjLFVBQVUsT0FBTztBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxzQkFBc0I7QUFDekU7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2dmeDJlZGVub2FzaXMvRG93bmxvYWRzL0RldmVsb3BtZW50L0VzcGFkYS9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20va25vd24tZXJyb3JzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9rbm93bi1lcnJvcnMudHN4XG5pbXBvcnQgeyBTdGFja0Fzc2VydGlvbkVycm9yLCBTdGF0dXNFcnJvciwgdGhyb3dFcnIgfSBmcm9tIFwiLi91dGlscy9lcnJvcnMuanNcIjtcbmltcG9ydCB7IGlkZW50aXR5QXJncyB9IGZyb20gXCIuL3V0aWxzL2Z1bmN0aW9ucy5qc1wiO1xuaW1wb3J0IHsgZGVpbmRlbnQgfSBmcm9tIFwiLi91dGlscy9zdHJpbmdzLmpzXCI7XG52YXIgS25vd25FcnJvciA9IGNsYXNzIGV4dGVuZHMgU3RhdHVzRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihzdGF0dXNDb2RlLCBodW1hblJlYWRhYmxlTWVzc2FnZSwgZGV0YWlscykge1xuICAgIHN1cGVyKFxuICAgICAgc3RhdHVzQ29kZSxcbiAgICAgIGh1bWFuUmVhZGFibGVNZXNzYWdlXG4gICAgKTtcbiAgICB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlO1xuICAgIHRoaXMuaHVtYW5SZWFkYWJsZU1lc3NhZ2UgPSBodW1hblJlYWRhYmxlTWVzc2FnZTtcbiAgICB0aGlzLmRldGFpbHMgPSBkZXRhaWxzO1xuICAgIHRoaXMuX19zdGFja0tub3duRXJyb3JCcmFuZCA9IFwic3RhY2sta25vd24tZXJyb3ItYnJhbmQtc2VudGluZWxcIjtcbiAgICB0aGlzLm5hbWUgPSBcIktub3duRXJyb3JcIjtcbiAgfVxuICBzdGF0aWMgaXNLbm93bkVycm9yKGVycm9yKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBlcnJvciA9PT0gXCJvYmplY3RcIiAmJiBlcnJvciAhPT0gbnVsbCAmJiBcIl9fc3RhY2tLbm93bkVycm9yQnJhbmRcIiBpbiBlcnJvciAmJiBlcnJvci5fX3N0YWNrS25vd25FcnJvckJyYW5kID09PSBcInN0YWNrLWtub3duLWVycm9yLWJyYW5kLXNlbnRpbmVsXCI7XG4gIH1cbiAgZ2V0Qm9keSgpIHtcbiAgICByZXR1cm4gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKEpTT04uc3RyaW5naWZ5KHRoaXMudG9EZXNjcmlwdGl2ZUpzb24oKSwgdm9pZCAwLCAyKSk7XG4gIH1cbiAgZ2V0SGVhZGVycygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgXCJDb250ZW50LVR5cGVcIjogW1wiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFwiXSxcbiAgICAgIFwiWC1TdGFjay1Lbm93bi1FcnJvclwiOiBbdGhpcy5lcnJvckNvZGVdXG4gICAgfTtcbiAgfVxuICB0b0Rlc2NyaXB0aXZlSnNvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29kZTogdGhpcy5lcnJvckNvZGUsXG4gICAgICAuLi50aGlzLmRldGFpbHMgPyB7IGRldGFpbHM6IHRoaXMuZGV0YWlscyB9IDoge30sXG4gICAgICBlcnJvcjogdGhpcy5odW1hblJlYWRhYmxlTWVzc2FnZVxuICAgIH07XG4gIH1cbiAgZ2V0IGVycm9yQ29kZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5lcnJvckNvZGUgPz8gdGhyb3dFcnIoYENhbid0IGZpbmQgZXJyb3IgY29kZSBmb3IgdGhpcyBLbm93bkVycm9yLiBJcyBpdHMgY29uc3RydWN0b3IgYSBLbm93bkVycm9yQ29uc3RydWN0b3I/ICR7dGhpc31gKTtcbiAgfVxuICBzdGF0aWMgY29uc3RydWN0b3JBcmdzRnJvbUpzb24oanNvbikge1xuICAgIHJldHVybiBbXG4gICAgICA0MDAsXG4gICAgICBqc29uLm1lc3NhZ2UsXG4gICAgICBqc29uXG4gICAgXTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvbikge1xuICAgIGZvciAoY29uc3QgW18sIEtub3duRXJyb3JUeXBlXSBvZiBPYmplY3QuZW50cmllcyhLbm93bkVycm9ycykpIHtcbiAgICAgIGlmIChqc29uLmNvZGUgPT09IEtub3duRXJyb3JUeXBlLnByb3RvdHlwZS5lcnJvckNvZGUpIHtcbiAgICAgICAgY29uc3QgY29uc3RydWN0b3JBcmdzID0gS25vd25FcnJvclR5cGUuY29uc3RydWN0b3JBcmdzRnJvbUpzb24oanNvbik7XG4gICAgICAgIHJldHVybiBuZXcgS25vd25FcnJvclR5cGUoXG4gICAgICAgICAgLi4uY29uc3RydWN0b3JBcmdzXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBLbm93bkVycm9yIGNvZGUuIFlvdSBtYXkgbmVlZCB0byB1cGRhdGUgeW91ciB2ZXJzaW9uIG9mIFN0YWNrIHRvIHNlZSBtb3JlIGRldGFpbGVkIGluZm9ybWF0aW9uLiAke2pzb24uY29kZX06ICR7anNvbi5tZXNzYWdlfWApO1xuICB9XG59O1xudmFyIGtub3duRXJyb3JDb25zdHJ1Y3RvckVycm9yQ29kZVNlbnRpbmVsID0gU3ltYm9sKFwia25vd25FcnJvckNvbnN0cnVjdG9yRXJyb3JDb2RlU2VudGluZWxcIik7XG5mdW5jdGlvbiBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoU3VwZXJDbGFzcywgZXJyb3JDb2RlLCBjcmVhdGUsIGNvbnN0cnVjdG9yQXJnc0Zyb21Kc29uKSB7XG4gIGNvbnN0IGNyZWF0ZUZuID0gY3JlYXRlID09PSBcImluaGVyaXRcIiA/IGlkZW50aXR5QXJncyA6IGNyZWF0ZTtcbiAgY29uc3QgY29uc3RydWN0b3JBcmdzRnJvbUpzb25GbiA9IGNvbnN0cnVjdG9yQXJnc0Zyb21Kc29uID09PSBcImluaGVyaXRcIiA/IFN1cGVyQ2xhc3MuY29uc3RydWN0b3JBcmdzRnJvbUpzb24gOiBjb25zdHJ1Y3RvckFyZ3NGcm9tSnNvbjtcbiAgY2xhc3MgS25vd25FcnJvckltcGwgZXh0ZW5kcyBTdXBlckNsYXNzIHtcbiAgICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XG4gICAgICBzdXBlciguLi5jcmVhdGVGbiguLi5hcmdzKSk7XG4gICAgICB0aGlzLm5hbWUgPSBgS25vd25FcnJvcjwke2Vycm9yQ29kZX0+YDtcbiAgICAgIHRoaXMuY29uc3RydWN0b3JBcmdzID0gYXJncztcbiAgICB9XG4gICAgc3RhdGljIGNvbnN0cnVjdG9yQXJnc0Zyb21Kc29uKGpzb24pIHtcbiAgICAgIHJldHVybiBjb25zdHJ1Y3RvckFyZ3NGcm9tSnNvbkZuKGpzb24uZGV0YWlscyk7XG4gICAgfVxuICAgIHN0YXRpYyBpc0luc3RhbmNlKGVycm9yKSB7XG4gICAgICBpZiAoIUtub3duRXJyb3IuaXNLbm93bkVycm9yKGVycm9yKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgbGV0IGN1cnJlbnQgPSBlcnJvcjtcbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGN1cnJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoY3VycmVudCk7XG4gICAgICAgIGlmICghY3VycmVudCkgYnJlYWs7XG4gICAgICAgIGlmIChcImVycm9yQ29kZVwiIGluIGN1cnJlbnQuY29uc3RydWN0b3IgJiYgY3VycmVudC5jb25zdHJ1Y3Rvci5lcnJvckNvZGUgPT09IGVycm9yQ29kZSkgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIEtub3duRXJyb3JJbXBsLmVycm9yQ29kZSA9IGVycm9yQ29kZTtcbiAgO1xuICByZXR1cm4gS25vd25FcnJvckltcGw7XG59XG52YXIgVW5zdXBwb3J0ZWRFcnJvciA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJVTlNVUFBPUlRFRF9FUlJPUlwiLFxuICAob3JpZ2luYWxFcnJvckNvZGUpID0+IFtcbiAgICA1MDAsXG4gICAgYEFuIGVycm9yIG9jY3VycmVkIHRoYXQgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgKHBvc3NpYmx5IGJlY2F1c2UgaXQgd2FzIGFkZGVkIGluIGEgdmVyc2lvbiBvZiBTdGFjayB0aGF0IGlzIG5ld2VyIHRoYW4gdGhpcyBjbGllbnQpLiBUaGUgb3JpZ2luYWwgdW5zdXBwb3J0ZWQgZXJyb3IgY29kZSB3YXM6ICR7b3JpZ2luYWxFcnJvckNvZGV9YCxcbiAgICB7XG4gICAgICBvcmlnaW5hbEVycm9yQ29kZVxuICAgIH1cbiAgXSxcbiAgKGpzb24pID0+IFtcbiAgICBqc29uPy5vcmlnaW5hbEVycm9yQ29kZSA/PyB0aHJvd0VycihcIm9yaWdpbmFsRXJyb3JDb2RlIG5vdCBmb3VuZCBpbiBVbnN1cHBvcnRlZEVycm9yIGRldGFpbHNcIilcbiAgXVxuKTtcbnZhciBCb2R5UGFyc2luZ0Vycm9yID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIkJPRFlfUEFSU0lOR19FUlJPUlwiLFxuICAobWVzc2FnZSkgPT4gW1xuICAgIDQwMCxcbiAgICBtZXNzYWdlXG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi5tZXNzYWdlXVxuKTtcbnZhciBTY2hlbWFFcnJvciA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJTQ0hFTUFfRVJST1JcIixcbiAgKG1lc3NhZ2UpID0+IFtcbiAgICA0MDAsXG4gICAgbWVzc2FnZSB8fCB0aHJvd0VycihcIlNjaGVtYUVycm9yIHJlcXVpcmVzIGEgbWVzc2FnZVwiKSxcbiAgICB7XG4gICAgICBtZXNzYWdlXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ubWVzc2FnZV1cbik7XG52YXIgQWxsT3ZlcmxvYWRzRmFpbGVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIkFMTF9PVkVSTE9BRFNfRkFJTEVEXCIsXG4gIChvdmVybG9hZEVycm9ycykgPT4gW1xuICAgIDQwMCxcbiAgICBkZWluZGVudGBcbiAgICAgIFRoaXMgZW5kcG9pbnQgaGFzIG11bHRpcGxlIG92ZXJsb2FkcywgYnV0IHRoZXkgYWxsIGZhaWxlZCB0byBwcm9jZXNzIHRoZSByZXF1ZXN0LlxuXG4gICAgICAgICR7b3ZlcmxvYWRFcnJvcnMubWFwKChlLCBpKSA9PiBkZWluZGVudGBcbiAgICAgICAgICBPdmVybG9hZCAke2kgKyAxfTogJHtKU09OLnN0cmluZ2lmeShlLCB2b2lkIDAsIDIpfVxuICAgICAgICBgKS5qb2luKFwiXFxuXFxuXCIpfVxuICAgIGAsXG4gICAge1xuICAgICAgb3ZlcmxvYWRfZXJyb3JzOiBvdmVybG9hZEVycm9yc1xuICAgIH1cbiAgXSxcbiAgKGpzb24pID0+IFtcbiAgICBqc29uPy5vdmVybG9hZF9lcnJvcnMgPz8gdGhyb3dFcnIoXCJvdmVybG9hZF9lcnJvcnMgbm90IGZvdW5kIGluIEFsbE92ZXJsb2Fkc0ZhaWxlZCBkZXRhaWxzXCIpXG4gIF1cbik7XG52YXIgUHJvamVjdEF1dGhlbnRpY2F0aW9uRXJyb3IgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiUFJPSkVDVF9BVVRIRU5USUNBVElPTl9FUlJPUlwiLFxuICBcImluaGVyaXRcIixcbiAgXCJpbmhlcml0XCJcbik7XG52YXIgSW52YWxpZFByb2plY3RBdXRoZW50aWNhdGlvbiA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgUHJvamVjdEF1dGhlbnRpY2F0aW9uRXJyb3IsXG4gIFwiSU5WQUxJRF9QUk9KRUNUX0FVVEhFTlRJQ0FUSU9OXCIsXG4gIFwiaW5oZXJpdFwiLFxuICBcImluaGVyaXRcIlxuKTtcbnZhciBQcm9qZWN0S2V5V2l0aG91dEFjY2Vzc1R5cGUgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEludmFsaWRQcm9qZWN0QXV0aGVudGljYXRpb24sXG4gIFwiUFJPSkVDVF9LRVlfV0lUSE9VVF9BQ0NFU1NfVFlQRVwiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiRWl0aGVyIGFuIEFQSSBrZXkgb3IgYW4gYWRtaW4gYWNjZXNzIHRva2VuIHdhcyBwcm92aWRlZCwgYnV0IHRoZSB4LXN0YWNrLWFjY2Vzcy10eXBlIGhlYWRlciBpcyBtaXNzaW5nLiBTZXQgaXQgdG8gJ2NsaWVudCcsICdzZXJ2ZXInLCBvciAnYWRtaW4nIGFzIGFwcHJvcHJpYXRlLlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIEludmFsaWRBY2Nlc3NUeXBlID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBJbnZhbGlkUHJvamVjdEF1dGhlbnRpY2F0aW9uLFxuICBcIklOVkFMSURfQUNDRVNTX1RZUEVcIixcbiAgKGFjY2Vzc1R5cGUpID0+IFtcbiAgICA0MDAsXG4gICAgYFRoZSB4LXN0YWNrLWFjY2Vzcy10eXBlIGhlYWRlciBtdXN0IGJlICdjbGllbnQnLCAnc2VydmVyJywgb3IgJ2FkbWluJywgYnV0IHdhcyAnJHthY2Nlc3NUeXBlfScuYFxuICBdLFxuICAoanNvbikgPT4gW1xuICAgIGpzb24/LmFjY2Vzc1R5cGUgPz8gdGhyb3dFcnIoXCJhY2Nlc3NUeXBlIG5vdCBmb3VuZCBpbiBJbnZhbGlkQWNjZXNzVHlwZSBkZXRhaWxzXCIpXG4gIF1cbik7XG52YXIgQWNjZXNzVHlwZVdpdGhvdXRQcm9qZWN0SWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEludmFsaWRQcm9qZWN0QXV0aGVudGljYXRpb24sXG4gIFwiQUNDRVNTX1RZUEVfV0lUSE9VVF9QUk9KRUNUX0lEXCIsXG4gIChhY2Nlc3NUeXBlKSA9PiBbXG4gICAgNDAwLFxuICAgIGRlaW5kZW50YFxuICAgICAgVGhlIHgtc3RhY2stYWNjZXNzLXR5cGUgaGVhZGVyIHdhcyAnJHthY2Nlc3NUeXBlfScsIGJ1dCB0aGUgeC1zdGFjay1wcm9qZWN0LWlkIGhlYWRlciB3YXMgbm90IHByb3ZpZGVkLlxuICAgICAgXG4gICAgICBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlIHRoZSBkb2NzIG9uIFJFU1QgQVBJIGF1dGhlbnRpY2F0aW9uOiBodHRwczovL2RvY3Muc3RhY2stYXV0aC5jb20vcmVzdC1hcGkvb3ZlcnZpZXcjYXV0aGVudGljYXRpb25cbiAgICBgLFxuICAgIHtcbiAgICAgIHJlcXVlc3RfdHlwZTogYWNjZXNzVHlwZVxuICAgIH1cbiAgXSxcbiAgKGpzb24pID0+IFtqc29uLnJlcXVlc3RfdHlwZV1cbik7XG52YXIgQWNjZXNzVHlwZVJlcXVpcmVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBJbnZhbGlkUHJvamVjdEF1dGhlbnRpY2F0aW9uLFxuICBcIkFDQ0VTU19UWVBFX1JFUVVJUkVEXCIsXG4gICgpID0+IFtcbiAgICA0MDAsXG4gICAgZGVpbmRlbnRgXG4gICAgICBZb3UgbXVzdCBzcGVjaWZ5IGFuIGFjY2VzcyBsZXZlbCBmb3IgdGhpcyBTdGFjayBwcm9qZWN0LiBNYWtlIHN1cmUgcHJvamVjdCBBUEkga2V5cyBhcmUgcHJvdmlkZWQgKGVnLiB4LXN0YWNrLXB1Ymxpc2hhYmxlLWNsaWVudC1rZXkpIGFuZCB5b3Ugc2V0IHRoZSB4LXN0YWNrLWFjY2Vzcy10eXBlIGhlYWRlciB0byAnY2xpZW50JywgJ3NlcnZlcicsIG9yICdhZG1pbicuXG4gICAgICBcbiAgICAgIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWUgdGhlIGRvY3Mgb24gUkVTVCBBUEkgYXV0aGVudGljYXRpb246IGh0dHBzOi8vZG9jcy5zdGFjay1hdXRoLmNvbS9yZXN0LWFwaS9vdmVydmlldyNhdXRoZW50aWNhdGlvblxuICAgIGBcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgSW5zdWZmaWNpZW50QWNjZXNzVHlwZSA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgSW52YWxpZFByb2plY3RBdXRoZW50aWNhdGlvbixcbiAgXCJJTlNVRkZJQ0lFTlRfQUNDRVNTX1RZUEVcIixcbiAgKGFjdHVhbEFjY2Vzc1R5cGUsIGFsbG93ZWRBY2Nlc3NUeXBlcykgPT4gW1xuICAgIDQwMSxcbiAgICBgVGhlIHgtc3RhY2stYWNjZXNzLXR5cGUgaGVhZGVyIG11c3QgYmUgJHthbGxvd2VkQWNjZXNzVHlwZXMubWFwKChzKSA9PiBgJyR7c30nYCkuam9pbihcIiBvciBcIil9LCBidXQgd2FzICcke2FjdHVhbEFjY2Vzc1R5cGV9Jy5gLFxuICAgIHtcbiAgICAgIGFjdHVhbF9hY2Nlc3NfdHlwZTogYWN0dWFsQWNjZXNzVHlwZSxcbiAgICAgIGFsbG93ZWRfYWNjZXNzX3R5cGVzOiBhbGxvd2VkQWNjZXNzVHlwZXNcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbXG4gICAganNvbi5hY3R1YWxfYWNjZXNzX3R5cGUsXG4gICAganNvbi5hbGxvd2VkX2FjY2Vzc190eXBlc1xuICBdXG4pO1xudmFyIEludmFsaWRQdWJsaXNoYWJsZUNsaWVudEtleSA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgSW52YWxpZFByb2plY3RBdXRoZW50aWNhdGlvbixcbiAgXCJJTlZBTElEX1BVQkxJU0hBQkxFX0NMSUVOVF9LRVlcIixcbiAgKHByb2plY3RJZCkgPT4gW1xuICAgIDQwMSxcbiAgICBgVGhlIHB1Ymxpc2hhYmxlIGtleSBpcyBub3QgdmFsaWQgZm9yIHRoZSBwcm9qZWN0ICR7SlNPTi5zdHJpbmdpZnkocHJvamVjdElkKX0uIERvZXMgdGhlIHByb2plY3QgYW5kL29yIHRoZSBrZXkgZXhpc3Q/YCxcbiAgICB7XG4gICAgICBwcm9qZWN0X2lkOiBwcm9qZWN0SWRcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi5wcm9qZWN0X2lkXVxuKTtcbnZhciBJbnZhbGlkU2VjcmV0U2VydmVyS2V5ID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBJbnZhbGlkUHJvamVjdEF1dGhlbnRpY2F0aW9uLFxuICBcIklOVkFMSURfU0VDUkVUX1NFUlZFUl9LRVlcIixcbiAgKHByb2plY3RJZCkgPT4gW1xuICAgIDQwMSxcbiAgICBgVGhlIHNlY3JldCBzZXJ2ZXIga2V5IGlzIG5vdCB2YWxpZCBmb3IgdGhlIHByb2plY3QgJHtKU09OLnN0cmluZ2lmeShwcm9qZWN0SWQpfS4gRG9lcyB0aGUgcHJvamVjdCBhbmQvb3IgdGhlIGtleSBleGlzdD9gLFxuICAgIHtcbiAgICAgIHByb2plY3RfaWQ6IHByb2plY3RJZFxuICAgIH1cbiAgXSxcbiAgKGpzb24pID0+IFtqc29uLnByb2plY3RfaWRdXG4pO1xudmFyIEludmFsaWRTdXBlclNlY3JldEFkbWluS2V5ID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBJbnZhbGlkUHJvamVjdEF1dGhlbnRpY2F0aW9uLFxuICBcIklOVkFMSURfU1VQRVJfU0VDUkVUX0FETUlOX0tFWVwiLFxuICAocHJvamVjdElkKSA9PiBbXG4gICAgNDAxLFxuICAgIGBUaGUgc3VwZXIgc2VjcmV0IGFkbWluIGtleSBpcyBub3QgdmFsaWQgZm9yIHRoZSBwcm9qZWN0ICR7SlNPTi5zdHJpbmdpZnkocHJvamVjdElkKX0uIERvZXMgdGhlIHByb2plY3QgYW5kL29yIHRoZSBrZXkgZXhpc3Q/YCxcbiAgICB7XG4gICAgICBwcm9qZWN0X2lkOiBwcm9qZWN0SWRcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi5wcm9qZWN0X2lkXVxuKTtcbnZhciBJbnZhbGlkQWRtaW5BY2Nlc3NUb2tlbiA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgSW52YWxpZFByb2plY3RBdXRoZW50aWNhdGlvbixcbiAgXCJJTlZBTElEX0FETUlOX0FDQ0VTU19UT0tFTlwiLFxuICBcImluaGVyaXRcIixcbiAgXCJpbmhlcml0XCJcbik7XG52YXIgVW5wYXJzYWJsZUFkbWluQWNjZXNzVG9rZW4gPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEludmFsaWRBZG1pbkFjY2Vzc1Rva2VuLFxuICBcIlVOUEFSU0FCTEVfQURNSU5fQUNDRVNTX1RPS0VOXCIsXG4gICgpID0+IFtcbiAgICA0MDEsXG4gICAgXCJBZG1pbiBhY2Nlc3MgdG9rZW4gaXMgbm90IHBhcnNhYmxlLlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIEFkbWluQWNjZXNzVG9rZW5FeHBpcmVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBJbnZhbGlkQWRtaW5BY2Nlc3NUb2tlbixcbiAgXCJBRE1JTl9BQ0NFU1NfVE9LRU5fRVhQSVJFRFwiLFxuICAoZXhwaXJlZEF0KSA9PiBbXG4gICAgNDAxLFxuICAgIGBBZG1pbiBhY2Nlc3MgdG9rZW4gaGFzIGV4cGlyZWQuIFBsZWFzZSByZWZyZXNoIGl0IGFuZCB0cnkgYWdhaW4uJHtleHBpcmVkQXQgPyBgIChUaGUgYWNjZXNzIHRva2VuIGV4cGlyZWQgYXQgJHtleHBpcmVkQXQudG9JU09TdHJpbmcoKX0uKWAgOiBcIlwifWAsXG4gICAgeyBleHBpcmVkX2F0X21pbGxpczogZXhwaXJlZEF0Py5nZXRUaW1lKCkgPz8gbnVsbCB9XG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi5leHBpcmVkX2F0X21pbGxpcyA/PyB2b2lkIDBdXG4pO1xudmFyIEludmFsaWRQcm9qZWN0Rm9yQWRtaW5BY2Nlc3NUb2tlbiA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgSW52YWxpZEFkbWluQWNjZXNzVG9rZW4sXG4gIFwiSU5WQUxJRF9QUk9KRUNUX0ZPUl9BRE1JTl9BQ0NFU1NfVE9LRU5cIixcbiAgKCkgPT4gW1xuICAgIDQwMSxcbiAgICBcIkFkbWluIGFjY2VzcyB0b2tlbnMgbXVzdCBiZSBjcmVhdGVkIG9uIHRoZSBpbnRlcm5hbCBwcm9qZWN0LlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIEFkbWluQWNjZXNzVG9rZW5Jc05vdEFkbWluID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBJbnZhbGlkQWRtaW5BY2Nlc3NUb2tlbixcbiAgXCJBRE1JTl9BQ0NFU1NfVE9LRU5fSVNfTk9UX0FETUlOXCIsXG4gICgpID0+IFtcbiAgICA0MDEsXG4gICAgXCJBZG1pbiBhY2Nlc3MgdG9rZW4gZG9lcyBub3QgaGF2ZSB0aGUgcmVxdWlyZWQgcGVybWlzc2lvbnMgdG8gYWNjZXNzIHRoaXMgcHJvamVjdC5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBQcm9qZWN0QXV0aGVudGljYXRpb25SZXF1aXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgUHJvamVjdEF1dGhlbnRpY2F0aW9uRXJyb3IsXG4gIFwiUFJPSkVDVF9BVVRIRU5USUNBVElPTl9SRVFVSVJFRFwiLFxuICBcImluaGVyaXRcIixcbiAgXCJpbmhlcml0XCJcbik7XG52YXIgQ2xpZW50QXV0aGVudGljYXRpb25SZXF1aXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgUHJvamVjdEF1dGhlbnRpY2F0aW9uUmVxdWlyZWQsXG4gIFwiQ0xJRU5UX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEXCIsXG4gICgpID0+IFtcbiAgICA0MDEsXG4gICAgXCJUaGUgcHVibGlzaGFibGUgY2xpZW50IGtleSBtdXN0IGJlIHByb3ZpZGVkLlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIFNlcnZlckF1dGhlbnRpY2F0aW9uUmVxdWlyZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIFByb2plY3RBdXRoZW50aWNhdGlvblJlcXVpcmVkLFxuICBcIlNFUlZFUl9BVVRIRU5USUNBVElPTl9SRVFVSVJFRFwiLFxuICAoKSA9PiBbXG4gICAgNDAxLFxuICAgIFwiVGhlIHNlY3JldCBzZXJ2ZXIga2V5IG11c3QgYmUgcHJvdmlkZWQuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgQ2xpZW50T3JTZXJ2ZXJBdXRoZW50aWNhdGlvblJlcXVpcmVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBQcm9qZWN0QXV0aGVudGljYXRpb25SZXF1aXJlZCxcbiAgXCJDTElFTlRfT1JfU0VSVkVSX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEXCIsXG4gICgpID0+IFtcbiAgICA0MDEsXG4gICAgXCJFaXRoZXIgdGhlIHB1Ymxpc2hhYmxlIGNsaWVudCBrZXkgb3IgdGhlIHNlY3JldCBzZXJ2ZXIga2V5IG11c3QgYmUgcHJvdmlkZWQuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgQ2xpZW50T3JBZG1pbkF1dGhlbnRpY2F0aW9uUmVxdWlyZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIFByb2plY3RBdXRoZW50aWNhdGlvblJlcXVpcmVkLFxuICBcIkNMSUVOVF9PUl9BRE1JTl9BVVRIRU5USUNBVElPTl9SRVFVSVJFRFwiLFxuICAoKSA9PiBbXG4gICAgNDAxLFxuICAgIFwiRWl0aGVyIHRoZSBwdWJsaXNoYWJsZSBjbGllbnQga2V5IG9yIHRoZSBzdXBlciBzZWNyZXQgYWRtaW4ga2V5IG11c3QgYmUgcHJvdmlkZWQuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgQ2xpZW50T3JTZXJ2ZXJPckFkbWluQXV0aGVudGljYXRpb25SZXF1aXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgUHJvamVjdEF1dGhlbnRpY2F0aW9uUmVxdWlyZWQsXG4gIFwiQ0xJRU5UX09SX1NFUlZFUl9PUl9BRE1JTl9BVVRIRU5USUNBVElPTl9SRVFVSVJFRFwiLFxuICAoKSA9PiBbXG4gICAgNDAxLFxuICAgIFwiRWl0aGVyIHRoZSBwdWJsaXNoYWJsZSBjbGllbnQga2V5LCB0aGUgc2VjcmV0IHNlcnZlciBrZXksIG9yIHRoZSBzdXBlciBzZWNyZXQgYWRtaW4ga2V5IG11c3QgYmUgcHJvdmlkZWQuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgQWRtaW5BdXRoZW50aWNhdGlvblJlcXVpcmVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBQcm9qZWN0QXV0aGVudGljYXRpb25SZXF1aXJlZCxcbiAgXCJBRE1JTl9BVVRIRU5USUNBVElPTl9SRVFVSVJFRFwiLFxuICAoKSA9PiBbXG4gICAgNDAxLFxuICAgIFwiVGhlIHN1cGVyIHNlY3JldCBhZG1pbiBrZXkgbXVzdCBiZSBwcm92aWRlZC5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBFeHBlY3RlZEludGVybmFsUHJvamVjdCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgUHJvamVjdEF1dGhlbnRpY2F0aW9uRXJyb3IsXG4gIFwiRVhQRUNURURfSU5URVJOQUxfUFJPSkVDVFwiLFxuICAoKSA9PiBbXG4gICAgNDAxLFxuICAgIFwiVGhlIHByb2plY3QgSUQgaXMgZXhwZWN0ZWQgdG8gYmUgaW50ZXJuYWwuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgU2Vzc2lvbkF1dGhlbnRpY2F0aW9uRXJyb3IgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiU0VTU0lPTl9BVVRIRU5USUNBVElPTl9FUlJPUlwiLFxuICBcImluaGVyaXRcIixcbiAgXCJpbmhlcml0XCJcbik7XG52YXIgSW52YWxpZFNlc3Npb25BdXRoZW50aWNhdGlvbiA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgU2Vzc2lvbkF1dGhlbnRpY2F0aW9uRXJyb3IsXG4gIFwiSU5WQUxJRF9TRVNTSU9OX0FVVEhFTlRJQ0FUSU9OXCIsXG4gIFwiaW5oZXJpdFwiLFxuICBcImluaGVyaXRcIlxuKTtcbnZhciBJbnZhbGlkQWNjZXNzVG9rZW4gPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEludmFsaWRTZXNzaW9uQXV0aGVudGljYXRpb24sXG4gIFwiSU5WQUxJRF9BQ0NFU1NfVE9LRU5cIixcbiAgXCJpbmhlcml0XCIsXG4gIFwiaW5oZXJpdFwiXG4pO1xudmFyIFVucGFyc2FibGVBY2Nlc3NUb2tlbiA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgSW52YWxpZEFjY2Vzc1Rva2VuLFxuICBcIlVOUEFSU0FCTEVfQUNDRVNTX1RPS0VOXCIsXG4gICgpID0+IFtcbiAgICA0MDEsXG4gICAgXCJBY2Nlc3MgdG9rZW4gaXMgbm90IHBhcnNhYmxlLlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIEFjY2Vzc1Rva2VuRXhwaXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgSW52YWxpZEFjY2Vzc1Rva2VuLFxuICBcIkFDQ0VTU19UT0tFTl9FWFBJUkVEXCIsXG4gIChleHBpcmVkQXQpID0+IFtcbiAgICA0MDEsXG4gICAgYEFjY2VzcyB0b2tlbiBoYXMgZXhwaXJlZC4gUGxlYXNlIHJlZnJlc2ggaXQgYW5kIHRyeSBhZ2Fpbi4ke2V4cGlyZWRBdCA/IGAgKFRoZSBhY2Nlc3MgdG9rZW4gZXhwaXJlZCBhdCAke2V4cGlyZWRBdC50b0lTT1N0cmluZygpfS4pYCA6IFwiXCJ9YCxcbiAgICB7IGV4cGlyZWRfYXRfbWlsbGlzOiBleHBpcmVkQXQ/LmdldFRpbWUoKSA/PyBudWxsIH1cbiAgXSxcbiAgKGpzb24pID0+IFtqc29uLmV4cGlyZWRfYXRfbWlsbGlzID8gbmV3IERhdGUoanNvbi5leHBpcmVkX2F0X21pbGxpcykgOiB2b2lkIDBdXG4pO1xudmFyIEludmFsaWRQcm9qZWN0Rm9yQWNjZXNzVG9rZW4gPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEludmFsaWRBY2Nlc3NUb2tlbixcbiAgXCJJTlZBTElEX1BST0pFQ1RfRk9SX0FDQ0VTU19UT0tFTlwiLFxuICAoZXhwZWN0ZWRQcm9qZWN0SWQsIGFjdHVhbFByb2plY3RJZCkgPT4gW1xuICAgIDQwMSxcbiAgICBgQWNjZXNzIHRva2VuIG5vdCB2YWxpZCBmb3IgdGhpcyBwcm9qZWN0LiBFeHBlY3RlZCBwcm9qZWN0IElEICR7SlNPTi5zdHJpbmdpZnkoZXhwZWN0ZWRQcm9qZWN0SWQpfSwgYnV0IHRoZSB0b2tlbiBpcyBmb3IgcHJvamVjdCBJRCAke0pTT04uc3RyaW5naWZ5KGFjdHVhbFByb2plY3RJZCl9LmAsXG4gICAge1xuICAgICAgZXhwZWN0ZWRfcHJvamVjdF9pZDogZXhwZWN0ZWRQcm9qZWN0SWQsXG4gICAgICBhY3R1YWxfcHJvamVjdF9pZDogYWN0dWFsUHJvamVjdElkXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24uZXhwZWN0ZWRfcHJvamVjdF9pZCwganNvbi5hY3R1YWxfcHJvamVjdF9pZF1cbik7XG52YXIgUmVmcmVzaFRva2VuRXJyb3IgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiUkVGUkVTSF9UT0tFTl9FUlJPUlwiLFxuICBcImluaGVyaXRcIixcbiAgXCJpbmhlcml0XCJcbik7XG52YXIgUmVmcmVzaFRva2VuTm90Rm91bmRPckV4cGlyZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIFJlZnJlc2hUb2tlbkVycm9yLFxuICBcIlJFRlJFU0hfVE9LRU5fTk9UX0ZPVU5EX09SX0VYUElSRURcIixcbiAgKCkgPT4gW1xuICAgIDQwMSxcbiAgICBcIlJlZnJlc2ggdG9rZW4gbm90IGZvdW5kIGZvciB0aGlzIHByb2plY3QsIG9yIHRoZSBzZXNzaW9uIGhhcyBleHBpcmVkL2JlZW4gcmV2b2tlZC5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBDYW5ub3REZWxldGVDdXJyZW50U2Vzc2lvbiA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgUmVmcmVzaFRva2VuRXJyb3IsXG4gIFwiQ0FOTk9UX0RFTEVURV9DVVJSRU5UX1NFU1NJT05cIixcbiAgKCkgPT4gW1xuICAgIDQwMCxcbiAgICBcIkNhbm5vdCBkZWxldGUgdGhlIGN1cnJlbnQgc2Vzc2lvbi5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBQcm92aWRlclJlamVjdGVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBSZWZyZXNoVG9rZW5FcnJvcixcbiAgXCJQUk9WSURFUl9SRUpFQ1RFRFwiLFxuICAoKSA9PiBbXG4gICAgNDAxLFxuICAgIFwiVGhlIHByb3ZpZGVyIHJlZnVzZWQgdG8gcmVmcmVzaCB0aGVpciB0b2tlbi4gVGhpcyB1c3VhbGx5IG1lYW5zIHRoYXQgdGhlIHByb3ZpZGVyIHVzZWQgdG8gYXV0aGVudGljYXRlIHRoZSB1c2VyIG5vIGxvbmdlciByZWdhcmRzIHRoaXMgc2Vzc2lvbiBhcyB2YWxpZCwgYW5kIHRoZSB1c2VyIG11c3QgcmUtYXV0aGVudGljYXRlLlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIFVzZXJXaXRoRW1haWxBbHJlYWR5RXhpc3RzID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIlVTRVJfRU1BSUxfQUxSRUFEWV9FWElTVFNcIixcbiAgKGVtYWlsLCB3b3VsZFdvcmtJZkVtYWlsV2FzVmVyaWZpZWQgPSBmYWxzZSkgPT4gW1xuICAgIDQwOSxcbiAgICBgQSB1c2VyIHdpdGggZW1haWwgJHtKU09OLnN0cmluZ2lmeShlbWFpbCl9IGFscmVhZHkgZXhpc3RzJHt3b3VsZFdvcmtJZkVtYWlsV2FzVmVyaWZpZWQgPyBcIiBidXQgdGhlIGVtYWlsIGlzIG5vdCB2ZXJpZmllZC4gUGxlYXNlIGxvZ2luIHRvIHlvdXIgZXhpc3RpbmcgYWNjb3VudCB3aXRoIHRoZSBtZXRob2QgeW91IHVzZWQgdG8gc2lnbiB1cCwgYW5kIHRoZW4gdmVyaWZ5IHlvdXIgZW1haWwgdG8gc2lnbiBpbiB3aXRoIHRoaXMgbG9naW4gbWV0aG9kLlwiIDogXCIuXCJ9YCxcbiAgICB7XG4gICAgICBlbWFpbCxcbiAgICAgIHdvdWxkX3dvcmtfaWZfZW1haWxfd2FzX3ZlcmlmaWVkOiB3b3VsZFdvcmtJZkVtYWlsV2FzVmVyaWZpZWRcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi5lbWFpbCwganNvbi53b3VsZF93b3JrX2lmX2VtYWlsX3dhc192ZXJpZmllZCA/PyBmYWxzZV1cbik7XG52YXIgRW1haWxOb3RWZXJpZmllZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJFTUFJTF9OT1RfVkVSSUZJRURcIixcbiAgKCkgPT4gW1xuICAgIDQwMCxcbiAgICBcIlRoZSBlbWFpbCBpcyBub3QgdmVyaWZpZWQuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgQ2Fubm90R2V0T3duVXNlcldpdGhvdXRVc2VyID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIkNBTk5PVF9HRVRfT1dOX1VTRVJfV0lUSE9VVF9VU0VSXCIsXG4gICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJZb3UgaGF2ZSBzcGVjaWZpZWQgJ21lJyBhcyBhIHVzZXJJZCwgYnV0IGRpZCBub3QgcHJvdmlkZSBhdXRoZW50aWNhdGlvbiBmb3IgYSB1c2VyLlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIFVzZXJJZERvZXNOb3RFeGlzdCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJVU0VSX0lEX0RPRVNfTk9UX0VYSVNUXCIsXG4gICh1c2VySWQpID0+IFtcbiAgICA0MDAsXG4gICAgYFRoZSBnaXZlbiB1c2VyIHdpdGggdGhlIElEICR7dXNlcklkfSBkb2VzIG5vdCBleGlzdC5gLFxuICAgIHtcbiAgICAgIHVzZXJfaWQ6IHVzZXJJZFxuICAgIH1cbiAgXSxcbiAgKGpzb24pID0+IFtqc29uLnVzZXJfaWRdXG4pO1xudmFyIFVzZXJOb3RGb3VuZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJVU0VSX05PVF9GT1VORFwiLFxuICAoKSA9PiBbXG4gICAgNDA0LFxuICAgIFwiVXNlciBub3QgZm91bmQuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgUHJvamVjdE5vdEZvdW5kID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIlBST0pFQ1RfTk9UX0ZPVU5EXCIsXG4gIChwcm9qZWN0SWQpID0+IHtcbiAgICBpZiAodHlwZW9mIHByb2plY3RJZCAhPT0gXCJzdHJpbmdcIikgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJwcm9qZWN0SWQgb2YgS25vd25FcnJvcnMuUHJvamVjdE5vdEZvdW5kIG11c3QgYmUgYSBzdHJpbmdcIik7XG4gICAgcmV0dXJuIFtcbiAgICAgIDQwNCxcbiAgICAgIGBQcm9qZWN0ICR7cHJvamVjdElkfSBub3QgZm91bmQgb3IgaXMgbm90IGFjY2Vzc2libGUgd2l0aCB0aGUgY3VycmVudCB1c2VyLmAsXG4gICAgICB7XG4gICAgICAgIHByb2plY3RfaWQ6IHByb2plY3RJZFxuICAgICAgfVxuICAgIF07XG4gIH0sXG4gIChqc29uKSA9PiBbanNvbi5wcm9qZWN0X2lkXVxuKTtcbnZhciBDdXJyZW50UHJvamVjdE5vdEZvdW5kID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIkNVUlJFTlRfUFJPSkVDVF9OT1RfRk9VTkRcIixcbiAgKHByb2plY3RJZCkgPT4gW1xuICAgIDQwMCxcbiAgICBgVGhlIGN1cnJlbnQgcHJvamVjdCB3aXRoIElEICR7cHJvamVjdElkfSB3YXMgbm90IGZvdW5kLiBQbGVhc2UgY2hlY2sgdGhlIHZhbHVlIG9mIHRoZSB4LXN0YWNrLXByb2plY3QtaWQgaGVhZGVyLmAsXG4gICAge1xuICAgICAgcHJvamVjdF9pZDogcHJvamVjdElkXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ucHJvamVjdF9pZF1cbik7XG52YXIgQnJhbmNoRG9lc05vdEV4aXN0ID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIkJSQU5DSF9ET0VTX05PVF9FWElTVFwiLFxuICAoYnJhbmNoSWQpID0+IFtcbiAgICA0MDAsXG4gICAgYFRoZSBicmFuY2ggd2l0aCBJRCAke2JyYW5jaElkfSBkb2VzIG5vdCBleGlzdC5gLFxuICAgIHtcbiAgICAgIGJyYW5jaF9pZDogYnJhbmNoSWRcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi5icmFuY2hfaWRdXG4pO1xudmFyIFNpZ25VcE5vdEVuYWJsZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiU0lHTl9VUF9OT1RfRU5BQkxFRFwiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiQ3JlYXRpb24gb2YgbmV3IGFjY291bnRzIGlzIG5vdCBlbmFibGVkIGZvciB0aGlzIHByb2plY3QuIFBsZWFzZSBhc2sgdGhlIHByb2plY3Qgb3duZXIgdG8gZW5hYmxlIGl0LlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIFBhc3N3b3JkQXV0aGVudGljYXRpb25Ob3RFbmFibGVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIlBBU1NXT1JEX0FVVEhFTlRJQ0FUSU9OX05PVF9FTkFCTEVEXCIsXG4gICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJQYXNzd29yZCBhdXRoZW50aWNhdGlvbiBpcyBub3QgZW5hYmxlZCBmb3IgdGhpcyBwcm9qZWN0LlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIERhdGFWYXVsdFN0b3JlRG9lc05vdEV4aXN0ID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIkRBVEFfVkFVTFRfU1RPUkVfRE9FU19OT1RfRVhJU1RcIixcbiAgKHN0b3JlSWQpID0+IFtcbiAgICA0MDAsXG4gICAgYERhdGEgdmF1bHQgc3RvcmUgd2l0aCBJRCAke3N0b3JlSWR9IGRvZXMgbm90IGV4aXN0LmAsXG4gICAge1xuICAgICAgc3RvcmVfaWQ6IHN0b3JlSWRcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi5zdG9yZV9pZF1cbik7XG52YXIgRGF0YVZhdWx0U3RvcmVIYXNoZWRLZXlEb2VzTm90RXhpc3QgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiREFUQV9WQVVMVF9TVE9SRV9IQVNIRURfS0VZX0RPRVNfTk9UX0VYSVNUXCIsXG4gIChzdG9yZUlkLCBoYXNoZWRLZXkpID0+IFtcbiAgICA0MDAsXG4gICAgYERhdGEgdmF1bHQgc3RvcmUgd2l0aCBJRCAke3N0b3JlSWR9IGRvZXMgbm90IGNvbnRhaW4gYSBrZXkgd2l0aCBoYXNoICR7aGFzaGVkS2V5fS5gLFxuICAgIHtcbiAgICAgIHN0b3JlX2lkOiBzdG9yZUlkLFxuICAgICAgaGFzaGVkX2tleTogaGFzaGVkS2V5XG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24uc3RvcmVfaWQsIGpzb24uaGFzaGVkX2tleV1cbik7XG52YXIgUGFzc2tleUF1dGhlbnRpY2F0aW9uTm90RW5hYmxlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJQQVNTS0VZX0FVVEhFTlRJQ0FUSU9OX05PVF9FTkFCTEVEXCIsXG4gICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJQYXNza2V5IGF1dGhlbnRpY2F0aW9uIGlzIG5vdCBlbmFibGVkIGZvciB0aGlzIHByb2plY3QuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgQW5vbnltb3VzQWNjb3VudHNOb3RFbmFibGVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIkFOT05ZTU9VU19BQ0NPVU5UU19OT1RfRU5BQkxFRFwiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiQW5vbnltb3VzIGFjY291bnRzIGFyZSBub3QgZW5hYmxlZCBmb3IgdGhpcyBwcm9qZWN0LlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIEFub255bW91c0F1dGhlbnRpY2F0aW9uTm90QWxsb3dlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJBTk9OWU1PVVNfQVVUSEVOVElDQVRJT05fTk9UX0FMTE9XRURcIixcbiAgKCkgPT4gW1xuICAgIDQwMSxcbiAgICBcIlgtU3RhY2stQWNjZXNzLVRva2VuIGlzIGZvciBhbiBhbm9ueW1vdXMgdXNlciwgYnV0IGFub255bW91cyB1c2VycyBhcmUgbm90IGVuYWJsZWQuIFNldCB0aGUgWC1TdGFjay1BbGxvdy1Bbm9ueW1vdXMtVXNlciBoZWFkZXIgb2YgdGhpcyByZXF1ZXN0IHRvICd0cnVlJyB0byBhbGxvdyBhbm9ueW1vdXMgdXNlcnMuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgRW1haWxQYXNzd29yZE1pc21hdGNoID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIkVNQUlMX1BBU1NXT1JEX01JU01BVENIXCIsXG4gICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJXcm9uZyBlLW1haWwgb3IgcGFzc3dvcmQuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgUmVkaXJlY3RVcmxOb3RXaGl0ZWxpc3RlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJSRURJUkVDVF9VUkxfTk9UX1dISVRFTElTVEVEXCIsXG4gICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJSZWRpcmVjdCBVUkwgbm90IHdoaXRlbGlzdGVkLiBEaWQgeW91IGZvcmdldCB0byBhZGQgdGhpcyBkb21haW4gdG8gdGhlIHRydXN0ZWQgZG9tYWlucyBsaXN0IG9uIHRoZSBTdGFjayBBdXRoIGRhc2hib2FyZD9cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBQYXNzd29yZFJlcXVpcmVtZW50c05vdE1ldCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJQQVNTV09SRF9SRVFVSVJFTUVOVFNfTk9UX01FVFwiLFxuICBcImluaGVyaXRcIixcbiAgXCJpbmhlcml0XCJcbik7XG52YXIgUGFzc3dvcmRUb29TaG9ydCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgUGFzc3dvcmRSZXF1aXJlbWVudHNOb3RNZXQsXG4gIFwiUEFTU1dPUkRfVE9PX1NIT1JUXCIsXG4gIChtaW5MZW5ndGgpID0+IFtcbiAgICA0MDAsXG4gICAgYFBhc3N3b3JkIHRvbyBzaG9ydC4gTWluaW11bSBsZW5ndGggaXMgJHttaW5MZW5ndGh9LmAsXG4gICAge1xuICAgICAgbWluX2xlbmd0aDogbWluTGVuZ3RoXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW1xuICAgIGpzb24/Lm1pbl9sZW5ndGggPz8gdGhyb3dFcnIoXCJtaW5fbGVuZ3RoIG5vdCBmb3VuZCBpbiBQYXNzd29yZFRvb1Nob3J0IGRldGFpbHNcIilcbiAgXVxuKTtcbnZhciBQYXNzd29yZFRvb0xvbmcgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIFBhc3N3b3JkUmVxdWlyZW1lbnRzTm90TWV0LFxuICBcIlBBU1NXT1JEX1RPT19MT05HXCIsXG4gIChtYXhMZW5ndGgpID0+IFtcbiAgICA0MDAsXG4gICAgYFBhc3N3b3JkIHRvbyBsb25nLiBNYXhpbXVtIGxlbmd0aCBpcyAke21heExlbmd0aH0uYCxcbiAgICB7XG4gICAgICBtYXhMZW5ndGhcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbXG4gICAganNvbj8ubWF4TGVuZ3RoID8/IHRocm93RXJyKFwibWF4TGVuZ3RoIG5vdCBmb3VuZCBpbiBQYXNzd29yZFRvb0xvbmcgZGV0YWlsc1wiKVxuICBdXG4pO1xudmFyIFVzZXJEb2VzTm90SGF2ZVBhc3N3b3JkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIlVTRVJfRE9FU19OT1RfSEFWRV9QQVNTV09SRFwiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhpcyB1c2VyIGRvZXMgbm90IGhhdmUgcGFzc3dvcmQgYXV0aGVudGljYXRpb24gZW5hYmxlZC5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBWZXJpZmljYXRpb25Db2RlRXJyb3IgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiVkVSSUZJQ0FUSU9OX0VSUk9SXCIsXG4gIFwiaW5oZXJpdFwiLFxuICBcImluaGVyaXRcIlxuKTtcbnZhciBWZXJpZmljYXRpb25Db2RlTm90Rm91bmQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIFZlcmlmaWNhdGlvbkNvZGVFcnJvcixcbiAgXCJWRVJJRklDQVRJT05fQ09ERV9OT1RfRk9VTkRcIixcbiAgKCkgPT4gW1xuICAgIDQwNCxcbiAgICBcIlRoZSB2ZXJpZmljYXRpb24gY29kZSBkb2VzIG5vdCBleGlzdCBmb3IgdGhpcyBwcm9qZWN0LlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIFZlcmlmaWNhdGlvbkNvZGVFeHBpcmVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBWZXJpZmljYXRpb25Db2RlRXJyb3IsXG4gIFwiVkVSSUZJQ0FUSU9OX0NPREVfRVhQSVJFRFwiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIHZlcmlmaWNhdGlvbiBjb2RlIGhhcyBleHBpcmVkLlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIFZlcmlmaWNhdGlvbkNvZGVBbHJlYWR5VXNlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgVmVyaWZpY2F0aW9uQ29kZUVycm9yLFxuICBcIlZFUklGSUNBVElPTl9DT0RFX0FMUkVBRFlfVVNFRFwiLFxuICAoKSA9PiBbXG4gICAgNDA5LFxuICAgIFwiVGhlIHZlcmlmaWNhdGlvbiBsaW5rIGhhcyBhbHJlYWR5IGJlZW4gdXNlZC5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBWZXJpZmljYXRpb25Db2RlTWF4QXR0ZW1wdHNSZWFjaGVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBWZXJpZmljYXRpb25Db2RlRXJyb3IsXG4gIFwiVkVSSUZJQ0FUSU9OX0NPREVfTUFYX0FUVEVNUFRTX1JFQUNIRURcIixcbiAgKCkgPT4gW1xuICAgIDQwMCxcbiAgICBcIlRoZSB2ZXJpZmljYXRpb24gY29kZSBub25jZSBoYXMgcmVhY2hlZCB0aGUgbWF4aW11bSBudW1iZXIgb2YgYXR0ZW1wdHMuIFRoaXMgY29kZSBpcyBub3QgdmFsaWQgYW55bW9yZS5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBQYXNzd29yZENvbmZpcm1hdGlvbk1pc21hdGNoID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIlBBU1NXT1JEX0NPTkZJUk1BVElPTl9NSVNNQVRDSFwiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiUGFzc3dvcmRzIGRvIG5vdCBtYXRjaC5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBFbWFpbEFscmVhZHlWZXJpZmllZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJFTUFJTF9BTFJFQURZX1ZFUklGSUVEXCIsXG4gICgpID0+IFtcbiAgICA0MDksXG4gICAgXCJUaGUgZS1tYWlsIGlzIGFscmVhZHkgdmVyaWZpZWQuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgRW1haWxOb3RBc3NvY2lhdGVkV2l0aFVzZXIgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiRU1BSUxfTk9UX0FTU09DSUFURURfV0lUSF9VU0VSXCIsXG4gICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJUaGUgZS1tYWlsIGlzIG5vdCBhc3NvY2lhdGVkIHdpdGggYSB1c2VyIHRoYXQgY291bGQgbG9nIGluIHdpdGggdGhhdCBlLW1haWwuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgRW1haWxJc05vdFByaW1hcnlFbWFpbCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJFTUFJTF9JU19OT1RfUFJJTUFSWV9FTUFJTFwiLFxuICAoZW1haWwsIHByaW1hcnlFbWFpbCkgPT4gW1xuICAgIDQwMCxcbiAgICBgVGhlIGdpdmVuIGUtbWFpbCAoJHtlbWFpbH0pIG11c3QgZXF1YWwgdGhlIHVzZXIncyBwcmltYXJ5IGUtbWFpbCAoJHtwcmltYXJ5RW1haWx9KS5gLFxuICAgIHtcbiAgICAgIGVtYWlsLFxuICAgICAgcHJpbWFyeV9lbWFpbDogcHJpbWFyeUVtYWlsXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24uZW1haWwsIGpzb24ucHJpbWFyeV9lbWFpbF1cbik7XG52YXIgUGFzc2tleVJlZ2lzdHJhdGlvbkZhaWxlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJQQVNTS0VZX1JFR0lTVFJBVElPTl9GQUlMRURcIixcbiAgKG1lc3NhZ2UpID0+IFtcbiAgICA0MDAsXG4gICAgbWVzc2FnZVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ubWVzc2FnZV1cbik7XG52YXIgUGFzc2tleVdlYkF1dGhuRXJyb3IgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiUEFTU0tFWV9XRUJBVVRITl9FUlJPUlwiLFxuICAobWVzc2FnZSwgY29kZSkgPT4gW1xuICAgIDQwMCxcbiAgICBtZXNzYWdlLFxuICAgIHtcbiAgICAgIG1lc3NhZ2UsXG4gICAgICBjb2RlXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ubWVzc2FnZSwganNvbi5jb2RlXVxuKTtcbnZhciBQYXNza2V5QXV0aGVudGljYXRpb25GYWlsZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiUEFTU0tFWV9BVVRIRU5USUNBVElPTl9GQUlMRURcIixcbiAgKG1lc3NhZ2UpID0+IFtcbiAgICA0MDAsXG4gICAgbWVzc2FnZVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ubWVzc2FnZV1cbik7XG52YXIgUGVybWlzc2lvbk5vdEZvdW5kID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIlBFUk1JU1NJT05fTk9UX0ZPVU5EXCIsXG4gIChwZXJtaXNzaW9uSWQpID0+IFtcbiAgICA0MDQsXG4gICAgYFBlcm1pc3Npb24gXCIke3Blcm1pc3Npb25JZH1cIiBub3QgZm91bmQuIE1ha2Ugc3VyZSB5b3UgY3JlYXRlZCBpdCBvbiB0aGUgZGFzaGJvYXJkLmAsXG4gICAge1xuICAgICAgcGVybWlzc2lvbl9pZDogcGVybWlzc2lvbklkXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ucGVybWlzc2lvbl9pZF1cbik7XG52YXIgUGVybWlzc2lvblNjb3BlTWlzbWF0Y2ggPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiV1JPTkdfUEVSTUlTU0lPTl9TQ09QRVwiLFxuICAocGVybWlzc2lvbklkLCBleHBlY3RlZFNjb3BlLCBhY3R1YWxTY29wZSkgPT4gW1xuICAgIDQwNCxcbiAgICBgUGVybWlzc2lvbiAke0pTT04uc3RyaW5naWZ5KHBlcm1pc3Npb25JZCl9IG5vdCBmb3VuZC4gKEl0IHdhcyBmb3VuZCBmb3IgYSBkaWZmZXJlbnQgc2NvcGUgJHtKU09OLnN0cmluZ2lmeShhY3R1YWxTY29wZSl9LCBidXQgc2NvcGUgJHtKU09OLnN0cmluZ2lmeShleHBlY3RlZFNjb3BlKX0gd2FzIGV4cGVjdGVkLilgLFxuICAgIHtcbiAgICAgIHBlcm1pc3Npb25faWQ6IHBlcm1pc3Npb25JZCxcbiAgICAgIGV4cGVjdGVkX3Njb3BlOiBleHBlY3RlZFNjb3BlLFxuICAgICAgYWN0dWFsX3Njb3BlOiBhY3R1YWxTY29wZVxuICAgIH1cbiAgXSxcbiAgKGpzb24pID0+IFtqc29uLnBlcm1pc3Npb25faWQsIGpzb24uZXhwZWN0ZWRfc2NvcGUsIGpzb24uYWN0dWFsX3Njb3BlXVxuKTtcbnZhciBDb250YWluZWRQZXJtaXNzaW9uTm90Rm91bmQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiQ09OVEFJTkVEX1BFUk1JU1NJT05fTk9UX0ZPVU5EXCIsXG4gIChwZXJtaXNzaW9uSWQpID0+IFtcbiAgICA0MDAsXG4gICAgYENvbnRhaW5lZCBwZXJtaXNzaW9uIHdpdGggSUQgXCIke3Blcm1pc3Npb25JZH1cIiBub3QgZm91bmQuIE1ha2Ugc3VyZSB5b3UgY3JlYXRlZCBpdCBvbiB0aGUgZGFzaGJvYXJkLmAsXG4gICAge1xuICAgICAgcGVybWlzc2lvbl9pZDogcGVybWlzc2lvbklkXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ucGVybWlzc2lvbl9pZF1cbik7XG52YXIgVGVhbU5vdEZvdW5kID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIlRFQU1fTk9UX0ZPVU5EXCIsXG4gICh0ZWFtSWQpID0+IFtcbiAgICA0MDQsXG4gICAgYFRlYW0gJHt0ZWFtSWR9IG5vdCBmb3VuZC5gLFxuICAgIHtcbiAgICAgIHRlYW1faWQ6IHRlYW1JZFxuICAgIH1cbiAgXSxcbiAgKGpzb24pID0+IFtqc29uLnRlYW1faWRdXG4pO1xudmFyIFRlYW1BbHJlYWR5RXhpc3RzID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIlRFQU1fQUxSRUFEWV9FWElTVFNcIixcbiAgKHRlYW1JZCkgPT4gW1xuICAgIDQwOSxcbiAgICBgVGVhbSAke3RlYW1JZH0gYWxyZWFkeSBleGlzdHMuYCxcbiAgICB7XG4gICAgICB0ZWFtX2lkOiB0ZWFtSWRcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi50ZWFtX2lkXVxuKTtcbnZhciBUZWFtTWVtYmVyc2hpcE5vdEZvdW5kID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIlRFQU1fTUVNQkVSU0hJUF9OT1RfRk9VTkRcIixcbiAgKHRlYW1JZCwgdXNlcklkKSA9PiBbXG4gICAgNDA0LFxuICAgIGBVc2VyICR7dXNlcklkfSBpcyBub3QgZm91bmQgaW4gdGVhbSAke3RlYW1JZH0uYCxcbiAgICB7XG4gICAgICB0ZWFtX2lkOiB0ZWFtSWQsXG4gICAgICB1c2VyX2lkOiB1c2VySWRcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi50ZWFtX2lkLCBqc29uLnVzZXJfaWRdXG4pO1xudmFyIEVtYWlsVGVtcGxhdGVBbHJlYWR5RXhpc3RzID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIkVNQUlMX1RFTVBMQVRFX0FMUkVBRFlfRVhJU1RTXCIsXG4gICgpID0+IFtcbiAgICA0MDksXG4gICAgXCJFbWFpbCB0ZW1wbGF0ZSBhbHJlYWR5IGV4aXN0cy5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBPQXV0aENvbm5lY3Rpb25Ob3RDb25uZWN0ZWRUb1VzZXIgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiT0FVVEhfQ09OTkVDVElPTl9OT1RfQ09OTkVDVEVEX1RPX1VTRVJcIixcbiAgKCkgPT4gW1xuICAgIDQwMCxcbiAgICBcIlRoZSBPQXV0aCBjb25uZWN0aW9uIGlzIG5vdCBjb25uZWN0ZWQgdG8gYW55IHVzZXIuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgT0F1dGhDb25uZWN0aW9uQWxyZWFkeUNvbm5lY3RlZFRvQW5vdGhlclVzZXIgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiT0FVVEhfQ09OTkVDVElPTl9BTFJFQURZX0NPTk5FQ1RFRF9UT19BTk9USEVSX1VTRVJcIixcbiAgKCkgPT4gW1xuICAgIDQwOSxcbiAgICBcIlRoZSBPQXV0aCBjb25uZWN0aW9uIGlzIGFscmVhZHkgY29ubmVjdGVkIHRvIGFub3RoZXIgdXNlci5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBPQXV0aENvbm5lY3Rpb25Eb2VzTm90SGF2ZVJlcXVpcmVkU2NvcGUgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiT0FVVEhfQ09OTkVDVElPTl9ET0VTX05PVF9IQVZFX1JFUVVJUkVEX1NDT1BFXCIsXG4gICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJUaGUgT0F1dGggY29ubmVjdGlvbiBkb2VzIG5vdCBoYXZlIHRoZSByZXF1aXJlZCBzY29wZS5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBPQXV0aEV4dHJhU2NvcGVOb3RBdmFpbGFibGVXaXRoU2hhcmVkT0F1dGhLZXlzID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIk9BVVRIX0VYVFJBX1NDT1BFX05PVF9BVkFJTEFCTEVfV0lUSF9TSEFSRURfT0FVVEhfS0VZU1wiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiRXh0cmEgc2NvcGVzIGFyZSBub3QgYXZhaWxhYmxlIHdpdGggc2hhcmVkIE9BdXRoIGtleXMuIFBsZWFzZSBhZGQgeW91ciBvd24gT0F1dGgga2V5cyBvbiB0aGUgU3RhY2sgZGFzaGJvYXJkIHRvIHVzZSBleHRyYSBzY29wZXMuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgT0F1dGhBY2Nlc3NUb2tlbk5vdEF2YWlsYWJsZVdpdGhTaGFyZWRPQXV0aEtleXMgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiT0FVVEhfQUNDRVNTX1RPS0VOX05PVF9BVkFJTEFCTEVfV0lUSF9TSEFSRURfT0FVVEhfS0VZU1wiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiQWNjZXNzIHRva2VucyBhcmUgbm90IGF2YWlsYWJsZSB3aXRoIHNoYXJlZCBPQXV0aCBrZXlzLiBQbGVhc2UgYWRkIHlvdXIgb3duIE9BdXRoIGtleXMgb24gdGhlIFN0YWNrIGRhc2hib2FyZCB0byB1c2UgYWNjZXNzIHRva2Vucy5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBJbnZhbGlkT0F1dGhDbGllbnRJZE9yU2VjcmV0ID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIklOVkFMSURfT0FVVEhfQ0xJRU5UX0lEX09SX1NFQ1JFVFwiLFxuICAoY2xpZW50SWQpID0+IFtcbiAgICA0MDAsXG4gICAgXCJUaGUgT0F1dGggY2xpZW50IElEIG9yIHNlY3JldCBpcyBpbnZhbGlkLiBUaGUgY2xpZW50IElEIG11c3QgYmUgZXF1YWwgdG8gdGhlIHByb2plY3QgSUQgKHBvdGVudGlhbGx5IHdpdGggYSBoYXNoIGFuZCBhIGJyYW5jaCBJRCksIGFuZCB0aGUgY2xpZW50IHNlY3JldCBtdXN0IGJlIGEgcHVibGlzaGFibGUgY2xpZW50IGtleS5cIixcbiAgICB7XG4gICAgICBjbGllbnRfaWQ6IGNsaWVudElkID8/IG51bGxcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi5jbGllbnRfaWQgPz8gdm9pZCAwXVxuKTtcbnZhciBJbnZhbGlkU2NvcGUgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiSU5WQUxJRF9TQ09QRVwiLFxuICAoc2NvcGUpID0+IFtcbiAgICA0MDAsXG4gICAgYFRoZSBzY29wZSBcIiR7c2NvcGV9XCIgaXMgbm90IGEgdmFsaWQgT0F1dGggc2NvcGUgZm9yIFN0YWNrLmBcbiAgXSxcbiAgKGpzb24pID0+IFtqc29uLnNjb3BlXVxuKTtcbnZhciBVc2VyQWxyZWFkeUNvbm5lY3RlZFRvQW5vdGhlck9BdXRoQ29ubmVjdGlvbiA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJVU0VSX0FMUkVBRFlfQ09OTkVDVEVEX1RPX0FOT1RIRVJfT0FVVEhfQ09OTkVDVElPTlwiLFxuICAoKSA9PiBbXG4gICAgNDA5LFxuICAgIFwiVGhlIHVzZXIgaXMgYWxyZWFkeSBjb25uZWN0ZWQgdG8gYW5vdGhlciBPQXV0aCBhY2NvdW50LiBEaWQgeW91IG1heWJlIHNlbGVjdGVkIHRoZSB3cm9uZyBhY2NvdW50P1wiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIE91dGVyT0F1dGhUaW1lb3V0ID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIk9VVEVSX09BVVRIX1RJTUVPVVRcIixcbiAgKCkgPT4gW1xuICAgIDQwOCxcbiAgICBcIlRoZSBPQXV0aCBmbG93IGhhcyB0aW1lZCBvdXQuIFBsZWFzZSBzaWduIGluIGFnYWluLlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIE9BdXRoUHJvdmlkZXJOb3RGb3VuZE9yTm90RW5hYmxlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJPQVVUSF9QUk9WSURFUl9OT1RfRk9VTkRfT1JfTk9UX0VOQUJMRURcIixcbiAgKCkgPT4gW1xuICAgIDQwMCxcbiAgICBcIlRoZSBPQXV0aCBwcm92aWRlciBpcyBub3QgZm91bmQgb3Igbm90IGVuYWJsZWQuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgT0F1dGhQcm92aWRlckFjY291bnRJZEFscmVhZHlVc2VkRm9yU2lnbkluID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIk9BVVRIX1BST1ZJREVSX0FDQ09VTlRfSURfQUxSRUFEWV9VU0VEX0ZPUl9TSUdOX0lOXCIsXG4gICgpID0+IFtcbiAgICA0MDAsXG4gICAgYEEgcHJvdmlkZXIgd2l0aCB0aGUgc2FtZSBhY2NvdW50IElEIGlzIGFscmVhZHkgdXNlZCBmb3Igc2lnbmluZyBpbi5gXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIE11bHRpRmFjdG9yQXV0aGVudGljYXRpb25SZXF1aXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJNVUxUSV9GQUNUT1JfQVVUSEVOVElDQVRJT05fUkVRVUlSRURcIixcbiAgKGF0dGVtcHRDb2RlKSA9PiBbXG4gICAgNDAwLFxuICAgIGBNdWx0aS1mYWN0b3IgYXV0aGVudGljYXRpb24gaXMgcmVxdWlyZWQgZm9yIHRoaXMgdXNlci5gLFxuICAgIHtcbiAgICAgIGF0dGVtcHRfY29kZTogYXR0ZW1wdENvZGVcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi5hdHRlbXB0X2NvZGVdXG4pO1xudmFyIEludmFsaWRUb3RwQ29kZSA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJJTlZBTElEX1RPVFBfQ09ERVwiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIFRPVFAgY29kZSBpcyBpbnZhbGlkLiBQbGVhc2UgdHJ5IGFnYWluLlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIFVzZXJBdXRoZW50aWNhdGlvblJlcXVpcmVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIlVTRVJfQVVUSEVOVElDQVRJT05fUkVRVUlSRURcIixcbiAgKCkgPT4gW1xuICAgIDQwMSxcbiAgICBcIlVzZXIgYXV0aGVudGljYXRpb24gcmVxdWlyZWQgZm9yIHRoaXMgZW5kcG9pbnQuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgVGVhbU1lbWJlcnNoaXBBbHJlYWR5RXhpc3RzID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIlRFQU1fTUVNQkVSU0hJUF9BTFJFQURZX0VYSVNUU1wiLFxuICAoKSA9PiBbXG4gICAgNDA5LFxuICAgIFwiVGVhbSBtZW1iZXJzaGlwIGFscmVhZHkgZXhpc3RzLlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIFByb2plY3RQZXJtaXNzaW9uUmVxdWlyZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiUFJPSkVDVF9QRVJNSVNTSU9OX1JFUVVJUkVEXCIsXG4gICh1c2VySWQsIHBlcm1pc3Npb25JZCkgPT4gW1xuICAgIDQwMSxcbiAgICBgVXNlciAke3VzZXJJZH0gZG9lcyBub3QgaGF2ZSBwZXJtaXNzaW9uICR7cGVybWlzc2lvbklkfS5gLFxuICAgIHtcbiAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgIHBlcm1pc3Npb25faWQ6IHBlcm1pc3Npb25JZFxuICAgIH1cbiAgXSxcbiAgKGpzb24pID0+IFtqc29uLnVzZXJfaWQsIGpzb24ucGVybWlzc2lvbl9pZF1cbik7XG52YXIgVGVhbVBlcm1pc3Npb25SZXF1aXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJURUFNX1BFUk1JU1NJT05fUkVRVUlSRURcIixcbiAgKHRlYW1JZCwgdXNlcklkLCBwZXJtaXNzaW9uSWQpID0+IFtcbiAgICA0MDEsXG4gICAgYFVzZXIgJHt1c2VySWR9IGRvZXMgbm90IGhhdmUgcGVybWlzc2lvbiAke3Blcm1pc3Npb25JZH0gaW4gdGVhbSAke3RlYW1JZH0uYCxcbiAgICB7XG4gICAgICB0ZWFtX2lkOiB0ZWFtSWQsXG4gICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICBwZXJtaXNzaW9uX2lkOiBwZXJtaXNzaW9uSWRcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi50ZWFtX2lkLCBqc29uLnVzZXJfaWQsIGpzb24ucGVybWlzc2lvbl9pZF1cbik7XG52YXIgVGVhbVBlcm1pc3Npb25Ob3RGb3VuZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJURUFNX1BFUk1JU1NJT05fTk9UX0ZPVU5EXCIsXG4gICh0ZWFtSWQsIHVzZXJJZCwgcGVybWlzc2lvbklkKSA9PiBbXG4gICAgNDAxLFxuICAgIGBVc2VyICR7dXNlcklkfSBkb2VzIG5vdCBoYXZlIHBlcm1pc3Npb24gJHtwZXJtaXNzaW9uSWR9IGluIHRlYW0gJHt0ZWFtSWR9LmAsXG4gICAge1xuICAgICAgdGVhbV9pZDogdGVhbUlkLFxuICAgICAgdXNlcl9pZDogdXNlcklkLFxuICAgICAgcGVybWlzc2lvbl9pZDogcGVybWlzc2lvbklkXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24udGVhbV9pZCwganNvbi51c2VyX2lkLCBqc29uLnBlcm1pc3Npb25faWRdXG4pO1xudmFyIEludmFsaWRTaGFyZWRPQXV0aFByb3ZpZGVySWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiSU5WQUxJRF9TSEFSRURfT0FVVEhfUFJPVklERVJfSURcIixcbiAgKHByb3ZpZGVySWQpID0+IFtcbiAgICA0MDAsXG4gICAgYFRoZSBzaGFyZWQgT0F1dGggcHJvdmlkZXIgd2l0aCBJRCAke3Byb3ZpZGVySWR9IGlzIG5vdCB2YWxpZC5gLFxuICAgIHtcbiAgICAgIHByb3ZpZGVyX2lkOiBwcm92aWRlcklkXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ucHJvdmlkZXJfaWRdXG4pO1xudmFyIEludmFsaWRTdGFuZGFyZE9BdXRoUHJvdmlkZXJJZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJJTlZBTElEX1NUQU5EQVJEX09BVVRIX1BST1ZJREVSX0lEXCIsXG4gIChwcm92aWRlcklkKSA9PiBbXG4gICAgNDAwLFxuICAgIGBUaGUgc3RhbmRhcmQgT0F1dGggcHJvdmlkZXIgd2l0aCBJRCAke3Byb3ZpZGVySWR9IGlzIG5vdCB2YWxpZC5gLFxuICAgIHtcbiAgICAgIHByb3ZpZGVyX2lkOiBwcm92aWRlcklkXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ucHJvdmlkZXJfaWRdXG4pO1xudmFyIEludmFsaWRBdXRob3JpemF0aW9uQ29kZSA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJJTlZBTElEX0FVVEhPUklaQVRJT05fQ09ERVwiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIGdpdmVuIGF1dGhvcml6YXRpb24gY29kZSBpcyBpbnZhbGlkLlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIE9BdXRoUHJvdmlkZXJBY2Nlc3NEZW5pZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiT0FVVEhfUFJPVklERVJfQUNDRVNTX0RFTklFRFwiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIE9BdXRoIHByb3ZpZGVyIGRlbmllZCBhY2Nlc3MgdG8gdGhlIHVzZXIuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgQ29udGFjdENoYW5uZWxBbHJlYWR5VXNlZEZvckF1dGhCeVNvbWVvbmVFbHNlID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIkNPTlRBQ1RfQ0hBTk5FTF9BTFJFQURZX1VTRURfRk9SX0FVVEhfQllfU09NRU9ORV9FTFNFXCIsXG4gICh0eXBlLCBjb250YWN0Q2hhbm5lbFZhbHVlLCB3b3VsZFdvcmtJZkVtYWlsV2FzVmVyaWZpZWQgPSBmYWxzZSkgPT4gW1xuICAgIDQwOSxcbiAgICBgVGhpcyAke3R5cGV9ICR7Y29udGFjdENoYW5uZWxWYWx1ZSA/IGBcIigke2NvbnRhY3RDaGFubmVsVmFsdWV9KVwiYCA6IFwiXCJ9IGlzIGFscmVhZHkgdXNlZCBmb3IgYXV0aGVudGljYXRpb24gYnkgYW5vdGhlciBhY2NvdW50JHt3b3VsZFdvcmtJZkVtYWlsV2FzVmVyaWZpZWQgPyBcIiBidXQgdGhlIGVtYWlsIGlzIG5vdCB2ZXJpZmllZC4gUGxlYXNlIGxvZ2luIHRvIHlvdXIgZXhpc3RpbmcgYWNjb3VudCB3aXRoIHRoZSBtZXRob2QgeW91IHVzZWQgdG8gc2lnbiB1cCwgYW5kIHRoZW4gdmVyaWZ5IHlvdXIgZW1haWwgdG8gc2lnbiBpbiB3aXRoIHRoaXMgbG9naW4gbWV0aG9kLlwiIDogXCIuXCJ9YCxcbiAgICB7XG4gICAgICB0eXBlLFxuICAgICAgY29udGFjdF9jaGFubmVsX3ZhbHVlOiBjb250YWN0Q2hhbm5lbFZhbHVlID8/IG51bGwsXG4gICAgICB3b3VsZF93b3JrX2lmX2VtYWlsX3dhc192ZXJpZmllZDogd291bGRXb3JrSWZFbWFpbFdhc1ZlcmlmaWVkXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24udHlwZSwganNvbi5jb250YWN0X2NoYW5uZWxfdmFsdWUsIGpzb24ud291bGRfd29ya19pZl9lbWFpbF93YXNfdmVyaWZpZWQgPz8gZmFsc2VdXG4pO1xudmFyIEludmFsaWRQb2xsaW5nQ29kZUVycm9yID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIklOVkFMSURfUE9MTElOR19DT0RFXCIsXG4gIChkZXRhaWxzKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIHBvbGxpbmcgY29kZSBpcyBpbnZhbGlkIG9yIGRvZXMgbm90IGV4aXN0LlwiLFxuICAgIGRldGFpbHNcbiAgXSxcbiAgKGpzb24pID0+IFtqc29uXVxuKTtcbnZhciBDbGlBdXRoRXJyb3IgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiQ0xJX0FVVEhfRVJST1JcIixcbiAgKG1lc3NhZ2UpID0+IFtcbiAgICA0MDAsXG4gICAgbWVzc2FnZVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ubWVzc2FnZV1cbik7XG52YXIgQ2xpQXV0aEV4cGlyZWRFcnJvciA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJDTElfQVVUSF9FWFBJUkVEX0VSUk9SXCIsXG4gIChtZXNzYWdlID0gXCJDTEkgYXV0aGVudGljYXRpb24gcmVxdWVzdCBleHBpcmVkLiBQbGVhc2UgdHJ5IGFnYWluLlwiKSA9PiBbXG4gICAgNDAwLFxuICAgIG1lc3NhZ2VcbiAgXSxcbiAgKGpzb24pID0+IFtqc29uLm1lc3NhZ2VdXG4pO1xudmFyIENsaUF1dGhVc2VkRXJyb3IgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiQ0xJX0FVVEhfVVNFRF9FUlJPUlwiLFxuICAobWVzc2FnZSA9IFwiVGhpcyBhdXRoZW50aWNhdGlvbiB0b2tlbiBoYXMgYWxyZWFkeSBiZWVuIHVzZWQuXCIpID0+IFtcbiAgICA0MDAsXG4gICAgbWVzc2FnZVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ubWVzc2FnZV1cbik7XG52YXIgQXBpS2V5Tm90VmFsaWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiQVBJX0tFWV9OT1RfVkFMSURcIixcbiAgXCJpbmhlcml0XCIsXG4gIFwiaW5oZXJpdFwiXG4pO1xudmFyIEFwaUtleUV4cGlyZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEFwaUtleU5vdFZhbGlkLFxuICBcIkFQSV9LRVlfRVhQSVJFRFwiLFxuICAoKSA9PiBbXG4gICAgNDAxLFxuICAgIFwiQVBJIGtleSBoYXMgZXhwaXJlZC5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBBcGlLZXlSZXZva2VkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBBcGlLZXlOb3RWYWxpZCxcbiAgXCJBUElfS0VZX1JFVk9LRURcIixcbiAgKCkgPT4gW1xuICAgIDQwMSxcbiAgICBcIkFQSSBrZXkgaGFzIGJlZW4gcmV2b2tlZC5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBXcm9uZ0FwaUtleVR5cGUgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEFwaUtleU5vdFZhbGlkLFxuICBcIldST05HX0FQSV9LRVlfVFlQRVwiLFxuICAoZXhwZWN0ZWRUeXBlLCBhY3R1YWxUeXBlKSA9PiBbXG4gICAgNDAwLFxuICAgIGBUaGlzIGVuZHBvaW50IGlzIGZvciAke2V4cGVjdGVkVHlwZX0gQVBJIGtleXMsIGJ1dCBhICR7YWN0dWFsVHlwZX0gQVBJIGtleSB3YXMgcHJvdmlkZWQuYCxcbiAgICB7IGV4cGVjdGVkX3R5cGU6IGV4cGVjdGVkVHlwZSwgYWN0dWFsX3R5cGU6IGFjdHVhbFR5cGUgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24uZXhwZWN0ZWRfdHlwZSwganNvbi5hY3R1YWxfdHlwZV1cbik7XG52YXIgQXBpS2V5Tm90Rm91bmQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEFwaUtleU5vdFZhbGlkLFxuICBcIkFQSV9LRVlfTk9UX0ZPVU5EXCIsXG4gICgpID0+IFtcbiAgICA0MDQsXG4gICAgXCJBUEkga2V5IG5vdCBmb3VuZC5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBQdWJsaWNBcGlLZXlDYW5ub3RCZVJldm9rZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEFwaUtleU5vdFZhbGlkLFxuICBcIlBVQkxJQ19BUElfS0VZX0NBTk5PVF9CRV9SRVZPS0VEXCIsXG4gICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJQdWJsaWMgQVBJIGtleXMgY2Fubm90IGJlIHJldm9rZWQgYnkgdGhlIHNlY3JldHNjYW5uZXIgZW5kcG9pbnQuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgUGVybWlzc2lvbklkQWxyZWFkeUV4aXN0cyA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJQRVJNSVNTSU9OX0lEX0FMUkVBRFlfRVhJU1RTXCIsXG4gIChwZXJtaXNzaW9uSWQpID0+IFtcbiAgICA0MDAsXG4gICAgYFBlcm1pc3Npb24gd2l0aCBJRCBcIiR7cGVybWlzc2lvbklkfVwiIGFscmVhZHkgZXhpc3RzLiBDaG9vc2UgYSBkaWZmZXJlbnQgSUQuYCxcbiAgICB7XG4gICAgICBwZXJtaXNzaW9uX2lkOiBwZXJtaXNzaW9uSWRcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi5wZXJtaXNzaW9uX2lkXVxuKTtcbnZhciBFbWFpbFJlbmRlcmluZ0Vycm9yID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIkVNQUlMX1JFTkRFUklOR19FUlJPUlwiLFxuICAoZXJyb3IpID0+IFtcbiAgICA0MDAsXG4gICAgYEZhaWxlZCB0byByZW5kZXIgZW1haWwgd2l0aCB0aGVtZTogJHtlcnJvcn1gLFxuICAgIHsgZXJyb3IgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24uZXJyb3JdXG4pO1xudmFyIFJlcXVpcmVzQ3VzdG9tRW1haWxTZXJ2ZXIgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiUkVRVUlSRVNfQ1VTVE9NX0VNQUlMX1NFUlZFUlwiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIGBUaGlzIGFjdGlvbiByZXF1aXJlcyBhIGN1c3RvbSBTTVRQIHNlcnZlci4gUGxlYXNlIGVkaXQgeW91ciBlbWFpbCBzZXJ2ZXIgY29uZmlndXJhdGlvbiBhbmQgdHJ5IGFnYWluLmBcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgSXRlbU5vdEZvdW5kID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIklURU1fTk9UX0ZPVU5EXCIsXG4gIChpdGVtSWQpID0+IFtcbiAgICA0MDQsXG4gICAgYEl0ZW0gd2l0aCBJRCBcIiR7aXRlbUlkfVwiIG5vdCBmb3VuZC5gLFxuICAgIHtcbiAgICAgIGl0ZW1faWQ6IGl0ZW1JZFxuICAgIH1cbiAgXSxcbiAgKGpzb24pID0+IFtqc29uLml0ZW1faWRdXG4pO1xudmFyIEl0ZW1DdXN0b21lclR5cGVEb2VzTm90TWF0Y2ggPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiSVRFTV9DVVNUT01FUl9UWVBFX0RPRVNfTk9UX01BVENIXCIsXG4gIChpdGVtSWQsIGN1c3RvbWVySWQsIGl0ZW1DdXN0b21lclR5cGUsIGFjdHVhbEN1c3RvbWVyVHlwZSkgPT4gW1xuICAgIDQwMCxcbiAgICBgVGhlICR7YWN0dWFsQ3VzdG9tZXJUeXBlfSB3aXRoIElEICR7SlNPTi5zdHJpbmdpZnkoY3VzdG9tZXJJZCl9IGlzIG5vdCBhIHZhbGlkIGN1c3RvbWVyIGZvciB0aGUgaXRlbSB3aXRoIElEICR7SlNPTi5zdHJpbmdpZnkoaXRlbUlkKX0uICR7aXRlbUN1c3RvbWVyVHlwZSA/IGBUaGUgaXRlbSBpcyBjb25maWd1cmVkIHRvIG9ubHkgYmUgYXZhaWxhYmxlIGZvciAke2l0ZW1DdXN0b21lclR5cGV9IGN1c3RvbWVycywgYnV0IHRoZSBjdXN0b21lciBpcyBhICR7YWN0dWFsQ3VzdG9tZXJUeXBlfS5gIDogYFRoZSBpdGVtIGlzIG1pc3NpbmcgYSBjdXN0b21lciB0eXBlIGZpZWxkLiBQbGVhc2UgbWFrZSBzdXJlIGl0IGlzIHNldCB1cCBjb3JyZWN0bHkgaW4geW91ciBwcm9qZWN0IGNvbmZpZ3VyYXRpb24uYH1gLFxuICAgIHtcbiAgICAgIGl0ZW1faWQ6IGl0ZW1JZCxcbiAgICAgIGN1c3RvbWVyX2lkOiBjdXN0b21lcklkLFxuICAgICAgaXRlbV9jdXN0b21lcl90eXBlOiBpdGVtQ3VzdG9tZXJUeXBlID8/IG51bGwsXG4gICAgICBhY3R1YWxfY3VzdG9tZXJfdHlwZTogYWN0dWFsQ3VzdG9tZXJUeXBlXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24uaXRlbV9pZCwganNvbi5jdXN0b21lcl9pZCwganNvbi5pdGVtX2N1c3RvbWVyX3R5cGUgPz8gdm9pZCAwLCBqc29uLmFjdHVhbF9jdXN0b21lcl90eXBlXVxuKTtcbnZhciBDdXN0b21lckRvZXNOb3RFeGlzdCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJDVVNUT01FUl9ET0VTX05PVF9FWElTVFwiLFxuICAoY3VzdG9tZXJJZCkgPT4gW1xuICAgIDQwMCxcbiAgICBgQ3VzdG9tZXIgd2l0aCBJRCAke0pTT04uc3RyaW5naWZ5KGN1c3RvbWVySWQpfSBkb2VzIG5vdCBleGlzdC5gLFxuICAgIHtcbiAgICAgIGN1c3RvbWVyX2lkOiBjdXN0b21lcklkXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24uY3VzdG9tZXJfaWRdXG4pO1xudmFyIE9mZmVyRG9lc05vdEV4aXN0ID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIk9GRkVSX0RPRVNfTk9UX0VYSVNUXCIsXG4gIChvZmZlcklkLCBhY2Nlc3NUeXBlKSA9PiBbXG4gICAgNDAwLFxuICAgIGBPZmZlciB3aXRoIElEICR7SlNPTi5zdHJpbmdpZnkob2ZmZXJJZCl9IGRvZXMgbm90IGV4aXN0JHthY2Nlc3NUeXBlID09PSBcImNsaWVudFwiID8gXCIgb3IgeW91IGRvbid0IGhhdmUgcGVybWlzc2lvbnMgdG8gYWNjZXNzIGl0LlwiIDogXCIuXCJ9YCxcbiAgICB7XG4gICAgICBvZmZlcl9pZDogb2ZmZXJJZCxcbiAgICAgIGFjY2Vzc190eXBlOiBhY2Nlc3NUeXBlXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ub2ZmZXJfaWQsIGpzb24uYWNjZXNzX3R5cGVdXG4pO1xudmFyIE9mZmVyQ3VzdG9tZXJUeXBlRG9lc05vdE1hdGNoID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIk9GRkVSX0NVU1RPTUVSX1RZUEVfRE9FU19OT1RfTUFUQ0hcIixcbiAgKG9mZmVySWQsIGN1c3RvbWVySWQsIG9mZmVyQ3VzdG9tZXJUeXBlLCBhY3R1YWxDdXN0b21lclR5cGUpID0+IFtcbiAgICA0MDAsXG4gICAgYFRoZSAke2FjdHVhbEN1c3RvbWVyVHlwZX0gd2l0aCBJRCAke0pTT04uc3RyaW5naWZ5KGN1c3RvbWVySWQpfSBpcyBub3QgYSB2YWxpZCBjdXN0b21lciBmb3IgdGhlIGlubGluZSBvZmZlciB0aGF0IGhhcyBiZWVuIHBhc3NlZCBpbi4gJHtvZmZlckN1c3RvbWVyVHlwZSA/IGBUaGUgb2ZmZXIgaXMgY29uZmlndXJlZCB0byBvbmx5IGJlIGF2YWlsYWJsZSBmb3IgJHtvZmZlckN1c3RvbWVyVHlwZX0gY3VzdG9tZXJzLCBidXQgdGhlIGN1c3RvbWVyIGlzIGEgJHthY3R1YWxDdXN0b21lclR5cGV9LmAgOiBgVGhlIG9mZmVyIGlzIG1pc3NpbmcgYSBjdXN0b21lciB0eXBlIGZpZWxkLiBQbGVhc2UgbWFrZSBzdXJlIGl0IGlzIHNldCB1cCBjb3JyZWN0bHkgaW4geW91ciBwcm9qZWN0IGNvbmZpZ3VyYXRpb24uYH1gLFxuICAgIHtcbiAgICAgIG9mZmVyX2lkOiBvZmZlcklkID8/IG51bGwsXG4gICAgICBjdXN0b21lcl9pZDogY3VzdG9tZXJJZCxcbiAgICAgIG9mZmVyX2N1c3RvbWVyX3R5cGU6IG9mZmVyQ3VzdG9tZXJUeXBlID8/IG51bGwsXG4gICAgICBhY3R1YWxfY3VzdG9tZXJfdHlwZTogYWN0dWFsQ3VzdG9tZXJUeXBlXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ub2ZmZXJfaWQgPz8gdm9pZCAwLCBqc29uLmN1c3RvbWVyX2lkLCBqc29uLm9mZmVyX2N1c3RvbWVyX3R5cGUgPz8gdm9pZCAwLCBqc29uLmFjdHVhbF9jdXN0b21lcl90eXBlXVxuKTtcbnZhciBJdGVtUXVhbnRpdHlJbnN1ZmZpY2llbnRBbW91bnQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiSVRFTV9RVUFOVElUWV9JTlNVRkZJQ0lFTlRfQU1PVU5UXCIsXG4gIChpdGVtSWQsIGN1c3RvbWVySWQsIHF1YW50aXR5KSA9PiBbXG4gICAgNDAwLFxuICAgIGBUaGUgaXRlbSB3aXRoIElEICR7SlNPTi5zdHJpbmdpZnkoaXRlbUlkKX0gaGFzIGFuIGluc3VmZmljaWVudCBxdWFudGl0eSBmb3IgdGhlIGN1c3RvbWVyIHdpdGggSUQgJHtKU09OLnN0cmluZ2lmeShjdXN0b21lcklkKX0uIEFuIGF0dGVtcHQgd2FzIG1hZGUgdG8gY2hhcmdlICR7cXVhbnRpdHl9IGNyZWRpdHMuYCxcbiAgICB7XG4gICAgICBpdGVtX2lkOiBpdGVtSWQsXG4gICAgICBjdXN0b21lcl9pZDogY3VzdG9tZXJJZCxcbiAgICAgIHF1YW50aXR5XG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24uaXRlbV9pZCwganNvbi5jdXN0b21lcl9pZCwganNvbi5xdWFudGl0eV1cbik7XG52YXIgU3RyaXBlQWNjb3VudEluZm9Ob3RGb3VuZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJTVFJJUEVfQUNDT1VOVF9JTkZPX05PVF9GT1VORFwiLFxuICAoKSA9PiBbXG4gICAgNDA0LFxuICAgIFwiU3RyaXBlIGFjY291bnQgaW5mb3JtYXRpb24gbm90IGZvdW5kLiBQbGVhc2UgbWFrZSBzdXJlIHRoZSB1c2VyIGhhcyBvbmJvYXJkZWQgd2l0aCBTdHJpcGUuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgV29ya2Zsb3dUb2tlbkRvZXNOb3RFeGlzdCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJXT1JLRkxPV19UT0tFTl9ET0VTX05PVF9FWElTVFwiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIHdvcmtmbG93IHRva2VuIHlvdSBzcGVjaWZpZWQgZG9lcyBub3QgZXhpc3QuIE1ha2Ugc3VyZSB0aGUgdmFsdWUgaW4geC1zdGFjay13b3JrZmxvdy10b2tlbiBpcyBjb3JyZWN0LlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIFdvcmtmbG93VG9rZW5FeHBpcmVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIldPUktGTE9XX1RPS0VOX0VYUElSRURcIixcbiAgKCkgPT4gW1xuICAgIDQwMCxcbiAgICBcIlRoZSB3b3JrZmxvdyB0b2tlbiB5b3Ugc3BlY2lmaWVkIGhhcyBleHBpcmVkLiBNYWtlIHN1cmUgdGhlIHZhbHVlIGluIHgtc3RhY2std29ya2Zsb3ctdG9rZW4gaXMgY29ycmVjdC5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBLbm93bkVycm9ycyA9IHtcbiAgQ2Fubm90RGVsZXRlQ3VycmVudFNlc3Npb24sXG4gIFVuc3VwcG9ydGVkRXJyb3IsXG4gIEJvZHlQYXJzaW5nRXJyb3IsXG4gIFNjaGVtYUVycm9yLFxuICBBbGxPdmVybG9hZHNGYWlsZWQsXG4gIFByb2plY3RBdXRoZW50aWNhdGlvbkVycm9yLFxuICBQZXJtaXNzaW9uSWRBbHJlYWR5RXhpc3RzLFxuICBDbGlBdXRoRXJyb3IsXG4gIENsaUF1dGhFeHBpcmVkRXJyb3IsXG4gIENsaUF1dGhVc2VkRXJyb3IsXG4gIEludmFsaWRQcm9qZWN0QXV0aGVudGljYXRpb24sXG4gIFByb2plY3RLZXlXaXRob3V0QWNjZXNzVHlwZSxcbiAgSW52YWxpZEFjY2Vzc1R5cGUsXG4gIEFjY2Vzc1R5cGVXaXRob3V0UHJvamVjdElkLFxuICBBY2Nlc3NUeXBlUmVxdWlyZWQsXG4gIENhbm5vdEdldE93blVzZXJXaXRob3V0VXNlcixcbiAgSW5zdWZmaWNpZW50QWNjZXNzVHlwZSxcbiAgSW52YWxpZFB1Ymxpc2hhYmxlQ2xpZW50S2V5LFxuICBJbnZhbGlkU2VjcmV0U2VydmVyS2V5LFxuICBJbnZhbGlkU3VwZXJTZWNyZXRBZG1pbktleSxcbiAgSW52YWxpZEFkbWluQWNjZXNzVG9rZW4sXG4gIFVucGFyc2FibGVBZG1pbkFjY2Vzc1Rva2VuLFxuICBBZG1pbkFjY2Vzc1Rva2VuRXhwaXJlZCxcbiAgSW52YWxpZFByb2plY3RGb3JBZG1pbkFjY2Vzc1Rva2VuLFxuICBBZG1pbkFjY2Vzc1Rva2VuSXNOb3RBZG1pbixcbiAgUHJvamVjdEF1dGhlbnRpY2F0aW9uUmVxdWlyZWQsXG4gIENsaWVudEF1dGhlbnRpY2F0aW9uUmVxdWlyZWQsXG4gIFNlcnZlckF1dGhlbnRpY2F0aW9uUmVxdWlyZWQsXG4gIENsaWVudE9yU2VydmVyQXV0aGVudGljYXRpb25SZXF1aXJlZCxcbiAgQ2xpZW50T3JBZG1pbkF1dGhlbnRpY2F0aW9uUmVxdWlyZWQsXG4gIENsaWVudE9yU2VydmVyT3JBZG1pbkF1dGhlbnRpY2F0aW9uUmVxdWlyZWQsXG4gIEFkbWluQXV0aGVudGljYXRpb25SZXF1aXJlZCxcbiAgRXhwZWN0ZWRJbnRlcm5hbFByb2plY3QsXG4gIFNlc3Npb25BdXRoZW50aWNhdGlvbkVycm9yLFxuICBJbnZhbGlkU2Vzc2lvbkF1dGhlbnRpY2F0aW9uLFxuICBJbnZhbGlkQWNjZXNzVG9rZW4sXG4gIFVucGFyc2FibGVBY2Nlc3NUb2tlbixcbiAgQWNjZXNzVG9rZW5FeHBpcmVkLFxuICBJbnZhbGlkUHJvamVjdEZvckFjY2Vzc1Rva2VuLFxuICBSZWZyZXNoVG9rZW5FcnJvcixcbiAgUHJvdmlkZXJSZWplY3RlZCxcbiAgUmVmcmVzaFRva2VuTm90Rm91bmRPckV4cGlyZWQsXG4gIFVzZXJXaXRoRW1haWxBbHJlYWR5RXhpc3RzLFxuICBFbWFpbE5vdFZlcmlmaWVkLFxuICBVc2VySWREb2VzTm90RXhpc3QsXG4gIFVzZXJOb3RGb3VuZCxcbiAgQXBpS2V5Tm90Rm91bmQsXG4gIFB1YmxpY0FwaUtleUNhbm5vdEJlUmV2b2tlZCxcbiAgUHJvamVjdE5vdEZvdW5kLFxuICBDdXJyZW50UHJvamVjdE5vdEZvdW5kLFxuICBCcmFuY2hEb2VzTm90RXhpc3QsXG4gIFNpZ25VcE5vdEVuYWJsZWQsXG4gIFBhc3N3b3JkQXV0aGVudGljYXRpb25Ob3RFbmFibGVkLFxuICBQYXNza2V5QXV0aGVudGljYXRpb25Ob3RFbmFibGVkLFxuICBBbm9ueW1vdXNBY2NvdW50c05vdEVuYWJsZWQsXG4gIEFub255bW91c0F1dGhlbnRpY2F0aW9uTm90QWxsb3dlZCxcbiAgRW1haWxQYXNzd29yZE1pc21hdGNoLFxuICBSZWRpcmVjdFVybE5vdFdoaXRlbGlzdGVkLFxuICBQYXNzd29yZFJlcXVpcmVtZW50c05vdE1ldCxcbiAgUGFzc3dvcmRUb29TaG9ydCxcbiAgUGFzc3dvcmRUb29Mb25nLFxuICBVc2VyRG9lc05vdEhhdmVQYXNzd29yZCxcbiAgVmVyaWZpY2F0aW9uQ29kZUVycm9yLFxuICBWZXJpZmljYXRpb25Db2RlTm90Rm91bmQsXG4gIFZlcmlmaWNhdGlvbkNvZGVFeHBpcmVkLFxuICBWZXJpZmljYXRpb25Db2RlQWxyZWFkeVVzZWQsXG4gIFZlcmlmaWNhdGlvbkNvZGVNYXhBdHRlbXB0c1JlYWNoZWQsXG4gIFBhc3N3b3JkQ29uZmlybWF0aW9uTWlzbWF0Y2gsXG4gIEVtYWlsQWxyZWFkeVZlcmlmaWVkLFxuICBFbWFpbE5vdEFzc29jaWF0ZWRXaXRoVXNlcixcbiAgRW1haWxJc05vdFByaW1hcnlFbWFpbCxcbiAgUGFzc2tleVJlZ2lzdHJhdGlvbkZhaWxlZCxcbiAgUGFzc2tleVdlYkF1dGhuRXJyb3IsXG4gIFBhc3NrZXlBdXRoZW50aWNhdGlvbkZhaWxlZCxcbiAgUGVybWlzc2lvbk5vdEZvdW5kLFxuICBQZXJtaXNzaW9uU2NvcGVNaXNtYXRjaCxcbiAgQ29udGFpbmVkUGVybWlzc2lvbk5vdEZvdW5kLFxuICBUZWFtTm90Rm91bmQsXG4gIFRlYW1NZW1iZXJzaGlwTm90Rm91bmQsXG4gIEVtYWlsVGVtcGxhdGVBbHJlYWR5RXhpc3RzLFxuICBPQXV0aENvbm5lY3Rpb25Ob3RDb25uZWN0ZWRUb1VzZXIsXG4gIE9BdXRoQ29ubmVjdGlvbkFscmVhZHlDb25uZWN0ZWRUb0Fub3RoZXJVc2VyLFxuICBPQXV0aENvbm5lY3Rpb25Eb2VzTm90SGF2ZVJlcXVpcmVkU2NvcGUsXG4gIE9BdXRoRXh0cmFTY29wZU5vdEF2YWlsYWJsZVdpdGhTaGFyZWRPQXV0aEtleXMsXG4gIE9BdXRoQWNjZXNzVG9rZW5Ob3RBdmFpbGFibGVXaXRoU2hhcmVkT0F1dGhLZXlzLFxuICBJbnZhbGlkT0F1dGhDbGllbnRJZE9yU2VjcmV0LFxuICBJbnZhbGlkU2NvcGUsXG4gIFVzZXJBbHJlYWR5Q29ubmVjdGVkVG9Bbm90aGVyT0F1dGhDb25uZWN0aW9uLFxuICBPdXRlck9BdXRoVGltZW91dCxcbiAgT0F1dGhQcm92aWRlck5vdEZvdW5kT3JOb3RFbmFibGVkLFxuICBPQXV0aFByb3ZpZGVyQWNjb3VudElkQWxyZWFkeVVzZWRGb3JTaWduSW4sXG4gIE11bHRpRmFjdG9yQXV0aGVudGljYXRpb25SZXF1aXJlZCxcbiAgSW52YWxpZFRvdHBDb2RlLFxuICBVc2VyQXV0aGVudGljYXRpb25SZXF1aXJlZCxcbiAgVGVhbU1lbWJlcnNoaXBBbHJlYWR5RXhpc3RzLFxuICBQcm9qZWN0UGVybWlzc2lvblJlcXVpcmVkLFxuICBUZWFtUGVybWlzc2lvblJlcXVpcmVkLFxuICBJbnZhbGlkU2hhcmVkT0F1dGhQcm92aWRlcklkLFxuICBJbnZhbGlkU3RhbmRhcmRPQXV0aFByb3ZpZGVySWQsXG4gIEludmFsaWRBdXRob3JpemF0aW9uQ29kZSxcbiAgVGVhbVBlcm1pc3Npb25Ob3RGb3VuZCxcbiAgT0F1dGhQcm92aWRlckFjY2Vzc0RlbmllZCxcbiAgQ29udGFjdENoYW5uZWxBbHJlYWR5VXNlZEZvckF1dGhCeVNvbWVvbmVFbHNlLFxuICBJbnZhbGlkUG9sbGluZ0NvZGVFcnJvcixcbiAgQXBpS2V5Tm90VmFsaWQsXG4gIEFwaUtleUV4cGlyZWQsXG4gIEFwaUtleVJldm9rZWQsXG4gIFdyb25nQXBpS2V5VHlwZSxcbiAgRW1haWxSZW5kZXJpbmdFcnJvcixcbiAgUmVxdWlyZXNDdXN0b21FbWFpbFNlcnZlcixcbiAgSXRlbU5vdEZvdW5kLFxuICBJdGVtQ3VzdG9tZXJUeXBlRG9lc05vdE1hdGNoLFxuICBDdXN0b21lckRvZXNOb3RFeGlzdCxcbiAgT2ZmZXJEb2VzTm90RXhpc3QsXG4gIE9mZmVyQ3VzdG9tZXJUeXBlRG9lc05vdE1hdGNoLFxuICBJdGVtUXVhbnRpdHlJbnN1ZmZpY2llbnRBbW91bnQsXG4gIFN0cmlwZUFjY291bnRJbmZvTm90Rm91bmQsXG4gIERhdGFWYXVsdFN0b3JlRG9lc05vdEV4aXN0LFxuICBEYXRhVmF1bHRTdG9yZUhhc2hlZEtleURvZXNOb3RFeGlzdCxcbiAgV29ya2Zsb3dUb2tlbkRvZXNOb3RFeGlzdCxcbiAgV29ya2Zsb3dUb2tlbkV4cGlyZWRcbn07XG52YXIga25vd25FcnJvckNvZGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbmZvciAoY29uc3QgW18sIEtub3duRXJyb3IyXSBvZiBPYmplY3QuZW50cmllcyhLbm93bkVycm9ycykpIHtcbiAgaWYgKGtub3duRXJyb3JDb2Rlcy5oYXMoS25vd25FcnJvcjIuZXJyb3JDb2RlKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgRHVwbGljYXRlIGtub3duIGVycm9yIGNvZGU6ICR7S25vd25FcnJvcjIuZXJyb3JDb2RlfWApO1xuICB9XG4gIGtub3duRXJyb3JDb2Rlcy5hZGQoS25vd25FcnJvcjIuZXJyb3JDb2RlKTtcbn1cbmV4cG9ydCB7XG4gIEtub3duRXJyb3IsXG4gIEtub3duRXJyb3JzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9a25vd24tZXJyb3JzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/known-errors.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/schema-fields.js":
/*!*********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/schema-fields.js ***!
  \*********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ReplaceFieldWithOwnUserId: () => (/* binding */ ReplaceFieldWithOwnUserId),\n/* harmony export */   accessTokenPayloadSchema: () => (/* binding */ accessTokenPayloadSchema),\n/* harmony export */   accessTokenResponseSchema: () => (/* binding */ accessTokenResponseSchema),\n/* harmony export */   adaptSchema: () => (/* binding */ adaptSchema),\n/* harmony export */   adminAuthTypeSchema: () => (/* binding */ adminAuthTypeSchema),\n/* harmony export */   base64Schema: () => (/* binding */ base64Schema),\n/* harmony export */   basicAuthorizationHeaderSchema: () => (/* binding */ basicAuthorizationHeaderSchema),\n/* harmony export */   clientOrHigherAuthTypeSchema: () => (/* binding */ clientOrHigherAuthTypeSchema),\n/* harmony export */   contactChannelIdSchema: () => (/* binding */ contactChannelIdSchema),\n/* harmony export */   contactChannelIsPrimarySchema: () => (/* binding */ contactChannelIsPrimarySchema),\n/* harmony export */   contactChannelIsVerifiedSchema: () => (/* binding */ contactChannelIsVerifiedSchema),\n/* harmony export */   contactChannelTypeSchema: () => (/* binding */ contactChannelTypeSchema),\n/* harmony export */   contactChannelUsedForAuthSchema: () => (/* binding */ contactChannelUsedForAuthSchema),\n/* harmony export */   contactChannelValueSchema: () => (/* binding */ contactChannelValueSchema),\n/* harmony export */   containedPermissionIdsSchema: () => (/* binding */ containedPermissionIdsSchema),\n/* harmony export */   customPermissionDefinitionIdSchema: () => (/* binding */ customPermissionDefinitionIdSchema),\n/* harmony export */   customerTypeSchema: () => (/* binding */ customerTypeSchema),\n/* harmony export */   dayIntervalOrNeverSchema: () => (/* binding */ dayIntervalOrNeverSchema),\n/* harmony export */   dayIntervalSchema: () => (/* binding */ dayIntervalSchema),\n/* harmony export */   emailHostSchema: () => (/* binding */ emailHostSchema),\n/* harmony export */   emailOtpSignInCallbackUrlSchema: () => (/* binding */ emailOtpSignInCallbackUrlSchema),\n/* harmony export */   emailPasswordSchema: () => (/* binding */ emailPasswordSchema),\n/* harmony export */   emailPortSchema: () => (/* binding */ emailPortSchema),\n/* harmony export */   emailSchema: () => (/* binding */ emailSchema),\n/* harmony export */   emailSenderEmailSchema: () => (/* binding */ emailSenderEmailSchema),\n/* harmony export */   emailSenderNameSchema: () => (/* binding */ emailSenderNameSchema),\n/* harmony export */   emailTemplateListSchema: () => (/* binding */ emailTemplateListSchema),\n/* harmony export */   emailThemeListSchema: () => (/* binding */ emailThemeListSchema),\n/* harmony export */   emailThemeSchema: () => (/* binding */ emailThemeSchema),\n/* harmony export */   emailTypeSchema: () => (/* binding */ emailTypeSchema),\n/* harmony export */   emailUsernameSchema: () => (/* binding */ emailUsernameSchema),\n/* harmony export */   emailVerificationCallbackUrlSchema: () => (/* binding */ emailVerificationCallbackUrlSchema),\n/* harmony export */   ensureObjectSchema: () => (/* binding */ ensureObjectSchema),\n/* harmony export */   handlerPathSchema: () => (/* binding */ handlerPathSchema),\n/* harmony export */   inlineOfferSchema: () => (/* binding */ inlineOfferSchema),\n/* harmony export */   intervalOrNeverSchema: () => (/* binding */ intervalOrNeverSchema),\n/* harmony export */   intervalSchema: () => (/* binding */ intervalSchema),\n/* harmony export */   jsonSchema: () => (/* binding */ jsonSchema),\n/* harmony export */   jsonStringOrEmptySchema: () => (/* binding */ jsonStringOrEmptySchema),\n/* harmony export */   jsonStringSchema: () => (/* binding */ jsonStringSchema),\n/* harmony export */   moneyAmountSchema: () => (/* binding */ moneyAmountSchema),\n/* harmony export */   neonAuthorizationHeaderSchema: () => (/* binding */ neonAuthorizationHeaderSchema),\n/* harmony export */   oauthAccountMergeStrategySchema: () => (/* binding */ oauthAccountMergeStrategySchema),\n/* harmony export */   oauthClientIdSchema: () => (/* binding */ oauthClientIdSchema),\n/* harmony export */   oauthClientSecretSchema: () => (/* binding */ oauthClientSecretSchema),\n/* harmony export */   oauthEnabledSchema: () => (/* binding */ oauthEnabledSchema),\n/* harmony export */   oauthFacebookConfigIdSchema: () => (/* binding */ oauthFacebookConfigIdSchema),\n/* harmony export */   oauthIdSchema: () => (/* binding */ oauthIdSchema),\n/* harmony export */   oauthMicrosoftTenantIdSchema: () => (/* binding */ oauthMicrosoftTenantIdSchema),\n/* harmony export */   oauthProviderAccountIdSchema: () => (/* binding */ oauthProviderAccountIdSchema),\n/* harmony export */   oauthProviderAllowConnectedAccountsSchema: () => (/* binding */ oauthProviderAllowConnectedAccountsSchema),\n/* harmony export */   oauthProviderAllowSignInSchema: () => (/* binding */ oauthProviderAllowSignInSchema),\n/* harmony export */   oauthProviderEmailSchema: () => (/* binding */ oauthProviderEmailSchema),\n/* harmony export */   oauthProviderIdSchema: () => (/* binding */ oauthProviderIdSchema),\n/* harmony export */   oauthProviderProviderConfigIdSchema: () => (/* binding */ oauthProviderProviderConfigIdSchema),\n/* harmony export */   oauthProviderTypeSchema: () => (/* binding */ oauthProviderTypeSchema),\n/* harmony export */   oauthTypeSchema: () => (/* binding */ oauthTypeSchema),\n/* harmony export */   offerPriceSchema: () => (/* binding */ offerPriceSchema),\n/* harmony export */   offerSchema: () => (/* binding */ offerSchema),\n/* harmony export */   passwordSchema: () => (/* binding */ passwordSchema),\n/* harmony export */   permissionDefinitionIdSchema: () => (/* binding */ permissionDefinitionIdSchema),\n/* harmony export */   priceOrIncludeByDefaultSchema: () => (/* binding */ priceOrIncludeByDefaultSchema),\n/* harmony export */   primaryEmailAuthEnabledSchema: () => (/* binding */ primaryEmailAuthEnabledSchema),\n/* harmony export */   primaryEmailSchema: () => (/* binding */ primaryEmailSchema),\n/* harmony export */   primaryEmailVerifiedSchema: () => (/* binding */ primaryEmailVerifiedSchema),\n/* harmony export */   profileImageUrlSchema: () => (/* binding */ profileImageUrlSchema),\n/* harmony export */   projectAllowLocalhostSchema: () => (/* binding */ projectAllowLocalhostSchema),\n/* harmony export */   projectBranchIdSchema: () => (/* binding */ projectBranchIdSchema),\n/* harmony export */   projectClientTeamCreationEnabledSchema: () => (/* binding */ projectClientTeamCreationEnabledSchema),\n/* harmony export */   projectClientUserDeletionEnabledSchema: () => (/* binding */ projectClientUserDeletionEnabledSchema),\n/* harmony export */   projectConfigIdSchema: () => (/* binding */ projectConfigIdSchema),\n/* harmony export */   projectCreateTeamOnSignUpSchema: () => (/* binding */ projectCreateTeamOnSignUpSchema),\n/* harmony export */   projectCreatedAtMillisSchema: () => (/* binding */ projectCreatedAtMillisSchema),\n/* harmony export */   projectCredentialEnabledSchema: () => (/* binding */ projectCredentialEnabledSchema),\n/* harmony export */   projectDescriptionSchema: () => (/* binding */ projectDescriptionSchema),\n/* harmony export */   projectDisplayNameSchema: () => (/* binding */ projectDisplayNameSchema),\n/* harmony export */   projectFullLogoUrlSchema: () => (/* binding */ projectFullLogoUrlSchema),\n/* harmony export */   projectIdSchema: () => (/* binding */ projectIdSchema),\n/* harmony export */   projectIsProductionModeSchema: () => (/* binding */ projectIsProductionModeSchema),\n/* harmony export */   projectLogoUrlSchema: () => (/* binding */ projectLogoUrlSchema),\n/* harmony export */   projectMagicLinkEnabledSchema: () => (/* binding */ projectMagicLinkEnabledSchema),\n/* harmony export */   projectPasskeyEnabledSchema: () => (/* binding */ projectPasskeyEnabledSchema),\n/* harmony export */   projectSignUpEnabledSchema: () => (/* binding */ projectSignUpEnabledSchema),\n/* harmony export */   refreshTokenResponseSchema: () => (/* binding */ refreshTokenResponseSchema),\n/* harmony export */   selectedTeamIdSchema: () => (/* binding */ selectedTeamIdSchema),\n/* harmony export */   serverOrHigherAuthTypeSchema: () => (/* binding */ serverOrHigherAuthTypeSchema),\n/* harmony export */   signInEmailSchema: () => (/* binding */ signInEmailSchema),\n/* harmony export */   signInResponseSchema: () => (/* binding */ signInResponseSchema),\n/* harmony export */   signedUpAtMillisSchema: () => (/* binding */ signedUpAtMillisSchema),\n/* harmony export */   strictEmailSchema: () => (/* binding */ strictEmailSchema),\n/* harmony export */   teamClientMetadataSchema: () => (/* binding */ teamClientMetadataSchema),\n/* harmony export */   teamClientReadOnlyMetadataSchema: () => (/* binding */ teamClientReadOnlyMetadataSchema),\n/* harmony export */   teamCreatedAtMillisSchema: () => (/* binding */ teamCreatedAtMillisSchema),\n/* harmony export */   teamCreatorUserIdSchema: () => (/* binding */ teamCreatorUserIdSchema),\n/* harmony export */   teamDisplayNameSchema: () => (/* binding */ teamDisplayNameSchema),\n/* harmony export */   teamIdSchema: () => (/* binding */ teamIdSchema),\n/* harmony export */   teamInvitationCallbackUrlSchema: () => (/* binding */ teamInvitationCallbackUrlSchema),\n/* harmony export */   teamInvitationEmailSchema: () => (/* binding */ teamInvitationEmailSchema),\n/* harmony export */   teamMemberDisplayNameSchema: () => (/* binding */ teamMemberDisplayNameSchema),\n/* harmony export */   teamMemberProfileImageUrlSchema: () => (/* binding */ teamMemberProfileImageUrlSchema),\n/* harmony export */   teamPermissionDescriptionSchema: () => (/* binding */ teamPermissionDescriptionSchema),\n/* harmony export */   teamProfileImageUrlSchema: () => (/* binding */ teamProfileImageUrlSchema),\n/* harmony export */   teamServerMetadataSchema: () => (/* binding */ teamServerMetadataSchema),\n/* harmony export */   teamSystemPermissions: () => (/* binding */ teamSystemPermissions),\n/* harmony export */   templateThemeIdSchema: () => (/* binding */ templateThemeIdSchema),\n/* harmony export */   urlSchema: () => (/* binding */ urlSchema),\n/* harmony export */   userClientMetadataSchema: () => (/* binding */ userClientMetadataSchema),\n/* harmony export */   userClientReadOnlyMetadataSchema: () => (/* binding */ userClientReadOnlyMetadataSchema),\n/* harmony export */   userDisplayNameSchema: () => (/* binding */ userDisplayNameSchema),\n/* harmony export */   userHasPasswordSchema: () => (/* binding */ userHasPasswordSchema),\n/* harmony export */   userIdOrMeSchema: () => (/* binding */ userIdOrMeSchema),\n/* harmony export */   userIdSchema: () => (/* binding */ userIdSchema),\n/* harmony export */   userLastActiveAtMillisSchema: () => (/* binding */ userLastActiveAtMillisSchema),\n/* harmony export */   userOAuthProviderSchema: () => (/* binding */ userOAuthProviderSchema),\n/* harmony export */   userOtpAuthEnabledMutationSchema: () => (/* binding */ userOtpAuthEnabledMutationSchema),\n/* harmony export */   userOtpAuthEnabledSchema: () => (/* binding */ userOtpAuthEnabledSchema),\n/* harmony export */   userPasskeyAuthEnabledSchema: () => (/* binding */ userPasskeyAuthEnabledSchema),\n/* harmony export */   userPasswordHashMutationSchema: () => (/* binding */ userPasswordHashMutationSchema),\n/* harmony export */   userPasswordMutationSchema: () => (/* binding */ userPasswordMutationSchema),\n/* harmony export */   userServerMetadataSchema: () => (/* binding */ userServerMetadataSchema),\n/* harmony export */   userSpecifiedIdSchema: () => (/* binding */ userSpecifiedIdSchema),\n/* harmony export */   userTotpSecretMutationSchema: () => (/* binding */ userTotpSecretMutationSchema),\n/* harmony export */   wildcardUrlSchema: () => (/* binding */ wildcardUrlSchema),\n/* harmony export */   yupArray: () => (/* binding */ yupArray),\n/* harmony export */   yupBoolean: () => (/* binding */ yupBoolean),\n/* harmony export */   yupDate: () => (/* binding */ yupDate),\n/* harmony export */   yupDefinedAndNonEmptyWhen: () => (/* binding */ yupDefinedAndNonEmptyWhen),\n/* harmony export */   yupDefinedWhen: () => (/* binding */ yupDefinedWhen),\n/* harmony export */   yupMixed: () => (/* binding */ yupMixed),\n/* harmony export */   yupNever: () => (/* binding */ yupNever),\n/* harmony export */   yupNumber: () => (/* binding */ yupNumber),\n/* harmony export */   yupObject: () => (/* binding */ yupObject),\n/* harmony export */   yupObjectWithAutoDefault: () => (/* binding */ yupObjectWithAutoDefault),\n/* harmony export */   yupRecord: () => (/* binding */ yupRecord),\n/* harmony export */   yupString: () => (/* binding */ yupString),\n/* harmony export */   yupTuple: () => (/* binding */ yupTuple),\n/* harmony export */   yupUnion: () => (/* binding */ yupUnion),\n/* harmony export */   yupValidate: () => (/* binding */ yupValidate)\n/* harmony export */ });\n/* harmony import */ var yup__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! yup */ \"(rsc)/./node_modules/.pnpm/yup@1.7.1/node_modules/yup/index.esm.js\");\n/* harmony import */ var _known_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./known-errors.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/known-errors.js\");\n/* harmony import */ var _utils_bytes_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/bytes.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/bytes.js\");\n/* harmony import */ var _utils_currency_constants_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/currency-constants.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/currency-constants.js\");\n/* harmony import */ var _utils_errors_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/errors.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n/* harmony import */ var _utils_http_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/http.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/http.js\");\n/* harmony import */ var _utils_oauth_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/oauth.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/oauth.js\");\n/* harmony import */ var _utils_objects_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils/objects.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/objects.js\");\n/* harmony import */ var _utils_strings_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utils/strings.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/strings.js\");\n/* harmony import */ var _utils_urls_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./utils/urls.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/urls.js\");\n/* harmony import */ var _utils_uuids_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./utils/uuids.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/uuids.js\");\n// src/schema-fields.ts\n\n\n\n\n\n\n\n\n\n\n\nvar MAX_IMAGE_SIZE_BASE64_BYTES = 1e6;\nyup__WEBPACK_IMPORTED_MODULE_0__.addMethod(yup__WEBPACK_IMPORTED_MODULE_0__.string, \"nonEmpty\", function(message) {\n  return this.test(\n    \"non-empty\",\n    message ?? (({ path }) => `${path} must not be empty`),\n    (value) => {\n      return value !== \"\";\n    }\n  );\n});\nyup__WEBPACK_IMPORTED_MODULE_0__.addMethod(yup__WEBPACK_IMPORTED_MODULE_0__.Schema, \"hasNested\", function(path) {\n  if (!path.match(/^[a-zA-Z0-9_$:-]+$/)) throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(`yupSchema.hasNested can currently only be used with alphanumeric keys, underscores, dollar signs, colons, and hyphens. Fix this in the future. Provided key: ${JSON.stringify(path)}`);\n  const schemaInfo = this.meta()?.stackSchemaInfo;\n  if (schemaInfo?.type === \"record\") {\n    return schemaInfo.keySchema.isValidSync(path);\n  } else if (schemaInfo?.type === \"union\") {\n    return schemaInfo.items.some((s) => s.hasNested(path));\n  } else {\n    try {\n      yup__WEBPACK_IMPORTED_MODULE_0__.reach(this, path);\n      return true;\n    } catch (e) {\n      if (e instanceof Error && e.message.includes(\"The schema does not contain the path\")) {\n        return false;\n      }\n      throw e;\n    }\n  }\n});\nyup__WEBPACK_IMPORTED_MODULE_0__.addMethod(yup__WEBPACK_IMPORTED_MODULE_0__.Schema, \"getNested\", function(path) {\n  if (!path.match(/^[a-zA-Z0-9_$:-]+$/)) throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(`yupSchema.getNested can currently only be used with alphanumeric keys, underscores, dollar signs, colons, and hyphens. Fix this in the future. Provided key: ${path}`);\n  if (!this.hasNested(path)) throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(`Tried to call yupSchema.getNested, but key is not present in the schema. Provided key: ${path}`, { path, schema: this });\n  const schemaInfo = this.meta()?.stackSchemaInfo;\n  if (schemaInfo?.type === \"record\") {\n    return schemaInfo.valueSchema;\n  } else if (schemaInfo?.type === \"union\") {\n    const schemasWithNested = schemaInfo.items.filter((s) => s.hasNested(path));\n    return yupUnion(...schemasWithNested.map((s) => s.getNested(path)));\n  } else {\n    return yup__WEBPACK_IMPORTED_MODULE_0__.reach(this, path);\n  }\n});\nasync function yupValidate(schema, obj, options) {\n  try {\n    return await schema.validate(obj, {\n      ...(0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_7__.omit)(options ?? {}, [\"currentUserId\"]),\n      context: {\n        ...options?.context,\n        stackAllowUserIdMe: options?.currentUserId !== void 0\n      }\n    });\n  } catch (error) {\n    if (error instanceof ReplaceFieldWithOwnUserId) {\n      const currentUserId = options?.currentUserId;\n      if (!currentUserId) throw new _known_errors_js__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.CannotGetOwnUserWithoutUser();\n      let pathRemaining = error.path;\n      const fieldPath = [];\n      while (pathRemaining.length > 0) {\n        if (pathRemaining.startsWith(\"[\")) {\n          const index = pathRemaining.indexOf(\"]\");\n          if (index < 0) throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(\"Invalid path\");\n          fieldPath.push(JSON.parse(pathRemaining.slice(1, index)));\n          pathRemaining = pathRemaining.slice(index + 1);\n        } else {\n          let dotIndex = pathRemaining.indexOf(\".\");\n          if (dotIndex === -1) dotIndex = pathRemaining.length;\n          fieldPath.push(pathRemaining.slice(0, dotIndex));\n          pathRemaining = pathRemaining.slice(dotIndex + 1);\n        }\n      }\n      const newObj = (0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_7__.deepPlainClone)(obj);\n      let it = newObj;\n      for (const field of fieldPath.slice(0, -1)) {\n        if (!Object.prototype.hasOwnProperty.call(it, field)) {\n          throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(`Segment ${field} of path ${error.path} not found in object`);\n        }\n        it = it[field];\n      }\n      it[fieldPath[fieldPath.length - 1]] = currentUserId;\n      return await yupValidate(schema, newObj, options);\n    }\n    throw error;\n  }\n}\nvar _idDescription = (identify) => `The unique identifier of the ${identify}`;\nvar _displayNameDescription = (identify) => `Human-readable ${identify} display name. This is not a unique identifier.`;\nvar _clientMetaDataDescription = (identify) => `Client metadata. Used as a data store, accessible from the client side. Do not store information that should not be exposed to the client.`;\nvar _clientReadOnlyMetaDataDescription = (identify) => `Client read-only, server-writable metadata. Used as a data store, accessible from the client side. Do not store information that should not be exposed to the client. The client can read this data, but cannot modify it. This is useful for things like subscription status.`;\nvar _profileImageUrlDescription = (identify) => `URL of the profile image for ${identify}. Can be a Base64 encoded image. Must be smaller than 100KB. Please compress and crop to a square before passing in.`;\nvar _serverMetaDataDescription = (identify) => `Server metadata. Used as a data store, only accessible from the server side. You can store secret information related to the ${identify} here.`;\nvar _atMillisDescription = (identify) => `(the number of milliseconds since epoch, January 1, 1970, UTC)`;\nvar _createdAtMillisDescription = (identify) => `The time the ${identify} was created ${_atMillisDescription(identify)}`;\nvar _signedUpAtMillisDescription = `The time the user signed up ${_atMillisDescription}`;\nvar _lastActiveAtMillisDescription = `The time the user was last active ${_atMillisDescription}`;\nfunction yupString(...args) {\n  return yup__WEBPACK_IMPORTED_MODULE_0__.string(...args).meta({ stackSchemaInfo: { type: \"string\" } });\n}\nfunction yupNumber(...args) {\n  return yup__WEBPACK_IMPORTED_MODULE_0__.number(...args).meta({ stackSchemaInfo: { type: \"number\" } });\n}\nfunction yupBoolean(...args) {\n  return yup__WEBPACK_IMPORTED_MODULE_0__.boolean(...args).meta({ stackSchemaInfo: { type: \"boolean\" } });\n}\nfunction yupDate(...args) {\n  return yup__WEBPACK_IMPORTED_MODULE_0__.date(...args).meta({ stackSchemaInfo: { type: \"date\" } });\n}\nfunction _yupMixedInternal(...args) {\n  return yup__WEBPACK_IMPORTED_MODULE_0__.mixed(...args);\n}\nfunction yupMixed(...args) {\n  return _yupMixedInternal(...args).meta({ stackSchemaInfo: { type: \"mixed\" } });\n}\nfunction yupArray(...args) {\n  return yup__WEBPACK_IMPORTED_MODULE_0__.array(...args).meta({ stackSchemaInfo: { type: \"array\" } });\n}\nfunction yupTuple(schemas) {\n  if (schemas.length === 0) throw new Error(\"yupTuple must have at least one schema\");\n  return yup__WEBPACK_IMPORTED_MODULE_0__.tuple(schemas).meta({ stackSchemaInfo: { type: \"tuple\", items: schemas } });\n}\nfunction yupObjectWithAutoDefault(...args) {\n  const object2 = yup__WEBPACK_IMPORTED_MODULE_0__.object(...args).test(\n    \"no-unknown-object-properties\",\n    ({ path }) => `${path} contains unknown properties`,\n    (value, context) => {\n      if (context.options.context?.noUnknownPathPrefixes?.some((prefix) => context.path.startsWith(prefix))) {\n        if (context.schema.spec.noUnknown !== false) {\n          const availableKeys = new Set(Object.keys(context.schema.fields));\n          const unknownKeys = Object.keys(value ?? {}).filter((key) => !availableKeys.has(key));\n          if (unknownKeys.length > 0) {\n            return context.createError({\n              message: `${context.path || \"Object\"} contains unknown properties: ${unknownKeys.join(\", \")}`,\n              path: context.path,\n              params: { unknownKeys, availableKeys }\n            });\n          }\n        }\n      }\n      return true;\n    }\n  ).meta({ stackSchemaInfo: { type: \"object\" } });\n  return object2;\n}\nfunction yupObject(...args) {\n  const object2 = yupObjectWithAutoDefault(...args);\n  return object2.default(void 0);\n}\nfunction yupNever() {\n  return _yupMixedInternal().meta({ stackSchemaInfo: { type: \"never\" } }).test(\"never\", \"This value should never be reached\", () => false);\n}\nfunction yupUnion(...args) {\n  if (args.length === 0) throw new Error(\"yupUnion must have at least one schema\");\n  return _yupMixedInternal().meta({ stackSchemaInfo: { type: \"union\", items: args } }).test(\"is-one-of\", \"Invalid value\", async (value, context) => {\n    if (value == null) return true;\n    const errors = [];\n    for (const schema of args) {\n      try {\n        await yupValidate(schema, value, context.options);\n        return true;\n      } catch (e) {\n        errors.push(e);\n      }\n    }\n    return context.createError({\n      message: (0,_utils_strings_js__WEBPACK_IMPORTED_MODULE_8__.deindent)`\n        ${context.path} is not matched by any of the provided schemas:\n          ${errors.map((e, i) => (0,_utils_strings_js__WEBPACK_IMPORTED_MODULE_8__.deindent)`\n            Schema ${i}:\n              ${e.errors.join(\"\\n\")}\n          `).join(\"\\n\")}`,\n      path: context.path\n    });\n  });\n}\nfunction yupRecord(keySchema, valueSchema) {\n  return yupObject().meta({ stackSchemaInfo: { type: \"record\", keySchema, valueSchema } }).unknown(true).test(\n    \"record\",\n    \"${path} must be a record of valid values\",\n    async function(value, context) {\n      if (value == null) return true;\n      const { path, createError } = this;\n      if (typeof value !== \"object\") {\n        return createError({ message: `${path} must be an object` });\n      }\n      for (const key of Object.keys(value)) {\n        await yupValidate(keySchema, key, context.options);\n        try {\n          await yupValidate(valueSchema, value[key], {\n            ...context.options,\n            context: {\n              ...context.options.context,\n              path: path ? `${path}.${key}` : key\n            }\n          });\n        } catch (e) {\n          return createError({\n            path: path ? `${path}.${key}` : key,\n            message: e.message\n          });\n        }\n      }\n      return true;\n    }\n  );\n}\nfunction ensureObjectSchema(schema) {\n  if (!(schema instanceof yup__WEBPACK_IMPORTED_MODULE_0__.ObjectSchema)) throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(`assertObjectSchema: schema is not an ObjectSchema: ${schema.describe().type}`);\n  return schema;\n}\nvar adaptSchema = yupMixed();\nvar urlSchema = yupString().test({\n  name: \"no-spaces\",\n  message: (params) => `${params.path} contains spaces`,\n  test: (value) => value == null || !value.includes(\" \")\n}).test({\n  name: \"url\",\n  message: (params) => `${params.path} is not a valid URL`,\n  test: (value) => value == null || (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_9__.isValidUrl)(value)\n});\nvar wildcardUrlSchema = yupString().test({\n  name: \"no-spaces\",\n  message: (params) => `${params.path} contains spaces`,\n  test: (value) => value == null || !value.includes(\" \")\n}).test({\n  name: \"wildcard-url\",\n  message: (params) => `${params.path} is not a valid URL or wildcard URL pattern`,\n  test: (value) => {\n    if (value == null) return true;\n    if (!value.includes(\"*\")) {\n      return (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_9__.isValidUrl)(value);\n    }\n    try {\n      const PLACEHOLDER = \"wildcard-placeholder\";\n      const normalizedUrl = value.replace(/\\*/g, PLACEHOLDER);\n      const url = new URL(normalizedUrl);\n      if (url.username.includes(PLACEHOLDER) || url.password.includes(PLACEHOLDER) || url.pathname.includes(PLACEHOLDER) || url.search.includes(PLACEHOLDER) || url.hash.includes(PLACEHOLDER)) {\n        return false;\n      }\n      if (url.protocol !== \"http:\" && url.protocol !== \"https:\") {\n        return false;\n      }\n      const hostPattern = url.hostname.split(PLACEHOLDER).join(\"*\");\n      return (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_9__.isValidHostnameWithWildcards)(hostPattern);\n    } catch (e) {\n      return false;\n    }\n  }\n});\nvar jsonSchema = yupMixed().nullable().defined().transform((value) => JSON.parse(JSON.stringify(value)));\nvar jsonStringSchema = yupString().test(\"json\", (params) => `${params.path} is not valid JSON`, (value) => {\n  if (value == null) return true;\n  try {\n    JSON.parse(value);\n    return true;\n  } catch (error) {\n    return false;\n  }\n});\nvar jsonStringOrEmptySchema = yupString().test(\"json\", (params) => `${params.path} is not valid JSON`, (value) => {\n  if (!value) return true;\n  try {\n    JSON.parse(value);\n    return true;\n  } catch (error) {\n    return false;\n  }\n});\nvar base64Schema = yupString().test(\"is-base64\", (params) => `${params.path} is not valid base64`, (value) => {\n  if (value == null) return true;\n  return (0,_utils_bytes_js__WEBPACK_IMPORTED_MODULE_2__.isBase64)(value);\n});\nvar passwordSchema = yupString().max(70);\nvar intervalSchema = yupTuple([yupNumber().min(0).integer().defined(), yupString().oneOf([\"millisecond\", \"second\", \"minute\", \"hour\", \"day\", \"week\", \"month\", \"year\"]).defined()]);\nvar dayIntervalSchema = yupTuple([yupNumber().min(0).integer().defined(), yupString().oneOf([\"day\", \"week\", \"month\", \"year\"]).defined()]);\nvar intervalOrNeverSchema = yupUnion(intervalSchema.defined(), yupString().oneOf([\"never\"]).defined());\nvar dayIntervalOrNeverSchema = yupUnion(dayIntervalSchema.defined(), yupString().oneOf([\"never\"]).defined());\nvar userSpecifiedIdSchema = (idName) => yupString().max(63).matches(/^[a-zA-Z_][a-zA-Z0-9_-]*$/, `${idName} must start with a letter, underscore, or number, and contain only letters, numbers, underscores, and hyphens`);\nvar moneyAmountSchema = (currency) => yupString().test(\"money-amount\", \"Invalid money amount\", (value, context) => {\n  if (value == null) return true;\n  const regex = /^([0-9]+)(\\.([0-9]+))?$/;\n  const match = value.match(regex);\n  if (!match) return context.createError({ message: \"Money amount must be in the format of <number> or <number>.<number>\" });\n  const whole = match[1];\n  const decimals = match[3];\n  if (decimals && decimals.length > currency.decimals) return context.createError({ message: `Too many decimals; ${currency.code} only has ${currency.decimals} decimals` });\n  if (whole !== \"0\" && whole.startsWith(\"0\")) return context.createError({ message: \"Money amount must not have leading zeros\" });\n  return true;\n});\nvar strictEmailSchema = (message) => yupString().email(message).max(256).matches(/^[^.]+(\\.[^.]+)*@.*\\.[^.][^.]+$/, message);\nvar emailSchema = yupString().email();\nvar clientOrHigherAuthTypeSchema = yupString().oneOf([\"client\", \"server\", \"admin\"]).defined();\nvar serverOrHigherAuthTypeSchema = yupString().oneOf([\"server\", \"admin\"]).defined();\nvar adminAuthTypeSchema = yupString().oneOf([\"admin\"]).defined();\nvar projectIdSchema = yupString().test((v) => v === void 0 || v === \"internal\" || (0,_utils_uuids_js__WEBPACK_IMPORTED_MODULE_10__.isUuid)(v)).meta({ openapiField: { description: _idDescription(\"project\"), exampleValue: \"e0b52f4d-dece-408c-af49-d23061bb0f8d\" } });\nvar projectBranchIdSchema = yupString().nonEmpty().max(255).meta({ openapiField: { description: _idDescription(\"project branch\"), exampleValue: \"main\" } });\nvar projectDisplayNameSchema = yupString().meta({ openapiField: { description: _displayNameDescription(\"project\"), exampleValue: \"MyMusic\" } });\nvar projectLogoUrlSchema = urlSchema.max(MAX_IMAGE_SIZE_BASE64_BYTES).meta({ openapiField: { description: \"URL of the logo for the project. This is usually a close to 1:1 image of the company logo.\", exampleValue: \"https://example.com/logo.png\" } });\nvar projectFullLogoUrlSchema = urlSchema.max(MAX_IMAGE_SIZE_BASE64_BYTES).meta({ openapiField: { description: \"URL of the full logo for the project. This is usually a vertical image with the logo and the company name.\", exampleValue: \"https://example.com/full-logo.png\" } });\nvar projectDescriptionSchema = yupString().nullable().meta({ openapiField: { description: \"A human readable description of the project\", exampleValue: \"A music streaming service\" } });\nvar projectCreatedAtMillisSchema = yupNumber().meta({ openapiField: { description: _createdAtMillisDescription(\"project\"), exampleValue: 163e10 } });\nvar projectIsProductionModeSchema = yupBoolean().meta({ openapiField: { description: \"Whether the project is in production mode\", exampleValue: true } });\nvar projectConfigIdSchema = yupString().meta({ openapiField: { description: _idDescription(\"project config\"), exampleValue: \"d09201f0-54f5-40bd-89ff-6d1815ddad24\" } });\nvar projectAllowLocalhostSchema = yupBoolean().meta({ openapiField: { description: \"Whether localhost is allowed as a domain for this project. Should only be allowed in development mode\", exampleValue: true } });\nvar projectCreateTeamOnSignUpSchema = yupBoolean().meta({ openapiField: { description: \"Whether a team should be created for each user that signs up\", exampleValue: true } });\nvar projectMagicLinkEnabledSchema = yupBoolean().meta({ openapiField: { description: \"Whether magic link authentication is enabled for this project\", exampleValue: true } });\nvar projectPasskeyEnabledSchema = yupBoolean().meta({ openapiField: { description: \"Whether passkey authentication is enabled for this project\", exampleValue: true } });\nvar projectClientTeamCreationEnabledSchema = yupBoolean().meta({ openapiField: { description: \"Whether client users can create teams\", exampleValue: true } });\nvar projectClientUserDeletionEnabledSchema = yupBoolean().meta({ openapiField: { description: \"Whether client users can delete their own account from the client\", exampleValue: true } });\nvar projectSignUpEnabledSchema = yupBoolean().meta({ openapiField: { description: \"Whether users can sign up new accounts, or whether they are only allowed to sign in to existing accounts. Regardless of this option, the server API can always create new users with the `POST /users` endpoint.\", exampleValue: true } });\nvar projectCredentialEnabledSchema = yupBoolean().meta({ openapiField: { description: \"Whether email password authentication is enabled for this project\", exampleValue: true } });\nvar oauthIdSchema = yupString().oneOf(_utils_oauth_js__WEBPACK_IMPORTED_MODULE_6__.allProviders).meta({ openapiField: { description: `OAuth provider ID, one of ${_utils_oauth_js__WEBPACK_IMPORTED_MODULE_6__.allProviders.map((x) => `\\`${x}\\``).join(\", \")}`, exampleValue: \"google\" } });\nvar oauthEnabledSchema = yupBoolean().meta({ openapiField: { description: \"Whether the OAuth provider is enabled. If an provider is first enabled, then disabled, it will be shown in the list but with enabled=false\", exampleValue: true } });\nvar oauthTypeSchema = yupString().oneOf([\"shared\", \"standard\"]).meta({ openapiField: { description: 'OAuth provider type, one of shared, standard. \"shared\" uses Stack shared OAuth keys and it is only meant for development. \"standard\" uses your own OAuth keys and will show your logo and company name when signing in with the provider.', exampleValue: \"standard\" } });\nvar oauthClientIdSchema = yupString().meta({ openapiField: { description: 'OAuth client ID. Needs to be specified when using type=\"standard\"', exampleValue: \"google-oauth-client-id\" } });\nvar oauthClientSecretSchema = yupString().meta({ openapiField: { description: 'OAuth client secret. Needs to be specified when using type=\"standard\"', exampleValue: \"google-oauth-client-secret\" } });\nvar oauthFacebookConfigIdSchema = yupString().meta({ openapiField: { description: \"The configuration id for Facebook business login (for things like ads and marketing). This is only required if you are using the standard OAuth with Facebook and you are using Facebook business login.\" } });\nvar oauthMicrosoftTenantIdSchema = yupString().meta({ openapiField: { description: \"The Microsoft tenant id for Microsoft directory. This is only required if you are using the standard OAuth with Microsoft and you have an Azure AD tenant.\" } });\nvar oauthAccountMergeStrategySchema = yupString().oneOf([\"link_method\", \"raise_error\", \"allow_duplicates\"]).meta({ openapiField: { description: \"Determines how to handle OAuth logins that match an existing user by email. `link_method` adds the OAuth method to the existing user. `raise_error` rejects the login with an error. `allow_duplicates` creates a new user.\", exampleValue: \"link_method\" } });\nvar emailTypeSchema = yupString().oneOf([\"shared\", \"standard\"]).meta({ openapiField: { description: 'Email provider type, one of shared, standard. \"shared\" uses Stack shared email provider and it is only meant for development. \"standard\" uses your own email server and will have your email address as the sender.', exampleValue: \"standard\" } });\nvar emailSenderNameSchema = yupString().meta({ openapiField: { description: 'Email sender name. Needs to be specified when using type=\"standard\"', exampleValue: \"Stack\" } });\nvar emailHostSchema = yupString().meta({ openapiField: { description: 'Email host. Needs to be specified when using type=\"standard\"', exampleValue: \"smtp.your-domain.com\" } });\nvar emailPortSchema = yupNumber().min(0).max(65535).meta({ openapiField: { description: 'Email port. Needs to be specified when using type=\"standard\"', exampleValue: 587 } });\nvar emailUsernameSchema = yupString().meta({ openapiField: { description: 'Email username. Needs to be specified when using type=\"standard\"', exampleValue: \"smtp-email\" } });\nvar emailSenderEmailSchema = emailSchema.meta({ openapiField: { description: 'Email sender email. Needs to be specified when using type=\"standard\"', exampleValue: \"example@your-domain.com\" } });\nvar emailPasswordSchema = passwordSchema.meta({ openapiField: { description: 'Email password. Needs to be specified when using type=\"standard\"', exampleValue: \"your-email-password\" } });\nvar handlerPathSchema = yupString().test(\"is-handler-path\", \"Handler path must start with /\", (value) => value?.startsWith(\"/\")).meta({ openapiField: { description: 'Handler path. If you did not setup a custom handler path, it should be \"/handler\" by default. It needs to start with /', exampleValue: \"/handler\" } });\nvar emailThemeSchema = yupString().meta({ openapiField: { description: \"Email theme id for the project. Determines the visual style of emails sent by the project.\" } });\nvar emailThemeListSchema = yupRecord(\n  yupString().uuid(),\n  yupObject({\n    displayName: yupString().meta({ openapiField: { description: \"Email theme name\", exampleValue: \"Default Light\" } }).defined(),\n    tsxSource: yupString().meta({ openapiField: { description: \"Email theme source code tsx component\" } }).defined()\n  })\n).meta({ openapiField: { description: \"Record of email theme IDs to their display name and source code\" } });\nvar templateThemeIdSchema = yupMixed().test((v) => v === void 0 || v === false || v === null || typeof v === \"string\" && (0,_utils_uuids_js__WEBPACK_IMPORTED_MODULE_10__.isUuid)(v)).meta({ openapiField: { description: \"Email theme id for the template\" } }).optional();\nvar emailTemplateListSchema = yupRecord(\n  yupString().uuid(),\n  yupObject({\n    displayName: yupString().meta({ openapiField: { description: \"Email template name\", exampleValue: \"Email Verification\" } }).defined(),\n    tsxSource: yupString().meta({ openapiField: { description: \"Email template source code tsx component\" } }).defined(),\n    // themeId can be one of three values:\n    // 1. A valid theme id\n    // 2. false, which means the template uses no theme\n    // 3. undefined/not given, which means the template uses the project's active theme\n    themeId: templateThemeIdSchema\n  })\n).meta({ openapiField: { description: \"Record of email template IDs to their display name and source code\" } });\nvar customerTypeSchema = yupString().oneOf([\"user\", \"team\", \"custom\"]);\nvar validateHasAtLeastOneSupportedCurrency = (value, context) => {\n  if (!value) return true;\n  const currencies = Object.keys(value).filter((key) => _utils_currency_constants_js__WEBPACK_IMPORTED_MODULE_3__.SUPPORTED_CURRENCIES.some((c) => c.code === key));\n  if (currencies.length === 0) {\n    return context.createError({ message: \"At least one currency is required\" });\n  }\n  return true;\n};\nvar offerPriceSchema = yupObject({\n  ...(0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_7__.typedFromEntries)(_utils_currency_constants_js__WEBPACK_IMPORTED_MODULE_3__.SUPPORTED_CURRENCIES.map((currency) => [currency.code, moneyAmountSchema(currency).optional()])),\n  interval: dayIntervalSchema.optional(),\n  serverOnly: yupBoolean(),\n  freeTrial: dayIntervalSchema.optional()\n}).test(\"at-least-one-currency\", (value, context) => validateHasAtLeastOneSupportedCurrency(value, context));\nvar priceOrIncludeByDefaultSchema = yupUnion(\n  yupString().oneOf([\"include-by-default\"]).meta({ openapiField: { description: \"Makes this item free and includes it by default for all customers.\", exampleValue: \"include-by-default\" } }),\n  yupRecord(\n    userSpecifiedIdSchema(\"priceId\"),\n    offerPriceSchema\n  )\n);\nvar offerSchema = yupObject({\n  displayName: yupString(),\n  groupId: userSpecifiedIdSchema(\"groupId\").optional().meta({ openapiField: { description: \"The ID of the group this offer belongs to. Within a group, all offers are mutually exclusive unless they are an add-on to another offer in the group.\", exampleValue: \"group-id\" } }),\n  isAddOnTo: yupUnion(\n    yupBoolean().isFalse(),\n    yupRecord(\n      userSpecifiedIdSchema(\"offerId\"),\n      yupBoolean().isTrue().defined()\n    )\n  ).optional().meta({ openapiField: { description: \"The offers that this offer is an add-on to. If this is set, the customer must already have one of the offers in the record to be able to purchase this offer.\", exampleValue: { \"offer-id\": true } } }),\n  customerType: customerTypeSchema.defined(),\n  freeTrial: dayIntervalSchema.optional(),\n  serverOnly: yupBoolean(),\n  stackable: yupBoolean(),\n  prices: priceOrIncludeByDefaultSchema.defined(),\n  includedItems: yupRecord(\n    userSpecifiedIdSchema(\"itemId\"),\n    yupObject({\n      quantity: yupNumber().defined(),\n      repeat: dayIntervalOrNeverSchema.optional(),\n      expires: yupString().oneOf([\"never\", \"when-purchase-expires\", \"when-repeated\"]).optional()\n    })\n  )\n});\nvar inlineOfferSchema = yupObject({\n  display_name: yupString().defined(),\n  customer_type: customerTypeSchema.defined(),\n  free_trial: dayIntervalSchema.optional(),\n  server_only: yupBoolean().oneOf([true]).default(true),\n  prices: yupRecord(\n    userSpecifiedIdSchema(\"priceId\"),\n    yupObject({\n      ...(0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_7__.typedFromEntries)(_utils_currency_constants_js__WEBPACK_IMPORTED_MODULE_3__.SUPPORTED_CURRENCIES.map((currency) => [currency.code, moneyAmountSchema(currency).optional()])),\n      interval: dayIntervalSchema.optional(),\n      free_trial: dayIntervalSchema.optional()\n    }).test(\"at-least-one-currency\", (value, context) => validateHasAtLeastOneSupportedCurrency(value, context))\n  ),\n  included_items: yupRecord(\n    userSpecifiedIdSchema(\"itemId\"),\n    yupObject({\n      quantity: yupNumber(),\n      repeat: dayIntervalOrNeverSchema.optional(),\n      expires: yupString().oneOf([\"never\", \"when-purchase-expires\", \"when-repeated\"]).optional()\n    })\n  )\n});\nvar ReplaceFieldWithOwnUserId = class extends Error {\n  constructor(path) {\n    super(`This error should be caught by whoever validated the schema, and the field in the path '${path}' should be replaced with the current user's id. This is a workaround to yup not providing access to the context inside the transform function.`);\n    this.path = path;\n  }\n};\nvar userIdMeSentinelUuid = \"cad564fd-f81b-43f4-b390-98abf3fcc17e\";\nvar userIdOrMeSchema = yupString().uuid().transform((v) => {\n  if (v === \"me\") return userIdMeSentinelUuid;\n  else return v;\n}).test((v, context) => {\n  if (!(\"stackAllowUserIdMe\" in (context.options.context ?? {}))) throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(\"userIdOrMeSchema is not allowed in this context. Make sure you're using yupValidate from schema-fields.ts to validate, instead of schema.validate(...).\");\n  if (!context.options.context?.stackAllowUserIdMe) throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(\"userIdOrMeSchema is not allowed in this context. Make sure you're passing in the currentUserId option in yupValidate.\");\n  if (v === userIdMeSentinelUuid) throw new ReplaceFieldWithOwnUserId(context.path);\n  return true;\n}).meta({ openapiField: { description: \"The ID of the user, or the special value `me` for the currently authenticated user\", exampleValue: \"3241a285-8329-4d69-8f3d-316e08cf140c\" } });\nvar userIdSchema = yupString().uuid().meta({ openapiField: { description: _idDescription(\"user\"), exampleValue: \"3241a285-8329-4d69-8f3d-316e08cf140c\" } });\nvar primaryEmailSchema = emailSchema.meta({ openapiField: { description: \"Primary email\", exampleValue: \"johndoe@example.com\" } });\nvar primaryEmailAuthEnabledSchema = yupBoolean().meta({ openapiField: { description: \"Whether the primary email is used for authentication. If this is set to `false`, the user will not be able to sign in with the primary email with password or OTP\", exampleValue: true } });\nvar primaryEmailVerifiedSchema = yupBoolean().meta({ openapiField: { description: \"Whether the primary email has been verified to belong to this user\", exampleValue: true } });\nvar userDisplayNameSchema = yupString().nullable().max(256).meta({ openapiField: { description: _displayNameDescription(\"user\"), exampleValue: \"John Doe\" } });\nvar selectedTeamIdSchema = yupString().uuid().meta({ openapiField: { description: \"ID of the team currently selected by the user\", exampleValue: \"team-id\" } });\nvar profileImageUrlSchema = urlSchema.max(MAX_IMAGE_SIZE_BASE64_BYTES).meta({ openapiField: { description: _profileImageUrlDescription(\"user\"), exampleValue: \"https://example.com/image.jpg\" } });\nvar signedUpAtMillisSchema = yupNumber().meta({ openapiField: { description: _signedUpAtMillisDescription, exampleValue: 163e10 } });\nvar userClientMetadataSchema = jsonSchema.meta({ openapiField: { description: _clientMetaDataDescription(\"user\"), exampleValue: { key: \"value\" } } });\nvar userClientReadOnlyMetadataSchema = jsonSchema.meta({ openapiField: { description: _clientReadOnlyMetaDataDescription(\"user\"), exampleValue: { key: \"value\" } } });\nvar userServerMetadataSchema = jsonSchema.meta({ openapiField: { description: _serverMetaDataDescription(\"user\"), exampleValue: { key: \"value\" } } });\nvar userOAuthProviderSchema = yupObject({\n  id: yupString().defined(),\n  type: yupString().oneOf(_utils_oauth_js__WEBPACK_IMPORTED_MODULE_6__.allProviders).defined(),\n  provider_user_id: yupString().defined()\n});\nvar userLastActiveAtMillisSchema = yupNumber().nullable().meta({ openapiField: { description: _lastActiveAtMillisDescription, exampleValue: 163e10 } });\nvar userPasskeyAuthEnabledSchema = yupBoolean().meta({ openapiField: { hidden: true, description: \"Whether the user has passkeys enabled\", exampleValue: false } });\nvar userOtpAuthEnabledSchema = yupBoolean().meta({ openapiField: { hidden: true, description: \"Whether the user has OTP/magic link enabled. \", exampleValue: true } });\nvar userOtpAuthEnabledMutationSchema = yupBoolean().meta({ openapiField: { hidden: true, description: \"Whether the user has OTP/magic link enabled. Note that only accounts with verified emails can sign-in with OTP.\", exampleValue: true } });\nvar userHasPasswordSchema = yupBoolean().meta({ openapiField: { hidden: true, description: \"Whether the user has a password set. If the user does not have a password set, they will not be able to sign in with email/password.\", exampleValue: true } });\nvar userPasswordMutationSchema = passwordSchema.nullable().meta({ openapiField: { description: \"Sets the user's password. Doing so revokes all current sessions.\", exampleValue: \"my-new-password\" } }).max(70);\nvar userPasswordHashMutationSchema = yupString().nonEmpty().meta({ openapiField: { description: \"If `password` is not given, sets the user's password hash to the given string in Modular Crypt Format (ex.: `$2a$10$VIhIOofSMqGdGlL4wzE//e.77dAQGqNtF/1dT7bqCrVtQuInWy2qi`). Doing so revokes all current sessions.\" } });\nvar userTotpSecretMutationSchema = base64Schema.nullable().meta({ openapiField: { description: \"Enables 2FA and sets a TOTP secret for the user. Set to null to disable 2FA.\", exampleValue: \"dG90cC1zZWNyZXQ=\" } });\nvar accessTokenPayloadSchema = yupObject({\n  sub: yupString().defined(),\n  exp: yupNumber().optional(),\n  iss: yupString().defined(),\n  aud: yupString().defined(),\n  project_id: yupString().defined(),\n  branch_id: yupString().defined(),\n  refresh_token_id: yupString().defined(),\n  role: yupString().oneOf([\"authenticated\"]).defined(),\n  name: yupString().defined().nullable(),\n  email: yupString().defined().nullable(),\n  email_verified: yupBoolean().defined(),\n  selected_team_id: yupString().defined().nullable(),\n  is_anonymous: yupBoolean().defined()\n});\nvar signInEmailSchema = strictEmailSchema(void 0).meta({ openapiField: { description: \"The email to sign in with.\", exampleValue: \"johndoe@example.com\" } });\nvar emailOtpSignInCallbackUrlSchema = urlSchema.meta({ openapiField: { description: \"The base callback URL to construct the magic link from. A query parameter `code` with the verification code will be appended to it. The page should then make a request to the `/auth/otp/sign-in` endpoint.\", exampleValue: \"https://example.com/handler/magic-link-callback\" } });\nvar emailVerificationCallbackUrlSchema = urlSchema.meta({ openapiField: { description: \"The base callback URL to construct a verification link for the verification e-mail. A query parameter `code` with the verification code will be appended to it. The page should then make a request to the `/contact-channels/verify` endpoint.\", exampleValue: \"https://example.com/handler/email-verification\" } });\nvar accessTokenResponseSchema = yupString().meta({ openapiField: { description: \"Short-lived access token that can be used to authenticate the user\", exampleValue: \"eyJhmMiJB2TO...diI4QT\" } });\nvar refreshTokenResponseSchema = yupString().meta({ openapiField: { description: \"Long-lived refresh token that can be used to obtain a new access token\", exampleValue: \"i8ns3aq2...14y\" } });\nvar signInResponseSchema = yupObject({\n  refresh_token: refreshTokenResponseSchema.defined(),\n  access_token: accessTokenResponseSchema.defined(),\n  is_new_user: yupBoolean().meta({ openapiField: { description: \"Whether the user is a new user\", exampleValue: true } }).defined(),\n  user_id: userIdSchema.defined()\n});\nvar teamSystemPermissions = [\n  \"$update_team\",\n  \"$delete_team\",\n  \"$read_members\",\n  \"$remove_members\",\n  \"$invite_members\",\n  \"$manage_api_keys\"\n];\nvar permissionDefinitionIdSchema = yupString().matches(/^\\$?[a-z0-9_:]+$/, 'Only lowercase letters, numbers, \":\", \"_\" and optional \"$\" at the beginning are allowed').test(\"is-system-permission\", \"System permissions must start with a dollar sign\", (value, ctx) => {\n  if (!value) return true;\n  if (value.startsWith(\"$\") && !teamSystemPermissions.includes(value)) {\n    return ctx.createError({ message: \"Invalid system permission\" });\n  }\n  return true;\n}).meta({ openapiField: { description: `The permission ID used to uniquely identify a permission. Can either be a custom permission with lowercase letters, numbers, \\`:\\`, and \\`_\\` characters, or one of the system permissions: ${teamSystemPermissions.map((x) => `\\`${x}\\``).join(\", \")}`, exampleValue: \"read_secret_info\" } });\nvar customPermissionDefinitionIdSchema = yupString().matches(/^[a-z0-9_:]+$/, 'Only lowercase letters, numbers, \":\", \"_\" are allowed').meta({ openapiField: { description: 'The permission ID used to uniquely identify a permission. Can only contain lowercase letters, numbers, \":\", and \"_\" characters', exampleValue: \"read_secret_info\" } });\nvar teamPermissionDescriptionSchema = yupString().meta({ openapiField: { description: \"A human-readable description of the permission\", exampleValue: \"Read secret information\" } });\nvar containedPermissionIdsSchema = yupArray(permissionDefinitionIdSchema.defined()).meta({ openapiField: { description: \"The IDs of the permissions that are contained in this permission\", exampleValue: [\"read_public_info\"] } });\nvar teamIdSchema = yupString().uuid().meta({ openapiField: { description: _idDescription(\"team\"), exampleValue: \"ad962777-8244-496a-b6a2-e0c6a449c79e\" } });\nvar teamDisplayNameSchema = yupString().meta({ openapiField: { description: _displayNameDescription(\"team\"), exampleValue: \"My Team\" } });\nvar teamProfileImageUrlSchema = urlSchema.max(1e6).meta({ openapiField: { description: _profileImageUrlDescription(\"team\"), exampleValue: \"https://example.com/image.jpg\" } });\nvar teamClientMetadataSchema = jsonSchema.meta({ openapiField: { description: _clientMetaDataDescription(\"team\"), exampleValue: { key: \"value\" } } });\nvar teamClientReadOnlyMetadataSchema = jsonSchema.meta({ openapiField: { description: _clientReadOnlyMetaDataDescription(\"team\"), exampleValue: { key: \"value\" } } });\nvar teamServerMetadataSchema = jsonSchema.meta({ openapiField: { description: _serverMetaDataDescription(\"team\"), exampleValue: { key: \"value\" } } });\nvar teamCreatedAtMillisSchema = yupNumber().meta({ openapiField: { description: _createdAtMillisDescription(\"team\"), exampleValue: 163e10 } });\nvar teamInvitationEmailSchema = emailSchema.meta({ openapiField: { description: \"The email of the user to invite.\", exampleValue: \"johndoe@example.com\" } });\nvar teamInvitationCallbackUrlSchema = urlSchema.meta({ openapiField: { description: \"The base callback URL to construct an invite link with. A query parameter `code` with the verification code will be appended to it. The page should then make a request to the `/team-invitations/accept` endpoint.\", exampleValue: \"https://example.com/handler/team-invitation\" } });\nvar teamCreatorUserIdSchema = userIdOrMeSchema.meta({ openapiField: { description: 'The ID of the creator of the team. If not specified, the user will not be added to the team. Can be either \"me\" or the ID of the user. Only used on the client side.', exampleValue: \"me\" } });\nvar teamMemberDisplayNameSchema = yupString().meta({ openapiField: { description: _displayNameDescription(\"team member\") + \" Note that this is separate from the display_name of the user.\", exampleValue: \"John Doe\" } });\nvar teamMemberProfileImageUrlSchema = urlSchema.max(1e6).meta({ openapiField: { description: _profileImageUrlDescription(\"team member\"), exampleValue: \"https://example.com/image.jpg\" } });\nvar contactChannelIdSchema = yupString().uuid().meta({ openapiField: { description: _idDescription(\"contact channel\"), exampleValue: \"b3d396b8-c574-4c80-97b3-50031675ceb2\" } });\nvar contactChannelTypeSchema = yupString().oneOf([\"email\"]).meta({ openapiField: { description: `The type of the contact channel. Currently only \"email\" is supported.`, exampleValue: \"email\" } });\nvar contactChannelValueSchema = yupString().when(\"type\", {\n  is: \"email\",\n  then: (schema) => schema.email()\n}).meta({ openapiField: { description: \"The value of the contact channel. For email, this should be a valid email address.\", exampleValue: \"johndoe@example.com\" } });\nvar contactChannelUsedForAuthSchema = yupBoolean().meta({ openapiField: { description: \"Whether the contact channel is used for authentication. If this is set to `true`, the user will be able to sign in with the contact channel with password or OTP.\", exampleValue: true } });\nvar contactChannelIsVerifiedSchema = yupBoolean().meta({ openapiField: { description: \"Whether the contact channel has been verified. If this is set to `true`, the contact channel has been verified to belong to the user.\", exampleValue: true } });\nvar contactChannelIsPrimarySchema = yupBoolean().meta({ openapiField: { description: \"Whether the contact channel is the primary contact channel. If this is set to `true`, it will be used for authentication and notifications by default.\", exampleValue: true } });\nvar oauthProviderIdSchema = yupString().uuid().meta({ openapiField: { description: _idDescription(\"OAuth provider\"), exampleValue: \"b3d396b8-c574-4c80-97b3-50031675ceb2\" } });\nvar oauthProviderEmailSchema = emailSchema.meta({ openapiField: { description: \"Email of the OAuth provider. This is used to display and identify the OAuth provider in the UI.\", exampleValue: \"test@gmail.com\" } });\nvar oauthProviderTypeSchema = yupString().oneOf(_utils_oauth_js__WEBPACK_IMPORTED_MODULE_6__.allProviders).meta({ openapiField: { description: `OAuth provider type, one of ${_utils_oauth_js__WEBPACK_IMPORTED_MODULE_6__.allProviders.map((x) => `\\`${x}\\``).join(\", \")}`, exampleValue: \"google\" } });\nvar oauthProviderAllowSignInSchema = yupBoolean().meta({ openapiField: { description: \"Whether the user can use this OAuth provider to sign in. Only one OAuth provider per type can have this set to `true`.\", exampleValue: true } });\nvar oauthProviderAllowConnectedAccountsSchema = yupBoolean().meta({ openapiField: { description: \"Whether the user can use this OAuth provider as connected account. Multiple OAuth providers per type can have this set to `true`.\", exampleValue: true } });\nvar oauthProviderAccountIdSchema = yupString().meta({ openapiField: { description: \"Account ID of the OAuth provider. This uniquely identifies the account on the provider side.\", exampleValue: \"google-account-id-12345\" } });\nvar oauthProviderProviderConfigIdSchema = yupString().meta({ openapiField: { description: \"Provider config ID of the OAuth provider. This uniquely identifies the provider config on config.json file\", exampleValue: \"google\" } });\nvar basicAuthorizationHeaderSchema = yupString().test(\"is-basic-authorization-header\", 'Authorization header must be in the format \"Basic <base64>\"', (value) => {\n  if (!value) return true;\n  return (0,_utils_http_js__WEBPACK_IMPORTED_MODULE_5__.decodeBasicAuthorizationHeader)(value) !== null;\n});\nvar neonAuthorizationHeaderSchema = basicAuthorizationHeaderSchema.test(\"is-authorization-header\", \"Invalid client_id:client_secret values; did you use the correct values for the integration?\", (value) => {\n  if (!value) return true;\n  const [clientId, clientSecret] = (0,_utils_http_js__WEBPACK_IMPORTED_MODULE_5__.decodeBasicAuthorizationHeader)(value) ?? (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_4__.throwErr)(`Authz header invalid? This should've been validated by basicAuthorizationHeaderSchema: ${value}`);\n  for (const neonClientConfig of JSON.parse(process.env.STACK_INTEGRATION_CLIENTS_CONFIG || \"[]\")) {\n    if (clientId === neonClientConfig.client_id && clientSecret === neonClientConfig.client_secret) return true;\n  }\n  return false;\n});\nfunction yupDefinedWhen(schema, triggers) {\n  const entries = Object.entries(triggers);\n  return schema.when(entries.map(([key]) => key), {\n    is: (...values) => entries.every(([key, value], index) => value === values[index]),\n    then: (schema2) => schema2.defined(),\n    otherwise: (schema2) => schema2.optional()\n  });\n}\nfunction yupDefinedAndNonEmptyWhen(schema, triggers) {\n  const entries = Object.entries(triggers);\n  return schema.when(entries.map(([key]) => key), {\n    is: (...values) => entries.every(([key, value], index) => value === values[index]),\n    then: (schema2) => schema2.defined().nonEmpty(),\n    otherwise: (schema2) => schema2.optional()\n  });\n}\n\n//# sourceMappingURL=schema-fields.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vc2NoZW1hLWZpZWxkcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQzJCO0FBQ3FCO0FBQ0o7QUFDeUI7QUFDSDtBQUNEO0FBQ2pCO0FBQzRCO0FBQzlCO0FBQzZCO0FBQ2pDO0FBQzFDO0FBQ0EsMENBQWEsQ0FBQyx1Q0FBVTtBQUN4QjtBQUNBO0FBQ0EsbUJBQW1CLE1BQU0sUUFBUSxNQUFNO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELDBDQUFhLENBQUMsdUNBQVU7QUFDeEIsbURBQW1ELGlFQUFtQixpS0FBaUsscUJBQXFCO0FBQzVQO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBLE1BQU0sc0NBQVM7QUFDZjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsMENBQWEsQ0FBQyx1Q0FBVTtBQUN4QixtREFBbUQsaUVBQW1CLGlLQUFpSyxLQUFLO0FBQzVPLHVDQUF1QyxpRUFBbUIsMkZBQTJGLEtBQUssS0FBSyxvQkFBb0I7QUFDbkw7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0osV0FBVyxzQ0FBUztBQUNw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QTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUE0SUU7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2dmeDJlZGVub2FzaXMvRG93bmxvYWRzL0RldmVsb3BtZW50L0VzcGFkYS9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vc2NoZW1hLWZpZWxkcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvc2NoZW1hLWZpZWxkcy50c1xuaW1wb3J0ICogYXMgeXVwIGZyb20gXCJ5dXBcIjtcbmltcG9ydCB7IEtub3duRXJyb3JzIH0gZnJvbSBcIi4va25vd24tZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBpc0Jhc2U2NCB9IGZyb20gXCIuL3V0aWxzL2J5dGVzLmpzXCI7XG5pbXBvcnQgeyBTVVBQT1JURURfQ1VSUkVOQ0lFUyB9IGZyb20gXCIuL3V0aWxzL2N1cnJlbmN5LWNvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciwgdGhyb3dFcnIgfSBmcm9tIFwiLi91dGlscy9lcnJvcnMuanNcIjtcbmltcG9ydCB7IGRlY29kZUJhc2ljQXV0aG9yaXphdGlvbkhlYWRlciB9IGZyb20gXCIuL3V0aWxzL2h0dHAuanNcIjtcbmltcG9ydCB7IGFsbFByb3ZpZGVycyB9IGZyb20gXCIuL3V0aWxzL29hdXRoLmpzXCI7XG5pbXBvcnQgeyBkZWVwUGxhaW5DbG9uZSwgb21pdCwgdHlwZWRGcm9tRW50cmllcyB9IGZyb20gXCIuL3V0aWxzL29iamVjdHMuanNcIjtcbmltcG9ydCB7IGRlaW5kZW50IH0gZnJvbSBcIi4vdXRpbHMvc3RyaW5ncy5qc1wiO1xuaW1wb3J0IHsgaXNWYWxpZEhvc3RuYW1lV2l0aFdpbGRjYXJkcywgaXNWYWxpZFVybCB9IGZyb20gXCIuL3V0aWxzL3VybHMuanNcIjtcbmltcG9ydCB7IGlzVXVpZCB9IGZyb20gXCIuL3V0aWxzL3V1aWRzLmpzXCI7XG52YXIgTUFYX0lNQUdFX1NJWkVfQkFTRTY0X0JZVEVTID0gMWU2O1xueXVwLmFkZE1ldGhvZCh5dXAuc3RyaW5nLCBcIm5vbkVtcHR5XCIsIGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgcmV0dXJuIHRoaXMudGVzdChcbiAgICBcIm5vbi1lbXB0eVwiLFxuICAgIG1lc3NhZ2UgPz8gKCh7IHBhdGggfSkgPT4gYCR7cGF0aH0gbXVzdCBub3QgYmUgZW1wdHlgKSxcbiAgICAodmFsdWUpID0+IHtcbiAgICAgIHJldHVybiB2YWx1ZSAhPT0gXCJcIjtcbiAgICB9XG4gICk7XG59KTtcbnl1cC5hZGRNZXRob2QoeXVwLlNjaGVtYSwgXCJoYXNOZXN0ZWRcIiwgZnVuY3Rpb24ocGF0aCkge1xuICBpZiAoIXBhdGgubWF0Y2goL15bYS16QS1aMC05XyQ6LV0rJC8pKSB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihgeXVwU2NoZW1hLmhhc05lc3RlZCBjYW4gY3VycmVudGx5IG9ubHkgYmUgdXNlZCB3aXRoIGFscGhhbnVtZXJpYyBrZXlzLCB1bmRlcnNjb3JlcywgZG9sbGFyIHNpZ25zLCBjb2xvbnMsIGFuZCBoeXBoZW5zLiBGaXggdGhpcyBpbiB0aGUgZnV0dXJlLiBQcm92aWRlZCBrZXk6ICR7SlNPTi5zdHJpbmdpZnkocGF0aCl9YCk7XG4gIGNvbnN0IHNjaGVtYUluZm8gPSB0aGlzLm1ldGEoKT8uc3RhY2tTY2hlbWFJbmZvO1xuICBpZiAoc2NoZW1hSW5mbz8udHlwZSA9PT0gXCJyZWNvcmRcIikge1xuICAgIHJldHVybiBzY2hlbWFJbmZvLmtleVNjaGVtYS5pc1ZhbGlkU3luYyhwYXRoKTtcbiAgfSBlbHNlIGlmIChzY2hlbWFJbmZvPy50eXBlID09PSBcInVuaW9uXCIpIHtcbiAgICByZXR1cm4gc2NoZW1hSW5mby5pdGVtcy5zb21lKChzKSA9PiBzLmhhc05lc3RlZChwYXRoKSk7XG4gIH0gZWxzZSB7XG4gICAgdHJ5IHtcbiAgICAgIHl1cC5yZWFjaCh0aGlzLCBwYXRoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5tZXNzYWdlLmluY2x1ZGVzKFwiVGhlIHNjaGVtYSBkb2VzIG5vdCBjb250YWluIHRoZSBwYXRoXCIpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9XG59KTtcbnl1cC5hZGRNZXRob2QoeXVwLlNjaGVtYSwgXCJnZXROZXN0ZWRcIiwgZnVuY3Rpb24ocGF0aCkge1xuICBpZiAoIXBhdGgubWF0Y2goL15bYS16QS1aMC05XyQ6LV0rJC8pKSB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihgeXVwU2NoZW1hLmdldE5lc3RlZCBjYW4gY3VycmVudGx5IG9ubHkgYmUgdXNlZCB3aXRoIGFscGhhbnVtZXJpYyBrZXlzLCB1bmRlcnNjb3JlcywgZG9sbGFyIHNpZ25zLCBjb2xvbnMsIGFuZCBoeXBoZW5zLiBGaXggdGhpcyBpbiB0aGUgZnV0dXJlLiBQcm92aWRlZCBrZXk6ICR7cGF0aH1gKTtcbiAgaWYgKCF0aGlzLmhhc05lc3RlZChwYXRoKSkgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoYFRyaWVkIHRvIGNhbGwgeXVwU2NoZW1hLmdldE5lc3RlZCwgYnV0IGtleSBpcyBub3QgcHJlc2VudCBpbiB0aGUgc2NoZW1hLiBQcm92aWRlZCBrZXk6ICR7cGF0aH1gLCB7IHBhdGgsIHNjaGVtYTogdGhpcyB9KTtcbiAgY29uc3Qgc2NoZW1hSW5mbyA9IHRoaXMubWV0YSgpPy5zdGFja1NjaGVtYUluZm87XG4gIGlmIChzY2hlbWFJbmZvPy50eXBlID09PSBcInJlY29yZFwiKSB7XG4gICAgcmV0dXJuIHNjaGVtYUluZm8udmFsdWVTY2hlbWE7XG4gIH0gZWxzZSBpZiAoc2NoZW1hSW5mbz8udHlwZSA9PT0gXCJ1bmlvblwiKSB7XG4gICAgY29uc3Qgc2NoZW1hc1dpdGhOZXN0ZWQgPSBzY2hlbWFJbmZvLml0ZW1zLmZpbHRlcigocykgPT4gcy5oYXNOZXN0ZWQocGF0aCkpO1xuICAgIHJldHVybiB5dXBVbmlvbiguLi5zY2hlbWFzV2l0aE5lc3RlZC5tYXAoKHMpID0+IHMuZ2V0TmVzdGVkKHBhdGgpKSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHl1cC5yZWFjaCh0aGlzLCBwYXRoKTtcbiAgfVxufSk7XG5hc3luYyBmdW5jdGlvbiB5dXBWYWxpZGF0ZShzY2hlbWEsIG9iaiwgb3B0aW9ucykge1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBzY2hlbWEudmFsaWRhdGUob2JqLCB7XG4gICAgICAuLi5vbWl0KG9wdGlvbnMgPz8ge30sIFtcImN1cnJlbnRVc2VySWRcIl0pLFxuICAgICAgY29udGV4dDoge1xuICAgICAgICAuLi5vcHRpb25zPy5jb250ZXh0LFxuICAgICAgICBzdGFja0FsbG93VXNlcklkTWU6IG9wdGlvbnM/LmN1cnJlbnRVc2VySWQgIT09IHZvaWQgMFxuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFJlcGxhY2VGaWVsZFdpdGhPd25Vc2VySWQpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VySWQgPSBvcHRpb25zPy5jdXJyZW50VXNlcklkO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcklkKSB0aHJvdyBuZXcgS25vd25FcnJvcnMuQ2Fubm90R2V0T3duVXNlcldpdGhvdXRVc2VyKCk7XG4gICAgICBsZXQgcGF0aFJlbWFpbmluZyA9IGVycm9yLnBhdGg7XG4gICAgICBjb25zdCBmaWVsZFBhdGggPSBbXTtcbiAgICAgIHdoaWxlIChwYXRoUmVtYWluaW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKHBhdGhSZW1haW5pbmcuc3RhcnRzV2l0aChcIltcIikpIHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHBhdGhSZW1haW5pbmcuaW5kZXhPZihcIl1cIik7XG4gICAgICAgICAgaWYgKGluZGV4IDwgMCkgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJJbnZhbGlkIHBhdGhcIik7XG4gICAgICAgICAgZmllbGRQYXRoLnB1c2goSlNPTi5wYXJzZShwYXRoUmVtYWluaW5nLnNsaWNlKDEsIGluZGV4KSkpO1xuICAgICAgICAgIHBhdGhSZW1haW5pbmcgPSBwYXRoUmVtYWluaW5nLnNsaWNlKGluZGV4ICsgMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGV0IGRvdEluZGV4ID0gcGF0aFJlbWFpbmluZy5pbmRleE9mKFwiLlwiKTtcbiAgICAgICAgICBpZiAoZG90SW5kZXggPT09IC0xKSBkb3RJbmRleCA9IHBhdGhSZW1haW5pbmcubGVuZ3RoO1xuICAgICAgICAgIGZpZWxkUGF0aC5wdXNoKHBhdGhSZW1haW5pbmcuc2xpY2UoMCwgZG90SW5kZXgpKTtcbiAgICAgICAgICBwYXRoUmVtYWluaW5nID0gcGF0aFJlbWFpbmluZy5zbGljZShkb3RJbmRleCArIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBuZXdPYmogPSBkZWVwUGxhaW5DbG9uZShvYmopO1xuICAgICAgbGV0IGl0ID0gbmV3T2JqO1xuICAgICAgZm9yIChjb25zdCBmaWVsZCBvZiBmaWVsZFBhdGguc2xpY2UoMCwgLTEpKSB7XG4gICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGl0LCBmaWVsZCkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihgU2VnbWVudCAke2ZpZWxkfSBvZiBwYXRoICR7ZXJyb3IucGF0aH0gbm90IGZvdW5kIGluIG9iamVjdGApO1xuICAgICAgICB9XG4gICAgICAgIGl0ID0gaXRbZmllbGRdO1xuICAgICAgfVxuICAgICAgaXRbZmllbGRQYXRoW2ZpZWxkUGF0aC5sZW5ndGggLSAxXV0gPSBjdXJyZW50VXNlcklkO1xuICAgICAgcmV0dXJuIGF3YWl0IHl1cFZhbGlkYXRlKHNjaGVtYSwgbmV3T2JqLCBvcHRpb25zKTtcbiAgICB9XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cbnZhciBfaWREZXNjcmlwdGlvbiA9IChpZGVudGlmeSkgPT4gYFRoZSB1bmlxdWUgaWRlbnRpZmllciBvZiB0aGUgJHtpZGVudGlmeX1gO1xudmFyIF9kaXNwbGF5TmFtZURlc2NyaXB0aW9uID0gKGlkZW50aWZ5KSA9PiBgSHVtYW4tcmVhZGFibGUgJHtpZGVudGlmeX0gZGlzcGxheSBuYW1lLiBUaGlzIGlzIG5vdCBhIHVuaXF1ZSBpZGVudGlmaWVyLmA7XG52YXIgX2NsaWVudE1ldGFEYXRhRGVzY3JpcHRpb24gPSAoaWRlbnRpZnkpID0+IGBDbGllbnQgbWV0YWRhdGEuIFVzZWQgYXMgYSBkYXRhIHN0b3JlLCBhY2Nlc3NpYmxlIGZyb20gdGhlIGNsaWVudCBzaWRlLiBEbyBub3Qgc3RvcmUgaW5mb3JtYXRpb24gdGhhdCBzaG91bGQgbm90IGJlIGV4cG9zZWQgdG8gdGhlIGNsaWVudC5gO1xudmFyIF9jbGllbnRSZWFkT25seU1ldGFEYXRhRGVzY3JpcHRpb24gPSAoaWRlbnRpZnkpID0+IGBDbGllbnQgcmVhZC1vbmx5LCBzZXJ2ZXItd3JpdGFibGUgbWV0YWRhdGEuIFVzZWQgYXMgYSBkYXRhIHN0b3JlLCBhY2Nlc3NpYmxlIGZyb20gdGhlIGNsaWVudCBzaWRlLiBEbyBub3Qgc3RvcmUgaW5mb3JtYXRpb24gdGhhdCBzaG91bGQgbm90IGJlIGV4cG9zZWQgdG8gdGhlIGNsaWVudC4gVGhlIGNsaWVudCBjYW4gcmVhZCB0aGlzIGRhdGEsIGJ1dCBjYW5ub3QgbW9kaWZ5IGl0LiBUaGlzIGlzIHVzZWZ1bCBmb3IgdGhpbmdzIGxpa2Ugc3Vic2NyaXB0aW9uIHN0YXR1cy5gO1xudmFyIF9wcm9maWxlSW1hZ2VVcmxEZXNjcmlwdGlvbiA9IChpZGVudGlmeSkgPT4gYFVSTCBvZiB0aGUgcHJvZmlsZSBpbWFnZSBmb3IgJHtpZGVudGlmeX0uIENhbiBiZSBhIEJhc2U2NCBlbmNvZGVkIGltYWdlLiBNdXN0IGJlIHNtYWxsZXIgdGhhbiAxMDBLQi4gUGxlYXNlIGNvbXByZXNzIGFuZCBjcm9wIHRvIGEgc3F1YXJlIGJlZm9yZSBwYXNzaW5nIGluLmA7XG52YXIgX3NlcnZlck1ldGFEYXRhRGVzY3JpcHRpb24gPSAoaWRlbnRpZnkpID0+IGBTZXJ2ZXIgbWV0YWRhdGEuIFVzZWQgYXMgYSBkYXRhIHN0b3JlLCBvbmx5IGFjY2Vzc2libGUgZnJvbSB0aGUgc2VydmVyIHNpZGUuIFlvdSBjYW4gc3RvcmUgc2VjcmV0IGluZm9ybWF0aW9uIHJlbGF0ZWQgdG8gdGhlICR7aWRlbnRpZnl9IGhlcmUuYDtcbnZhciBfYXRNaWxsaXNEZXNjcmlwdGlvbiA9IChpZGVudGlmeSkgPT4gYCh0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSBlcG9jaCwgSmFudWFyeSAxLCAxOTcwLCBVVEMpYDtcbnZhciBfY3JlYXRlZEF0TWlsbGlzRGVzY3JpcHRpb24gPSAoaWRlbnRpZnkpID0+IGBUaGUgdGltZSB0aGUgJHtpZGVudGlmeX0gd2FzIGNyZWF0ZWQgJHtfYXRNaWxsaXNEZXNjcmlwdGlvbihpZGVudGlmeSl9YDtcbnZhciBfc2lnbmVkVXBBdE1pbGxpc0Rlc2NyaXB0aW9uID0gYFRoZSB0aW1lIHRoZSB1c2VyIHNpZ25lZCB1cCAke19hdE1pbGxpc0Rlc2NyaXB0aW9ufWA7XG52YXIgX2xhc3RBY3RpdmVBdE1pbGxpc0Rlc2NyaXB0aW9uID0gYFRoZSB0aW1lIHRoZSB1c2VyIHdhcyBsYXN0IGFjdGl2ZSAke19hdE1pbGxpc0Rlc2NyaXB0aW9ufWA7XG5mdW5jdGlvbiB5dXBTdHJpbmcoLi4uYXJncykge1xuICByZXR1cm4geXVwLnN0cmluZyguLi5hcmdzKS5tZXRhKHsgc3RhY2tTY2hlbWFJbmZvOiB7IHR5cGU6IFwic3RyaW5nXCIgfSB9KTtcbn1cbmZ1bmN0aW9uIHl1cE51bWJlciguLi5hcmdzKSB7XG4gIHJldHVybiB5dXAubnVtYmVyKC4uLmFyZ3MpLm1ldGEoeyBzdGFja1NjaGVtYUluZm86IHsgdHlwZTogXCJudW1iZXJcIiB9IH0pO1xufVxuZnVuY3Rpb24geXVwQm9vbGVhbiguLi5hcmdzKSB7XG4gIHJldHVybiB5dXAuYm9vbGVhbiguLi5hcmdzKS5tZXRhKHsgc3RhY2tTY2hlbWFJbmZvOiB7IHR5cGU6IFwiYm9vbGVhblwiIH0gfSk7XG59XG5mdW5jdGlvbiB5dXBEYXRlKC4uLmFyZ3MpIHtcbiAgcmV0dXJuIHl1cC5kYXRlKC4uLmFyZ3MpLm1ldGEoeyBzdGFja1NjaGVtYUluZm86IHsgdHlwZTogXCJkYXRlXCIgfSB9KTtcbn1cbmZ1bmN0aW9uIF95dXBNaXhlZEludGVybmFsKC4uLmFyZ3MpIHtcbiAgcmV0dXJuIHl1cC5taXhlZCguLi5hcmdzKTtcbn1cbmZ1bmN0aW9uIHl1cE1peGVkKC4uLmFyZ3MpIHtcbiAgcmV0dXJuIF95dXBNaXhlZEludGVybmFsKC4uLmFyZ3MpLm1ldGEoeyBzdGFja1NjaGVtYUluZm86IHsgdHlwZTogXCJtaXhlZFwiIH0gfSk7XG59XG5mdW5jdGlvbiB5dXBBcnJheSguLi5hcmdzKSB7XG4gIHJldHVybiB5dXAuYXJyYXkoLi4uYXJncykubWV0YSh7IHN0YWNrU2NoZW1hSW5mbzogeyB0eXBlOiBcImFycmF5XCIgfSB9KTtcbn1cbmZ1bmN0aW9uIHl1cFR1cGxlKHNjaGVtYXMpIHtcbiAgaWYgKHNjaGVtYXMubGVuZ3RoID09PSAwKSB0aHJvdyBuZXcgRXJyb3IoXCJ5dXBUdXBsZSBtdXN0IGhhdmUgYXQgbGVhc3Qgb25lIHNjaGVtYVwiKTtcbiAgcmV0dXJuIHl1cC50dXBsZShzY2hlbWFzKS5tZXRhKHsgc3RhY2tTY2hlbWFJbmZvOiB7IHR5cGU6IFwidHVwbGVcIiwgaXRlbXM6IHNjaGVtYXMgfSB9KTtcbn1cbmZ1bmN0aW9uIHl1cE9iamVjdFdpdGhBdXRvRGVmYXVsdCguLi5hcmdzKSB7XG4gIGNvbnN0IG9iamVjdDIgPSB5dXAub2JqZWN0KC4uLmFyZ3MpLnRlc3QoXG4gICAgXCJuby11bmtub3duLW9iamVjdC1wcm9wZXJ0aWVzXCIsXG4gICAgKHsgcGF0aCB9KSA9PiBgJHtwYXRofSBjb250YWlucyB1bmtub3duIHByb3BlcnRpZXNgLFxuICAgICh2YWx1ZSwgY29udGV4dCkgPT4ge1xuICAgICAgaWYgKGNvbnRleHQub3B0aW9ucy5jb250ZXh0Py5ub1Vua25vd25QYXRoUHJlZml4ZXM/LnNvbWUoKHByZWZpeCkgPT4gY29udGV4dC5wYXRoLnN0YXJ0c1dpdGgocHJlZml4KSkpIHtcbiAgICAgICAgaWYgKGNvbnRleHQuc2NoZW1hLnNwZWMubm9Vbmtub3duICE9PSBmYWxzZSkge1xuICAgICAgICAgIGNvbnN0IGF2YWlsYWJsZUtleXMgPSBuZXcgU2V0KE9iamVjdC5rZXlzKGNvbnRleHQuc2NoZW1hLmZpZWxkcykpO1xuICAgICAgICAgIGNvbnN0IHVua25vd25LZXlzID0gT2JqZWN0LmtleXModmFsdWUgPz8ge30pLmZpbHRlcigoa2V5KSA9PiAhYXZhaWxhYmxlS2V5cy5oYXMoa2V5KSk7XG4gICAgICAgICAgaWYgKHVua25vd25LZXlzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmNyZWF0ZUVycm9yKHtcbiAgICAgICAgICAgICAgbWVzc2FnZTogYCR7Y29udGV4dC5wYXRoIHx8IFwiT2JqZWN0XCJ9IGNvbnRhaW5zIHVua25vd24gcHJvcGVydGllczogJHt1bmtub3duS2V5cy5qb2luKFwiLCBcIil9YCxcbiAgICAgICAgICAgICAgcGF0aDogY29udGV4dC5wYXRoLFxuICAgICAgICAgICAgICBwYXJhbXM6IHsgdW5rbm93bktleXMsIGF2YWlsYWJsZUtleXMgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICkubWV0YSh7IHN0YWNrU2NoZW1hSW5mbzogeyB0eXBlOiBcIm9iamVjdFwiIH0gfSk7XG4gIHJldHVybiBvYmplY3QyO1xufVxuZnVuY3Rpb24geXVwT2JqZWN0KC4uLmFyZ3MpIHtcbiAgY29uc3Qgb2JqZWN0MiA9IHl1cE9iamVjdFdpdGhBdXRvRGVmYXVsdCguLi5hcmdzKTtcbiAgcmV0dXJuIG9iamVjdDIuZGVmYXVsdCh2b2lkIDApO1xufVxuZnVuY3Rpb24geXVwTmV2ZXIoKSB7XG4gIHJldHVybiBfeXVwTWl4ZWRJbnRlcm5hbCgpLm1ldGEoeyBzdGFja1NjaGVtYUluZm86IHsgdHlwZTogXCJuZXZlclwiIH0gfSkudGVzdChcIm5ldmVyXCIsIFwiVGhpcyB2YWx1ZSBzaG91bGQgbmV2ZXIgYmUgcmVhY2hlZFwiLCAoKSA9PiBmYWxzZSk7XG59XG5mdW5jdGlvbiB5dXBVbmlvbiguLi5hcmdzKSB7XG4gIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkgdGhyb3cgbmV3IEVycm9yKFwieXVwVW5pb24gbXVzdCBoYXZlIGF0IGxlYXN0IG9uZSBzY2hlbWFcIik7XG4gIHJldHVybiBfeXVwTWl4ZWRJbnRlcm5hbCgpLm1ldGEoeyBzdGFja1NjaGVtYUluZm86IHsgdHlwZTogXCJ1bmlvblwiLCBpdGVtczogYXJncyB9IH0pLnRlc3QoXCJpcy1vbmUtb2ZcIiwgXCJJbnZhbGlkIHZhbHVlXCIsIGFzeW5jICh2YWx1ZSwgY29udGV4dCkgPT4ge1xuICAgIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgICBjb25zdCBlcnJvcnMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHNjaGVtYSBvZiBhcmdzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB5dXBWYWxpZGF0ZShzY2hlbWEsIHZhbHVlLCBjb250ZXh0Lm9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgZXJyb3JzLnB1c2goZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb250ZXh0LmNyZWF0ZUVycm9yKHtcbiAgICAgIG1lc3NhZ2U6IGRlaW5kZW50YFxuICAgICAgICAke2NvbnRleHQucGF0aH0gaXMgbm90IG1hdGNoZWQgYnkgYW55IG9mIHRoZSBwcm92aWRlZCBzY2hlbWFzOlxuICAgICAgICAgICR7ZXJyb3JzLm1hcCgoZSwgaSkgPT4gZGVpbmRlbnRgXG4gICAgICAgICAgICBTY2hlbWEgJHtpfTpcbiAgICAgICAgICAgICAgJHtlLmVycm9ycy5qb2luKFwiXFxuXCIpfVxuICAgICAgICAgIGApLmpvaW4oXCJcXG5cIil9YCxcbiAgICAgIHBhdGg6IGNvbnRleHQucGF0aFxuICAgIH0pO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHl1cFJlY29yZChrZXlTY2hlbWEsIHZhbHVlU2NoZW1hKSB7XG4gIHJldHVybiB5dXBPYmplY3QoKS5tZXRhKHsgc3RhY2tTY2hlbWFJbmZvOiB7IHR5cGU6IFwicmVjb3JkXCIsIGtleVNjaGVtYSwgdmFsdWVTY2hlbWEgfSB9KS51bmtub3duKHRydWUpLnRlc3QoXG4gICAgXCJyZWNvcmRcIixcbiAgICBcIiR7cGF0aH0gbXVzdCBiZSBhIHJlY29yZCBvZiB2YWxpZCB2YWx1ZXNcIixcbiAgICBhc3luYyBmdW5jdGlvbih2YWx1ZSwgY29udGV4dCkge1xuICAgICAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiB0cnVlO1xuICAgICAgY29uc3QgeyBwYXRoLCBjcmVhdGVFcnJvciB9ID0gdGhpcztcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVycm9yKHsgbWVzc2FnZTogYCR7cGF0aH0gbXVzdCBiZSBhbiBvYmplY3RgIH0pO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXModmFsdWUpKSB7XG4gICAgICAgIGF3YWl0IHl1cFZhbGlkYXRlKGtleVNjaGVtYSwga2V5LCBjb250ZXh0Lm9wdGlvbnMpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHl1cFZhbGlkYXRlKHZhbHVlU2NoZW1hLCB2YWx1ZVtrZXldLCB7XG4gICAgICAgICAgICAuLi5jb250ZXh0Lm9wdGlvbnMsXG4gICAgICAgICAgICBjb250ZXh0OiB7XG4gICAgICAgICAgICAgIC4uLmNvbnRleHQub3B0aW9ucy5jb250ZXh0LFxuICAgICAgICAgICAgICBwYXRoOiBwYXRoID8gYCR7cGF0aH0uJHtrZXl9YCA6IGtleVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgcmV0dXJuIGNyZWF0ZUVycm9yKHtcbiAgICAgICAgICAgIHBhdGg6IHBhdGggPyBgJHtwYXRofS4ke2tleX1gIDoga2V5LFxuICAgICAgICAgICAgbWVzc2FnZTogZS5tZXNzYWdlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgKTtcbn1cbmZ1bmN0aW9uIGVuc3VyZU9iamVjdFNjaGVtYShzY2hlbWEpIHtcbiAgaWYgKCEoc2NoZW1hIGluc3RhbmNlb2YgeXVwLk9iamVjdFNjaGVtYSkpIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKGBhc3NlcnRPYmplY3RTY2hlbWE6IHNjaGVtYSBpcyBub3QgYW4gT2JqZWN0U2NoZW1hOiAke3NjaGVtYS5kZXNjcmliZSgpLnR5cGV9YCk7XG4gIHJldHVybiBzY2hlbWE7XG59XG52YXIgYWRhcHRTY2hlbWEgPSB5dXBNaXhlZCgpO1xudmFyIHVybFNjaGVtYSA9IHl1cFN0cmluZygpLnRlc3Qoe1xuICBuYW1lOiBcIm5vLXNwYWNlc1wiLFxuICBtZXNzYWdlOiAocGFyYW1zKSA9PiBgJHtwYXJhbXMucGF0aH0gY29udGFpbnMgc3BhY2VzYCxcbiAgdGVzdDogKHZhbHVlKSA9PiB2YWx1ZSA9PSBudWxsIHx8ICF2YWx1ZS5pbmNsdWRlcyhcIiBcIilcbn0pLnRlc3Qoe1xuICBuYW1lOiBcInVybFwiLFxuICBtZXNzYWdlOiAocGFyYW1zKSA9PiBgJHtwYXJhbXMucGF0aH0gaXMgbm90IGEgdmFsaWQgVVJMYCxcbiAgdGVzdDogKHZhbHVlKSA9PiB2YWx1ZSA9PSBudWxsIHx8IGlzVmFsaWRVcmwodmFsdWUpXG59KTtcbnZhciB3aWxkY2FyZFVybFNjaGVtYSA9IHl1cFN0cmluZygpLnRlc3Qoe1xuICBuYW1lOiBcIm5vLXNwYWNlc1wiLFxuICBtZXNzYWdlOiAocGFyYW1zKSA9PiBgJHtwYXJhbXMucGF0aH0gY29udGFpbnMgc3BhY2VzYCxcbiAgdGVzdDogKHZhbHVlKSA9PiB2YWx1ZSA9PSBudWxsIHx8ICF2YWx1ZS5pbmNsdWRlcyhcIiBcIilcbn0pLnRlc3Qoe1xuICBuYW1lOiBcIndpbGRjYXJkLXVybFwiLFxuICBtZXNzYWdlOiAocGFyYW1zKSA9PiBgJHtwYXJhbXMucGF0aH0gaXMgbm90IGEgdmFsaWQgVVJMIG9yIHdpbGRjYXJkIFVSTCBwYXR0ZXJuYCxcbiAgdGVzdDogKHZhbHVlKSA9PiB7XG4gICAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiB0cnVlO1xuICAgIGlmICghdmFsdWUuaW5jbHVkZXMoXCIqXCIpKSB7XG4gICAgICByZXR1cm4gaXNWYWxpZFVybCh2YWx1ZSk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBQTEFDRUhPTERFUiA9IFwid2lsZGNhcmQtcGxhY2Vob2xkZXJcIjtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWRVcmwgPSB2YWx1ZS5yZXBsYWNlKC9cXCovZywgUExBQ0VIT0xERVIpO1xuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChub3JtYWxpemVkVXJsKTtcbiAgICAgIGlmICh1cmwudXNlcm5hbWUuaW5jbHVkZXMoUExBQ0VIT0xERVIpIHx8IHVybC5wYXNzd29yZC5pbmNsdWRlcyhQTEFDRUhPTERFUikgfHwgdXJsLnBhdGhuYW1lLmluY2x1ZGVzKFBMQUNFSE9MREVSKSB8fCB1cmwuc2VhcmNoLmluY2x1ZGVzKFBMQUNFSE9MREVSKSB8fCB1cmwuaGFzaC5pbmNsdWRlcyhQTEFDRUhPTERFUikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKHVybC5wcm90b2NvbCAhPT0gXCJodHRwOlwiICYmIHVybC5wcm90b2NvbCAhPT0gXCJodHRwczpcIikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBjb25zdCBob3N0UGF0dGVybiA9IHVybC5ob3N0bmFtZS5zcGxpdChQTEFDRUhPTERFUikuam9pbihcIipcIik7XG4gICAgICByZXR1cm4gaXNWYWxpZEhvc3RuYW1lV2l0aFdpbGRjYXJkcyhob3N0UGF0dGVybik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufSk7XG52YXIganNvblNjaGVtYSA9IHl1cE1peGVkKCkubnVsbGFibGUoKS5kZWZpbmVkKCkudHJhbnNmb3JtKCh2YWx1ZSkgPT4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh2YWx1ZSkpKTtcbnZhciBqc29uU3RyaW5nU2NoZW1hID0geXVwU3RyaW5nKCkudGVzdChcImpzb25cIiwgKHBhcmFtcykgPT4gYCR7cGFyYW1zLnBhdGh9IGlzIG5vdCB2YWxpZCBKU09OYCwgKHZhbHVlKSA9PiB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgdHJ5IHtcbiAgICBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn0pO1xudmFyIGpzb25TdHJpbmdPckVtcHR5U2NoZW1hID0geXVwU3RyaW5nKCkudGVzdChcImpzb25cIiwgKHBhcmFtcykgPT4gYCR7cGFyYW1zLnBhdGh9IGlzIG5vdCB2YWxpZCBKU09OYCwgKHZhbHVlKSA9PiB7XG4gIGlmICghdmFsdWUpIHJldHVybiB0cnVlO1xuICB0cnkge1xuICAgIEpTT04ucGFyc2UodmFsdWUpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufSk7XG52YXIgYmFzZTY0U2NoZW1hID0geXVwU3RyaW5nKCkudGVzdChcImlzLWJhc2U2NFwiLCAocGFyYW1zKSA9PiBgJHtwYXJhbXMucGF0aH0gaXMgbm90IHZhbGlkIGJhc2U2NGAsICh2YWx1ZSkgPT4ge1xuICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gIHJldHVybiBpc0Jhc2U2NCh2YWx1ZSk7XG59KTtcbnZhciBwYXNzd29yZFNjaGVtYSA9IHl1cFN0cmluZygpLm1heCg3MCk7XG52YXIgaW50ZXJ2YWxTY2hlbWEgPSB5dXBUdXBsZShbeXVwTnVtYmVyKCkubWluKDApLmludGVnZXIoKS5kZWZpbmVkKCksIHl1cFN0cmluZygpLm9uZU9mKFtcIm1pbGxpc2Vjb25kXCIsIFwic2Vjb25kXCIsIFwibWludXRlXCIsIFwiaG91clwiLCBcImRheVwiLCBcIndlZWtcIiwgXCJtb250aFwiLCBcInllYXJcIl0pLmRlZmluZWQoKV0pO1xudmFyIGRheUludGVydmFsU2NoZW1hID0geXVwVHVwbGUoW3l1cE51bWJlcigpLm1pbigwKS5pbnRlZ2VyKCkuZGVmaW5lZCgpLCB5dXBTdHJpbmcoKS5vbmVPZihbXCJkYXlcIiwgXCJ3ZWVrXCIsIFwibW9udGhcIiwgXCJ5ZWFyXCJdKS5kZWZpbmVkKCldKTtcbnZhciBpbnRlcnZhbE9yTmV2ZXJTY2hlbWEgPSB5dXBVbmlvbihpbnRlcnZhbFNjaGVtYS5kZWZpbmVkKCksIHl1cFN0cmluZygpLm9uZU9mKFtcIm5ldmVyXCJdKS5kZWZpbmVkKCkpO1xudmFyIGRheUludGVydmFsT3JOZXZlclNjaGVtYSA9IHl1cFVuaW9uKGRheUludGVydmFsU2NoZW1hLmRlZmluZWQoKSwgeXVwU3RyaW5nKCkub25lT2YoW1wibmV2ZXJcIl0pLmRlZmluZWQoKSk7XG52YXIgdXNlclNwZWNpZmllZElkU2NoZW1hID0gKGlkTmFtZSkgPT4geXVwU3RyaW5nKCkubWF4KDYzKS5tYXRjaGVzKC9eW2EtekEtWl9dW2EtekEtWjAtOV8tXSokLywgYCR7aWROYW1lfSBtdXN0IHN0YXJ0IHdpdGggYSBsZXR0ZXIsIHVuZGVyc2NvcmUsIG9yIG51bWJlciwgYW5kIGNvbnRhaW4gb25seSBsZXR0ZXJzLCBudW1iZXJzLCB1bmRlcnNjb3JlcywgYW5kIGh5cGhlbnNgKTtcbnZhciBtb25leUFtb3VudFNjaGVtYSA9IChjdXJyZW5jeSkgPT4geXVwU3RyaW5nKCkudGVzdChcIm1vbmV5LWFtb3VudFwiLCBcIkludmFsaWQgbW9uZXkgYW1vdW50XCIsICh2YWx1ZSwgY29udGV4dCkgPT4ge1xuICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gIGNvbnN0IHJlZ2V4ID0gL14oWzAtOV0rKShcXC4oWzAtOV0rKSk/JC87XG4gIGNvbnN0IG1hdGNoID0gdmFsdWUubWF0Y2gocmVnZXgpO1xuICBpZiAoIW1hdGNoKSByZXR1cm4gY29udGV4dC5jcmVhdGVFcnJvcih7IG1lc3NhZ2U6IFwiTW9uZXkgYW1vdW50IG11c3QgYmUgaW4gdGhlIGZvcm1hdCBvZiA8bnVtYmVyPiBvciA8bnVtYmVyPi48bnVtYmVyPlwiIH0pO1xuICBjb25zdCB3aG9sZSA9IG1hdGNoWzFdO1xuICBjb25zdCBkZWNpbWFscyA9IG1hdGNoWzNdO1xuICBpZiAoZGVjaW1hbHMgJiYgZGVjaW1hbHMubGVuZ3RoID4gY3VycmVuY3kuZGVjaW1hbHMpIHJldHVybiBjb250ZXh0LmNyZWF0ZUVycm9yKHsgbWVzc2FnZTogYFRvbyBtYW55IGRlY2ltYWxzOyAke2N1cnJlbmN5LmNvZGV9IG9ubHkgaGFzICR7Y3VycmVuY3kuZGVjaW1hbHN9IGRlY2ltYWxzYCB9KTtcbiAgaWYgKHdob2xlICE9PSBcIjBcIiAmJiB3aG9sZS5zdGFydHNXaXRoKFwiMFwiKSkgcmV0dXJuIGNvbnRleHQuY3JlYXRlRXJyb3IoeyBtZXNzYWdlOiBcIk1vbmV5IGFtb3VudCBtdXN0IG5vdCBoYXZlIGxlYWRpbmcgemVyb3NcIiB9KTtcbiAgcmV0dXJuIHRydWU7XG59KTtcbnZhciBzdHJpY3RFbWFpbFNjaGVtYSA9IChtZXNzYWdlKSA9PiB5dXBTdHJpbmcoKS5lbWFpbChtZXNzYWdlKS5tYXgoMjU2KS5tYXRjaGVzKC9eW14uXSsoXFwuW14uXSspKkAuKlxcLlteLl1bXi5dKyQvLCBtZXNzYWdlKTtcbnZhciBlbWFpbFNjaGVtYSA9IHl1cFN0cmluZygpLmVtYWlsKCk7XG52YXIgY2xpZW50T3JIaWdoZXJBdXRoVHlwZVNjaGVtYSA9IHl1cFN0cmluZygpLm9uZU9mKFtcImNsaWVudFwiLCBcInNlcnZlclwiLCBcImFkbWluXCJdKS5kZWZpbmVkKCk7XG52YXIgc2VydmVyT3JIaWdoZXJBdXRoVHlwZVNjaGVtYSA9IHl1cFN0cmluZygpLm9uZU9mKFtcInNlcnZlclwiLCBcImFkbWluXCJdKS5kZWZpbmVkKCk7XG52YXIgYWRtaW5BdXRoVHlwZVNjaGVtYSA9IHl1cFN0cmluZygpLm9uZU9mKFtcImFkbWluXCJdKS5kZWZpbmVkKCk7XG52YXIgcHJvamVjdElkU2NoZW1hID0geXVwU3RyaW5nKCkudGVzdCgodikgPT4gdiA9PT0gdm9pZCAwIHx8IHYgPT09IFwiaW50ZXJuYWxcIiB8fCBpc1V1aWQodikpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IF9pZERlc2NyaXB0aW9uKFwicHJvamVjdFwiKSwgZXhhbXBsZVZhbHVlOiBcImUwYjUyZjRkLWRlY2UtNDA4Yy1hZjQ5LWQyMzA2MWJiMGY4ZFwiIH0gfSk7XG52YXIgcHJvamVjdEJyYW5jaElkU2NoZW1hID0geXVwU3RyaW5nKCkubm9uRW1wdHkoKS5tYXgoMjU1KS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBfaWREZXNjcmlwdGlvbihcInByb2plY3QgYnJhbmNoXCIpLCBleGFtcGxlVmFsdWU6IFwibWFpblwiIH0gfSk7XG52YXIgcHJvamVjdERpc3BsYXlOYW1lU2NoZW1hID0geXVwU3RyaW5nKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogX2Rpc3BsYXlOYW1lRGVzY3JpcHRpb24oXCJwcm9qZWN0XCIpLCBleGFtcGxlVmFsdWU6IFwiTXlNdXNpY1wiIH0gfSk7XG52YXIgcHJvamVjdExvZ29VcmxTY2hlbWEgPSB1cmxTY2hlbWEubWF4KE1BWF9JTUFHRV9TSVpFX0JBU0U2NF9CWVRFUykubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJVUkwgb2YgdGhlIGxvZ28gZm9yIHRoZSBwcm9qZWN0LiBUaGlzIGlzIHVzdWFsbHkgYSBjbG9zZSB0byAxOjEgaW1hZ2Ugb2YgdGhlIGNvbXBhbnkgbG9nby5cIiwgZXhhbXBsZVZhbHVlOiBcImh0dHBzOi8vZXhhbXBsZS5jb20vbG9nby5wbmdcIiB9IH0pO1xudmFyIHByb2plY3RGdWxsTG9nb1VybFNjaGVtYSA9IHVybFNjaGVtYS5tYXgoTUFYX0lNQUdFX1NJWkVfQkFTRTY0X0JZVEVTKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIlVSTCBvZiB0aGUgZnVsbCBsb2dvIGZvciB0aGUgcHJvamVjdC4gVGhpcyBpcyB1c3VhbGx5IGEgdmVydGljYWwgaW1hZ2Ugd2l0aCB0aGUgbG9nbyBhbmQgdGhlIGNvbXBhbnkgbmFtZS5cIiwgZXhhbXBsZVZhbHVlOiBcImh0dHBzOi8vZXhhbXBsZS5jb20vZnVsbC1sb2dvLnBuZ1wiIH0gfSk7XG52YXIgcHJvamVjdERlc2NyaXB0aW9uU2NoZW1hID0geXVwU3RyaW5nKCkubnVsbGFibGUoKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIkEgaHVtYW4gcmVhZGFibGUgZGVzY3JpcHRpb24gb2YgdGhlIHByb2plY3RcIiwgZXhhbXBsZVZhbHVlOiBcIkEgbXVzaWMgc3RyZWFtaW5nIHNlcnZpY2VcIiB9IH0pO1xudmFyIHByb2plY3RDcmVhdGVkQXRNaWxsaXNTY2hlbWEgPSB5dXBOdW1iZXIoKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBfY3JlYXRlZEF0TWlsbGlzRGVzY3JpcHRpb24oXCJwcm9qZWN0XCIpLCBleGFtcGxlVmFsdWU6IDE2M2UxMCB9IH0pO1xudmFyIHByb2plY3RJc1Byb2R1Y3Rpb25Nb2RlU2NoZW1hID0geXVwQm9vbGVhbigpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiV2hldGhlciB0aGUgcHJvamVjdCBpcyBpbiBwcm9kdWN0aW9uIG1vZGVcIiwgZXhhbXBsZVZhbHVlOiB0cnVlIH0gfSk7XG52YXIgcHJvamVjdENvbmZpZ0lkU2NoZW1hID0geXVwU3RyaW5nKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogX2lkRGVzY3JpcHRpb24oXCJwcm9qZWN0IGNvbmZpZ1wiKSwgZXhhbXBsZVZhbHVlOiBcImQwOTIwMWYwLTU0ZjUtNDBiZC04OWZmLTZkMTgxNWRkYWQyNFwiIH0gfSk7XG52YXIgcHJvamVjdEFsbG93TG9jYWxob3N0U2NoZW1hID0geXVwQm9vbGVhbigpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiV2hldGhlciBsb2NhbGhvc3QgaXMgYWxsb3dlZCBhcyBhIGRvbWFpbiBmb3IgdGhpcyBwcm9qZWN0LiBTaG91bGQgb25seSBiZSBhbGxvd2VkIGluIGRldmVsb3BtZW50IG1vZGVcIiwgZXhhbXBsZVZhbHVlOiB0cnVlIH0gfSk7XG52YXIgcHJvamVjdENyZWF0ZVRlYW1PblNpZ25VcFNjaGVtYSA9IHl1cEJvb2xlYW4oKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIldoZXRoZXIgYSB0ZWFtIHNob3VsZCBiZSBjcmVhdGVkIGZvciBlYWNoIHVzZXIgdGhhdCBzaWducyB1cFwiLCBleGFtcGxlVmFsdWU6IHRydWUgfSB9KTtcbnZhciBwcm9qZWN0TWFnaWNMaW5rRW5hYmxlZFNjaGVtYSA9IHl1cEJvb2xlYW4oKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIldoZXRoZXIgbWFnaWMgbGluayBhdXRoZW50aWNhdGlvbiBpcyBlbmFibGVkIGZvciB0aGlzIHByb2plY3RcIiwgZXhhbXBsZVZhbHVlOiB0cnVlIH0gfSk7XG52YXIgcHJvamVjdFBhc3NrZXlFbmFibGVkU2NoZW1hID0geXVwQm9vbGVhbigpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiV2hldGhlciBwYXNza2V5IGF1dGhlbnRpY2F0aW9uIGlzIGVuYWJsZWQgZm9yIHRoaXMgcHJvamVjdFwiLCBleGFtcGxlVmFsdWU6IHRydWUgfSB9KTtcbnZhciBwcm9qZWN0Q2xpZW50VGVhbUNyZWF0aW9uRW5hYmxlZFNjaGVtYSA9IHl1cEJvb2xlYW4oKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIldoZXRoZXIgY2xpZW50IHVzZXJzIGNhbiBjcmVhdGUgdGVhbXNcIiwgZXhhbXBsZVZhbHVlOiB0cnVlIH0gfSk7XG52YXIgcHJvamVjdENsaWVudFVzZXJEZWxldGlvbkVuYWJsZWRTY2hlbWEgPSB5dXBCb29sZWFuKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJXaGV0aGVyIGNsaWVudCB1c2VycyBjYW4gZGVsZXRlIHRoZWlyIG93biBhY2NvdW50IGZyb20gdGhlIGNsaWVudFwiLCBleGFtcGxlVmFsdWU6IHRydWUgfSB9KTtcbnZhciBwcm9qZWN0U2lnblVwRW5hYmxlZFNjaGVtYSA9IHl1cEJvb2xlYW4oKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIldoZXRoZXIgdXNlcnMgY2FuIHNpZ24gdXAgbmV3IGFjY291bnRzLCBvciB3aGV0aGVyIHRoZXkgYXJlIG9ubHkgYWxsb3dlZCB0byBzaWduIGluIHRvIGV4aXN0aW5nIGFjY291bnRzLiBSZWdhcmRsZXNzIG9mIHRoaXMgb3B0aW9uLCB0aGUgc2VydmVyIEFQSSBjYW4gYWx3YXlzIGNyZWF0ZSBuZXcgdXNlcnMgd2l0aCB0aGUgYFBPU1QgL3VzZXJzYCBlbmRwb2ludC5cIiwgZXhhbXBsZVZhbHVlOiB0cnVlIH0gfSk7XG52YXIgcHJvamVjdENyZWRlbnRpYWxFbmFibGVkU2NoZW1hID0geXVwQm9vbGVhbigpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiV2hldGhlciBlbWFpbCBwYXNzd29yZCBhdXRoZW50aWNhdGlvbiBpcyBlbmFibGVkIGZvciB0aGlzIHByb2plY3RcIiwgZXhhbXBsZVZhbHVlOiB0cnVlIH0gfSk7XG52YXIgb2F1dGhJZFNjaGVtYSA9IHl1cFN0cmluZygpLm9uZU9mKGFsbFByb3ZpZGVycykubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogYE9BdXRoIHByb3ZpZGVyIElELCBvbmUgb2YgJHthbGxQcm92aWRlcnMubWFwKCh4KSA9PiBgXFxgJHt4fVxcYGApLmpvaW4oXCIsIFwiKX1gLCBleGFtcGxlVmFsdWU6IFwiZ29vZ2xlXCIgfSB9KTtcbnZhciBvYXV0aEVuYWJsZWRTY2hlbWEgPSB5dXBCb29sZWFuKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJXaGV0aGVyIHRoZSBPQXV0aCBwcm92aWRlciBpcyBlbmFibGVkLiBJZiBhbiBwcm92aWRlciBpcyBmaXJzdCBlbmFibGVkLCB0aGVuIGRpc2FibGVkLCBpdCB3aWxsIGJlIHNob3duIGluIHRoZSBsaXN0IGJ1dCB3aXRoIGVuYWJsZWQ9ZmFsc2VcIiwgZXhhbXBsZVZhbHVlOiB0cnVlIH0gfSk7XG52YXIgb2F1dGhUeXBlU2NoZW1hID0geXVwU3RyaW5nKCkub25lT2YoW1wic2hhcmVkXCIsIFwic3RhbmRhcmRcIl0pLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246ICdPQXV0aCBwcm92aWRlciB0eXBlLCBvbmUgb2Ygc2hhcmVkLCBzdGFuZGFyZC4gXCJzaGFyZWRcIiB1c2VzIFN0YWNrIHNoYXJlZCBPQXV0aCBrZXlzIGFuZCBpdCBpcyBvbmx5IG1lYW50IGZvciBkZXZlbG9wbWVudC4gXCJzdGFuZGFyZFwiIHVzZXMgeW91ciBvd24gT0F1dGgga2V5cyBhbmQgd2lsbCBzaG93IHlvdXIgbG9nbyBhbmQgY29tcGFueSBuYW1lIHdoZW4gc2lnbmluZyBpbiB3aXRoIHRoZSBwcm92aWRlci4nLCBleGFtcGxlVmFsdWU6IFwic3RhbmRhcmRcIiB9IH0pO1xudmFyIG9hdXRoQ2xpZW50SWRTY2hlbWEgPSB5dXBTdHJpbmcoKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiAnT0F1dGggY2xpZW50IElELiBOZWVkcyB0byBiZSBzcGVjaWZpZWQgd2hlbiB1c2luZyB0eXBlPVwic3RhbmRhcmRcIicsIGV4YW1wbGVWYWx1ZTogXCJnb29nbGUtb2F1dGgtY2xpZW50LWlkXCIgfSB9KTtcbnZhciBvYXV0aENsaWVudFNlY3JldFNjaGVtYSA9IHl1cFN0cmluZygpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246ICdPQXV0aCBjbGllbnQgc2VjcmV0LiBOZWVkcyB0byBiZSBzcGVjaWZpZWQgd2hlbiB1c2luZyB0eXBlPVwic3RhbmRhcmRcIicsIGV4YW1wbGVWYWx1ZTogXCJnb29nbGUtb2F1dGgtY2xpZW50LXNlY3JldFwiIH0gfSk7XG52YXIgb2F1dGhGYWNlYm9va0NvbmZpZ0lkU2NoZW1hID0geXVwU3RyaW5nKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJUaGUgY29uZmlndXJhdGlvbiBpZCBmb3IgRmFjZWJvb2sgYnVzaW5lc3MgbG9naW4gKGZvciB0aGluZ3MgbGlrZSBhZHMgYW5kIG1hcmtldGluZykuIFRoaXMgaXMgb25seSByZXF1aXJlZCBpZiB5b3UgYXJlIHVzaW5nIHRoZSBzdGFuZGFyZCBPQXV0aCB3aXRoIEZhY2Vib29rIGFuZCB5b3UgYXJlIHVzaW5nIEZhY2Vib29rIGJ1c2luZXNzIGxvZ2luLlwiIH0gfSk7XG52YXIgb2F1dGhNaWNyb3NvZnRUZW5hbnRJZFNjaGVtYSA9IHl1cFN0cmluZygpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiVGhlIE1pY3Jvc29mdCB0ZW5hbnQgaWQgZm9yIE1pY3Jvc29mdCBkaXJlY3RvcnkuIFRoaXMgaXMgb25seSByZXF1aXJlZCBpZiB5b3UgYXJlIHVzaW5nIHRoZSBzdGFuZGFyZCBPQXV0aCB3aXRoIE1pY3Jvc29mdCBhbmQgeW91IGhhdmUgYW4gQXp1cmUgQUQgdGVuYW50LlwiIH0gfSk7XG52YXIgb2F1dGhBY2NvdW50TWVyZ2VTdHJhdGVneVNjaGVtYSA9IHl1cFN0cmluZygpLm9uZU9mKFtcImxpbmtfbWV0aG9kXCIsIFwicmFpc2VfZXJyb3JcIiwgXCJhbGxvd19kdXBsaWNhdGVzXCJdKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIkRldGVybWluZXMgaG93IHRvIGhhbmRsZSBPQXV0aCBsb2dpbnMgdGhhdCBtYXRjaCBhbiBleGlzdGluZyB1c2VyIGJ5IGVtYWlsLiBgbGlua19tZXRob2RgIGFkZHMgdGhlIE9BdXRoIG1ldGhvZCB0byB0aGUgZXhpc3RpbmcgdXNlci4gYHJhaXNlX2Vycm9yYCByZWplY3RzIHRoZSBsb2dpbiB3aXRoIGFuIGVycm9yLiBgYWxsb3dfZHVwbGljYXRlc2AgY3JlYXRlcyBhIG5ldyB1c2VyLlwiLCBleGFtcGxlVmFsdWU6IFwibGlua19tZXRob2RcIiB9IH0pO1xudmFyIGVtYWlsVHlwZVNjaGVtYSA9IHl1cFN0cmluZygpLm9uZU9mKFtcInNoYXJlZFwiLCBcInN0YW5kYXJkXCJdKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiAnRW1haWwgcHJvdmlkZXIgdHlwZSwgb25lIG9mIHNoYXJlZCwgc3RhbmRhcmQuIFwic2hhcmVkXCIgdXNlcyBTdGFjayBzaGFyZWQgZW1haWwgcHJvdmlkZXIgYW5kIGl0IGlzIG9ubHkgbWVhbnQgZm9yIGRldmVsb3BtZW50LiBcInN0YW5kYXJkXCIgdXNlcyB5b3VyIG93biBlbWFpbCBzZXJ2ZXIgYW5kIHdpbGwgaGF2ZSB5b3VyIGVtYWlsIGFkZHJlc3MgYXMgdGhlIHNlbmRlci4nLCBleGFtcGxlVmFsdWU6IFwic3RhbmRhcmRcIiB9IH0pO1xudmFyIGVtYWlsU2VuZGVyTmFtZVNjaGVtYSA9IHl1cFN0cmluZygpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246ICdFbWFpbCBzZW5kZXIgbmFtZS4gTmVlZHMgdG8gYmUgc3BlY2lmaWVkIHdoZW4gdXNpbmcgdHlwZT1cInN0YW5kYXJkXCInLCBleGFtcGxlVmFsdWU6IFwiU3RhY2tcIiB9IH0pO1xudmFyIGVtYWlsSG9zdFNjaGVtYSA9IHl1cFN0cmluZygpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246ICdFbWFpbCBob3N0LiBOZWVkcyB0byBiZSBzcGVjaWZpZWQgd2hlbiB1c2luZyB0eXBlPVwic3RhbmRhcmRcIicsIGV4YW1wbGVWYWx1ZTogXCJzbXRwLnlvdXItZG9tYWluLmNvbVwiIH0gfSk7XG52YXIgZW1haWxQb3J0U2NoZW1hID0geXVwTnVtYmVyKCkubWluKDApLm1heCg2NTUzNSkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogJ0VtYWlsIHBvcnQuIE5lZWRzIHRvIGJlIHNwZWNpZmllZCB3aGVuIHVzaW5nIHR5cGU9XCJzdGFuZGFyZFwiJywgZXhhbXBsZVZhbHVlOiA1ODcgfSB9KTtcbnZhciBlbWFpbFVzZXJuYW1lU2NoZW1hID0geXVwU3RyaW5nKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogJ0VtYWlsIHVzZXJuYW1lLiBOZWVkcyB0byBiZSBzcGVjaWZpZWQgd2hlbiB1c2luZyB0eXBlPVwic3RhbmRhcmRcIicsIGV4YW1wbGVWYWx1ZTogXCJzbXRwLWVtYWlsXCIgfSB9KTtcbnZhciBlbWFpbFNlbmRlckVtYWlsU2NoZW1hID0gZW1haWxTY2hlbWEubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogJ0VtYWlsIHNlbmRlciBlbWFpbC4gTmVlZHMgdG8gYmUgc3BlY2lmaWVkIHdoZW4gdXNpbmcgdHlwZT1cInN0YW5kYXJkXCInLCBleGFtcGxlVmFsdWU6IFwiZXhhbXBsZUB5b3VyLWRvbWFpbi5jb21cIiB9IH0pO1xudmFyIGVtYWlsUGFzc3dvcmRTY2hlbWEgPSBwYXNzd29yZFNjaGVtYS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiAnRW1haWwgcGFzc3dvcmQuIE5lZWRzIHRvIGJlIHNwZWNpZmllZCB3aGVuIHVzaW5nIHR5cGU9XCJzdGFuZGFyZFwiJywgZXhhbXBsZVZhbHVlOiBcInlvdXItZW1haWwtcGFzc3dvcmRcIiB9IH0pO1xudmFyIGhhbmRsZXJQYXRoU2NoZW1hID0geXVwU3RyaW5nKCkudGVzdChcImlzLWhhbmRsZXItcGF0aFwiLCBcIkhhbmRsZXIgcGF0aCBtdXN0IHN0YXJ0IHdpdGggL1wiLCAodmFsdWUpID0+IHZhbHVlPy5zdGFydHNXaXRoKFwiL1wiKSkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogJ0hhbmRsZXIgcGF0aC4gSWYgeW91IGRpZCBub3Qgc2V0dXAgYSBjdXN0b20gaGFuZGxlciBwYXRoLCBpdCBzaG91bGQgYmUgXCIvaGFuZGxlclwiIGJ5IGRlZmF1bHQuIEl0IG5lZWRzIHRvIHN0YXJ0IHdpdGggLycsIGV4YW1wbGVWYWx1ZTogXCIvaGFuZGxlclwiIH0gfSk7XG52YXIgZW1haWxUaGVtZVNjaGVtYSA9IHl1cFN0cmluZygpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiRW1haWwgdGhlbWUgaWQgZm9yIHRoZSBwcm9qZWN0LiBEZXRlcm1pbmVzIHRoZSB2aXN1YWwgc3R5bGUgb2YgZW1haWxzIHNlbnQgYnkgdGhlIHByb2plY3QuXCIgfSB9KTtcbnZhciBlbWFpbFRoZW1lTGlzdFNjaGVtYSA9IHl1cFJlY29yZChcbiAgeXVwU3RyaW5nKCkudXVpZCgpLFxuICB5dXBPYmplY3Qoe1xuICAgIGRpc3BsYXlOYW1lOiB5dXBTdHJpbmcoKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIkVtYWlsIHRoZW1lIG5hbWVcIiwgZXhhbXBsZVZhbHVlOiBcIkRlZmF1bHQgTGlnaHRcIiB9IH0pLmRlZmluZWQoKSxcbiAgICB0c3hTb3VyY2U6IHl1cFN0cmluZygpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiRW1haWwgdGhlbWUgc291cmNlIGNvZGUgdHN4IGNvbXBvbmVudFwiIH0gfSkuZGVmaW5lZCgpXG4gIH0pXG4pLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiUmVjb3JkIG9mIGVtYWlsIHRoZW1lIElEcyB0byB0aGVpciBkaXNwbGF5IG5hbWUgYW5kIHNvdXJjZSBjb2RlXCIgfSB9KTtcbnZhciB0ZW1wbGF0ZVRoZW1lSWRTY2hlbWEgPSB5dXBNaXhlZCgpLnRlc3QoKHYpID0+IHYgPT09IHZvaWQgMCB8fCB2ID09PSBmYWxzZSB8fCB2ID09PSBudWxsIHx8IHR5cGVvZiB2ID09PSBcInN0cmluZ1wiICYmIGlzVXVpZCh2KSkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJFbWFpbCB0aGVtZSBpZCBmb3IgdGhlIHRlbXBsYXRlXCIgfSB9KS5vcHRpb25hbCgpO1xudmFyIGVtYWlsVGVtcGxhdGVMaXN0U2NoZW1hID0geXVwUmVjb3JkKFxuICB5dXBTdHJpbmcoKS51dWlkKCksXG4gIHl1cE9iamVjdCh7XG4gICAgZGlzcGxheU5hbWU6IHl1cFN0cmluZygpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiRW1haWwgdGVtcGxhdGUgbmFtZVwiLCBleGFtcGxlVmFsdWU6IFwiRW1haWwgVmVyaWZpY2F0aW9uXCIgfSB9KS5kZWZpbmVkKCksXG4gICAgdHN4U291cmNlOiB5dXBTdHJpbmcoKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIkVtYWlsIHRlbXBsYXRlIHNvdXJjZSBjb2RlIHRzeCBjb21wb25lbnRcIiB9IH0pLmRlZmluZWQoKSxcbiAgICAvLyB0aGVtZUlkIGNhbiBiZSBvbmUgb2YgdGhyZWUgdmFsdWVzOlxuICAgIC8vIDEuIEEgdmFsaWQgdGhlbWUgaWRcbiAgICAvLyAyLiBmYWxzZSwgd2hpY2ggbWVhbnMgdGhlIHRlbXBsYXRlIHVzZXMgbm8gdGhlbWVcbiAgICAvLyAzLiB1bmRlZmluZWQvbm90IGdpdmVuLCB3aGljaCBtZWFucyB0aGUgdGVtcGxhdGUgdXNlcyB0aGUgcHJvamVjdCdzIGFjdGl2ZSB0aGVtZVxuICAgIHRoZW1lSWQ6IHRlbXBsYXRlVGhlbWVJZFNjaGVtYVxuICB9KVxuKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIlJlY29yZCBvZiBlbWFpbCB0ZW1wbGF0ZSBJRHMgdG8gdGhlaXIgZGlzcGxheSBuYW1lIGFuZCBzb3VyY2UgY29kZVwiIH0gfSk7XG52YXIgY3VzdG9tZXJUeXBlU2NoZW1hID0geXVwU3RyaW5nKCkub25lT2YoW1widXNlclwiLCBcInRlYW1cIiwgXCJjdXN0b21cIl0pO1xudmFyIHZhbGlkYXRlSGFzQXRMZWFzdE9uZVN1cHBvcnRlZEN1cnJlbmN5ID0gKHZhbHVlLCBjb250ZXh0KSA9PiB7XG4gIGlmICghdmFsdWUpIHJldHVybiB0cnVlO1xuICBjb25zdCBjdXJyZW5jaWVzID0gT2JqZWN0LmtleXModmFsdWUpLmZpbHRlcigoa2V5KSA9PiBTVVBQT1JURURfQ1VSUkVOQ0lFUy5zb21lKChjKSA9PiBjLmNvZGUgPT09IGtleSkpO1xuICBpZiAoY3VycmVuY2llcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gY29udGV4dC5jcmVhdGVFcnJvcih7IG1lc3NhZ2U6IFwiQXQgbGVhc3Qgb25lIGN1cnJlbmN5IGlzIHJlcXVpcmVkXCIgfSk7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59O1xudmFyIG9mZmVyUHJpY2VTY2hlbWEgPSB5dXBPYmplY3Qoe1xuICAuLi50eXBlZEZyb21FbnRyaWVzKFNVUFBPUlRFRF9DVVJSRU5DSUVTLm1hcCgoY3VycmVuY3kpID0+IFtjdXJyZW5jeS5jb2RlLCBtb25leUFtb3VudFNjaGVtYShjdXJyZW5jeSkub3B0aW9uYWwoKV0pKSxcbiAgaW50ZXJ2YWw6IGRheUludGVydmFsU2NoZW1hLm9wdGlvbmFsKCksXG4gIHNlcnZlck9ubHk6IHl1cEJvb2xlYW4oKSxcbiAgZnJlZVRyaWFsOiBkYXlJbnRlcnZhbFNjaGVtYS5vcHRpb25hbCgpXG59KS50ZXN0KFwiYXQtbGVhc3Qtb25lLWN1cnJlbmN5XCIsICh2YWx1ZSwgY29udGV4dCkgPT4gdmFsaWRhdGVIYXNBdExlYXN0T25lU3VwcG9ydGVkQ3VycmVuY3kodmFsdWUsIGNvbnRleHQpKTtcbnZhciBwcmljZU9ySW5jbHVkZUJ5RGVmYXVsdFNjaGVtYSA9IHl1cFVuaW9uKFxuICB5dXBTdHJpbmcoKS5vbmVPZihbXCJpbmNsdWRlLWJ5LWRlZmF1bHRcIl0pLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiTWFrZXMgdGhpcyBpdGVtIGZyZWUgYW5kIGluY2x1ZGVzIGl0IGJ5IGRlZmF1bHQgZm9yIGFsbCBjdXN0b21lcnMuXCIsIGV4YW1wbGVWYWx1ZTogXCJpbmNsdWRlLWJ5LWRlZmF1bHRcIiB9IH0pLFxuICB5dXBSZWNvcmQoXG4gICAgdXNlclNwZWNpZmllZElkU2NoZW1hKFwicHJpY2VJZFwiKSxcbiAgICBvZmZlclByaWNlU2NoZW1hXG4gIClcbik7XG52YXIgb2ZmZXJTY2hlbWEgPSB5dXBPYmplY3Qoe1xuICBkaXNwbGF5TmFtZTogeXVwU3RyaW5nKCksXG4gIGdyb3VwSWQ6IHVzZXJTcGVjaWZpZWRJZFNjaGVtYShcImdyb3VwSWRcIikub3B0aW9uYWwoKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIlRoZSBJRCBvZiB0aGUgZ3JvdXAgdGhpcyBvZmZlciBiZWxvbmdzIHRvLiBXaXRoaW4gYSBncm91cCwgYWxsIG9mZmVycyBhcmUgbXV0dWFsbHkgZXhjbHVzaXZlIHVubGVzcyB0aGV5IGFyZSBhbiBhZGQtb24gdG8gYW5vdGhlciBvZmZlciBpbiB0aGUgZ3JvdXAuXCIsIGV4YW1wbGVWYWx1ZTogXCJncm91cC1pZFwiIH0gfSksXG4gIGlzQWRkT25UbzogeXVwVW5pb24oXG4gICAgeXVwQm9vbGVhbigpLmlzRmFsc2UoKSxcbiAgICB5dXBSZWNvcmQoXG4gICAgICB1c2VyU3BlY2lmaWVkSWRTY2hlbWEoXCJvZmZlcklkXCIpLFxuICAgICAgeXVwQm9vbGVhbigpLmlzVHJ1ZSgpLmRlZmluZWQoKVxuICAgIClcbiAgKS5vcHRpb25hbCgpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiVGhlIG9mZmVycyB0aGF0IHRoaXMgb2ZmZXIgaXMgYW4gYWRkLW9uIHRvLiBJZiB0aGlzIGlzIHNldCwgdGhlIGN1c3RvbWVyIG11c3QgYWxyZWFkeSBoYXZlIG9uZSBvZiB0aGUgb2ZmZXJzIGluIHRoZSByZWNvcmQgdG8gYmUgYWJsZSB0byBwdXJjaGFzZSB0aGlzIG9mZmVyLlwiLCBleGFtcGxlVmFsdWU6IHsgXCJvZmZlci1pZFwiOiB0cnVlIH0gfSB9KSxcbiAgY3VzdG9tZXJUeXBlOiBjdXN0b21lclR5cGVTY2hlbWEuZGVmaW5lZCgpLFxuICBmcmVlVHJpYWw6IGRheUludGVydmFsU2NoZW1hLm9wdGlvbmFsKCksXG4gIHNlcnZlck9ubHk6IHl1cEJvb2xlYW4oKSxcbiAgc3RhY2thYmxlOiB5dXBCb29sZWFuKCksXG4gIHByaWNlczogcHJpY2VPckluY2x1ZGVCeURlZmF1bHRTY2hlbWEuZGVmaW5lZCgpLFxuICBpbmNsdWRlZEl0ZW1zOiB5dXBSZWNvcmQoXG4gICAgdXNlclNwZWNpZmllZElkU2NoZW1hKFwiaXRlbUlkXCIpLFxuICAgIHl1cE9iamVjdCh7XG4gICAgICBxdWFudGl0eTogeXVwTnVtYmVyKCkuZGVmaW5lZCgpLFxuICAgICAgcmVwZWF0OiBkYXlJbnRlcnZhbE9yTmV2ZXJTY2hlbWEub3B0aW9uYWwoKSxcbiAgICAgIGV4cGlyZXM6IHl1cFN0cmluZygpLm9uZU9mKFtcIm5ldmVyXCIsIFwid2hlbi1wdXJjaGFzZS1leHBpcmVzXCIsIFwid2hlbi1yZXBlYXRlZFwiXSkub3B0aW9uYWwoKVxuICAgIH0pXG4gIClcbn0pO1xudmFyIGlubGluZU9mZmVyU2NoZW1hID0geXVwT2JqZWN0KHtcbiAgZGlzcGxheV9uYW1lOiB5dXBTdHJpbmcoKS5kZWZpbmVkKCksXG4gIGN1c3RvbWVyX3R5cGU6IGN1c3RvbWVyVHlwZVNjaGVtYS5kZWZpbmVkKCksXG4gIGZyZWVfdHJpYWw6IGRheUludGVydmFsU2NoZW1hLm9wdGlvbmFsKCksXG4gIHNlcnZlcl9vbmx5OiB5dXBCb29sZWFuKCkub25lT2YoW3RydWVdKS5kZWZhdWx0KHRydWUpLFxuICBwcmljZXM6IHl1cFJlY29yZChcbiAgICB1c2VyU3BlY2lmaWVkSWRTY2hlbWEoXCJwcmljZUlkXCIpLFxuICAgIHl1cE9iamVjdCh7XG4gICAgICAuLi50eXBlZEZyb21FbnRyaWVzKFNVUFBPUlRFRF9DVVJSRU5DSUVTLm1hcCgoY3VycmVuY3kpID0+IFtjdXJyZW5jeS5jb2RlLCBtb25leUFtb3VudFNjaGVtYShjdXJyZW5jeSkub3B0aW9uYWwoKV0pKSxcbiAgICAgIGludGVydmFsOiBkYXlJbnRlcnZhbFNjaGVtYS5vcHRpb25hbCgpLFxuICAgICAgZnJlZV90cmlhbDogZGF5SW50ZXJ2YWxTY2hlbWEub3B0aW9uYWwoKVxuICAgIH0pLnRlc3QoXCJhdC1sZWFzdC1vbmUtY3VycmVuY3lcIiwgKHZhbHVlLCBjb250ZXh0KSA9PiB2YWxpZGF0ZUhhc0F0TGVhc3RPbmVTdXBwb3J0ZWRDdXJyZW5jeSh2YWx1ZSwgY29udGV4dCkpXG4gICksXG4gIGluY2x1ZGVkX2l0ZW1zOiB5dXBSZWNvcmQoXG4gICAgdXNlclNwZWNpZmllZElkU2NoZW1hKFwiaXRlbUlkXCIpLFxuICAgIHl1cE9iamVjdCh7XG4gICAgICBxdWFudGl0eTogeXVwTnVtYmVyKCksXG4gICAgICByZXBlYXQ6IGRheUludGVydmFsT3JOZXZlclNjaGVtYS5vcHRpb25hbCgpLFxuICAgICAgZXhwaXJlczogeXVwU3RyaW5nKCkub25lT2YoW1wibmV2ZXJcIiwgXCJ3aGVuLXB1cmNoYXNlLWV4cGlyZXNcIiwgXCJ3aGVuLXJlcGVhdGVkXCJdKS5vcHRpb25hbCgpXG4gICAgfSlcbiAgKVxufSk7XG52YXIgUmVwbGFjZUZpZWxkV2l0aE93blVzZXJJZCA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihwYXRoKSB7XG4gICAgc3VwZXIoYFRoaXMgZXJyb3Igc2hvdWxkIGJlIGNhdWdodCBieSB3aG9ldmVyIHZhbGlkYXRlZCB0aGUgc2NoZW1hLCBhbmQgdGhlIGZpZWxkIGluIHRoZSBwYXRoICcke3BhdGh9JyBzaG91bGQgYmUgcmVwbGFjZWQgd2l0aCB0aGUgY3VycmVudCB1c2VyJ3MgaWQuIFRoaXMgaXMgYSB3b3JrYXJvdW5kIHRvIHl1cCBub3QgcHJvdmlkaW5nIGFjY2VzcyB0byB0aGUgY29udGV4dCBpbnNpZGUgdGhlIHRyYW5zZm9ybSBmdW5jdGlvbi5gKTtcbiAgICB0aGlzLnBhdGggPSBwYXRoO1xuICB9XG59O1xudmFyIHVzZXJJZE1lU2VudGluZWxVdWlkID0gXCJjYWQ1NjRmZC1mODFiLTQzZjQtYjM5MC05OGFiZjNmY2MxN2VcIjtcbnZhciB1c2VySWRPck1lU2NoZW1hID0geXVwU3RyaW5nKCkudXVpZCgpLnRyYW5zZm9ybSgodikgPT4ge1xuICBpZiAodiA9PT0gXCJtZVwiKSByZXR1cm4gdXNlcklkTWVTZW50aW5lbFV1aWQ7XG4gIGVsc2UgcmV0dXJuIHY7XG59KS50ZXN0KCh2LCBjb250ZXh0KSA9PiB7XG4gIGlmICghKFwic3RhY2tBbGxvd1VzZXJJZE1lXCIgaW4gKGNvbnRleHQub3B0aW9ucy5jb250ZXh0ID8/IHt9KSkpIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwidXNlcklkT3JNZVNjaGVtYSBpcyBub3QgYWxsb3dlZCBpbiB0aGlzIGNvbnRleHQuIE1ha2Ugc3VyZSB5b3UncmUgdXNpbmcgeXVwVmFsaWRhdGUgZnJvbSBzY2hlbWEtZmllbGRzLnRzIHRvIHZhbGlkYXRlLCBpbnN0ZWFkIG9mIHNjaGVtYS52YWxpZGF0ZSguLi4pLlwiKTtcbiAgaWYgKCFjb250ZXh0Lm9wdGlvbnMuY29udGV4dD8uc3RhY2tBbGxvd1VzZXJJZE1lKSB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcInVzZXJJZE9yTWVTY2hlbWEgaXMgbm90IGFsbG93ZWQgaW4gdGhpcyBjb250ZXh0LiBNYWtlIHN1cmUgeW91J3JlIHBhc3NpbmcgaW4gdGhlIGN1cnJlbnRVc2VySWQgb3B0aW9uIGluIHl1cFZhbGlkYXRlLlwiKTtcbiAgaWYgKHYgPT09IHVzZXJJZE1lU2VudGluZWxVdWlkKSB0aHJvdyBuZXcgUmVwbGFjZUZpZWxkV2l0aE93blVzZXJJZChjb250ZXh0LnBhdGgpO1xuICByZXR1cm4gdHJ1ZTtcbn0pLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiVGhlIElEIG9mIHRoZSB1c2VyLCBvciB0aGUgc3BlY2lhbCB2YWx1ZSBgbWVgIGZvciB0aGUgY3VycmVudGx5IGF1dGhlbnRpY2F0ZWQgdXNlclwiLCBleGFtcGxlVmFsdWU6IFwiMzI0MWEyODUtODMyOS00ZDY5LThmM2QtMzE2ZTA4Y2YxNDBjXCIgfSB9KTtcbnZhciB1c2VySWRTY2hlbWEgPSB5dXBTdHJpbmcoKS51dWlkKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogX2lkRGVzY3JpcHRpb24oXCJ1c2VyXCIpLCBleGFtcGxlVmFsdWU6IFwiMzI0MWEyODUtODMyOS00ZDY5LThmM2QtMzE2ZTA4Y2YxNDBjXCIgfSB9KTtcbnZhciBwcmltYXJ5RW1haWxTY2hlbWEgPSBlbWFpbFNjaGVtYS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIlByaW1hcnkgZW1haWxcIiwgZXhhbXBsZVZhbHVlOiBcImpvaG5kb2VAZXhhbXBsZS5jb21cIiB9IH0pO1xudmFyIHByaW1hcnlFbWFpbEF1dGhFbmFibGVkU2NoZW1hID0geXVwQm9vbGVhbigpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiV2hldGhlciB0aGUgcHJpbWFyeSBlbWFpbCBpcyB1c2VkIGZvciBhdXRoZW50aWNhdGlvbi4gSWYgdGhpcyBpcyBzZXQgdG8gYGZhbHNlYCwgdGhlIHVzZXIgd2lsbCBub3QgYmUgYWJsZSB0byBzaWduIGluIHdpdGggdGhlIHByaW1hcnkgZW1haWwgd2l0aCBwYXNzd29yZCBvciBPVFBcIiwgZXhhbXBsZVZhbHVlOiB0cnVlIH0gfSk7XG52YXIgcHJpbWFyeUVtYWlsVmVyaWZpZWRTY2hlbWEgPSB5dXBCb29sZWFuKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJXaGV0aGVyIHRoZSBwcmltYXJ5IGVtYWlsIGhhcyBiZWVuIHZlcmlmaWVkIHRvIGJlbG9uZyB0byB0aGlzIHVzZXJcIiwgZXhhbXBsZVZhbHVlOiB0cnVlIH0gfSk7XG52YXIgdXNlckRpc3BsYXlOYW1lU2NoZW1hID0geXVwU3RyaW5nKCkubnVsbGFibGUoKS5tYXgoMjU2KS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBfZGlzcGxheU5hbWVEZXNjcmlwdGlvbihcInVzZXJcIiksIGV4YW1wbGVWYWx1ZTogXCJKb2huIERvZVwiIH0gfSk7XG52YXIgc2VsZWN0ZWRUZWFtSWRTY2hlbWEgPSB5dXBTdHJpbmcoKS51dWlkKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJJRCBvZiB0aGUgdGVhbSBjdXJyZW50bHkgc2VsZWN0ZWQgYnkgdGhlIHVzZXJcIiwgZXhhbXBsZVZhbHVlOiBcInRlYW0taWRcIiB9IH0pO1xudmFyIHByb2ZpbGVJbWFnZVVybFNjaGVtYSA9IHVybFNjaGVtYS5tYXgoTUFYX0lNQUdFX1NJWkVfQkFTRTY0X0JZVEVTKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBfcHJvZmlsZUltYWdlVXJsRGVzY3JpcHRpb24oXCJ1c2VyXCIpLCBleGFtcGxlVmFsdWU6IFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9pbWFnZS5qcGdcIiB9IH0pO1xudmFyIHNpZ25lZFVwQXRNaWxsaXNTY2hlbWEgPSB5dXBOdW1iZXIoKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBfc2lnbmVkVXBBdE1pbGxpc0Rlc2NyaXB0aW9uLCBleGFtcGxlVmFsdWU6IDE2M2UxMCB9IH0pO1xudmFyIHVzZXJDbGllbnRNZXRhZGF0YVNjaGVtYSA9IGpzb25TY2hlbWEubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogX2NsaWVudE1ldGFEYXRhRGVzY3JpcHRpb24oXCJ1c2VyXCIpLCBleGFtcGxlVmFsdWU6IHsga2V5OiBcInZhbHVlXCIgfSB9IH0pO1xudmFyIHVzZXJDbGllbnRSZWFkT25seU1ldGFkYXRhU2NoZW1hID0ganNvblNjaGVtYS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBfY2xpZW50UmVhZE9ubHlNZXRhRGF0YURlc2NyaXB0aW9uKFwidXNlclwiKSwgZXhhbXBsZVZhbHVlOiB7IGtleTogXCJ2YWx1ZVwiIH0gfSB9KTtcbnZhciB1c2VyU2VydmVyTWV0YWRhdGFTY2hlbWEgPSBqc29uU2NoZW1hLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IF9zZXJ2ZXJNZXRhRGF0YURlc2NyaXB0aW9uKFwidXNlclwiKSwgZXhhbXBsZVZhbHVlOiB7IGtleTogXCJ2YWx1ZVwiIH0gfSB9KTtcbnZhciB1c2VyT0F1dGhQcm92aWRlclNjaGVtYSA9IHl1cE9iamVjdCh7XG4gIGlkOiB5dXBTdHJpbmcoKS5kZWZpbmVkKCksXG4gIHR5cGU6IHl1cFN0cmluZygpLm9uZU9mKGFsbFByb3ZpZGVycykuZGVmaW5lZCgpLFxuICBwcm92aWRlcl91c2VyX2lkOiB5dXBTdHJpbmcoKS5kZWZpbmVkKClcbn0pO1xudmFyIHVzZXJMYXN0QWN0aXZlQXRNaWxsaXNTY2hlbWEgPSB5dXBOdW1iZXIoKS5udWxsYWJsZSgpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IF9sYXN0QWN0aXZlQXRNaWxsaXNEZXNjcmlwdGlvbiwgZXhhbXBsZVZhbHVlOiAxNjNlMTAgfSB9KTtcbnZhciB1c2VyUGFzc2tleUF1dGhFbmFibGVkU2NoZW1hID0geXVwQm9vbGVhbigpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgaGlkZGVuOiB0cnVlLCBkZXNjcmlwdGlvbjogXCJXaGV0aGVyIHRoZSB1c2VyIGhhcyBwYXNza2V5cyBlbmFibGVkXCIsIGV4YW1wbGVWYWx1ZTogZmFsc2UgfSB9KTtcbnZhciB1c2VyT3RwQXV0aEVuYWJsZWRTY2hlbWEgPSB5dXBCb29sZWFuKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBoaWRkZW46IHRydWUsIGRlc2NyaXB0aW9uOiBcIldoZXRoZXIgdGhlIHVzZXIgaGFzIE9UUC9tYWdpYyBsaW5rIGVuYWJsZWQuIFwiLCBleGFtcGxlVmFsdWU6IHRydWUgfSB9KTtcbnZhciB1c2VyT3RwQXV0aEVuYWJsZWRNdXRhdGlvblNjaGVtYSA9IHl1cEJvb2xlYW4oKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGhpZGRlbjogdHJ1ZSwgZGVzY3JpcHRpb246IFwiV2hldGhlciB0aGUgdXNlciBoYXMgT1RQL21hZ2ljIGxpbmsgZW5hYmxlZC4gTm90ZSB0aGF0IG9ubHkgYWNjb3VudHMgd2l0aCB2ZXJpZmllZCBlbWFpbHMgY2FuIHNpZ24taW4gd2l0aCBPVFAuXCIsIGV4YW1wbGVWYWx1ZTogdHJ1ZSB9IH0pO1xudmFyIHVzZXJIYXNQYXNzd29yZFNjaGVtYSA9IHl1cEJvb2xlYW4oKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGhpZGRlbjogdHJ1ZSwgZGVzY3JpcHRpb246IFwiV2hldGhlciB0aGUgdXNlciBoYXMgYSBwYXNzd29yZCBzZXQuIElmIHRoZSB1c2VyIGRvZXMgbm90IGhhdmUgYSBwYXNzd29yZCBzZXQsIHRoZXkgd2lsbCBub3QgYmUgYWJsZSB0byBzaWduIGluIHdpdGggZW1haWwvcGFzc3dvcmQuXCIsIGV4YW1wbGVWYWx1ZTogdHJ1ZSB9IH0pO1xudmFyIHVzZXJQYXNzd29yZE11dGF0aW9uU2NoZW1hID0gcGFzc3dvcmRTY2hlbWEubnVsbGFibGUoKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIlNldHMgdGhlIHVzZXIncyBwYXNzd29yZC4gRG9pbmcgc28gcmV2b2tlcyBhbGwgY3VycmVudCBzZXNzaW9ucy5cIiwgZXhhbXBsZVZhbHVlOiBcIm15LW5ldy1wYXNzd29yZFwiIH0gfSkubWF4KDcwKTtcbnZhciB1c2VyUGFzc3dvcmRIYXNoTXV0YXRpb25TY2hlbWEgPSB5dXBTdHJpbmcoKS5ub25FbXB0eSgpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiSWYgYHBhc3N3b3JkYCBpcyBub3QgZ2l2ZW4sIHNldHMgdGhlIHVzZXIncyBwYXNzd29yZCBoYXNoIHRvIHRoZSBnaXZlbiBzdHJpbmcgaW4gTW9kdWxhciBDcnlwdCBGb3JtYXQgKGV4LjogYCQyYSQxMCRWSWhJT29mU01xR2RHbEw0d3pFLy9lLjc3ZEFRR3FOdEYvMWRUN2JxQ3JWdFF1SW5XeTJxaWApLiBEb2luZyBzbyByZXZva2VzIGFsbCBjdXJyZW50IHNlc3Npb25zLlwiIH0gfSk7XG52YXIgdXNlclRvdHBTZWNyZXRNdXRhdGlvblNjaGVtYSA9IGJhc2U2NFNjaGVtYS5udWxsYWJsZSgpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiRW5hYmxlcyAyRkEgYW5kIHNldHMgYSBUT1RQIHNlY3JldCBmb3IgdGhlIHVzZXIuIFNldCB0byBudWxsIHRvIGRpc2FibGUgMkZBLlwiLCBleGFtcGxlVmFsdWU6IFwiZEc5MGNDMXpaV055WlhRPVwiIH0gfSk7XG52YXIgYWNjZXNzVG9rZW5QYXlsb2FkU2NoZW1hID0geXVwT2JqZWN0KHtcbiAgc3ViOiB5dXBTdHJpbmcoKS5kZWZpbmVkKCksXG4gIGV4cDogeXVwTnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgaXNzOiB5dXBTdHJpbmcoKS5kZWZpbmVkKCksXG4gIGF1ZDogeXVwU3RyaW5nKCkuZGVmaW5lZCgpLFxuICBwcm9qZWN0X2lkOiB5dXBTdHJpbmcoKS5kZWZpbmVkKCksXG4gIGJyYW5jaF9pZDogeXVwU3RyaW5nKCkuZGVmaW5lZCgpLFxuICByZWZyZXNoX3Rva2VuX2lkOiB5dXBTdHJpbmcoKS5kZWZpbmVkKCksXG4gIHJvbGU6IHl1cFN0cmluZygpLm9uZU9mKFtcImF1dGhlbnRpY2F0ZWRcIl0pLmRlZmluZWQoKSxcbiAgbmFtZTogeXVwU3RyaW5nKCkuZGVmaW5lZCgpLm51bGxhYmxlKCksXG4gIGVtYWlsOiB5dXBTdHJpbmcoKS5kZWZpbmVkKCkubnVsbGFibGUoKSxcbiAgZW1haWxfdmVyaWZpZWQ6IHl1cEJvb2xlYW4oKS5kZWZpbmVkKCksXG4gIHNlbGVjdGVkX3RlYW1faWQ6IHl1cFN0cmluZygpLmRlZmluZWQoKS5udWxsYWJsZSgpLFxuICBpc19hbm9ueW1vdXM6IHl1cEJvb2xlYW4oKS5kZWZpbmVkKClcbn0pO1xudmFyIHNpZ25JbkVtYWlsU2NoZW1hID0gc3RyaWN0RW1haWxTY2hlbWEodm9pZCAwKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIlRoZSBlbWFpbCB0byBzaWduIGluIHdpdGguXCIsIGV4YW1wbGVWYWx1ZTogXCJqb2huZG9lQGV4YW1wbGUuY29tXCIgfSB9KTtcbnZhciBlbWFpbE90cFNpZ25JbkNhbGxiYWNrVXJsU2NoZW1hID0gdXJsU2NoZW1hLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiVGhlIGJhc2UgY2FsbGJhY2sgVVJMIHRvIGNvbnN0cnVjdCB0aGUgbWFnaWMgbGluayBmcm9tLiBBIHF1ZXJ5IHBhcmFtZXRlciBgY29kZWAgd2l0aCB0aGUgdmVyaWZpY2F0aW9uIGNvZGUgd2lsbCBiZSBhcHBlbmRlZCB0byBpdC4gVGhlIHBhZ2Ugc2hvdWxkIHRoZW4gbWFrZSBhIHJlcXVlc3QgdG8gdGhlIGAvYXV0aC9vdHAvc2lnbi1pbmAgZW5kcG9pbnQuXCIsIGV4YW1wbGVWYWx1ZTogXCJodHRwczovL2V4YW1wbGUuY29tL2hhbmRsZXIvbWFnaWMtbGluay1jYWxsYmFja1wiIH0gfSk7XG52YXIgZW1haWxWZXJpZmljYXRpb25DYWxsYmFja1VybFNjaGVtYSA9IHVybFNjaGVtYS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIlRoZSBiYXNlIGNhbGxiYWNrIFVSTCB0byBjb25zdHJ1Y3QgYSB2ZXJpZmljYXRpb24gbGluayBmb3IgdGhlIHZlcmlmaWNhdGlvbiBlLW1haWwuIEEgcXVlcnkgcGFyYW1ldGVyIGBjb2RlYCB3aXRoIHRoZSB2ZXJpZmljYXRpb24gY29kZSB3aWxsIGJlIGFwcGVuZGVkIHRvIGl0LiBUaGUgcGFnZSBzaG91bGQgdGhlbiBtYWtlIGEgcmVxdWVzdCB0byB0aGUgYC9jb250YWN0LWNoYW5uZWxzL3ZlcmlmeWAgZW5kcG9pbnQuXCIsIGV4YW1wbGVWYWx1ZTogXCJodHRwczovL2V4YW1wbGUuY29tL2hhbmRsZXIvZW1haWwtdmVyaWZpY2F0aW9uXCIgfSB9KTtcbnZhciBhY2Nlc3NUb2tlblJlc3BvbnNlU2NoZW1hID0geXVwU3RyaW5nKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJTaG9ydC1saXZlZCBhY2Nlc3MgdG9rZW4gdGhhdCBjYW4gYmUgdXNlZCB0byBhdXRoZW50aWNhdGUgdGhlIHVzZXJcIiwgZXhhbXBsZVZhbHVlOiBcImV5SmhtTWlKQjJUTy4uLmRpSTRRVFwiIH0gfSk7XG52YXIgcmVmcmVzaFRva2VuUmVzcG9uc2VTY2hlbWEgPSB5dXBTdHJpbmcoKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIkxvbmctbGl2ZWQgcmVmcmVzaCB0b2tlbiB0aGF0IGNhbiBiZSB1c2VkIHRvIG9idGFpbiBhIG5ldyBhY2Nlc3MgdG9rZW5cIiwgZXhhbXBsZVZhbHVlOiBcImk4bnMzYXEyLi4uMTR5XCIgfSB9KTtcbnZhciBzaWduSW5SZXNwb25zZVNjaGVtYSA9IHl1cE9iamVjdCh7XG4gIHJlZnJlc2hfdG9rZW46IHJlZnJlc2hUb2tlblJlc3BvbnNlU2NoZW1hLmRlZmluZWQoKSxcbiAgYWNjZXNzX3Rva2VuOiBhY2Nlc3NUb2tlblJlc3BvbnNlU2NoZW1hLmRlZmluZWQoKSxcbiAgaXNfbmV3X3VzZXI6IHl1cEJvb2xlYW4oKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIldoZXRoZXIgdGhlIHVzZXIgaXMgYSBuZXcgdXNlclwiLCBleGFtcGxlVmFsdWU6IHRydWUgfSB9KS5kZWZpbmVkKCksXG4gIHVzZXJfaWQ6IHVzZXJJZFNjaGVtYS5kZWZpbmVkKClcbn0pO1xudmFyIHRlYW1TeXN0ZW1QZXJtaXNzaW9ucyA9IFtcbiAgXCIkdXBkYXRlX3RlYW1cIixcbiAgXCIkZGVsZXRlX3RlYW1cIixcbiAgXCIkcmVhZF9tZW1iZXJzXCIsXG4gIFwiJHJlbW92ZV9tZW1iZXJzXCIsXG4gIFwiJGludml0ZV9tZW1iZXJzXCIsXG4gIFwiJG1hbmFnZV9hcGlfa2V5c1wiXG5dO1xudmFyIHBlcm1pc3Npb25EZWZpbml0aW9uSWRTY2hlbWEgPSB5dXBTdHJpbmcoKS5tYXRjaGVzKC9eXFwkP1thLXowLTlfOl0rJC8sICdPbmx5IGxvd2VyY2FzZSBsZXR0ZXJzLCBudW1iZXJzLCBcIjpcIiwgXCJfXCIgYW5kIG9wdGlvbmFsIFwiJFwiIGF0IHRoZSBiZWdpbm5pbmcgYXJlIGFsbG93ZWQnKS50ZXN0KFwiaXMtc3lzdGVtLXBlcm1pc3Npb25cIiwgXCJTeXN0ZW0gcGVybWlzc2lvbnMgbXVzdCBzdGFydCB3aXRoIGEgZG9sbGFyIHNpZ25cIiwgKHZhbHVlLCBjdHgpID0+IHtcbiAgaWYgKCF2YWx1ZSkgcmV0dXJuIHRydWU7XG4gIGlmICh2YWx1ZS5zdGFydHNXaXRoKFwiJFwiKSAmJiAhdGVhbVN5c3RlbVBlcm1pc3Npb25zLmluY2x1ZGVzKHZhbHVlKSkge1xuICAgIHJldHVybiBjdHguY3JlYXRlRXJyb3IoeyBtZXNzYWdlOiBcIkludmFsaWQgc3lzdGVtIHBlcm1pc3Npb25cIiB9KTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn0pLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IGBUaGUgcGVybWlzc2lvbiBJRCB1c2VkIHRvIHVuaXF1ZWx5IGlkZW50aWZ5IGEgcGVybWlzc2lvbi4gQ2FuIGVpdGhlciBiZSBhIGN1c3RvbSBwZXJtaXNzaW9uIHdpdGggbG93ZXJjYXNlIGxldHRlcnMsIG51bWJlcnMsIFxcYDpcXGAsIGFuZCBcXGBfXFxgIGNoYXJhY3RlcnMsIG9yIG9uZSBvZiB0aGUgc3lzdGVtIHBlcm1pc3Npb25zOiAke3RlYW1TeXN0ZW1QZXJtaXNzaW9ucy5tYXAoKHgpID0+IGBcXGAke3h9XFxgYCkuam9pbihcIiwgXCIpfWAsIGV4YW1wbGVWYWx1ZTogXCJyZWFkX3NlY3JldF9pbmZvXCIgfSB9KTtcbnZhciBjdXN0b21QZXJtaXNzaW9uRGVmaW5pdGlvbklkU2NoZW1hID0geXVwU3RyaW5nKCkubWF0Y2hlcygvXlthLXowLTlfOl0rJC8sICdPbmx5IGxvd2VyY2FzZSBsZXR0ZXJzLCBudW1iZXJzLCBcIjpcIiwgXCJfXCIgYXJlIGFsbG93ZWQnKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiAnVGhlIHBlcm1pc3Npb24gSUQgdXNlZCB0byB1bmlxdWVseSBpZGVudGlmeSBhIHBlcm1pc3Npb24uIENhbiBvbmx5IGNvbnRhaW4gbG93ZXJjYXNlIGxldHRlcnMsIG51bWJlcnMsIFwiOlwiLCBhbmQgXCJfXCIgY2hhcmFjdGVycycsIGV4YW1wbGVWYWx1ZTogXCJyZWFkX3NlY3JldF9pbmZvXCIgfSB9KTtcbnZhciB0ZWFtUGVybWlzc2lvbkRlc2NyaXB0aW9uU2NoZW1hID0geXVwU3RyaW5nKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJBIGh1bWFuLXJlYWRhYmxlIGRlc2NyaXB0aW9uIG9mIHRoZSBwZXJtaXNzaW9uXCIsIGV4YW1wbGVWYWx1ZTogXCJSZWFkIHNlY3JldCBpbmZvcm1hdGlvblwiIH0gfSk7XG52YXIgY29udGFpbmVkUGVybWlzc2lvbklkc1NjaGVtYSA9IHl1cEFycmF5KHBlcm1pc3Npb25EZWZpbml0aW9uSWRTY2hlbWEuZGVmaW5lZCgpKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIlRoZSBJRHMgb2YgdGhlIHBlcm1pc3Npb25zIHRoYXQgYXJlIGNvbnRhaW5lZCBpbiB0aGlzIHBlcm1pc3Npb25cIiwgZXhhbXBsZVZhbHVlOiBbXCJyZWFkX3B1YmxpY19pbmZvXCJdIH0gfSk7XG52YXIgdGVhbUlkU2NoZW1hID0geXVwU3RyaW5nKCkudXVpZCgpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IF9pZERlc2NyaXB0aW9uKFwidGVhbVwiKSwgZXhhbXBsZVZhbHVlOiBcImFkOTYyNzc3LTgyNDQtNDk2YS1iNmEyLWUwYzZhNDQ5Yzc5ZVwiIH0gfSk7XG52YXIgdGVhbURpc3BsYXlOYW1lU2NoZW1hID0geXVwU3RyaW5nKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogX2Rpc3BsYXlOYW1lRGVzY3JpcHRpb24oXCJ0ZWFtXCIpLCBleGFtcGxlVmFsdWU6IFwiTXkgVGVhbVwiIH0gfSk7XG52YXIgdGVhbVByb2ZpbGVJbWFnZVVybFNjaGVtYSA9IHVybFNjaGVtYS5tYXgoMWU2KS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBfcHJvZmlsZUltYWdlVXJsRGVzY3JpcHRpb24oXCJ0ZWFtXCIpLCBleGFtcGxlVmFsdWU6IFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9pbWFnZS5qcGdcIiB9IH0pO1xudmFyIHRlYW1DbGllbnRNZXRhZGF0YVNjaGVtYSA9IGpzb25TY2hlbWEubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogX2NsaWVudE1ldGFEYXRhRGVzY3JpcHRpb24oXCJ0ZWFtXCIpLCBleGFtcGxlVmFsdWU6IHsga2V5OiBcInZhbHVlXCIgfSB9IH0pO1xudmFyIHRlYW1DbGllbnRSZWFkT25seU1ldGFkYXRhU2NoZW1hID0ganNvblNjaGVtYS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBfY2xpZW50UmVhZE9ubHlNZXRhRGF0YURlc2NyaXB0aW9uKFwidGVhbVwiKSwgZXhhbXBsZVZhbHVlOiB7IGtleTogXCJ2YWx1ZVwiIH0gfSB9KTtcbnZhciB0ZWFtU2VydmVyTWV0YWRhdGFTY2hlbWEgPSBqc29uU2NoZW1hLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IF9zZXJ2ZXJNZXRhRGF0YURlc2NyaXB0aW9uKFwidGVhbVwiKSwgZXhhbXBsZVZhbHVlOiB7IGtleTogXCJ2YWx1ZVwiIH0gfSB9KTtcbnZhciB0ZWFtQ3JlYXRlZEF0TWlsbGlzU2NoZW1hID0geXVwTnVtYmVyKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogX2NyZWF0ZWRBdE1pbGxpc0Rlc2NyaXB0aW9uKFwidGVhbVwiKSwgZXhhbXBsZVZhbHVlOiAxNjNlMTAgfSB9KTtcbnZhciB0ZWFtSW52aXRhdGlvbkVtYWlsU2NoZW1hID0gZW1haWxTY2hlbWEubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJUaGUgZW1haWwgb2YgdGhlIHVzZXIgdG8gaW52aXRlLlwiLCBleGFtcGxlVmFsdWU6IFwiam9obmRvZUBleGFtcGxlLmNvbVwiIH0gfSk7XG52YXIgdGVhbUludml0YXRpb25DYWxsYmFja1VybFNjaGVtYSA9IHVybFNjaGVtYS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIlRoZSBiYXNlIGNhbGxiYWNrIFVSTCB0byBjb25zdHJ1Y3QgYW4gaW52aXRlIGxpbmsgd2l0aC4gQSBxdWVyeSBwYXJhbWV0ZXIgYGNvZGVgIHdpdGggdGhlIHZlcmlmaWNhdGlvbiBjb2RlIHdpbGwgYmUgYXBwZW5kZWQgdG8gaXQuIFRoZSBwYWdlIHNob3VsZCB0aGVuIG1ha2UgYSByZXF1ZXN0IHRvIHRoZSBgL3RlYW0taW52aXRhdGlvbnMvYWNjZXB0YCBlbmRwb2ludC5cIiwgZXhhbXBsZVZhbHVlOiBcImh0dHBzOi8vZXhhbXBsZS5jb20vaGFuZGxlci90ZWFtLWludml0YXRpb25cIiB9IH0pO1xudmFyIHRlYW1DcmVhdG9yVXNlcklkU2NoZW1hID0gdXNlcklkT3JNZVNjaGVtYS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiAnVGhlIElEIG9mIHRoZSBjcmVhdG9yIG9mIHRoZSB0ZWFtLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgdXNlciB3aWxsIG5vdCBiZSBhZGRlZCB0byB0aGUgdGVhbS4gQ2FuIGJlIGVpdGhlciBcIm1lXCIgb3IgdGhlIElEIG9mIHRoZSB1c2VyLiBPbmx5IHVzZWQgb24gdGhlIGNsaWVudCBzaWRlLicsIGV4YW1wbGVWYWx1ZTogXCJtZVwiIH0gfSk7XG52YXIgdGVhbU1lbWJlckRpc3BsYXlOYW1lU2NoZW1hID0geXVwU3RyaW5nKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogX2Rpc3BsYXlOYW1lRGVzY3JpcHRpb24oXCJ0ZWFtIG1lbWJlclwiKSArIFwiIE5vdGUgdGhhdCB0aGlzIGlzIHNlcGFyYXRlIGZyb20gdGhlIGRpc3BsYXlfbmFtZSBvZiB0aGUgdXNlci5cIiwgZXhhbXBsZVZhbHVlOiBcIkpvaG4gRG9lXCIgfSB9KTtcbnZhciB0ZWFtTWVtYmVyUHJvZmlsZUltYWdlVXJsU2NoZW1hID0gdXJsU2NoZW1hLm1heCgxZTYpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IF9wcm9maWxlSW1hZ2VVcmxEZXNjcmlwdGlvbihcInRlYW0gbWVtYmVyXCIpLCBleGFtcGxlVmFsdWU6IFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9pbWFnZS5qcGdcIiB9IH0pO1xudmFyIGNvbnRhY3RDaGFubmVsSWRTY2hlbWEgPSB5dXBTdHJpbmcoKS51dWlkKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogX2lkRGVzY3JpcHRpb24oXCJjb250YWN0IGNoYW5uZWxcIiksIGV4YW1wbGVWYWx1ZTogXCJiM2QzOTZiOC1jNTc0LTRjODAtOTdiMy01MDAzMTY3NWNlYjJcIiB9IH0pO1xudmFyIGNvbnRhY3RDaGFubmVsVHlwZVNjaGVtYSA9IHl1cFN0cmluZygpLm9uZU9mKFtcImVtYWlsXCJdKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBgVGhlIHR5cGUgb2YgdGhlIGNvbnRhY3QgY2hhbm5lbC4gQ3VycmVudGx5IG9ubHkgXCJlbWFpbFwiIGlzIHN1cHBvcnRlZC5gLCBleGFtcGxlVmFsdWU6IFwiZW1haWxcIiB9IH0pO1xudmFyIGNvbnRhY3RDaGFubmVsVmFsdWVTY2hlbWEgPSB5dXBTdHJpbmcoKS53aGVuKFwidHlwZVwiLCB7XG4gIGlzOiBcImVtYWlsXCIsXG4gIHRoZW46IChzY2hlbWEpID0+IHNjaGVtYS5lbWFpbCgpXG59KS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIlRoZSB2YWx1ZSBvZiB0aGUgY29udGFjdCBjaGFubmVsLiBGb3IgZW1haWwsIHRoaXMgc2hvdWxkIGJlIGEgdmFsaWQgZW1haWwgYWRkcmVzcy5cIiwgZXhhbXBsZVZhbHVlOiBcImpvaG5kb2VAZXhhbXBsZS5jb21cIiB9IH0pO1xudmFyIGNvbnRhY3RDaGFubmVsVXNlZEZvckF1dGhTY2hlbWEgPSB5dXBCb29sZWFuKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJXaGV0aGVyIHRoZSBjb250YWN0IGNoYW5uZWwgaXMgdXNlZCBmb3IgYXV0aGVudGljYXRpb24uIElmIHRoaXMgaXMgc2V0IHRvIGB0cnVlYCwgdGhlIHVzZXIgd2lsbCBiZSBhYmxlIHRvIHNpZ24gaW4gd2l0aCB0aGUgY29udGFjdCBjaGFubmVsIHdpdGggcGFzc3dvcmQgb3IgT1RQLlwiLCBleGFtcGxlVmFsdWU6IHRydWUgfSB9KTtcbnZhciBjb250YWN0Q2hhbm5lbElzVmVyaWZpZWRTY2hlbWEgPSB5dXBCb29sZWFuKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJXaGV0aGVyIHRoZSBjb250YWN0IGNoYW5uZWwgaGFzIGJlZW4gdmVyaWZpZWQuIElmIHRoaXMgaXMgc2V0IHRvIGB0cnVlYCwgdGhlIGNvbnRhY3QgY2hhbm5lbCBoYXMgYmVlbiB2ZXJpZmllZCB0byBiZWxvbmcgdG8gdGhlIHVzZXIuXCIsIGV4YW1wbGVWYWx1ZTogdHJ1ZSB9IH0pO1xudmFyIGNvbnRhY3RDaGFubmVsSXNQcmltYXJ5U2NoZW1hID0geXVwQm9vbGVhbigpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiV2hldGhlciB0aGUgY29udGFjdCBjaGFubmVsIGlzIHRoZSBwcmltYXJ5IGNvbnRhY3QgY2hhbm5lbC4gSWYgdGhpcyBpcyBzZXQgdG8gYHRydWVgLCBpdCB3aWxsIGJlIHVzZWQgZm9yIGF1dGhlbnRpY2F0aW9uIGFuZCBub3RpZmljYXRpb25zIGJ5IGRlZmF1bHQuXCIsIGV4YW1wbGVWYWx1ZTogdHJ1ZSB9IH0pO1xudmFyIG9hdXRoUHJvdmlkZXJJZFNjaGVtYSA9IHl1cFN0cmluZygpLnV1aWQoKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBfaWREZXNjcmlwdGlvbihcIk9BdXRoIHByb3ZpZGVyXCIpLCBleGFtcGxlVmFsdWU6IFwiYjNkMzk2YjgtYzU3NC00YzgwLTk3YjMtNTAwMzE2NzVjZWIyXCIgfSB9KTtcbnZhciBvYXV0aFByb3ZpZGVyRW1haWxTY2hlbWEgPSBlbWFpbFNjaGVtYS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIkVtYWlsIG9mIHRoZSBPQXV0aCBwcm92aWRlci4gVGhpcyBpcyB1c2VkIHRvIGRpc3BsYXkgYW5kIGlkZW50aWZ5IHRoZSBPQXV0aCBwcm92aWRlciBpbiB0aGUgVUkuXCIsIGV4YW1wbGVWYWx1ZTogXCJ0ZXN0QGdtYWlsLmNvbVwiIH0gfSk7XG52YXIgb2F1dGhQcm92aWRlclR5cGVTY2hlbWEgPSB5dXBTdHJpbmcoKS5vbmVPZihhbGxQcm92aWRlcnMpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IGBPQXV0aCBwcm92aWRlciB0eXBlLCBvbmUgb2YgJHthbGxQcm92aWRlcnMubWFwKCh4KSA9PiBgXFxgJHt4fVxcYGApLmpvaW4oXCIsIFwiKX1gLCBleGFtcGxlVmFsdWU6IFwiZ29vZ2xlXCIgfSB9KTtcbnZhciBvYXV0aFByb3ZpZGVyQWxsb3dTaWduSW5TY2hlbWEgPSB5dXBCb29sZWFuKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJXaGV0aGVyIHRoZSB1c2VyIGNhbiB1c2UgdGhpcyBPQXV0aCBwcm92aWRlciB0byBzaWduIGluLiBPbmx5IG9uZSBPQXV0aCBwcm92aWRlciBwZXIgdHlwZSBjYW4gaGF2ZSB0aGlzIHNldCB0byBgdHJ1ZWAuXCIsIGV4YW1wbGVWYWx1ZTogdHJ1ZSB9IH0pO1xudmFyIG9hdXRoUHJvdmlkZXJBbGxvd0Nvbm5lY3RlZEFjY291bnRzU2NoZW1hID0geXVwQm9vbGVhbigpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiV2hldGhlciB0aGUgdXNlciBjYW4gdXNlIHRoaXMgT0F1dGggcHJvdmlkZXIgYXMgY29ubmVjdGVkIGFjY291bnQuIE11bHRpcGxlIE9BdXRoIHByb3ZpZGVycyBwZXIgdHlwZSBjYW4gaGF2ZSB0aGlzIHNldCB0byBgdHJ1ZWAuXCIsIGV4YW1wbGVWYWx1ZTogdHJ1ZSB9IH0pO1xudmFyIG9hdXRoUHJvdmlkZXJBY2NvdW50SWRTY2hlbWEgPSB5dXBTdHJpbmcoKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIkFjY291bnQgSUQgb2YgdGhlIE9BdXRoIHByb3ZpZGVyLiBUaGlzIHVuaXF1ZWx5IGlkZW50aWZpZXMgdGhlIGFjY291bnQgb24gdGhlIHByb3ZpZGVyIHNpZGUuXCIsIGV4YW1wbGVWYWx1ZTogXCJnb29nbGUtYWNjb3VudC1pZC0xMjM0NVwiIH0gfSk7XG52YXIgb2F1dGhQcm92aWRlclByb3ZpZGVyQ29uZmlnSWRTY2hlbWEgPSB5dXBTdHJpbmcoKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIlByb3ZpZGVyIGNvbmZpZyBJRCBvZiB0aGUgT0F1dGggcHJvdmlkZXIuIFRoaXMgdW5pcXVlbHkgaWRlbnRpZmllcyB0aGUgcHJvdmlkZXIgY29uZmlnIG9uIGNvbmZpZy5qc29uIGZpbGVcIiwgZXhhbXBsZVZhbHVlOiBcImdvb2dsZVwiIH0gfSk7XG52YXIgYmFzaWNBdXRob3JpemF0aW9uSGVhZGVyU2NoZW1hID0geXVwU3RyaW5nKCkudGVzdChcImlzLWJhc2ljLWF1dGhvcml6YXRpb24taGVhZGVyXCIsICdBdXRob3JpemF0aW9uIGhlYWRlciBtdXN0IGJlIGluIHRoZSBmb3JtYXQgXCJCYXNpYyA8YmFzZTY0PlwiJywgKHZhbHVlKSA9PiB7XG4gIGlmICghdmFsdWUpIHJldHVybiB0cnVlO1xuICByZXR1cm4gZGVjb2RlQmFzaWNBdXRob3JpemF0aW9uSGVhZGVyKHZhbHVlKSAhPT0gbnVsbDtcbn0pO1xudmFyIG5lb25BdXRob3JpemF0aW9uSGVhZGVyU2NoZW1hID0gYmFzaWNBdXRob3JpemF0aW9uSGVhZGVyU2NoZW1hLnRlc3QoXCJpcy1hdXRob3JpemF0aW9uLWhlYWRlclwiLCBcIkludmFsaWQgY2xpZW50X2lkOmNsaWVudF9zZWNyZXQgdmFsdWVzOyBkaWQgeW91IHVzZSB0aGUgY29ycmVjdCB2YWx1ZXMgZm9yIHRoZSBpbnRlZ3JhdGlvbj9cIiwgKHZhbHVlKSA9PiB7XG4gIGlmICghdmFsdWUpIHJldHVybiB0cnVlO1xuICBjb25zdCBbY2xpZW50SWQsIGNsaWVudFNlY3JldF0gPSBkZWNvZGVCYXNpY0F1dGhvcml6YXRpb25IZWFkZXIodmFsdWUpID8/IHRocm93RXJyKGBBdXRoeiBoZWFkZXIgaW52YWxpZD8gVGhpcyBzaG91bGQndmUgYmVlbiB2YWxpZGF0ZWQgYnkgYmFzaWNBdXRob3JpemF0aW9uSGVhZGVyU2NoZW1hOiAke3ZhbHVlfWApO1xuICBmb3IgKGNvbnN0IG5lb25DbGllbnRDb25maWcgb2YgSlNPTi5wYXJzZShwcm9jZXNzLmVudi5TVEFDS19JTlRFR1JBVElPTl9DTElFTlRTX0NPTkZJRyB8fCBcIltdXCIpKSB7XG4gICAgaWYgKGNsaWVudElkID09PSBuZW9uQ2xpZW50Q29uZmlnLmNsaWVudF9pZCAmJiBjbGllbnRTZWNyZXQgPT09IG5lb25DbGllbnRDb25maWcuY2xpZW50X3NlY3JldCkgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufSk7XG5mdW5jdGlvbiB5dXBEZWZpbmVkV2hlbihzY2hlbWEsIHRyaWdnZXJzKSB7XG4gIGNvbnN0IGVudHJpZXMgPSBPYmplY3QuZW50cmllcyh0cmlnZ2Vycyk7XG4gIHJldHVybiBzY2hlbWEud2hlbihlbnRyaWVzLm1hcCgoW2tleV0pID0+IGtleSksIHtcbiAgICBpczogKC4uLnZhbHVlcykgPT4gZW50cmllcy5ldmVyeSgoW2tleSwgdmFsdWVdLCBpbmRleCkgPT4gdmFsdWUgPT09IHZhbHVlc1tpbmRleF0pLFxuICAgIHRoZW46IChzY2hlbWEyKSA9PiBzY2hlbWEyLmRlZmluZWQoKSxcbiAgICBvdGhlcndpc2U6IChzY2hlbWEyKSA9PiBzY2hlbWEyLm9wdGlvbmFsKClcbiAgfSk7XG59XG5mdW5jdGlvbiB5dXBEZWZpbmVkQW5kTm9uRW1wdHlXaGVuKHNjaGVtYSwgdHJpZ2dlcnMpIHtcbiAgY29uc3QgZW50cmllcyA9IE9iamVjdC5lbnRyaWVzKHRyaWdnZXJzKTtcbiAgcmV0dXJuIHNjaGVtYS53aGVuKGVudHJpZXMubWFwKChba2V5XSkgPT4ga2V5KSwge1xuICAgIGlzOiAoLi4udmFsdWVzKSA9PiBlbnRyaWVzLmV2ZXJ5KChba2V5LCB2YWx1ZV0sIGluZGV4KSA9PiB2YWx1ZSA9PT0gdmFsdWVzW2luZGV4XSksXG4gICAgdGhlbjogKHNjaGVtYTIpID0+IHNjaGVtYTIuZGVmaW5lZCgpLm5vbkVtcHR5KCksXG4gICAgb3RoZXJ3aXNlOiAoc2NoZW1hMikgPT4gc2NoZW1hMi5vcHRpb25hbCgpXG4gIH0pO1xufVxuZXhwb3J0IHtcbiAgUmVwbGFjZUZpZWxkV2l0aE93blVzZXJJZCxcbiAgYWNjZXNzVG9rZW5QYXlsb2FkU2NoZW1hLFxuICBhY2Nlc3NUb2tlblJlc3BvbnNlU2NoZW1hLFxuICBhZGFwdFNjaGVtYSxcbiAgYWRtaW5BdXRoVHlwZVNjaGVtYSxcbiAgYmFzZTY0U2NoZW1hLFxuICBiYXNpY0F1dGhvcml6YXRpb25IZWFkZXJTY2hlbWEsXG4gIGNsaWVudE9ySGlnaGVyQXV0aFR5cGVTY2hlbWEsXG4gIGNvbnRhY3RDaGFubmVsSWRTY2hlbWEsXG4gIGNvbnRhY3RDaGFubmVsSXNQcmltYXJ5U2NoZW1hLFxuICBjb250YWN0Q2hhbm5lbElzVmVyaWZpZWRTY2hlbWEsXG4gIGNvbnRhY3RDaGFubmVsVHlwZVNjaGVtYSxcbiAgY29udGFjdENoYW5uZWxVc2VkRm9yQXV0aFNjaGVtYSxcbiAgY29udGFjdENoYW5uZWxWYWx1ZVNjaGVtYSxcbiAgY29udGFpbmVkUGVybWlzc2lvbklkc1NjaGVtYSxcbiAgY3VzdG9tUGVybWlzc2lvbkRlZmluaXRpb25JZFNjaGVtYSxcbiAgY3VzdG9tZXJUeXBlU2NoZW1hLFxuICBkYXlJbnRlcnZhbE9yTmV2ZXJTY2hlbWEsXG4gIGRheUludGVydmFsU2NoZW1hLFxuICBlbWFpbEhvc3RTY2hlbWEsXG4gIGVtYWlsT3RwU2lnbkluQ2FsbGJhY2tVcmxTY2hlbWEsXG4gIGVtYWlsUGFzc3dvcmRTY2hlbWEsXG4gIGVtYWlsUG9ydFNjaGVtYSxcbiAgZW1haWxTY2hlbWEsXG4gIGVtYWlsU2VuZGVyRW1haWxTY2hlbWEsXG4gIGVtYWlsU2VuZGVyTmFtZVNjaGVtYSxcbiAgZW1haWxUZW1wbGF0ZUxpc3RTY2hlbWEsXG4gIGVtYWlsVGhlbWVMaXN0U2NoZW1hLFxuICBlbWFpbFRoZW1lU2NoZW1hLFxuICBlbWFpbFR5cGVTY2hlbWEsXG4gIGVtYWlsVXNlcm5hbWVTY2hlbWEsXG4gIGVtYWlsVmVyaWZpY2F0aW9uQ2FsbGJhY2tVcmxTY2hlbWEsXG4gIGVuc3VyZU9iamVjdFNjaGVtYSxcbiAgaGFuZGxlclBhdGhTY2hlbWEsXG4gIGlubGluZU9mZmVyU2NoZW1hLFxuICBpbnRlcnZhbE9yTmV2ZXJTY2hlbWEsXG4gIGludGVydmFsU2NoZW1hLFxuICBqc29uU2NoZW1hLFxuICBqc29uU3RyaW5nT3JFbXB0eVNjaGVtYSxcbiAganNvblN0cmluZ1NjaGVtYSxcbiAgbW9uZXlBbW91bnRTY2hlbWEsXG4gIG5lb25BdXRob3JpemF0aW9uSGVhZGVyU2NoZW1hLFxuICBvYXV0aEFjY291bnRNZXJnZVN0cmF0ZWd5U2NoZW1hLFxuICBvYXV0aENsaWVudElkU2NoZW1hLFxuICBvYXV0aENsaWVudFNlY3JldFNjaGVtYSxcbiAgb2F1dGhFbmFibGVkU2NoZW1hLFxuICBvYXV0aEZhY2Vib29rQ29uZmlnSWRTY2hlbWEsXG4gIG9hdXRoSWRTY2hlbWEsXG4gIG9hdXRoTWljcm9zb2Z0VGVuYW50SWRTY2hlbWEsXG4gIG9hdXRoUHJvdmlkZXJBY2NvdW50SWRTY2hlbWEsXG4gIG9hdXRoUHJvdmlkZXJBbGxvd0Nvbm5lY3RlZEFjY291bnRzU2NoZW1hLFxuICBvYXV0aFByb3ZpZGVyQWxsb3dTaWduSW5TY2hlbWEsXG4gIG9hdXRoUHJvdmlkZXJFbWFpbFNjaGVtYSxcbiAgb2F1dGhQcm92aWRlcklkU2NoZW1hLFxuICBvYXV0aFByb3ZpZGVyUHJvdmlkZXJDb25maWdJZFNjaGVtYSxcbiAgb2F1dGhQcm92aWRlclR5cGVTY2hlbWEsXG4gIG9hdXRoVHlwZVNjaGVtYSxcbiAgb2ZmZXJQcmljZVNjaGVtYSxcbiAgb2ZmZXJTY2hlbWEsXG4gIHBhc3N3b3JkU2NoZW1hLFxuICBwZXJtaXNzaW9uRGVmaW5pdGlvbklkU2NoZW1hLFxuICBwcmljZU9ySW5jbHVkZUJ5RGVmYXVsdFNjaGVtYSxcbiAgcHJpbWFyeUVtYWlsQXV0aEVuYWJsZWRTY2hlbWEsXG4gIHByaW1hcnlFbWFpbFNjaGVtYSxcbiAgcHJpbWFyeUVtYWlsVmVyaWZpZWRTY2hlbWEsXG4gIHByb2ZpbGVJbWFnZVVybFNjaGVtYSxcbiAgcHJvamVjdEFsbG93TG9jYWxob3N0U2NoZW1hLFxuICBwcm9qZWN0QnJhbmNoSWRTY2hlbWEsXG4gIHByb2plY3RDbGllbnRUZWFtQ3JlYXRpb25FbmFibGVkU2NoZW1hLFxuICBwcm9qZWN0Q2xpZW50VXNlckRlbGV0aW9uRW5hYmxlZFNjaGVtYSxcbiAgcHJvamVjdENvbmZpZ0lkU2NoZW1hLFxuICBwcm9qZWN0Q3JlYXRlVGVhbU9uU2lnblVwU2NoZW1hLFxuICBwcm9qZWN0Q3JlYXRlZEF0TWlsbGlzU2NoZW1hLFxuICBwcm9qZWN0Q3JlZGVudGlhbEVuYWJsZWRTY2hlbWEsXG4gIHByb2plY3REZXNjcmlwdGlvblNjaGVtYSxcbiAgcHJvamVjdERpc3BsYXlOYW1lU2NoZW1hLFxuICBwcm9qZWN0RnVsbExvZ29VcmxTY2hlbWEsXG4gIHByb2plY3RJZFNjaGVtYSxcbiAgcHJvamVjdElzUHJvZHVjdGlvbk1vZGVTY2hlbWEsXG4gIHByb2plY3RMb2dvVXJsU2NoZW1hLFxuICBwcm9qZWN0TWFnaWNMaW5rRW5hYmxlZFNjaGVtYSxcbiAgcHJvamVjdFBhc3NrZXlFbmFibGVkU2NoZW1hLFxuICBwcm9qZWN0U2lnblVwRW5hYmxlZFNjaGVtYSxcbiAgcmVmcmVzaFRva2VuUmVzcG9uc2VTY2hlbWEsXG4gIHNlbGVjdGVkVGVhbUlkU2NoZW1hLFxuICBzZXJ2ZXJPckhpZ2hlckF1dGhUeXBlU2NoZW1hLFxuICBzaWduSW5FbWFpbFNjaGVtYSxcbiAgc2lnbkluUmVzcG9uc2VTY2hlbWEsXG4gIHNpZ25lZFVwQXRNaWxsaXNTY2hlbWEsXG4gIHN0cmljdEVtYWlsU2NoZW1hLFxuICB0ZWFtQ2xpZW50TWV0YWRhdGFTY2hlbWEsXG4gIHRlYW1DbGllbnRSZWFkT25seU1ldGFkYXRhU2NoZW1hLFxuICB0ZWFtQ3JlYXRlZEF0TWlsbGlzU2NoZW1hLFxuICB0ZWFtQ3JlYXRvclVzZXJJZFNjaGVtYSxcbiAgdGVhbURpc3BsYXlOYW1lU2NoZW1hLFxuICB0ZWFtSWRTY2hlbWEsXG4gIHRlYW1JbnZpdGF0aW9uQ2FsbGJhY2tVcmxTY2hlbWEsXG4gIHRlYW1JbnZpdGF0aW9uRW1haWxTY2hlbWEsXG4gIHRlYW1NZW1iZXJEaXNwbGF5TmFtZVNjaGVtYSxcbiAgdGVhbU1lbWJlclByb2ZpbGVJbWFnZVVybFNjaGVtYSxcbiAgdGVhbVBlcm1pc3Npb25EZXNjcmlwdGlvblNjaGVtYSxcbiAgdGVhbVByb2ZpbGVJbWFnZVVybFNjaGVtYSxcbiAgdGVhbVNlcnZlck1ldGFkYXRhU2NoZW1hLFxuICB0ZWFtU3lzdGVtUGVybWlzc2lvbnMsXG4gIHRlbXBsYXRlVGhlbWVJZFNjaGVtYSxcbiAgdXJsU2NoZW1hLFxuICB1c2VyQ2xpZW50TWV0YWRhdGFTY2hlbWEsXG4gIHVzZXJDbGllbnRSZWFkT25seU1ldGFkYXRhU2NoZW1hLFxuICB1c2VyRGlzcGxheU5hbWVTY2hlbWEsXG4gIHVzZXJIYXNQYXNzd29yZFNjaGVtYSxcbiAgdXNlcklkT3JNZVNjaGVtYSxcbiAgdXNlcklkU2NoZW1hLFxuICB1c2VyTGFzdEFjdGl2ZUF0TWlsbGlzU2NoZW1hLFxuICB1c2VyT0F1dGhQcm92aWRlclNjaGVtYSxcbiAgdXNlck90cEF1dGhFbmFibGVkTXV0YXRpb25TY2hlbWEsXG4gIHVzZXJPdHBBdXRoRW5hYmxlZFNjaGVtYSxcbiAgdXNlclBhc3NrZXlBdXRoRW5hYmxlZFNjaGVtYSxcbiAgdXNlclBhc3N3b3JkSGFzaE11dGF0aW9uU2NoZW1hLFxuICB1c2VyUGFzc3dvcmRNdXRhdGlvblNjaGVtYSxcbiAgdXNlclNlcnZlck1ldGFkYXRhU2NoZW1hLFxuICB1c2VyU3BlY2lmaWVkSWRTY2hlbWEsXG4gIHVzZXJUb3RwU2VjcmV0TXV0YXRpb25TY2hlbWEsXG4gIHdpbGRjYXJkVXJsU2NoZW1hLFxuICB5dXBBcnJheSxcbiAgeXVwQm9vbGVhbixcbiAgeXVwRGF0ZSxcbiAgeXVwRGVmaW5lZEFuZE5vbkVtcHR5V2hlbixcbiAgeXVwRGVmaW5lZFdoZW4sXG4gIHl1cE1peGVkLFxuICB5dXBOZXZlcixcbiAgeXVwTnVtYmVyLFxuICB5dXBPYmplY3QsXG4gIHl1cE9iamVjdFdpdGhBdXRvRGVmYXVsdCxcbiAgeXVwUmVjb3JkLFxuICB5dXBTdHJpbmcsXG4gIHl1cFR1cGxlLFxuICB5dXBVbmlvbixcbiAgeXVwVmFsaWRhdGVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zY2hlbWEtZmllbGRzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/schema-fields.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/sessions.js":
/*!****************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/sessions.js ***!
  \****************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AccessToken: () => (/* binding */ AccessToken),\n/* harmony export */   InternalSession: () => (/* binding */ InternalSession),\n/* harmony export */   RefreshToken: () => (/* binding */ RefreshToken)\n/* harmony export */ });\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/.pnpm/jose@5.10.0/node_modules/jose/dist/node/esm/util/decode_jwt.js\");\n/* harmony import */ var _schema_fields_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./schema-fields.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/schema-fields.js\");\n/* harmony import */ var _utils_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/errors.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n/* harmony import */ var _utils_stores_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/stores.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/stores.js\");\n// src/sessions.ts\n\n\n\n\nfunction decodeAccessTokenIfValid(token) {\n  try {\n    const payload = jose__WEBPACK_IMPORTED_MODULE_3__.decodeJwt(token);\n    return _schema_fields_js__WEBPACK_IMPORTED_MODULE_0__.accessTokenPayloadSchema.validateSync(payload);\n  } catch (e) {\n    return null;\n  }\n}\nvar AccessToken = class _AccessToken {\n  constructor(token) {\n    this.token = token;\n    if (token === \"undefined\") {\n      throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Access token is the string 'undefined'; it's unlikely this is the correct value. They're supposed to be unguessable!\");\n    }\n  }\n  static createIfValid(token) {\n    const payload = decodeAccessTokenIfValid(token);\n    if (!payload) return null;\n    return new _AccessToken(token);\n  }\n  get payload() {\n    return decodeAccessTokenIfValid(this.token) ?? (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_1__.throwErr)(\"Invalid access token in payload (should've been validated in createIfValid)\", { token: this.token });\n  }\n  get expiresAt() {\n    const { exp } = this.payload;\n    if (exp === void 0) return /* @__PURE__ */ new Date(864e13);\n    return new Date(exp * 1e3);\n  }\n  /**\n   * @returns The number of milliseconds until the access token expires, or 0 if it has already expired.\n   */\n  get expiresInMillis() {\n    return Math.max(0, this.expiresAt.getTime() - Date.now());\n  }\n  isExpired() {\n    return this.expiresInMillis <= 0;\n  }\n};\nvar RefreshToken = class {\n  constructor(token) {\n    this.token = token;\n    if (token === \"undefined\") {\n      throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Refresh token is the string 'undefined'; it's unlikely this is the correct value. They're supposed to be unguessable!\");\n    }\n  }\n};\nvar InternalSession = class _InternalSession {\n  constructor(_options) {\n    this._options = _options;\n    /**\n     * Whether the session as a whole is known to be invalid (ie. both access and refresh tokens are invalid). Used as a cache to avoid making multiple requests to the server (sessions never go back to being valid after being invalidated).\n     *\n     * It is possible for the access token to be invalid but the refresh token to be valid, in which case the session is\n     * still valid (just needs a refresh). It is also possible for the access token to be valid but the refresh token to\n     * be invalid, in which case the session is also valid (eg. if the refresh token is null because the user only passed\n     * in an access token, eg. in a server-side request handler).\n     */\n    this._knownToBeInvalid = new _utils_stores_js__WEBPACK_IMPORTED_MODULE_2__.Store(false);\n    this._refreshPromise = null;\n    this._accessToken = new _utils_stores_js__WEBPACK_IMPORTED_MODULE_2__.Store(_options.accessToken ? AccessToken.createIfValid(_options.accessToken) : null);\n    this._refreshToken = _options.refreshToken ? new RefreshToken(_options.refreshToken) : null;\n    if (_options.accessToken === null && _options.refreshToken === null) {\n      this._knownToBeInvalid.set(true);\n    }\n    this.sessionKey = _InternalSession.calculateSessionKey({ accessToken: _options.accessToken ?? null, refreshToken: _options.refreshToken });\n  }\n  static calculateSessionKey(ofTokens) {\n    if (ofTokens.refreshToken) {\n      return `refresh-${ofTokens.refreshToken}`;\n    } else if (ofTokens.accessToken) {\n      return `access-${ofTokens.accessToken}`;\n    } else {\n      return \"not-logged-in\";\n    }\n  }\n  isKnownToBeInvalid() {\n    return this._knownToBeInvalid.get();\n  }\n  /**\n   * Marks the session object as invalid, meaning that the refresh and access tokens can no longer be used.\n   */\n  markInvalid() {\n    this._accessToken.set(null);\n    this._knownToBeInvalid.set(true);\n  }\n  onInvalidate(callback) {\n    return this._knownToBeInvalid.onChange(() => callback());\n  }\n  /**\n   * Returns the access token if it is found in the cache and not expired yet, or null otherwise. Never fetches new tokens.\n   */\n  getAccessTokenIfNotExpiredYet(minMillisUntilExpiration) {\n    if (minMillisUntilExpiration > 6e4) {\n      throw new Error(`Required access token expiry ${minMillisUntilExpiration}ms is too long; access tokens are too short to be used for more than 60s`);\n    }\n    const accessToken = this._getPotentiallyInvalidAccessTokenIfAvailable();\n    if (!accessToken || accessToken.expiresInMillis < minMillisUntilExpiration) return null;\n    return accessToken;\n  }\n  /**\n   * Returns the access token if it is found in the cache, fetching it otherwise.\n   *\n   * This is usually the function you want to call to get an access token. Either set `minMillisUntilExpiration` to a reasonable value, or catch errors that occur if it expires, and call `markAccessTokenExpired` to mark the token as expired if so (after which a call to this function will always refetch the token).\n   *\n   * @returns null if the session is known to be invalid, cached tokens if they exist in the cache and the access token hasn't expired yet (the refresh token might still be invalid), or new tokens otherwise.\n   */\n  async getOrFetchLikelyValidTokens(minMillisUntilExpiration) {\n    const accessToken = this.getAccessTokenIfNotExpiredYet(minMillisUntilExpiration);\n    if (!accessToken) {\n      const newTokens = await this.fetchNewTokens();\n      const expiresInMillis = newTokens?.accessToken.expiresInMillis;\n      if (expiresInMillis && expiresInMillis < minMillisUntilExpiration) {\n        throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(`Required access token expiry ${minMillisUntilExpiration}ms is too long; access tokens are too short when they're generated (${expiresInMillis}ms)`);\n      }\n      return newTokens;\n    }\n    return { accessToken, refreshToken: this._refreshToken };\n  }\n  /**\n   * Fetches new tokens that are, at the time of fetching, guaranteed to be valid.\n   *\n   * The newly generated tokens are short-lived, so it's good practice not to rely on their validity (if possible). However, this function is useful in some cases where you only want to pass access tokens to a service, and you want to make sure said access token has the longest possible lifetime.\n   *\n   * In most cases, you should prefer `getOrFetchLikelyValidTokens`.\n   *\n   * @returns null if the session is known to be invalid, or new tokens otherwise (which, at the time of fetching, are guaranteed to be valid).\n   */\n  async fetchNewTokens() {\n    const accessToken = await this._getNewlyFetchedAccessToken();\n    return accessToken ? { accessToken, refreshToken: this._refreshToken } : null;\n  }\n  markAccessTokenExpired(accessToken) {\n    if (this._accessToken.get() === accessToken) {\n      this._accessToken.set(null);\n    }\n  }\n  /**\n   * Note that a callback invocation with `null` does not mean the session has been invalidated; the access token may just have expired. Use `onInvalidate` to detect invalidation.\n   */\n  onAccessTokenChange(callback) {\n    return this._accessToken.onChange(callback);\n  }\n  /**\n   * @returns An access token, which may be expired or expire soon, or null if it is known to be invalid.\n   */\n  _getPotentiallyInvalidAccessTokenIfAvailable() {\n    if (!this._refreshToken) return null;\n    if (this.isKnownToBeInvalid()) return null;\n    const accessToken = this._accessToken.get();\n    if (accessToken && !accessToken.isExpired()) return accessToken;\n    return null;\n  }\n  /**\n   * You should prefer `_getOrFetchPotentiallyInvalidAccessToken` in almost all cases.\n   *\n   * @returns A newly fetched access token (never read from cache), or null if the session either does not represent a user or the session is invalid.\n   */\n  async _getNewlyFetchedAccessToken() {\n    if (!this._refreshToken) return null;\n    if (this._knownToBeInvalid.get()) return null;\n    if (!this._refreshPromise) {\n      this._refreshAndSetRefreshPromise(this._refreshToken);\n    }\n    return await this._refreshPromise;\n  }\n  _refreshAndSetRefreshPromise(refreshToken) {\n    let refreshPromise = this._options.refreshAccessTokenCallback(refreshToken).then((accessToken) => {\n      if (refreshPromise === this._refreshPromise) {\n        this._refreshPromise = null;\n        this._accessToken.set(accessToken);\n        if (!accessToken) {\n          this.markInvalid();\n        }\n      }\n      return accessToken;\n    });\n    this._refreshPromise = refreshPromise;\n  }\n};\n\n//# sourceMappingURL=sessions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vc2Vzc2lvbnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQzZCO0FBQ2lDO0FBQ0k7QUFDeEI7QUFDMUM7QUFDQTtBQUNBLG9CQUFvQiwyQ0FBYztBQUNsQyxXQUFXLHVFQUF3QjtBQUNuQyxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsaUVBQW1CLDBDQUEwQztBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELDBEQUFRLGtGQUFrRixtQkFBbUI7QUFDaEs7QUFDQTtBQUNBLFlBQVksTUFBTTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGlFQUFtQiwyQ0FBMkM7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxtREFBSztBQUN0QztBQUNBLDRCQUE0QixtREFBSztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxnRkFBZ0Y7QUFDN0k7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHNCQUFzQjtBQUM5QyxNQUFNO0FBQ04sdUJBQXVCLHFCQUFxQjtBQUM1QyxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELHlCQUF5QixnQkFBZ0I7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGlFQUFtQixpQ0FBaUMseUJBQXlCLGdCQUFnQixzREFBc0QsZ0JBQWdCO0FBQ3JMO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsZ0RBQWdEO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUdBQWlHO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUtFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZngyZWRlbm9hc2lzL0Rvd25sb2Fkcy9EZXZlbG9wbWVudC9Fc3BhZGEvbm9kZV9tb2R1bGVzLy5wbnBtL0BzdGFja2ZyYW1lK3N0YWNrLXNoYXJlZEAyLjguNDFfQGF3cy1zZGsrY3JlZGVudGlhbC1wcm92aWRlci13ZWItaWRlbnRpdHlAMy45MDEuMF9AdHlwZV83NGRiYTAxZjZkODllNzIwODk2YjRkZjM0NTgzMzk5MC9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvZXNtL3Nlc3Npb25zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9zZXNzaW9ucy50c1xuaW1wb3J0ICogYXMgam9zZSBmcm9tIFwiam9zZVwiO1xuaW1wb3J0IHsgYWNjZXNzVG9rZW5QYXlsb2FkU2NoZW1hIH0gZnJvbSBcIi4vc2NoZW1hLWZpZWxkcy5qc1wiO1xuaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciwgdGhyb3dFcnIgfSBmcm9tIFwiLi91dGlscy9lcnJvcnMuanNcIjtcbmltcG9ydCB7IFN0b3JlIH0gZnJvbSBcIi4vdXRpbHMvc3RvcmVzLmpzXCI7XG5mdW5jdGlvbiBkZWNvZGVBY2Nlc3NUb2tlbklmVmFsaWQodG9rZW4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwYXlsb2FkID0gam9zZS5kZWNvZGVKd3QodG9rZW4pO1xuICAgIHJldHVybiBhY2Nlc3NUb2tlblBheWxvYWRTY2hlbWEudmFsaWRhdGVTeW5jKHBheWxvYWQpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbnZhciBBY2Nlc3NUb2tlbiA9IGNsYXNzIF9BY2Nlc3NUb2tlbiB7XG4gIGNvbnN0cnVjdG9yKHRva2VuKSB7XG4gICAgdGhpcy50b2tlbiA9IHRva2VuO1xuICAgIGlmICh0b2tlbiA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJBY2Nlc3MgdG9rZW4gaXMgdGhlIHN0cmluZyAndW5kZWZpbmVkJzsgaXQncyB1bmxpa2VseSB0aGlzIGlzIHRoZSBjb3JyZWN0IHZhbHVlLiBUaGV5J3JlIHN1cHBvc2VkIHRvIGJlIHVuZ3Vlc3NhYmxlIVwiKTtcbiAgICB9XG4gIH1cbiAgc3RhdGljIGNyZWF0ZUlmVmFsaWQodG9rZW4pIHtcbiAgICBjb25zdCBwYXlsb2FkID0gZGVjb2RlQWNjZXNzVG9rZW5JZlZhbGlkKHRva2VuKTtcbiAgICBpZiAoIXBheWxvYWQpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBuZXcgX0FjY2Vzc1Rva2VuKHRva2VuKTtcbiAgfVxuICBnZXQgcGF5bG9hZCgpIHtcbiAgICByZXR1cm4gZGVjb2RlQWNjZXNzVG9rZW5JZlZhbGlkKHRoaXMudG9rZW4pID8/IHRocm93RXJyKFwiSW52YWxpZCBhY2Nlc3MgdG9rZW4gaW4gcGF5bG9hZCAoc2hvdWxkJ3ZlIGJlZW4gdmFsaWRhdGVkIGluIGNyZWF0ZUlmVmFsaWQpXCIsIHsgdG9rZW46IHRoaXMudG9rZW4gfSk7XG4gIH1cbiAgZ2V0IGV4cGlyZXNBdCgpIHtcbiAgICBjb25zdCB7IGV4cCB9ID0gdGhpcy5wYXlsb2FkO1xuICAgIGlmIChleHAgPT09IHZvaWQgMCkgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSg4NjRlMTMpO1xuICAgIHJldHVybiBuZXcgRGF0ZShleHAgKiAxZTMpO1xuICB9XG4gIC8qKlxuICAgKiBAcmV0dXJucyBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB1bnRpbCB0aGUgYWNjZXNzIHRva2VuIGV4cGlyZXMsIG9yIDAgaWYgaXQgaGFzIGFscmVhZHkgZXhwaXJlZC5cbiAgICovXG4gIGdldCBleHBpcmVzSW5NaWxsaXMoKSB7XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIHRoaXMuZXhwaXJlc0F0LmdldFRpbWUoKSAtIERhdGUubm93KCkpO1xuICB9XG4gIGlzRXhwaXJlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5leHBpcmVzSW5NaWxsaXMgPD0gMDtcbiAgfVxufTtcbnZhciBSZWZyZXNoVG9rZW4gPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHRva2VuKSB7XG4gICAgdGhpcy50b2tlbiA9IHRva2VuO1xuICAgIGlmICh0b2tlbiA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJSZWZyZXNoIHRva2VuIGlzIHRoZSBzdHJpbmcgJ3VuZGVmaW5lZCc7IGl0J3MgdW5saWtlbHkgdGhpcyBpcyB0aGUgY29ycmVjdCB2YWx1ZS4gVGhleSdyZSBzdXBwb3NlZCB0byBiZSB1bmd1ZXNzYWJsZSFcIik7XG4gICAgfVxuICB9XG59O1xudmFyIEludGVybmFsU2Vzc2lvbiA9IGNsYXNzIF9JbnRlcm5hbFNlc3Npb24ge1xuICBjb25zdHJ1Y3Rvcihfb3B0aW9ucykge1xuICAgIHRoaXMuX29wdGlvbnMgPSBfb3B0aW9ucztcbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBzZXNzaW9uIGFzIGEgd2hvbGUgaXMga25vd24gdG8gYmUgaW52YWxpZCAoaWUuIGJvdGggYWNjZXNzIGFuZCByZWZyZXNoIHRva2VucyBhcmUgaW52YWxpZCkuIFVzZWQgYXMgYSBjYWNoZSB0byBhdm9pZCBtYWtpbmcgbXVsdGlwbGUgcmVxdWVzdHMgdG8gdGhlIHNlcnZlciAoc2Vzc2lvbnMgbmV2ZXIgZ28gYmFjayB0byBiZWluZyB2YWxpZCBhZnRlciBiZWluZyBpbnZhbGlkYXRlZCkuXG4gICAgICpcbiAgICAgKiBJdCBpcyBwb3NzaWJsZSBmb3IgdGhlIGFjY2VzcyB0b2tlbiB0byBiZSBpbnZhbGlkIGJ1dCB0aGUgcmVmcmVzaCB0b2tlbiB0byBiZSB2YWxpZCwgaW4gd2hpY2ggY2FzZSB0aGUgc2Vzc2lvbiBpc1xuICAgICAqIHN0aWxsIHZhbGlkIChqdXN0IG5lZWRzIGEgcmVmcmVzaCkuIEl0IGlzIGFsc28gcG9zc2libGUgZm9yIHRoZSBhY2Nlc3MgdG9rZW4gdG8gYmUgdmFsaWQgYnV0IHRoZSByZWZyZXNoIHRva2VuIHRvXG4gICAgICogYmUgaW52YWxpZCwgaW4gd2hpY2ggY2FzZSB0aGUgc2Vzc2lvbiBpcyBhbHNvIHZhbGlkIChlZy4gaWYgdGhlIHJlZnJlc2ggdG9rZW4gaXMgbnVsbCBiZWNhdXNlIHRoZSB1c2VyIG9ubHkgcGFzc2VkXG4gICAgICogaW4gYW4gYWNjZXNzIHRva2VuLCBlZy4gaW4gYSBzZXJ2ZXItc2lkZSByZXF1ZXN0IGhhbmRsZXIpLlxuICAgICAqL1xuICAgIHRoaXMuX2tub3duVG9CZUludmFsaWQgPSBuZXcgU3RvcmUoZmFsc2UpO1xuICAgIHRoaXMuX3JlZnJlc2hQcm9taXNlID0gbnVsbDtcbiAgICB0aGlzLl9hY2Nlc3NUb2tlbiA9IG5ldyBTdG9yZShfb3B0aW9ucy5hY2Nlc3NUb2tlbiA/IEFjY2Vzc1Rva2VuLmNyZWF0ZUlmVmFsaWQoX29wdGlvbnMuYWNjZXNzVG9rZW4pIDogbnVsbCk7XG4gICAgdGhpcy5fcmVmcmVzaFRva2VuID0gX29wdGlvbnMucmVmcmVzaFRva2VuID8gbmV3IFJlZnJlc2hUb2tlbihfb3B0aW9ucy5yZWZyZXNoVG9rZW4pIDogbnVsbDtcbiAgICBpZiAoX29wdGlvbnMuYWNjZXNzVG9rZW4gPT09IG51bGwgJiYgX29wdGlvbnMucmVmcmVzaFRva2VuID09PSBudWxsKSB7XG4gICAgICB0aGlzLl9rbm93blRvQmVJbnZhbGlkLnNldCh0cnVlKTtcbiAgICB9XG4gICAgdGhpcy5zZXNzaW9uS2V5ID0gX0ludGVybmFsU2Vzc2lvbi5jYWxjdWxhdGVTZXNzaW9uS2V5KHsgYWNjZXNzVG9rZW46IF9vcHRpb25zLmFjY2Vzc1Rva2VuID8/IG51bGwsIHJlZnJlc2hUb2tlbjogX29wdGlvbnMucmVmcmVzaFRva2VuIH0pO1xuICB9XG4gIHN0YXRpYyBjYWxjdWxhdGVTZXNzaW9uS2V5KG9mVG9rZW5zKSB7XG4gICAgaWYgKG9mVG9rZW5zLnJlZnJlc2hUb2tlbikge1xuICAgICAgcmV0dXJuIGByZWZyZXNoLSR7b2ZUb2tlbnMucmVmcmVzaFRva2VufWA7XG4gICAgfSBlbHNlIGlmIChvZlRva2Vucy5hY2Nlc3NUb2tlbikge1xuICAgICAgcmV0dXJuIGBhY2Nlc3MtJHtvZlRva2Vucy5hY2Nlc3NUb2tlbn1gO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gXCJub3QtbG9nZ2VkLWluXCI7XG4gICAgfVxuICB9XG4gIGlzS25vd25Ub0JlSW52YWxpZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fa25vd25Ub0JlSW52YWxpZC5nZXQoKTtcbiAgfVxuICAvKipcbiAgICogTWFya3MgdGhlIHNlc3Npb24gb2JqZWN0IGFzIGludmFsaWQsIG1lYW5pbmcgdGhhdCB0aGUgcmVmcmVzaCBhbmQgYWNjZXNzIHRva2VucyBjYW4gbm8gbG9uZ2VyIGJlIHVzZWQuXG4gICAqL1xuICBtYXJrSW52YWxpZCgpIHtcbiAgICB0aGlzLl9hY2Nlc3NUb2tlbi5zZXQobnVsbCk7XG4gICAgdGhpcy5fa25vd25Ub0JlSW52YWxpZC5zZXQodHJ1ZSk7XG4gIH1cbiAgb25JbnZhbGlkYXRlKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuX2tub3duVG9CZUludmFsaWQub25DaGFuZ2UoKCkgPT4gY2FsbGJhY2soKSk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGFjY2VzcyB0b2tlbiBpZiBpdCBpcyBmb3VuZCBpbiB0aGUgY2FjaGUgYW5kIG5vdCBleHBpcmVkIHlldCwgb3IgbnVsbCBvdGhlcndpc2UuIE5ldmVyIGZldGNoZXMgbmV3IHRva2Vucy5cbiAgICovXG4gIGdldEFjY2Vzc1Rva2VuSWZOb3RFeHBpcmVkWWV0KG1pbk1pbGxpc1VudGlsRXhwaXJhdGlvbikge1xuICAgIGlmIChtaW5NaWxsaXNVbnRpbEV4cGlyYXRpb24gPiA2ZTQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgUmVxdWlyZWQgYWNjZXNzIHRva2VuIGV4cGlyeSAke21pbk1pbGxpc1VudGlsRXhwaXJhdGlvbn1tcyBpcyB0b28gbG9uZzsgYWNjZXNzIHRva2VucyBhcmUgdG9vIHNob3J0IHRvIGJlIHVzZWQgZm9yIG1vcmUgdGhhbiA2MHNgKTtcbiAgICB9XG4gICAgY29uc3QgYWNjZXNzVG9rZW4gPSB0aGlzLl9nZXRQb3RlbnRpYWxseUludmFsaWRBY2Nlc3NUb2tlbklmQXZhaWxhYmxlKCk7XG4gICAgaWYgKCFhY2Nlc3NUb2tlbiB8fCBhY2Nlc3NUb2tlbi5leHBpcmVzSW5NaWxsaXMgPCBtaW5NaWxsaXNVbnRpbEV4cGlyYXRpb24pIHJldHVybiBudWxsO1xuICAgIHJldHVybiBhY2Nlc3NUb2tlbjtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYWNjZXNzIHRva2VuIGlmIGl0IGlzIGZvdW5kIGluIHRoZSBjYWNoZSwgZmV0Y2hpbmcgaXQgb3RoZXJ3aXNlLlxuICAgKlxuICAgKiBUaGlzIGlzIHVzdWFsbHkgdGhlIGZ1bmN0aW9uIHlvdSB3YW50IHRvIGNhbGwgdG8gZ2V0IGFuIGFjY2VzcyB0b2tlbi4gRWl0aGVyIHNldCBgbWluTWlsbGlzVW50aWxFeHBpcmF0aW9uYCB0byBhIHJlYXNvbmFibGUgdmFsdWUsIG9yIGNhdGNoIGVycm9ycyB0aGF0IG9jY3VyIGlmIGl0IGV4cGlyZXMsIGFuZCBjYWxsIGBtYXJrQWNjZXNzVG9rZW5FeHBpcmVkYCB0byBtYXJrIHRoZSB0b2tlbiBhcyBleHBpcmVkIGlmIHNvIChhZnRlciB3aGljaCBhIGNhbGwgdG8gdGhpcyBmdW5jdGlvbiB3aWxsIGFsd2F5cyByZWZldGNoIHRoZSB0b2tlbikuXG4gICAqXG4gICAqIEByZXR1cm5zIG51bGwgaWYgdGhlIHNlc3Npb24gaXMga25vd24gdG8gYmUgaW52YWxpZCwgY2FjaGVkIHRva2VucyBpZiB0aGV5IGV4aXN0IGluIHRoZSBjYWNoZSBhbmQgdGhlIGFjY2VzcyB0b2tlbiBoYXNuJ3QgZXhwaXJlZCB5ZXQgKHRoZSByZWZyZXNoIHRva2VuIG1pZ2h0IHN0aWxsIGJlIGludmFsaWQpLCBvciBuZXcgdG9rZW5zIG90aGVyd2lzZS5cbiAgICovXG4gIGFzeW5jIGdldE9yRmV0Y2hMaWtlbHlWYWxpZFRva2VucyhtaW5NaWxsaXNVbnRpbEV4cGlyYXRpb24pIHtcbiAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IHRoaXMuZ2V0QWNjZXNzVG9rZW5JZk5vdEV4cGlyZWRZZXQobWluTWlsbGlzVW50aWxFeHBpcmF0aW9uKTtcbiAgICBpZiAoIWFjY2Vzc1Rva2VuKSB7XG4gICAgICBjb25zdCBuZXdUb2tlbnMgPSBhd2FpdCB0aGlzLmZldGNoTmV3VG9rZW5zKCk7XG4gICAgICBjb25zdCBleHBpcmVzSW5NaWxsaXMgPSBuZXdUb2tlbnM/LmFjY2Vzc1Rva2VuLmV4cGlyZXNJbk1pbGxpcztcbiAgICAgIGlmIChleHBpcmVzSW5NaWxsaXMgJiYgZXhwaXJlc0luTWlsbGlzIDwgbWluTWlsbGlzVW50aWxFeHBpcmF0aW9uKSB7XG4gICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKGBSZXF1aXJlZCBhY2Nlc3MgdG9rZW4gZXhwaXJ5ICR7bWluTWlsbGlzVW50aWxFeHBpcmF0aW9ufW1zIGlzIHRvbyBsb25nOyBhY2Nlc3MgdG9rZW5zIGFyZSB0b28gc2hvcnQgd2hlbiB0aGV5J3JlIGdlbmVyYXRlZCAoJHtleHBpcmVzSW5NaWxsaXN9bXMpYCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3VG9rZW5zO1xuICAgIH1cbiAgICByZXR1cm4geyBhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuOiB0aGlzLl9yZWZyZXNoVG9rZW4gfTtcbiAgfVxuICAvKipcbiAgICogRmV0Y2hlcyBuZXcgdG9rZW5zIHRoYXQgYXJlLCBhdCB0aGUgdGltZSBvZiBmZXRjaGluZywgZ3VhcmFudGVlZCB0byBiZSB2YWxpZC5cbiAgICpcbiAgICogVGhlIG5ld2x5IGdlbmVyYXRlZCB0b2tlbnMgYXJlIHNob3J0LWxpdmVkLCBzbyBpdCdzIGdvb2QgcHJhY3RpY2Ugbm90IHRvIHJlbHkgb24gdGhlaXIgdmFsaWRpdHkgKGlmIHBvc3NpYmxlKS4gSG93ZXZlciwgdGhpcyBmdW5jdGlvbiBpcyB1c2VmdWwgaW4gc29tZSBjYXNlcyB3aGVyZSB5b3Ugb25seSB3YW50IHRvIHBhc3MgYWNjZXNzIHRva2VucyB0byBhIHNlcnZpY2UsIGFuZCB5b3Ugd2FudCB0byBtYWtlIHN1cmUgc2FpZCBhY2Nlc3MgdG9rZW4gaGFzIHRoZSBsb25nZXN0IHBvc3NpYmxlIGxpZmV0aW1lLlxuICAgKlxuICAgKiBJbiBtb3N0IGNhc2VzLCB5b3Ugc2hvdWxkIHByZWZlciBgZ2V0T3JGZXRjaExpa2VseVZhbGlkVG9rZW5zYC5cbiAgICpcbiAgICogQHJldHVybnMgbnVsbCBpZiB0aGUgc2Vzc2lvbiBpcyBrbm93biB0byBiZSBpbnZhbGlkLCBvciBuZXcgdG9rZW5zIG90aGVyd2lzZSAod2hpY2gsIGF0IHRoZSB0aW1lIG9mIGZldGNoaW5nLCBhcmUgZ3VhcmFudGVlZCB0byBiZSB2YWxpZCkuXG4gICAqL1xuICBhc3luYyBmZXRjaE5ld1Rva2VucygpIHtcbiAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IHRoaXMuX2dldE5ld2x5RmV0Y2hlZEFjY2Vzc1Rva2VuKCk7XG4gICAgcmV0dXJuIGFjY2Vzc1Rva2VuID8geyBhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuOiB0aGlzLl9yZWZyZXNoVG9rZW4gfSA6IG51bGw7XG4gIH1cbiAgbWFya0FjY2Vzc1Rva2VuRXhwaXJlZChhY2Nlc3NUb2tlbikge1xuICAgIGlmICh0aGlzLl9hY2Nlc3NUb2tlbi5nZXQoKSA9PT0gYWNjZXNzVG9rZW4pIHtcbiAgICAgIHRoaXMuX2FjY2Vzc1Rva2VuLnNldChudWxsKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIE5vdGUgdGhhdCBhIGNhbGxiYWNrIGludm9jYXRpb24gd2l0aCBgbnVsbGAgZG9lcyBub3QgbWVhbiB0aGUgc2Vzc2lvbiBoYXMgYmVlbiBpbnZhbGlkYXRlZDsgdGhlIGFjY2VzcyB0b2tlbiBtYXkganVzdCBoYXZlIGV4cGlyZWQuIFVzZSBgb25JbnZhbGlkYXRlYCB0byBkZXRlY3QgaW52YWxpZGF0aW9uLlxuICAgKi9cbiAgb25BY2Nlc3NUb2tlbkNoYW5nZShjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLl9hY2Nlc3NUb2tlbi5vbkNoYW5nZShjYWxsYmFjayk7XG4gIH1cbiAgLyoqXG4gICAqIEByZXR1cm5zIEFuIGFjY2VzcyB0b2tlbiwgd2hpY2ggbWF5IGJlIGV4cGlyZWQgb3IgZXhwaXJlIHNvb24sIG9yIG51bGwgaWYgaXQgaXMga25vd24gdG8gYmUgaW52YWxpZC5cbiAgICovXG4gIF9nZXRQb3RlbnRpYWxseUludmFsaWRBY2Nlc3NUb2tlbklmQXZhaWxhYmxlKCkge1xuICAgIGlmICghdGhpcy5fcmVmcmVzaFRva2VuKSByZXR1cm4gbnVsbDtcbiAgICBpZiAodGhpcy5pc0tub3duVG9CZUludmFsaWQoKSkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgYWNjZXNzVG9rZW4gPSB0aGlzLl9hY2Nlc3NUb2tlbi5nZXQoKTtcbiAgICBpZiAoYWNjZXNzVG9rZW4gJiYgIWFjY2Vzc1Rva2VuLmlzRXhwaXJlZCgpKSByZXR1cm4gYWNjZXNzVG9rZW47XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIFlvdSBzaG91bGQgcHJlZmVyIGBfZ2V0T3JGZXRjaFBvdGVudGlhbGx5SW52YWxpZEFjY2Vzc1Rva2VuYCBpbiBhbG1vc3QgYWxsIGNhc2VzLlxuICAgKlxuICAgKiBAcmV0dXJucyBBIG5ld2x5IGZldGNoZWQgYWNjZXNzIHRva2VuIChuZXZlciByZWFkIGZyb20gY2FjaGUpLCBvciBudWxsIGlmIHRoZSBzZXNzaW9uIGVpdGhlciBkb2VzIG5vdCByZXByZXNlbnQgYSB1c2VyIG9yIHRoZSBzZXNzaW9uIGlzIGludmFsaWQuXG4gICAqL1xuICBhc3luYyBfZ2V0TmV3bHlGZXRjaGVkQWNjZXNzVG9rZW4oKSB7XG4gICAgaWYgKCF0aGlzLl9yZWZyZXNoVG9rZW4pIHJldHVybiBudWxsO1xuICAgIGlmICh0aGlzLl9rbm93blRvQmVJbnZhbGlkLmdldCgpKSByZXR1cm4gbnVsbDtcbiAgICBpZiAoIXRoaXMuX3JlZnJlc2hQcm9taXNlKSB7XG4gICAgICB0aGlzLl9yZWZyZXNoQW5kU2V0UmVmcmVzaFByb21pc2UodGhpcy5fcmVmcmVzaFRva2VuKTtcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuX3JlZnJlc2hQcm9taXNlO1xuICB9XG4gIF9yZWZyZXNoQW5kU2V0UmVmcmVzaFByb21pc2UocmVmcmVzaFRva2VuKSB7XG4gICAgbGV0IHJlZnJlc2hQcm9taXNlID0gdGhpcy5fb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW5DYWxsYmFjayhyZWZyZXNoVG9rZW4pLnRoZW4oKGFjY2Vzc1Rva2VuKSA9PiB7XG4gICAgICBpZiAocmVmcmVzaFByb21pc2UgPT09IHRoaXMuX3JlZnJlc2hQcm9taXNlKSB7XG4gICAgICAgIHRoaXMuX3JlZnJlc2hQcm9taXNlID0gbnVsbDtcbiAgICAgICAgdGhpcy5fYWNjZXNzVG9rZW4uc2V0KGFjY2Vzc1Rva2VuKTtcbiAgICAgICAgaWYgKCFhY2Nlc3NUb2tlbikge1xuICAgICAgICAgIHRoaXMubWFya0ludmFsaWQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGFjY2Vzc1Rva2VuO1xuICAgIH0pO1xuICAgIHRoaXMuX3JlZnJlc2hQcm9taXNlID0gcmVmcmVzaFByb21pc2U7XG4gIH1cbn07XG5leHBvcnQge1xuICBBY2Nlc3NUb2tlbixcbiAgSW50ZXJuYWxTZXNzaW9uLFxuICBSZWZyZXNoVG9rZW5cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXNzaW9ucy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/sessions.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/arrays.js":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/arrays.js ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   enumerate: () => (/* binding */ enumerate),\n/* harmony export */   findLastIndex: () => (/* binding */ findLastIndex),\n/* harmony export */   getChunks: () => (/* binding */ getChunks),\n/* harmony export */   groupBy: () => (/* binding */ groupBy),\n/* harmony export */   isBooleanArray: () => (/* binding */ isBooleanArray),\n/* harmony export */   isNumberArray: () => (/* binding */ isNumberArray),\n/* harmony export */   isObjectArray: () => (/* binding */ isObjectArray),\n/* harmony export */   isShallowEqual: () => (/* binding */ isShallowEqual),\n/* harmony export */   isStringArray: () => (/* binding */ isStringArray),\n/* harmony export */   outerProduct: () => (/* binding */ outerProduct),\n/* harmony export */   range: () => (/* binding */ range),\n/* harmony export */   rotateLeft: () => (/* binding */ rotateLeft),\n/* harmony export */   rotateRight: () => (/* binding */ rotateRight),\n/* harmony export */   shuffle: () => (/* binding */ shuffle),\n/* harmony export */   typedIncludes: () => (/* binding */ typedIncludes),\n/* harmony export */   unique: () => (/* binding */ unique)\n/* harmony export */ });\n/* harmony import */ var _math_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./math.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/math.js\");\n// src/utils/arrays.tsx\n\nfunction typedIncludes(arr, item) {\n  return arr.includes(item);\n}\nfunction enumerate(arr) {\n  return arr.map((item, index) => [index, item]);\n}\nfunction isShallowEqual(a, b) {\n  if (a.length !== b.length) return false;\n  for (let i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\nfunction findLastIndex(arr, predicate) {\n  for (let i = arr.length - 1; i >= 0; i--) {\n    if (predicate(arr[i])) return i;\n  }\n  return -1;\n}\nfunction groupBy(arr, key) {\n  const result = /* @__PURE__ */ new Map();\n  for (const item of arr) {\n    const k = key(item);\n    if (result.get(k) === void 0) result.set(k, []);\n    result.get(k).push(item);\n  }\n  return result;\n}\nfunction range(startInclusive, endExclusive, step) {\n  if (endExclusive === void 0) {\n    endExclusive = startInclusive;\n    startInclusive = 0;\n  }\n  if (step === void 0) step = 1;\n  const result = [];\n  for (let i = startInclusive; step > 0 ? i < endExclusive : i > endExclusive; i += step) {\n    result.push(i);\n  }\n  return result;\n}\nfunction rotateLeft(arr, n) {\n  if (arr.length === 0) return [];\n  const index = (0,_math_js__WEBPACK_IMPORTED_MODULE_0__.remainder)(n, arr.length);\n  return [...arr.slice(index), ...arr.slice(0, index)];\n}\nfunction rotateRight(arr, n) {\n  return rotateLeft(arr, -n);\n}\nfunction shuffle(arr) {\n  const result = [...arr];\n  for (let i = result.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [result[i], result[j]] = [result[j], result[i]];\n  }\n  return result;\n}\nfunction outerProduct(arr1, arr2) {\n  return arr1.flatMap((item1) => arr2.map((item2) => [item1, item2]));\n}\nfunction unique(arr) {\n  return [...new Set(arr)];\n}\nfunction getChunks(arr, size) {\n  const result = [];\n  if (size <= 0) return result;\n  for (let i = 0; i < arr.length; i += size) {\n    result.push(arr.slice(i, i + size));\n  }\n  return result;\n}\nfunction isStringArray(arr) {\n  return Array.isArray(arr) && arr.every((item) => typeof item === \"string\");\n}\nfunction isNumberArray(arr) {\n  return Array.isArray(arr) && arr.every((item) => typeof item === \"number\");\n}\nfunction isBooleanArray(arr) {\n  return Array.isArray(arr) && arr.every((item) => typeof item === \"boolean\");\n}\nfunction isObjectArray(arr) {\n  return Array.isArray(arr) && arr.every((item) => typeof item === \"object\" && item !== null);\n}\n\n//# sourceMappingURL=arrays.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvYXJyYXlzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixjQUFjO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsUUFBUTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGdEQUFnRDtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsbURBQVM7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsT0FBTztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGdCQUFnQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWtCRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS91dGlscy9hcnJheXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3V0aWxzL2FycmF5cy50c3hcbmltcG9ydCB7IHJlbWFpbmRlciB9IGZyb20gXCIuL21hdGguanNcIjtcbmZ1bmN0aW9uIHR5cGVkSW5jbHVkZXMoYXJyLCBpdGVtKSB7XG4gIHJldHVybiBhcnIuaW5jbHVkZXMoaXRlbSk7XG59XG5mdW5jdGlvbiBlbnVtZXJhdGUoYXJyKSB7XG4gIHJldHVybiBhcnIubWFwKChpdGVtLCBpbmRleCkgPT4gW2luZGV4LCBpdGVtXSk7XG59XG5mdW5jdGlvbiBpc1NoYWxsb3dFcXVhbChhLCBiKSB7XG4gIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGFbaV0gIT09IGJbaV0pIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGZpbmRMYXN0SW5kZXgoYXJyLCBwcmVkaWNhdGUpIHtcbiAgZm9yIChsZXQgaSA9IGFyci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGlmIChwcmVkaWNhdGUoYXJyW2ldKSkgcmV0dXJuIGk7XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuZnVuY3Rpb24gZ3JvdXBCeShhcnIsIGtleSkge1xuICBjb25zdCByZXN1bHQgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBmb3IgKGNvbnN0IGl0ZW0gb2YgYXJyKSB7XG4gICAgY29uc3QgayA9IGtleShpdGVtKTtcbiAgICBpZiAocmVzdWx0LmdldChrKSA9PT0gdm9pZCAwKSByZXN1bHQuc2V0KGssIFtdKTtcbiAgICByZXN1bHQuZ2V0KGspLnB1c2goaXRlbSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHJhbmdlKHN0YXJ0SW5jbHVzaXZlLCBlbmRFeGNsdXNpdmUsIHN0ZXApIHtcbiAgaWYgKGVuZEV4Y2x1c2l2ZSA9PT0gdm9pZCAwKSB7XG4gICAgZW5kRXhjbHVzaXZlID0gc3RhcnRJbmNsdXNpdmU7XG4gICAgc3RhcnRJbmNsdXNpdmUgPSAwO1xuICB9XG4gIGlmIChzdGVwID09PSB2b2lkIDApIHN0ZXAgPSAxO1xuICBjb25zdCByZXN1bHQgPSBbXTtcbiAgZm9yIChsZXQgaSA9IHN0YXJ0SW5jbHVzaXZlOyBzdGVwID4gMCA/IGkgPCBlbmRFeGNsdXNpdmUgOiBpID4gZW5kRXhjbHVzaXZlOyBpICs9IHN0ZXApIHtcbiAgICByZXN1bHQucHVzaChpKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gcm90YXRlTGVmdChhcnIsIG4pIHtcbiAgaWYgKGFyci5sZW5ndGggPT09IDApIHJldHVybiBbXTtcbiAgY29uc3QgaW5kZXggPSByZW1haW5kZXIobiwgYXJyLmxlbmd0aCk7XG4gIHJldHVybiBbLi4uYXJyLnNsaWNlKGluZGV4KSwgLi4uYXJyLnNsaWNlKDAsIGluZGV4KV07XG59XG5mdW5jdGlvbiByb3RhdGVSaWdodChhcnIsIG4pIHtcbiAgcmV0dXJuIHJvdGF0ZUxlZnQoYXJyLCAtbik7XG59XG5mdW5jdGlvbiBzaHVmZmxlKGFycikge1xuICBjb25zdCByZXN1bHQgPSBbLi4uYXJyXTtcbiAgZm9yIChsZXQgaSA9IHJlc3VsdC5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XG4gICAgY29uc3QgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpICsgMSkpO1xuICAgIFtyZXN1bHRbaV0sIHJlc3VsdFtqXV0gPSBbcmVzdWx0W2pdLCByZXN1bHRbaV1dO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBvdXRlclByb2R1Y3QoYXJyMSwgYXJyMikge1xuICByZXR1cm4gYXJyMS5mbGF0TWFwKChpdGVtMSkgPT4gYXJyMi5tYXAoKGl0ZW0yKSA9PiBbaXRlbTEsIGl0ZW0yXSkpO1xufVxuZnVuY3Rpb24gdW5pcXVlKGFycikge1xuICByZXR1cm4gWy4uLm5ldyBTZXQoYXJyKV07XG59XG5mdW5jdGlvbiBnZXRDaHVua3MoYXJyLCBzaXplKSB7XG4gIGNvbnN0IHJlc3VsdCA9IFtdO1xuICBpZiAoc2l6ZSA8PSAwKSByZXR1cm4gcmVzdWx0O1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkgKz0gc2l6ZSkge1xuICAgIHJlc3VsdC5wdXNoKGFyci5zbGljZShpLCBpICsgc2l6ZSkpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBpc1N0cmluZ0FycmF5KGFycikge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShhcnIpICYmIGFyci5ldmVyeSgoaXRlbSkgPT4gdHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIpO1xufVxuZnVuY3Rpb24gaXNOdW1iZXJBcnJheShhcnIpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXJyKSAmJiBhcnIuZXZlcnkoKGl0ZW0pID0+IHR5cGVvZiBpdGVtID09PSBcIm51bWJlclwiKTtcbn1cbmZ1bmN0aW9uIGlzQm9vbGVhbkFycmF5KGFycikge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShhcnIpICYmIGFyci5ldmVyeSgoaXRlbSkgPT4gdHlwZW9mIGl0ZW0gPT09IFwiYm9vbGVhblwiKTtcbn1cbmZ1bmN0aW9uIGlzT2JqZWN0QXJyYXkoYXJyKSB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KGFycikgJiYgYXJyLmV2ZXJ5KChpdGVtKSA9PiB0eXBlb2YgaXRlbSA9PT0gXCJvYmplY3RcIiAmJiBpdGVtICE9PSBudWxsKTtcbn1cbmV4cG9ydCB7XG4gIGVudW1lcmF0ZSxcbiAgZmluZExhc3RJbmRleCxcbiAgZ2V0Q2h1bmtzLFxuICBncm91cEJ5LFxuICBpc0Jvb2xlYW5BcnJheSxcbiAgaXNOdW1iZXJBcnJheSxcbiAgaXNPYmplY3RBcnJheSxcbiAgaXNTaGFsbG93RXF1YWwsXG4gIGlzU3RyaW5nQXJyYXksXG4gIG91dGVyUHJvZHVjdCxcbiAgcmFuZ2UsXG4gIHJvdGF0ZUxlZnQsXG4gIHJvdGF0ZVJpZ2h0LFxuICBzaHVmZmxlLFxuICB0eXBlZEluY2x1ZGVzLFxuICB1bmlxdWVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcnJheXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/arrays.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/bytes.js":
/*!*******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/bytes.js ***!
  \*******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decodeBase32: () => (/* binding */ decodeBase32),\n/* harmony export */   decodeBase64: () => (/* binding */ decodeBase64),\n/* harmony export */   decodeBase64OrBase64Url: () => (/* binding */ decodeBase64OrBase64Url),\n/* harmony export */   decodeBase64Url: () => (/* binding */ decodeBase64Url),\n/* harmony export */   encodeBase32: () => (/* binding */ encodeBase32),\n/* harmony export */   encodeBase64: () => (/* binding */ encodeBase64),\n/* harmony export */   encodeBase64Url: () => (/* binding */ encodeBase64Url),\n/* harmony export */   getBase32CharacterFromIndex: () => (/* binding */ getBase32CharacterFromIndex),\n/* harmony export */   getBase32IndexFromCharacter: () => (/* binding */ getBase32IndexFromCharacter),\n/* harmony export */   isBase32: () => (/* binding */ isBase32),\n/* harmony export */   isBase64: () => (/* binding */ isBase64),\n/* harmony export */   isBase64Url: () => (/* binding */ isBase64Url),\n/* harmony export */   toHexString: () => (/* binding */ toHexString)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n// src/utils/bytes.tsx\n\nvar crockfordAlphabet = \"0123456789ABCDEFGHJKMNPQRSTVWXYZ\";\nvar crockfordReplacements = /* @__PURE__ */ new Map([\n  [\"o\", \"0\"],\n  [\"i\", \"1\"],\n  [\"l\", \"1\"]\n]);\nfunction toHexString(input) {\n  return Array.from(input).map((b) => b.toString(16).padStart(2, \"0\")).join(\"\");\n}\nfunction getBase32CharacterFromIndex(index) {\n  if (index < 0 || index >= crockfordAlphabet.length) {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(`Invalid base32 index: ${index}`);\n  }\n  return crockfordAlphabet[index];\n}\nfunction getBase32IndexFromCharacter(character) {\n  if (character.length !== 1) {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(`Invalid base32 character: ${character}`);\n  }\n  const index = crockfordAlphabet.indexOf(character.toUpperCase());\n  if (index === -1) {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(`Invalid base32 character: ${character}`);\n  }\n  return index;\n}\nfunction encodeBase32(input) {\n  let bits = 0;\n  let value = 0;\n  let output = \"\";\n  for (let i = 0; i < input.length; i++) {\n    value = value << 8 | input[i];\n    bits += 8;\n    while (bits >= 5) {\n      output += getBase32CharacterFromIndex(value >>> bits - 5 & 31);\n      bits -= 5;\n    }\n  }\n  if (bits > 0) {\n    output += getBase32CharacterFromIndex(value << 5 - bits & 31);\n  }\n  if (!isBase32(output)) {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Invalid base32 output; this should never happen\");\n  }\n  return output;\n}\nfunction decodeBase32(input) {\n  if (!isBase32(input)) {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Invalid base32 string\");\n  }\n  const output = new Uint8Array(input.length * 5 / 8 | 0);\n  let bits = 0;\n  let value = 0;\n  let outputIndex = 0;\n  for (let i = 0; i < input.length; i++) {\n    let char = input[i].toLowerCase();\n    if (char === \" \") continue;\n    if (crockfordReplacements.has(char)) {\n      char = crockfordReplacements.get(char);\n    }\n    const index = getBase32IndexFromCharacter(char);\n    value = value << 5 | index;\n    bits += 5;\n    if (bits >= 8) {\n      output[outputIndex++] = value >>> bits - 8 & 255;\n      bits -= 8;\n    }\n  }\n  return output;\n}\nfunction encodeBase64(input) {\n  return btoa([...input].map((b) => String.fromCharCode(b)).join(\"\"));\n}\nfunction decodeBase64(input) {\n  return new Uint8Array(atob(input).split(\"\").map((char) => char.charCodeAt(0)));\n}\nfunction encodeBase64Url(input) {\n  const res = encodeBase64(input).replace(/=+$/, \"\").replace(/\\+/g, \"-\").replace(/\\//g, \"_\");\n  return res;\n}\nfunction decodeBase64Url(input) {\n  if (!isBase64Url(input)) {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Invalid base64url string\");\n  }\n  if (input === \"\") {\n    return new Uint8Array(0);\n  }\n  return decodeBase64(input.replace(/-/g, \"+\").replace(/_/g, \"/\") + \"====\".slice((input.length - 1) % 4 + 1));\n}\nfunction decodeBase64OrBase64Url(input) {\n  if (isBase64Url(input)) {\n    return decodeBase64Url(input);\n  } else if (isBase64(input)) {\n    return decodeBase64(input);\n  } else {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Invalid base64 or base64url string\");\n  }\n}\nfunction isBase32(input) {\n  for (const char of input) {\n    if (char === \" \") continue;\n    const upperChar = char.toUpperCase();\n    if (!crockfordAlphabet.includes(upperChar)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction isBase64(input) {\n  const regex = /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/;\n  return regex.test(input);\n}\nfunction isBase64Url(input) {\n  if (input === \"\") {\n    return true;\n  }\n  const regex = /^[0-9a-zA-Z_-]+$/;\n  return regex.test(input);\n}\n\n//# sourceMappingURL=bytes.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvYnl0ZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNrRDtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYywyREFBbUIsMEJBQTBCLE1BQU07QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsMkRBQW1CLDhCQUE4QixVQUFVO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBLGNBQWMsMkRBQW1CLDhCQUE4QixVQUFVO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGtCQUFrQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYywyREFBbUIseUJBQXlCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDJEQUFtQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGtCQUFrQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDJEQUFtQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0osY0FBYywyREFBbUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsRUFBRSxtQkFBbUIsRUFBRSxpQkFBaUIsRUFBRTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFlRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS91dGlscy9ieXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvYnl0ZXMudHN4XG5pbXBvcnQgeyBTdGFja0Fzc2VydGlvbkVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG52YXIgY3JvY2tmb3JkQWxwaGFiZXQgPSBcIjAxMjM0NTY3ODlBQkNERUZHSEpLTU5QUVJTVFZXWFlaXCI7XG52YXIgY3JvY2tmb3JkUmVwbGFjZW1lbnRzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoW1xuICBbXCJvXCIsIFwiMFwiXSxcbiAgW1wiaVwiLCBcIjFcIl0sXG4gIFtcImxcIiwgXCIxXCJdXG5dKTtcbmZ1bmN0aW9uIHRvSGV4U3RyaW5nKGlucHV0KSB7XG4gIHJldHVybiBBcnJheS5mcm9tKGlucHV0KS5tYXAoKGIpID0+IGIudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsIFwiMFwiKSkuam9pbihcIlwiKTtcbn1cbmZ1bmN0aW9uIGdldEJhc2UzMkNoYXJhY3RlckZyb21JbmRleChpbmRleCkge1xuICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IGNyb2NrZm9yZEFscGhhYmV0Lmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKGBJbnZhbGlkIGJhc2UzMiBpbmRleDogJHtpbmRleH1gKTtcbiAgfVxuICByZXR1cm4gY3JvY2tmb3JkQWxwaGFiZXRbaW5kZXhdO1xufVxuZnVuY3Rpb24gZ2V0QmFzZTMySW5kZXhGcm9tQ2hhcmFjdGVyKGNoYXJhY3Rlcikge1xuICBpZiAoY2hhcmFjdGVyLmxlbmd0aCAhPT0gMSkge1xuICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKGBJbnZhbGlkIGJhc2UzMiBjaGFyYWN0ZXI6ICR7Y2hhcmFjdGVyfWApO1xuICB9XG4gIGNvbnN0IGluZGV4ID0gY3JvY2tmb3JkQWxwaGFiZXQuaW5kZXhPZihjaGFyYWN0ZXIudG9VcHBlckNhc2UoKSk7XG4gIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihgSW52YWxpZCBiYXNlMzIgY2hhcmFjdGVyOiAke2NoYXJhY3Rlcn1gKTtcbiAgfVxuICByZXR1cm4gaW5kZXg7XG59XG5mdW5jdGlvbiBlbmNvZGVCYXNlMzIoaW5wdXQpIHtcbiAgbGV0IGJpdHMgPSAwO1xuICBsZXQgdmFsdWUgPSAwO1xuICBsZXQgb3V0cHV0ID0gXCJcIjtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKykge1xuICAgIHZhbHVlID0gdmFsdWUgPDwgOCB8IGlucHV0W2ldO1xuICAgIGJpdHMgKz0gODtcbiAgICB3aGlsZSAoYml0cyA+PSA1KSB7XG4gICAgICBvdXRwdXQgKz0gZ2V0QmFzZTMyQ2hhcmFjdGVyRnJvbUluZGV4KHZhbHVlID4+PiBiaXRzIC0gNSAmIDMxKTtcbiAgICAgIGJpdHMgLT0gNTtcbiAgICB9XG4gIH1cbiAgaWYgKGJpdHMgPiAwKSB7XG4gICAgb3V0cHV0ICs9IGdldEJhc2UzMkNoYXJhY3RlckZyb21JbmRleCh2YWx1ZSA8PCA1IC0gYml0cyAmIDMxKTtcbiAgfVxuICBpZiAoIWlzQmFzZTMyKG91dHB1dCkpIHtcbiAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkludmFsaWQgYmFzZTMyIG91dHB1dDsgdGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuXCIpO1xuICB9XG4gIHJldHVybiBvdXRwdXQ7XG59XG5mdW5jdGlvbiBkZWNvZGVCYXNlMzIoaW5wdXQpIHtcbiAgaWYgKCFpc0Jhc2UzMihpbnB1dCkpIHtcbiAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkludmFsaWQgYmFzZTMyIHN0cmluZ1wiKTtcbiAgfVxuICBjb25zdCBvdXRwdXQgPSBuZXcgVWludDhBcnJheShpbnB1dC5sZW5ndGggKiA1IC8gOCB8IDApO1xuICBsZXQgYml0cyA9IDA7XG4gIGxldCB2YWx1ZSA9IDA7XG4gIGxldCBvdXRwdXRJbmRleCA9IDA7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgY2hhciA9IGlucHV0W2ldLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKGNoYXIgPT09IFwiIFwiKSBjb250aW51ZTtcbiAgICBpZiAoY3JvY2tmb3JkUmVwbGFjZW1lbnRzLmhhcyhjaGFyKSkge1xuICAgICAgY2hhciA9IGNyb2NrZm9yZFJlcGxhY2VtZW50cy5nZXQoY2hhcik7XG4gICAgfVxuICAgIGNvbnN0IGluZGV4ID0gZ2V0QmFzZTMySW5kZXhGcm9tQ2hhcmFjdGVyKGNoYXIpO1xuICAgIHZhbHVlID0gdmFsdWUgPDwgNSB8IGluZGV4O1xuICAgIGJpdHMgKz0gNTtcbiAgICBpZiAoYml0cyA+PSA4KSB7XG4gICAgICBvdXRwdXRbb3V0cHV0SW5kZXgrK10gPSB2YWx1ZSA+Pj4gYml0cyAtIDggJiAyNTU7XG4gICAgICBiaXRzIC09IDg7XG4gICAgfVxuICB9XG4gIHJldHVybiBvdXRwdXQ7XG59XG5mdW5jdGlvbiBlbmNvZGVCYXNlNjQoaW5wdXQpIHtcbiAgcmV0dXJuIGJ0b2EoWy4uLmlucHV0XS5tYXAoKGIpID0+IFN0cmluZy5mcm9tQ2hhckNvZGUoYikpLmpvaW4oXCJcIikpO1xufVxuZnVuY3Rpb24gZGVjb2RlQmFzZTY0KGlucHV0KSB7XG4gIHJldHVybiBuZXcgVWludDhBcnJheShhdG9iKGlucHV0KS5zcGxpdChcIlwiKS5tYXAoKGNoYXIpID0+IGNoYXIuY2hhckNvZGVBdCgwKSkpO1xufVxuZnVuY3Rpb24gZW5jb2RlQmFzZTY0VXJsKGlucHV0KSB7XG4gIGNvbnN0IHJlcyA9IGVuY29kZUJhc2U2NChpbnB1dCkucmVwbGFjZSgvPSskLywgXCJcIikucmVwbGFjZSgvXFwrL2csIFwiLVwiKS5yZXBsYWNlKC9cXC8vZywgXCJfXCIpO1xuICByZXR1cm4gcmVzO1xufVxuZnVuY3Rpb24gZGVjb2RlQmFzZTY0VXJsKGlucHV0KSB7XG4gIGlmICghaXNCYXNlNjRVcmwoaW5wdXQpKSB7XG4gICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJJbnZhbGlkIGJhc2U2NHVybCBzdHJpbmdcIik7XG4gIH1cbiAgaWYgKGlucHV0ID09PSBcIlwiKSB7XG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KDApO1xuICB9XG4gIHJldHVybiBkZWNvZGVCYXNlNjQoaW5wdXQucmVwbGFjZSgvLS9nLCBcIitcIikucmVwbGFjZSgvXy9nLCBcIi9cIikgKyBcIj09PT1cIi5zbGljZSgoaW5wdXQubGVuZ3RoIC0gMSkgJSA0ICsgMSkpO1xufVxuZnVuY3Rpb24gZGVjb2RlQmFzZTY0T3JCYXNlNjRVcmwoaW5wdXQpIHtcbiAgaWYgKGlzQmFzZTY0VXJsKGlucHV0KSkge1xuICAgIHJldHVybiBkZWNvZGVCYXNlNjRVcmwoaW5wdXQpO1xuICB9IGVsc2UgaWYgKGlzQmFzZTY0KGlucHV0KSkge1xuICAgIHJldHVybiBkZWNvZGVCYXNlNjQoaW5wdXQpO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiSW52YWxpZCBiYXNlNjQgb3IgYmFzZTY0dXJsIHN0cmluZ1wiKTtcbiAgfVxufVxuZnVuY3Rpb24gaXNCYXNlMzIoaW5wdXQpIHtcbiAgZm9yIChjb25zdCBjaGFyIG9mIGlucHV0KSB7XG4gICAgaWYgKGNoYXIgPT09IFwiIFwiKSBjb250aW51ZTtcbiAgICBjb25zdCB1cHBlckNoYXIgPSBjaGFyLnRvVXBwZXJDYXNlKCk7XG4gICAgaWYgKCFjcm9ja2ZvcmRBbHBoYWJldC5pbmNsdWRlcyh1cHBlckNoYXIpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gaXNCYXNlNjQoaW5wdXQpIHtcbiAgY29uc3QgcmVnZXggPSAvXig/OltBLVphLXowLTkrL117NH0pKig/OltBLVphLXowLTkrL117Mn09PXxbQS1aYS16MC05Ky9dezN9PSk/JC87XG4gIHJldHVybiByZWdleC50ZXN0KGlucHV0KTtcbn1cbmZ1bmN0aW9uIGlzQmFzZTY0VXJsKGlucHV0KSB7XG4gIGlmIChpbnB1dCA9PT0gXCJcIikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGNvbnN0IHJlZ2V4ID0gL15bMC05YS16QS1aXy1dKyQvO1xuICByZXR1cm4gcmVnZXgudGVzdChpbnB1dCk7XG59XG5leHBvcnQge1xuICBkZWNvZGVCYXNlMzIsXG4gIGRlY29kZUJhc2U2NCxcbiAgZGVjb2RlQmFzZTY0T3JCYXNlNjRVcmwsXG4gIGRlY29kZUJhc2U2NFVybCxcbiAgZW5jb2RlQmFzZTMyLFxuICBlbmNvZGVCYXNlNjQsXG4gIGVuY29kZUJhc2U2NFVybCxcbiAgZ2V0QmFzZTMyQ2hhcmFjdGVyRnJvbUluZGV4LFxuICBnZXRCYXNlMzJJbmRleEZyb21DaGFyYWN0ZXIsXG4gIGlzQmFzZTMyLFxuICBpc0Jhc2U2NCxcbiAgaXNCYXNlNjRVcmwsXG4gIHRvSGV4U3RyaW5nXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Ynl0ZXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/bytes.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/caches.js":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/caches.js ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncCache: () => (/* binding */ AsyncCache),\n/* harmony export */   cacheFunction: () => (/* binding */ cacheFunction)\n/* harmony export */ });\n/* harmony import */ var _maps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./maps.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/maps.js\");\n/* harmony import */ var _objects_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./objects.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/objects.js\");\n/* harmony import */ var _promises_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./promises.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/promises.js\");\n/* harmony import */ var _stores_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./stores.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/stores.js\");\n// src/utils/caches.tsx\n\n\n\n\nfunction cacheFunction(f) {\n  const dependenciesMap = new _maps_js__WEBPACK_IMPORTED_MODULE_0__.DependenciesMap();\n  return (...args) => {\n    if (dependenciesMap.has(args)) {\n      return dependenciesMap.get(args);\n    }\n    const value = f(...args);\n    dependenciesMap.set(args, value);\n    return value;\n  };\n}\nvar AsyncCache = class {\n  constructor(_fetcher, _options = {}) {\n    this._fetcher = _fetcher;\n    this._options = _options;\n    this._map = new _maps_js__WEBPACK_IMPORTED_MODULE_0__.DependenciesMap();\n    this.isCacheAvailable = this._createKeyed(\"isCacheAvailable\");\n    this.getIfCached = this._createKeyed(\"getIfCached\");\n    this.getOrWait = this._createKeyed(\"getOrWait\");\n    this.forceSetCachedValue = this._createKeyed(\"forceSetCachedValue\");\n    this.forceSetCachedValueAsync = this._createKeyed(\"forceSetCachedValueAsync\");\n    this.refresh = this._createKeyed(\"refresh\");\n    this.invalidate = this._createKeyed(\"invalidate\");\n    this.onStateChange = this._createKeyed(\"onStateChange\");\n  }\n  _createKeyed(functionName) {\n    return (key, ...args) => {\n      const valueCache = this.getValueCache(key);\n      return valueCache[functionName].apply(valueCache, args);\n    };\n  }\n  getValueCache(dependencies) {\n    let cache = this._map.get(dependencies);\n    if (!cache) {\n      cache = new AsyncValueCache(\n        async () => await this._fetcher(dependencies),\n        {\n          ...this._options,\n          onSubscribe: this._options.onSubscribe ? (cb) => this._options.onSubscribe(dependencies, cb) : void 0\n        }\n      );\n      this._map.set(dependencies, cache);\n    }\n    return cache;\n  }\n  async refreshWhere(predicate) {\n    const promises = [];\n    for (const [dependencies, cache] of this._map) {\n      if (predicate(dependencies)) {\n        promises.push(cache.refresh());\n      }\n    }\n    await Promise.all(promises);\n  }\n};\nvar AsyncValueCache = class {\n  constructor(fetcher, _options = {}) {\n    this._options = _options;\n    this._subscriptionsCount = 0;\n    this._unsubscribers = [];\n    this._mostRecentRefreshPromiseIndex = 0;\n    this._store = new _stores_js__WEBPACK_IMPORTED_MODULE_3__.AsyncStore();\n    this._rateLimitOptions = {\n      concurrency: 1,\n      throttleMs: 300,\n      ...(0,_objects_js__WEBPACK_IMPORTED_MODULE_1__.filterUndefined)(_options.rateLimiter ?? {})\n    };\n    this._fetcher = (0,_promises_js__WEBPACK_IMPORTED_MODULE_2__.rateLimited)(fetcher, {\n      ...this._rateLimitOptions,\n      batchCalls: true\n    });\n  }\n  isCacheAvailable() {\n    return this._store.isAvailable();\n  }\n  getIfCached() {\n    return this._store.get();\n  }\n  getOrWait(cacheStrategy) {\n    const cached = this.getIfCached();\n    if (cacheStrategy === \"read-write\" && cached.status === \"ok\") {\n      return (0,_promises_js__WEBPACK_IMPORTED_MODULE_2__.resolved)(cached.data);\n    }\n    return this._refetch(cacheStrategy);\n  }\n  _set(value) {\n    this._store.set(value);\n  }\n  _setAsync(value) {\n    const promise = (0,_promises_js__WEBPACK_IMPORTED_MODULE_2__.pending)(value);\n    this._pendingPromise = promise;\n    return (0,_promises_js__WEBPACK_IMPORTED_MODULE_2__.pending)(this._store.setAsync(promise));\n  }\n  _refetch(cacheStrategy) {\n    if (cacheStrategy === \"read-write\" && this._pendingPromise) {\n      return this._pendingPromise;\n    }\n    const promise = (0,_promises_js__WEBPACK_IMPORTED_MODULE_2__.pending)(this._fetcher());\n    if (cacheStrategy === \"never\") {\n      return promise;\n    }\n    return (0,_promises_js__WEBPACK_IMPORTED_MODULE_2__.pending)(this._setAsync(promise).then(() => promise));\n  }\n  forceSetCachedValue(value) {\n    this._set(value);\n  }\n  forceSetCachedValueAsync(value) {\n    return this._setAsync(value);\n  }\n  /**\n   * Refetches the value from the fetcher, and updates the cache with it.\n   */\n  async refresh() {\n    return await this.getOrWait(\"write-only\");\n  }\n  /**\n   * Invalidates the cache, marking it to refresh on the next read. If anyone was listening to it, it will refresh\n   * immediately.\n   */\n  invalidate() {\n    this._store.setUnavailable();\n    this._pendingPromise = void 0;\n    if (this._subscriptionsCount > 0) {\n      (0,_promises_js__WEBPACK_IMPORTED_MODULE_2__.runAsynchronously)(this.refresh());\n    }\n  }\n  onStateChange(callback) {\n    const storeObj = this._store.onChange(callback);\n    (0,_promises_js__WEBPACK_IMPORTED_MODULE_2__.runAsynchronously)(this.getOrWait(\"read-write\"));\n    if (this._subscriptionsCount++ === 0 && this._options.onSubscribe) {\n      const unsubscribe = this._options.onSubscribe(() => {\n        (0,_promises_js__WEBPACK_IMPORTED_MODULE_2__.runAsynchronously)(this.refresh());\n      });\n      this._unsubscribers.push(unsubscribe);\n    }\n    let hasUnsubscribed = false;\n    return {\n      unsubscribe: () => {\n        if (hasUnsubscribed) return;\n        hasUnsubscribed = true;\n        storeObj.unsubscribe();\n        if (--this._subscriptionsCount === 0) {\n          const currentRefreshPromiseIndex = ++this._mostRecentRefreshPromiseIndex;\n          (0,_promises_js__WEBPACK_IMPORTED_MODULE_2__.runAsynchronously)(async () => {\n            await (0,_promises_js__WEBPACK_IMPORTED_MODULE_2__.wait)(5e3);\n            if (this._subscriptionsCount === 0 && currentRefreshPromiseIndex === this._mostRecentRefreshPromiseIndex) {\n              this.invalidate();\n            }\n          });\n          for (const unsubscribe of this._unsubscribers) {\n            unsubscribe();\n          }\n        }\n      }\n    };\n  }\n};\n\n//# sourceMappingURL=caches.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvY2FjaGVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQzRDO0FBQ0c7QUFDeUM7QUFDL0M7QUFDekM7QUFDQSw4QkFBOEIscURBQWU7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBLG9CQUFvQixxREFBZTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixrREFBVTtBQUNoQztBQUNBO0FBQ0E7QUFDQSxTQUFTLDREQUFlLDJCQUEyQjtBQUNuRDtBQUNBLG9CQUFvQix5REFBVztBQUMvQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxzREFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixxREFBTztBQUMzQjtBQUNBLFdBQVcscURBQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixxREFBTztBQUMzQjtBQUNBO0FBQ0E7QUFDQSxXQUFXLHFEQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sK0RBQWlCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSwrREFBaUI7QUFDckI7QUFDQTtBQUNBLFFBQVEsK0RBQWlCO0FBQ3pCLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsK0RBQWlCO0FBQzNCLGtCQUFrQixrREFBSTtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZngyZWRlbm9hc2lzL0Rvd25sb2Fkcy9EZXZlbG9wbWVudC9Fc3BhZGEvbm9kZV9tb2R1bGVzLy5wbnBtL0BzdGFja2ZyYW1lK3N0YWNrLXNoYXJlZEAyLjguNDFfQGF3cy1zZGsrY3JlZGVudGlhbC1wcm92aWRlci13ZWItaWRlbnRpdHlAMy45MDEuMF9AdHlwZV83NGRiYTAxZjZkODllNzIwODk2YjRkZjM0NTgzMzk5MC9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvZXNtL3V0aWxzL2NhY2hlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvY2FjaGVzLnRzeFxuaW1wb3J0IHsgRGVwZW5kZW5jaWVzTWFwIH0gZnJvbSBcIi4vbWFwcy5qc1wiO1xuaW1wb3J0IHsgZmlsdGVyVW5kZWZpbmVkIH0gZnJvbSBcIi4vb2JqZWN0cy5qc1wiO1xuaW1wb3J0IHsgcGVuZGluZywgcmF0ZUxpbWl0ZWQsIHJlc29sdmVkLCBydW5Bc3luY2hyb25vdXNseSwgd2FpdCB9IGZyb20gXCIuL3Byb21pc2VzLmpzXCI7XG5pbXBvcnQgeyBBc3luY1N0b3JlIH0gZnJvbSBcIi4vc3RvcmVzLmpzXCI7XG5mdW5jdGlvbiBjYWNoZUZ1bmN0aW9uKGYpIHtcbiAgY29uc3QgZGVwZW5kZW5jaWVzTWFwID0gbmV3IERlcGVuZGVuY2llc01hcCgpO1xuICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICBpZiAoZGVwZW5kZW5jaWVzTWFwLmhhcyhhcmdzKSkge1xuICAgICAgcmV0dXJuIGRlcGVuZGVuY2llc01hcC5nZXQoYXJncyk7XG4gICAgfVxuICAgIGNvbnN0IHZhbHVlID0gZiguLi5hcmdzKTtcbiAgICBkZXBlbmRlbmNpZXNNYXAuc2V0KGFyZ3MsIHZhbHVlKTtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH07XG59XG52YXIgQXN5bmNDYWNoZSA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoX2ZldGNoZXIsIF9vcHRpb25zID0ge30pIHtcbiAgICB0aGlzLl9mZXRjaGVyID0gX2ZldGNoZXI7XG4gICAgdGhpcy5fb3B0aW9ucyA9IF9vcHRpb25zO1xuICAgIHRoaXMuX21hcCA9IG5ldyBEZXBlbmRlbmNpZXNNYXAoKTtcbiAgICB0aGlzLmlzQ2FjaGVBdmFpbGFibGUgPSB0aGlzLl9jcmVhdGVLZXllZChcImlzQ2FjaGVBdmFpbGFibGVcIik7XG4gICAgdGhpcy5nZXRJZkNhY2hlZCA9IHRoaXMuX2NyZWF0ZUtleWVkKFwiZ2V0SWZDYWNoZWRcIik7XG4gICAgdGhpcy5nZXRPcldhaXQgPSB0aGlzLl9jcmVhdGVLZXllZChcImdldE9yV2FpdFwiKTtcbiAgICB0aGlzLmZvcmNlU2V0Q2FjaGVkVmFsdWUgPSB0aGlzLl9jcmVhdGVLZXllZChcImZvcmNlU2V0Q2FjaGVkVmFsdWVcIik7XG4gICAgdGhpcy5mb3JjZVNldENhY2hlZFZhbHVlQXN5bmMgPSB0aGlzLl9jcmVhdGVLZXllZChcImZvcmNlU2V0Q2FjaGVkVmFsdWVBc3luY1wiKTtcbiAgICB0aGlzLnJlZnJlc2ggPSB0aGlzLl9jcmVhdGVLZXllZChcInJlZnJlc2hcIik7XG4gICAgdGhpcy5pbnZhbGlkYXRlID0gdGhpcy5fY3JlYXRlS2V5ZWQoXCJpbnZhbGlkYXRlXCIpO1xuICAgIHRoaXMub25TdGF0ZUNoYW5nZSA9IHRoaXMuX2NyZWF0ZUtleWVkKFwib25TdGF0ZUNoYW5nZVwiKTtcbiAgfVxuICBfY3JlYXRlS2V5ZWQoZnVuY3Rpb25OYW1lKSB7XG4gICAgcmV0dXJuIChrZXksIC4uLmFyZ3MpID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlQ2FjaGUgPSB0aGlzLmdldFZhbHVlQ2FjaGUoa2V5KTtcbiAgICAgIHJldHVybiB2YWx1ZUNhY2hlW2Z1bmN0aW9uTmFtZV0uYXBwbHkodmFsdWVDYWNoZSwgYXJncyk7XG4gICAgfTtcbiAgfVxuICBnZXRWYWx1ZUNhY2hlKGRlcGVuZGVuY2llcykge1xuICAgIGxldCBjYWNoZSA9IHRoaXMuX21hcC5nZXQoZGVwZW5kZW5jaWVzKTtcbiAgICBpZiAoIWNhY2hlKSB7XG4gICAgICBjYWNoZSA9IG5ldyBBc3luY1ZhbHVlQ2FjaGUoXG4gICAgICAgIGFzeW5jICgpID0+IGF3YWl0IHRoaXMuX2ZldGNoZXIoZGVwZW5kZW5jaWVzKSxcbiAgICAgICAge1xuICAgICAgICAgIC4uLnRoaXMuX29wdGlvbnMsXG4gICAgICAgICAgb25TdWJzY3JpYmU6IHRoaXMuX29wdGlvbnMub25TdWJzY3JpYmUgPyAoY2IpID0+IHRoaXMuX29wdGlvbnMub25TdWJzY3JpYmUoZGVwZW5kZW5jaWVzLCBjYikgOiB2b2lkIDBcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIHRoaXMuX21hcC5zZXQoZGVwZW5kZW5jaWVzLCBjYWNoZSk7XG4gICAgfVxuICAgIHJldHVybiBjYWNoZTtcbiAgfVxuICBhc3luYyByZWZyZXNoV2hlcmUocHJlZGljYXRlKSB7XG4gICAgY29uc3QgcHJvbWlzZXMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IFtkZXBlbmRlbmNpZXMsIGNhY2hlXSBvZiB0aGlzLl9tYXApIHtcbiAgICAgIGlmIChwcmVkaWNhdGUoZGVwZW5kZW5jaWVzKSkge1xuICAgICAgICBwcm9taXNlcy5wdXNoKGNhY2hlLnJlZnJlc2goKSk7XG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgfVxufTtcbnZhciBBc3luY1ZhbHVlQ2FjaGUgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGZldGNoZXIsIF9vcHRpb25zID0ge30pIHtcbiAgICB0aGlzLl9vcHRpb25zID0gX29wdGlvbnM7XG4gICAgdGhpcy5fc3Vic2NyaXB0aW9uc0NvdW50ID0gMDtcbiAgICB0aGlzLl91bnN1YnNjcmliZXJzID0gW107XG4gICAgdGhpcy5fbW9zdFJlY2VudFJlZnJlc2hQcm9taXNlSW5kZXggPSAwO1xuICAgIHRoaXMuX3N0b3JlID0gbmV3IEFzeW5jU3RvcmUoKTtcbiAgICB0aGlzLl9yYXRlTGltaXRPcHRpb25zID0ge1xuICAgICAgY29uY3VycmVuY3k6IDEsXG4gICAgICB0aHJvdHRsZU1zOiAzMDAsXG4gICAgICAuLi5maWx0ZXJVbmRlZmluZWQoX29wdGlvbnMucmF0ZUxpbWl0ZXIgPz8ge30pXG4gICAgfTtcbiAgICB0aGlzLl9mZXRjaGVyID0gcmF0ZUxpbWl0ZWQoZmV0Y2hlciwge1xuICAgICAgLi4udGhpcy5fcmF0ZUxpbWl0T3B0aW9ucyxcbiAgICAgIGJhdGNoQ2FsbHM6IHRydWVcbiAgICB9KTtcbiAgfVxuICBpc0NhY2hlQXZhaWxhYmxlKCkge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZS5pc0F2YWlsYWJsZSgpO1xuICB9XG4gIGdldElmQ2FjaGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZS5nZXQoKTtcbiAgfVxuICBnZXRPcldhaXQoY2FjaGVTdHJhdGVneSkge1xuICAgIGNvbnN0IGNhY2hlZCA9IHRoaXMuZ2V0SWZDYWNoZWQoKTtcbiAgICBpZiAoY2FjaGVTdHJhdGVneSA9PT0gXCJyZWFkLXdyaXRlXCIgJiYgY2FjaGVkLnN0YXR1cyA9PT0gXCJva1wiKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZWQoY2FjaGVkLmRhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fcmVmZXRjaChjYWNoZVN0cmF0ZWd5KTtcbiAgfVxuICBfc2V0KHZhbHVlKSB7XG4gICAgdGhpcy5fc3RvcmUuc2V0KHZhbHVlKTtcbiAgfVxuICBfc2V0QXN5bmModmFsdWUpIHtcbiAgICBjb25zdCBwcm9taXNlID0gcGVuZGluZyh2YWx1ZSk7XG4gICAgdGhpcy5fcGVuZGluZ1Byb21pc2UgPSBwcm9taXNlO1xuICAgIHJldHVybiBwZW5kaW5nKHRoaXMuX3N0b3JlLnNldEFzeW5jKHByb21pc2UpKTtcbiAgfVxuICBfcmVmZXRjaChjYWNoZVN0cmF0ZWd5KSB7XG4gICAgaWYgKGNhY2hlU3RyYXRlZ3kgPT09IFwicmVhZC13cml0ZVwiICYmIHRoaXMuX3BlbmRpbmdQcm9taXNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcGVuZGluZ1Byb21pc2U7XG4gICAgfVxuICAgIGNvbnN0IHByb21pc2UgPSBwZW5kaW5nKHRoaXMuX2ZldGNoZXIoKSk7XG4gICAgaWYgKGNhY2hlU3RyYXRlZ3kgPT09IFwibmV2ZXJcIikge1xuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIHJldHVybiBwZW5kaW5nKHRoaXMuX3NldEFzeW5jKHByb21pc2UpLnRoZW4oKCkgPT4gcHJvbWlzZSkpO1xuICB9XG4gIGZvcmNlU2V0Q2FjaGVkVmFsdWUodmFsdWUpIHtcbiAgICB0aGlzLl9zZXQodmFsdWUpO1xuICB9XG4gIGZvcmNlU2V0Q2FjaGVkVmFsdWVBc3luYyh2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLl9zZXRBc3luYyh2YWx1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIFJlZmV0Y2hlcyB0aGUgdmFsdWUgZnJvbSB0aGUgZmV0Y2hlciwgYW5kIHVwZGF0ZXMgdGhlIGNhY2hlIHdpdGggaXQuXG4gICAqL1xuICBhc3luYyByZWZyZXNoKCkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmdldE9yV2FpdChcIndyaXRlLW9ubHlcIik7XG4gIH1cbiAgLyoqXG4gICAqIEludmFsaWRhdGVzIHRoZSBjYWNoZSwgbWFya2luZyBpdCB0byByZWZyZXNoIG9uIHRoZSBuZXh0IHJlYWQuIElmIGFueW9uZSB3YXMgbGlzdGVuaW5nIHRvIGl0LCBpdCB3aWxsIHJlZnJlc2hcbiAgICogaW1tZWRpYXRlbHkuXG4gICAqL1xuICBpbnZhbGlkYXRlKCkge1xuICAgIHRoaXMuX3N0b3JlLnNldFVuYXZhaWxhYmxlKCk7XG4gICAgdGhpcy5fcGVuZGluZ1Byb21pc2UgPSB2b2lkIDA7XG4gICAgaWYgKHRoaXMuX3N1YnNjcmlwdGlvbnNDb3VudCA+IDApIHtcbiAgICAgIHJ1bkFzeW5jaHJvbm91c2x5KHRoaXMucmVmcmVzaCgpKTtcbiAgICB9XG4gIH1cbiAgb25TdGF0ZUNoYW5nZShjYWxsYmFjaykge1xuICAgIGNvbnN0IHN0b3JlT2JqID0gdGhpcy5fc3RvcmUub25DaGFuZ2UoY2FsbGJhY2spO1xuICAgIHJ1bkFzeW5jaHJvbm91c2x5KHRoaXMuZ2V0T3JXYWl0KFwicmVhZC13cml0ZVwiKSk7XG4gICAgaWYgKHRoaXMuX3N1YnNjcmlwdGlvbnNDb3VudCsrID09PSAwICYmIHRoaXMuX29wdGlvbnMub25TdWJzY3JpYmUpIHtcbiAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gdGhpcy5fb3B0aW9ucy5vblN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgIHJ1bkFzeW5jaHJvbm91c2x5KHRoaXMucmVmcmVzaCgpKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5fdW5zdWJzY3JpYmVycy5wdXNoKHVuc3Vic2NyaWJlKTtcbiAgICB9XG4gICAgbGV0IGhhc1Vuc3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgIHJldHVybiB7XG4gICAgICB1bnN1YnNjcmliZTogKCkgPT4ge1xuICAgICAgICBpZiAoaGFzVW5zdWJzY3JpYmVkKSByZXR1cm47XG4gICAgICAgIGhhc1Vuc3Vic2NyaWJlZCA9IHRydWU7XG4gICAgICAgIHN0b3JlT2JqLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIGlmICgtLXRoaXMuX3N1YnNjcmlwdGlvbnNDb3VudCA9PT0gMCkge1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnRSZWZyZXNoUHJvbWlzZUluZGV4ID0gKyt0aGlzLl9tb3N0UmVjZW50UmVmcmVzaFByb21pc2VJbmRleDtcbiAgICAgICAgICBydW5Bc3luY2hyb25vdXNseShhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB3YWl0KDVlMyk7XG4gICAgICAgICAgICBpZiAodGhpcy5fc3Vic2NyaXB0aW9uc0NvdW50ID09PSAwICYmIGN1cnJlbnRSZWZyZXNoUHJvbWlzZUluZGV4ID09PSB0aGlzLl9tb3N0UmVjZW50UmVmcmVzaFByb21pc2VJbmRleCkge1xuICAgICAgICAgICAgICB0aGlzLmludmFsaWRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBmb3IgKGNvbnN0IHVuc3Vic2NyaWJlIG9mIHRoaXMuX3Vuc3Vic2NyaWJlcnMpIHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxufTtcbmV4cG9ydCB7XG4gIEFzeW5jQ2FjaGUsXG4gIGNhY2hlRnVuY3Rpb25cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYWNoZXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/caches.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/compile-time.js":
/*!**************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/compile-time.js ***!
  \**************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   scrambleDuringCompileTime: () => (/* binding */ scrambleDuringCompileTime)\n/* harmony export */ });\n// src/utils/compile-time.tsx\nfunction scrambleDuringCompileTime(t) {\n  if (Math.random() < 1e-5 && Math.random() > 0.99999 && Math.random() < 1e-5 && Math.random() > 0.99999) {\n    return \"this will never happen\";\n  }\n  return t;\n}\n\n//# sourceMappingURL=compile-time.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvY29tcGlsZS10aW1lLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZngyZWRlbm9hc2lzL0Rvd25sb2Fkcy9EZXZlbG9wbWVudC9Fc3BhZGEvbm9kZV9tb2R1bGVzLy5wbnBtL0BzdGFja2ZyYW1lK3N0YWNrLXNoYXJlZEAyLjguNDFfQGF3cy1zZGsrY3JlZGVudGlhbC1wcm92aWRlci13ZWItaWRlbnRpdHlAMy45MDEuMF9AdHlwZV83NGRiYTAxZjZkODllNzIwODk2YjRkZjM0NTgzMzk5MC9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvZXNtL3V0aWxzL2NvbXBpbGUtdGltZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvY29tcGlsZS10aW1lLnRzeFxuZnVuY3Rpb24gc2NyYW1ibGVEdXJpbmdDb21waWxlVGltZSh0KSB7XG4gIGlmIChNYXRoLnJhbmRvbSgpIDwgMWUtNSAmJiBNYXRoLnJhbmRvbSgpID4gMC45OTk5OSAmJiBNYXRoLnJhbmRvbSgpIDwgMWUtNSAmJiBNYXRoLnJhbmRvbSgpID4gMC45OTk5OSkge1xuICAgIHJldHVybiBcInRoaXMgd2lsbCBuZXZlciBoYXBwZW5cIjtcbiAgfVxuICByZXR1cm4gdDtcbn1cbmV4cG9ydCB7XG4gIHNjcmFtYmxlRHVyaW5nQ29tcGlsZVRpbWVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21waWxlLXRpbWUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/compile-time.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/crypto.js":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/crypto.js ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decrypt: () => (/* binding */ decrypt),\n/* harmony export */   encrypt: () => (/* binding */ encrypt),\n/* harmony export */   generateRandomValues: () => (/* binding */ generateRandomValues),\n/* harmony export */   generateSecureRandomString: () => (/* binding */ generateSecureRandomString),\n/* harmony export */   hash: () => (/* binding */ hash),\n/* harmony export */   iteratedHash: () => (/* binding */ iteratedHash)\n/* harmony export */ });\n/* harmony import */ var _bytes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bytes.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/bytes.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./globals.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/globals.js\");\n/* harmony import */ var _results_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./results.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/results.js\");\n// src/utils/crypto.tsx\n\n\n\n\nfunction generateRandomValues(array) {\n  if (!_globals_js__WEBPACK_IMPORTED_MODULE_2__.globalVar.crypto) {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Crypto API is not available in this environment. Are you using an old browser?\");\n  }\n  if (!_globals_js__WEBPACK_IMPORTED_MODULE_2__.globalVar.crypto.getRandomValues) {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"crypto.getRandomValues is not available in this environment. Are you using an old browser?\");\n  }\n  return _globals_js__WEBPACK_IMPORTED_MODULE_2__.globalVar.crypto.getRandomValues(array);\n}\nfunction generateSecureRandomString(minBitsOfEntropy = 224) {\n  const base32CharactersCount = Math.ceil(minBitsOfEntropy / 5);\n  const bytesCount = Math.ceil(base32CharactersCount * 5 / 8);\n  const randomBytes = generateRandomValues(new Uint8Array(bytesCount));\n  const str = (0,_bytes_js__WEBPACK_IMPORTED_MODULE_0__.encodeBase32)(randomBytes);\n  return str.slice(str.length - base32CharactersCount).toLowerCase();\n}\nasync function getDerivedSymmetricKey(purpose, secret, salt) {\n  const originalSecretKey = await crypto.subtle.importKey(\"raw\", typeof secret === \"string\" ? new TextEncoder().encode(secret) : secret, \"HKDF\", false, [\"deriveKey\"]);\n  return await crypto.subtle.deriveKey(\n    {\n      name: \"HKDF\",\n      salt,\n      hash: \"SHA-256\",\n      info: new TextEncoder().encode(JSON.stringify([\n        \"stack-crypto-helper-derived-symmetric-key\",\n        purpose,\n        typeof secret === \"string\" ? \"string-key\" : \"binary-key\",\n        (0,_bytes_js__WEBPACK_IMPORTED_MODULE_0__.encodeBase64)(salt)\n      ]))\n    },\n    originalSecretKey,\n    { name: \"AES-GCM\", length: 256 },\n    false,\n    [\"encrypt\", \"decrypt\"]\n  );\n}\nasync function encrypt({ purpose, secret, value }) {\n  const iv = crypto.getRandomValues(new Uint8Array(12));\n  const salt = crypto.getRandomValues(new Uint8Array(16));\n  const derivedSecretKey = await getDerivedSymmetricKey(purpose, secret, salt);\n  const cipher = await crypto.subtle.encrypt({\n    name: \"AES-GCM\",\n    iv\n  }, derivedSecretKey, value);\n  const version = [1, 0];\n  return new Uint8Array([...version, ...salt, ...iv, ...new Uint8Array(cipher)]);\n}\nasync function decrypt({ purpose, secret, cipher }) {\n  const version = cipher.slice(0, 2);\n  if (version[0] !== 1 || version[1] !== 0) throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Invalid ciphertext version in decrypt(...); expected 0x0100\", { purpose });\n  const salt = cipher.slice(2, 18);\n  const iv = cipher.slice(18, 30);\n  const cipherBytes = cipher.slice(30);\n  const derivedSecretKey = await getDerivedSymmetricKey(purpose, secret, salt);\n  try {\n    const plaintext = await crypto.subtle.decrypt({\n      name: \"AES-GCM\",\n      iv\n    }, derivedSecretKey, cipherBytes);\n    return _results_js__WEBPACK_IMPORTED_MODULE_3__.Result.ok(new Uint8Array(plaintext));\n  } catch (e) {\n    if (e instanceof DOMException && e.name === \"OperationError\") {\n      return _results_js__WEBPACK_IMPORTED_MODULE_3__.Result.error(new Error(\"Invalid ciphertext or secret when decrypting encrypted value\", { cause: e }));\n    }\n    throw e;\n  }\n}\nasync function hash(options) {\n  return await iteratedHash({ ...options, iterations: 1 });\n}\nasync function iteratedHash(options) {\n  const stringOrUint8ArrayToUint8Array = (value) => typeof value === \"string\" ? new TextEncoder().encode(value) : value;\n  const stringOrUint8ArrayToBase64 = (value) => (0,_bytes_js__WEBPACK_IMPORTED_MODULE_0__.encodeBase64)(stringOrUint8ArrayToUint8Array(value));\n  const input = await crypto.subtle.importKey(\n    \"raw\",\n    stringOrUint8ArrayToUint8Array(options.value),\n    \"PBKDF2\",\n    false,\n    [\"deriveBits\"]\n  );\n  return new Uint8Array(await crypto.subtle.deriveBits({\n    name: \"PBKDF2\",\n    salt: new TextEncoder().encode(JSON.stringify([\n      \"stack-crypto-helper-iterated-hash\",\n      options.purpose,\n      stringOrUint8ArrayToBase64(options.salt ?? \"\"),\n      stringOrUint8ArrayToBase64(options.extra ?? \"\")\n    ])),\n    iterations: options.iterations,\n    hash: \"SHA-256\"\n  }, input, 256));\n}\n\n//# sourceMappingURL=crypto.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvY3J5cHRvLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUN3RDtBQUNOO0FBQ1Q7QUFDSDtBQUN0QztBQUNBLE9BQU8sa0RBQVM7QUFDaEIsY0FBYywyREFBbUI7QUFDakM7QUFDQSxPQUFPLGtEQUFTO0FBQ2hCLGNBQWMsMkRBQW1CO0FBQ2pDO0FBQ0EsU0FBUyxrREFBUztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx1REFBWTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdURBQVk7QUFDcEI7QUFDQSxLQUFLO0FBQ0w7QUFDQSxNQUFNLDhCQUE4QjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix3QkFBd0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix5QkFBeUI7QUFDbEQ7QUFDQSxzREFBc0QsMkRBQW1CLDhDQUE4QyxvQkFBb0IsU0FBUztBQUNwSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFdBQVcsK0NBQU07QUFDakIsSUFBSTtBQUNKO0FBQ0EsYUFBYSwrQ0FBTSxtRkFBbUYsVUFBVTtBQUNoSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDJCQUEyQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsdURBQVk7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQVFFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZngyZWRlbm9hc2lzL0Rvd25sb2Fkcy9EZXZlbG9wbWVudC9Fc3BhZGEvbm9kZV9tb2R1bGVzLy5wbnBtL0BzdGFja2ZyYW1lK3N0YWNrLXNoYXJlZEAyLjguNDFfQGF3cy1zZGsrY3JlZGVudGlhbC1wcm92aWRlci13ZWItaWRlbnRpdHlAMy45MDEuMF9AdHlwZV83NGRiYTAxZjZkODllNzIwODk2YjRkZjM0NTgzMzk5MC9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvZXNtL3V0aWxzL2NyeXB0by5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvY3J5cHRvLnRzeFxuaW1wb3J0IHsgZW5jb2RlQmFzZTMyLCBlbmNvZGVCYXNlNjQgfSBmcm9tIFwiLi9ieXRlcy5qc1wiO1xuaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciB9IGZyb20gXCIuL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgZ2xvYmFsVmFyIH0gZnJvbSBcIi4vZ2xvYmFscy5qc1wiO1xuaW1wb3J0IHsgUmVzdWx0IH0gZnJvbSBcIi4vcmVzdWx0cy5qc1wiO1xuZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21WYWx1ZXMoYXJyYXkpIHtcbiAgaWYgKCFnbG9iYWxWYXIuY3J5cHRvKSB7XG4gICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJDcnlwdG8gQVBJIGlzIG5vdCBhdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudC4gQXJlIHlvdSB1c2luZyBhbiBvbGQgYnJvd3Nlcj9cIik7XG4gIH1cbiAgaWYgKCFnbG9iYWxWYXIuY3J5cHRvLmdldFJhbmRvbVZhbHVlcykge1xuICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiY3J5cHRvLmdldFJhbmRvbVZhbHVlcyBpcyBub3QgYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQuIEFyZSB5b3UgdXNpbmcgYW4gb2xkIGJyb3dzZXI/XCIpO1xuICB9XG4gIHJldHVybiBnbG9iYWxWYXIuY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhhcnJheSk7XG59XG5mdW5jdGlvbiBnZW5lcmF0ZVNlY3VyZVJhbmRvbVN0cmluZyhtaW5CaXRzT2ZFbnRyb3B5ID0gMjI0KSB7XG4gIGNvbnN0IGJhc2UzMkNoYXJhY3RlcnNDb3VudCA9IE1hdGguY2VpbChtaW5CaXRzT2ZFbnRyb3B5IC8gNSk7XG4gIGNvbnN0IGJ5dGVzQ291bnQgPSBNYXRoLmNlaWwoYmFzZTMyQ2hhcmFjdGVyc0NvdW50ICogNSAvIDgpO1xuICBjb25zdCByYW5kb21CeXRlcyA9IGdlbmVyYXRlUmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KGJ5dGVzQ291bnQpKTtcbiAgY29uc3Qgc3RyID0gZW5jb2RlQmFzZTMyKHJhbmRvbUJ5dGVzKTtcbiAgcmV0dXJuIHN0ci5zbGljZShzdHIubGVuZ3RoIC0gYmFzZTMyQ2hhcmFjdGVyc0NvdW50KS50b0xvd2VyQ2FzZSgpO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0RGVyaXZlZFN5bW1ldHJpY0tleShwdXJwb3NlLCBzZWNyZXQsIHNhbHQpIHtcbiAgY29uc3Qgb3JpZ2luYWxTZWNyZXRLZXkgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmltcG9ydEtleShcInJhd1wiLCB0eXBlb2Ygc2VjcmV0ID09PSBcInN0cmluZ1wiID8gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHNlY3JldCkgOiBzZWNyZXQsIFwiSEtERlwiLCBmYWxzZSwgW1wiZGVyaXZlS2V5XCJdKTtcbiAgcmV0dXJuIGF3YWl0IGNyeXB0by5zdWJ0bGUuZGVyaXZlS2V5KFxuICAgIHtcbiAgICAgIG5hbWU6IFwiSEtERlwiLFxuICAgICAgc2FsdCxcbiAgICAgIGhhc2g6IFwiU0hBLTI1NlwiLFxuICAgICAgaW5mbzogbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKEpTT04uc3RyaW5naWZ5KFtcbiAgICAgICAgXCJzdGFjay1jcnlwdG8taGVscGVyLWRlcml2ZWQtc3ltbWV0cmljLWtleVwiLFxuICAgICAgICBwdXJwb3NlLFxuICAgICAgICB0eXBlb2Ygc2VjcmV0ID09PSBcInN0cmluZ1wiID8gXCJzdHJpbmcta2V5XCIgOiBcImJpbmFyeS1rZXlcIixcbiAgICAgICAgZW5jb2RlQmFzZTY0KHNhbHQpXG4gICAgICBdKSlcbiAgICB9LFxuICAgIG9yaWdpbmFsU2VjcmV0S2V5LFxuICAgIHsgbmFtZTogXCJBRVMtR0NNXCIsIGxlbmd0aDogMjU2IH0sXG4gICAgZmFsc2UsXG4gICAgW1wiZW5jcnlwdFwiLCBcImRlY3J5cHRcIl1cbiAgKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGVuY3J5cHQoeyBwdXJwb3NlLCBzZWNyZXQsIHZhbHVlIH0pIHtcbiAgY29uc3QgaXYgPSBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDEyKSk7XG4gIGNvbnN0IHNhbHQgPSBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDE2KSk7XG4gIGNvbnN0IGRlcml2ZWRTZWNyZXRLZXkgPSBhd2FpdCBnZXREZXJpdmVkU3ltbWV0cmljS2V5KHB1cnBvc2UsIHNlY3JldCwgc2FsdCk7XG4gIGNvbnN0IGNpcGhlciA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZW5jcnlwdCh7XG4gICAgbmFtZTogXCJBRVMtR0NNXCIsXG4gICAgaXZcbiAgfSwgZGVyaXZlZFNlY3JldEtleSwgdmFsdWUpO1xuICBjb25zdCB2ZXJzaW9uID0gWzEsIDBdO1xuICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWy4uLnZlcnNpb24sIC4uLnNhbHQsIC4uLml2LCAuLi5uZXcgVWludDhBcnJheShjaXBoZXIpXSk7XG59XG5hc3luYyBmdW5jdGlvbiBkZWNyeXB0KHsgcHVycG9zZSwgc2VjcmV0LCBjaXBoZXIgfSkge1xuICBjb25zdCB2ZXJzaW9uID0gY2lwaGVyLnNsaWNlKDAsIDIpO1xuICBpZiAodmVyc2lvblswXSAhPT0gMSB8fCB2ZXJzaW9uWzFdICE9PSAwKSB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkludmFsaWQgY2lwaGVydGV4dCB2ZXJzaW9uIGluIGRlY3J5cHQoLi4uKTsgZXhwZWN0ZWQgMHgwMTAwXCIsIHsgcHVycG9zZSB9KTtcbiAgY29uc3Qgc2FsdCA9IGNpcGhlci5zbGljZSgyLCAxOCk7XG4gIGNvbnN0IGl2ID0gY2lwaGVyLnNsaWNlKDE4LCAzMCk7XG4gIGNvbnN0IGNpcGhlckJ5dGVzID0gY2lwaGVyLnNsaWNlKDMwKTtcbiAgY29uc3QgZGVyaXZlZFNlY3JldEtleSA9IGF3YWl0IGdldERlcml2ZWRTeW1tZXRyaWNLZXkocHVycG9zZSwgc2VjcmV0LCBzYWx0KTtcbiAgdHJ5IHtcbiAgICBjb25zdCBwbGFpbnRleHQgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmRlY3J5cHQoe1xuICAgICAgbmFtZTogXCJBRVMtR0NNXCIsXG4gICAgICBpdlxuICAgIH0sIGRlcml2ZWRTZWNyZXRLZXksIGNpcGhlckJ5dGVzKTtcbiAgICByZXR1cm4gUmVzdWx0Lm9rKG5ldyBVaW50OEFycmF5KHBsYWludGV4dCkpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKGUgaW5zdGFuY2VvZiBET01FeGNlcHRpb24gJiYgZS5uYW1lID09PSBcIk9wZXJhdGlvbkVycm9yXCIpIHtcbiAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IobmV3IEVycm9yKFwiSW52YWxpZCBjaXBoZXJ0ZXh0IG9yIHNlY3JldCB3aGVuIGRlY3J5cHRpbmcgZW5jcnlwdGVkIHZhbHVlXCIsIHsgY2F1c2U6IGUgfSkpO1xuICAgIH1cbiAgICB0aHJvdyBlO1xuICB9XG59XG5hc3luYyBmdW5jdGlvbiBoYXNoKG9wdGlvbnMpIHtcbiAgcmV0dXJuIGF3YWl0IGl0ZXJhdGVkSGFzaCh7IC4uLm9wdGlvbnMsIGl0ZXJhdGlvbnM6IDEgfSk7XG59XG5hc3luYyBmdW5jdGlvbiBpdGVyYXRlZEhhc2gob3B0aW9ucykge1xuICBjb25zdCBzdHJpbmdPclVpbnQ4QXJyYXlUb1VpbnQ4QXJyYXkgPSAodmFsdWUpID0+IHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiA/IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZSh2YWx1ZSkgOiB2YWx1ZTtcbiAgY29uc3Qgc3RyaW5nT3JVaW50OEFycmF5VG9CYXNlNjQgPSAodmFsdWUpID0+IGVuY29kZUJhc2U2NChzdHJpbmdPclVpbnQ4QXJyYXlUb1VpbnQ4QXJyYXkodmFsdWUpKTtcbiAgY29uc3QgaW5wdXQgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmltcG9ydEtleShcbiAgICBcInJhd1wiLFxuICAgIHN0cmluZ09yVWludDhBcnJheVRvVWludDhBcnJheShvcHRpb25zLnZhbHVlKSxcbiAgICBcIlBCS0RGMlwiLFxuICAgIGZhbHNlLFxuICAgIFtcImRlcml2ZUJpdHNcIl1cbiAgKTtcbiAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGF3YWl0IGNyeXB0by5zdWJ0bGUuZGVyaXZlQml0cyh7XG4gICAgbmFtZTogXCJQQktERjJcIixcbiAgICBzYWx0OiBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoSlNPTi5zdHJpbmdpZnkoW1xuICAgICAgXCJzdGFjay1jcnlwdG8taGVscGVyLWl0ZXJhdGVkLWhhc2hcIixcbiAgICAgIG9wdGlvbnMucHVycG9zZSxcbiAgICAgIHN0cmluZ09yVWludDhBcnJheVRvQmFzZTY0KG9wdGlvbnMuc2FsdCA/PyBcIlwiKSxcbiAgICAgIHN0cmluZ09yVWludDhBcnJheVRvQmFzZTY0KG9wdGlvbnMuZXh0cmEgPz8gXCJcIilcbiAgICBdKSksXG4gICAgaXRlcmF0aW9uczogb3B0aW9ucy5pdGVyYXRpb25zLFxuICAgIGhhc2g6IFwiU0hBLTI1NlwiXG4gIH0sIGlucHV0LCAyNTYpKTtcbn1cbmV4cG9ydCB7XG4gIGRlY3J5cHQsXG4gIGVuY3J5cHQsXG4gIGdlbmVyYXRlUmFuZG9tVmFsdWVzLFxuICBnZW5lcmF0ZVNlY3VyZVJhbmRvbVN0cmluZyxcbiAgaGFzaCxcbiAgaXRlcmF0ZWRIYXNoXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3J5cHRvLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/crypto.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/currency-constants.js":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/currency-constants.js ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SUPPORTED_CURRENCIES: () => (/* binding */ SUPPORTED_CURRENCIES)\n/* harmony export */ });\n// src/utils/currency-constants.tsx\nvar SUPPORTED_CURRENCIES = [\n  {\n    code: \"USD\",\n    decimals: 2,\n    stripeDecimals: 2\n  },\n  {\n    code: \"EUR\",\n    decimals: 2,\n    stripeDecimals: 2\n  },\n  {\n    code: \"GBP\",\n    decimals: 2,\n    stripeDecimals: 2\n  },\n  {\n    code: \"JPY\",\n    decimals: 0,\n    stripeDecimals: 0\n  },\n  {\n    code: \"INR\",\n    decimals: 2,\n    stripeDecimals: 2\n  },\n  {\n    code: \"AUD\",\n    decimals: 2,\n    stripeDecimals: 2\n  },\n  {\n    code: \"CAD\",\n    decimals: 2,\n    stripeDecimals: 2\n  }\n];\n\n//# sourceMappingURL=currency-constants.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvY3VycmVuY3ktY29uc3RhbnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2dmeDJlZGVub2FzaXMvRG93bmxvYWRzL0RldmVsb3BtZW50L0VzcGFkYS9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvY3VycmVuY3ktY29uc3RhbnRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy9jdXJyZW5jeS1jb25zdGFudHMudHN4XG52YXIgU1VQUE9SVEVEX0NVUlJFTkNJRVMgPSBbXG4gIHtcbiAgICBjb2RlOiBcIlVTRFwiLFxuICAgIGRlY2ltYWxzOiAyLFxuICAgIHN0cmlwZURlY2ltYWxzOiAyXG4gIH0sXG4gIHtcbiAgICBjb2RlOiBcIkVVUlwiLFxuICAgIGRlY2ltYWxzOiAyLFxuICAgIHN0cmlwZURlY2ltYWxzOiAyXG4gIH0sXG4gIHtcbiAgICBjb2RlOiBcIkdCUFwiLFxuICAgIGRlY2ltYWxzOiAyLFxuICAgIHN0cmlwZURlY2ltYWxzOiAyXG4gIH0sXG4gIHtcbiAgICBjb2RlOiBcIkpQWVwiLFxuICAgIGRlY2ltYWxzOiAwLFxuICAgIHN0cmlwZURlY2ltYWxzOiAwXG4gIH0sXG4gIHtcbiAgICBjb2RlOiBcIklOUlwiLFxuICAgIGRlY2ltYWxzOiAyLFxuICAgIHN0cmlwZURlY2ltYWxzOiAyXG4gIH0sXG4gIHtcbiAgICBjb2RlOiBcIkFVRFwiLFxuICAgIGRlY2ltYWxzOiAyLFxuICAgIHN0cmlwZURlY2ltYWxzOiAyXG4gIH0sXG4gIHtcbiAgICBjb2RlOiBcIkNBRFwiLFxuICAgIGRlY2ltYWxzOiAyLFxuICAgIHN0cmlwZURlY2ltYWxzOiAyXG4gIH1cbl07XG5leHBvcnQge1xuICBTVVBQT1JURURfQ1VSUkVOQ0lFU1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWN1cnJlbmN5LWNvbnN0YW50cy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/currency-constants.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/env.js":
/*!*****************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/env.js ***!
  \*****************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnvVariable: () => (/* binding */ getEnvVariable),\n/* harmony export */   getNextRuntime: () => (/* binding */ getNextRuntime),\n/* harmony export */   getNodeEnvironment: () => (/* binding */ getNodeEnvironment),\n/* harmony export */   isBrowserLike: () => (/* binding */ isBrowserLike)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n/* harmony import */ var _strings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./strings.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/strings.js\");\n// src/utils/env.tsx\n\n\nfunction isBrowserLike() {\n  return typeof window !== \"undefined\" && typeof document !== \"undefined\" && typeof document.createElement !== \"undefined\";\n}\nvar ENV_VAR_RENAME = {\n  NEXT_PUBLIC_STACK_API_URL: [\"STACK_BASE_URL\", \"NEXT_PUBLIC_STACK_URL\"]\n};\nfunction getEnvVariable(name, defaultValue) {\n  if (isBrowserLike()) {\n    throw new Error((0,_strings_js__WEBPACK_IMPORTED_MODULE_1__.deindent)`\n      Can't use getEnvVariable on the client because Next.js transpiles expressions of the kind process.env.XYZ at build-time on the client.\n    \n      Use process.env.XYZ directly instead.\n    `);\n  }\n  if (name === \"NEXT_RUNTIME\") {\n    throw new Error((0,_strings_js__WEBPACK_IMPORTED_MODULE_1__.deindent)`\n      Can't use getEnvVariable to access the NEXT_RUNTIME environment variable because it's compiled into the client bundle.\n    \n      Use getNextRuntime() instead.\n    `);\n  }\n  for (const [newName, oldNames] of Object.entries(ENV_VAR_RENAME)) {\n    if (oldNames.includes(name)) {\n      (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.throwErr)(`Environment variable ${name} has been renamed to ${newName}. Please update your configuration to use the new name.`);\n    }\n  }\n  let value = process.env[name];\n  if (!value && ENV_VAR_RENAME[name]) {\n    for (const oldName of ENV_VAR_RENAME[name]) {\n      value = process.env[oldName];\n      if (value) break;\n    }\n  }\n  if (value === void 0) {\n    if (defaultValue !== void 0) {\n      value = defaultValue;\n    } else {\n      (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.throwErr)(`Missing environment variable: ${name}`);\n    }\n  }\n  return value;\n}\nfunction getNextRuntime() {\n  return \"nodejs\" || 0;\n}\nfunction getNodeEnvironment() {\n  return getEnvVariable(\"NODE_ENV\", \"\");\n}\n\n//# sourceMappingURL=env.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvZW52LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ3VDO0FBQ0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixxREFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IscURBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLG9EQUFRLHlCQUF5QixNQUFNLHNCQUFzQixRQUFRO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixNQUFNLG9EQUFRLGtDQUFrQyxLQUFLO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLFFBQXdCLElBQUksQ0FBc0Q7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFNRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS91dGlscy9lbnYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3V0aWxzL2Vudi50c3hcbmltcG9ydCB7IHRocm93RXJyIH0gZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBkZWluZGVudCB9IGZyb20gXCIuL3N0cmluZ3MuanNcIjtcbmZ1bmN0aW9uIGlzQnJvd3Nlckxpa2UoKSB7XG4gIHJldHVybiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCAhPT0gXCJ1bmRlZmluZWRcIjtcbn1cbnZhciBFTlZfVkFSX1JFTkFNRSA9IHtcbiAgTkVYVF9QVUJMSUNfU1RBQ0tfQVBJX1VSTDogW1wiU1RBQ0tfQkFTRV9VUkxcIiwgXCJORVhUX1BVQkxJQ19TVEFDS19VUkxcIl1cbn07XG5mdW5jdGlvbiBnZXRFbnZWYXJpYWJsZShuYW1lLCBkZWZhdWx0VmFsdWUpIHtcbiAgaWYgKGlzQnJvd3Nlckxpa2UoKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihkZWluZGVudGBcbiAgICAgIENhbid0IHVzZSBnZXRFbnZWYXJpYWJsZSBvbiB0aGUgY2xpZW50IGJlY2F1c2UgTmV4dC5qcyB0cmFuc3BpbGVzIGV4cHJlc3Npb25zIG9mIHRoZSBraW5kIHByb2Nlc3MuZW52LlhZWiBhdCBidWlsZC10aW1lIG9uIHRoZSBjbGllbnQuXG4gICAgXG4gICAgICBVc2UgcHJvY2Vzcy5lbnYuWFlaIGRpcmVjdGx5IGluc3RlYWQuXG4gICAgYCk7XG4gIH1cbiAgaWYgKG5hbWUgPT09IFwiTkVYVF9SVU5USU1FXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoZGVpbmRlbnRgXG4gICAgICBDYW4ndCB1c2UgZ2V0RW52VmFyaWFibGUgdG8gYWNjZXNzIHRoZSBORVhUX1JVTlRJTUUgZW52aXJvbm1lbnQgdmFyaWFibGUgYmVjYXVzZSBpdCdzIGNvbXBpbGVkIGludG8gdGhlIGNsaWVudCBidW5kbGUuXG4gICAgXG4gICAgICBVc2UgZ2V0TmV4dFJ1bnRpbWUoKSBpbnN0ZWFkLlxuICAgIGApO1xuICB9XG4gIGZvciAoY29uc3QgW25ld05hbWUsIG9sZE5hbWVzXSBvZiBPYmplY3QuZW50cmllcyhFTlZfVkFSX1JFTkFNRSkpIHtcbiAgICBpZiAob2xkTmFtZXMuaW5jbHVkZXMobmFtZSkpIHtcbiAgICAgIHRocm93RXJyKGBFbnZpcm9ubWVudCB2YXJpYWJsZSAke25hbWV9IGhhcyBiZWVuIHJlbmFtZWQgdG8gJHtuZXdOYW1lfS4gUGxlYXNlIHVwZGF0ZSB5b3VyIGNvbmZpZ3VyYXRpb24gdG8gdXNlIHRoZSBuZXcgbmFtZS5gKTtcbiAgICB9XG4gIH1cbiAgbGV0IHZhbHVlID0gcHJvY2Vzcy5lbnZbbmFtZV07XG4gIGlmICghdmFsdWUgJiYgRU5WX1ZBUl9SRU5BTUVbbmFtZV0pIHtcbiAgICBmb3IgKGNvbnN0IG9sZE5hbWUgb2YgRU5WX1ZBUl9SRU5BTUVbbmFtZV0pIHtcbiAgICAgIHZhbHVlID0gcHJvY2Vzcy5lbnZbb2xkTmFtZV07XG4gICAgICBpZiAodmFsdWUpIGJyZWFrO1xuICAgIH1cbiAgfVxuICBpZiAodmFsdWUgPT09IHZvaWQgMCkge1xuICAgIGlmIChkZWZhdWx0VmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgdmFsdWUgPSBkZWZhdWx0VmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93RXJyKGBNaXNzaW5nIGVudmlyb25tZW50IHZhcmlhYmxlOiAke25hbWV9YCk7XG4gICAgfVxuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGdldE5leHRSdW50aW1lKCkge1xuICByZXR1cm4gcHJvY2Vzcy5lbnYuTkVYVF9SVU5USU1FIHx8IHRocm93RXJyKFwiTWlzc2luZyBlbnZpcm9ubWVudCB2YXJpYWJsZTogTkVYVF9SVU5USU1FXCIpO1xufVxuZnVuY3Rpb24gZ2V0Tm9kZUVudmlyb25tZW50KCkge1xuICByZXR1cm4gZ2V0RW52VmFyaWFibGUoXCJOT0RFX0VOVlwiLCBcIlwiKTtcbn1cbmV4cG9ydCB7XG4gIGdldEVudlZhcmlhYmxlLFxuICBnZXROZXh0UnVudGltZSxcbiAgZ2V0Tm9kZUVudmlyb25tZW50LFxuICBpc0Jyb3dzZXJMaWtlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW52LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/env.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StackAssertionError: () => (/* binding */ StackAssertionError),\n/* harmony export */   StatusError: () => (/* binding */ StatusError),\n/* harmony export */   captureError: () => (/* binding */ captureError),\n/* harmony export */   concatStacktraces: () => (/* binding */ concatStacktraces),\n/* harmony export */   errorToNiceString: () => (/* binding */ errorToNiceString),\n/* harmony export */   registerErrorSink: () => (/* binding */ registerErrorSink),\n/* harmony export */   throwErr: () => (/* binding */ throwErr)\n/* harmony export */ });\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./globals.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/globals.js\");\n/* harmony import */ var _objects_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./objects.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/objects.js\");\n/* harmony import */ var _strings_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./strings.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/strings.js\");\n// src/utils/errors.tsx\n\n\n\nfunction throwErr(...args) {\n  if (typeof args[0] === \"string\") {\n    throw new StackAssertionError(args[0], args[1]);\n  } else if (args[0] instanceof Error) {\n    throw args[0];\n  } else {\n    throw new StatusError(...args);\n  }\n}\nfunction removeStacktraceNameLine(stack) {\n  const addsNameLine = new Error().stack?.startsWith(\"Error\\n\");\n  return stack.split(\"\\n\").slice(addsNameLine ? 1 : 0).join(\"\\n\");\n}\nfunction concatStacktraces(first, ...errors) {\n  const addsEmptyLineAtEnd = first.stack?.endsWith(\"\\n\");\n  const separator = removeStacktraceNameLine(new Error().stack ?? \"\").split(\"\\n\")[0];\n  for (const error of errors) {\n    const toAppend = removeStacktraceNameLine(error.stack ?? \"\");\n    first.stack += (addsEmptyLineAtEnd ? \"\" : \"\\n\") + separator + \"\\n\" + toAppend;\n  }\n}\nvar StackAssertionError = class extends Error {\n  constructor(message, extraData) {\n    const disclaimer = `\n\nThis is likely an error in Stack. Please make sure you are running the newest version and report it.`;\n    super(`${message}${message.endsWith(disclaimer) ? \"\" : disclaimer}`, (0,_objects_js__WEBPACK_IMPORTED_MODULE_1__.pick)(extraData ?? {}, [\"cause\"]));\n    this.extraData = extraData;\n    Object.defineProperty(this, \"customCaptureExtraArgs\", {\n      get() {\n        return [this.extraData];\n      },\n      enumerable: false\n    });\n    if (process.env.NEXT_PUBLIC_STACK_DEBUGGER_ON_ASSERTION_ERROR === \"true\") {\n      debugger;\n    }\n  }\n};\nStackAssertionError.prototype.name = \"StackAssertionError\";\nfunction errorToNiceString(error) {\n  if (!(error instanceof Error)) return `${typeof error}<${(0,_strings_js__WEBPACK_IMPORTED_MODULE_2__.nicify)(error)}>`;\n  return (0,_strings_js__WEBPACK_IMPORTED_MODULE_2__.nicify)(error, { maxDepth: 8 });\n}\nvar errorSinks = /* @__PURE__ */ new Set();\nfunction registerErrorSink(sink) {\n  if (errorSinks.has(sink)) {\n    return;\n  }\n  errorSinks.add(sink);\n}\nregisterErrorSink((location, error, ...extraArgs) => {\n  console.error(\n    `\\x1B[41mCaptured error in ${location}:`,\n    // HACK: Log a nicified version of the error to get around buggy Next.js pretty-printing\n    // https://www.reddit.com/r/nextjs/comments/1gkxdqe/comment/m19kxgn/?utm_source=share&utm_medium=web3x&utm_name=web3xcss&utm_term=1&utm_content=share_button\n    errorToNiceString(error),\n    ...extraArgs,\n    \"\\x1B[0m\"\n  );\n});\nregisterErrorSink((location, error, ...extraArgs) => {\n  _globals_js__WEBPACK_IMPORTED_MODULE_0__.globalVar.stackCapturedErrors = _globals_js__WEBPACK_IMPORTED_MODULE_0__.globalVar.stackCapturedErrors ?? [];\n  _globals_js__WEBPACK_IMPORTED_MODULE_0__.globalVar.stackCapturedErrors.push({ location, error, extraArgs });\n});\nfunction captureError(location, error) {\n  for (const sink of errorSinks) {\n    sink(\n      location,\n      error,\n      ...error && (typeof error === \"object\" || typeof error === \"function\") && \"customCaptureExtraArgs\" in error && Array.isArray(error.customCaptureExtraArgs) ? error.customCaptureExtraArgs : []\n    );\n  }\n}\nvar StatusError = class extends Error {\n  constructor(status, message) {\n    if (typeof status === \"object\") {\n      message ??= status.message;\n      status = status.statusCode;\n    }\n    super(message);\n    this.__stackStatusErrorBrand = \"stack-status-error-brand-sentinel\";\n    this.name = \"StatusError\";\n    this.statusCode = status;\n    if (!message) {\n      throw new StackAssertionError(\"StatusError always requires a message unless a Status object is passed\", { cause: this });\n    }\n  }\n  static isStatusError(error) {\n    return typeof error === \"object\" && error !== null && \"__stackStatusErrorBrand\" in error && error.__stackStatusErrorBrand === \"stack-status-error-brand-sentinel\";\n  }\n  isClientError() {\n    return this.statusCode >= 400 && this.statusCode < 500;\n  }\n  isServerError() {\n    return !this.isClientError();\n  }\n  getStatusCode() {\n    return this.statusCode;\n  }\n  getBody() {\n    return new TextEncoder().encode(this.message);\n  }\n  getHeaders() {\n    return {\n      \"Content-Type\": [\"text/plain; charset=utf-8\"]\n    };\n  }\n  toDescriptiveJson() {\n    return {\n      status_code: this.getStatusCode(),\n      message: this.message,\n      headers: this.getHeaders()\n    };\n  }\n  /**\n   * @deprecated this is not a good way to make status errors human-readable, use toDescriptiveJson instead\n   */\n  toHttpJson() {\n    return {\n      status_code: this.statusCode,\n      body: this.message,\n      headers: this.getHeaders()\n    };\n  }\n};\nStatusError.BadRequest = { statusCode: 400, message: \"Bad Request\" };\nStatusError.Unauthorized = { statusCode: 401, message: \"Unauthorized\" };\nStatusError.PaymentRequired = { statusCode: 402, message: \"Payment Required\" };\nStatusError.Forbidden = { statusCode: 403, message: \"Forbidden\" };\nStatusError.NotFound = { statusCode: 404, message: \"Not Found\" };\nStatusError.MethodNotAllowed = { statusCode: 405, message: \"Method Not Allowed\" };\nStatusError.NotAcceptable = { statusCode: 406, message: \"Not Acceptable\" };\nStatusError.ProxyAuthenticationRequired = { statusCode: 407, message: \"Proxy Authentication Required\" };\nStatusError.RequestTimeout = { statusCode: 408, message: \"Request Timeout\" };\nStatusError.Conflict = { statusCode: 409, message: \"Conflict\" };\nStatusError.Gone = { statusCode: 410, message: \"Gone\" };\nStatusError.LengthRequired = { statusCode: 411, message: \"Length Required\" };\nStatusError.PreconditionFailed = { statusCode: 412, message: \"Precondition Failed\" };\nStatusError.PayloadTooLarge = { statusCode: 413, message: \"Payload Too Large\" };\nStatusError.URITooLong = { statusCode: 414, message: \"URI Too Long\" };\nStatusError.UnsupportedMediaType = { statusCode: 415, message: \"Unsupported Media Type\" };\nStatusError.RangeNotSatisfiable = { statusCode: 416, message: \"Range Not Satisfiable\" };\nStatusError.ExpectationFailed = { statusCode: 417, message: \"Expectation Failed\" };\nStatusError.ImATeapot = { statusCode: 418, message: \"I'm a teapot\" };\nStatusError.MisdirectedRequest = { statusCode: 421, message: \"Misdirected Request\" };\nStatusError.UnprocessableEntity = { statusCode: 422, message: \"Unprocessable Entity\" };\nStatusError.Locked = { statusCode: 423, message: \"Locked\" };\nStatusError.FailedDependency = { statusCode: 424, message: \"Failed Dependency\" };\nStatusError.TooEarly = { statusCode: 425, message: \"Too Early\" };\nStatusError.UpgradeRequired = { statusCode: 426, message: \"Upgrade Required\" };\nStatusError.PreconditionRequired = { statusCode: 428, message: \"Precondition Required\" };\nStatusError.TooManyRequests = { statusCode: 429, message: \"Too Many Requests\" };\nStatusError.RequestHeaderFieldsTooLarge = { statusCode: 431, message: \"Request Header Fields Too Large\" };\nStatusError.UnavailableForLegalReasons = { statusCode: 451, message: \"Unavailable For Legal Reasons\" };\nStatusError.InternalServerError = { statusCode: 500, message: \"Internal Server Error\" };\nStatusError.NotImplemented = { statusCode: 501, message: \"Not Implemented\" };\nStatusError.BadGateway = { statusCode: 502, message: \"Bad Gateway\" };\nStatusError.ServiceUnavailable = { statusCode: 503, message: \"Service Unavailable\" };\nStatusError.GatewayTimeout = { statusCode: 504, message: \"Gateway Timeout\" };\nStatusError.HTTPVersionNotSupported = { statusCode: 505, message: \"HTTP Version Not Supported\" };\nStatusError.VariantAlsoNegotiates = { statusCode: 506, message: \"Variant Also Negotiates\" };\nStatusError.InsufficientStorage = { statusCode: 507, message: \"Insufficient Storage\" };\nStatusError.LoopDetected = { statusCode: 508, message: \"Loop Detected\" };\nStatusError.NotExtended = { statusCode: 510, message: \"Not Extended\" };\nStatusError.NetworkAuthenticationRequired = { statusCode: 511, message: \"Network Authentication Required\" };\nStatusError.prototype.name = \"StatusError\";\n\n//# sourceMappingURL=errors.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvZXJyb3JzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUN5QztBQUNMO0FBQ0U7QUFDdEM7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGFBQWEsUUFBUSxFQUFFLCtDQUErQyxHQUFHLGlEQUFJLGdCQUFnQjtBQUM3RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxhQUFhLEdBQUcsbURBQU0sUUFBUTtBQUN6RSxTQUFTLG1EQUFNLFVBQVUsYUFBYTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxTQUFTO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLEVBQUUsa0RBQVMsdUJBQXVCLGtEQUFTO0FBQzNDLEVBQUUsa0RBQVMsNEJBQTRCLDRCQUE0QjtBQUNuRSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdIQUFnSCxhQUFhO0FBQzdIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0IsNkJBQTZCO0FBQzdCLGdDQUFnQztBQUNoQywwQkFBMEI7QUFDMUIseUJBQXlCO0FBQ3pCLGlDQUFpQztBQUNqQyw4QkFBOEI7QUFDOUIsNENBQTRDO0FBQzVDLCtCQUErQjtBQUMvQix5QkFBeUI7QUFDekIscUJBQXFCO0FBQ3JCLCtCQUErQjtBQUMvQixtQ0FBbUM7QUFDbkMsZ0NBQWdDO0FBQ2hDLDJCQUEyQjtBQUMzQixxQ0FBcUM7QUFDckMsb0NBQW9DO0FBQ3BDLGtDQUFrQztBQUNsQywwQkFBMEI7QUFDMUIsbUNBQW1DO0FBQ25DLG9DQUFvQztBQUNwQyx1QkFBdUI7QUFDdkIsaUNBQWlDO0FBQ2pDLHlCQUF5QjtBQUN6QixnQ0FBZ0M7QUFDaEMscUNBQXFDO0FBQ3JDLGdDQUFnQztBQUNoQyw0Q0FBNEM7QUFDNUMsMkNBQTJDO0FBQzNDLG9DQUFvQztBQUNwQywrQkFBK0I7QUFDL0IsMkJBQTJCO0FBQzNCLG1DQUFtQztBQUNuQywrQkFBK0I7QUFDL0Isd0NBQXdDO0FBQ3hDLHNDQUFzQztBQUN0QyxvQ0FBb0M7QUFDcEMsNkJBQTZCO0FBQzdCLDRCQUE0QjtBQUM1Qiw4Q0FBOEM7QUFDOUM7QUFTRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS91dGlscy9lcnJvcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3V0aWxzL2Vycm9ycy50c3hcbmltcG9ydCB7IGdsb2JhbFZhciB9IGZyb20gXCIuL2dsb2JhbHMuanNcIjtcbmltcG9ydCB7IHBpY2sgfSBmcm9tIFwiLi9vYmplY3RzLmpzXCI7XG5pbXBvcnQgeyBuaWNpZnkgfSBmcm9tIFwiLi9zdHJpbmdzLmpzXCI7XG5mdW5jdGlvbiB0aHJvd0VyciguLi5hcmdzKSB7XG4gIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICB9IGVsc2UgaWYgKGFyZ3NbMF0gaW5zdGFuY2VvZiBFcnJvcikge1xuICAgIHRocm93IGFyZ3NbMF07XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFN0YXR1c0Vycm9yKC4uLmFyZ3MpO1xuICB9XG59XG5mdW5jdGlvbiByZW1vdmVTdGFja3RyYWNlTmFtZUxpbmUoc3RhY2spIHtcbiAgY29uc3QgYWRkc05hbWVMaW5lID0gbmV3IEVycm9yKCkuc3RhY2s/LnN0YXJ0c1dpdGgoXCJFcnJvclxcblwiKTtcbiAgcmV0dXJuIHN0YWNrLnNwbGl0KFwiXFxuXCIpLnNsaWNlKGFkZHNOYW1lTGluZSA/IDEgOiAwKS5qb2luKFwiXFxuXCIpO1xufVxuZnVuY3Rpb24gY29uY2F0U3RhY2t0cmFjZXMoZmlyc3QsIC4uLmVycm9ycykge1xuICBjb25zdCBhZGRzRW1wdHlMaW5lQXRFbmQgPSBmaXJzdC5zdGFjaz8uZW5kc1dpdGgoXCJcXG5cIik7XG4gIGNvbnN0IHNlcGFyYXRvciA9IHJlbW92ZVN0YWNrdHJhY2VOYW1lTGluZShuZXcgRXJyb3IoKS5zdGFjayA/PyBcIlwiKS5zcGxpdChcIlxcblwiKVswXTtcbiAgZm9yIChjb25zdCBlcnJvciBvZiBlcnJvcnMpIHtcbiAgICBjb25zdCB0b0FwcGVuZCA9IHJlbW92ZVN0YWNrdHJhY2VOYW1lTGluZShlcnJvci5zdGFjayA/PyBcIlwiKTtcbiAgICBmaXJzdC5zdGFjayArPSAoYWRkc0VtcHR5TGluZUF0RW5kID8gXCJcIiA6IFwiXFxuXCIpICsgc2VwYXJhdG9yICsgXCJcXG5cIiArIHRvQXBwZW5kO1xuICB9XG59XG52YXIgU3RhY2tBc3NlcnRpb25FcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBleHRyYURhdGEpIHtcbiAgICBjb25zdCBkaXNjbGFpbWVyID0gYFxuXG5UaGlzIGlzIGxpa2VseSBhbiBlcnJvciBpbiBTdGFjay4gUGxlYXNlIG1ha2Ugc3VyZSB5b3UgYXJlIHJ1bm5pbmcgdGhlIG5ld2VzdCB2ZXJzaW9uIGFuZCByZXBvcnQgaXQuYDtcbiAgICBzdXBlcihgJHttZXNzYWdlfSR7bWVzc2FnZS5lbmRzV2l0aChkaXNjbGFpbWVyKSA/IFwiXCIgOiBkaXNjbGFpbWVyfWAsIHBpY2soZXh0cmFEYXRhID8/IHt9LCBbXCJjYXVzZVwiXSkpO1xuICAgIHRoaXMuZXh0cmFEYXRhID0gZXh0cmFEYXRhO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImN1c3RvbUNhcHR1cmVFeHRyYUFyZ3NcIiwge1xuICAgICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gW3RoaXMuZXh0cmFEYXRhXTtcbiAgICAgIH0sXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZVxuICAgIH0pO1xuICAgIGlmIChwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVEFDS19ERUJVR0dFUl9PTl9BU1NFUlRJT05fRVJST1IgPT09IFwidHJ1ZVwiKSB7XG4gICAgICBkZWJ1Z2dlcjtcbiAgICB9XG4gIH1cbn07XG5TdGFja0Fzc2VydGlvbkVycm9yLnByb3RvdHlwZS5uYW1lID0gXCJTdGFja0Fzc2VydGlvbkVycm9yXCI7XG5mdW5jdGlvbiBlcnJvclRvTmljZVN0cmluZyhlcnJvcikge1xuICBpZiAoIShlcnJvciBpbnN0YW5jZW9mIEVycm9yKSkgcmV0dXJuIGAke3R5cGVvZiBlcnJvcn08JHtuaWNpZnkoZXJyb3IpfT5gO1xuICByZXR1cm4gbmljaWZ5KGVycm9yLCB7IG1heERlcHRoOiA4IH0pO1xufVxudmFyIGVycm9yU2lua3MgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuZnVuY3Rpb24gcmVnaXN0ZXJFcnJvclNpbmsoc2luaykge1xuICBpZiAoZXJyb3JTaW5rcy5oYXMoc2luaykpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgZXJyb3JTaW5rcy5hZGQoc2luayk7XG59XG5yZWdpc3RlckVycm9yU2luaygobG9jYXRpb24sIGVycm9yLCAuLi5leHRyYUFyZ3MpID0+IHtcbiAgY29uc29sZS5lcnJvcihcbiAgICBgXFx4MUJbNDFtQ2FwdHVyZWQgZXJyb3IgaW4gJHtsb2NhdGlvbn06YCxcbiAgICAvLyBIQUNLOiBMb2cgYSBuaWNpZmllZCB2ZXJzaW9uIG9mIHRoZSBlcnJvciB0byBnZXQgYXJvdW5kIGJ1Z2d5IE5leHQuanMgcHJldHR5LXByaW50aW5nXG4gICAgLy8gaHR0cHM6Ly93d3cucmVkZGl0LmNvbS9yL25leHRqcy9jb21tZW50cy8xZ2t4ZHFlL2NvbW1lbnQvbTE5a3hnbi8/dXRtX3NvdXJjZT1zaGFyZSZ1dG1fbWVkaXVtPXdlYjN4JnV0bV9uYW1lPXdlYjN4Y3NzJnV0bV90ZXJtPTEmdXRtX2NvbnRlbnQ9c2hhcmVfYnV0dG9uXG4gICAgZXJyb3JUb05pY2VTdHJpbmcoZXJyb3IpLFxuICAgIC4uLmV4dHJhQXJncyxcbiAgICBcIlxceDFCWzBtXCJcbiAgKTtcbn0pO1xucmVnaXN0ZXJFcnJvclNpbmsoKGxvY2F0aW9uLCBlcnJvciwgLi4uZXh0cmFBcmdzKSA9PiB7XG4gIGdsb2JhbFZhci5zdGFja0NhcHR1cmVkRXJyb3JzID0gZ2xvYmFsVmFyLnN0YWNrQ2FwdHVyZWRFcnJvcnMgPz8gW107XG4gIGdsb2JhbFZhci5zdGFja0NhcHR1cmVkRXJyb3JzLnB1c2goeyBsb2NhdGlvbiwgZXJyb3IsIGV4dHJhQXJncyB9KTtcbn0pO1xuZnVuY3Rpb24gY2FwdHVyZUVycm9yKGxvY2F0aW9uLCBlcnJvcikge1xuICBmb3IgKGNvbnN0IHNpbmsgb2YgZXJyb3JTaW5rcykge1xuICAgIHNpbmsoXG4gICAgICBsb2NhdGlvbixcbiAgICAgIGVycm9yLFxuICAgICAgLi4uZXJyb3IgJiYgKHR5cGVvZiBlcnJvciA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZXJyb3IgPT09IFwiZnVuY3Rpb25cIikgJiYgXCJjdXN0b21DYXB0dXJlRXh0cmFBcmdzXCIgaW4gZXJyb3IgJiYgQXJyYXkuaXNBcnJheShlcnJvci5jdXN0b21DYXB0dXJlRXh0cmFBcmdzKSA/IGVycm9yLmN1c3RvbUNhcHR1cmVFeHRyYUFyZ3MgOiBbXVxuICAgICk7XG4gIH1cbn1cbnZhciBTdGF0dXNFcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihzdGF0dXMsIG1lc3NhZ2UpIHtcbiAgICBpZiAodHlwZW9mIHN0YXR1cyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgbWVzc2FnZSA/Pz0gc3RhdHVzLm1lc3NhZ2U7XG4gICAgICBzdGF0dXMgPSBzdGF0dXMuc3RhdHVzQ29kZTtcbiAgICB9XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5fX3N0YWNrU3RhdHVzRXJyb3JCcmFuZCA9IFwic3RhY2stc3RhdHVzLWVycm9yLWJyYW5kLXNlbnRpbmVsXCI7XG4gICAgdGhpcy5uYW1lID0gXCJTdGF0dXNFcnJvclwiO1xuICAgIHRoaXMuc3RhdHVzQ29kZSA9IHN0YXR1cztcbiAgICBpZiAoIW1lc3NhZ2UpIHtcbiAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiU3RhdHVzRXJyb3IgYWx3YXlzIHJlcXVpcmVzIGEgbWVzc2FnZSB1bmxlc3MgYSBTdGF0dXMgb2JqZWN0IGlzIHBhc3NlZFwiLCB7IGNhdXNlOiB0aGlzIH0pO1xuICAgIH1cbiAgfVxuICBzdGF0aWMgaXNTdGF0dXNFcnJvcihlcnJvcikge1xuICAgIHJldHVybiB0eXBlb2YgZXJyb3IgPT09IFwib2JqZWN0XCIgJiYgZXJyb3IgIT09IG51bGwgJiYgXCJfX3N0YWNrU3RhdHVzRXJyb3JCcmFuZFwiIGluIGVycm9yICYmIGVycm9yLl9fc3RhY2tTdGF0dXNFcnJvckJyYW5kID09PSBcInN0YWNrLXN0YXR1cy1lcnJvci1icmFuZC1zZW50aW5lbFwiO1xuICB9XG4gIGlzQ2xpZW50RXJyb3IoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdHVzQ29kZSA+PSA0MDAgJiYgdGhpcy5zdGF0dXNDb2RlIDwgNTAwO1xuICB9XG4gIGlzU2VydmVyRXJyb3IoKSB7XG4gICAgcmV0dXJuICF0aGlzLmlzQ2xpZW50RXJyb3IoKTtcbiAgfVxuICBnZXRTdGF0dXNDb2RlKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXR1c0NvZGU7XG4gIH1cbiAgZ2V0Qm9keSgpIHtcbiAgICByZXR1cm4gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHRoaXMubWVzc2FnZSk7XG4gIH1cbiAgZ2V0SGVhZGVycygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgXCJDb250ZW50LVR5cGVcIjogW1widGV4dC9wbGFpbjsgY2hhcnNldD11dGYtOFwiXVxuICAgIH07XG4gIH1cbiAgdG9EZXNjcmlwdGl2ZUpzb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1c19jb2RlOiB0aGlzLmdldFN0YXR1c0NvZGUoKSxcbiAgICAgIG1lc3NhZ2U6IHRoaXMubWVzc2FnZSxcbiAgICAgIGhlYWRlcnM6IHRoaXMuZ2V0SGVhZGVycygpXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgdGhpcyBpcyBub3QgYSBnb29kIHdheSB0byBtYWtlIHN0YXR1cyBlcnJvcnMgaHVtYW4tcmVhZGFibGUsIHVzZSB0b0Rlc2NyaXB0aXZlSnNvbiBpbnN0ZWFkXG4gICAqL1xuICB0b0h0dHBKc29uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXNfY29kZTogdGhpcy5zdGF0dXNDb2RlLFxuICAgICAgYm9keTogdGhpcy5tZXNzYWdlLFxuICAgICAgaGVhZGVyczogdGhpcy5nZXRIZWFkZXJzKClcbiAgICB9O1xuICB9XG59O1xuU3RhdHVzRXJyb3IuQmFkUmVxdWVzdCA9IHsgc3RhdHVzQ29kZTogNDAwLCBtZXNzYWdlOiBcIkJhZCBSZXF1ZXN0XCIgfTtcblN0YXR1c0Vycm9yLlVuYXV0aG9yaXplZCA9IHsgc3RhdHVzQ29kZTogNDAxLCBtZXNzYWdlOiBcIlVuYXV0aG9yaXplZFwiIH07XG5TdGF0dXNFcnJvci5QYXltZW50UmVxdWlyZWQgPSB7IHN0YXR1c0NvZGU6IDQwMiwgbWVzc2FnZTogXCJQYXltZW50IFJlcXVpcmVkXCIgfTtcblN0YXR1c0Vycm9yLkZvcmJpZGRlbiA9IHsgc3RhdHVzQ29kZTogNDAzLCBtZXNzYWdlOiBcIkZvcmJpZGRlblwiIH07XG5TdGF0dXNFcnJvci5Ob3RGb3VuZCA9IHsgc3RhdHVzQ29kZTogNDA0LCBtZXNzYWdlOiBcIk5vdCBGb3VuZFwiIH07XG5TdGF0dXNFcnJvci5NZXRob2ROb3RBbGxvd2VkID0geyBzdGF0dXNDb2RlOiA0MDUsIG1lc3NhZ2U6IFwiTWV0aG9kIE5vdCBBbGxvd2VkXCIgfTtcblN0YXR1c0Vycm9yLk5vdEFjY2VwdGFibGUgPSB7IHN0YXR1c0NvZGU6IDQwNiwgbWVzc2FnZTogXCJOb3QgQWNjZXB0YWJsZVwiIH07XG5TdGF0dXNFcnJvci5Qcm94eUF1dGhlbnRpY2F0aW9uUmVxdWlyZWQgPSB7IHN0YXR1c0NvZGU6IDQwNywgbWVzc2FnZTogXCJQcm94eSBBdXRoZW50aWNhdGlvbiBSZXF1aXJlZFwiIH07XG5TdGF0dXNFcnJvci5SZXF1ZXN0VGltZW91dCA9IHsgc3RhdHVzQ29kZTogNDA4LCBtZXNzYWdlOiBcIlJlcXVlc3QgVGltZW91dFwiIH07XG5TdGF0dXNFcnJvci5Db25mbGljdCA9IHsgc3RhdHVzQ29kZTogNDA5LCBtZXNzYWdlOiBcIkNvbmZsaWN0XCIgfTtcblN0YXR1c0Vycm9yLkdvbmUgPSB7IHN0YXR1c0NvZGU6IDQxMCwgbWVzc2FnZTogXCJHb25lXCIgfTtcblN0YXR1c0Vycm9yLkxlbmd0aFJlcXVpcmVkID0geyBzdGF0dXNDb2RlOiA0MTEsIG1lc3NhZ2U6IFwiTGVuZ3RoIFJlcXVpcmVkXCIgfTtcblN0YXR1c0Vycm9yLlByZWNvbmRpdGlvbkZhaWxlZCA9IHsgc3RhdHVzQ29kZTogNDEyLCBtZXNzYWdlOiBcIlByZWNvbmRpdGlvbiBGYWlsZWRcIiB9O1xuU3RhdHVzRXJyb3IuUGF5bG9hZFRvb0xhcmdlID0geyBzdGF0dXNDb2RlOiA0MTMsIG1lc3NhZ2U6IFwiUGF5bG9hZCBUb28gTGFyZ2VcIiB9O1xuU3RhdHVzRXJyb3IuVVJJVG9vTG9uZyA9IHsgc3RhdHVzQ29kZTogNDE0LCBtZXNzYWdlOiBcIlVSSSBUb28gTG9uZ1wiIH07XG5TdGF0dXNFcnJvci5VbnN1cHBvcnRlZE1lZGlhVHlwZSA9IHsgc3RhdHVzQ29kZTogNDE1LCBtZXNzYWdlOiBcIlVuc3VwcG9ydGVkIE1lZGlhIFR5cGVcIiB9O1xuU3RhdHVzRXJyb3IuUmFuZ2VOb3RTYXRpc2ZpYWJsZSA9IHsgc3RhdHVzQ29kZTogNDE2LCBtZXNzYWdlOiBcIlJhbmdlIE5vdCBTYXRpc2ZpYWJsZVwiIH07XG5TdGF0dXNFcnJvci5FeHBlY3RhdGlvbkZhaWxlZCA9IHsgc3RhdHVzQ29kZTogNDE3LCBtZXNzYWdlOiBcIkV4cGVjdGF0aW9uIEZhaWxlZFwiIH07XG5TdGF0dXNFcnJvci5JbUFUZWFwb3QgPSB7IHN0YXR1c0NvZGU6IDQxOCwgbWVzc2FnZTogXCJJJ20gYSB0ZWFwb3RcIiB9O1xuU3RhdHVzRXJyb3IuTWlzZGlyZWN0ZWRSZXF1ZXN0ID0geyBzdGF0dXNDb2RlOiA0MjEsIG1lc3NhZ2U6IFwiTWlzZGlyZWN0ZWQgUmVxdWVzdFwiIH07XG5TdGF0dXNFcnJvci5VbnByb2Nlc3NhYmxlRW50aXR5ID0geyBzdGF0dXNDb2RlOiA0MjIsIG1lc3NhZ2U6IFwiVW5wcm9jZXNzYWJsZSBFbnRpdHlcIiB9O1xuU3RhdHVzRXJyb3IuTG9ja2VkID0geyBzdGF0dXNDb2RlOiA0MjMsIG1lc3NhZ2U6IFwiTG9ja2VkXCIgfTtcblN0YXR1c0Vycm9yLkZhaWxlZERlcGVuZGVuY3kgPSB7IHN0YXR1c0NvZGU6IDQyNCwgbWVzc2FnZTogXCJGYWlsZWQgRGVwZW5kZW5jeVwiIH07XG5TdGF0dXNFcnJvci5Ub29FYXJseSA9IHsgc3RhdHVzQ29kZTogNDI1LCBtZXNzYWdlOiBcIlRvbyBFYXJseVwiIH07XG5TdGF0dXNFcnJvci5VcGdyYWRlUmVxdWlyZWQgPSB7IHN0YXR1c0NvZGU6IDQyNiwgbWVzc2FnZTogXCJVcGdyYWRlIFJlcXVpcmVkXCIgfTtcblN0YXR1c0Vycm9yLlByZWNvbmRpdGlvblJlcXVpcmVkID0geyBzdGF0dXNDb2RlOiA0MjgsIG1lc3NhZ2U6IFwiUHJlY29uZGl0aW9uIFJlcXVpcmVkXCIgfTtcblN0YXR1c0Vycm9yLlRvb01hbnlSZXF1ZXN0cyA9IHsgc3RhdHVzQ29kZTogNDI5LCBtZXNzYWdlOiBcIlRvbyBNYW55IFJlcXVlc3RzXCIgfTtcblN0YXR1c0Vycm9yLlJlcXVlc3RIZWFkZXJGaWVsZHNUb29MYXJnZSA9IHsgc3RhdHVzQ29kZTogNDMxLCBtZXNzYWdlOiBcIlJlcXVlc3QgSGVhZGVyIEZpZWxkcyBUb28gTGFyZ2VcIiB9O1xuU3RhdHVzRXJyb3IuVW5hdmFpbGFibGVGb3JMZWdhbFJlYXNvbnMgPSB7IHN0YXR1c0NvZGU6IDQ1MSwgbWVzc2FnZTogXCJVbmF2YWlsYWJsZSBGb3IgTGVnYWwgUmVhc29uc1wiIH07XG5TdGF0dXNFcnJvci5JbnRlcm5hbFNlcnZlckVycm9yID0geyBzdGF0dXNDb2RlOiA1MDAsIG1lc3NhZ2U6IFwiSW50ZXJuYWwgU2VydmVyIEVycm9yXCIgfTtcblN0YXR1c0Vycm9yLk5vdEltcGxlbWVudGVkID0geyBzdGF0dXNDb2RlOiA1MDEsIG1lc3NhZ2U6IFwiTm90IEltcGxlbWVudGVkXCIgfTtcblN0YXR1c0Vycm9yLkJhZEdhdGV3YXkgPSB7IHN0YXR1c0NvZGU6IDUwMiwgbWVzc2FnZTogXCJCYWQgR2F0ZXdheVwiIH07XG5TdGF0dXNFcnJvci5TZXJ2aWNlVW5hdmFpbGFibGUgPSB7IHN0YXR1c0NvZGU6IDUwMywgbWVzc2FnZTogXCJTZXJ2aWNlIFVuYXZhaWxhYmxlXCIgfTtcblN0YXR1c0Vycm9yLkdhdGV3YXlUaW1lb3V0ID0geyBzdGF0dXNDb2RlOiA1MDQsIG1lc3NhZ2U6IFwiR2F0ZXdheSBUaW1lb3V0XCIgfTtcblN0YXR1c0Vycm9yLkhUVFBWZXJzaW9uTm90U3VwcG9ydGVkID0geyBzdGF0dXNDb2RlOiA1MDUsIG1lc3NhZ2U6IFwiSFRUUCBWZXJzaW9uIE5vdCBTdXBwb3J0ZWRcIiB9O1xuU3RhdHVzRXJyb3IuVmFyaWFudEFsc29OZWdvdGlhdGVzID0geyBzdGF0dXNDb2RlOiA1MDYsIG1lc3NhZ2U6IFwiVmFyaWFudCBBbHNvIE5lZ290aWF0ZXNcIiB9O1xuU3RhdHVzRXJyb3IuSW5zdWZmaWNpZW50U3RvcmFnZSA9IHsgc3RhdHVzQ29kZTogNTA3LCBtZXNzYWdlOiBcIkluc3VmZmljaWVudCBTdG9yYWdlXCIgfTtcblN0YXR1c0Vycm9yLkxvb3BEZXRlY3RlZCA9IHsgc3RhdHVzQ29kZTogNTA4LCBtZXNzYWdlOiBcIkxvb3AgRGV0ZWN0ZWRcIiB9O1xuU3RhdHVzRXJyb3IuTm90RXh0ZW5kZWQgPSB7IHN0YXR1c0NvZGU6IDUxMCwgbWVzc2FnZTogXCJOb3QgRXh0ZW5kZWRcIiB9O1xuU3RhdHVzRXJyb3IuTmV0d29ya0F1dGhlbnRpY2F0aW9uUmVxdWlyZWQgPSB7IHN0YXR1c0NvZGU6IDUxMSwgbWVzc2FnZTogXCJOZXR3b3JrIEF1dGhlbnRpY2F0aW9uIFJlcXVpcmVkXCIgfTtcblN0YXR1c0Vycm9yLnByb3RvdHlwZS5uYW1lID0gXCJTdGF0dXNFcnJvclwiO1xuZXhwb3J0IHtcbiAgU3RhY2tBc3NlcnRpb25FcnJvcixcbiAgU3RhdHVzRXJyb3IsXG4gIGNhcHR1cmVFcnJvcixcbiAgY29uY2F0U3RhY2t0cmFjZXMsXG4gIGVycm9yVG9OaWNlU3RyaW5nLFxuICByZWdpc3RlckVycm9yU2luayxcbiAgdGhyb3dFcnJcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcnJvcnMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/functions.js":
/*!***********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/functions.js ***!
  \***********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   identity: () => (/* binding */ identity),\n/* harmony export */   identityArgs: () => (/* binding */ identityArgs)\n/* harmony export */ });\n// src/utils/functions.tsx\nfunction identity(t) {\n  return t;\n}\nfunction identityArgs(...args) {\n  return args;\n}\n\n//# sourceMappingURL=functions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvZnVuY3Rpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS91dGlscy9mdW5jdGlvbnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3V0aWxzL2Z1bmN0aW9ucy50c3hcbmZ1bmN0aW9uIGlkZW50aXR5KHQpIHtcbiAgcmV0dXJuIHQ7XG59XG5mdW5jdGlvbiBpZGVudGl0eUFyZ3MoLi4uYXJncykge1xuICByZXR1cm4gYXJncztcbn1cbmV4cG9ydCB7XG4gIGlkZW50aXR5LFxuICBpZGVudGl0eUFyZ3Ncbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mdW5jdGlvbnMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/functions.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/globals.js":
/*!*********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/globals.js ***!
  \*********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createGlobal: () => (/* binding */ createGlobal),\n/* harmony export */   globalVar: () => (/* binding */ globalVar)\n/* harmony export */ });\n// src/utils/globals.tsx\nvar globalVar = typeof globalThis !== \"undefined\" ? globalThis : typeof global !== \"undefined\" ? global : typeof window !== \"undefined\" ? window : typeof self !== \"undefined\" ? self : {};\nif (typeof globalThis === \"undefined\") {\n  globalVar.globalThis = globalVar;\n}\nvar stackGlobalsSymbol = Symbol.for(\"__stack-globals\");\nglobalVar[stackGlobalsSymbol] ??= {};\nfunction createGlobal(key, init) {\n  if (!globalVar[stackGlobalsSymbol][key]) {\n    globalVar[stackGlobalsSymbol][key] = init();\n  }\n  return globalVar[stackGlobalsSymbol][key];\n}\n\n//# sourceMappingURL=globals.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvZ2xvYmFscy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2dmeDJlZGVub2FzaXMvRG93bmxvYWRzL0RldmVsb3BtZW50L0VzcGFkYS9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvZ2xvYmFscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvZ2xvYmFscy50c3hcbnZhciBnbG9iYWxWYXIgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbFRoaXMgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHt9O1xuaWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSBcInVuZGVmaW5lZFwiKSB7XG4gIGdsb2JhbFZhci5nbG9iYWxUaGlzID0gZ2xvYmFsVmFyO1xufVxudmFyIHN0YWNrR2xvYmFsc1N5bWJvbCA9IFN5bWJvbC5mb3IoXCJfX3N0YWNrLWdsb2JhbHNcIik7XG5nbG9iYWxWYXJbc3RhY2tHbG9iYWxzU3ltYm9sXSA/Pz0ge307XG5mdW5jdGlvbiBjcmVhdGVHbG9iYWwoa2V5LCBpbml0KSB7XG4gIGlmICghZ2xvYmFsVmFyW3N0YWNrR2xvYmFsc1N5bWJvbF1ba2V5XSkge1xuICAgIGdsb2JhbFZhcltzdGFja0dsb2JhbHNTeW1ib2xdW2tleV0gPSBpbml0KCk7XG4gIH1cbiAgcmV0dXJuIGdsb2JhbFZhcltzdGFja0dsb2JhbHNTeW1ib2xdW2tleV07XG59XG5leHBvcnQge1xuICBjcmVhdGVHbG9iYWwsXG4gIGdsb2JhbFZhclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdsb2JhbHMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/globals.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/http.js":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/http.js ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HTTP_METHODS: () => (/* binding */ HTTP_METHODS),\n/* harmony export */   decodeBasicAuthorizationHeader: () => (/* binding */ decodeBasicAuthorizationHeader),\n/* harmony export */   encodeBasicAuthorizationHeader: () => (/* binding */ encodeBasicAuthorizationHeader)\n/* harmony export */ });\n/* harmony import */ var _bytes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bytes.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/bytes.js\");\n// src/utils/http.tsx\n\nvar HTTP_METHODS = {\n  \"GET\": {\n    safe: true,\n    idempotent: true\n  },\n  \"POST\": {\n    safe: false,\n    idempotent: false\n  },\n  \"PUT\": {\n    safe: false,\n    idempotent: true\n  },\n  \"DELETE\": {\n    safe: false,\n    idempotent: true\n  },\n  \"PATCH\": {\n    safe: false,\n    idempotent: false\n  },\n  \"OPTIONS\": {\n    safe: true,\n    idempotent: true\n  },\n  \"HEAD\": {\n    safe: true,\n    idempotent: true\n  },\n  \"TRACE\": {\n    safe: true,\n    idempotent: true\n  },\n  \"CONNECT\": {\n    safe: false,\n    idempotent: false\n  }\n};\nfunction decodeBasicAuthorizationHeader(value) {\n  const [type, encoded, ...rest] = value.split(\" \");\n  if (rest.length > 0) return null;\n  if (!encoded) return null;\n  if (type !== \"Basic\") return null;\n  if (!(0,_bytes_js__WEBPACK_IMPORTED_MODULE_0__.isBase64)(encoded)) return null;\n  const decoded = new TextDecoder().decode((0,_bytes_js__WEBPACK_IMPORTED_MODULE_0__.decodeBase64)(encoded));\n  const split = decoded.split(\":\");\n  return [split[0], split.slice(1).join(\":\")];\n}\nfunction encodeBasicAuthorizationHeader(id, password) {\n  if (id.includes(\":\")) throw new Error(\"Basic authorization header id cannot contain ':'\");\n  return `Basic ${(0,_bytes_js__WEBPACK_IMPORTED_MODULE_0__.encodeBase64)(new TextEncoder().encode(`${id}:${password}`))}`;\n}\n\n//# sourceMappingURL=http.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvaHR0cC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDa0U7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxtREFBUTtBQUNmLDJDQUEyQyx1REFBWTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVEQUFZLDZCQUE2QixHQUFHLEdBQUcsU0FBUyxJQUFJO0FBQzlFO0FBS0U7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2dmeDJlZGVub2FzaXMvRG93bmxvYWRzL0RldmVsb3BtZW50L0VzcGFkYS9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvaHR0cC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvaHR0cC50c3hcbmltcG9ydCB7IGRlY29kZUJhc2U2NCwgZW5jb2RlQmFzZTY0LCBpc0Jhc2U2NCB9IGZyb20gXCIuL2J5dGVzLmpzXCI7XG52YXIgSFRUUF9NRVRIT0RTID0ge1xuICBcIkdFVFwiOiB7XG4gICAgc2FmZTogdHJ1ZSxcbiAgICBpZGVtcG90ZW50OiB0cnVlXG4gIH0sXG4gIFwiUE9TVFwiOiB7XG4gICAgc2FmZTogZmFsc2UsXG4gICAgaWRlbXBvdGVudDogZmFsc2VcbiAgfSxcbiAgXCJQVVRcIjoge1xuICAgIHNhZmU6IGZhbHNlLFxuICAgIGlkZW1wb3RlbnQ6IHRydWVcbiAgfSxcbiAgXCJERUxFVEVcIjoge1xuICAgIHNhZmU6IGZhbHNlLFxuICAgIGlkZW1wb3RlbnQ6IHRydWVcbiAgfSxcbiAgXCJQQVRDSFwiOiB7XG4gICAgc2FmZTogZmFsc2UsXG4gICAgaWRlbXBvdGVudDogZmFsc2VcbiAgfSxcbiAgXCJPUFRJT05TXCI6IHtcbiAgICBzYWZlOiB0cnVlLFxuICAgIGlkZW1wb3RlbnQ6IHRydWVcbiAgfSxcbiAgXCJIRUFEXCI6IHtcbiAgICBzYWZlOiB0cnVlLFxuICAgIGlkZW1wb3RlbnQ6IHRydWVcbiAgfSxcbiAgXCJUUkFDRVwiOiB7XG4gICAgc2FmZTogdHJ1ZSxcbiAgICBpZGVtcG90ZW50OiB0cnVlXG4gIH0sXG4gIFwiQ09OTkVDVFwiOiB7XG4gICAgc2FmZTogZmFsc2UsXG4gICAgaWRlbXBvdGVudDogZmFsc2VcbiAgfVxufTtcbmZ1bmN0aW9uIGRlY29kZUJhc2ljQXV0aG9yaXphdGlvbkhlYWRlcih2YWx1ZSkge1xuICBjb25zdCBbdHlwZSwgZW5jb2RlZCwgLi4ucmVzdF0gPSB2YWx1ZS5zcGxpdChcIiBcIik7XG4gIGlmIChyZXN0Lmxlbmd0aCA+IDApIHJldHVybiBudWxsO1xuICBpZiAoIWVuY29kZWQpIHJldHVybiBudWxsO1xuICBpZiAodHlwZSAhPT0gXCJCYXNpY1wiKSByZXR1cm4gbnVsbDtcbiAgaWYgKCFpc0Jhc2U2NChlbmNvZGVkKSkgcmV0dXJuIG51bGw7XG4gIGNvbnN0IGRlY29kZWQgPSBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoZGVjb2RlQmFzZTY0KGVuY29kZWQpKTtcbiAgY29uc3Qgc3BsaXQgPSBkZWNvZGVkLnNwbGl0KFwiOlwiKTtcbiAgcmV0dXJuIFtzcGxpdFswXSwgc3BsaXQuc2xpY2UoMSkuam9pbihcIjpcIildO1xufVxuZnVuY3Rpb24gZW5jb2RlQmFzaWNBdXRob3JpemF0aW9uSGVhZGVyKGlkLCBwYXNzd29yZCkge1xuICBpZiAoaWQuaW5jbHVkZXMoXCI6XCIpKSB0aHJvdyBuZXcgRXJyb3IoXCJCYXNpYyBhdXRob3JpemF0aW9uIGhlYWRlciBpZCBjYW5ub3QgY29udGFpbiAnOidcIik7XG4gIHJldHVybiBgQmFzaWMgJHtlbmNvZGVCYXNlNjQobmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGAke2lkfToke3Bhc3N3b3JkfWApKX1gO1xufVxuZXhwb3J0IHtcbiAgSFRUUF9NRVRIT0RTLFxuICBkZWNvZGVCYXNpY0F1dGhvcml6YXRpb25IZWFkZXIsXG4gIGVuY29kZUJhc2ljQXV0aG9yaXphdGlvbkhlYWRlclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWh0dHAuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/http.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/locks.js":
/*!*******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/locks.js ***!
  \*******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ReadWriteLock: () => (/* binding */ ReadWriteLock)\n/* harmony export */ });\n/* harmony import */ var async_mutex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! async-mutex */ \"(rsc)/./node_modules/.pnpm/async-mutex@0.5.0/node_modules/async-mutex/index.mjs\");\n// src/utils/locks.tsx\n\nvar ReadWriteLock = class {\n  constructor() {\n    this.semaphore = new async_mutex__WEBPACK_IMPORTED_MODULE_0__.Semaphore(1);\n    this.readers = 0;\n    this.readersMutex = new async_mutex__WEBPACK_IMPORTED_MODULE_0__.Semaphore(1);\n  }\n  async withReadLock(callback) {\n    await this._acquireReadLock();\n    try {\n      return await callback();\n    } finally {\n      await this._releaseReadLock();\n    }\n  }\n  async withWriteLock(callback) {\n    await this._acquireWriteLock();\n    try {\n      return await callback();\n    } finally {\n      await this._releaseWriteLock();\n    }\n  }\n  async _acquireReadLock() {\n    await this.readersMutex.acquire();\n    try {\n      this.readers += 1;\n      if (this.readers === 1) {\n        await this.semaphore.acquire();\n      }\n    } finally {\n      this.readersMutex.release();\n    }\n  }\n  async _releaseReadLock() {\n    await this.readersMutex.acquire();\n    try {\n      this.readers -= 1;\n      if (this.readers === 0) {\n        this.semaphore.release();\n      }\n    } finally {\n      this.readersMutex.release();\n    }\n  }\n  async _acquireWriteLock() {\n    await this.semaphore.acquire();\n  }\n  async _releaseWriteLock() {\n    this.semaphore.release();\n  }\n};\n\n//# sourceMappingURL=locks.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvbG9ja3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUN3QztBQUN4QztBQUNBO0FBQ0EseUJBQXlCLGtEQUFTO0FBQ2xDO0FBQ0EsNEJBQTRCLGtEQUFTO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS91dGlscy9sb2Nrcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvbG9ja3MudHN4XG5pbXBvcnQgeyBTZW1hcGhvcmUgfSBmcm9tIFwiYXN5bmMtbXV0ZXhcIjtcbnZhciBSZWFkV3JpdGVMb2NrID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnNlbWFwaG9yZSA9IG5ldyBTZW1hcGhvcmUoMSk7XG4gICAgdGhpcy5yZWFkZXJzID0gMDtcbiAgICB0aGlzLnJlYWRlcnNNdXRleCA9IG5ldyBTZW1hcGhvcmUoMSk7XG4gIH1cbiAgYXN5bmMgd2l0aFJlYWRMb2NrKGNhbGxiYWNrKSB7XG4gICAgYXdhaXQgdGhpcy5fYWNxdWlyZVJlYWRMb2NrKCk7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCBjYWxsYmFjaygpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBhd2FpdCB0aGlzLl9yZWxlYXNlUmVhZExvY2soKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgd2l0aFdyaXRlTG9jayhjYWxsYmFjaykge1xuICAgIGF3YWl0IHRoaXMuX2FjcXVpcmVXcml0ZUxvY2soKTtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IGNhbGxiYWNrKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGF3YWl0IHRoaXMuX3JlbGVhc2VXcml0ZUxvY2soKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgX2FjcXVpcmVSZWFkTG9jaygpIHtcbiAgICBhd2FpdCB0aGlzLnJlYWRlcnNNdXRleC5hY3F1aXJlKCk7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMucmVhZGVycyArPSAxO1xuICAgICAgaWYgKHRoaXMucmVhZGVycyA9PT0gMSkge1xuICAgICAgICBhd2FpdCB0aGlzLnNlbWFwaG9yZS5hY3F1aXJlKCk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMucmVhZGVyc011dGV4LnJlbGVhc2UoKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgX3JlbGVhc2VSZWFkTG9jaygpIHtcbiAgICBhd2FpdCB0aGlzLnJlYWRlcnNNdXRleC5hY3F1aXJlKCk7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMucmVhZGVycyAtPSAxO1xuICAgICAgaWYgKHRoaXMucmVhZGVycyA9PT0gMCkge1xuICAgICAgICB0aGlzLnNlbWFwaG9yZS5yZWxlYXNlKCk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMucmVhZGVyc011dGV4LnJlbGVhc2UoKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgX2FjcXVpcmVXcml0ZUxvY2soKSB7XG4gICAgYXdhaXQgdGhpcy5zZW1hcGhvcmUuYWNxdWlyZSgpO1xuICB9XG4gIGFzeW5jIF9yZWxlYXNlV3JpdGVMb2NrKCkge1xuICAgIHRoaXMuc2VtYXBob3JlLnJlbGVhc2UoKTtcbiAgfVxufTtcbmV4cG9ydCB7XG4gIFJlYWRXcml0ZUxvY2tcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2Nrcy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/locks.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/maps.js":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/maps.js ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DependenciesMap: () => (/* binding */ DependenciesMap),\n/* harmony export */   IterableWeakMap: () => (/* binding */ IterableWeakMap),\n/* harmony export */   MaybeWeakMap: () => (/* binding */ MaybeWeakMap),\n/* harmony export */   WeakRefIfAvailable: () => (/* binding */ WeakRefIfAvailable)\n/* harmony export */ });\n/* harmony import */ var _results_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./results.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/results.js\");\n// src/utils/maps.tsx\n\nvar WeakRefIfAvailable = class {\n  constructor(value) {\n    if (typeof WeakRef === \"undefined\") {\n      this._ref = { deref: () => value };\n    } else {\n      this._ref = new WeakRef(value);\n    }\n  }\n  deref() {\n    return this._ref.deref();\n  }\n};\nvar _a, _b;\nvar IterableWeakMap = class {\n  constructor(entries) {\n    this[_a] = \"IterableWeakMap\";\n    const mappedEntries = entries?.map((e) => [e[0], { value: e[1], keyRef: new WeakRefIfAvailable(e[0]) }]);\n    this._weakMap = new WeakMap(mappedEntries ?? []);\n    this._keyRefs = new Set(mappedEntries?.map((e) => e[1].keyRef) ?? []);\n  }\n  get(key) {\n    return this._weakMap.get(key)?.value;\n  }\n  set(key, value) {\n    const existing = this._weakMap.get(key);\n    const updated = { value, keyRef: existing?.keyRef ?? new WeakRefIfAvailable(key) };\n    this._weakMap.set(key, updated);\n    this._keyRefs.add(updated.keyRef);\n    return this;\n  }\n  delete(key) {\n    const res = this._weakMap.get(key);\n    if (res) {\n      this._weakMap.delete(key);\n      this._keyRefs.delete(res.keyRef);\n      return true;\n    }\n    return false;\n  }\n  has(key) {\n    return this._weakMap.has(key) && this._keyRefs.has(this._weakMap.get(key).keyRef);\n  }\n  *[(_b = Symbol.iterator, _a = Symbol.toStringTag, _b)]() {\n    for (const keyRef of this._keyRefs) {\n      const key = keyRef.deref();\n      const existing = key ? this._weakMap.get(key) : void 0;\n      if (!key) {\n        this._keyRefs.delete(keyRef);\n      } else if (existing) {\n        yield [key, existing.value];\n      }\n    }\n  }\n};\nvar _a2, _b2;\nvar MaybeWeakMap = class {\n  constructor(entries) {\n    this[_a2] = \"MaybeWeakMap\";\n    const entriesArray = [...entries ?? []];\n    this._primitiveMap = new Map(entriesArray.filter((e) => !this._isAllowedInWeakMap(e[0])));\n    this._weakMap = new IterableWeakMap(entriesArray.filter((e) => this._isAllowedInWeakMap(e[0])));\n  }\n  _isAllowedInWeakMap(key) {\n    return typeof key === \"object\" && key !== null || typeof key === \"symbol\" && Symbol.keyFor(key) === void 0;\n  }\n  get(key) {\n    if (this._isAllowedInWeakMap(key)) {\n      return this._weakMap.get(key);\n    } else {\n      return this._primitiveMap.get(key);\n    }\n  }\n  set(key, value) {\n    if (this._isAllowedInWeakMap(key)) {\n      this._weakMap.set(key, value);\n    } else {\n      this._primitiveMap.set(key, value);\n    }\n    return this;\n  }\n  delete(key) {\n    if (this._isAllowedInWeakMap(key)) {\n      return this._weakMap.delete(key);\n    } else {\n      return this._primitiveMap.delete(key);\n    }\n  }\n  has(key) {\n    if (this._isAllowedInWeakMap(key)) {\n      return this._weakMap.has(key);\n    } else {\n      return this._primitiveMap.has(key);\n    }\n  }\n  *[(_b2 = Symbol.iterator, _a2 = Symbol.toStringTag, _b2)]() {\n    yield* this._primitiveMap;\n    yield* this._weakMap;\n  }\n};\nvar _a3, _b3;\nvar DependenciesMap = class {\n  constructor() {\n    this._inner = { map: new MaybeWeakMap(), hasValue: false, value: void 0 };\n    this[_a3] = \"DependenciesMap\";\n  }\n  _valueToResult(inner) {\n    if (inner.hasValue) {\n      return _results_js__WEBPACK_IMPORTED_MODULE_0__.Result.ok(inner.value);\n    } else {\n      return _results_js__WEBPACK_IMPORTED_MODULE_0__.Result.error(void 0);\n    }\n  }\n  _unwrapFromInner(dependencies, inner) {\n    if (dependencies.length === 0) {\n      return this._valueToResult(inner);\n    } else {\n      const [key, ...rest] = dependencies;\n      const newInner = inner.map.get(key);\n      if (!newInner) {\n        return _results_js__WEBPACK_IMPORTED_MODULE_0__.Result.error(void 0);\n      }\n      return this._unwrapFromInner(rest, newInner);\n    }\n  }\n  _setInInner(dependencies, value, inner) {\n    if (dependencies.length === 0) {\n      const res = this._valueToResult(inner);\n      if (value.status === \"ok\") {\n        inner.hasValue = true;\n        inner.value = value.data;\n      } else {\n        inner.hasValue = false;\n        inner.value = void 0;\n      }\n      return res;\n    } else {\n      const [key, ...rest] = dependencies;\n      let newInner = inner.map.get(key);\n      if (!newInner) {\n        inner.map.set(key, newInner = { map: new MaybeWeakMap(), hasValue: false, value: void 0 });\n      }\n      return this._setInInner(rest, value, newInner);\n    }\n  }\n  *_iterateInner(dependencies, inner) {\n    if (inner.hasValue) {\n      yield [dependencies, inner.value];\n    }\n    for (const [key, value] of inner.map) {\n      yield* this._iterateInner([...dependencies, key], value);\n    }\n  }\n  get(dependencies) {\n    return _results_js__WEBPACK_IMPORTED_MODULE_0__.Result.or(this._unwrapFromInner(dependencies, this._inner), void 0);\n  }\n  set(dependencies, value) {\n    this._setInInner(dependencies, _results_js__WEBPACK_IMPORTED_MODULE_0__.Result.ok(value), this._inner);\n    return this;\n  }\n  delete(dependencies) {\n    return this._setInInner(dependencies, _results_js__WEBPACK_IMPORTED_MODULE_0__.Result.error(void 0), this._inner).status === \"ok\";\n  }\n  has(dependencies) {\n    return this._unwrapFromInner(dependencies, this._inner).status === \"ok\";\n  }\n  clear() {\n    this._inner = { map: new MaybeWeakMap(), hasValue: false, value: void 0 };\n  }\n  *[(_b3 = Symbol.iterator, _a3 = Symbol.toStringTag, _b3)]() {\n    yield* this._iterateInner([], this._inner);\n  }\n};\n\n//# sourceMappingURL=maps.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvbWFwcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ3NDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQixNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCxtREFBbUQ7QUFDMUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLCtDQUFNO0FBQ25CLE1BQU07QUFDTixhQUFhLCtDQUFNO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsZUFBZSwrQ0FBTTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MseURBQXlEO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywrQ0FBTTtBQUNqQjtBQUNBO0FBQ0EsbUNBQW1DLCtDQUFNO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQywrQ0FBTTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS91dGlscy9tYXBzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy9tYXBzLnRzeFxuaW1wb3J0IHsgUmVzdWx0IH0gZnJvbSBcIi4vcmVzdWx0cy5qc1wiO1xudmFyIFdlYWtSZWZJZkF2YWlsYWJsZSA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIFdlYWtSZWYgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRoaXMuX3JlZiA9IHsgZGVyZWY6ICgpID0+IHZhbHVlIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3JlZiA9IG5ldyBXZWFrUmVmKHZhbHVlKTtcbiAgICB9XG4gIH1cbiAgZGVyZWYoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlZi5kZXJlZigpO1xuICB9XG59O1xudmFyIF9hLCBfYjtcbnZhciBJdGVyYWJsZVdlYWtNYXAgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGVudHJpZXMpIHtcbiAgICB0aGlzW19hXSA9IFwiSXRlcmFibGVXZWFrTWFwXCI7XG4gICAgY29uc3QgbWFwcGVkRW50cmllcyA9IGVudHJpZXM/Lm1hcCgoZSkgPT4gW2VbMF0sIHsgdmFsdWU6IGVbMV0sIGtleVJlZjogbmV3IFdlYWtSZWZJZkF2YWlsYWJsZShlWzBdKSB9XSk7XG4gICAgdGhpcy5fd2Vha01hcCA9IG5ldyBXZWFrTWFwKG1hcHBlZEVudHJpZXMgPz8gW10pO1xuICAgIHRoaXMuX2tleVJlZnMgPSBuZXcgU2V0KG1hcHBlZEVudHJpZXM/Lm1hcCgoZSkgPT4gZVsxXS5rZXlSZWYpID8/IFtdKTtcbiAgfVxuICBnZXQoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuX3dlYWtNYXAuZ2V0KGtleSk/LnZhbHVlO1xuICB9XG4gIHNldChrZXksIHZhbHVlKSB7XG4gICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLl93ZWFrTWFwLmdldChrZXkpO1xuICAgIGNvbnN0IHVwZGF0ZWQgPSB7IHZhbHVlLCBrZXlSZWY6IGV4aXN0aW5nPy5rZXlSZWYgPz8gbmV3IFdlYWtSZWZJZkF2YWlsYWJsZShrZXkpIH07XG4gICAgdGhpcy5fd2Vha01hcC5zZXQoa2V5LCB1cGRhdGVkKTtcbiAgICB0aGlzLl9rZXlSZWZzLmFkZCh1cGRhdGVkLmtleVJlZik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZGVsZXRlKGtleSkge1xuICAgIGNvbnN0IHJlcyA9IHRoaXMuX3dlYWtNYXAuZ2V0KGtleSk7XG4gICAgaWYgKHJlcykge1xuICAgICAgdGhpcy5fd2Vha01hcC5kZWxldGUoa2V5KTtcbiAgICAgIHRoaXMuX2tleVJlZnMuZGVsZXRlKHJlcy5rZXlSZWYpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBoYXMoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuX3dlYWtNYXAuaGFzKGtleSkgJiYgdGhpcy5fa2V5UmVmcy5oYXModGhpcy5fd2Vha01hcC5nZXQoa2V5KS5rZXlSZWYpO1xuICB9XG4gICpbKF9iID0gU3ltYm9sLml0ZXJhdG9yLCBfYSA9IFN5bWJvbC50b1N0cmluZ1RhZywgX2IpXSgpIHtcbiAgICBmb3IgKGNvbnN0IGtleVJlZiBvZiB0aGlzLl9rZXlSZWZzKSB7XG4gICAgICBjb25zdCBrZXkgPSBrZXlSZWYuZGVyZWYoKTtcbiAgICAgIGNvbnN0IGV4aXN0aW5nID0ga2V5ID8gdGhpcy5fd2Vha01hcC5nZXQoa2V5KSA6IHZvaWQgMDtcbiAgICAgIGlmICgha2V5KSB7XG4gICAgICAgIHRoaXMuX2tleVJlZnMuZGVsZXRlKGtleVJlZik7XG4gICAgICB9IGVsc2UgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgIHlpZWxkIFtrZXksIGV4aXN0aW5nLnZhbHVlXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG52YXIgX2EyLCBfYjI7XG52YXIgTWF5YmVXZWFrTWFwID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihlbnRyaWVzKSB7XG4gICAgdGhpc1tfYTJdID0gXCJNYXliZVdlYWtNYXBcIjtcbiAgICBjb25zdCBlbnRyaWVzQXJyYXkgPSBbLi4uZW50cmllcyA/PyBbXV07XG4gICAgdGhpcy5fcHJpbWl0aXZlTWFwID0gbmV3IE1hcChlbnRyaWVzQXJyYXkuZmlsdGVyKChlKSA9PiAhdGhpcy5faXNBbGxvd2VkSW5XZWFrTWFwKGVbMF0pKSk7XG4gICAgdGhpcy5fd2Vha01hcCA9IG5ldyBJdGVyYWJsZVdlYWtNYXAoZW50cmllc0FycmF5LmZpbHRlcigoZSkgPT4gdGhpcy5faXNBbGxvd2VkSW5XZWFrTWFwKGVbMF0pKSk7XG4gIH1cbiAgX2lzQWxsb3dlZEluV2Vha01hcChrZXkpIHtcbiAgICByZXR1cm4gdHlwZW9mIGtleSA9PT0gXCJvYmplY3RcIiAmJiBrZXkgIT09IG51bGwgfHwgdHlwZW9mIGtleSA9PT0gXCJzeW1ib2xcIiAmJiBTeW1ib2wua2V5Rm9yKGtleSkgPT09IHZvaWQgMDtcbiAgfVxuICBnZXQoa2V5KSB7XG4gICAgaWYgKHRoaXMuX2lzQWxsb3dlZEluV2Vha01hcChrZXkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5fd2Vha01hcC5nZXQoa2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuX3ByaW1pdGl2ZU1hcC5nZXQoa2V5KTtcbiAgICB9XG4gIH1cbiAgc2V0KGtleSwgdmFsdWUpIHtcbiAgICBpZiAodGhpcy5faXNBbGxvd2VkSW5XZWFrTWFwKGtleSkpIHtcbiAgICAgIHRoaXMuX3dlYWtNYXAuc2V0KGtleSwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9wcmltaXRpdmVNYXAuc2V0KGtleSwgdmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBkZWxldGUoa2V5KSB7XG4gICAgaWYgKHRoaXMuX2lzQWxsb3dlZEluV2Vha01hcChrZXkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5fd2Vha01hcC5kZWxldGUoa2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuX3ByaW1pdGl2ZU1hcC5kZWxldGUoa2V5KTtcbiAgICB9XG4gIH1cbiAgaGFzKGtleSkge1xuICAgIGlmICh0aGlzLl9pc0FsbG93ZWRJbldlYWtNYXAoa2V5KSkge1xuICAgICAgcmV0dXJuIHRoaXMuX3dlYWtNYXAuaGFzKGtleSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLl9wcmltaXRpdmVNYXAuaGFzKGtleSk7XG4gICAgfVxuICB9XG4gICpbKF9iMiA9IFN5bWJvbC5pdGVyYXRvciwgX2EyID0gU3ltYm9sLnRvU3RyaW5nVGFnLCBfYjIpXSgpIHtcbiAgICB5aWVsZCogdGhpcy5fcHJpbWl0aXZlTWFwO1xuICAgIHlpZWxkKiB0aGlzLl93ZWFrTWFwO1xuICB9XG59O1xudmFyIF9hMywgX2IzO1xudmFyIERlcGVuZGVuY2llc01hcCA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5faW5uZXIgPSB7IG1hcDogbmV3IE1heWJlV2Vha01hcCgpLCBoYXNWYWx1ZTogZmFsc2UsIHZhbHVlOiB2b2lkIDAgfTtcbiAgICB0aGlzW19hM10gPSBcIkRlcGVuZGVuY2llc01hcFwiO1xuICB9XG4gIF92YWx1ZVRvUmVzdWx0KGlubmVyKSB7XG4gICAgaWYgKGlubmVyLmhhc1ZhbHVlKSB7XG4gICAgICByZXR1cm4gUmVzdWx0Lm9rKGlubmVyLnZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcih2b2lkIDApO1xuICAgIH1cbiAgfVxuICBfdW53cmFwRnJvbUlubmVyKGRlcGVuZGVuY2llcywgaW5uZXIpIHtcbiAgICBpZiAoZGVwZW5kZW5jaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlVG9SZXN1bHQoaW5uZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBba2V5LCAuLi5yZXN0XSA9IGRlcGVuZGVuY2llcztcbiAgICAgIGNvbnN0IG5ld0lubmVyID0gaW5uZXIubWFwLmdldChrZXkpO1xuICAgICAgaWYgKCFuZXdJbm5lcikge1xuICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHZvaWQgMCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fdW53cmFwRnJvbUlubmVyKHJlc3QsIG5ld0lubmVyKTtcbiAgICB9XG4gIH1cbiAgX3NldEluSW5uZXIoZGVwZW5kZW5jaWVzLCB2YWx1ZSwgaW5uZXIpIHtcbiAgICBpZiAoZGVwZW5kZW5jaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3QgcmVzID0gdGhpcy5fdmFsdWVUb1Jlc3VsdChpbm5lcik7XG4gICAgICBpZiAodmFsdWUuc3RhdHVzID09PSBcIm9rXCIpIHtcbiAgICAgICAgaW5uZXIuaGFzVmFsdWUgPSB0cnVlO1xuICAgICAgICBpbm5lci52YWx1ZSA9IHZhbHVlLmRhdGE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbm5lci5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICBpbm5lci52YWx1ZSA9IHZvaWQgMDtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IFtrZXksIC4uLnJlc3RdID0gZGVwZW5kZW5jaWVzO1xuICAgICAgbGV0IG5ld0lubmVyID0gaW5uZXIubWFwLmdldChrZXkpO1xuICAgICAgaWYgKCFuZXdJbm5lcikge1xuICAgICAgICBpbm5lci5tYXAuc2V0KGtleSwgbmV3SW5uZXIgPSB7IG1hcDogbmV3IE1heWJlV2Vha01hcCgpLCBoYXNWYWx1ZTogZmFsc2UsIHZhbHVlOiB2b2lkIDAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fc2V0SW5Jbm5lcihyZXN0LCB2YWx1ZSwgbmV3SW5uZXIpO1xuICAgIH1cbiAgfVxuICAqX2l0ZXJhdGVJbm5lcihkZXBlbmRlbmNpZXMsIGlubmVyKSB7XG4gICAgaWYgKGlubmVyLmhhc1ZhbHVlKSB7XG4gICAgICB5aWVsZCBbZGVwZW5kZW5jaWVzLCBpbm5lci52YWx1ZV07XG4gICAgfVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGlubmVyLm1hcCkge1xuICAgICAgeWllbGQqIHRoaXMuX2l0ZXJhdGVJbm5lcihbLi4uZGVwZW5kZW5jaWVzLCBrZXldLCB2YWx1ZSk7XG4gICAgfVxuICB9XG4gIGdldChkZXBlbmRlbmNpZXMpIHtcbiAgICByZXR1cm4gUmVzdWx0Lm9yKHRoaXMuX3Vud3JhcEZyb21Jbm5lcihkZXBlbmRlbmNpZXMsIHRoaXMuX2lubmVyKSwgdm9pZCAwKTtcbiAgfVxuICBzZXQoZGVwZW5kZW5jaWVzLCB2YWx1ZSkge1xuICAgIHRoaXMuX3NldEluSW5uZXIoZGVwZW5kZW5jaWVzLCBSZXN1bHQub2sodmFsdWUpLCB0aGlzLl9pbm5lcik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZGVsZXRlKGRlcGVuZGVuY2llcykge1xuICAgIHJldHVybiB0aGlzLl9zZXRJbklubmVyKGRlcGVuZGVuY2llcywgUmVzdWx0LmVycm9yKHZvaWQgMCksIHRoaXMuX2lubmVyKS5zdGF0dXMgPT09IFwib2tcIjtcbiAgfVxuICBoYXMoZGVwZW5kZW5jaWVzKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Vud3JhcEZyb21Jbm5lcihkZXBlbmRlbmNpZXMsIHRoaXMuX2lubmVyKS5zdGF0dXMgPT09IFwib2tcIjtcbiAgfVxuICBjbGVhcigpIHtcbiAgICB0aGlzLl9pbm5lciA9IHsgbWFwOiBuZXcgTWF5YmVXZWFrTWFwKCksIGhhc1ZhbHVlOiBmYWxzZSwgdmFsdWU6IHZvaWQgMCB9O1xuICB9XG4gICpbKF9iMyA9IFN5bWJvbC5pdGVyYXRvciwgX2EzID0gU3ltYm9sLnRvU3RyaW5nVGFnLCBfYjMpXSgpIHtcbiAgICB5aWVsZCogdGhpcy5faXRlcmF0ZUlubmVyKFtdLCB0aGlzLl9pbm5lcik7XG4gIH1cbn07XG5leHBvcnQge1xuICBEZXBlbmRlbmNpZXNNYXAsXG4gIEl0ZXJhYmxlV2Vha01hcCxcbiAgTWF5YmVXZWFrTWFwLFxuICBXZWFrUmVmSWZBdmFpbGFibGVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXBzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/maps.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/math.js":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/math.js ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   remainder: () => (/* binding */ remainder)\n/* harmony export */ });\n// src/utils/math.tsx\nfunction remainder(n, d) {\n  return (n % d + Math.abs(d)) % d;\n}\n\n//# sourceMappingURL=math.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvbWF0aC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS91dGlscy9tYXRoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy9tYXRoLnRzeFxuZnVuY3Rpb24gcmVtYWluZGVyKG4sIGQpIHtcbiAgcmV0dXJuIChuICUgZCArIE1hdGguYWJzKGQpKSAlIGQ7XG59XG5leHBvcnQge1xuICByZW1haW5kZXJcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXRoLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/math.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/oauth.js":
/*!*******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/oauth.js ***!
  \*******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   allProviders: () => (/* binding */ allProviders),\n/* harmony export */   sharedProviders: () => (/* binding */ sharedProviders),\n/* harmony export */   standardProviders: () => (/* binding */ standardProviders)\n/* harmony export */ });\n// src/utils/oauth.tsx\nvar standardProviders = [\"google\", \"github\", \"microsoft\", \"spotify\", \"facebook\", \"discord\", \"gitlab\", \"bitbucket\", \"linkedin\", \"apple\", \"x\", \"twitch\"];\nvar sharedProviders = [\"google\", \"github\", \"microsoft\", \"spotify\"];\nvar allProviders = standardProviders;\n\n//# sourceMappingURL=oauth.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvb2F1dGguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFLRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS91dGlscy9vYXV0aC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvb2F1dGgudHN4XG52YXIgc3RhbmRhcmRQcm92aWRlcnMgPSBbXCJnb29nbGVcIiwgXCJnaXRodWJcIiwgXCJtaWNyb3NvZnRcIiwgXCJzcG90aWZ5XCIsIFwiZmFjZWJvb2tcIiwgXCJkaXNjb3JkXCIsIFwiZ2l0bGFiXCIsIFwiYml0YnVja2V0XCIsIFwibGlua2VkaW5cIiwgXCJhcHBsZVwiLCBcInhcIiwgXCJ0d2l0Y2hcIl07XG52YXIgc2hhcmVkUHJvdmlkZXJzID0gW1wiZ29vZ2xlXCIsIFwiZ2l0aHViXCIsIFwibWljcm9zb2Z0XCIsIFwic3BvdGlmeVwiXTtcbnZhciBhbGxQcm92aWRlcnMgPSBzdGFuZGFyZFByb3ZpZGVycztcbmV4cG9ydCB7XG4gIGFsbFByb3ZpZGVycyxcbiAgc2hhcmVkUHJvdmlkZXJzLFxuICBzdGFuZGFyZFByb3ZpZGVyc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9hdXRoLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/oauth.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/objects.js":
/*!*********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/objects.js ***!
  \*********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deepFilterUndefined: () => (/* binding */ deepFilterUndefined),\n/* harmony export */   deepMerge: () => (/* binding */ deepMerge),\n/* harmony export */   deepPlainClone: () => (/* binding */ deepPlainClone),\n/* harmony export */   deepPlainEquals: () => (/* binding */ deepPlainEquals),\n/* harmony export */   deepSortKeys: () => (/* binding */ deepSortKeys),\n/* harmony export */   deleteKey: () => (/* binding */ deleteKey),\n/* harmony export */   filterUndefined: () => (/* binding */ filterUndefined),\n/* harmony export */   filterUndefinedOrNull: () => (/* binding */ filterUndefinedOrNull),\n/* harmony export */   get: () => (/* binding */ get),\n/* harmony export */   getOrUndefined: () => (/* binding */ getOrUndefined),\n/* harmony export */   has: () => (/* binding */ has),\n/* harmony export */   hasAndNotUndefined: () => (/* binding */ hasAndNotUndefined),\n/* harmony export */   isCloneable: () => (/* binding */ isCloneable),\n/* harmony export */   isNotNull: () => (/* binding */ isNotNull),\n/* harmony export */   isObjectLike: () => (/* binding */ isObjectLike),\n/* harmony export */   mapValues: () => (/* binding */ mapValues),\n/* harmony export */   omit: () => (/* binding */ omit),\n/* harmony export */   pick: () => (/* binding */ pick),\n/* harmony export */   set: () => (/* binding */ set),\n/* harmony export */   shallowClone: () => (/* binding */ shallowClone),\n/* harmony export */   sortKeys: () => (/* binding */ sortKeys),\n/* harmony export */   split: () => (/* binding */ split),\n/* harmony export */   typedAssign: () => (/* binding */ typedAssign),\n/* harmony export */   typedEntries: () => (/* binding */ typedEntries),\n/* harmony export */   typedFromEntries: () => (/* binding */ typedFromEntries),\n/* harmony export */   typedKeys: () => (/* binding */ typedKeys),\n/* harmony export */   typedValues: () => (/* binding */ typedValues)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n/* harmony import */ var _functions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./functions.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/functions.js\");\n/* harmony import */ var _strings_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./strings.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/strings.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/types.js\");\n// src/utils/objects.tsx\n\n\n\n\nfunction isNotNull(value) {\n  return value !== null && value !== void 0;\n}\nfunction deepPlainEquals(obj1, obj2, options = {}) {\n  if (typeof obj1 !== typeof obj2) return false;\n  if (obj1 === obj2) return true;\n  switch (typeof obj1) {\n    case \"object\": {\n      if (!obj1 || !obj2) return false;\n      if (Array.isArray(obj1) || Array.isArray(obj2)) {\n        if (!Array.isArray(obj1) || !Array.isArray(obj2)) return false;\n        if (obj1.length !== obj2.length) return false;\n        return obj1.every((v, i) => deepPlainEquals(v, obj2[i], options));\n      }\n      const entries1 = Object.entries(obj1).filter(([k, v]) => !options.ignoreUndefinedValues || v !== void 0);\n      const entries2 = Object.entries(obj2).filter(([k, v]) => !options.ignoreUndefinedValues || v !== void 0);\n      if (entries1.length !== entries2.length) return false;\n      return entries1.every(([k, v1]) => {\n        const e2 = entries2.find(([k2]) => k === k2);\n        if (!e2) return false;\n        return deepPlainEquals(v1, e2[1], options);\n      });\n    }\n    case \"undefined\":\n    case \"string\":\n    case \"number\":\n    case \"boolean\":\n    case \"bigint\":\n    case \"symbol\":\n    case \"function\": {\n      return false;\n    }\n    default: {\n      throw new Error(\"Unexpected typeof \" + typeof obj1);\n    }\n  }\n}\nfunction isCloneable(obj) {\n  return typeof obj !== \"symbol\" && typeof obj !== \"function\";\n}\nfunction shallowClone(obj) {\n  if (!isCloneable(obj)) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"shallowClone does not support symbols or functions\", { obj });\n  if (Array.isArray(obj)) return obj.map(_functions_js__WEBPACK_IMPORTED_MODULE_1__.identity);\n  return { ...obj };\n}\nfunction deepPlainClone(obj) {\n  if (typeof obj === \"function\") throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"deepPlainClone does not support functions\");\n  if (typeof obj === \"symbol\") throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"deepPlainClone does not support symbols\");\n  if (typeof obj !== \"object\" || !obj) return obj;\n  if (Array.isArray(obj)) return obj.map(deepPlainClone);\n  return Object.fromEntries(Object.entries(obj).map(([k, v]) => [k, deepPlainClone(v)]));\n}\nfunction deepMerge(baseObj, mergeObj) {\n  if ([baseObj, mergeObj, ...Object.values(baseObj), ...Object.values(mergeObj)].some((o) => !isCloneable(o))) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"deepMerge does not support functions or symbols\", { baseObj, mergeObj });\n  const res = shallowClone(baseObj);\n  for (const [key, mergeValue] of Object.entries(mergeObj)) {\n    if (has(res, key)) {\n      const baseValue = get(res, key);\n      if (isObjectLike(baseValue) && isObjectLike(mergeValue)) {\n        set(res, key, deepMerge(baseValue, mergeValue));\n        continue;\n      }\n    }\n    set(res, key, mergeValue);\n  }\n  return res;\n}\nfunction typedEntries(obj) {\n  return Object.entries(obj);\n}\nfunction typedFromEntries(entries) {\n  return Object.fromEntries(entries);\n}\nfunction typedKeys(obj) {\n  return Object.keys(obj);\n}\nfunction typedValues(obj) {\n  return Object.values(obj);\n}\nfunction typedAssign(target, source) {\n  return Object.assign(target, source);\n}\nfunction filterUndefined(obj) {\n  return Object.fromEntries(Object.entries(obj).filter(([, v]) => v !== void 0));\n}\nfunction filterUndefinedOrNull(obj) {\n  return Object.fromEntries(Object.entries(obj).filter(([, v]) => v !== void 0 && v !== null));\n}\n(0,_types_js__WEBPACK_IMPORTED_MODULE_3__.typeAssertIs)()();\nfunction deepFilterUndefined(obj) {\n  return Object.fromEntries(Object.entries(obj).filter(([, v]) => v !== void 0).map(([k, v]) => [k, isObjectLike(v) ? deepFilterUndefined(v) : v]));\n}\nfunction pick(obj, keys) {\n  return Object.fromEntries(Object.entries(obj).filter(([k]) => keys.includes(k)));\n}\nfunction omit(obj, keys) {\n  if (!Array.isArray(keys)) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"omit: keys must be an array\", { obj, keys });\n  return Object.fromEntries(Object.entries(obj).filter(([k]) => !keys.includes(k)));\n}\nfunction split(obj, keys) {\n  return [pick(obj, keys), omit(obj, keys)];\n}\nfunction mapValues(obj, fn) {\n  if (Array.isArray(obj)) {\n    return obj.map((v) => fn(v));\n  }\n  return Object.fromEntries(Object.entries(obj).map(([k, v]) => [k, fn(v)]));\n}\nfunction sortKeys(obj) {\n  if (Array.isArray(obj)) {\n    return [...obj];\n  }\n  return Object.fromEntries(Object.entries(obj).sort(([a], [b]) => (0,_strings_js__WEBPACK_IMPORTED_MODULE_2__.stringCompare)(a, b)));\n}\nfunction deepSortKeys(obj) {\n  return sortKeys(mapValues(obj, (v) => isObjectLike(v) ? deepSortKeys(v) : v));\n}\nfunction set(obj, key, value) {\n  Object.defineProperty(obj, key, { value, writable: true, configurable: true, enumerable: true });\n}\nfunction get(obj, key) {\n  const descriptor = Object.getOwnPropertyDescriptor(obj, key);\n  if (!descriptor) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(`get: key ${String(key)} does not exist`, { obj, key });\n  return descriptor.value;\n}\nfunction getOrUndefined(obj, key) {\n  return has(obj, key) ? get(obj, key) : void 0;\n}\nfunction has(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\nfunction hasAndNotUndefined(obj, key) {\n  return has(obj, key) && get(obj, key) !== void 0;\n}\nfunction deleteKey(obj, key) {\n  if (has(obj, key)) {\n    Reflect.deleteProperty(obj, key);\n  } else {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(`deleteKey: key ${String(key)} does not exist`, { obj, key });\n  }\n}\nfunction isObjectLike(value) {\n  return (typeof value === \"object\" || typeof value === \"function\") && value !== null;\n}\n\n//# sourceMappingURL=objects.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvb2JqZWN0cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDa0Q7QUFDUjtBQUNHO0FBQ0g7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsMkRBQW1CLHlEQUF5RCxLQUFLO0FBQ3BILHlDQUF5QyxtREFBUTtBQUNqRCxXQUFXO0FBQ1g7QUFDQTtBQUNBLDJDQUEyQywyREFBbUI7QUFDOUQseUNBQXlDLDJEQUFtQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUhBQXlILDJEQUFtQixzREFBc0QsbUJBQW1CO0FBQ3JOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQywyREFBbUIsa0NBQWtDLFdBQVc7QUFDdEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FLDBEQUFhO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsNkRBQTZEO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwyREFBbUIsYUFBYSxhQUFhLG1CQUFtQixVQUFVO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osY0FBYywyREFBbUIsbUJBQW1CLGFBQWEsbUJBQW1CLFVBQVU7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTZCRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS91dGlscy9vYmplY3RzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy9vYmplY3RzLnRzeFxuaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciB9IGZyb20gXCIuL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgaWRlbnRpdHkgfSBmcm9tIFwiLi9mdW5jdGlvbnMuanNcIjtcbmltcG9ydCB7IHN0cmluZ0NvbXBhcmUgfSBmcm9tIFwiLi9zdHJpbmdzLmpzXCI7XG5pbXBvcnQgeyB0eXBlQXNzZXJ0SXMgfSBmcm9tIFwiLi90eXBlcy5qc1wiO1xuZnVuY3Rpb24gaXNOb3ROdWxsKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdm9pZCAwO1xufVxuZnVuY3Rpb24gZGVlcFBsYWluRXF1YWxzKG9iajEsIG9iajIsIG9wdGlvbnMgPSB7fSkge1xuICBpZiAodHlwZW9mIG9iajEgIT09IHR5cGVvZiBvYmoyKSByZXR1cm4gZmFsc2U7XG4gIGlmIChvYmoxID09PSBvYmoyKSByZXR1cm4gdHJ1ZTtcbiAgc3dpdGNoICh0eXBlb2Ygb2JqMSkge1xuICAgIGNhc2UgXCJvYmplY3RcIjoge1xuICAgICAgaWYgKCFvYmoxIHx8ICFvYmoyKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmoxKSB8fCBBcnJheS5pc0FycmF5KG9iajIpKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShvYmoxKSB8fCAhQXJyYXkuaXNBcnJheShvYmoyKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAob2JqMS5sZW5ndGggIT09IG9iajIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiBvYmoxLmV2ZXJ5KCh2LCBpKSA9PiBkZWVwUGxhaW5FcXVhbHModiwgb2JqMltpXSwgb3B0aW9ucykpO1xuICAgICAgfVxuICAgICAgY29uc3QgZW50cmllczEgPSBPYmplY3QuZW50cmllcyhvYmoxKS5maWx0ZXIoKFtrLCB2XSkgPT4gIW9wdGlvbnMuaWdub3JlVW5kZWZpbmVkVmFsdWVzIHx8IHYgIT09IHZvaWQgMCk7XG4gICAgICBjb25zdCBlbnRyaWVzMiA9IE9iamVjdC5lbnRyaWVzKG9iajIpLmZpbHRlcigoW2ssIHZdKSA9PiAhb3B0aW9ucy5pZ25vcmVVbmRlZmluZWRWYWx1ZXMgfHwgdiAhPT0gdm9pZCAwKTtcbiAgICAgIGlmIChlbnRyaWVzMS5sZW5ndGggIT09IGVudHJpZXMyLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgcmV0dXJuIGVudHJpZXMxLmV2ZXJ5KChbaywgdjFdKSA9PiB7XG4gICAgICAgIGNvbnN0IGUyID0gZW50cmllczIuZmluZCgoW2syXSkgPT4gayA9PT0gazIpO1xuICAgICAgICBpZiAoIWUyKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiBkZWVwUGxhaW5FcXVhbHModjEsIGUyWzFdLCBvcHRpb25zKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgY2FzZSBcInN0cmluZ1wiOlxuICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICBjYXNlIFwiYm9vbGVhblwiOlxuICAgIGNhc2UgXCJiaWdpbnRcIjpcbiAgICBjYXNlIFwic3ltYm9sXCI6XG4gICAgY2FzZSBcImZ1bmN0aW9uXCI6IHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZGVmYXVsdDoge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCB0eXBlb2YgXCIgKyB0eXBlb2Ygb2JqMSk7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBpc0Nsb25lYWJsZShvYmopIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmogIT09IFwic3ltYm9sXCIgJiYgdHlwZW9mIG9iaiAhPT0gXCJmdW5jdGlvblwiO1xufVxuZnVuY3Rpb24gc2hhbGxvd0Nsb25lKG9iaikge1xuICBpZiAoIWlzQ2xvbmVhYmxlKG9iaikpIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwic2hhbGxvd0Nsb25lIGRvZXMgbm90IHN1cHBvcnQgc3ltYm9scyBvciBmdW5jdGlvbnNcIiwgeyBvYmogfSk7XG4gIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHJldHVybiBvYmoubWFwKGlkZW50aXR5KTtcbiAgcmV0dXJuIHsgLi4ub2JqIH07XG59XG5mdW5jdGlvbiBkZWVwUGxhaW5DbG9uZShvYmopIHtcbiAgaWYgKHR5cGVvZiBvYmogPT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJkZWVwUGxhaW5DbG9uZSBkb2VzIG5vdCBzdXBwb3J0IGZ1bmN0aW9uc1wiKTtcbiAgaWYgKHR5cGVvZiBvYmogPT09IFwic3ltYm9sXCIpIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiZGVlcFBsYWluQ2xvbmUgZG9lcyBub3Qgc3VwcG9ydCBzeW1ib2xzXCIpO1xuICBpZiAodHlwZW9mIG9iaiAhPT0gXCJvYmplY3RcIiB8fCAhb2JqKSByZXR1cm4gb2JqO1xuICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSByZXR1cm4gb2JqLm1hcChkZWVwUGxhaW5DbG9uZSk7XG4gIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMob2JqKS5tYXAoKFtrLCB2XSkgPT4gW2ssIGRlZXBQbGFpbkNsb25lKHYpXSkpO1xufVxuZnVuY3Rpb24gZGVlcE1lcmdlKGJhc2VPYmosIG1lcmdlT2JqKSB7XG4gIGlmIChbYmFzZU9iaiwgbWVyZ2VPYmosIC4uLk9iamVjdC52YWx1ZXMoYmFzZU9iaiksIC4uLk9iamVjdC52YWx1ZXMobWVyZ2VPYmopXS5zb21lKChvKSA9PiAhaXNDbG9uZWFibGUobykpKSB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcImRlZXBNZXJnZSBkb2VzIG5vdCBzdXBwb3J0IGZ1bmN0aW9ucyBvciBzeW1ib2xzXCIsIHsgYmFzZU9iaiwgbWVyZ2VPYmogfSk7XG4gIGNvbnN0IHJlcyA9IHNoYWxsb3dDbG9uZShiYXNlT2JqKTtcbiAgZm9yIChjb25zdCBba2V5LCBtZXJnZVZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhtZXJnZU9iaikpIHtcbiAgICBpZiAoaGFzKHJlcywga2V5KSkge1xuICAgICAgY29uc3QgYmFzZVZhbHVlID0gZ2V0KHJlcywga2V5KTtcbiAgICAgIGlmIChpc09iamVjdExpa2UoYmFzZVZhbHVlKSAmJiBpc09iamVjdExpa2UobWVyZ2VWYWx1ZSkpIHtcbiAgICAgICAgc2V0KHJlcywga2V5LCBkZWVwTWVyZ2UoYmFzZVZhbHVlLCBtZXJnZVZhbHVlKSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBzZXQocmVzLCBrZXksIG1lcmdlVmFsdWUpO1xuICB9XG4gIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiB0eXBlZEVudHJpZXMob2JqKSB7XG4gIHJldHVybiBPYmplY3QuZW50cmllcyhvYmopO1xufVxuZnVuY3Rpb24gdHlwZWRGcm9tRW50cmllcyhlbnRyaWVzKSB7XG4gIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoZW50cmllcyk7XG59XG5mdW5jdGlvbiB0eXBlZEtleXMob2JqKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhvYmopO1xufVxuZnVuY3Rpb24gdHlwZWRWYWx1ZXMob2JqKSB7XG4gIHJldHVybiBPYmplY3QudmFsdWVzKG9iaik7XG59XG5mdW5jdGlvbiB0eXBlZEFzc2lnbih0YXJnZXQsIHNvdXJjZSkge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbih0YXJnZXQsIHNvdXJjZSk7XG59XG5mdW5jdGlvbiBmaWx0ZXJVbmRlZmluZWQob2JqKSB7XG4gIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMob2JqKS5maWx0ZXIoKFssIHZdKSA9PiB2ICE9PSB2b2lkIDApKTtcbn1cbmZ1bmN0aW9uIGZpbHRlclVuZGVmaW5lZE9yTnVsbChvYmopIHtcbiAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhvYmopLmZpbHRlcigoWywgdl0pID0+IHYgIT09IHZvaWQgMCAmJiB2ICE9PSBudWxsKSk7XG59XG50eXBlQXNzZXJ0SXMoKSgpO1xuZnVuY3Rpb24gZGVlcEZpbHRlclVuZGVmaW5lZChvYmopIHtcbiAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhvYmopLmZpbHRlcigoWywgdl0pID0+IHYgIT09IHZvaWQgMCkubWFwKChbaywgdl0pID0+IFtrLCBpc09iamVjdExpa2UodikgPyBkZWVwRmlsdGVyVW5kZWZpbmVkKHYpIDogdl0pKTtcbn1cbmZ1bmN0aW9uIHBpY2sob2JqLCBrZXlzKSB7XG4gIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMob2JqKS5maWx0ZXIoKFtrXSkgPT4ga2V5cy5pbmNsdWRlcyhrKSkpO1xufVxuZnVuY3Rpb24gb21pdChvYmosIGtleXMpIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGtleXMpKSB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIm9taXQ6IGtleXMgbXVzdCBiZSBhbiBhcnJheVwiLCB7IG9iaiwga2V5cyB9KTtcbiAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhvYmopLmZpbHRlcigoW2tdKSA9PiAha2V5cy5pbmNsdWRlcyhrKSkpO1xufVxuZnVuY3Rpb24gc3BsaXQob2JqLCBrZXlzKSB7XG4gIHJldHVybiBbcGljayhvYmosIGtleXMpLCBvbWl0KG9iaiwga2V5cyldO1xufVxuZnVuY3Rpb24gbWFwVmFsdWVzKG9iaiwgZm4pIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgIHJldHVybiBvYmoubWFwKCh2KSA9PiBmbih2KSk7XG4gIH1cbiAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhvYmopLm1hcCgoW2ssIHZdKSA9PiBbaywgZm4odildKSk7XG59XG5mdW5jdGlvbiBzb3J0S2V5cyhvYmopIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgIHJldHVybiBbLi4ub2JqXTtcbiAgfVxuICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKG9iaikuc29ydCgoW2FdLCBbYl0pID0+IHN0cmluZ0NvbXBhcmUoYSwgYikpKTtcbn1cbmZ1bmN0aW9uIGRlZXBTb3J0S2V5cyhvYmopIHtcbiAgcmV0dXJuIHNvcnRLZXlzKG1hcFZhbHVlcyhvYmosICh2KSA9PiBpc09iamVjdExpa2UodikgPyBkZWVwU29ydEtleXModikgOiB2KSk7XG59XG5mdW5jdGlvbiBzZXQob2JqLCBrZXksIHZhbHVlKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbn1cbmZ1bmN0aW9uIGdldChvYmosIGtleSkge1xuICBjb25zdCBkZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7XG4gIGlmICghZGVzY3JpcHRvcikgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoYGdldDoga2V5ICR7U3RyaW5nKGtleSl9IGRvZXMgbm90IGV4aXN0YCwgeyBvYmosIGtleSB9KTtcbiAgcmV0dXJuIGRlc2NyaXB0b3IudmFsdWU7XG59XG5mdW5jdGlvbiBnZXRPclVuZGVmaW5lZChvYmosIGtleSkge1xuICByZXR1cm4gaGFzKG9iaiwga2V5KSA/IGdldChvYmosIGtleSkgOiB2b2lkIDA7XG59XG5mdW5jdGlvbiBoYXMob2JqLCBrZXkpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG59XG5mdW5jdGlvbiBoYXNBbmROb3RVbmRlZmluZWQob2JqLCBrZXkpIHtcbiAgcmV0dXJuIGhhcyhvYmosIGtleSkgJiYgZ2V0KG9iaiwga2V5KSAhPT0gdm9pZCAwO1xufVxuZnVuY3Rpb24gZGVsZXRlS2V5KG9iaiwga2V5KSB7XG4gIGlmIChoYXMob2JqLCBrZXkpKSB7XG4gICAgUmVmbGVjdC5kZWxldGVQcm9wZXJ0eShvYmosIGtleSk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoYGRlbGV0ZUtleToga2V5ICR7U3RyaW5nKGtleSl9IGRvZXMgbm90IGV4aXN0YCwgeyBvYmosIGtleSB9KTtcbiAgfVxufVxuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSAmJiB2YWx1ZSAhPT0gbnVsbDtcbn1cbmV4cG9ydCB7XG4gIGRlZXBGaWx0ZXJVbmRlZmluZWQsXG4gIGRlZXBNZXJnZSxcbiAgZGVlcFBsYWluQ2xvbmUsXG4gIGRlZXBQbGFpbkVxdWFscyxcbiAgZGVlcFNvcnRLZXlzLFxuICBkZWxldGVLZXksXG4gIGZpbHRlclVuZGVmaW5lZCxcbiAgZmlsdGVyVW5kZWZpbmVkT3JOdWxsLFxuICBnZXQsXG4gIGdldE9yVW5kZWZpbmVkLFxuICBoYXMsXG4gIGhhc0FuZE5vdFVuZGVmaW5lZCxcbiAgaXNDbG9uZWFibGUsXG4gIGlzTm90TnVsbCxcbiAgaXNPYmplY3RMaWtlLFxuICBtYXBWYWx1ZXMsXG4gIG9taXQsXG4gIHBpY2ssXG4gIHNldCxcbiAgc2hhbGxvd0Nsb25lLFxuICBzb3J0S2V5cyxcbiAgc3BsaXQsXG4gIHR5cGVkQXNzaWduLFxuICB0eXBlZEVudHJpZXMsXG4gIHR5cGVkRnJvbUVudHJpZXMsXG4gIHR5cGVkS2V5cyxcbiAgdHlwZWRWYWx1ZXNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYmplY3RzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/objects.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/promises.js":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/promises.js ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   concatStacktracesIfRejected: () => (/* binding */ concatStacktracesIfRejected),\n/* harmony export */   createPromise: () => (/* binding */ createPromise),\n/* harmony export */   ignoreUnhandledRejection: () => (/* binding */ ignoreUnhandledRejection),\n/* harmony export */   neverResolve: () => (/* binding */ neverResolve),\n/* harmony export */   pending: () => (/* binding */ pending),\n/* harmony export */   rateLimited: () => (/* binding */ rateLimited),\n/* harmony export */   rejected: () => (/* binding */ rejected),\n/* harmony export */   resolved: () => (/* binding */ resolved),\n/* harmony export */   runAsynchronously: () => (/* binding */ runAsynchronously),\n/* harmony export */   runAsynchronouslyWithAlert: () => (/* binding */ runAsynchronouslyWithAlert),\n/* harmony export */   throttled: () => (/* binding */ throttled),\n/* harmony export */   timeout: () => (/* binding */ timeout),\n/* harmony export */   timeoutThrow: () => (/* binding */ timeoutThrow),\n/* harmony export */   wait: () => (/* binding */ wait),\n/* harmony export */   waitUntil: () => (/* binding */ waitUntil)\n/* harmony export */ });\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../index.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/index.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n/* harmony import */ var _maps_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./maps.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/maps.js\");\n/* harmony import */ var _results_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./results.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/results.js\");\n/* harmony import */ var _uuids_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./uuids.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/uuids.js\");\n// src/utils/promises.tsx\n\n\n\n\n\nfunction createPromise(callback) {\n  let status = \"pending\";\n  let valueOrReason = void 0;\n  let resolve = null;\n  let reject = null;\n  const promise = new Promise((res, rej) => {\n    resolve = (value) => {\n      if (status !== \"pending\") return;\n      status = \"fulfilled\";\n      valueOrReason = value;\n      res(value);\n    };\n    reject = (reason) => {\n      if (status !== \"pending\") return;\n      status = \"rejected\";\n      valueOrReason = reason;\n      rej(reason);\n    };\n  });\n  callback(resolve, reject);\n  return Object.assign(promise, {\n    status,\n    ...status === \"fulfilled\" ? { value: valueOrReason } : {},\n    ...status === \"rejected\" ? { reason: valueOrReason } : {}\n  });\n}\nvar resolvedCache = null;\nfunction resolved(value) {\n  resolvedCache ??= new _maps_js__WEBPACK_IMPORTED_MODULE_2__.DependenciesMap();\n  if (resolvedCache.has([value])) {\n    return resolvedCache.get([value]);\n  }\n  const res = Object.assign(Promise.resolve(value), {\n    status: \"fulfilled\",\n    value\n  });\n  resolvedCache.set([value], res);\n  return res;\n}\nvar rejectedCache = null;\nfunction rejected(reason) {\n  rejectedCache ??= new _maps_js__WEBPACK_IMPORTED_MODULE_2__.DependenciesMap();\n  if (rejectedCache.has([reason])) {\n    return rejectedCache.get([reason]);\n  }\n  const promise = Promise.reject(reason);\n  ignoreUnhandledRejection(promise);\n  const res = Object.assign(promise, {\n    status: \"rejected\",\n    reason\n  });\n  rejectedCache.set([reason], res);\n  return res;\n}\nvar neverResolvePromise = pending(new Promise(() => {\n}));\nfunction neverResolve() {\n  return neverResolvePromise;\n}\nfunction pending(promise, options = {}) {\n  const res = promise.then(\n    (value) => {\n      res.status = \"fulfilled\";\n      res.value = value;\n      return value;\n    },\n    (actualReason) => {\n      res.status = \"rejected\";\n      res.reason = actualReason;\n      throw actualReason;\n    }\n  );\n  res.status = \"pending\";\n  return res;\n}\nfunction ignoreUnhandledRejection(promise) {\n  promise.catch(() => {\n  });\n}\nfunction concatStacktracesIfRejected(promise) {\n  const currentError = new Error();\n  promise.catch((error) => {\n    if (error instanceof Error) {\n      (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.concatStacktraces)(error, currentError);\n    } else {\n    }\n  });\n}\nasync function wait(ms) {\n  if (!Number.isFinite(ms) || ms < 0) {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(`wait() requires a non-negative integer number of milliseconds to wait. (found: ${ms}ms)`);\n  }\n  if (ms >= 2 ** 31) {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"The maximum timeout for wait() is 2147483647ms (2**31 - 1). (found: ${ms}ms)\");\n  }\n  return await new Promise((resolve) => setTimeout(resolve, ms));\n}\nasync function waitUntil(date) {\n  return await wait(date.getTime() - Date.now());\n}\nfunction runAsynchronouslyWithAlert(...args) {\n  return runAsynchronously(\n    args[0],\n    {\n      ...args[1],\n      onError: (error) => {\n        if (_index_js__WEBPACK_IMPORTED_MODULE_0__.KnownError.isKnownError(error) && typeof process !== \"undefined\" && \"development\"?.includes(\"production\")) {\n          alert(error.message);\n        } else {\n          alert(`An unhandled error occurred. Please ${ true ? `check the browser console for the full error.` : 0}\n\n${error}`);\n        }\n        args[1]?.onError?.(error);\n      }\n    },\n    ...args.slice(2)\n  );\n}\nfunction runAsynchronously(promiseOrFunc, options = {}) {\n  if (typeof promiseOrFunc === \"function\") {\n    promiseOrFunc = promiseOrFunc();\n  }\n  if (promiseOrFunc) {\n    concatStacktracesIfRejected(promiseOrFunc);\n    promiseOrFunc.catch((error) => {\n      options.onError?.(error);\n      const newError = new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\n        \"Uncaught error in asynchronous function: \" + (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.errorToNiceString)(error),\n        { cause: error }\n      );\n      if (!options.noErrorLogging) {\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.captureError)(\"runAsynchronously\", newError);\n      }\n    });\n  }\n}\nvar TimeoutError = class extends Error {\n  constructor(ms) {\n    super(`Timeout after ${ms}ms`);\n    this.ms = ms;\n    this.name = \"TimeoutError\";\n  }\n};\nasync function timeout(promiseOrFunc, ms) {\n  const promise = typeof promiseOrFunc === \"function\" ? promiseOrFunc() : promiseOrFunc;\n  return await Promise.race([\n    promise.then((value) => _results_js__WEBPACK_IMPORTED_MODULE_3__.Result.ok(value)),\n    wait(ms).then(() => _results_js__WEBPACK_IMPORTED_MODULE_3__.Result.error(new TimeoutError(ms)))\n  ]);\n}\nasync function timeoutThrow(promise, ms) {\n  return _results_js__WEBPACK_IMPORTED_MODULE_3__.Result.orThrow(await timeout(promise, ms));\n}\nfunction rateLimited(func, options) {\n  let waitUntil2 = performance.now();\n  let queue = [];\n  let addedToQueueCallbacks = /* @__PURE__ */ new Map();\n  const next = async () => {\n    while (true) {\n      if (waitUntil2 > performance.now()) {\n        await wait(Math.max(1, waitUntil2 - performance.now() + 1));\n      } else if (queue.length === 0) {\n        const uuid = (0,_uuids_js__WEBPACK_IMPORTED_MODULE_4__.generateUuid)();\n        await new Promise((resolve) => {\n          addedToQueueCallbacks.set(uuid, resolve);\n        });\n        addedToQueueCallbacks.delete(uuid);\n      } else {\n        break;\n      }\n    }\n    const nextFuncs = options.batchCalls ? queue.splice(0, queue.length) : [queue.shift()];\n    const start = performance.now();\n    const value = await _results_js__WEBPACK_IMPORTED_MODULE_3__.Result.fromPromise(func());\n    const end = performance.now();\n    waitUntil2 = Math.max(\n      waitUntil2,\n      start + (options.throttleMs ?? 0),\n      end + (options.gapMs ?? 0)\n    );\n    for (const nextFunc of nextFuncs) {\n      if (value.status === \"ok\") {\n        nextFunc[0](value.data);\n      } else {\n        nextFunc[1](value.error);\n      }\n    }\n  };\n  runAsynchronously(async () => {\n    while (true) {\n      await next();\n    }\n  });\n  return () => {\n    return new Promise((resolve, reject) => {\n      waitUntil2 = Math.max(\n        waitUntil2,\n        performance.now() + (options.debounceMs ?? 0)\n      );\n      queue.push([resolve, reject]);\n      addedToQueueCallbacks.forEach((cb) => cb());\n    });\n  };\n}\nfunction throttled(func, delayMs) {\n  let timeout2 = null;\n  let nextAvailable = null;\n  return async (...args) => {\n    while (nextAvailable !== null) {\n      await nextAvailable;\n    }\n    nextAvailable = new Promise((resolve) => {\n      timeout2 = setTimeout(() => {\n        nextAvailable = null;\n        resolve(func(...args));\n      }, delayMs);\n    });\n    return await nextAvailable;\n  };\n}\n\n//# sourceMappingURL=promises.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvcHJvbWlzZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUN5QztBQUM2RDtBQUMxRDtBQUNOO0FBQ0k7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyx1QkFBdUIsSUFBSTtBQUM3RCxpQ0FBaUMsd0JBQXdCO0FBQ3pELEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IscURBQWU7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IscURBQWU7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLDZEQUFpQjtBQUN2QixNQUFNO0FBQ047QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsY0FBYywyREFBbUIsbUZBQW1GLEdBQUc7QUFDdkg7QUFDQTtBQUNBLGNBQWMsMkRBQW1CLHdFQUF3RSxHQUFHO0FBQzVHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaURBQVUsMERBQTBELGFBQW9CO0FBQ3BHO0FBQ0EsVUFBVTtBQUNWLHVEQUF1RCxLQUFzQyxxREFBcUQsQ0FBK0I7O0FBRWpMLEVBQUUsTUFBTTtBQUNSO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxzREFBc0Q7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsMkRBQW1CO0FBQzlDLHNEQUFzRCw2REFBaUI7QUFDdkUsVUFBVTtBQUNWO0FBQ0E7QUFDQSxRQUFRLHdEQUFZO0FBQ3BCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLEdBQUc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsK0NBQU07QUFDbEMsd0JBQXdCLCtDQUFNO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLFNBQVMsK0NBQU07QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1IscUJBQXFCLHVEQUFZO0FBQ2pDO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwrQ0FBTTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFpQkU7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2dmeDJlZGVub2FzaXMvRG93bmxvYWRzL0RldmVsb3BtZW50L0VzcGFkYS9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvcHJvbWlzZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3V0aWxzL3Byb21pc2VzLnRzeFxuaW1wb3J0IHsgS25vd25FcnJvciB9IGZyb20gXCIuLi9pbmRleC5qc1wiO1xuaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciwgY2FwdHVyZUVycm9yLCBjb25jYXRTdGFja3RyYWNlcywgZXJyb3JUb05pY2VTdHJpbmcgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IERlcGVuZGVuY2llc01hcCB9IGZyb20gXCIuL21hcHMuanNcIjtcbmltcG9ydCB7IFJlc3VsdCB9IGZyb20gXCIuL3Jlc3VsdHMuanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlVXVpZCB9IGZyb20gXCIuL3V1aWRzLmpzXCI7XG5mdW5jdGlvbiBjcmVhdGVQcm9taXNlKGNhbGxiYWNrKSB7XG4gIGxldCBzdGF0dXMgPSBcInBlbmRpbmdcIjtcbiAgbGV0IHZhbHVlT3JSZWFzb24gPSB2b2lkIDA7XG4gIGxldCByZXNvbHZlID0gbnVsbDtcbiAgbGV0IHJlamVjdCA9IG51bGw7XG4gIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHtcbiAgICByZXNvbHZlID0gKHZhbHVlKSA9PiB7XG4gICAgICBpZiAoc3RhdHVzICE9PSBcInBlbmRpbmdcIikgcmV0dXJuO1xuICAgICAgc3RhdHVzID0gXCJmdWxmaWxsZWRcIjtcbiAgICAgIHZhbHVlT3JSZWFzb24gPSB2YWx1ZTtcbiAgICAgIHJlcyh2YWx1ZSk7XG4gICAgfTtcbiAgICByZWplY3QgPSAocmVhc29uKSA9PiB7XG4gICAgICBpZiAoc3RhdHVzICE9PSBcInBlbmRpbmdcIikgcmV0dXJuO1xuICAgICAgc3RhdHVzID0gXCJyZWplY3RlZFwiO1xuICAgICAgdmFsdWVPclJlYXNvbiA9IHJlYXNvbjtcbiAgICAgIHJlaihyZWFzb24pO1xuICAgIH07XG4gIH0pO1xuICBjYWxsYmFjayhyZXNvbHZlLCByZWplY3QpO1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbihwcm9taXNlLCB7XG4gICAgc3RhdHVzLFxuICAgIC4uLnN0YXR1cyA9PT0gXCJmdWxmaWxsZWRcIiA/IHsgdmFsdWU6IHZhbHVlT3JSZWFzb24gfSA6IHt9LFxuICAgIC4uLnN0YXR1cyA9PT0gXCJyZWplY3RlZFwiID8geyByZWFzb246IHZhbHVlT3JSZWFzb24gfSA6IHt9XG4gIH0pO1xufVxudmFyIHJlc29sdmVkQ2FjaGUgPSBudWxsO1xuZnVuY3Rpb24gcmVzb2x2ZWQodmFsdWUpIHtcbiAgcmVzb2x2ZWRDYWNoZSA/Pz0gbmV3IERlcGVuZGVuY2llc01hcCgpO1xuICBpZiAocmVzb2x2ZWRDYWNoZS5oYXMoW3ZhbHVlXSkpIHtcbiAgICByZXR1cm4gcmVzb2x2ZWRDYWNoZS5nZXQoW3ZhbHVlXSk7XG4gIH1cbiAgY29uc3QgcmVzID0gT2JqZWN0LmFzc2lnbihQcm9taXNlLnJlc29sdmUodmFsdWUpLCB7XG4gICAgc3RhdHVzOiBcImZ1bGZpbGxlZFwiLFxuICAgIHZhbHVlXG4gIH0pO1xuICByZXNvbHZlZENhY2hlLnNldChbdmFsdWVdLCByZXMpO1xuICByZXR1cm4gcmVzO1xufVxudmFyIHJlamVjdGVkQ2FjaGUgPSBudWxsO1xuZnVuY3Rpb24gcmVqZWN0ZWQocmVhc29uKSB7XG4gIHJlamVjdGVkQ2FjaGUgPz89IG5ldyBEZXBlbmRlbmNpZXNNYXAoKTtcbiAgaWYgKHJlamVjdGVkQ2FjaGUuaGFzKFtyZWFzb25dKSkge1xuICAgIHJldHVybiByZWplY3RlZENhY2hlLmdldChbcmVhc29uXSk7XG4gIH1cbiAgY29uc3QgcHJvbWlzZSA9IFByb21pc2UucmVqZWN0KHJlYXNvbik7XG4gIGlnbm9yZVVuaGFuZGxlZFJlamVjdGlvbihwcm9taXNlKTtcbiAgY29uc3QgcmVzID0gT2JqZWN0LmFzc2lnbihwcm9taXNlLCB7XG4gICAgc3RhdHVzOiBcInJlamVjdGVkXCIsXG4gICAgcmVhc29uXG4gIH0pO1xuICByZWplY3RlZENhY2hlLnNldChbcmVhc29uXSwgcmVzKTtcbiAgcmV0dXJuIHJlcztcbn1cbnZhciBuZXZlclJlc29sdmVQcm9taXNlID0gcGVuZGluZyhuZXcgUHJvbWlzZSgoKSA9PiB7XG59KSk7XG5mdW5jdGlvbiBuZXZlclJlc29sdmUoKSB7XG4gIHJldHVybiBuZXZlclJlc29sdmVQcm9taXNlO1xufVxuZnVuY3Rpb24gcGVuZGluZyhwcm9taXNlLCBvcHRpb25zID0ge30pIHtcbiAgY29uc3QgcmVzID0gcHJvbWlzZS50aGVuKFxuICAgICh2YWx1ZSkgPT4ge1xuICAgICAgcmVzLnN0YXR1cyA9IFwiZnVsZmlsbGVkXCI7XG4gICAgICByZXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIChhY3R1YWxSZWFzb24pID0+IHtcbiAgICAgIHJlcy5zdGF0dXMgPSBcInJlamVjdGVkXCI7XG4gICAgICByZXMucmVhc29uID0gYWN0dWFsUmVhc29uO1xuICAgICAgdGhyb3cgYWN0dWFsUmVhc29uO1xuICAgIH1cbiAgKTtcbiAgcmVzLnN0YXR1cyA9IFwicGVuZGluZ1wiO1xuICByZXR1cm4gcmVzO1xufVxuZnVuY3Rpb24gaWdub3JlVW5oYW5kbGVkUmVqZWN0aW9uKHByb21pc2UpIHtcbiAgcHJvbWlzZS5jYXRjaCgoKSA9PiB7XG4gIH0pO1xufVxuZnVuY3Rpb24gY29uY2F0U3RhY2t0cmFjZXNJZlJlamVjdGVkKHByb21pc2UpIHtcbiAgY29uc3QgY3VycmVudEVycm9yID0gbmV3IEVycm9yKCk7XG4gIHByb21pc2UuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGNvbmNhdFN0YWNrdHJhY2VzKGVycm9yLCBjdXJyZW50RXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgfVxuICB9KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHdhaXQobXMpIHtcbiAgaWYgKCFOdW1iZXIuaXNGaW5pdGUobXMpIHx8IG1zIDwgMCkge1xuICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKGB3YWl0KCkgcmVxdWlyZXMgYSBub24tbmVnYXRpdmUgaW50ZWdlciBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIHdhaXQuIChmb3VuZDogJHttc31tcylgKTtcbiAgfVxuICBpZiAobXMgPj0gMiAqKiAzMSkge1xuICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiVGhlIG1heGltdW0gdGltZW91dCBmb3Igd2FpdCgpIGlzIDIxNDc0ODM2NDdtcyAoMioqMzEgLSAxKS4gKGZvdW5kOiAke21zfW1zKVwiKTtcbiAgfVxuICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHdhaXRVbnRpbChkYXRlKSB7XG4gIHJldHVybiBhd2FpdCB3YWl0KGRhdGUuZ2V0VGltZSgpIC0gRGF0ZS5ub3coKSk7XG59XG5mdW5jdGlvbiBydW5Bc3luY2hyb25vdXNseVdpdGhBbGVydCguLi5hcmdzKSB7XG4gIHJldHVybiBydW5Bc3luY2hyb25vdXNseShcbiAgICBhcmdzWzBdLFxuICAgIHtcbiAgICAgIC4uLmFyZ3NbMV0sXG4gICAgICBvbkVycm9yOiAoZXJyb3IpID0+IHtcbiAgICAgICAgaWYgKEtub3duRXJyb3IuaXNLbm93bkVycm9yKGVycm9yKSAmJiB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLmVudi5OT0RFX0VOVj8uaW5jbHVkZXMoXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgYWxlcnQoZXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWxlcnQoYEFuIHVuaGFuZGxlZCBlcnJvciBvY2N1cnJlZC4gUGxlYXNlICR7cHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIiA/IGBjaGVjayB0aGUgYnJvd3NlciBjb25zb2xlIGZvciB0aGUgZnVsbCBlcnJvci5gIDogXCJyZXBvcnQgdGhpcyB0byB0aGUgZGV2ZWxvcGVyLlwifVxuXG4ke2Vycm9yfWApO1xuICAgICAgICB9XG4gICAgICAgIGFyZ3NbMV0/Lm9uRXJyb3I/LihlcnJvcik7XG4gICAgICB9XG4gICAgfSxcbiAgICAuLi5hcmdzLnNsaWNlKDIpXG4gICk7XG59XG5mdW5jdGlvbiBydW5Bc3luY2hyb25vdXNseShwcm9taXNlT3JGdW5jLCBvcHRpb25zID0ge30pIHtcbiAgaWYgKHR5cGVvZiBwcm9taXNlT3JGdW5jID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBwcm9taXNlT3JGdW5jID0gcHJvbWlzZU9yRnVuYygpO1xuICB9XG4gIGlmIChwcm9taXNlT3JGdW5jKSB7XG4gICAgY29uY2F0U3RhY2t0cmFjZXNJZlJlamVjdGVkKHByb21pc2VPckZ1bmMpO1xuICAgIHByb21pc2VPckZ1bmMuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICBvcHRpb25zLm9uRXJyb3I/LihlcnJvcik7XG4gICAgICBjb25zdCBuZXdFcnJvciA9IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFxuICAgICAgICBcIlVuY2F1Z2h0IGVycm9yIGluIGFzeW5jaHJvbm91cyBmdW5jdGlvbjogXCIgKyBlcnJvclRvTmljZVN0cmluZyhlcnJvciksXG4gICAgICAgIHsgY2F1c2U6IGVycm9yIH1cbiAgICAgICk7XG4gICAgICBpZiAoIW9wdGlvbnMubm9FcnJvckxvZ2dpbmcpIHtcbiAgICAgICAgY2FwdHVyZUVycm9yKFwicnVuQXN5bmNocm9ub3VzbHlcIiwgbmV3RXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG52YXIgVGltZW91dEVycm9yID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1zKSB7XG4gICAgc3VwZXIoYFRpbWVvdXQgYWZ0ZXIgJHttc31tc2ApO1xuICAgIHRoaXMubXMgPSBtcztcbiAgICB0aGlzLm5hbWUgPSBcIlRpbWVvdXRFcnJvclwiO1xuICB9XG59O1xuYXN5bmMgZnVuY3Rpb24gdGltZW91dChwcm9taXNlT3JGdW5jLCBtcykge1xuICBjb25zdCBwcm9taXNlID0gdHlwZW9mIHByb21pc2VPckZ1bmMgPT09IFwiZnVuY3Rpb25cIiA/IHByb21pc2VPckZ1bmMoKSA6IHByb21pc2VPckZ1bmM7XG4gIHJldHVybiBhd2FpdCBQcm9taXNlLnJhY2UoW1xuICAgIHByb21pc2UudGhlbigodmFsdWUpID0+IFJlc3VsdC5vayh2YWx1ZSkpLFxuICAgIHdhaXQobXMpLnRoZW4oKCkgPT4gUmVzdWx0LmVycm9yKG5ldyBUaW1lb3V0RXJyb3IobXMpKSlcbiAgXSk7XG59XG5hc3luYyBmdW5jdGlvbiB0aW1lb3V0VGhyb3cocHJvbWlzZSwgbXMpIHtcbiAgcmV0dXJuIFJlc3VsdC5vclRocm93KGF3YWl0IHRpbWVvdXQocHJvbWlzZSwgbXMpKTtcbn1cbmZ1bmN0aW9uIHJhdGVMaW1pdGVkKGZ1bmMsIG9wdGlvbnMpIHtcbiAgbGV0IHdhaXRVbnRpbDIgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgbGV0IHF1ZXVlID0gW107XG4gIGxldCBhZGRlZFRvUXVldWVDYWxsYmFja3MgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBjb25zdCBuZXh0ID0gYXN5bmMgKCkgPT4ge1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBpZiAod2FpdFVudGlsMiA+IHBlcmZvcm1hbmNlLm5vdygpKSB7XG4gICAgICAgIGF3YWl0IHdhaXQoTWF0aC5tYXgoMSwgd2FpdFVudGlsMiAtIHBlcmZvcm1hbmNlLm5vdygpICsgMSkpO1xuICAgICAgfSBlbHNlIGlmIChxdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc3QgdXVpZCA9IGdlbmVyYXRlVXVpZCgpO1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgIGFkZGVkVG9RdWV1ZUNhbGxiYWNrcy5zZXQodXVpZCwgcmVzb2x2ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBhZGRlZFRvUXVldWVDYWxsYmFja3MuZGVsZXRlKHV1aWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5leHRGdW5jcyA9IG9wdGlvbnMuYmF0Y2hDYWxscyA/IHF1ZXVlLnNwbGljZSgwLCBxdWV1ZS5sZW5ndGgpIDogW3F1ZXVlLnNoaWZ0KCldO1xuICAgIGNvbnN0IHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgY29uc3QgdmFsdWUgPSBhd2FpdCBSZXN1bHQuZnJvbVByb21pc2UoZnVuYygpKTtcbiAgICBjb25zdCBlbmQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICB3YWl0VW50aWwyID0gTWF0aC5tYXgoXG4gICAgICB3YWl0VW50aWwyLFxuICAgICAgc3RhcnQgKyAob3B0aW9ucy50aHJvdHRsZU1zID8/IDApLFxuICAgICAgZW5kICsgKG9wdGlvbnMuZ2FwTXMgPz8gMClcbiAgICApO1xuICAgIGZvciAoY29uc3QgbmV4dEZ1bmMgb2YgbmV4dEZ1bmNzKSB7XG4gICAgICBpZiAodmFsdWUuc3RhdHVzID09PSBcIm9rXCIpIHtcbiAgICAgICAgbmV4dEZ1bmNbMF0odmFsdWUuZGF0YSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXh0RnVuY1sxXSh2YWx1ZS5lcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBydW5Bc3luY2hyb25vdXNseShhc3luYyAoKSA9PiB7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGF3YWl0IG5leHQoKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB3YWl0VW50aWwyID0gTWF0aC5tYXgoXG4gICAgICAgIHdhaXRVbnRpbDIsXG4gICAgICAgIHBlcmZvcm1hbmNlLm5vdygpICsgKG9wdGlvbnMuZGVib3VuY2VNcyA/PyAwKVxuICAgICAgKTtcbiAgICAgIHF1ZXVlLnB1c2goW3Jlc29sdmUsIHJlamVjdF0pO1xuICAgICAgYWRkZWRUb1F1ZXVlQ2FsbGJhY2tzLmZvckVhY2goKGNiKSA9PiBjYigpKTtcbiAgICB9KTtcbiAgfTtcbn1cbmZ1bmN0aW9uIHRocm90dGxlZChmdW5jLCBkZWxheU1zKSB7XG4gIGxldCB0aW1lb3V0MiA9IG51bGw7XG4gIGxldCBuZXh0QXZhaWxhYmxlID0gbnVsbDtcbiAgcmV0dXJuIGFzeW5jICguLi5hcmdzKSA9PiB7XG4gICAgd2hpbGUgKG5leHRBdmFpbGFibGUgIT09IG51bGwpIHtcbiAgICAgIGF3YWl0IG5leHRBdmFpbGFibGU7XG4gICAgfVxuICAgIG5leHRBdmFpbGFibGUgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgdGltZW91dDIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgbmV4dEF2YWlsYWJsZSA9IG51bGw7XG4gICAgICAgIHJlc29sdmUoZnVuYyguLi5hcmdzKSk7XG4gICAgICB9LCBkZWxheU1zKTtcbiAgICB9KTtcbiAgICByZXR1cm4gYXdhaXQgbmV4dEF2YWlsYWJsZTtcbiAgfTtcbn1cbmV4cG9ydCB7XG4gIGNvbmNhdFN0YWNrdHJhY2VzSWZSZWplY3RlZCxcbiAgY3JlYXRlUHJvbWlzZSxcbiAgaWdub3JlVW5oYW5kbGVkUmVqZWN0aW9uLFxuICBuZXZlclJlc29sdmUsXG4gIHBlbmRpbmcsXG4gIHJhdGVMaW1pdGVkLFxuICByZWplY3RlZCxcbiAgcmVzb2x2ZWQsXG4gIHJ1bkFzeW5jaHJvbm91c2x5LFxuICBydW5Bc3luY2hyb25vdXNseVdpdGhBbGVydCxcbiAgdGhyb3R0bGVkLFxuICB0aW1lb3V0LFxuICB0aW1lb3V0VGhyb3csXG4gIHdhaXQsXG4gIHdhaXRVbnRpbFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb21pc2VzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/promises.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/react.js":
/*!*******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/react.js ***!
  \*******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NoSuspenseBoundaryError: () => (/* binding */ NoSuspenseBoundaryError),\n/* harmony export */   componentWrapper: () => (/* binding */ componentWrapper),\n/* harmony export */   forwardRefIfNeeded: () => (/* binding */ forwardRefIfNeeded),\n/* harmony export */   getNodeText: () => (/* binding */ getNodeText),\n/* harmony export */   mapRef: () => (/* binding */ mapRef),\n/* harmony export */   mapRefState: () => (/* binding */ mapRefState),\n/* harmony export */   suspend: () => (/* binding */ suspend),\n/* harmony export */   suspendIfSsr: () => (/* binding */ suspendIfSsr),\n/* harmony export */   useRefState: () => (/* binding */ useRefState)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(rsc)/./node_modules/.pnpm/next@15.5.4_@opentelemetry+api@1.9.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./env.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/env.js\");\n/* harmony import */ var _promises_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./promises.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/promises.js\");\n/* harmony import */ var _strings_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./strings.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/strings.js\");\n// src/utils/react.tsx\n\n\n\n\nfunction componentWrapper(displayName, render) {\n  const Component = forwardRefIfNeeded(render);\n  Component.displayName = displayName;\n  return Component;\n}\nfunction forwardRefIfNeeded(render) {\n  const version = (react__WEBPACK_IMPORTED_MODULE_0___default().version);\n  const major = parseInt(version.split(\".\")[0]);\n  if (major < 19) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default().forwardRef(render);\n  } else {\n    return (props) => render(props, props.ref);\n  }\n}\nfunction getNodeText(node) {\n  if ([\"number\", \"string\"].includes(typeof node)) {\n    return `${node}`;\n  }\n  if (!node) {\n    return \"\";\n  }\n  if (Array.isArray(node)) {\n    return node.map(getNodeText).join(\"\");\n  }\n  if (typeof node === \"object\" && \"props\" in node) {\n    return getNodeText(node.props.children);\n  }\n  throw new Error(`Unknown node type: ${typeof node}`);\n}\nfunction suspend() {\n  react__WEBPACK_IMPORTED_MODULE_0___default().use((0,_promises_js__WEBPACK_IMPORTED_MODULE_2__.neverResolve)());\n  throw new Error(\"Somehow a Promise that never resolves was resolved?\");\n}\nfunction mapRef(ref, mapper) {\n  let last = null;\n  return {\n    get current() {\n      const input = ref.current;\n      if (last === null || input !== last[0]) {\n        last = [input, mapper(input)];\n      }\n      return last[1];\n    }\n  };\n}\nfunction useRefState(initialValue) {\n  const [, setState] = react__WEBPACK_IMPORTED_MODULE_0___default().useState(initialValue);\n  const ref = react__WEBPACK_IMPORTED_MODULE_0___default().useRef(initialValue);\n  const setValue = react__WEBPACK_IMPORTED_MODULE_0___default().useCallback((updater) => {\n    const value = typeof updater === \"function\" ? updater(ref.current) : updater;\n    console.log(\"setValue\", ref.current);\n    ref.current = value;\n    console.log(\"setValue\", ref.current);\n    setState(value);\n  }, []);\n  const res = react__WEBPACK_IMPORTED_MODULE_0___default().useMemo(() => ({\n    get current() {\n      return ref.current;\n    },\n    set: setValue\n  }), [setValue]);\n  return res;\n}\nfunction mapRefState(refState, mapper, reverseMapper) {\n  let last = null;\n  return {\n    get current() {\n      const input = refState.current;\n      if (last === null || input !== last[0]) {\n        last = [input, mapper(input)];\n      }\n      return last[1];\n    },\n    set(updater) {\n      const value = typeof updater === \"function\" ? updater(this.current) : updater;\n      refState.set(reverseMapper(refState.current, value));\n    }\n  };\n}\nvar NoSuspenseBoundaryError = class extends Error {\n  constructor(options) {\n    super((0,_strings_js__WEBPACK_IMPORTED_MODULE_3__.deindent)`\n      ${options.caller ?? \"This code path\"} attempted to display a loading indicator, but didn't find a Suspense boundary above it. Please read the error message below carefully.\n      \n      The fix depends on which of the 3 scenarios caused it:\n      \n      1. You are missing a loading.tsx file in your app directory. Fix it by adding a loading.tsx file in your app directory.\n\n      2. The component is rendered in the root (outermost) layout.tsx or template.tsx file. Next.js does not wrap those files in a Suspense boundary, even if there is a loading.tsx file in the same folder. To fix it, wrap your layout inside a route group like this:\n\n        - app\n        - - layout.tsx  // contains <html> and <body>, alongside providers and other components that don't need ${options.caller ?? \"this code path\"}\n        - - loading.tsx  // required for suspense\n        - - (main)\n        - - - layout.tsx  // contains the main layout of your app, like a sidebar or a header, and can use ${options.caller ?? \"this code path\"}\n        - - - route.tsx  // your actual main page\n        - - - the rest of your app\n\n        For more information on this approach, see Next's documentation on route groups: https://nextjs.org/docs/app/building-your-application/routing/route-groups\n      \n      3. You caught this error with try-catch or a custom error boundary. Fix this by rethrowing the error or not catching it in the first place.\n\n      See: https://nextjs.org/docs/messages/missing-suspense-with-csr-bailout\n\n      More information on SSR and Suspense boundaries: https://react.dev/reference/react/Suspense#providing-a-fallback-for-server-errors-and-client-only-content\n    `);\n    this.name = \"NoSuspenseBoundaryError\";\n    this.reason = options.caller ?? \"suspendIfSsr()\";\n    this.digest = \"BAILOUT_TO_CLIENT_SIDE_RENDERING\";\n  }\n};\nfunction suspendIfSsr(caller) {\n  if (!(0,_env_js__WEBPACK_IMPORTED_MODULE_1__.isBrowserLike)()) {\n    throw new NoSuspenseBoundaryError({ caller });\n  }\n}\n\n//# sourceMappingURL=react.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvcmVhY3QuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUMwQjtBQUNlO0FBQ0k7QUFDTDtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isc0RBQWE7QUFDL0I7QUFDQTtBQUNBLFdBQVcsdURBQWdCO0FBQzNCLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxLQUFLO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLFlBQVk7QUFDcEQ7QUFDQTtBQUNBLEVBQUUsZ0RBQVMsQ0FBQywwREFBWTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIscURBQWM7QUFDckMsY0FBYyxtREFBWTtBQUMxQixtQkFBbUIsd0RBQWlCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsY0FBYyxvREFBYTtBQUMzQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUscURBQVE7QUFDbEIsUUFBUSxvQ0FBb0M7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxrSEFBa0g7QUFDbEg7QUFDQTtBQUNBLDZHQUE2RztBQUM3RztBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxzREFBYTtBQUNwQix3Q0FBd0MsUUFBUTtBQUNoRDtBQUNBO0FBV0U7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2dmeDJlZGVub2FzaXMvRG93bmxvYWRzL0RldmVsb3BtZW50L0VzcGFkYS9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvcmVhY3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3V0aWxzL3JlYWN0LnRzeFxuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgaXNCcm93c2VyTGlrZSB9IGZyb20gXCIuL2Vudi5qc1wiO1xuaW1wb3J0IHsgbmV2ZXJSZXNvbHZlIH0gZnJvbSBcIi4vcHJvbWlzZXMuanNcIjtcbmltcG9ydCB7IGRlaW5kZW50IH0gZnJvbSBcIi4vc3RyaW5ncy5qc1wiO1xuZnVuY3Rpb24gY29tcG9uZW50V3JhcHBlcihkaXNwbGF5TmFtZSwgcmVuZGVyKSB7XG4gIGNvbnN0IENvbXBvbmVudCA9IGZvcndhcmRSZWZJZk5lZWRlZChyZW5kZXIpO1xuICBDb21wb25lbnQuZGlzcGxheU5hbWUgPSBkaXNwbGF5TmFtZTtcbiAgcmV0dXJuIENvbXBvbmVudDtcbn1cbmZ1bmN0aW9uIGZvcndhcmRSZWZJZk5lZWRlZChyZW5kZXIpIHtcbiAgY29uc3QgdmVyc2lvbiA9IFJlYWN0LnZlcnNpb247XG4gIGNvbnN0IG1ham9yID0gcGFyc2VJbnQodmVyc2lvbi5zcGxpdChcIi5cIilbMF0pO1xuICBpZiAobWFqb3IgPCAxOSkge1xuICAgIHJldHVybiBSZWFjdC5mb3J3YXJkUmVmKHJlbmRlcik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIChwcm9wcykgPT4gcmVuZGVyKHByb3BzLCBwcm9wcy5yZWYpO1xuICB9XG59XG5mdW5jdGlvbiBnZXROb2RlVGV4dChub2RlKSB7XG4gIGlmIChbXCJudW1iZXJcIiwgXCJzdHJpbmdcIl0uaW5jbHVkZXModHlwZW9mIG5vZGUpKSB7XG4gICAgcmV0dXJuIGAke25vZGV9YDtcbiAgfVxuICBpZiAoIW5vZGUpIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShub2RlKSkge1xuICAgIHJldHVybiBub2RlLm1hcChnZXROb2RlVGV4dCkuam9pbihcIlwiKTtcbiAgfVxuICBpZiAodHlwZW9mIG5vZGUgPT09IFwib2JqZWN0XCIgJiYgXCJwcm9wc1wiIGluIG5vZGUpIHtcbiAgICByZXR1cm4gZ2V0Tm9kZVRleHQobm9kZS5wcm9wcy5jaGlsZHJlbik7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIG5vZGUgdHlwZTogJHt0eXBlb2Ygbm9kZX1gKTtcbn1cbmZ1bmN0aW9uIHN1c3BlbmQoKSB7XG4gIFJlYWN0LnVzZShuZXZlclJlc29sdmUoKSk7XG4gIHRocm93IG5ldyBFcnJvcihcIlNvbWVob3cgYSBQcm9taXNlIHRoYXQgbmV2ZXIgcmVzb2x2ZXMgd2FzIHJlc29sdmVkP1wiKTtcbn1cbmZ1bmN0aW9uIG1hcFJlZihyZWYsIG1hcHBlcikge1xuICBsZXQgbGFzdCA9IG51bGw7XG4gIHJldHVybiB7XG4gICAgZ2V0IGN1cnJlbnQoKSB7XG4gICAgICBjb25zdCBpbnB1dCA9IHJlZi5jdXJyZW50O1xuICAgICAgaWYgKGxhc3QgPT09IG51bGwgfHwgaW5wdXQgIT09IGxhc3RbMF0pIHtcbiAgICAgICAgbGFzdCA9IFtpbnB1dCwgbWFwcGVyKGlucHV0KV07XG4gICAgICB9XG4gICAgICByZXR1cm4gbGFzdFsxXTtcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiB1c2VSZWZTdGF0ZShpbml0aWFsVmFsdWUpIHtcbiAgY29uc3QgWywgc2V0U3RhdGVdID0gUmVhY3QudXNlU3RhdGUoaW5pdGlhbFZhbHVlKTtcbiAgY29uc3QgcmVmID0gUmVhY3QudXNlUmVmKGluaXRpYWxWYWx1ZSk7XG4gIGNvbnN0IHNldFZhbHVlID0gUmVhY3QudXNlQ2FsbGJhY2soKHVwZGF0ZXIpID0+IHtcbiAgICBjb25zdCB2YWx1ZSA9IHR5cGVvZiB1cGRhdGVyID09PSBcImZ1bmN0aW9uXCIgPyB1cGRhdGVyKHJlZi5jdXJyZW50KSA6IHVwZGF0ZXI7XG4gICAgY29uc29sZS5sb2coXCJzZXRWYWx1ZVwiLCByZWYuY3VycmVudCk7XG4gICAgcmVmLmN1cnJlbnQgPSB2YWx1ZTtcbiAgICBjb25zb2xlLmxvZyhcInNldFZhbHVlXCIsIHJlZi5jdXJyZW50KTtcbiAgICBzZXRTdGF0ZSh2YWx1ZSk7XG4gIH0sIFtdKTtcbiAgY29uc3QgcmVzID0gUmVhY3QudXNlTWVtbygoKSA9PiAoe1xuICAgIGdldCBjdXJyZW50KCkge1xuICAgICAgcmV0dXJuIHJlZi5jdXJyZW50O1xuICAgIH0sXG4gICAgc2V0OiBzZXRWYWx1ZVxuICB9KSwgW3NldFZhbHVlXSk7XG4gIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiBtYXBSZWZTdGF0ZShyZWZTdGF0ZSwgbWFwcGVyLCByZXZlcnNlTWFwcGVyKSB7XG4gIGxldCBsYXN0ID0gbnVsbDtcbiAgcmV0dXJuIHtcbiAgICBnZXQgY3VycmVudCgpIHtcbiAgICAgIGNvbnN0IGlucHV0ID0gcmVmU3RhdGUuY3VycmVudDtcbiAgICAgIGlmIChsYXN0ID09PSBudWxsIHx8IGlucHV0ICE9PSBsYXN0WzBdKSB7XG4gICAgICAgIGxhc3QgPSBbaW5wdXQsIG1hcHBlcihpbnB1dCldO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGxhc3RbMV07XG4gICAgfSxcbiAgICBzZXQodXBkYXRlcikge1xuICAgICAgY29uc3QgdmFsdWUgPSB0eXBlb2YgdXBkYXRlciA9PT0gXCJmdW5jdGlvblwiID8gdXBkYXRlcih0aGlzLmN1cnJlbnQpIDogdXBkYXRlcjtcbiAgICAgIHJlZlN0YXRlLnNldChyZXZlcnNlTWFwcGVyKHJlZlN0YXRlLmN1cnJlbnQsIHZhbHVlKSk7XG4gICAgfVxuICB9O1xufVxudmFyIE5vU3VzcGVuc2VCb3VuZGFyeUVycm9yID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBzdXBlcihkZWluZGVudGBcbiAgICAgICR7b3B0aW9ucy5jYWxsZXIgPz8gXCJUaGlzIGNvZGUgcGF0aFwifSBhdHRlbXB0ZWQgdG8gZGlzcGxheSBhIGxvYWRpbmcgaW5kaWNhdG9yLCBidXQgZGlkbid0IGZpbmQgYSBTdXNwZW5zZSBib3VuZGFyeSBhYm92ZSBpdC4gUGxlYXNlIHJlYWQgdGhlIGVycm9yIG1lc3NhZ2UgYmVsb3cgY2FyZWZ1bGx5LlxuICAgICAgXG4gICAgICBUaGUgZml4IGRlcGVuZHMgb24gd2hpY2ggb2YgdGhlIDMgc2NlbmFyaW9zIGNhdXNlZCBpdDpcbiAgICAgIFxuICAgICAgMS4gWW91IGFyZSBtaXNzaW5nIGEgbG9hZGluZy50c3ggZmlsZSBpbiB5b3VyIGFwcCBkaXJlY3RvcnkuIEZpeCBpdCBieSBhZGRpbmcgYSBsb2FkaW5nLnRzeCBmaWxlIGluIHlvdXIgYXBwIGRpcmVjdG9yeS5cblxuICAgICAgMi4gVGhlIGNvbXBvbmVudCBpcyByZW5kZXJlZCBpbiB0aGUgcm9vdCAob3V0ZXJtb3N0KSBsYXlvdXQudHN4IG9yIHRlbXBsYXRlLnRzeCBmaWxlLiBOZXh0LmpzIGRvZXMgbm90IHdyYXAgdGhvc2UgZmlsZXMgaW4gYSBTdXNwZW5zZSBib3VuZGFyeSwgZXZlbiBpZiB0aGVyZSBpcyBhIGxvYWRpbmcudHN4IGZpbGUgaW4gdGhlIHNhbWUgZm9sZGVyLiBUbyBmaXggaXQsIHdyYXAgeW91ciBsYXlvdXQgaW5zaWRlIGEgcm91dGUgZ3JvdXAgbGlrZSB0aGlzOlxuXG4gICAgICAgIC0gYXBwXG4gICAgICAgIC0gLSBsYXlvdXQudHN4ICAvLyBjb250YWlucyA8aHRtbD4gYW5kIDxib2R5PiwgYWxvbmdzaWRlIHByb3ZpZGVycyBhbmQgb3RoZXIgY29tcG9uZW50cyB0aGF0IGRvbid0IG5lZWQgJHtvcHRpb25zLmNhbGxlciA/PyBcInRoaXMgY29kZSBwYXRoXCJ9XG4gICAgICAgIC0gLSBsb2FkaW5nLnRzeCAgLy8gcmVxdWlyZWQgZm9yIHN1c3BlbnNlXG4gICAgICAgIC0gLSAobWFpbilcbiAgICAgICAgLSAtIC0gbGF5b3V0LnRzeCAgLy8gY29udGFpbnMgdGhlIG1haW4gbGF5b3V0IG9mIHlvdXIgYXBwLCBsaWtlIGEgc2lkZWJhciBvciBhIGhlYWRlciwgYW5kIGNhbiB1c2UgJHtvcHRpb25zLmNhbGxlciA/PyBcInRoaXMgY29kZSBwYXRoXCJ9XG4gICAgICAgIC0gLSAtIHJvdXRlLnRzeCAgLy8geW91ciBhY3R1YWwgbWFpbiBwYWdlXG4gICAgICAgIC0gLSAtIHRoZSByZXN0IG9mIHlvdXIgYXBwXG5cbiAgICAgICAgRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gdGhpcyBhcHByb2FjaCwgc2VlIE5leHQncyBkb2N1bWVudGF0aW9uIG9uIHJvdXRlIGdyb3VwczogaHR0cHM6Ly9uZXh0anMub3JnL2RvY3MvYXBwL2J1aWxkaW5nLXlvdXItYXBwbGljYXRpb24vcm91dGluZy9yb3V0ZS1ncm91cHNcbiAgICAgIFxuICAgICAgMy4gWW91IGNhdWdodCB0aGlzIGVycm9yIHdpdGggdHJ5LWNhdGNoIG9yIGEgY3VzdG9tIGVycm9yIGJvdW5kYXJ5LiBGaXggdGhpcyBieSByZXRocm93aW5nIHRoZSBlcnJvciBvciBub3QgY2F0Y2hpbmcgaXQgaW4gdGhlIGZpcnN0IHBsYWNlLlxuXG4gICAgICBTZWU6IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL21lc3NhZ2VzL21pc3Npbmctc3VzcGVuc2Utd2l0aC1jc3ItYmFpbG91dFxuXG4gICAgICBNb3JlIGluZm9ybWF0aW9uIG9uIFNTUiBhbmQgU3VzcGVuc2UgYm91bmRhcmllczogaHR0cHM6Ly9yZWFjdC5kZXYvcmVmZXJlbmNlL3JlYWN0L1N1c3BlbnNlI3Byb3ZpZGluZy1hLWZhbGxiYWNrLWZvci1zZXJ2ZXItZXJyb3JzLWFuZC1jbGllbnQtb25seS1jb250ZW50XG4gICAgYCk7XG4gICAgdGhpcy5uYW1lID0gXCJOb1N1c3BlbnNlQm91bmRhcnlFcnJvclwiO1xuICAgIHRoaXMucmVhc29uID0gb3B0aW9ucy5jYWxsZXIgPz8gXCJzdXNwZW5kSWZTc3IoKVwiO1xuICAgIHRoaXMuZGlnZXN0ID0gXCJCQUlMT1VUX1RPX0NMSUVOVF9TSURFX1JFTkRFUklOR1wiO1xuICB9XG59O1xuZnVuY3Rpb24gc3VzcGVuZElmU3NyKGNhbGxlcikge1xuICBpZiAoIWlzQnJvd3Nlckxpa2UoKSkge1xuICAgIHRocm93IG5ldyBOb1N1c3BlbnNlQm91bmRhcnlFcnJvcih7IGNhbGxlciB9KTtcbiAgfVxufVxuZXhwb3J0IHtcbiAgTm9TdXNwZW5zZUJvdW5kYXJ5RXJyb3IsXG4gIGNvbXBvbmVudFdyYXBwZXIsXG4gIGZvcndhcmRSZWZJZk5lZWRlZCxcbiAgZ2V0Tm9kZVRleHQsXG4gIG1hcFJlZixcbiAgbWFwUmVmU3RhdGUsXG4gIHN1c3BlbmQsXG4gIHN1c3BlbmRJZlNzcixcbiAgdXNlUmVmU3RhdGVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFjdC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/react.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/results.js":
/*!*********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/results.js ***!
  \*********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncResult: () => (/* binding */ AsyncResult),\n/* harmony export */   Result: () => (/* binding */ Result)\n/* harmony export */ });\n/* harmony import */ var _promises_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./promises.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/promises.js\");\n/* harmony import */ var _strings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./strings.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/strings.js\");\n// src/utils/results.tsx\n\n\nvar Result = {\n  fromThrowing,\n  fromThrowingAsync,\n  fromPromise: promiseToResult,\n  ok(data) {\n    return {\n      status: \"ok\",\n      data\n    };\n  },\n  error(error) {\n    return {\n      status: \"error\",\n      error\n    };\n  },\n  map: mapResult,\n  or: (result, fallback) => {\n    return result.status === \"ok\" ? result.data : fallback;\n  },\n  orThrow: (result) => {\n    if (result.status === \"error\") {\n      throw result.error;\n    }\n    return result.data;\n  },\n  orThrowAsync: async (result) => {\n    return Result.orThrow(await result);\n  },\n  retry\n};\nvar AsyncResult = {\n  fromThrowing,\n  fromPromise: promiseToResult,\n  ok: Result.ok,\n  error: Result.error,\n  pending,\n  map: mapResult,\n  or: (result, fallback) => {\n    if (result.status === \"pending\") {\n      return fallback;\n    }\n    return Result.or(result, fallback);\n  },\n  orThrow: (result) => {\n    if (result.status === \"pending\") {\n      throw new Error(\"Result still pending\");\n    }\n    return Result.orThrow(result);\n  },\n  retry\n};\nfunction pending(progress) {\n  return {\n    status: \"pending\",\n    progress\n  };\n}\nasync function promiseToResult(promise) {\n  try {\n    const value = await promise;\n    return Result.ok(value);\n  } catch (error) {\n    return Result.error(error);\n  }\n}\nfunction fromThrowing(fn) {\n  try {\n    return Result.ok(fn());\n  } catch (error) {\n    return Result.error(error);\n  }\n}\nasync function fromThrowingAsync(fn) {\n  try {\n    return Result.ok(await fn());\n  } catch (error) {\n    return Result.error(error);\n  }\n}\nfunction mapResult(result, fn) {\n  if (result.status === \"error\") return {\n    status: \"error\",\n    error: result.error\n  };\n  if (result.status === \"pending\") return {\n    status: \"pending\",\n    ...\"progress\" in result ? { progress: result.progress } : {}\n  };\n  return Result.ok(fn(result.data));\n}\nvar RetryError = class extends AggregateError {\n  constructor(errors) {\n    const strings = errors.map((e) => (0,_strings_js__WEBPACK_IMPORTED_MODULE_1__.nicify)(e));\n    const isAllSame = strings.length > 1 && strings.every((s) => s === strings[0]);\n    super(\n      errors,\n      (0,_strings_js__WEBPACK_IMPORTED_MODULE_1__.deindent)`\n      Error after ${errors.length} attempts.\n      \n      ${isAllSame ? (0,_strings_js__WEBPACK_IMPORTED_MODULE_1__.deindent)`\n        Attempts 1-${errors.length}:\n          ${strings[0]}\n      ` : strings.map((s, i) => (0,_strings_js__WEBPACK_IMPORTED_MODULE_1__.deindent)`\n          Attempt ${i + 1}:\n            ${s}\n        `).join(\"\\n\\n\")}\n      `,\n      { cause: errors[errors.length - 1] }\n    );\n    this.errors = errors;\n    this.name = \"RetryError\";\n  }\n  get attempts() {\n    return this.errors.length;\n  }\n};\nRetryError.prototype.name = \"RetryError\";\nasync function retry(fn, totalAttempts, { exponentialDelayBase = 1e3 } = {}) {\n  const errors = [];\n  for (let i = 0; i < totalAttempts; i++) {\n    const res = await fn(i);\n    if (res.status === \"ok\") {\n      return Object.assign(Result.ok(res.data), { attempts: i + 1 });\n    } else {\n      errors.push(res.error);\n      if (i < totalAttempts - 1) {\n        await (0,_promises_js__WEBPACK_IMPORTED_MODULE_0__.wait)((Math.random() + 0.5) * exponentialDelayBase * 2 ** i);\n      }\n    }\n  }\n  return Object.assign(Result.error(new RetryError(errors)), { attempts: totalAttempts });\n}\n\n//# sourceMappingURL=results.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvcmVzdWx0cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDcUM7QUFDVztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyw0QkFBNEI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxtREFBTTtBQUM1QztBQUNBO0FBQ0E7QUFDQSxNQUFNLHFEQUFRO0FBQ2Qsb0JBQW9CLGVBQWU7QUFDbkM7QUFDQSxRQUFRLFlBQVkscURBQVE7QUFDNUIscUJBQXFCLGNBQWM7QUFDbkMsWUFBWTtBQUNaLGdDQUFnQyxxREFBUTtBQUN4QyxvQkFBb0IsTUFBTTtBQUMxQixjQUFjO0FBQ2Q7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsNkJBQTZCLElBQUk7QUFDM0U7QUFDQSxrQkFBa0IsbUJBQW1CO0FBQ3JDO0FBQ0E7QUFDQSxrREFBa0QsaUJBQWlCO0FBQ25FLE1BQU07QUFDTjtBQUNBO0FBQ0EsY0FBYyxrREFBSTtBQUNsQjtBQUNBO0FBQ0E7QUFDQSwrREFBK0QseUJBQXlCO0FBQ3hGO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2dmeDJlZGVub2FzaXMvRG93bmxvYWRzL0RldmVsb3BtZW50L0VzcGFkYS9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvcmVzdWx0cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvcmVzdWx0cy50c3hcbmltcG9ydCB7IHdhaXQgfSBmcm9tIFwiLi9wcm9taXNlcy5qc1wiO1xuaW1wb3J0IHsgZGVpbmRlbnQsIG5pY2lmeSB9IGZyb20gXCIuL3N0cmluZ3MuanNcIjtcbnZhciBSZXN1bHQgPSB7XG4gIGZyb21UaHJvd2luZyxcbiAgZnJvbVRocm93aW5nQXN5bmMsXG4gIGZyb21Qcm9taXNlOiBwcm9taXNlVG9SZXN1bHQsXG4gIG9rKGRhdGEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiBcIm9rXCIsXG4gICAgICBkYXRhXG4gICAgfTtcbiAgfSxcbiAgZXJyb3IoZXJyb3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICBlcnJvclxuICAgIH07XG4gIH0sXG4gIG1hcDogbWFwUmVzdWx0LFxuICBvcjogKHJlc3VsdCwgZmFsbGJhY2spID0+IHtcbiAgICByZXR1cm4gcmVzdWx0LnN0YXR1cyA9PT0gXCJva1wiID8gcmVzdWx0LmRhdGEgOiBmYWxsYmFjaztcbiAgfSxcbiAgb3JUaHJvdzogKHJlc3VsdCkgPT4ge1xuICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgIHRocm93IHJlc3VsdC5lcnJvcjtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICB9LFxuICBvclRocm93QXN5bmM6IGFzeW5jIChyZXN1bHQpID0+IHtcbiAgICByZXR1cm4gUmVzdWx0Lm9yVGhyb3coYXdhaXQgcmVzdWx0KTtcbiAgfSxcbiAgcmV0cnlcbn07XG52YXIgQXN5bmNSZXN1bHQgPSB7XG4gIGZyb21UaHJvd2luZyxcbiAgZnJvbVByb21pc2U6IHByb21pc2VUb1Jlc3VsdCxcbiAgb2s6IFJlc3VsdC5vayxcbiAgZXJyb3I6IFJlc3VsdC5lcnJvcixcbiAgcGVuZGluZyxcbiAgbWFwOiBtYXBSZXN1bHQsXG4gIG9yOiAocmVzdWx0LCBmYWxsYmFjaykgPT4ge1xuICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcInBlbmRpbmdcIikge1xuICAgICAgcmV0dXJuIGZhbGxiYWNrO1xuICAgIH1cbiAgICByZXR1cm4gUmVzdWx0Lm9yKHJlc3VsdCwgZmFsbGJhY2spO1xuICB9LFxuICBvclRocm93OiAocmVzdWx0KSA9PiB7XG4gICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwicGVuZGluZ1wiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZXN1bHQgc3RpbGwgcGVuZGluZ1wiKTtcbiAgICB9XG4gICAgcmV0dXJuIFJlc3VsdC5vclRocm93KHJlc3VsdCk7XG4gIH0sXG4gIHJldHJ5XG59O1xuZnVuY3Rpb24gcGVuZGluZyhwcm9ncmVzcykge1xuICByZXR1cm4ge1xuICAgIHN0YXR1czogXCJwZW5kaW5nXCIsXG4gICAgcHJvZ3Jlc3NcbiAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHByb21pc2VUb1Jlc3VsdChwcm9taXNlKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdmFsdWUgPSBhd2FpdCBwcm9taXNlO1xuICAgIHJldHVybiBSZXN1bHQub2sodmFsdWUpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBSZXN1bHQuZXJyb3IoZXJyb3IpO1xuICB9XG59XG5mdW5jdGlvbiBmcm9tVGhyb3dpbmcoZm4pIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gUmVzdWx0Lm9rKGZuKCkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBSZXN1bHQuZXJyb3IoZXJyb3IpO1xuICB9XG59XG5hc3luYyBmdW5jdGlvbiBmcm9tVGhyb3dpbmdBc3luYyhmbikge1xuICB0cnkge1xuICAgIHJldHVybiBSZXN1bHQub2soYXdhaXQgZm4oKSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIFJlc3VsdC5lcnJvcihlcnJvcik7XG4gIH1cbn1cbmZ1bmN0aW9uIG1hcFJlc3VsdChyZXN1bHQsIGZuKSB7XG4gIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImVycm9yXCIpIHJldHVybiB7XG4gICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgZXJyb3I6IHJlc3VsdC5lcnJvclxuICB9O1xuICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJwZW5kaW5nXCIpIHJldHVybiB7XG4gICAgc3RhdHVzOiBcInBlbmRpbmdcIixcbiAgICAuLi5cInByb2dyZXNzXCIgaW4gcmVzdWx0ID8geyBwcm9ncmVzczogcmVzdWx0LnByb2dyZXNzIH0gOiB7fVxuICB9O1xuICByZXR1cm4gUmVzdWx0Lm9rKGZuKHJlc3VsdC5kYXRhKSk7XG59XG52YXIgUmV0cnlFcnJvciA9IGNsYXNzIGV4dGVuZHMgQWdncmVnYXRlRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihlcnJvcnMpIHtcbiAgICBjb25zdCBzdHJpbmdzID0gZXJyb3JzLm1hcCgoZSkgPT4gbmljaWZ5KGUpKTtcbiAgICBjb25zdCBpc0FsbFNhbWUgPSBzdHJpbmdzLmxlbmd0aCA+IDEgJiYgc3RyaW5ncy5ldmVyeSgocykgPT4gcyA9PT0gc3RyaW5nc1swXSk7XG4gICAgc3VwZXIoXG4gICAgICBlcnJvcnMsXG4gICAgICBkZWluZGVudGBcbiAgICAgIEVycm9yIGFmdGVyICR7ZXJyb3JzLmxlbmd0aH0gYXR0ZW1wdHMuXG4gICAgICBcbiAgICAgICR7aXNBbGxTYW1lID8gZGVpbmRlbnRgXG4gICAgICAgIEF0dGVtcHRzIDEtJHtlcnJvcnMubGVuZ3RofTpcbiAgICAgICAgICAke3N0cmluZ3NbMF19XG4gICAgICBgIDogc3RyaW5ncy5tYXAoKHMsIGkpID0+IGRlaW5kZW50YFxuICAgICAgICAgIEF0dGVtcHQgJHtpICsgMX06XG4gICAgICAgICAgICAke3N9XG4gICAgICAgIGApLmpvaW4oXCJcXG5cXG5cIil9XG4gICAgICBgLFxuICAgICAgeyBjYXVzZTogZXJyb3JzW2Vycm9ycy5sZW5ndGggLSAxXSB9XG4gICAgKTtcbiAgICB0aGlzLmVycm9ycyA9IGVycm9ycztcbiAgICB0aGlzLm5hbWUgPSBcIlJldHJ5RXJyb3JcIjtcbiAgfVxuICBnZXQgYXR0ZW1wdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZXJyb3JzLmxlbmd0aDtcbiAgfVxufTtcblJldHJ5RXJyb3IucHJvdG90eXBlLm5hbWUgPSBcIlJldHJ5RXJyb3JcIjtcbmFzeW5jIGZ1bmN0aW9uIHJldHJ5KGZuLCB0b3RhbEF0dGVtcHRzLCB7IGV4cG9uZW50aWFsRGVsYXlCYXNlID0gMWUzIH0gPSB7fSkge1xuICBjb25zdCBlcnJvcnMgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbEF0dGVtcHRzOyBpKyspIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmbihpKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJva1wiKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihSZXN1bHQub2socmVzLmRhdGEpLCB7IGF0dGVtcHRzOiBpICsgMSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXJyb3JzLnB1c2gocmVzLmVycm9yKTtcbiAgICAgIGlmIChpIDwgdG90YWxBdHRlbXB0cyAtIDEpIHtcbiAgICAgICAgYXdhaXQgd2FpdCgoTWF0aC5yYW5kb20oKSArIDAuNSkgKiBleHBvbmVudGlhbERlbGF5QmFzZSAqIDIgKiogaSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBPYmplY3QuYXNzaWduKFJlc3VsdC5lcnJvcihuZXcgUmV0cnlFcnJvcihlcnJvcnMpKSwgeyBhdHRlbXB0czogdG90YWxBdHRlbXB0cyB9KTtcbn1cbmV4cG9ydCB7XG4gIEFzeW5jUmVzdWx0LFxuICBSZXN1bHRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXN1bHRzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/results.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/stores.js":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/stores.js ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncStore: () => (/* binding */ AsyncStore),\n/* harmony export */   Store: () => (/* binding */ Store),\n/* harmony export */   storeLock: () => (/* binding */ storeLock)\n/* harmony export */ });\n/* harmony import */ var _locks_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./locks.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/locks.js\");\n/* harmony import */ var _promises_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./promises.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/promises.js\");\n/* harmony import */ var _results_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./results.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/results.js\");\n/* harmony import */ var _uuids_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./uuids.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/uuids.js\");\n// src/utils/stores.tsx\n\n\n\n\nvar Store = class {\n  constructor(_value) {\n    this._value = _value;\n    this._callbacks = /* @__PURE__ */ new Map();\n  }\n  get() {\n    return this._value;\n  }\n  set(value) {\n    const oldValue = this._value;\n    this._value = value;\n    this._callbacks.forEach((callback) => callback(value, oldValue));\n  }\n  update(updater) {\n    const value = updater(this._value);\n    this.set(value);\n    return value;\n  }\n  onChange(callback) {\n    const uuid = (0,_uuids_js__WEBPACK_IMPORTED_MODULE_3__.generateUuid)();\n    this._callbacks.set(uuid, callback);\n    return {\n      unsubscribe: () => {\n        this._callbacks.delete(uuid);\n      }\n    };\n  }\n  onceChange(callback) {\n    const { unsubscribe } = this.onChange((...args) => {\n      unsubscribe();\n      callback(...args);\n    });\n    return { unsubscribe };\n  }\n};\nvar storeLock = new _locks_js__WEBPACK_IMPORTED_MODULE_0__.ReadWriteLock();\nvar AsyncStore = class _AsyncStore {\n  constructor(...args) {\n    this._mostRecentOkValue = void 0;\n    this._isRejected = false;\n    this._waitingRejectFunctions = /* @__PURE__ */ new Map();\n    this._callbacks = /* @__PURE__ */ new Map();\n    this._updateCounter = 0;\n    this._lastSuccessfulUpdate = -1;\n    if (args.length === 0) {\n      this._isAvailable = false;\n    } else {\n      this._isAvailable = true;\n      this._mostRecentOkValue = args[0];\n    }\n  }\n  isAvailable() {\n    return this._isAvailable;\n  }\n  isRejected() {\n    return this._isRejected;\n  }\n  get() {\n    if (this.isRejected()) {\n      return _results_js__WEBPACK_IMPORTED_MODULE_2__.AsyncResult.error(this._rejectionError);\n    } else if (this.isAvailable()) {\n      return _results_js__WEBPACK_IMPORTED_MODULE_2__.AsyncResult.ok(this._mostRecentOkValue);\n    } else {\n      return _results_js__WEBPACK_IMPORTED_MODULE_2__.AsyncResult.pending();\n    }\n  }\n  getOrWait() {\n    const uuid = (0,_uuids_js__WEBPACK_IMPORTED_MODULE_3__.generateUuid)();\n    if (this.isRejected()) {\n      return (0,_promises_js__WEBPACK_IMPORTED_MODULE_1__.rejected)(this._rejectionError);\n    } else if (this.isAvailable()) {\n      return (0,_promises_js__WEBPACK_IMPORTED_MODULE_1__.resolved)(this._mostRecentOkValue);\n    }\n    const promise = new Promise((resolve, reject) => {\n      this.onceChange((value) => {\n        resolve(value);\n      });\n      this._waitingRejectFunctions.set(uuid, reject);\n    });\n    const withFinally = promise.finally(() => {\n      this._waitingRejectFunctions.delete(uuid);\n    });\n    return (0,_promises_js__WEBPACK_IMPORTED_MODULE_1__.pending)(withFinally);\n  }\n  _setIfLatest(result, curCounter) {\n    const oldState = this.get();\n    const oldValue = this._mostRecentOkValue;\n    if (curCounter > this._lastSuccessfulUpdate) {\n      switch (result.status) {\n        case \"ok\": {\n          if (!this._isAvailable || this._isRejected || this._mostRecentOkValue !== result.data) {\n            this._lastSuccessfulUpdate = curCounter;\n            this._isAvailable = true;\n            this._isRejected = false;\n            this._mostRecentOkValue = result.data;\n            this._rejectionError = void 0;\n            this._callbacks.forEach((callback) => callback({\n              state: this.get(),\n              oldState,\n              lastOkValue: oldValue\n            }));\n            return true;\n          }\n          return false;\n        }\n        case \"error\": {\n          this._lastSuccessfulUpdate = curCounter;\n          this._isAvailable = false;\n          this._isRejected = true;\n          this._rejectionError = result.error;\n          this._waitingRejectFunctions.forEach((reject) => reject(result.error));\n          this._callbacks.forEach((callback) => callback({\n            state: this.get(),\n            oldState,\n            lastOkValue: oldValue\n          }));\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n  set(value) {\n    this._setIfLatest(_results_js__WEBPACK_IMPORTED_MODULE_2__.Result.ok(value), ++this._updateCounter);\n  }\n  update(updater) {\n    const value = updater(this._mostRecentOkValue);\n    this.set(value);\n    return value;\n  }\n  async setAsync(promise) {\n    return await storeLock.withReadLock(async () => {\n      const curCounter = ++this._updateCounter;\n      const result = await _results_js__WEBPACK_IMPORTED_MODULE_2__.Result.fromPromise(promise);\n      return this._setIfLatest(result, curCounter);\n    });\n  }\n  setUnavailable() {\n    this._lastSuccessfulUpdate = ++this._updateCounter;\n    this._isAvailable = false;\n    this._isRejected = false;\n    this._rejectionError = void 0;\n  }\n  setRejected(error) {\n    this._setIfLatest(_results_js__WEBPACK_IMPORTED_MODULE_2__.Result.error(error), ++this._updateCounter);\n  }\n  map(mapper) {\n    const store = new _AsyncStore();\n    this.onChange((value) => {\n      store.set(mapper(value));\n    });\n    return store;\n  }\n  onChange(callback) {\n    return this.onStateChange(({ state, lastOkValue }) => {\n      if (state.status === \"ok\") {\n        callback(state.data, lastOkValue);\n      }\n    });\n  }\n  onStateChange(callback) {\n    const uuid = (0,_uuids_js__WEBPACK_IMPORTED_MODULE_3__.generateUuid)();\n    this._callbacks.set(uuid, callback);\n    return {\n      unsubscribe: () => {\n        this._callbacks.delete(uuid);\n      }\n    };\n  }\n  onceChange(callback) {\n    const { unsubscribe } = this.onChange((...args) => {\n      unsubscribe();\n      callback(...args);\n    });\n    return { unsubscribe };\n  }\n  onceStateChange(callback) {\n    const { unsubscribe } = this.onStateChange((...args) => {\n      unsubscribe();\n      callback(...args);\n    });\n    return { unsubscribe };\n  }\n};\n\n//# sourceMappingURL=stores.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvc3RvcmVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUMyQztBQUNpQjtBQUNUO0FBQ1Q7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsdURBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksY0FBYztBQUMxQjtBQUNBO0FBQ0EsS0FBSztBQUNMLGFBQWE7QUFDYjtBQUNBO0FBQ0Esb0JBQW9CLG9EQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsb0RBQVc7QUFDeEIsTUFBTTtBQUNOLGFBQWEsb0RBQVc7QUFDeEIsTUFBTTtBQUNOLGFBQWEsb0RBQVc7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHVEQUFZO0FBQzdCO0FBQ0EsYUFBYSxzREFBUTtBQUNyQixNQUFNO0FBQ04sYUFBYSxzREFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMLFdBQVcscURBQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLCtDQUFNO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiwrQ0FBTTtBQUNqQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLCtDQUFNO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLG9CQUFvQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGlCQUFpQix1REFBWTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxjQUFjO0FBQzFCO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsYUFBYTtBQUNiO0FBQ0E7QUFDQSxZQUFZLGNBQWM7QUFDMUI7QUFDQTtBQUNBLEtBQUs7QUFDTCxhQUFhO0FBQ2I7QUFDQTtBQUtFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZngyZWRlbm9hc2lzL0Rvd25sb2Fkcy9EZXZlbG9wbWVudC9Fc3BhZGEvbm9kZV9tb2R1bGVzLy5wbnBtL0BzdGFja2ZyYW1lK3N0YWNrLXNoYXJlZEAyLjguNDFfQGF3cy1zZGsrY3JlZGVudGlhbC1wcm92aWRlci13ZWItaWRlbnRpdHlAMy45MDEuMF9AdHlwZV83NGRiYTAxZjZkODllNzIwODk2YjRkZjM0NTgzMzk5MC9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvZXNtL3V0aWxzL3N0b3Jlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvc3RvcmVzLnRzeFxuaW1wb3J0IHsgUmVhZFdyaXRlTG9jayB9IGZyb20gXCIuL2xvY2tzLmpzXCI7XG5pbXBvcnQgeyBwZW5kaW5nLCByZWplY3RlZCwgcmVzb2x2ZWQgfSBmcm9tIFwiLi9wcm9taXNlcy5qc1wiO1xuaW1wb3J0IHsgQXN5bmNSZXN1bHQsIFJlc3VsdCB9IGZyb20gXCIuL3Jlc3VsdHMuanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlVXVpZCB9IGZyb20gXCIuL3V1aWRzLmpzXCI7XG52YXIgU3RvcmUgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKF92YWx1ZSkge1xuICAgIHRoaXMuX3ZhbHVlID0gX3ZhbHVlO1xuICAgIHRoaXMuX2NhbGxiYWNrcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIH1cbiAgZ2V0KCkge1xuICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgfVxuICBzZXQodmFsdWUpIHtcbiAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMuX3ZhbHVlO1xuICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy5fY2FsbGJhY2tzLmZvckVhY2goKGNhbGxiYWNrKSA9PiBjYWxsYmFjayh2YWx1ZSwgb2xkVmFsdWUpKTtcbiAgfVxuICB1cGRhdGUodXBkYXRlcikge1xuICAgIGNvbnN0IHZhbHVlID0gdXBkYXRlcih0aGlzLl92YWx1ZSk7XG4gICAgdGhpcy5zZXQodmFsdWUpO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBvbkNoYW5nZShjYWxsYmFjaykge1xuICAgIGNvbnN0IHV1aWQgPSBnZW5lcmF0ZVV1aWQoKTtcbiAgICB0aGlzLl9jYWxsYmFja3Muc2V0KHV1aWQsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4ge1xuICAgICAgdW5zdWJzY3JpYmU6ICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzLmRlbGV0ZSh1dWlkKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIG9uY2VDaGFuZ2UoY2FsbGJhY2spIHtcbiAgICBjb25zdCB7IHVuc3Vic2NyaWJlIH0gPSB0aGlzLm9uQ2hhbmdlKCguLi5hcmdzKSA9PiB7XG4gICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgY2FsbGJhY2soLi4uYXJncyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHsgdW5zdWJzY3JpYmUgfTtcbiAgfVxufTtcbnZhciBzdG9yZUxvY2sgPSBuZXcgUmVhZFdyaXRlTG9jaygpO1xudmFyIEFzeW5jU3RvcmUgPSBjbGFzcyBfQXN5bmNTdG9yZSB7XG4gIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHtcbiAgICB0aGlzLl9tb3N0UmVjZW50T2tWYWx1ZSA9IHZvaWQgMDtcbiAgICB0aGlzLl9pc1JlamVjdGVkID0gZmFsc2U7XG4gICAgdGhpcy5fd2FpdGluZ1JlamVjdEZ1bmN0aW9ucyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgdGhpcy5fY2FsbGJhY2tzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICB0aGlzLl91cGRhdGVDb3VudGVyID0gMDtcbiAgICB0aGlzLl9sYXN0U3VjY2Vzc2Z1bFVwZGF0ZSA9IC0xO1xuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5faXNBdmFpbGFibGUgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faXNBdmFpbGFibGUgPSB0cnVlO1xuICAgICAgdGhpcy5fbW9zdFJlY2VudE9rVmFsdWUgPSBhcmdzWzBdO1xuICAgIH1cbiAgfVxuICBpc0F2YWlsYWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNBdmFpbGFibGU7XG4gIH1cbiAgaXNSZWplY3RlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNSZWplY3RlZDtcbiAgfVxuICBnZXQoKSB7XG4gICAgaWYgKHRoaXMuaXNSZWplY3RlZCgpKSB7XG4gICAgICByZXR1cm4gQXN5bmNSZXN1bHQuZXJyb3IodGhpcy5fcmVqZWN0aW9uRXJyb3IpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5pc0F2YWlsYWJsZSgpKSB7XG4gICAgICByZXR1cm4gQXN5bmNSZXN1bHQub2sodGhpcy5fbW9zdFJlY2VudE9rVmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gQXN5bmNSZXN1bHQucGVuZGluZygpO1xuICAgIH1cbiAgfVxuICBnZXRPcldhaXQoKSB7XG4gICAgY29uc3QgdXVpZCA9IGdlbmVyYXRlVXVpZCgpO1xuICAgIGlmICh0aGlzLmlzUmVqZWN0ZWQoKSkge1xuICAgICAgcmV0dXJuIHJlamVjdGVkKHRoaXMuX3JlamVjdGlvbkVycm9yKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNBdmFpbGFibGUoKSkge1xuICAgICAgcmV0dXJuIHJlc29sdmVkKHRoaXMuX21vc3RSZWNlbnRPa1ZhbHVlKTtcbiAgICB9XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMub25jZUNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuX3dhaXRpbmdSZWplY3RGdW5jdGlvbnMuc2V0KHV1aWQsIHJlamVjdCk7XG4gICAgfSk7XG4gICAgY29uc3Qgd2l0aEZpbmFsbHkgPSBwcm9taXNlLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgdGhpcy5fd2FpdGluZ1JlamVjdEZ1bmN0aW9ucy5kZWxldGUodXVpZCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHBlbmRpbmcod2l0aEZpbmFsbHkpO1xuICB9XG4gIF9zZXRJZkxhdGVzdChyZXN1bHQsIGN1ckNvdW50ZXIpIHtcbiAgICBjb25zdCBvbGRTdGF0ZSA9IHRoaXMuZ2V0KCk7XG4gICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLl9tb3N0UmVjZW50T2tWYWx1ZTtcbiAgICBpZiAoY3VyQ291bnRlciA+IHRoaXMuX2xhc3RTdWNjZXNzZnVsVXBkYXRlKSB7XG4gICAgICBzd2l0Y2ggKHJlc3VsdC5zdGF0dXMpIHtcbiAgICAgICAgY2FzZSBcIm9rXCI6IHtcbiAgICAgICAgICBpZiAoIXRoaXMuX2lzQXZhaWxhYmxlIHx8IHRoaXMuX2lzUmVqZWN0ZWQgfHwgdGhpcy5fbW9zdFJlY2VudE9rVmFsdWUgIT09IHJlc3VsdC5kYXRhKSB7XG4gICAgICAgICAgICB0aGlzLl9sYXN0U3VjY2Vzc2Z1bFVwZGF0ZSA9IGN1ckNvdW50ZXI7XG4gICAgICAgICAgICB0aGlzLl9pc0F2YWlsYWJsZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9pc1JlamVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLl9tb3N0UmVjZW50T2tWYWx1ZSA9IHJlc3VsdC5kYXRhO1xuICAgICAgICAgICAgdGhpcy5fcmVqZWN0aW9uRXJyb3IgPSB2b2lkIDA7XG4gICAgICAgICAgICB0aGlzLl9jYWxsYmFja3MuZm9yRWFjaCgoY2FsbGJhY2spID0+IGNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgc3RhdGU6IHRoaXMuZ2V0KCksXG4gICAgICAgICAgICAgIG9sZFN0YXRlLFxuICAgICAgICAgICAgICBsYXN0T2tWYWx1ZTogb2xkVmFsdWVcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImVycm9yXCI6IHtcbiAgICAgICAgICB0aGlzLl9sYXN0U3VjY2Vzc2Z1bFVwZGF0ZSA9IGN1ckNvdW50ZXI7XG4gICAgICAgICAgdGhpcy5faXNBdmFpbGFibGUgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLl9pc1JlamVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLl9yZWplY3Rpb25FcnJvciA9IHJlc3VsdC5lcnJvcjtcbiAgICAgICAgICB0aGlzLl93YWl0aW5nUmVqZWN0RnVuY3Rpb25zLmZvckVhY2goKHJlamVjdCkgPT4gcmVqZWN0KHJlc3VsdC5lcnJvcikpO1xuICAgICAgICAgIHRoaXMuX2NhbGxiYWNrcy5mb3JFYWNoKChjYWxsYmFjaykgPT4gY2FsbGJhY2soe1xuICAgICAgICAgICAgc3RhdGU6IHRoaXMuZ2V0KCksXG4gICAgICAgICAgICBvbGRTdGF0ZSxcbiAgICAgICAgICAgIGxhc3RPa1ZhbHVlOiBvbGRWYWx1ZVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgc2V0KHZhbHVlKSB7XG4gICAgdGhpcy5fc2V0SWZMYXRlc3QoUmVzdWx0Lm9rKHZhbHVlKSwgKyt0aGlzLl91cGRhdGVDb3VudGVyKTtcbiAgfVxuICB1cGRhdGUodXBkYXRlcikge1xuICAgIGNvbnN0IHZhbHVlID0gdXBkYXRlcih0aGlzLl9tb3N0UmVjZW50T2tWYWx1ZSk7XG4gICAgdGhpcy5zZXQodmFsdWUpO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBhc3luYyBzZXRBc3luYyhwcm9taXNlKSB7XG4gICAgcmV0dXJuIGF3YWl0IHN0b3JlTG9jay53aXRoUmVhZExvY2soYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY3VyQ291bnRlciA9ICsrdGhpcy5fdXBkYXRlQ291bnRlcjtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFJlc3VsdC5mcm9tUHJvbWlzZShwcm9taXNlKTtcbiAgICAgIHJldHVybiB0aGlzLl9zZXRJZkxhdGVzdChyZXN1bHQsIGN1ckNvdW50ZXIpO1xuICAgIH0pO1xuICB9XG4gIHNldFVuYXZhaWxhYmxlKCkge1xuICAgIHRoaXMuX2xhc3RTdWNjZXNzZnVsVXBkYXRlID0gKyt0aGlzLl91cGRhdGVDb3VudGVyO1xuICAgIHRoaXMuX2lzQXZhaWxhYmxlID0gZmFsc2U7XG4gICAgdGhpcy5faXNSZWplY3RlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3JlamVjdGlvbkVycm9yID0gdm9pZCAwO1xuICB9XG4gIHNldFJlamVjdGVkKGVycm9yKSB7XG4gICAgdGhpcy5fc2V0SWZMYXRlc3QoUmVzdWx0LmVycm9yKGVycm9yKSwgKyt0aGlzLl91cGRhdGVDb3VudGVyKTtcbiAgfVxuICBtYXAobWFwcGVyKSB7XG4gICAgY29uc3Qgc3RvcmUgPSBuZXcgX0FzeW5jU3RvcmUoKTtcbiAgICB0aGlzLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgc3RvcmUuc2V0KG1hcHBlcih2YWx1ZSkpO1xuICAgIH0pO1xuICAgIHJldHVybiBzdG9yZTtcbiAgfVxuICBvbkNoYW5nZShjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLm9uU3RhdGVDaGFuZ2UoKHsgc3RhdGUsIGxhc3RPa1ZhbHVlIH0pID0+IHtcbiAgICAgIGlmIChzdGF0ZS5zdGF0dXMgPT09IFwib2tcIikge1xuICAgICAgICBjYWxsYmFjayhzdGF0ZS5kYXRhLCBsYXN0T2tWYWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgb25TdGF0ZUNoYW5nZShjYWxsYmFjaykge1xuICAgIGNvbnN0IHV1aWQgPSBnZW5lcmF0ZVV1aWQoKTtcbiAgICB0aGlzLl9jYWxsYmFja3Muc2V0KHV1aWQsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4ge1xuICAgICAgdW5zdWJzY3JpYmU6ICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzLmRlbGV0ZSh1dWlkKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIG9uY2VDaGFuZ2UoY2FsbGJhY2spIHtcbiAgICBjb25zdCB7IHVuc3Vic2NyaWJlIH0gPSB0aGlzLm9uQ2hhbmdlKCguLi5hcmdzKSA9PiB7XG4gICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgY2FsbGJhY2soLi4uYXJncyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHsgdW5zdWJzY3JpYmUgfTtcbiAgfVxuICBvbmNlU3RhdGVDaGFuZ2UoY2FsbGJhY2spIHtcbiAgICBjb25zdCB7IHVuc3Vic2NyaWJlIH0gPSB0aGlzLm9uU3RhdGVDaGFuZ2UoKC4uLmFyZ3MpID0+IHtcbiAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICBjYWxsYmFjayguLi5hcmdzKTtcbiAgICB9KTtcbiAgICByZXR1cm4geyB1bnN1YnNjcmliZSB9O1xuICB9XG59O1xuZXhwb3J0IHtcbiAgQXN5bmNTdG9yZSxcbiAgU3RvcmUsXG4gIHN0b3JlTG9ja1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0b3Jlcy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/stores.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/strings.js":
/*!*********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/strings.js ***!
  \*********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deindent: () => (/* binding */ deindent),\n/* harmony export */   deindentTemplate: () => (/* binding */ deindentTemplate),\n/* harmony export */   escapeTemplateLiteral: () => (/* binding */ escapeTemplateLiteral),\n/* harmony export */   extractScopes: () => (/* binding */ extractScopes),\n/* harmony export */   getWhitespacePrefix: () => (/* binding */ getWhitespacePrefix),\n/* harmony export */   getWhitespaceSuffix: () => (/* binding */ getWhitespaceSuffix),\n/* harmony export */   mergeScopeStrings: () => (/* binding */ mergeScopeStrings),\n/* harmony export */   nicify: () => (/* binding */ nicify),\n/* harmony export */   replaceAll: () => (/* binding */ replaceAll),\n/* harmony export */   stringCompare: () => (/* binding */ stringCompare),\n/* harmony export */   templateIdentity: () => (/* binding */ templateIdentity),\n/* harmony export */   trimEmptyLinesEnd: () => (/* binding */ trimEmptyLinesEnd),\n/* harmony export */   trimEmptyLinesStart: () => (/* binding */ trimEmptyLinesStart),\n/* harmony export */   trimLines: () => (/* binding */ trimLines),\n/* harmony export */   typedCapitalize: () => (/* binding */ typedCapitalize),\n/* harmony export */   typedJoin: () => (/* binding */ typedJoin),\n/* harmony export */   typedToLowercase: () => (/* binding */ typedToLowercase),\n/* harmony export */   typedToUppercase: () => (/* binding */ typedToUppercase)\n/* harmony export */ });\n/* harmony import */ var _arrays_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./arrays.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/arrays.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n/* harmony import */ var _objects_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./objects.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/objects.js\");\n// src/utils/strings.tsx\n\n\n\nfunction typedJoin(strings, separator) {\n  return strings.join(separator);\n}\nfunction typedToLowercase(s) {\n  if (typeof s !== \"string\") throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Expected a string for typedToLowercase\", { s });\n  return s.toLowerCase();\n}\nfunction typedToUppercase(s) {\n  if (typeof s !== \"string\") throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Expected a string for typedToUppercase\", { s });\n  return s.toUpperCase();\n}\nfunction typedCapitalize(s) {\n  return s.charAt(0).toUpperCase() + s.slice(1);\n}\nfunction stringCompare(a, b) {\n  if (typeof a !== \"string\" || typeof b !== \"string\") throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(`Expected two strings for stringCompare, found ${typeof a} and ${typeof b}`, { a, b });\n  const cmp = (a2, b2) => a2 < b2 ? -1 : a2 > b2 ? 1 : 0;\n  return cmp(a.toUpperCase(), b.toUpperCase()) || cmp(b, a);\n}\nfunction getWhitespacePrefix(s) {\n  return s.substring(0, s.length - s.trimStart().length);\n}\nfunction getWhitespaceSuffix(s) {\n  return s.substring(s.trimEnd().length);\n}\nfunction trimEmptyLinesStart(s) {\n  const lines = s.split(\"\\n\");\n  const firstNonEmptyLineIndex = lines.findIndex((line) => line.trim() !== \"\");\n  if (firstNonEmptyLineIndex === -1) return \"\";\n  return lines.slice(firstNonEmptyLineIndex).join(\"\\n\");\n}\nfunction trimEmptyLinesEnd(s) {\n  const lines = s.split(\"\\n\");\n  const lastNonEmptyLineIndex = (0,_arrays_js__WEBPACK_IMPORTED_MODULE_0__.findLastIndex)(lines, (line) => line.trim() !== \"\");\n  return lines.slice(0, lastNonEmptyLineIndex + 1).join(\"\\n\");\n}\nfunction trimLines(s) {\n  return trimEmptyLinesEnd(trimEmptyLinesStart(s));\n}\nfunction templateIdentity(strings, ...values) {\n  if (values.length !== strings.length - 1) throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Invalid number of values; must be one less than strings\", { strings, values });\n  return strings.reduce((result, str, i) => result + str + (values[i] ?? \"\"), \"\");\n}\nfunction deindent(strings, ...values) {\n  if (typeof strings === \"string\") return deindent([strings]);\n  return templateIdentity(...deindentTemplate(strings, ...values));\n}\nfunction deindentTemplate(strings, ...values) {\n  if (values.length !== strings.length - 1) throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Invalid number of values; must be one less than strings\", { strings, values });\n  const trimmedStrings = [...strings];\n  trimmedStrings[0] = trimEmptyLinesStart(trimmedStrings[0] + \"+\").slice(0, -1);\n  trimmedStrings[trimmedStrings.length - 1] = trimEmptyLinesEnd(\"+\" + trimmedStrings[trimmedStrings.length - 1]).slice(1);\n  const indentation = trimmedStrings.join(\"${SOME_VALUE}\").split(\"\\n\").filter((line) => line.trim() !== \"\").map((line) => getWhitespacePrefix(line).length).reduce((min, current) => Math.min(min, current), Infinity);\n  const deindentedStrings = trimmedStrings.map((string, stringIndex) => {\n    return string.split(\"\\n\").map((line, lineIndex) => stringIndex !== 0 && lineIndex === 0 ? line : line.substring(indentation)).join(\"\\n\");\n  });\n  const indentedValues = values.map((value, i) => {\n    const firstLineIndentation = getWhitespacePrefix(deindentedStrings[i].split(\"\\n\").at(-1));\n    return `${value}`.replaceAll(\"\\n\", `\n${firstLineIndentation}`);\n  });\n  return [deindentedStrings, ...indentedValues];\n}\nfunction extractScopes(scope, removeDuplicates = true) {\n  const trimmedString = scope.trim();\n  const scopesArray = trimmedString.split(/\\s+/);\n  const filtered = scopesArray.filter((scope2) => scope2.length > 0);\n  return removeDuplicates ? [...new Set(filtered)] : filtered;\n}\nfunction mergeScopeStrings(...scopes) {\n  const allScope = scopes.map((s) => extractScopes(s)).flat().join(\" \");\n  return extractScopes(allScope).join(\" \");\n}\nfunction escapeTemplateLiteral(s) {\n  return s.replaceAll(\"`\", \"\\\\`\").replaceAll(\"\\\\\", \"\\\\\\\\\").replaceAll(\"$\", \"\\\\$\");\n}\nvar nicifiableClassNameOverrides = new Map(Object.entries({\n  Headers\n}).map(([k, v]) => [v, k]));\nfunction nicify(value, options = {}) {\n  const fullOptions = {\n    maxDepth: 5,\n    currentIndent: \"\",\n    lineIndent: \"  \",\n    multiline: true,\n    refs: /* @__PURE__ */ new Map(),\n    path: \"value\",\n    parent: null,\n    overrides: () => null,\n    keyInParent: null,\n    hideFields: [],\n    ...(0,_objects_js__WEBPACK_IMPORTED_MODULE_2__.filterUndefined)(options)\n  };\n  const {\n    maxDepth,\n    currentIndent,\n    lineIndent,\n    multiline,\n    refs,\n    path,\n    overrides,\n    hideFields\n  } = fullOptions;\n  const nl = `\n${currentIndent}`;\n  const overrideResult = overrides(value, options);\n  if (overrideResult !== null) return overrideResult;\n  if ([\"function\", \"object\", \"symbol\"].includes(typeof value) && value !== null) {\n    if (refs.has(value)) {\n      return `Ref<${refs.get(value)}>`;\n    }\n    refs.set(value, path);\n  }\n  const newOptions = {\n    maxDepth: maxDepth - 1,\n    currentIndent,\n    lineIndent,\n    multiline,\n    refs,\n    path: path + \"->[unknown property]\",\n    overrides,\n    parent: { value, options: fullOptions },\n    keyInParent: null,\n    hideFields: []\n  };\n  const nestedNicify = (newValue, newPath, keyInParent, options2 = {}) => {\n    return nicify(newValue, {\n      ...newOptions,\n      path: newPath,\n      currentIndent: currentIndent + lineIndent,\n      keyInParent,\n      ...options2\n    });\n  };\n  switch (typeof value) {\n    case \"boolean\":\n    case \"number\": {\n      return JSON.stringify(value);\n    }\n    case \"string\": {\n      const isDeindentable = (v) => deindent(v) === v && v.includes(\"\\n\");\n      const wrapInDeindent = (v) => deindent`\n        deindent\\`\n        ${currentIndent + lineIndent}${escapeTemplateLiteral(v).replaceAll(\"\\n\", nl + lineIndent)}\n        ${currentIndent}\\`\n      `;\n      if (isDeindentable(value)) {\n        return wrapInDeindent(value);\n      } else if (value.endsWith(\"\\n\") && isDeindentable(value.slice(0, -1))) {\n        return wrapInDeindent(value.slice(0, -1)) + ' + \"\\\\n\"';\n      } else {\n        return JSON.stringify(value);\n      }\n    }\n    case \"undefined\": {\n      return \"undefined\";\n    }\n    case \"symbol\": {\n      return value.toString();\n    }\n    case \"bigint\": {\n      return `${value}n`;\n    }\n    case \"function\": {\n      if (value.name) return `function ${value.name}(...) { ... }`;\n      return `(...) => { ... }`;\n    }\n    case \"object\": {\n      if (value === null) return \"null\";\n      if (Array.isArray(value)) {\n        const extraLines2 = getNicifiedObjectExtraLines(value);\n        const resValueLength2 = value.length + extraLines2.length;\n        if (maxDepth <= 0 && resValueLength2 === 0) return \"[...]\";\n        const resValues2 = value.map((v, i) => nestedNicify(v, `${path}[${i}]`, i));\n        resValues2.push(...extraLines2);\n        if (resValues2.length !== resValueLength2) throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"nicify of object: resValues.length !== resValueLength\", { value, resValues: resValues2, resValueLength: resValueLength2 });\n        const shouldIndent2 = resValues2.length > 4 || resValues2.some((x) => resValues2.length > 1 && x.length > 4 || x.includes(\"\\n\"));\n        if (shouldIndent2) {\n          return `[${nl}${resValues2.map((x) => `${lineIndent}${x},${nl}`).join(\"\")}]`;\n        } else {\n          return `[${resValues2.join(\", \")}]`;\n        }\n      }\n      if (value instanceof URL) {\n        return `URL(${nestedNicify(value.toString(), `${path}.toString()`, null)})`;\n      }\n      if (ArrayBuffer.isView(value)) {\n        return `${value.constructor.name}([${value.toString()}])`;\n      }\n      if (value instanceof ArrayBuffer) {\n        return `ArrayBuffer [${new Uint8Array(value).toString()}]`;\n      }\n      if (value instanceof Error) {\n        let stack = value.stack ?? \"\";\n        const toString = value.toString();\n        if (!stack.startsWith(toString)) stack = `${toString}\n${stack}`;\n        stack = stack.trimEnd();\n        stack = stack.replace(/\\n\\s+/g, `\n${lineIndent}${lineIndent}`);\n        stack = stack.replace(\"\\n\", `\n${lineIndent}Stack:\n`);\n        if (Object.keys(value).length > 0) {\n          stack += `\n${lineIndent}Extra properties: ${nestedNicify(Object.fromEntries(Object.entries(value)), path, null)}`;\n        }\n        if (value.cause) {\n          stack += `\n${lineIndent}Cause:\n${lineIndent}${lineIndent}${nestedNicify(value.cause, path, null, { currentIndent: currentIndent + lineIndent + lineIndent })}`;\n        }\n        stack = stack.replaceAll(\"\\n\", `\n${currentIndent}`);\n        return stack;\n      }\n      const constructorName = [null, Object.prototype].includes(Object.getPrototypeOf(value)) ? null : nicifiableClassNameOverrides.get(value.constructor) ?? value.constructor.name;\n      const constructorString = constructorName ? `${constructorName} ` : \"\";\n      const entries = getNicifiableEntries(value).filter(([k]) => !hideFields.includes(k));\n      const extraLines = [\n        ...getNicifiedObjectExtraLines(value),\n        ...hideFields.length > 0 ? [`<some fields may have been hidden>`] : []\n      ];\n      const resValueLength = entries.length + extraLines.length;\n      if (resValueLength === 0) return `${constructorString}{}`;\n      if (maxDepth <= 0) return `${constructorString}{ ... }`;\n      const resValues = entries.map(([k, v], keyIndex) => {\n        const keyNicified = nestedNicify(k, `Object.keys(${path})[${keyIndex}]`, null);\n        const keyInObjectLiteral = typeof k === \"string\" ? nicifyPropertyString(k) : `[${keyNicified}]`;\n        if (typeof v === \"function\" && v.name === k) {\n          return `${keyInObjectLiteral}(...): { ... }`;\n        } else {\n          return `${keyInObjectLiteral}: ${nestedNicify(v, `${path}[${keyNicified}]`, k)}`;\n        }\n      });\n      resValues.push(...extraLines);\n      if (resValues.length !== resValueLength) throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"nicify of object: resValues.length !== resValueLength\", { value, resValues, resValueLength });\n      const shouldIndent = resValues.length > 1 || resValues.some((x) => x.includes(\"\\n\"));\n      if (resValues.length === 0) return `${constructorString}{}`;\n      if (shouldIndent) {\n        return `${constructorString}{${nl}${resValues.map((x) => `${lineIndent}${x},${nl}`).join(\"\")}}`;\n      } else {\n        return `${constructorString}{ ${resValues.join(\", \")} }`;\n      }\n    }\n    default: {\n      return `${typeof value}<${value}>`;\n    }\n  }\n}\nfunction replaceAll(input, searchValue, replaceValue) {\n  if (searchValue === \"\") throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"replaceAll: searchValue is empty\");\n  return input.split(searchValue).join(replaceValue);\n}\nfunction nicifyPropertyString(str) {\n  return JSON.stringify(str);\n}\nfunction getNicifiableKeys(value) {\n  const overridden = (\"getNicifiableKeys\" in value ? value.getNicifiableKeys?.bind(value) : null)?.();\n  if (overridden != null) return overridden;\n  if (value instanceof Response) {\n    return [\"status\", \"headers\"];\n  }\n  const keys = Object.keys(value).sort();\n  return (0,_arrays_js__WEBPACK_IMPORTED_MODULE_0__.unique)(keys);\n}\nfunction getNicifiableEntries(value) {\n  const recordLikes = [Headers];\n  function isRecordLike(value2) {\n    return recordLikes.some((x) => value2 instanceof x);\n  }\n  if (isRecordLike(value)) {\n    return [...value.entries()].sort(([a], [b]) => stringCompare(`${a}`, `${b}`));\n  }\n  const keys = getNicifiableKeys(value);\n  return keys.map((k) => [k, value[k]]);\n}\nfunction getNicifiedObjectExtraLines(value) {\n  return (\"getNicifiedObjectExtraLines\" in value ? value.getNicifiedObjectExtraLines : null)?.() ?? [];\n}\n\n//# sourceMappingURL=strings.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvc3RyaW5ncy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNvRDtBQUNGO0FBQ0g7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsMkRBQW1CLDZDQUE2QyxHQUFHO0FBQzFHO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QywyREFBbUIsNkNBQTZDLEdBQUc7QUFDMUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFLDJEQUFtQixrREFBa0QsVUFBVSxNQUFNLFNBQVMsS0FBSyxNQUFNO0FBQ3pLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MseURBQWE7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELDJEQUFtQiw0QkFBNEIsa0NBQWtDLGlCQUFpQjtBQUN4SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCwyREFBbUIsNEJBQTRCLGtDQUFrQyxpQkFBaUI7QUFDeEo7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLFdBQVc7QUFDeEQ7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsY0FBYyxNQUFNO0FBQ3BCLEVBQUUscUJBQXFCO0FBQ3ZCLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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O0FBQ0EsU0FBUyxrREFBTTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FLEVBQUUsTUFBTSxFQUFFO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBb0JFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZngyZWRlbm9hc2lzL0Rvd25sb2Fkcy9EZXZlbG9wbWVudC9Fc3BhZGEvbm9kZV9tb2R1bGVzLy5wbnBtL0BzdGFja2ZyYW1lK3N0YWNrLXNoYXJlZEAyLjguNDFfQGF3cy1zZGsrY3JlZGVudGlhbC1wcm92aWRlci13ZWItaWRlbnRpdHlAMy45MDEuMF9AdHlwZV83NGRiYTAxZjZkODllNzIwODk2YjRkZjM0NTgzMzk5MC9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvZXNtL3V0aWxzL3N0cmluZ3MuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3V0aWxzL3N0cmluZ3MudHN4XG5pbXBvcnQgeyBmaW5kTGFzdEluZGV4LCB1bmlxdWUgfSBmcm9tIFwiLi9hcnJheXMuanNcIjtcbmltcG9ydCB7IFN0YWNrQXNzZXJ0aW9uRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IGZpbHRlclVuZGVmaW5lZCB9IGZyb20gXCIuL29iamVjdHMuanNcIjtcbmZ1bmN0aW9uIHR5cGVkSm9pbihzdHJpbmdzLCBzZXBhcmF0b3IpIHtcbiAgcmV0dXJuIHN0cmluZ3Muam9pbihzZXBhcmF0b3IpO1xufVxuZnVuY3Rpb24gdHlwZWRUb0xvd2VyY2FzZShzKSB7XG4gIGlmICh0eXBlb2YgcyAhPT0gXCJzdHJpbmdcIikgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJFeHBlY3RlZCBhIHN0cmluZyBmb3IgdHlwZWRUb0xvd2VyY2FzZVwiLCB7IHMgfSk7XG4gIHJldHVybiBzLnRvTG93ZXJDYXNlKCk7XG59XG5mdW5jdGlvbiB0eXBlZFRvVXBwZXJjYXNlKHMpIHtcbiAgaWYgKHR5cGVvZiBzICE9PSBcInN0cmluZ1wiKSB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkV4cGVjdGVkIGEgc3RyaW5nIGZvciB0eXBlZFRvVXBwZXJjYXNlXCIsIHsgcyB9KTtcbiAgcmV0dXJuIHMudG9VcHBlckNhc2UoKTtcbn1cbmZ1bmN0aW9uIHR5cGVkQ2FwaXRhbGl6ZShzKSB7XG4gIHJldHVybiBzLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcy5zbGljZSgxKTtcbn1cbmZ1bmN0aW9uIHN0cmluZ0NvbXBhcmUoYSwgYikge1xuICBpZiAodHlwZW9mIGEgIT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIGIgIT09IFwic3RyaW5nXCIpIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKGBFeHBlY3RlZCB0d28gc3RyaW5ncyBmb3Igc3RyaW5nQ29tcGFyZSwgZm91bmQgJHt0eXBlb2YgYX0gYW5kICR7dHlwZW9mIGJ9YCwgeyBhLCBiIH0pO1xuICBjb25zdCBjbXAgPSAoYTIsIGIyKSA9PiBhMiA8IGIyID8gLTEgOiBhMiA+IGIyID8gMSA6IDA7XG4gIHJldHVybiBjbXAoYS50b1VwcGVyQ2FzZSgpLCBiLnRvVXBwZXJDYXNlKCkpIHx8IGNtcChiLCBhKTtcbn1cbmZ1bmN0aW9uIGdldFdoaXRlc3BhY2VQcmVmaXgocykge1xuICByZXR1cm4gcy5zdWJzdHJpbmcoMCwgcy5sZW5ndGggLSBzLnRyaW1TdGFydCgpLmxlbmd0aCk7XG59XG5mdW5jdGlvbiBnZXRXaGl0ZXNwYWNlU3VmZml4KHMpIHtcbiAgcmV0dXJuIHMuc3Vic3RyaW5nKHMudHJpbUVuZCgpLmxlbmd0aCk7XG59XG5mdW5jdGlvbiB0cmltRW1wdHlMaW5lc1N0YXJ0KHMpIHtcbiAgY29uc3QgbGluZXMgPSBzLnNwbGl0KFwiXFxuXCIpO1xuICBjb25zdCBmaXJzdE5vbkVtcHR5TGluZUluZGV4ID0gbGluZXMuZmluZEluZGV4KChsaW5lKSA9PiBsaW5lLnRyaW0oKSAhPT0gXCJcIik7XG4gIGlmIChmaXJzdE5vbkVtcHR5TGluZUluZGV4ID09PSAtMSkgcmV0dXJuIFwiXCI7XG4gIHJldHVybiBsaW5lcy5zbGljZShmaXJzdE5vbkVtcHR5TGluZUluZGV4KS5qb2luKFwiXFxuXCIpO1xufVxuZnVuY3Rpb24gdHJpbUVtcHR5TGluZXNFbmQocykge1xuICBjb25zdCBsaW5lcyA9IHMuc3BsaXQoXCJcXG5cIik7XG4gIGNvbnN0IGxhc3ROb25FbXB0eUxpbmVJbmRleCA9IGZpbmRMYXN0SW5kZXgobGluZXMsIChsaW5lKSA9PiBsaW5lLnRyaW0oKSAhPT0gXCJcIik7XG4gIHJldHVybiBsaW5lcy5zbGljZSgwLCBsYXN0Tm9uRW1wdHlMaW5lSW5kZXggKyAxKS5qb2luKFwiXFxuXCIpO1xufVxuZnVuY3Rpb24gdHJpbUxpbmVzKHMpIHtcbiAgcmV0dXJuIHRyaW1FbXB0eUxpbmVzRW5kKHRyaW1FbXB0eUxpbmVzU3RhcnQocykpO1xufVxuZnVuY3Rpb24gdGVtcGxhdGVJZGVudGl0eShzdHJpbmdzLCAuLi52YWx1ZXMpIHtcbiAgaWYgKHZhbHVlcy5sZW5ndGggIT09IHN0cmluZ3MubGVuZ3RoIC0gMSkgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJJbnZhbGlkIG51bWJlciBvZiB2YWx1ZXM7IG11c3QgYmUgb25lIGxlc3MgdGhhbiBzdHJpbmdzXCIsIHsgc3RyaW5ncywgdmFsdWVzIH0pO1xuICByZXR1cm4gc3RyaW5ncy5yZWR1Y2UoKHJlc3VsdCwgc3RyLCBpKSA9PiByZXN1bHQgKyBzdHIgKyAodmFsdWVzW2ldID8/IFwiXCIpLCBcIlwiKTtcbn1cbmZ1bmN0aW9uIGRlaW5kZW50KHN0cmluZ3MsIC4uLnZhbHVlcykge1xuICBpZiAodHlwZW9mIHN0cmluZ3MgPT09IFwic3RyaW5nXCIpIHJldHVybiBkZWluZGVudChbc3RyaW5nc10pO1xuICByZXR1cm4gdGVtcGxhdGVJZGVudGl0eSguLi5kZWluZGVudFRlbXBsYXRlKHN0cmluZ3MsIC4uLnZhbHVlcykpO1xufVxuZnVuY3Rpb24gZGVpbmRlbnRUZW1wbGF0ZShzdHJpbmdzLCAuLi52YWx1ZXMpIHtcbiAgaWYgKHZhbHVlcy5sZW5ndGggIT09IHN0cmluZ3MubGVuZ3RoIC0gMSkgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJJbnZhbGlkIG51bWJlciBvZiB2YWx1ZXM7IG11c3QgYmUgb25lIGxlc3MgdGhhbiBzdHJpbmdzXCIsIHsgc3RyaW5ncywgdmFsdWVzIH0pO1xuICBjb25zdCB0cmltbWVkU3RyaW5ncyA9IFsuLi5zdHJpbmdzXTtcbiAgdHJpbW1lZFN0cmluZ3NbMF0gPSB0cmltRW1wdHlMaW5lc1N0YXJ0KHRyaW1tZWRTdHJpbmdzWzBdICsgXCIrXCIpLnNsaWNlKDAsIC0xKTtcbiAgdHJpbW1lZFN0cmluZ3NbdHJpbW1lZFN0cmluZ3MubGVuZ3RoIC0gMV0gPSB0cmltRW1wdHlMaW5lc0VuZChcIitcIiArIHRyaW1tZWRTdHJpbmdzW3RyaW1tZWRTdHJpbmdzLmxlbmd0aCAtIDFdKS5zbGljZSgxKTtcbiAgY29uc3QgaW5kZW50YXRpb24gPSB0cmltbWVkU3RyaW5ncy5qb2luKFwiJHtTT01FX1ZBTFVFfVwiKS5zcGxpdChcIlxcblwiKS5maWx0ZXIoKGxpbmUpID0+IGxpbmUudHJpbSgpICE9PSBcIlwiKS5tYXAoKGxpbmUpID0+IGdldFdoaXRlc3BhY2VQcmVmaXgobGluZSkubGVuZ3RoKS5yZWR1Y2UoKG1pbiwgY3VycmVudCkgPT4gTWF0aC5taW4obWluLCBjdXJyZW50KSwgSW5maW5pdHkpO1xuICBjb25zdCBkZWluZGVudGVkU3RyaW5ncyA9IHRyaW1tZWRTdHJpbmdzLm1hcCgoc3RyaW5nLCBzdHJpbmdJbmRleCkgPT4ge1xuICAgIHJldHVybiBzdHJpbmcuc3BsaXQoXCJcXG5cIikubWFwKChsaW5lLCBsaW5lSW5kZXgpID0+IHN0cmluZ0luZGV4ICE9PSAwICYmIGxpbmVJbmRleCA9PT0gMCA/IGxpbmUgOiBsaW5lLnN1YnN0cmluZyhpbmRlbnRhdGlvbikpLmpvaW4oXCJcXG5cIik7XG4gIH0pO1xuICBjb25zdCBpbmRlbnRlZFZhbHVlcyA9IHZhbHVlcy5tYXAoKHZhbHVlLCBpKSA9PiB7XG4gICAgY29uc3QgZmlyc3RMaW5lSW5kZW50YXRpb24gPSBnZXRXaGl0ZXNwYWNlUHJlZml4KGRlaW5kZW50ZWRTdHJpbmdzW2ldLnNwbGl0KFwiXFxuXCIpLmF0KC0xKSk7XG4gICAgcmV0dXJuIGAke3ZhbHVlfWAucmVwbGFjZUFsbChcIlxcblwiLCBgXG4ke2ZpcnN0TGluZUluZGVudGF0aW9ufWApO1xuICB9KTtcbiAgcmV0dXJuIFtkZWluZGVudGVkU3RyaW5ncywgLi4uaW5kZW50ZWRWYWx1ZXNdO1xufVxuZnVuY3Rpb24gZXh0cmFjdFNjb3BlcyhzY29wZSwgcmVtb3ZlRHVwbGljYXRlcyA9IHRydWUpIHtcbiAgY29uc3QgdHJpbW1lZFN0cmluZyA9IHNjb3BlLnRyaW0oKTtcbiAgY29uc3Qgc2NvcGVzQXJyYXkgPSB0cmltbWVkU3RyaW5nLnNwbGl0KC9cXHMrLyk7XG4gIGNvbnN0IGZpbHRlcmVkID0gc2NvcGVzQXJyYXkuZmlsdGVyKChzY29wZTIpID0+IHNjb3BlMi5sZW5ndGggPiAwKTtcbiAgcmV0dXJuIHJlbW92ZUR1cGxpY2F0ZXMgPyBbLi4ubmV3IFNldChmaWx0ZXJlZCldIDogZmlsdGVyZWQ7XG59XG5mdW5jdGlvbiBtZXJnZVNjb3BlU3RyaW5ncyguLi5zY29wZXMpIHtcbiAgY29uc3QgYWxsU2NvcGUgPSBzY29wZXMubWFwKChzKSA9PiBleHRyYWN0U2NvcGVzKHMpKS5mbGF0KCkuam9pbihcIiBcIik7XG4gIHJldHVybiBleHRyYWN0U2NvcGVzKGFsbFNjb3BlKS5qb2luKFwiIFwiKTtcbn1cbmZ1bmN0aW9uIGVzY2FwZVRlbXBsYXRlTGl0ZXJhbChzKSB7XG4gIHJldHVybiBzLnJlcGxhY2VBbGwoXCJgXCIsIFwiXFxcXGBcIikucmVwbGFjZUFsbChcIlxcXFxcIiwgXCJcXFxcXFxcXFwiKS5yZXBsYWNlQWxsKFwiJFwiLCBcIlxcXFwkXCIpO1xufVxudmFyIG5pY2lmaWFibGVDbGFzc05hbWVPdmVycmlkZXMgPSBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKHtcbiAgSGVhZGVyc1xufSkubWFwKChbaywgdl0pID0+IFt2LCBrXSkpO1xuZnVuY3Rpb24gbmljaWZ5KHZhbHVlLCBvcHRpb25zID0ge30pIHtcbiAgY29uc3QgZnVsbE9wdGlvbnMgPSB7XG4gICAgbWF4RGVwdGg6IDUsXG4gICAgY3VycmVudEluZGVudDogXCJcIixcbiAgICBsaW5lSW5kZW50OiBcIiAgXCIsXG4gICAgbXVsdGlsaW5lOiB0cnVlLFxuICAgIHJlZnM6IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCksXG4gICAgcGF0aDogXCJ2YWx1ZVwiLFxuICAgIHBhcmVudDogbnVsbCxcbiAgICBvdmVycmlkZXM6ICgpID0+IG51bGwsXG4gICAga2V5SW5QYXJlbnQ6IG51bGwsXG4gICAgaGlkZUZpZWxkczogW10sXG4gICAgLi4uZmlsdGVyVW5kZWZpbmVkKG9wdGlvbnMpXG4gIH07XG4gIGNvbnN0IHtcbiAgICBtYXhEZXB0aCxcbiAgICBjdXJyZW50SW5kZW50LFxuICAgIGxpbmVJbmRlbnQsXG4gICAgbXVsdGlsaW5lLFxuICAgIHJlZnMsXG4gICAgcGF0aCxcbiAgICBvdmVycmlkZXMsXG4gICAgaGlkZUZpZWxkc1xuICB9ID0gZnVsbE9wdGlvbnM7XG4gIGNvbnN0IG5sID0gYFxuJHtjdXJyZW50SW5kZW50fWA7XG4gIGNvbnN0IG92ZXJyaWRlUmVzdWx0ID0gb3ZlcnJpZGVzKHZhbHVlLCBvcHRpb25zKTtcbiAgaWYgKG92ZXJyaWRlUmVzdWx0ICE9PSBudWxsKSByZXR1cm4gb3ZlcnJpZGVSZXN1bHQ7XG4gIGlmIChbXCJmdW5jdGlvblwiLCBcIm9iamVjdFwiLCBcInN5bWJvbFwiXS5pbmNsdWRlcyh0eXBlb2YgdmFsdWUpICYmIHZhbHVlICE9PSBudWxsKSB7XG4gICAgaWYgKHJlZnMuaGFzKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGBSZWY8JHtyZWZzLmdldCh2YWx1ZSl9PmA7XG4gICAgfVxuICAgIHJlZnMuc2V0KHZhbHVlLCBwYXRoKTtcbiAgfVxuICBjb25zdCBuZXdPcHRpb25zID0ge1xuICAgIG1heERlcHRoOiBtYXhEZXB0aCAtIDEsXG4gICAgY3VycmVudEluZGVudCxcbiAgICBsaW5lSW5kZW50LFxuICAgIG11bHRpbGluZSxcbiAgICByZWZzLFxuICAgIHBhdGg6IHBhdGggKyBcIi0+W3Vua25vd24gcHJvcGVydHldXCIsXG4gICAgb3ZlcnJpZGVzLFxuICAgIHBhcmVudDogeyB2YWx1ZSwgb3B0aW9uczogZnVsbE9wdGlvbnMgfSxcbiAgICBrZXlJblBhcmVudDogbnVsbCxcbiAgICBoaWRlRmllbGRzOiBbXVxuICB9O1xuICBjb25zdCBuZXN0ZWROaWNpZnkgPSAobmV3VmFsdWUsIG5ld1BhdGgsIGtleUluUGFyZW50LCBvcHRpb25zMiA9IHt9KSA9PiB7XG4gICAgcmV0dXJuIG5pY2lmeShuZXdWYWx1ZSwge1xuICAgICAgLi4ubmV3T3B0aW9ucyxcbiAgICAgIHBhdGg6IG5ld1BhdGgsXG4gICAgICBjdXJyZW50SW5kZW50OiBjdXJyZW50SW5kZW50ICsgbGluZUluZGVudCxcbiAgICAgIGtleUluUGFyZW50LFxuICAgICAgLi4ub3B0aW9uczJcbiAgICB9KTtcbiAgfTtcbiAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHtcbiAgICBjYXNlIFwiYm9vbGVhblwiOlxuICAgIGNhc2UgXCJudW1iZXJcIjoge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICB9XG4gICAgY2FzZSBcInN0cmluZ1wiOiB7XG4gICAgICBjb25zdCBpc0RlaW5kZW50YWJsZSA9ICh2KSA9PiBkZWluZGVudCh2KSA9PT0gdiAmJiB2LmluY2x1ZGVzKFwiXFxuXCIpO1xuICAgICAgY29uc3Qgd3JhcEluRGVpbmRlbnQgPSAodikgPT4gZGVpbmRlbnRgXG4gICAgICAgIGRlaW5kZW50XFxgXG4gICAgICAgICR7Y3VycmVudEluZGVudCArIGxpbmVJbmRlbnR9JHtlc2NhcGVUZW1wbGF0ZUxpdGVyYWwodikucmVwbGFjZUFsbChcIlxcblwiLCBubCArIGxpbmVJbmRlbnQpfVxuICAgICAgICAke2N1cnJlbnRJbmRlbnR9XFxgXG4gICAgICBgO1xuICAgICAgaWYgKGlzRGVpbmRlbnRhYmxlKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gd3JhcEluRGVpbmRlbnQodmFsdWUpO1xuICAgICAgfSBlbHNlIGlmICh2YWx1ZS5lbmRzV2l0aChcIlxcblwiKSAmJiBpc0RlaW5kZW50YWJsZSh2YWx1ZS5zbGljZSgwLCAtMSkpKSB7XG4gICAgICAgIHJldHVybiB3cmFwSW5EZWluZGVudCh2YWx1ZS5zbGljZSgwLCAtMSkpICsgJyArIFwiXFxcXG5cIic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBjYXNlIFwidW5kZWZpbmVkXCI6IHtcbiAgICAgIHJldHVybiBcInVuZGVmaW5lZFwiO1xuICAgIH1cbiAgICBjYXNlIFwic3ltYm9sXCI6IHtcbiAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICAgIH1cbiAgICBjYXNlIFwiYmlnaW50XCI6IHtcbiAgICAgIHJldHVybiBgJHt2YWx1ZX1uYDtcbiAgICB9XG4gICAgY2FzZSBcImZ1bmN0aW9uXCI6IHtcbiAgICAgIGlmICh2YWx1ZS5uYW1lKSByZXR1cm4gYGZ1bmN0aW9uICR7dmFsdWUubmFtZX0oLi4uKSB7IC4uLiB9YDtcbiAgICAgIHJldHVybiBgKC4uLikgPT4geyAuLi4gfWA7XG4gICAgfVxuICAgIGNhc2UgXCJvYmplY3RcIjoge1xuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gXCJudWxsXCI7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgY29uc3QgZXh0cmFMaW5lczIgPSBnZXROaWNpZmllZE9iamVjdEV4dHJhTGluZXModmFsdWUpO1xuICAgICAgICBjb25zdCByZXNWYWx1ZUxlbmd0aDIgPSB2YWx1ZS5sZW5ndGggKyBleHRyYUxpbmVzMi5sZW5ndGg7XG4gICAgICAgIGlmIChtYXhEZXB0aCA8PSAwICYmIHJlc1ZhbHVlTGVuZ3RoMiA9PT0gMCkgcmV0dXJuIFwiWy4uLl1cIjtcbiAgICAgICAgY29uc3QgcmVzVmFsdWVzMiA9IHZhbHVlLm1hcCgodiwgaSkgPT4gbmVzdGVkTmljaWZ5KHYsIGAke3BhdGh9WyR7aX1dYCwgaSkpO1xuICAgICAgICByZXNWYWx1ZXMyLnB1c2goLi4uZXh0cmFMaW5lczIpO1xuICAgICAgICBpZiAocmVzVmFsdWVzMi5sZW5ndGggIT09IHJlc1ZhbHVlTGVuZ3RoMikgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJuaWNpZnkgb2Ygb2JqZWN0OiByZXNWYWx1ZXMubGVuZ3RoICE9PSByZXNWYWx1ZUxlbmd0aFwiLCB7IHZhbHVlLCByZXNWYWx1ZXM6IHJlc1ZhbHVlczIsIHJlc1ZhbHVlTGVuZ3RoOiByZXNWYWx1ZUxlbmd0aDIgfSk7XG4gICAgICAgIGNvbnN0IHNob3VsZEluZGVudDIgPSByZXNWYWx1ZXMyLmxlbmd0aCA+IDQgfHwgcmVzVmFsdWVzMi5zb21lKCh4KSA9PiByZXNWYWx1ZXMyLmxlbmd0aCA+IDEgJiYgeC5sZW5ndGggPiA0IHx8IHguaW5jbHVkZXMoXCJcXG5cIikpO1xuICAgICAgICBpZiAoc2hvdWxkSW5kZW50Mikge1xuICAgICAgICAgIHJldHVybiBgWyR7bmx9JHtyZXNWYWx1ZXMyLm1hcCgoeCkgPT4gYCR7bGluZUluZGVudH0ke3h9LCR7bmx9YCkuam9pbihcIlwiKX1dYDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gYFske3Jlc1ZhbHVlczIuam9pbihcIiwgXCIpfV1gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBVUkwpIHtcbiAgICAgICAgcmV0dXJuIGBVUkwoJHtuZXN0ZWROaWNpZnkodmFsdWUudG9TdHJpbmcoKSwgYCR7cGF0aH0udG9TdHJpbmcoKWAsIG51bGwpfSlgO1xuICAgICAgfVxuICAgICAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGAke3ZhbHVlLmNvbnN0cnVjdG9yLm5hbWV9KFske3ZhbHVlLnRvU3RyaW5nKCl9XSlgO1xuICAgICAgfVxuICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIGBBcnJheUJ1ZmZlciBbJHtuZXcgVWludDhBcnJheSh2YWx1ZSkudG9TdHJpbmcoKX1dYDtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIGxldCBzdGFjayA9IHZhbHVlLnN0YWNrID8/IFwiXCI7XG4gICAgICAgIGNvbnN0IHRvU3RyaW5nID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgaWYgKCFzdGFjay5zdGFydHNXaXRoKHRvU3RyaW5nKSkgc3RhY2sgPSBgJHt0b1N0cmluZ31cbiR7c3RhY2t9YDtcbiAgICAgICAgc3RhY2sgPSBzdGFjay50cmltRW5kKCk7XG4gICAgICAgIHN0YWNrID0gc3RhY2sucmVwbGFjZSgvXFxuXFxzKy9nLCBgXG4ke2xpbmVJbmRlbnR9JHtsaW5lSW5kZW50fWApO1xuICAgICAgICBzdGFjayA9IHN0YWNrLnJlcGxhY2UoXCJcXG5cIiwgYFxuJHtsaW5lSW5kZW50fVN0YWNrOlxuYCk7XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHN0YWNrICs9IGBcbiR7bGluZUluZGVudH1FeHRyYSBwcm9wZXJ0aWVzOiAke25lc3RlZE5pY2lmeShPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXModmFsdWUpKSwgcGF0aCwgbnVsbCl9YDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUuY2F1c2UpIHtcbiAgICAgICAgICBzdGFjayArPSBgXG4ke2xpbmVJbmRlbnR9Q2F1c2U6XG4ke2xpbmVJbmRlbnR9JHtsaW5lSW5kZW50fSR7bmVzdGVkTmljaWZ5KHZhbHVlLmNhdXNlLCBwYXRoLCBudWxsLCB7IGN1cnJlbnRJbmRlbnQ6IGN1cnJlbnRJbmRlbnQgKyBsaW5lSW5kZW50ICsgbGluZUluZGVudCB9KX1gO1xuICAgICAgICB9XG4gICAgICAgIHN0YWNrID0gc3RhY2sucmVwbGFjZUFsbChcIlxcblwiLCBgXG4ke2N1cnJlbnRJbmRlbnR9YCk7XG4gICAgICAgIHJldHVybiBzdGFjaztcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNvbnN0cnVjdG9yTmFtZSA9IFtudWxsLCBPYmplY3QucHJvdG90eXBlXS5pbmNsdWRlcyhPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsdWUpKSA/IG51bGwgOiBuaWNpZmlhYmxlQ2xhc3NOYW1lT3ZlcnJpZGVzLmdldCh2YWx1ZS5jb25zdHJ1Y3RvcikgPz8gdmFsdWUuY29uc3RydWN0b3IubmFtZTtcbiAgICAgIGNvbnN0IGNvbnN0cnVjdG9yU3RyaW5nID0gY29uc3RydWN0b3JOYW1lID8gYCR7Y29uc3RydWN0b3JOYW1lfSBgIDogXCJcIjtcbiAgICAgIGNvbnN0IGVudHJpZXMgPSBnZXROaWNpZmlhYmxlRW50cmllcyh2YWx1ZSkuZmlsdGVyKChba10pID0+ICFoaWRlRmllbGRzLmluY2x1ZGVzKGspKTtcbiAgICAgIGNvbnN0IGV4dHJhTGluZXMgPSBbXG4gICAgICAgIC4uLmdldE5pY2lmaWVkT2JqZWN0RXh0cmFMaW5lcyh2YWx1ZSksXG4gICAgICAgIC4uLmhpZGVGaWVsZHMubGVuZ3RoID4gMCA/IFtgPHNvbWUgZmllbGRzIG1heSBoYXZlIGJlZW4gaGlkZGVuPmBdIDogW11cbiAgICAgIF07XG4gICAgICBjb25zdCByZXNWYWx1ZUxlbmd0aCA9IGVudHJpZXMubGVuZ3RoICsgZXh0cmFMaW5lcy5sZW5ndGg7XG4gICAgICBpZiAocmVzVmFsdWVMZW5ndGggPT09IDApIHJldHVybiBgJHtjb25zdHJ1Y3RvclN0cmluZ317fWA7XG4gICAgICBpZiAobWF4RGVwdGggPD0gMCkgcmV0dXJuIGAke2NvbnN0cnVjdG9yU3RyaW5nfXsgLi4uIH1gO1xuICAgICAgY29uc3QgcmVzVmFsdWVzID0gZW50cmllcy5tYXAoKFtrLCB2XSwga2V5SW5kZXgpID0+IHtcbiAgICAgICAgY29uc3Qga2V5TmljaWZpZWQgPSBuZXN0ZWROaWNpZnkoaywgYE9iamVjdC5rZXlzKCR7cGF0aH0pWyR7a2V5SW5kZXh9XWAsIG51bGwpO1xuICAgICAgICBjb25zdCBrZXlJbk9iamVjdExpdGVyYWwgPSB0eXBlb2YgayA9PT0gXCJzdHJpbmdcIiA/IG5pY2lmeVByb3BlcnR5U3RyaW5nKGspIDogYFske2tleU5pY2lmaWVkfV1gO1xuICAgICAgICBpZiAodHlwZW9mIHYgPT09IFwiZnVuY3Rpb25cIiAmJiB2Lm5hbWUgPT09IGspIHtcbiAgICAgICAgICByZXR1cm4gYCR7a2V5SW5PYmplY3RMaXRlcmFsfSguLi4pOiB7IC4uLiB9YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gYCR7a2V5SW5PYmplY3RMaXRlcmFsfTogJHtuZXN0ZWROaWNpZnkodiwgYCR7cGF0aH1bJHtrZXlOaWNpZmllZH1dYCwgayl9YDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXNWYWx1ZXMucHVzaCguLi5leHRyYUxpbmVzKTtcbiAgICAgIGlmIChyZXNWYWx1ZXMubGVuZ3RoICE9PSByZXNWYWx1ZUxlbmd0aCkgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJuaWNpZnkgb2Ygb2JqZWN0OiByZXNWYWx1ZXMubGVuZ3RoICE9PSByZXNWYWx1ZUxlbmd0aFwiLCB7IHZhbHVlLCByZXNWYWx1ZXMsIHJlc1ZhbHVlTGVuZ3RoIH0pO1xuICAgICAgY29uc3Qgc2hvdWxkSW5kZW50ID0gcmVzVmFsdWVzLmxlbmd0aCA+IDEgfHwgcmVzVmFsdWVzLnNvbWUoKHgpID0+IHguaW5jbHVkZXMoXCJcXG5cIikpO1xuICAgICAgaWYgKHJlc1ZhbHVlcy5sZW5ndGggPT09IDApIHJldHVybiBgJHtjb25zdHJ1Y3RvclN0cmluZ317fWA7XG4gICAgICBpZiAoc2hvdWxkSW5kZW50KSB7XG4gICAgICAgIHJldHVybiBgJHtjb25zdHJ1Y3RvclN0cmluZ317JHtubH0ke3Jlc1ZhbHVlcy5tYXAoKHgpID0+IGAke2xpbmVJbmRlbnR9JHt4fSwke25sfWApLmpvaW4oXCJcIil9fWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYCR7Y29uc3RydWN0b3JTdHJpbmd9eyAke3Jlc1ZhbHVlcy5qb2luKFwiLCBcIil9IH1gO1xuICAgICAgfVxuICAgIH1cbiAgICBkZWZhdWx0OiB7XG4gICAgICByZXR1cm4gYCR7dHlwZW9mIHZhbHVlfTwke3ZhbHVlfT5gO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gcmVwbGFjZUFsbChpbnB1dCwgc2VhcmNoVmFsdWUsIHJlcGxhY2VWYWx1ZSkge1xuICBpZiAoc2VhcmNoVmFsdWUgPT09IFwiXCIpIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwicmVwbGFjZUFsbDogc2VhcmNoVmFsdWUgaXMgZW1wdHlcIik7XG4gIHJldHVybiBpbnB1dC5zcGxpdChzZWFyY2hWYWx1ZSkuam9pbihyZXBsYWNlVmFsdWUpO1xufVxuZnVuY3Rpb24gbmljaWZ5UHJvcGVydHlTdHJpbmcoc3RyKSB7XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShzdHIpO1xufVxuZnVuY3Rpb24gZ2V0TmljaWZpYWJsZUtleXModmFsdWUpIHtcbiAgY29uc3Qgb3ZlcnJpZGRlbiA9IChcImdldE5pY2lmaWFibGVLZXlzXCIgaW4gdmFsdWUgPyB2YWx1ZS5nZXROaWNpZmlhYmxlS2V5cz8uYmluZCh2YWx1ZSkgOiBudWxsKT8uKCk7XG4gIGlmIChvdmVycmlkZGVuICE9IG51bGwpIHJldHVybiBvdmVycmlkZGVuO1xuICBpZiAodmFsdWUgaW5zdGFuY2VvZiBSZXNwb25zZSkge1xuICAgIHJldHVybiBbXCJzdGF0dXNcIiwgXCJoZWFkZXJzXCJdO1xuICB9XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSkuc29ydCgpO1xuICByZXR1cm4gdW5pcXVlKGtleXMpO1xufVxuZnVuY3Rpb24gZ2V0TmljaWZpYWJsZUVudHJpZXModmFsdWUpIHtcbiAgY29uc3QgcmVjb3JkTGlrZXMgPSBbSGVhZGVyc107XG4gIGZ1bmN0aW9uIGlzUmVjb3JkTGlrZSh2YWx1ZTIpIHtcbiAgICByZXR1cm4gcmVjb3JkTGlrZXMuc29tZSgoeCkgPT4gdmFsdWUyIGluc3RhbmNlb2YgeCk7XG4gIH1cbiAgaWYgKGlzUmVjb3JkTGlrZSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gWy4uLnZhbHVlLmVudHJpZXMoKV0uc29ydCgoW2FdLCBbYl0pID0+IHN0cmluZ0NvbXBhcmUoYCR7YX1gLCBgJHtifWApKTtcbiAgfVxuICBjb25zdCBrZXlzID0gZ2V0TmljaWZpYWJsZUtleXModmFsdWUpO1xuICByZXR1cm4ga2V5cy5tYXAoKGspID0+IFtrLCB2YWx1ZVtrXV0pO1xufVxuZnVuY3Rpb24gZ2V0TmljaWZpZWRPYmplY3RFeHRyYUxpbmVzKHZhbHVlKSB7XG4gIHJldHVybiAoXCJnZXROaWNpZmllZE9iamVjdEV4dHJhTGluZXNcIiBpbiB2YWx1ZSA/IHZhbHVlLmdldE5pY2lmaWVkT2JqZWN0RXh0cmFMaW5lcyA6IG51bGwpPy4oKSA/PyBbXTtcbn1cbmV4cG9ydCB7XG4gIGRlaW5kZW50LFxuICBkZWluZGVudFRlbXBsYXRlLFxuICBlc2NhcGVUZW1wbGF0ZUxpdGVyYWwsXG4gIGV4dHJhY3RTY29wZXMsXG4gIGdldFdoaXRlc3BhY2VQcmVmaXgsXG4gIGdldFdoaXRlc3BhY2VTdWZmaXgsXG4gIG1lcmdlU2NvcGVTdHJpbmdzLFxuICBuaWNpZnksXG4gIHJlcGxhY2VBbGwsXG4gIHN0cmluZ0NvbXBhcmUsXG4gIHRlbXBsYXRlSWRlbnRpdHksXG4gIHRyaW1FbXB0eUxpbmVzRW5kLFxuICB0cmltRW1wdHlMaW5lc1N0YXJ0LFxuICB0cmltTGluZXMsXG4gIHR5cGVkQ2FwaXRhbGl6ZSxcbiAgdHlwZWRKb2luLFxuICB0eXBlZFRvTG93ZXJjYXNlLFxuICB0eXBlZFRvVXBwZXJjYXNlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RyaW5ncy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/strings.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/types.js":
/*!*******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/types.js ***!
  \*******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   typeAssert: () => (/* binding */ typeAssert),\n/* harmony export */   typeAssertExtends: () => (/* binding */ typeAssertExtends),\n/* harmony export */   typeAssertIs: () => (/* binding */ typeAssertIs)\n/* harmony export */ });\n// src/utils/types.tsx\ntypeAssertIs()();\ntypeAssertIs()();\ntypeAssertIs()();\nfunction typeAssert() {\n  return () => void 0;\n}\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\nfunction typeAssertExtends() {\n  return () => void 0;\n}\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\nfunction typeAssertIs() {\n  return () => void 0;\n}\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\n\n//# sourceMappingURL=types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvdHlwZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS91dGlscy90eXBlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvdHlwZXMudHN4XG50eXBlQXNzZXJ0SXMoKSgpO1xudHlwZUFzc2VydElzKCkoKTtcbnR5cGVBc3NlcnRJcygpKCk7XG5mdW5jdGlvbiB0eXBlQXNzZXJ0KCkge1xuICByZXR1cm4gKCkgPT4gdm9pZCAwO1xufVxudHlwZUFzc2VydEV4dGVuZHMoKSgpO1xudHlwZUFzc2VydEV4dGVuZHMoKSgpO1xudHlwZUFzc2VydEV4dGVuZHMoKSgpO1xudHlwZUFzc2VydEV4dGVuZHMoKSgpO1xuZnVuY3Rpb24gdHlwZUFzc2VydEV4dGVuZHMoKSB7XG4gIHJldHVybiAoKSA9PiB2b2lkIDA7XG59XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG5mdW5jdGlvbiB0eXBlQXNzZXJ0SXMoKSB7XG4gIHJldHVybiAoKSA9PiB2b2lkIDA7XG59XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG5leHBvcnQge1xuICB0eXBlQXNzZXJ0LFxuICB0eXBlQXNzZXJ0RXh0ZW5kcyxcbiAgdHlwZUFzc2VydElzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHlwZXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/types.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/urls.js":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/urls.js ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createUrlIfValid: () => (/* binding */ createUrlIfValid),\n/* harmony export */   getRelativePart: () => (/* binding */ getRelativePart),\n/* harmony export */   isLocalhost: () => (/* binding */ isLocalhost),\n/* harmony export */   isRelative: () => (/* binding */ isRelative),\n/* harmony export */   isValidHostname: () => (/* binding */ isValidHostname),\n/* harmony export */   isValidHostnameWithWildcards: () => (/* binding */ isValidHostnameWithWildcards),\n/* harmony export */   isValidUrl: () => (/* binding */ isValidUrl),\n/* harmony export */   matchHostnamePattern: () => (/* binding */ matchHostnamePattern),\n/* harmony export */   url: () => (/* binding */ url),\n/* harmony export */   urlString: () => (/* binding */ urlString)\n/* harmony export */ });\n/* harmony import */ var _crypto_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./crypto.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/crypto.js\");\n/* harmony import */ var _strings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./strings.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/strings.js\");\n// src/utils/urls.tsx\n\n\nfunction createUrlIfValid(...args) {\n  try {\n    return new URL(...args);\n  } catch (e) {\n    return null;\n  }\n}\nfunction isValidUrl(url2) {\n  return !!createUrlIfValid(url2);\n}\nfunction isValidHostname(hostname) {\n  if (!hostname || hostname.startsWith(\".\") || hostname.endsWith(\".\") || hostname.includes(\"..\")) {\n    return false;\n  }\n  const url2 = createUrlIfValid(`https://${hostname}`);\n  if (!url2) return false;\n  return url2.hostname === hostname;\n}\nfunction isValidHostnameWithWildcards(hostname) {\n  if (!hostname) return false;\n  const hasWildcard = hostname.includes(\"*\");\n  if (!hasWildcard) {\n    return isValidHostname(hostname);\n  }\n  if (hostname.startsWith(\".\") || hostname.endsWith(\".\")) {\n    return false;\n  }\n  if (hostname.includes(\"..\")) {\n    return false;\n  }\n  const testHostname = hostname.replace(/\\*+/g, \"wildcard\");\n  if (!/^[a-zA-Z0-9.-]+$/.test(testHostname)) {\n    return false;\n  }\n  const segments = hostname.split(/\\*+/);\n  for (let i = 0; i < segments.length; i++) {\n    const segment = segments[i];\n    if (segment === \"\") continue;\n    if (i === 0 && segment.startsWith(\".\")) {\n      return false;\n    }\n    if (i === segments.length - 1 && segment.endsWith(\".\")) {\n      return false;\n    }\n    if (segment.includes(\"..\")) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction matchHostnamePattern(pattern, hostname) {\n  if (!pattern.includes(\"*\")) {\n    return pattern === hostname;\n  }\n  let regexPattern = pattern.replace(/[.+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n  const doubleWildcardPlaceholder = \"\\0DOUBLE_WILDCARD\\0\";\n  regexPattern = regexPattern.replace(/\\*\\*/g, doubleWildcardPlaceholder);\n  regexPattern = regexPattern.replace(/\\*/g, \"[^.]*\");\n  regexPattern = regexPattern.replace(new RegExp(doubleWildcardPlaceholder, \"g\"), \".*\");\n  regexPattern = \"^\" + regexPattern + \"$\";\n  try {\n    const regex = new RegExp(regexPattern);\n    return regex.test(hostname);\n  } catch {\n    return false;\n  }\n}\nfunction isLocalhost(urlOrString) {\n  const url2 = createUrlIfValid(urlOrString);\n  if (!url2) return false;\n  if (url2.hostname === \"localhost\" || url2.hostname.endsWith(\".localhost\")) return true;\n  if (url2.hostname.match(/^127\\.\\d+\\.\\d+\\.\\d+$/)) return true;\n  return false;\n}\nfunction isRelative(url2) {\n  const randomDomain = `${(0,_crypto_js__WEBPACK_IMPORTED_MODULE_0__.generateSecureRandomString)()}.stack-auth.example.com`;\n  const u = createUrlIfValid(url2, `https://${randomDomain}`);\n  if (!u) return false;\n  if (u.host !== randomDomain) return false;\n  if (u.protocol !== \"https:\") return false;\n  return true;\n}\nfunction getRelativePart(url2) {\n  return url2.pathname + url2.search + url2.hash;\n}\nfunction url(strings, ...values) {\n  return new URL(urlString(strings, ...values));\n}\nfunction urlString(strings, ...values) {\n  return (0,_strings_js__WEBPACK_IMPORTED_MODULE_1__.templateIdentity)(strings, ...values.map(encodeURIComponent));\n}\n\n//# sourceMappingURL=urls.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvdXJscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUN5RDtBQUNUO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxTQUFTO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IscUJBQXFCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsc0VBQTBCLEdBQUc7QUFDdkQsOENBQThDLGFBQWE7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyw2REFBZ0I7QUFDekI7QUFZRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS91dGlscy91cmxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy91cmxzLnRzeFxuaW1wb3J0IHsgZ2VuZXJhdGVTZWN1cmVSYW5kb21TdHJpbmcgfSBmcm9tIFwiLi9jcnlwdG8uanNcIjtcbmltcG9ydCB7IHRlbXBsYXRlSWRlbnRpdHkgfSBmcm9tIFwiLi9zdHJpbmdzLmpzXCI7XG5mdW5jdGlvbiBjcmVhdGVVcmxJZlZhbGlkKC4uLmFyZ3MpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gbmV3IFVSTCguLi5hcmdzKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5mdW5jdGlvbiBpc1ZhbGlkVXJsKHVybDIpIHtcbiAgcmV0dXJuICEhY3JlYXRlVXJsSWZWYWxpZCh1cmwyKTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRIb3N0bmFtZShob3N0bmFtZSkge1xuICBpZiAoIWhvc3RuYW1lIHx8IGhvc3RuYW1lLnN0YXJ0c1dpdGgoXCIuXCIpIHx8IGhvc3RuYW1lLmVuZHNXaXRoKFwiLlwiKSB8fCBob3N0bmFtZS5pbmNsdWRlcyhcIi4uXCIpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IHVybDIgPSBjcmVhdGVVcmxJZlZhbGlkKGBodHRwczovLyR7aG9zdG5hbWV9YCk7XG4gIGlmICghdXJsMikgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gdXJsMi5ob3N0bmFtZSA9PT0gaG9zdG5hbWU7XG59XG5mdW5jdGlvbiBpc1ZhbGlkSG9zdG5hbWVXaXRoV2lsZGNhcmRzKGhvc3RuYW1lKSB7XG4gIGlmICghaG9zdG5hbWUpIHJldHVybiBmYWxzZTtcbiAgY29uc3QgaGFzV2lsZGNhcmQgPSBob3N0bmFtZS5pbmNsdWRlcyhcIipcIik7XG4gIGlmICghaGFzV2lsZGNhcmQpIHtcbiAgICByZXR1cm4gaXNWYWxpZEhvc3RuYW1lKGhvc3RuYW1lKTtcbiAgfVxuICBpZiAoaG9zdG5hbWUuc3RhcnRzV2l0aChcIi5cIikgfHwgaG9zdG5hbWUuZW5kc1dpdGgoXCIuXCIpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChob3N0bmFtZS5pbmNsdWRlcyhcIi4uXCIpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IHRlc3RIb3N0bmFtZSA9IGhvc3RuYW1lLnJlcGxhY2UoL1xcKisvZywgXCJ3aWxkY2FyZFwiKTtcbiAgaWYgKCEvXlthLXpBLVowLTkuLV0rJC8udGVzdCh0ZXN0SG9zdG5hbWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IHNlZ21lbnRzID0gaG9zdG5hbWUuc3BsaXQoL1xcKisvKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHNlZ21lbnQgPSBzZWdtZW50c1tpXTtcbiAgICBpZiAoc2VnbWVudCA9PT0gXCJcIikgY29udGludWU7XG4gICAgaWYgKGkgPT09IDAgJiYgc2VnbWVudC5zdGFydHNXaXRoKFwiLlwiKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoaSA9PT0gc2VnbWVudHMubGVuZ3RoIC0gMSAmJiBzZWdtZW50LmVuZHNXaXRoKFwiLlwiKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoc2VnbWVudC5pbmNsdWRlcyhcIi4uXCIpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gbWF0Y2hIb3N0bmFtZVBhdHRlcm4ocGF0dGVybiwgaG9zdG5hbWUpIHtcbiAgaWYgKCFwYXR0ZXJuLmluY2x1ZGVzKFwiKlwiKSkge1xuICAgIHJldHVybiBwYXR0ZXJuID09PSBob3N0bmFtZTtcbiAgfVxuICBsZXQgcmVnZXhQYXR0ZXJuID0gcGF0dGVybi5yZXBsYWNlKC9bLis/XiR7fSgpfFtcXF1cXFxcXS9nLCBcIlxcXFwkJlwiKTtcbiAgY29uc3QgZG91YmxlV2lsZGNhcmRQbGFjZWhvbGRlciA9IFwiXFwwRE9VQkxFX1dJTERDQVJEXFwwXCI7XG4gIHJlZ2V4UGF0dGVybiA9IHJlZ2V4UGF0dGVybi5yZXBsYWNlKC9cXCpcXCovZywgZG91YmxlV2lsZGNhcmRQbGFjZWhvbGRlcik7XG4gIHJlZ2V4UGF0dGVybiA9IHJlZ2V4UGF0dGVybi5yZXBsYWNlKC9cXCovZywgXCJbXi5dKlwiKTtcbiAgcmVnZXhQYXR0ZXJuID0gcmVnZXhQYXR0ZXJuLnJlcGxhY2UobmV3IFJlZ0V4cChkb3VibGVXaWxkY2FyZFBsYWNlaG9sZGVyLCBcImdcIiksIFwiLipcIik7XG4gIHJlZ2V4UGF0dGVybiA9IFwiXlwiICsgcmVnZXhQYXR0ZXJuICsgXCIkXCI7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKHJlZ2V4UGF0dGVybik7XG4gICAgcmV0dXJuIHJlZ2V4LnRlc3QoaG9zdG5hbWUpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbmZ1bmN0aW9uIGlzTG9jYWxob3N0KHVybE9yU3RyaW5nKSB7XG4gIGNvbnN0IHVybDIgPSBjcmVhdGVVcmxJZlZhbGlkKHVybE9yU3RyaW5nKTtcbiAgaWYgKCF1cmwyKSByZXR1cm4gZmFsc2U7XG4gIGlmICh1cmwyLmhvc3RuYW1lID09PSBcImxvY2FsaG9zdFwiIHx8IHVybDIuaG9zdG5hbWUuZW5kc1dpdGgoXCIubG9jYWxob3N0XCIpKSByZXR1cm4gdHJ1ZTtcbiAgaWYgKHVybDIuaG9zdG5hbWUubWF0Y2goL14xMjdcXC5cXGQrXFwuXFxkK1xcLlxcZCskLykpIHJldHVybiB0cnVlO1xuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBpc1JlbGF0aXZlKHVybDIpIHtcbiAgY29uc3QgcmFuZG9tRG9tYWluID0gYCR7Z2VuZXJhdGVTZWN1cmVSYW5kb21TdHJpbmcoKX0uc3RhY2stYXV0aC5leGFtcGxlLmNvbWA7XG4gIGNvbnN0IHUgPSBjcmVhdGVVcmxJZlZhbGlkKHVybDIsIGBodHRwczovLyR7cmFuZG9tRG9tYWlufWApO1xuICBpZiAoIXUpIHJldHVybiBmYWxzZTtcbiAgaWYgKHUuaG9zdCAhPT0gcmFuZG9tRG9tYWluKSByZXR1cm4gZmFsc2U7XG4gIGlmICh1LnByb3RvY29sICE9PSBcImh0dHBzOlwiKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gZ2V0UmVsYXRpdmVQYXJ0KHVybDIpIHtcbiAgcmV0dXJuIHVybDIucGF0aG5hbWUgKyB1cmwyLnNlYXJjaCArIHVybDIuaGFzaDtcbn1cbmZ1bmN0aW9uIHVybChzdHJpbmdzLCAuLi52YWx1ZXMpIHtcbiAgcmV0dXJuIG5ldyBVUkwodXJsU3RyaW5nKHN0cmluZ3MsIC4uLnZhbHVlcykpO1xufVxuZnVuY3Rpb24gdXJsU3RyaW5nKHN0cmluZ3MsIC4uLnZhbHVlcykge1xuICByZXR1cm4gdGVtcGxhdGVJZGVudGl0eShzdHJpbmdzLCAuLi52YWx1ZXMubWFwKGVuY29kZVVSSUNvbXBvbmVudCkpO1xufVxuZXhwb3J0IHtcbiAgY3JlYXRlVXJsSWZWYWxpZCxcbiAgZ2V0UmVsYXRpdmVQYXJ0LFxuICBpc0xvY2FsaG9zdCxcbiAgaXNSZWxhdGl2ZSxcbiAgaXNWYWxpZEhvc3RuYW1lLFxuICBpc1ZhbGlkSG9zdG5hbWVXaXRoV2lsZGNhcmRzLFxuICBpc1ZhbGlkVXJsLFxuICBtYXRjaEhvc3RuYW1lUGF0dGVybixcbiAgdXJsLFxuICB1cmxTdHJpbmdcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11cmxzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/urls.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/uuids.js":
/*!*******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/uuids.js ***!
  \*******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateUuid: () => (/* binding */ generateUuid),\n/* harmony export */   isUuid: () => (/* binding */ isUuid)\n/* harmony export */ });\n/* harmony import */ var _crypto_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./crypto.js */ \"(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/crypto.js\");\n// src/utils/uuids.tsx\n\nfunction generateUuid() {\n  return \"10000000-1000-4000-8000-100000000000\".replace(\n    /[018]/g,\n    (c) => (+c ^ (0,_crypto_js__WEBPACK_IMPORTED_MODULE_0__.generateRandomValues)(new Uint8Array(1))[0] & 15 >> +c / 4).toString(16)\n  );\n}\nfunction isUuid(str) {\n  return /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/.test(str);\n}\n\n//# sourceMappingURL=uuids.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvdXVpZHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDbUQ7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGdFQUFvQjtBQUNyQztBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLGdCQUFnQixFQUFFLFVBQVUsR0FBRztBQUM5RTtBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZngyZWRlbm9hc2lzL0Rvd25sb2Fkcy9EZXZlbG9wbWVudC9Fc3BhZGEvbm9kZV9tb2R1bGVzLy5wbnBtL0BzdGFja2ZyYW1lK3N0YWNrLXNoYXJlZEAyLjguNDFfQGF3cy1zZGsrY3JlZGVudGlhbC1wcm92aWRlci13ZWItaWRlbnRpdHlAMy45MDEuMF9AdHlwZV83NGRiYTAxZjZkODllNzIwODk2YjRkZjM0NTgzMzk5MC9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvZXNtL3V0aWxzL3V1aWRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy91dWlkcy50c3hcbmltcG9ydCB7IGdlbmVyYXRlUmFuZG9tVmFsdWVzIH0gZnJvbSBcIi4vY3J5cHRvLmpzXCI7XG5mdW5jdGlvbiBnZW5lcmF0ZVV1aWQoKSB7XG4gIHJldHVybiBcIjEwMDAwMDAwLTEwMDAtNDAwMC04MDAwLTEwMDAwMDAwMDAwMFwiLnJlcGxhY2UoXG4gICAgL1swMThdL2csXG4gICAgKGMpID0+ICgrYyBeIGdlbmVyYXRlUmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDEpKVswXSAmIDE1ID4+ICtjIC8gNCkudG9TdHJpbmcoMTYpXG4gICk7XG59XG5mdW5jdGlvbiBpc1V1aWQoc3RyKSB7XG4gIHJldHVybiAvXlswLTlhLWZdezh9LVswLTlhLWZdezR9LTRbMC05YS1mXXszfS1bODlhYl1bMC05YS1mXXszfS1bMC05YS1mXXsxMn0kLy50ZXN0KHN0cik7XG59XG5leHBvcnQge1xuICBnZW5lcmF0ZVV1aWQsXG4gIGlzVXVpZFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV1aWRzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/uuids.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/helpers/password.js":
/*!************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/helpers/password.js ***!
  \************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getPasswordError: () => (/* binding */ getPasswordError)\n/* harmony export */ });\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../index.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/index.js\");\n// src/helpers/password.ts\n\nvar minLength = 8;\nvar maxLength = 70;\nfunction getPasswordError(password) {\n  if (password.length < minLength) {\n    return new _index_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.PasswordTooShort(minLength);\n  }\n  if (password.length > maxLength) {\n    return new _index_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.PasswordTooLong(maxLength);\n  }\n  return void 0;\n}\n\n//# sourceMappingURL=password.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vaGVscGVycy9wYXNzd29yZC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQzBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS9oZWxwZXJzL3Bhc3N3b3JkLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9oZWxwZXJzL3Bhc3N3b3JkLnRzXG5pbXBvcnQgeyBLbm93bkVycm9ycyB9IGZyb20gXCIuLi9pbmRleC5qc1wiO1xudmFyIG1pbkxlbmd0aCA9IDg7XG52YXIgbWF4TGVuZ3RoID0gNzA7XG5mdW5jdGlvbiBnZXRQYXNzd29yZEVycm9yKHBhc3N3b3JkKSB7XG4gIGlmIChwYXNzd29yZC5sZW5ndGggPCBtaW5MZW5ndGgpIHtcbiAgICByZXR1cm4gbmV3IEtub3duRXJyb3JzLlBhc3N3b3JkVG9vU2hvcnQobWluTGVuZ3RoKTtcbiAgfVxuICBpZiAocGFzc3dvcmQubGVuZ3RoID4gbWF4TGVuZ3RoKSB7XG4gICAgcmV0dXJuIG5ldyBLbm93bkVycm9ycy5QYXNzd29yZFRvb0xvbmcobWF4TGVuZ3RoKTtcbiAgfVxuICByZXR1cm4gdm9pZCAwO1xufVxuZXhwb3J0IHtcbiAgZ2V0UGFzc3dvcmRFcnJvclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhc3N3b3JkLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/helpers/password.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/helpers/production-mode.js":
/*!*******************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/helpers/production-mode.js ***!
  \*******************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getProductionModeErrors: () => (/* binding */ getProductionModeErrors)\n/* harmony export */ });\n/* harmony import */ var _utils_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/errors.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n/* harmony import */ var _utils_urls_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/urls.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/urls.js\");\n// src/helpers/production-mode.ts\n\n\nfunction getProductionModeErrors(project) {\n  const errors = [];\n  const domainsFixUrl = `/projects/${project.id}/domains`;\n  if (project.config.allow_localhost) {\n    errors.push({\n      message: \"Localhost is not allowed in production mode, turn off 'Allow localhost' in project settings\",\n      relativeFixUrl: domainsFixUrl\n    });\n  }\n  for (const { domain } of project.config.domains) {\n    let url;\n    try {\n      const normalizedDomain = domain.replace(/\\*+/g, \"wildcard-placeholder\");\n      url = new URL(normalizedDomain);\n    } catch (e) {\n      (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_0__.captureError)(\"production-mode-domain-not-valid\", new _utils_errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Domain was somehow not a valid URL; we should've caught this when setting the domain in the first place\", {\n        domain,\n        projectId: project\n      }));\n      errors.push({\n        message: \"Trusted domain is not a valid URL: \" + domain,\n        relativeFixUrl: domainsFixUrl\n      });\n      continue;\n    }\n    if ((0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_1__.isLocalhost)(url)) {\n      errors.push({\n        message: \"Localhost domains are not allowed to be trusted in production mode: \" + domain,\n        relativeFixUrl: domainsFixUrl\n      });\n    } else if (url.hostname.match(/^\\d+(\\.\\d+)*$/)) {\n      errors.push({\n        message: \"Direct IPs are not valid for trusted domains in production mode: \" + domain,\n        relativeFixUrl: domainsFixUrl\n      });\n    } else if (url.protocol !== \"https:\") {\n      errors.push({\n        message: \"Trusted domains should be HTTPS: \" + domain,\n        relativeFixUrl: domainsFixUrl\n      });\n    }\n  }\n  return errors;\n}\n\n//# sourceMappingURL=production-mode.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vaGVscGVycy9wcm9kdWN0aW9uLW1vZGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDdUU7QUFDeEI7QUFDL0M7QUFDQTtBQUNBLHFDQUFxQyxXQUFXO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLE1BQU0sOERBQVkseUNBQXlDLGlFQUFtQixzQ0FBc0M7QUFDcEg7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLFFBQVEsMkRBQVc7QUFDbkI7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZngyZWRlbm9hc2lzL0Rvd25sb2Fkcy9EZXZlbG9wbWVudC9Fc3BhZGEvbm9kZV9tb2R1bGVzLy5wbnBtL0BzdGFja2ZyYW1lK3N0YWNrLXNoYXJlZEAyLjguNDFfQGF3cy1zZGsrY3JlZGVudGlhbC1wcm92aWRlci13ZWItaWRlbnRpdHlAMy45MDEuMF9AdHlwZV83NGRiYTAxZjZkODllNzIwODk2YjRkZjM0NTgzMzk5MC9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvZXNtL2hlbHBlcnMvcHJvZHVjdGlvbi1tb2RlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9oZWxwZXJzL3Byb2R1Y3Rpb24tbW9kZS50c1xuaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciwgY2FwdHVyZUVycm9yIH0gZnJvbSBcIi4uL3V0aWxzL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgaXNMb2NhbGhvc3QgfSBmcm9tIFwiLi4vdXRpbHMvdXJscy5qc1wiO1xuZnVuY3Rpb24gZ2V0UHJvZHVjdGlvbk1vZGVFcnJvcnMocHJvamVjdCkge1xuICBjb25zdCBlcnJvcnMgPSBbXTtcbiAgY29uc3QgZG9tYWluc0ZpeFVybCA9IGAvcHJvamVjdHMvJHtwcm9qZWN0LmlkfS9kb21haW5zYDtcbiAgaWYgKHByb2plY3QuY29uZmlnLmFsbG93X2xvY2FsaG9zdCkge1xuICAgIGVycm9ycy5wdXNoKHtcbiAgICAgIG1lc3NhZ2U6IFwiTG9jYWxob3N0IGlzIG5vdCBhbGxvd2VkIGluIHByb2R1Y3Rpb24gbW9kZSwgdHVybiBvZmYgJ0FsbG93IGxvY2FsaG9zdCcgaW4gcHJvamVjdCBzZXR0aW5nc1wiLFxuICAgICAgcmVsYXRpdmVGaXhVcmw6IGRvbWFpbnNGaXhVcmxcbiAgICB9KTtcbiAgfVxuICBmb3IgKGNvbnN0IHsgZG9tYWluIH0gb2YgcHJvamVjdC5jb25maWcuZG9tYWlucykge1xuICAgIGxldCB1cmw7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWREb21haW4gPSBkb21haW4ucmVwbGFjZSgvXFwqKy9nLCBcIndpbGRjYXJkLXBsYWNlaG9sZGVyXCIpO1xuICAgICAgdXJsID0gbmV3IFVSTChub3JtYWxpemVkRG9tYWluKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjYXB0dXJlRXJyb3IoXCJwcm9kdWN0aW9uLW1vZGUtZG9tYWluLW5vdC12YWxpZFwiLCBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkRvbWFpbiB3YXMgc29tZWhvdyBub3QgYSB2YWxpZCBVUkw7IHdlIHNob3VsZCd2ZSBjYXVnaHQgdGhpcyB3aGVuIHNldHRpbmcgdGhlIGRvbWFpbiBpbiB0aGUgZmlyc3QgcGxhY2VcIiwge1xuICAgICAgICBkb21haW4sXG4gICAgICAgIHByb2plY3RJZDogcHJvamVjdFxuICAgICAgfSkpO1xuICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICBtZXNzYWdlOiBcIlRydXN0ZWQgZG9tYWluIGlzIG5vdCBhIHZhbGlkIFVSTDogXCIgKyBkb21haW4sXG4gICAgICAgIHJlbGF0aXZlRml4VXJsOiBkb21haW5zRml4VXJsXG4gICAgICB9KTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoaXNMb2NhbGhvc3QodXJsKSkge1xuICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICBtZXNzYWdlOiBcIkxvY2FsaG9zdCBkb21haW5zIGFyZSBub3QgYWxsb3dlZCB0byBiZSB0cnVzdGVkIGluIHByb2R1Y3Rpb24gbW9kZTogXCIgKyBkb21haW4sXG4gICAgICAgIHJlbGF0aXZlRml4VXJsOiBkb21haW5zRml4VXJsXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKHVybC5ob3N0bmFtZS5tYXRjaCgvXlxcZCsoXFwuXFxkKykqJC8pKSB7XG4gICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgIG1lc3NhZ2U6IFwiRGlyZWN0IElQcyBhcmUgbm90IHZhbGlkIGZvciB0cnVzdGVkIGRvbWFpbnMgaW4gcHJvZHVjdGlvbiBtb2RlOiBcIiArIGRvbWFpbixcbiAgICAgICAgcmVsYXRpdmVGaXhVcmw6IGRvbWFpbnNGaXhVcmxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAodXJsLnByb3RvY29sICE9PSBcImh0dHBzOlwiKSB7XG4gICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgIG1lc3NhZ2U6IFwiVHJ1c3RlZCBkb21haW5zIHNob3VsZCBiZSBIVFRQUzogXCIgKyBkb21haW4sXG4gICAgICAgIHJlbGF0aXZlRml4VXJsOiBkb21haW5zRml4VXJsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGVycm9ycztcbn1cbmV4cG9ydCB7XG4gIGdldFByb2R1Y3Rpb25Nb2RlRXJyb3JzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvZHVjdGlvbi1tb2RlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/helpers/production-mode.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/helpers/vault/client-side.js":
/*!*********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/helpers/vault/client-side.js ***!
  \*********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decryptValue: () => (/* binding */ decryptValue),\n/* harmony export */   encryptValue: () => (/* binding */ encryptValue),\n/* harmony export */   hashKey: () => (/* binding */ hashKey)\n/* harmony export */ });\n/* harmony import */ var _utils_bytes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/bytes.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/bytes.js\");\n/* harmony import */ var _utils_crypto_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/crypto.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/crypto.js\");\n// src/helpers/vault/client-side.ts\n\n\nvar hashPurpose = \"stack-data-vault-client-side-encryption-key-hash\";\nvar encryptionSecretPurpose = \"stack-data-vault-client-side-encryption-value-encryption-key-hash\";\nvar encryptionValuePurpose = \"stack-data-vault-client-side-encryption-value-encryption-value-encryption\";\nasync function getDerivedKey(secret, key) {\n  return await (0,_utils_crypto_js__WEBPACK_IMPORTED_MODULE_1__.iteratedHash)({\n    purpose: encryptionSecretPurpose,\n    extra: secret,\n    value: key,\n    iterations: 1e5\n  });\n}\nasync function hashKey(secret, key) {\n  return (0,_utils_bytes_js__WEBPACK_IMPORTED_MODULE_0__.encodeBase64)(await (0,_utils_crypto_js__WEBPACK_IMPORTED_MODULE_1__.hash)({\n    purpose: hashPurpose,\n    extra: secret,\n    value: await getDerivedKey(secret, key)\n  }));\n}\nasync function encryptValue(secret, key, value) {\n  const valueEncryptionDerivedKey = await getDerivedKey(secret, key);\n  const bytes = await (0,_utils_crypto_js__WEBPACK_IMPORTED_MODULE_1__.encrypt)({\n    purpose: encryptionValuePurpose,\n    secret: valueEncryptionDerivedKey,\n    value: new TextEncoder().encode(value)\n  });\n  return (0,_utils_bytes_js__WEBPACK_IMPORTED_MODULE_0__.encodeBase64)(bytes);\n}\nasync function decryptValue(secret, key, encryptedValue) {\n  const valueEncryptionDerivedKey = await getDerivedKey(secret, key);\n  const bytesResult = await (0,_utils_crypto_js__WEBPACK_IMPORTED_MODULE_1__.decrypt)({\n    purpose: encryptionValuePurpose,\n    secret: valueEncryptionDerivedKey,\n    cipher: (0,_utils_bytes_js__WEBPACK_IMPORTED_MODULE_0__.decodeBase64)(encryptedValue)\n  });\n  if (bytesResult.status === \"error\") throw new Error(\"Data vault client-side decryption failed. Are you sure you're using the correct secret?\", { cause: bytesResult.error });\n  return new TextDecoder().decode(bytesResult.data);\n}\n\n//# sourceMappingURL=client-side.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vaGVscGVycy92YXVsdC9jbGllbnQtc2lkZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ2tFO0FBQ1c7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDhEQUFZO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxTQUFTLDZEQUFZLE9BQU8sc0RBQUk7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix5REFBTztBQUM3QjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsU0FBUyw2REFBWTtBQUNyQjtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIseURBQU87QUFDbkM7QUFDQTtBQUNBLFlBQVksNkRBQVk7QUFDeEIsR0FBRztBQUNILG1KQUFtSiwwQkFBMEI7QUFDN0s7QUFDQTtBQUtFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZngyZWRlbm9hc2lzL0Rvd25sb2Fkcy9EZXZlbG9wbWVudC9Fc3BhZGEvbm9kZV9tb2R1bGVzLy5wbnBtL0BzdGFja2ZyYW1lK3N0YWNrLXNoYXJlZEAyLjguNDFfQGF3cy1zZGsrY3JlZGVudGlhbC1wcm92aWRlci13ZWItaWRlbnRpdHlAMy45MDEuMF9AdHlwZV83NGRiYTAxZjZkODllNzIwODk2YjRkZjM0NTgzMzk5MC9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvZXNtL2hlbHBlcnMvdmF1bHQvY2xpZW50LXNpZGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2hlbHBlcnMvdmF1bHQvY2xpZW50LXNpZGUudHNcbmltcG9ydCB7IGRlY29kZUJhc2U2NCwgZW5jb2RlQmFzZTY0IH0gZnJvbSBcIi4uLy4uL3V0aWxzL2J5dGVzLmpzXCI7XG5pbXBvcnQgeyBkZWNyeXB0LCBlbmNyeXB0LCBoYXNoLCBpdGVyYXRlZEhhc2ggfSBmcm9tIFwiLi4vLi4vdXRpbHMvY3J5cHRvLmpzXCI7XG52YXIgaGFzaFB1cnBvc2UgPSBcInN0YWNrLWRhdGEtdmF1bHQtY2xpZW50LXNpZGUtZW5jcnlwdGlvbi1rZXktaGFzaFwiO1xudmFyIGVuY3J5cHRpb25TZWNyZXRQdXJwb3NlID0gXCJzdGFjay1kYXRhLXZhdWx0LWNsaWVudC1zaWRlLWVuY3J5cHRpb24tdmFsdWUtZW5jcnlwdGlvbi1rZXktaGFzaFwiO1xudmFyIGVuY3J5cHRpb25WYWx1ZVB1cnBvc2UgPSBcInN0YWNrLWRhdGEtdmF1bHQtY2xpZW50LXNpZGUtZW5jcnlwdGlvbi12YWx1ZS1lbmNyeXB0aW9uLXZhbHVlLWVuY3J5cHRpb25cIjtcbmFzeW5jIGZ1bmN0aW9uIGdldERlcml2ZWRLZXkoc2VjcmV0LCBrZXkpIHtcbiAgcmV0dXJuIGF3YWl0IGl0ZXJhdGVkSGFzaCh7XG4gICAgcHVycG9zZTogZW5jcnlwdGlvblNlY3JldFB1cnBvc2UsXG4gICAgZXh0cmE6IHNlY3JldCxcbiAgICB2YWx1ZToga2V5LFxuICAgIGl0ZXJhdGlvbnM6IDFlNVxuICB9KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGhhc2hLZXkoc2VjcmV0LCBrZXkpIHtcbiAgcmV0dXJuIGVuY29kZUJhc2U2NChhd2FpdCBoYXNoKHtcbiAgICBwdXJwb3NlOiBoYXNoUHVycG9zZSxcbiAgICBleHRyYTogc2VjcmV0LFxuICAgIHZhbHVlOiBhd2FpdCBnZXREZXJpdmVkS2V5KHNlY3JldCwga2V5KVxuICB9KSk7XG59XG5hc3luYyBmdW5jdGlvbiBlbmNyeXB0VmFsdWUoc2VjcmV0LCBrZXksIHZhbHVlKSB7XG4gIGNvbnN0IHZhbHVlRW5jcnlwdGlvbkRlcml2ZWRLZXkgPSBhd2FpdCBnZXREZXJpdmVkS2V5KHNlY3JldCwga2V5KTtcbiAgY29uc3QgYnl0ZXMgPSBhd2FpdCBlbmNyeXB0KHtcbiAgICBwdXJwb3NlOiBlbmNyeXB0aW9uVmFsdWVQdXJwb3NlLFxuICAgIHNlY3JldDogdmFsdWVFbmNyeXB0aW9uRGVyaXZlZEtleSxcbiAgICB2YWx1ZTogbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHZhbHVlKVxuICB9KTtcbiAgcmV0dXJuIGVuY29kZUJhc2U2NChieXRlcyk7XG59XG5hc3luYyBmdW5jdGlvbiBkZWNyeXB0VmFsdWUoc2VjcmV0LCBrZXksIGVuY3J5cHRlZFZhbHVlKSB7XG4gIGNvbnN0IHZhbHVlRW5jcnlwdGlvbkRlcml2ZWRLZXkgPSBhd2FpdCBnZXREZXJpdmVkS2V5KHNlY3JldCwga2V5KTtcbiAgY29uc3QgYnl0ZXNSZXN1bHQgPSBhd2FpdCBkZWNyeXB0KHtcbiAgICBwdXJwb3NlOiBlbmNyeXB0aW9uVmFsdWVQdXJwb3NlLFxuICAgIHNlY3JldDogdmFsdWVFbmNyeXB0aW9uRGVyaXZlZEtleSxcbiAgICBjaXBoZXI6IGRlY29kZUJhc2U2NChlbmNyeXB0ZWRWYWx1ZSlcbiAgfSk7XG4gIGlmIChieXRlc1Jlc3VsdC5zdGF0dXMgPT09IFwiZXJyb3JcIikgdGhyb3cgbmV3IEVycm9yKFwiRGF0YSB2YXVsdCBjbGllbnQtc2lkZSBkZWNyeXB0aW9uIGZhaWxlZC4gQXJlIHlvdSBzdXJlIHlvdSdyZSB1c2luZyB0aGUgY29ycmVjdCBzZWNyZXQ/XCIsIHsgY2F1c2U6IGJ5dGVzUmVzdWx0LmVycm9yIH0pO1xuICByZXR1cm4gbmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKGJ5dGVzUmVzdWx0LmRhdGEpO1xufVxuZXhwb3J0IHtcbiAgZGVjcnlwdFZhbHVlLFxuICBlbmNyeXB0VmFsdWUsXG4gIGhhc2hLZXlcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQtc2lkZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/helpers/vault/client-side.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/hooks/use-async-callback.js":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/hooks/use-async-callback.js ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAsyncCallback: () => (/* binding */ useAsyncCallback),\n/* harmony export */   useAsyncCallbackWithLoggedError: () => (/* binding */ useAsyncCallbackWithLoggedError)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@15.5.4_@opentelemetry+api@1.9.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/errors.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n// src/hooks/use-async-callback.tsx\n\n\nfunction useAsyncCallback(callback, deps) {\n  const [error, setError] = react__WEBPACK_IMPORTED_MODULE_0___default().useState(void 0);\n  const [loadingCount, setLoadingCount] = react__WEBPACK_IMPORTED_MODULE_0___default().useState(0);\n  const cb = react__WEBPACK_IMPORTED_MODULE_0___default().useCallback(\n    async (...args) => {\n      setLoadingCount((c) => c + 1);\n      try {\n        return await callback(...args);\n      } catch (e) {\n        setError(e);\n        throw e;\n      } finally {\n        setLoadingCount((c) => c - 1);\n      }\n    },\n    deps\n  );\n  return [cb, loadingCount > 0, error];\n}\nfunction useAsyncCallbackWithLoggedError(callback, deps) {\n  const [newCallback, loading] = useAsyncCallback(async (...args) => {\n    try {\n      return await callback(...args);\n    } catch (e) {\n      (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_1__.captureError)(\"async-callback\", e);\n      throw e;\n    }\n  }, deps);\n  return [newCallback, loading];\n}\n\n//# sourceMappingURL=use-async-callback.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vaG9va3MvdXNlLWFzeW5jLWNhbGxiYWNrLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDMEI7QUFDd0I7QUFDbEQ7QUFDQSw0QkFBNEIscURBQWM7QUFDMUMsMENBQTBDLHFEQUFjO0FBQ3hELGFBQWEsd0RBQWlCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLE1BQU0sOERBQVk7QUFDbEI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2dmeDJlZGVub2FzaXMvRG93bmxvYWRzL0RldmVsb3BtZW50L0VzcGFkYS9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vaG9va3MvdXNlLWFzeW5jLWNhbGxiYWNrLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9ob29rcy91c2UtYXN5bmMtY2FsbGJhY2sudHN4XG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBjYXB0dXJlRXJyb3IgfSBmcm9tIFwiLi4vdXRpbHMvZXJyb3JzLmpzXCI7XG5mdW5jdGlvbiB1c2VBc3luY0NhbGxiYWNrKGNhbGxiYWNrLCBkZXBzKSB7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gUmVhY3QudXNlU3RhdGUodm9pZCAwKTtcbiAgY29uc3QgW2xvYWRpbmdDb3VudCwgc2V0TG9hZGluZ0NvdW50XSA9IFJlYWN0LnVzZVN0YXRlKDApO1xuICBjb25zdCBjYiA9IFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgIGFzeW5jICguLi5hcmdzKSA9PiB7XG4gICAgICBzZXRMb2FkaW5nQ291bnQoKGMpID0+IGMgKyAxKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBjYWxsYmFjayguLi5hcmdzKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgc2V0RXJyb3IoZSk7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBzZXRMb2FkaW5nQ291bnQoKGMpID0+IGMgLSAxKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGRlcHNcbiAgKTtcbiAgcmV0dXJuIFtjYiwgbG9hZGluZ0NvdW50ID4gMCwgZXJyb3JdO1xufVxuZnVuY3Rpb24gdXNlQXN5bmNDYWxsYmFja1dpdGhMb2dnZWRFcnJvcihjYWxsYmFjaywgZGVwcykge1xuICBjb25zdCBbbmV3Q2FsbGJhY2ssIGxvYWRpbmddID0gdXNlQXN5bmNDYWxsYmFjayhhc3luYyAoLi4uYXJncykgPT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgY2FsbGJhY2soLi4uYXJncyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY2FwdHVyZUVycm9yKFwiYXN5bmMtY2FsbGJhY2tcIiwgZSk7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgfSwgZGVwcyk7XG4gIHJldHVybiBbbmV3Q2FsbGJhY2ssIGxvYWRpbmddO1xufVxuZXhwb3J0IHtcbiAgdXNlQXN5bmNDYWxsYmFjayxcbiAgdXNlQXN5bmNDYWxsYmFja1dpdGhMb2dnZWRFcnJvclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZS1hc3luYy1jYWxsYmFjay5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/hooks/use-async-callback.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/hooks/use-hash.js":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/hooks/use-hash.js ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useHash: () => (/* binding */ useHash)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@15.5.4_@opentelemetry+api@1.9.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils_react_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/react.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/react.js\");\n// src/hooks/use-hash.tsx\n\n\nvar useHash = () => {\n  (0,_utils_react_js__WEBPACK_IMPORTED_MODULE_1__.suspendIfSsr)(\"useHash\");\n  return (0,react__WEBPACK_IMPORTED_MODULE_0__.useSyncExternalStore)(\n    (onChange) => {\n      const interval = setInterval(() => onChange(), 10);\n      return () => clearInterval(interval);\n    },\n    () => window.location.hash.substring(1)\n  );\n};\n\n//# sourceMappingURL=use-hash.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vaG9va3MvdXNlLWhhc2guanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQzZDO0FBQ0k7QUFDakQ7QUFDQSxFQUFFLDZEQUFZO0FBQ2QsU0FBUywyREFBb0I7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZngyZWRlbm9hc2lzL0Rvd25sb2Fkcy9EZXZlbG9wbWVudC9Fc3BhZGEvbm9kZV9tb2R1bGVzLy5wbnBtL0BzdGFja2ZyYW1lK3N0YWNrLXNoYXJlZEAyLjguNDFfQGF3cy1zZGsrY3JlZGVudGlhbC1wcm92aWRlci13ZWItaWRlbnRpdHlAMy45MDEuMF9AdHlwZV83NGRiYTAxZjZkODllNzIwODk2YjRkZjM0NTgzMzk5MC9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvZXNtL2hvb2tzL3VzZS1oYXNoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9ob29rcy91c2UtaGFzaC50c3hcbmltcG9ydCB7IHVzZVN5bmNFeHRlcm5hbFN0b3JlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBzdXNwZW5kSWZTc3IgfSBmcm9tIFwiLi4vdXRpbHMvcmVhY3QuanNcIjtcbnZhciB1c2VIYXNoID0gKCkgPT4ge1xuICBzdXNwZW5kSWZTc3IoXCJ1c2VIYXNoXCIpO1xuICByZXR1cm4gdXNlU3luY0V4dGVybmFsU3RvcmUoXG4gICAgKG9uQ2hhbmdlKSA9PiB7XG4gICAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IG9uQ2hhbmdlKCksIDEwKTtcbiAgICAgIHJldHVybiAoKSA9PiBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICB9LFxuICAgICgpID0+IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKVxuICApO1xufTtcbmV4cG9ydCB7XG4gIHVzZUhhc2hcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2UtaGFzaC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/hooks/use-hash.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/index.js":
/*!*************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/index.js ***!
  \*************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KnownError: () => (/* reexport safe */ _known_errors_js__WEBPACK_IMPORTED_MODULE_3__.KnownError),\n/* harmony export */   KnownErrors: () => (/* reexport safe */ _known_errors_js__WEBPACK_IMPORTED_MODULE_3__.KnownErrors),\n/* harmony export */   StackAdminInterface: () => (/* reexport safe */ _interface_admin_interface_js__WEBPACK_IMPORTED_MODULE_0__.StackAdminInterface),\n/* harmony export */   StackClientInterface: () => (/* reexport safe */ _interface_client_interface_js__WEBPACK_IMPORTED_MODULE_1__.StackClientInterface),\n/* harmony export */   StackServerInterface: () => (/* reexport safe */ _interface_server_interface_js__WEBPACK_IMPORTED_MODULE_2__.StackServerInterface)\n/* harmony export */ });\n/* harmony import */ var _interface_admin_interface_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interface/admin-interface.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/admin-interface.js\");\n/* harmony import */ var _interface_client_interface_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./interface/client-interface.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/client-interface.js\");\n/* harmony import */ var _interface_server_interface_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./interface/server-interface.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/server-interface.js\");\n/* harmony import */ var _known_errors_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./known-errors.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/known-errors.js\");\n// src/index.ts\n\n\n\n\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7QUFHd0M7QUFHQztBQUdBO0FBSWQ7QUFPekI7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2dmeDJlZGVub2FzaXMvRG93bmxvYWRzL0RldmVsb3BtZW50L0VzcGFkYS9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2luZGV4LnRzXG5pbXBvcnQge1xuICBTdGFja0FkbWluSW50ZXJmYWNlXG59IGZyb20gXCIuL2ludGVyZmFjZS9hZG1pbi1pbnRlcmZhY2UuanNcIjtcbmltcG9ydCB7XG4gIFN0YWNrQ2xpZW50SW50ZXJmYWNlXG59IGZyb20gXCIuL2ludGVyZmFjZS9jbGllbnQtaW50ZXJmYWNlLmpzXCI7XG5pbXBvcnQge1xuICBTdGFja1NlcnZlckludGVyZmFjZVxufSBmcm9tIFwiLi9pbnRlcmZhY2Uvc2VydmVyLWludGVyZmFjZS5qc1wiO1xuaW1wb3J0IHtcbiAgS25vd25FcnJvcixcbiAgS25vd25FcnJvcnNcbn0gZnJvbSBcIi4va25vd24tZXJyb3JzLmpzXCI7XG5leHBvcnQge1xuICBLbm93bkVycm9yLFxuICBLbm93bkVycm9ycyxcbiAgU3RhY2tBZG1pbkludGVyZmFjZSxcbiAgU3RhY2tDbGllbnRJbnRlcmZhY2UsXG4gIFN0YWNrU2VydmVySW50ZXJmYWNlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/admin-interface.js":
/*!*********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/admin-interface.js ***!
  \*********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StackAdminInterface: () => (/* binding */ StackAdminInterface)\n/* harmony export */ });\n/* harmony import */ var _known_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../known-errors.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/known-errors.js\");\n/* harmony import */ var _utils_results_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/results.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/results.js\");\n/* harmony import */ var _server_interface_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./server-interface.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/server-interface.js\");\n// src/interface/admin-interface.ts\n\n\n\nvar StackAdminInterface = class extends _server_interface_js__WEBPACK_IMPORTED_MODULE_2__.StackServerInterface {\n  constructor(options) {\n    super(options);\n    this.options = options;\n  }\n  async sendAdminRequest(path, options, session, requestType = \"admin\") {\n    return await this.sendServerRequest(\n      path,\n      {\n        ...options,\n        headers: {\n          \"x-stack-super-secret-admin-key\": \"superSecretAdminKey\" in this.options ? this.options.superSecretAdminKey : \"\",\n          ...options.headers\n        }\n      },\n      session,\n      requestType\n    );\n  }\n  async sendAdminRequestAndCatchKnownError(path, requestOptions, tokenStoreOrNull, errorsToCatch) {\n    try {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_1__.Result.ok(await this.sendAdminRequest(path, requestOptions, tokenStoreOrNull));\n    } catch (e) {\n      for (const errorType of errorsToCatch) {\n        if (errorType.isInstance(e)) {\n          return _utils_results_js__WEBPACK_IMPORTED_MODULE_1__.Result.error(e);\n        }\n      }\n      throw e;\n    }\n  }\n  async getProject() {\n    const response = await this.sendAdminRequest(\n      \"/internal/projects/current\",\n      {\n        method: \"GET\"\n      },\n      null\n    );\n    return await response.json();\n  }\n  async updateProject(update) {\n    const response = await this.sendAdminRequest(\n      \"/internal/projects/current\",\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(update)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async createInternalApiKey(options) {\n    const response = await this.sendAdminRequest(\n      \"/internal/api-keys\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(options)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async listInternalApiKeys() {\n    const response = await this.sendAdminRequest(\"/internal/api-keys\", {}, null);\n    const result = await response.json();\n    return result.items;\n  }\n  async revokeInternalApiKeyById(id) {\n    await this.sendAdminRequest(\n      `/internal/api-keys/${id}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          revoked: true\n        })\n      },\n      null\n    );\n  }\n  async getInternalApiKey(id, session) {\n    const response = await this.sendAdminRequest(`/internal/api-keys/${id}`, {}, session);\n    return await response.json();\n  }\n  async listInternalEmailTemplates() {\n    const response = await this.sendAdminRequest(`/internal/email-templates`, {}, null);\n    const result = await response.json();\n    return result.templates;\n  }\n  async listInternalEmailDrafts() {\n    const response = await this.sendAdminRequest(`/internal/email-drafts`, {}, null);\n    const result = await response.json();\n    return result.drafts;\n  }\n  async createEmailDraft(options) {\n    const response = await this.sendAdminRequest(\n      `/internal/email-drafts`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(options)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async updateEmailDraft(id, data) {\n    await this.sendAdminRequest(\n      `/internal/email-drafts/${id}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      null\n    );\n  }\n  async listEmailThemes() {\n    const response = await this.sendAdminRequest(`/internal/email-themes`, {}, null);\n    const result = await response.json();\n    return result.themes;\n  }\n  // Team permission definitions methods\n  async listTeamPermissionDefinitions() {\n    const response = await this.sendAdminRequest(`/team-permission-definitions`, {}, null);\n    const result = await response.json();\n    return result.items;\n  }\n  async createTeamPermissionDefinition(data) {\n    const response = await this.sendAdminRequest(\n      \"/team-permission-definitions\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async updateTeamPermissionDefinition(permissionId, data) {\n    const response = await this.sendAdminRequest(\n      `/team-permission-definitions/${permissionId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async deleteTeamPermissionDefinition(permissionId) {\n    await this.sendAdminRequest(\n      `/team-permission-definitions/${permissionId}`,\n      { method: \"DELETE\" },\n      null\n    );\n  }\n  async listProjectPermissionDefinitions() {\n    const response = await this.sendAdminRequest(`/project-permission-definitions`, {}, null);\n    const result = await response.json();\n    return result.items;\n  }\n  async createProjectPermissionDefinition(data) {\n    const response = await this.sendAdminRequest(\n      \"/project-permission-definitions\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async updateProjectPermissionDefinition(permissionId, data) {\n    const response = await this.sendAdminRequest(\n      `/project-permission-definitions/${permissionId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async deleteProjectPermissionDefinition(permissionId) {\n    await this.sendAdminRequest(\n      `/project-permission-definitions/${permissionId}`,\n      { method: \"DELETE\" },\n      null\n    );\n  }\n  async getSvixToken() {\n    const response = await this.sendAdminRequest(\n      \"/webhooks/svix-token\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({})\n      },\n      null\n    );\n    return await response.json();\n  }\n  async deleteProject() {\n    await this.sendAdminRequest(\n      \"/internal/projects/current\",\n      {\n        method: \"DELETE\"\n      },\n      null\n    );\n  }\n  async transferProject(session, newTeamId) {\n    await this.sendAdminRequest(\n      \"/internal/projects/transfer\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          project_id: this.options.projectId,\n          new_team_id: newTeamId\n        })\n      },\n      session\n    );\n  }\n  async getMetrics(includeAnonymous = false) {\n    const params = new URLSearchParams();\n    if (includeAnonymous) {\n      params.append(\"include_anonymous\", \"true\");\n    }\n    const queryString = params.toString();\n    const response = await this.sendAdminRequest(\n      `/internal/metrics${queryString ? `?${queryString}` : \"\"}`,\n      {\n        method: \"GET\"\n      },\n      null\n    );\n    return await response.json();\n  }\n  async sendTestEmail(data) {\n    const response = await this.sendAdminRequest(`/internal/send-test-email`, {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify(data)\n    }, null);\n    return await response.json();\n  }\n  async listSentEmails() {\n    const response = await this.sendAdminRequest(\"/internal/emails\", {\n      method: \"GET\"\n    }, null);\n    return await response.json();\n  }\n  async sendSignInInvitationEmail(email, callbackUrl) {\n    await this.sendAdminRequest(\n      \"/internal/send-sign-in-invitation\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          callback_url: callbackUrl\n        })\n      },\n      null\n    );\n  }\n  async sendChatMessage(threadId, contextType, messages, abortSignal) {\n    const response = await this.sendAdminRequest(\n      `/internal/ai-chat/${threadId}`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({ context_type: contextType, messages }),\n        signal: abortSignal\n      },\n      null\n    );\n    return await response.json();\n  }\n  async saveChatMessage(threadId, message) {\n    await this.sendAdminRequest(\n      `/internal/ai-chat/${threadId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({ message })\n      },\n      null\n    );\n  }\n  async listChatMessages(threadId) {\n    const response = await this.sendAdminRequest(\n      `/internal/ai-chat/${threadId}`,\n      { method: \"GET\" },\n      null\n    );\n    return await response.json();\n  }\n  async renderEmailPreview(options) {\n    const response = await this.sendAdminRequest(`/emails/render-email`, {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        theme_id: options.themeId,\n        theme_tsx_source: options.themeTsxSource,\n        template_id: options.templateId,\n        template_tsx_source: options.templateTsxSource\n      })\n    }, null);\n    return await response.json();\n  }\n  async createEmailTheme(displayName) {\n    const response = await this.sendAdminRequest(\n      `/internal/email-themes`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          display_name: displayName\n        })\n      },\n      null\n    );\n    return await response.json();\n  }\n  async getEmailTheme(id) {\n    const response = await this.sendAdminRequest(\n      `/internal/email-themes/${id}`,\n      { method: \"GET\" },\n      null\n    );\n    return await response.json();\n  }\n  async updateEmailTheme(id, tsxSource) {\n    await this.sendAdminRequest(\n      `/internal/email-themes/${id}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          tsx_source: tsxSource\n        })\n      },\n      null\n    );\n  }\n  async updateEmailTemplate(id, tsxSource, themeId) {\n    const response = await this.sendAdminRequest(\n      `/internal/email-templates/${id}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({ tsx_source: tsxSource, theme_id: themeId })\n      },\n      null\n    );\n    return await response.json();\n  }\n  async getConfig() {\n    const response = await this.sendAdminRequest(\n      `/internal/config`,\n      { method: \"GET\" },\n      null\n    );\n    return await response.json();\n  }\n  async updateConfig(data) {\n    const response = await this.sendAdminRequest(\n      `/internal/config/override`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({ config_override_string: JSON.stringify(data.configOverride) })\n      },\n      null\n    );\n    return await response.json();\n  }\n  async createEmailTemplate(displayName) {\n    const response = await this.sendAdminRequest(\n      `/internal/email-templates`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          display_name: displayName\n        })\n      },\n      null\n    );\n    return await response.json();\n  }\n  async setupPayments() {\n    const response = await this.sendAdminRequest(\n      \"/internal/payments/setup\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({})\n      },\n      null\n    );\n    return await response.json();\n  }\n  async getStripeAccountInfo() {\n    const response = await this.sendAdminRequestAndCatchKnownError(\n      \"/internal/payments/stripe/account-info\",\n      {},\n      null,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.StripeAccountInfoNotFound]\n    );\n    if (response.status === \"error\") {\n      return null;\n    }\n    return await response.data.json();\n  }\n  async createStripeWidgetAccountSession() {\n    const response = await this.sendAdminRequest(\n      \"/internal/payments/stripe-widgets/account-session\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({})\n      },\n      null\n    );\n    return await response.json();\n  }\n  async listTransactions(params) {\n    const qs = new URLSearchParams();\n    if (params?.cursor) qs.set(\"cursor\", params.cursor);\n    if (typeof params?.limit === \"number\") qs.set(\"limit\", String(params.limit));\n    if (params?.type) qs.set(\"type\", params.type);\n    if (params?.customerType) qs.set(\"customer_type\", params.customerType);\n    const response = await this.sendAdminRequest(\n      `/internal/payments/transactions${qs.size ? `?${qs.toString()}` : \"\"}`,\n      { method: \"GET\" },\n      null\n    );\n    const json = await response.json();\n    return { transactions: json.transactions, nextCursor: json.next_cursor };\n  }\n  async testModePurchase(options) {\n    await this.sendAdminRequest(\n      \"/internal/payments/test-mode-purchase-session\",\n      {\n        method: \"POST\",\n        headers: { \"content-type\": \"application/json\" },\n        body: JSON.stringify(options)\n      },\n      null\n    );\n  }\n};\n\n//# sourceMappingURL=admin-interface.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vaW50ZXJmYWNlL2FkbWluLWludGVyZmFjZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDaUQ7QUFDSjtBQUNnQjtBQUM3RCx3Q0FBd0Msc0VBQW9CO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEscURBQU07QUFDbkIsTUFBTTtBQUNOO0FBQ0E7QUFDQSxpQkFBaUIscURBQU07QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RUFBeUU7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixHQUFHO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLEdBQUcsS0FBSztBQUMvRTtBQUNBO0FBQ0E7QUFDQSxnRkFBZ0Y7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QztBQUN2RDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZngyZWRlbm9hc2lzL0Rvd25sb2Fkcy9EZXZlbG9wbWVudC9Fc3BhZGEvbm9kZV9tb2R1bGVzLy5wbnBtL0BzdGFja2ZyYW1lK3N0YWNrLXNoYXJlZEAyLjguNDFfQGF3cy1zZGsrY3JlZGVudGlhbC1wcm92aWRlci13ZWItaWRlbnRpdHlAMy45MDEuMF9AdHlwZV83NGRiYTAxZjZkODllNzIwODk2YjRkZjM0NTgzMzk5MC9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvZXNtL2ludGVyZmFjZS9hZG1pbi1pbnRlcmZhY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2ludGVyZmFjZS9hZG1pbi1pbnRlcmZhY2UudHNcbmltcG9ydCB7IEtub3duRXJyb3JzIH0gZnJvbSBcIi4uL2tub3duLWVycm9ycy5qc1wiO1xuaW1wb3J0IHsgUmVzdWx0IH0gZnJvbSBcIi4uL3V0aWxzL3Jlc3VsdHMuanNcIjtcbmltcG9ydCB7IFN0YWNrU2VydmVySW50ZXJmYWNlIH0gZnJvbSBcIi4vc2VydmVyLWludGVyZmFjZS5qc1wiO1xudmFyIFN0YWNrQWRtaW5JbnRlcmZhY2UgPSBjbGFzcyBleHRlbmRzIFN0YWNrU2VydmVySW50ZXJmYWNlIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cbiAgYXN5bmMgc2VuZEFkbWluUmVxdWVzdChwYXRoLCBvcHRpb25zLCBzZXNzaW9uLCByZXF1ZXN0VHlwZSA9IFwiYWRtaW5cIikge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgcGF0aCxcbiAgICAgIHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwieC1zdGFjay1zdXBlci1zZWNyZXQtYWRtaW4ta2V5XCI6IFwic3VwZXJTZWNyZXRBZG1pbktleVwiIGluIHRoaXMub3B0aW9ucyA/IHRoaXMub3B0aW9ucy5zdXBlclNlY3JldEFkbWluS2V5IDogXCJcIixcbiAgICAgICAgICAuLi5vcHRpb25zLmhlYWRlcnNcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNlc3Npb24sXG4gICAgICByZXF1ZXN0VHlwZVxuICAgICk7XG4gIH1cbiAgYXN5bmMgc2VuZEFkbWluUmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihwYXRoLCByZXF1ZXN0T3B0aW9ucywgdG9rZW5TdG9yZU9yTnVsbCwgZXJyb3JzVG9DYXRjaCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gUmVzdWx0Lm9rKGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChwYXRoLCByZXF1ZXN0T3B0aW9ucywgdG9rZW5TdG9yZU9yTnVsbCkpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGZvciAoY29uc3QgZXJyb3JUeXBlIG9mIGVycm9yc1RvQ2F0Y2gpIHtcbiAgICAgICAgaWYgKGVycm9yVHlwZS5pc0luc3RhbmNlKGUpKSB7XG4gICAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgZ2V0UHJvamVjdCgpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcbiAgICAgIFwiL2ludGVybmFsL3Byb2plY3RzL2N1cnJlbnRcIixcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkdFVFwiXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyB1cGRhdGVQcm9qZWN0KHVwZGF0ZSkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgXCIvaW50ZXJuYWwvcHJvamVjdHMvY3VycmVudFwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHVwZGF0ZSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIGNyZWF0ZUludGVybmFsQXBpS2V5KG9wdGlvbnMpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcbiAgICAgIFwiL2ludGVybmFsL2FwaS1rZXlzXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvcHRpb25zKVxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgbGlzdEludGVybmFsQXBpS2V5cygpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcIi9pbnRlcm5hbC9hcGkta2V5c1wiLCB7fSwgbnVsbCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiByZXN1bHQuaXRlbXM7XG4gIH1cbiAgYXN5bmMgcmV2b2tlSW50ZXJuYWxBcGlLZXlCeUlkKGlkKSB7XG4gICAgYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgYC9pbnRlcm5hbC9hcGkta2V5cy8ke2lkfWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHJldm9rZWQ6IHRydWVcbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuICBhc3luYyBnZXRJbnRlcm5hbEFwaUtleShpZCwgc2Vzc2lvbikge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KGAvaW50ZXJuYWwvYXBpLWtleXMvJHtpZH1gLCB7fSwgc2Vzc2lvbik7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBsaXN0SW50ZXJuYWxFbWFpbFRlbXBsYXRlcygpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChgL2ludGVybmFsL2VtYWlsLXRlbXBsYXRlc2AsIHt9LCBudWxsKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHJlc3VsdC50ZW1wbGF0ZXM7XG4gIH1cbiAgYXN5bmMgbGlzdEludGVybmFsRW1haWxEcmFmdHMoKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoYC9pbnRlcm5hbC9lbWFpbC1kcmFmdHNgLCB7fSwgbnVsbCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiByZXN1bHQuZHJhZnRzO1xuICB9XG4gIGFzeW5jIGNyZWF0ZUVtYWlsRHJhZnQob3B0aW9ucykge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgYC9pbnRlcm5hbC9lbWFpbC1kcmFmdHNgLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkob3B0aW9ucylcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIHVwZGF0ZUVtYWlsRHJhZnQoaWQsIGRhdGEpIHtcbiAgICBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoXG4gICAgICBgL2ludGVybmFsL2VtYWlsLWRyYWZ0cy8ke2lkfWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuICBhc3luYyBsaXN0RW1haWxUaGVtZXMoKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoYC9pbnRlcm5hbC9lbWFpbC10aGVtZXNgLCB7fSwgbnVsbCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiByZXN1bHQudGhlbWVzO1xuICB9XG4gIC8vIFRlYW0gcGVybWlzc2lvbiBkZWZpbml0aW9ucyBtZXRob2RzXG4gIGFzeW5jIGxpc3RUZWFtUGVybWlzc2lvbkRlZmluaXRpb25zKCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KGAvdGVhbS1wZXJtaXNzaW9uLWRlZmluaXRpb25zYCwge30sIG51bGwpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4gcmVzdWx0Lml0ZW1zO1xuICB9XG4gIGFzeW5jIGNyZWF0ZVRlYW1QZXJtaXNzaW9uRGVmaW5pdGlvbihkYXRhKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoXG4gICAgICBcIi90ZWFtLXBlcm1pc3Npb24tZGVmaW5pdGlvbnNcIixcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyB1cGRhdGVUZWFtUGVybWlzc2lvbkRlZmluaXRpb24ocGVybWlzc2lvbklkLCBkYXRhKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoXG4gICAgICBgL3RlYW0tcGVybWlzc2lvbi1kZWZpbml0aW9ucy8ke3Blcm1pc3Npb25JZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBkZWxldGVUZWFtUGVybWlzc2lvbkRlZmluaXRpb24ocGVybWlzc2lvbklkKSB7XG4gICAgYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgYC90ZWFtLXBlcm1pc3Npb24tZGVmaW5pdGlvbnMvJHtwZXJtaXNzaW9uSWR9YCxcbiAgICAgIHsgbWV0aG9kOiBcIkRFTEVURVwiIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuICBhc3luYyBsaXN0UHJvamVjdFBlcm1pc3Npb25EZWZpbml0aW9ucygpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChgL3Byb2plY3QtcGVybWlzc2lvbi1kZWZpbml0aW9uc2AsIHt9LCBudWxsKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHJlc3VsdC5pdGVtcztcbiAgfVxuICBhc3luYyBjcmVhdGVQcm9qZWN0UGVybWlzc2lvbkRlZmluaXRpb24oZGF0YSkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgXCIvcHJvamVjdC1wZXJtaXNzaW9uLWRlZmluaXRpb25zXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlUHJvamVjdFBlcm1pc3Npb25EZWZpbml0aW9uKHBlcm1pc3Npb25JZCwgZGF0YSkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgYC9wcm9qZWN0LXBlcm1pc3Npb24tZGVmaW5pdGlvbnMvJHtwZXJtaXNzaW9uSWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgZGVsZXRlUHJvamVjdFBlcm1pc3Npb25EZWZpbml0aW9uKHBlcm1pc3Npb25JZCkge1xuICAgIGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcbiAgICAgIGAvcHJvamVjdC1wZXJtaXNzaW9uLWRlZmluaXRpb25zLyR7cGVybWlzc2lvbklkfWAsXG4gICAgICB7IG1ldGhvZDogXCJERUxFVEVcIiB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gIH1cbiAgYXN5bmMgZ2V0U3ZpeFRva2VuKCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgXCIvd2ViaG9va3Mvc3ZpeC10b2tlblwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe30pXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBkZWxldGVQcm9qZWN0KCkge1xuICAgIGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcbiAgICAgIFwiL2ludGVybmFsL3Byb2plY3RzL2N1cnJlbnRcIixcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gIH1cbiAgYXN5bmMgdHJhbnNmZXJQcm9qZWN0KHNlc3Npb24sIG5ld1RlYW1JZCkge1xuICAgIGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcbiAgICAgIFwiL2ludGVybmFsL3Byb2plY3RzL3RyYW5zZmVyXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgcHJvamVjdF9pZDogdGhpcy5vcHRpb25zLnByb2plY3RJZCxcbiAgICAgICAgICBuZXdfdGVhbV9pZDogbmV3VGVhbUlkXG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gIH1cbiAgYXN5bmMgZ2V0TWV0cmljcyhpbmNsdWRlQW5vbnltb3VzID0gZmFsc2UpIHtcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gICAgaWYgKGluY2x1ZGVBbm9ueW1vdXMpIHtcbiAgICAgIHBhcmFtcy5hcHBlbmQoXCJpbmNsdWRlX2Fub255bW91c1wiLCBcInRydWVcIik7XG4gICAgfVxuICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gcGFyYW1zLnRvU3RyaW5nKCk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoXG4gICAgICBgL2ludGVybmFsL21ldHJpY3Mke3F1ZXJ5U3RyaW5nID8gYD8ke3F1ZXJ5U3RyaW5nfWAgOiBcIlwifWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJHRVRcIlxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgc2VuZFRlc3RFbWFpbChkYXRhKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoYC9pbnRlcm5hbC9zZW5kLXRlc3QtZW1haWxgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXG4gICAgfSwgbnVsbCk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBsaXN0U2VudEVtYWlscygpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcIi9pbnRlcm5hbC9lbWFpbHNcIiwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiXG4gICAgfSwgbnVsbCk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBzZW5kU2lnbkluSW52aXRhdGlvbkVtYWlsKGVtYWlsLCBjYWxsYmFja1VybCkge1xuICAgIGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcbiAgICAgIFwiL2ludGVybmFsL3NlbmQtc2lnbi1pbi1pbnZpdGF0aW9uXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgZW1haWwsXG4gICAgICAgICAgY2FsbGJhY2tfdXJsOiBjYWxsYmFja1VybFxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICB9XG4gIGFzeW5jIHNlbmRDaGF0TWVzc2FnZSh0aHJlYWRJZCwgY29udGV4dFR5cGUsIG1lc3NhZ2VzLCBhYm9ydFNpZ25hbCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgYC9pbnRlcm5hbC9haS1jaGF0LyR7dGhyZWFkSWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgY29udGV4dF90eXBlOiBjb250ZXh0VHlwZSwgbWVzc2FnZXMgfSksXG4gICAgICAgIHNpZ25hbDogYWJvcnRTaWduYWxcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIHNhdmVDaGF0TWVzc2FnZSh0aHJlYWRJZCwgbWVzc2FnZSkge1xuICAgIGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcbiAgICAgIGAvaW50ZXJuYWwvYWktY2hhdC8ke3RocmVhZElkfWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlIH0pXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gIH1cbiAgYXN5bmMgbGlzdENoYXRNZXNzYWdlcyh0aHJlYWRJZCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgYC9pbnRlcm5hbC9haS1jaGF0LyR7dGhyZWFkSWR9YCxcbiAgICAgIHsgbWV0aG9kOiBcIkdFVFwiIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIHJlbmRlckVtYWlsUHJldmlldyhvcHRpb25zKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoYC9lbWFpbHMvcmVuZGVyLWVtYWlsYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHRoZW1lX2lkOiBvcHRpb25zLnRoZW1lSWQsXG4gICAgICAgIHRoZW1lX3RzeF9zb3VyY2U6IG9wdGlvbnMudGhlbWVUc3hTb3VyY2UsXG4gICAgICAgIHRlbXBsYXRlX2lkOiBvcHRpb25zLnRlbXBsYXRlSWQsXG4gICAgICAgIHRlbXBsYXRlX3RzeF9zb3VyY2U6IG9wdGlvbnMudGVtcGxhdGVUc3hTb3VyY2VcbiAgICAgIH0pXG4gICAgfSwgbnVsbCk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBjcmVhdGVFbWFpbFRoZW1lKGRpc3BsYXlOYW1lKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoXG4gICAgICBgL2ludGVybmFsL2VtYWlsLXRoZW1lc2AsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgZGlzcGxheV9uYW1lOiBkaXNwbGF5TmFtZVxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgZ2V0RW1haWxUaGVtZShpZCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgYC9pbnRlcm5hbC9lbWFpbC10aGVtZXMvJHtpZH1gLFxuICAgICAgeyBtZXRob2Q6IFwiR0VUXCIgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlRW1haWxUaGVtZShpZCwgdHN4U291cmNlKSB7XG4gICAgYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgYC9pbnRlcm5hbC9lbWFpbC10aGVtZXMvJHtpZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICB0c3hfc291cmNlOiB0c3hTb3VyY2VcbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuICBhc3luYyB1cGRhdGVFbWFpbFRlbXBsYXRlKGlkLCB0c3hTb3VyY2UsIHRoZW1lSWQpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcbiAgICAgIGAvaW50ZXJuYWwvZW1haWwtdGVtcGxhdGVzLyR7aWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHRzeF9zb3VyY2U6IHRzeFNvdXJjZSwgdGhlbWVfaWQ6IHRoZW1lSWQgfSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIGdldENvbmZpZygpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcbiAgICAgIGAvaW50ZXJuYWwvY29uZmlnYCxcbiAgICAgIHsgbWV0aG9kOiBcIkdFVFwiIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIHVwZGF0ZUNvbmZpZyhkYXRhKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoXG4gICAgICBgL2ludGVybmFsL2NvbmZpZy9vdmVycmlkZWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBjb25maWdfb3ZlcnJpZGVfc3RyaW5nOiBKU09OLnN0cmluZ2lmeShkYXRhLmNvbmZpZ092ZXJyaWRlKSB9KVxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgY3JlYXRlRW1haWxUZW1wbGF0ZShkaXNwbGF5TmFtZSkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgYC9pbnRlcm5hbC9lbWFpbC10ZW1wbGF0ZXNgLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGRpc3BsYXlfbmFtZTogZGlzcGxheU5hbWVcbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIHNldHVwUGF5bWVudHMoKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRBZG1pblJlcXVlc3QoXG4gICAgICBcIi9pbnRlcm5hbC9wYXltZW50cy9zZXR1cFwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe30pXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBnZXRTdHJpcGVBY2NvdW50SW5mbygpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcbiAgICAgIFwiL2ludGVybmFsL3BheW1lbnRzL3N0cmlwZS9hY2NvdW50LWluZm9cIixcbiAgICAgIHt9LFxuICAgICAgbnVsbCxcbiAgICAgIFtLbm93bkVycm9ycy5TdHJpcGVBY2NvdW50SW5mb05vdEZvdW5kXVxuICAgICk7XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmRhdGEuanNvbigpO1xuICB9XG4gIGFzeW5jIGNyZWF0ZVN0cmlwZVdpZGdldEFjY291bnRTZXNzaW9uKCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgXCIvaW50ZXJuYWwvcGF5bWVudHMvc3RyaXBlLXdpZGdldHMvYWNjb3VudC1zZXNzaW9uXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7fSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIGxpc3RUcmFuc2FjdGlvbnMocGFyYW1zKSB7XG4gICAgY29uc3QgcXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gICAgaWYgKHBhcmFtcz8uY3Vyc29yKSBxcy5zZXQoXCJjdXJzb3JcIiwgcGFyYW1zLmN1cnNvcik7XG4gICAgaWYgKHR5cGVvZiBwYXJhbXM/LmxpbWl0ID09PSBcIm51bWJlclwiKSBxcy5zZXQoXCJsaW1pdFwiLCBTdHJpbmcocGFyYW1zLmxpbWl0KSk7XG4gICAgaWYgKHBhcmFtcz8udHlwZSkgcXMuc2V0KFwidHlwZVwiLCBwYXJhbXMudHlwZSk7XG4gICAgaWYgKHBhcmFtcz8uY3VzdG9tZXJUeXBlKSBxcy5zZXQoXCJjdXN0b21lcl90eXBlXCIsIHBhcmFtcy5jdXN0b21lclR5cGUpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQWRtaW5SZXF1ZXN0KFxuICAgICAgYC9pbnRlcm5hbC9wYXltZW50cy90cmFuc2FjdGlvbnMke3FzLnNpemUgPyBgPyR7cXMudG9TdHJpbmcoKX1gIDogXCJcIn1gLFxuICAgICAgeyBtZXRob2Q6IFwiR0VUXCIgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHsgdHJhbnNhY3Rpb25zOiBqc29uLnRyYW5zYWN0aW9ucywgbmV4dEN1cnNvcjoganNvbi5uZXh0X2N1cnNvciB9O1xuICB9XG4gIGFzeW5jIHRlc3RNb2RlUHVyY2hhc2Uob3B0aW9ucykge1xuICAgIGF3YWl0IHRoaXMuc2VuZEFkbWluUmVxdWVzdChcbiAgICAgIFwiL2ludGVybmFsL3BheW1lbnRzL3Rlc3QtbW9kZS1wdXJjaGFzZS1zZXNzaW9uXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHsgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkob3B0aW9ucylcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxufTtcbmV4cG9ydCB7XG4gIFN0YWNrQWRtaW5JbnRlcmZhY2Vcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hZG1pbi1pbnRlcmZhY2UuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/admin-interface.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/client-interface.js":
/*!**********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/client-interface.js ***!
  \**********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StackClientInterface: () => (/* binding */ StackClientInterface)\n/* harmony export */ });\n/* harmony import */ var oauth4webapi__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! oauth4webapi */ \"(ssr)/./node_modules/.pnpm/oauth4webapi@2.17.0/node_modules/oauth4webapi/build/index.js\");\n/* harmony import */ var _known_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../known-errors.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/known-errors.js\");\n/* harmony import */ var _sessions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../sessions.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/sessions.js\");\n/* harmony import */ var _utils_crypto_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/crypto.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/crypto.js\");\n/* harmony import */ var _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/errors.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n/* harmony import */ var _utils_globals_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/globals.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/globals.js\");\n/* harmony import */ var _utils_http_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/http.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/http.js\");\n/* harmony import */ var _utils_objects_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/objects.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/objects.js\");\n/* harmony import */ var _utils_promises_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/promises.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/promises.js\");\n/* harmony import */ var _utils_results_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/results.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/results.js\");\n/* harmony import */ var _utils_strings_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/strings.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/strings.js\");\n/* harmony import */ var _utils_urls_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utils/urls.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/urls.js\");\n// src/interface/client-interface.ts\n\n\n\n\n\n\n\n\n\n\n\n\nvar StackClientInterface = class {\n  constructor(options) {\n    this.options = options;\n  }\n  get projectId() {\n    return this.options.projectId;\n  }\n  getApiUrl() {\n    return this.options.getBaseUrl() + \"/api/v1\";\n  }\n  async runNetworkDiagnostics(session, requestType) {\n    const tryRequest = async (cb) => {\n      try {\n        await cb();\n        return \"OK\";\n      } catch (e) {\n        return `${e}`;\n      }\n    };\n    const cfTrace = await tryRequest(async () => {\n      const res = await fetch(\"https://1.1.1.1/cdn-cgi/trace\");\n      if (!res.ok) {\n        throw new Error(`${res.status} ${res.statusText}: ${await res.text()}`);\n      }\n    });\n    const apiRoot = session !== void 0 && requestType !== void 0 ? await tryRequest(async () => {\n      const res = await this.sendClientRequestInner(\"/\", {}, session, requestType);\n      if (res.status === \"error\") {\n        throw res.error;\n      }\n    }) : \"Not tested\";\n    const baseUrlBackend = await tryRequest(async () => {\n      const res = await fetch(new URL(\"/health\", this.getApiUrl()));\n      if (!res.ok) {\n        throw new Error(`${res.status} ${res.statusText}: ${await res.text()}`);\n      }\n    });\n    const prodDashboard = await tryRequest(async () => {\n      const res = await fetch(\"https://app.stack-auth.com/health\");\n      if (!res.ok) {\n        throw new Error(`${res.status} ${res.statusText}: ${await res.text()}`);\n      }\n    });\n    const prodBackend = await tryRequest(async () => {\n      const res = await fetch(\"https://api.stack-auth.com/health\");\n      if (!res.ok) {\n        throw new Error(`${res.status} ${res.statusText}: ${await res.text()}`);\n      }\n    });\n    return {\n      \"navigator?.onLine\": _utils_globals_js__WEBPACK_IMPORTED_MODULE_4__.globalVar.navigator?.onLine,\n      cfTrace,\n      apiRoot,\n      baseUrlBackend,\n      prodDashboard,\n      prodBackend\n    };\n  }\n  async _createNetworkError(cause, session, requestType) {\n    return new Error((0,_utils_strings_js__WEBPACK_IMPORTED_MODULE_9__.deindent)`\n      Stack Auth is unable to connect to the server. Please check your internet connection and try again.\n\n      If the problem persists, please contact support and provide a screenshot of your entire browser console.\n\n      ${cause}\n\n      ${JSON.stringify(await this.runNetworkDiagnostics(session, requestType), null, 2)}\n    `, { cause });\n  }\n  async _networkRetry(cb, session, requestType) {\n    const retriedResult = await _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.retry(\n      cb,\n      5,\n      { exponentialDelayBase: 1e3 }\n    );\n    if (retriedResult.status === \"error\") {\n      if (_utils_globals_js__WEBPACK_IMPORTED_MODULE_4__.globalVar.navigator && _utils_globals_js__WEBPACK_IMPORTED_MODULE_4__.globalVar.navigator.onLine === false) {\n        throw new Error(\"You are offline. Please check your internet connection and try again. (window.navigator.onLine is false)\", { cause: retriedResult.error });\n      }\n      throw await this._createNetworkError(retriedResult.error, session, requestType);\n    }\n    return retriedResult.data;\n  }\n  async _networkRetryException(cb, session, requestType) {\n    return await this._networkRetry(async () => await _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.fromThrowingAsync(cb), session, requestType);\n  }\n  async fetchNewAccessToken(refreshToken) {\n    if (!(\"publishableClientKey\" in this.options)) {\n      throw new Error(\"Admin session token is currently not supported for fetching new access token. Did you try to log in on a StackApp initiated with the admin session?\");\n    }\n    const as = {\n      issuer: this.options.getBaseUrl(),\n      algorithm: \"oauth2\",\n      token_endpoint: this.getApiUrl() + \"/auth/oauth/token\"\n    };\n    const client = {\n      client_id: this.projectId,\n      client_secret: this.options.publishableClientKey,\n      token_endpoint_auth_method: \"client_secret_post\"\n    };\n    const rawResponse = await this._networkRetryException(\n      async () => await oauth4webapi__WEBPACK_IMPORTED_MODULE_11__.refreshTokenGrantRequest(\n        as,\n        client,\n        refreshToken.token\n      )\n    );\n    const response = await this._processResponse(rawResponse);\n    if (response.status === \"error\") {\n      const error = response.error;\n      if (_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.RefreshTokenError.isInstance(error)) {\n        return null;\n      }\n      throw error;\n    }\n    if (!response.data.ok) {\n      const body = await response.data.text();\n      throw new Error(`Failed to send refresh token request: ${response.status} ${body}`);\n    }\n    const result = await oauth4webapi__WEBPACK_IMPORTED_MODULE_11__.processRefreshTokenResponse(as, client, response.data);\n    if (oauth4webapi__WEBPACK_IMPORTED_MODULE_11__.isOAuth2Error(result)) {\n      throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"OAuth error\", { result });\n    }\n    if (!result.access_token) {\n      throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Access token not found in token endpoint response, this is weird!\");\n    }\n    return _sessions_js__WEBPACK_IMPORTED_MODULE_1__.AccessToken.createIfValid(result.access_token) ?? (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.throwErr)(\"Access token in fetchNewAccessToken is invalid, looks like the backend is returning an invalid token!\", { result });\n  }\n  async sendClientRequest(path, requestOptions, session, requestType = \"client\") {\n    session ??= this.createSession({\n      refreshToken: null\n    });\n    return await this._networkRetry(\n      () => this.sendClientRequestInner(path, requestOptions, session, requestType),\n      session,\n      requestType\n    );\n  }\n  createSession(options) {\n    const session = new _sessions_js__WEBPACK_IMPORTED_MODULE_1__.InternalSession({\n      refreshAccessTokenCallback: async (refreshToken) => await this.fetchNewAccessToken(refreshToken),\n      ...options\n    });\n    return session;\n  }\n  async sendClientRequestAndCatchKnownError(path, requestOptions, tokenStoreOrNull, errorsToCatch) {\n    try {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(await this.sendClientRequest(path, requestOptions, tokenStoreOrNull));\n    } catch (e) {\n      for (const errorType of errorsToCatch) {\n        if (errorType.isInstance(e)) {\n          return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(e);\n        }\n      }\n      throw e;\n    }\n  }\n  async sendClientRequestInner(path, options, session, requestType) {\n    let tokenObj = await session.getOrFetchLikelyValidTokens(2e4);\n    let adminSession = \"projectOwnerSession\" in this.options ? this.options.projectOwnerSession : null;\n    let adminTokenObj = adminSession ? await adminSession.getOrFetchLikelyValidTokens(2e4) : null;\n    await this.options.prepareRequest?.();\n    let url = this.getApiUrl() + path;\n    if (url.endsWith(\"/\")) {\n      url = url.slice(0, -1);\n    }\n    const params = {\n      /**\n       * This fetch may be cross-origin, in which case we don't want to send cookies of the\n       * original origin (this is the default behavior of `credentials`).\n       *\n       * To help debugging, also omit cookies on same-origin, so we don't accidentally\n       * implement reliance on cookies anywhere.\n       *\n       * However, Cloudflare Workers don't actually support `credentials`, so we only set it\n       * if Cloudflare-exclusive globals are not detected. https://github.com/cloudflare/workers-sdk/issues/2514\n       */\n      ...\"WebSocketPair\" in _utils_globals_js__WEBPACK_IMPORTED_MODULE_4__.globalVar ? {} : {\n        credentials: \"omit\"\n      },\n      ...options,\n      headers: {\n        \"X-Stack-Override-Error-Status\": \"true\",\n        \"X-Stack-Project-Id\": this.projectId,\n        \"X-Stack-Access-Type\": requestType,\n        \"X-Stack-Client-Version\": this.options.clientVersion,\n        ...tokenObj ? {\n          \"X-Stack-Access-Token\": tokenObj.accessToken.token\n        } : {},\n        ...tokenObj?.refreshToken ? {\n          \"X-Stack-Refresh-Token\": tokenObj.refreshToken.token\n        } : {},\n        \"X-Stack-Allow-Anonymous-User\": \"true\",\n        ...\"publishableClientKey\" in this.options ? {\n          \"X-Stack-Publishable-Client-Key\": this.options.publishableClientKey\n        } : {},\n        ...adminTokenObj ? {\n          \"X-Stack-Admin-Access-Token\": adminTokenObj.accessToken.token\n        } : {},\n        /**\n         * Next.js until v15 would cache fetch requests by default, and forcefully disabling it was nearly impossible.\n         *\n         * This header is used to change the cache key and hence always disable it, because we do our own caching.\n         *\n         * When we drop support for Next.js <15, we may be able to remove this header, but please make sure that this is\n         * the case (I haven't actually tested.)\n         */\n        \"X-Stack-Random-Nonce\": (0,_utils_crypto_js__WEBPACK_IMPORTED_MODULE_2__.generateSecureRandomString)(),\n        // don't show a warning when proxying the API through ngrok (only relevant if the API url is an ngrok site)\n        \"ngrok-skip-browser-warning\": \"true\",\n        ...this.options.extraRequestHeaders,\n        ...options.headers\n      },\n      /**\n       * Cloudflare Workers does not support cache, so don't pass it there\n       */\n      ...\"WebSocketPair\" in _utils_globals_js__WEBPACK_IMPORTED_MODULE_4__.globalVar ? {} : {\n        cache: \"no-store\"\n      }\n    };\n    let rawRes;\n    try {\n      rawRes = await fetch(url, params);\n    } catch (e) {\n      if (e instanceof TypeError) {\n        if (_utils_http_js__WEBPACK_IMPORTED_MODULE_5__.HTTP_METHODS[params.method ?? \"GET\"].idempotent) {\n          return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(e);\n        } else {\n          throw await this._createNetworkError(e, session, requestType);\n        }\n      }\n      throw e;\n    }\n    const processedRes = await this._processResponse(rawRes);\n    if (processedRes.status === \"error\") {\n      if (_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.InvalidAccessToken.isInstance(processedRes.error)) {\n        if (!tokenObj) {\n          throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Received invalid access token, but session is not logged in\", { tokenObj, processedRes });\n        }\n        session.markAccessTokenExpired(tokenObj.accessToken);\n        return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(processedRes.error);\n      }\n      if (adminSession && (_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.InvalidAdminAccessToken.isInstance(processedRes.error) || _known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.ApiKeyNotFound.isInstance(processedRes.error))) {\n        if (!adminTokenObj) {\n          throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Received invalid admin access token, but admin session is not logged in\", { adminTokenObj, processedRes });\n        }\n        adminSession.markAccessTokenExpired(adminTokenObj.accessToken);\n        return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(processedRes.error);\n      }\n      throw processedRes.error;\n    }\n    const res = Object.assign(processedRes.data, {\n      usedTokens: tokenObj\n    });\n    if (res.ok) {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(res);\n    } else if (res.status === 429) {\n      const retryAfter = res.headers.get(\"Retry-After\");\n      if (retryAfter !== null) {\n        console.log(`Rate limited while sending request to ${url}. Will retry after ${retryAfter} seconds...`);\n        await (0,_utils_promises_js__WEBPACK_IMPORTED_MODULE_7__.wait)(Number(retryAfter) * 1e3);\n        return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(new Error(`Rate limited, retrying after ${retryAfter} seconds`));\n      }\n      console.log(`Rate limited while sending request to ${url}, no retry-after header received. Retrying...`);\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(new Error(\"Rate limited, no retry-after header received\"));\n    } else {\n      const error = await res.text();\n      const errorObj = new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(`Failed to send request to ${url}: ${res.status} ${error}`, { request: params, res, path });\n      if (res.status === 508 && error.includes(\"INFINITE_LOOP_DETECTED\")) {\n        return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(errorObj);\n      }\n      throw errorObj;\n    }\n  }\n  async _processResponse(rawRes) {\n    let res = rawRes;\n    if (rawRes.headers.has(\"x-stack-actual-status\")) {\n      const actualStatus = Number(rawRes.headers.get(\"x-stack-actual-status\"));\n      res = new Response(rawRes.body, {\n        status: actualStatus,\n        statusText: rawRes.statusText,\n        headers: rawRes.headers\n      });\n    }\n    if (res.headers.has(\"x-stack-known-error\")) {\n      const errorJson = await res.json();\n      if (res.headers.get(\"x-stack-known-error\") !== errorJson.code) {\n        throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Mismatch between x-stack-known-error header and error code in body; the server's response is invalid\");\n      }\n      const error = _known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownError.fromJson(errorJson);\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(error);\n    }\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(res);\n  }\n  async checkFeatureSupport(options) {\n    const res = await this.sendClientRequest(\"/check-feature-support\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(options)\n    }, null);\n    throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(await res.text());\n  }\n  async sendForgotPasswordEmail(email, callbackUrl) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/password/send-reset-code\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          callback_url: callbackUrl\n        })\n      },\n      null,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.UserNotFound]\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    } else {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(void 0);\n    }\n  }\n  async sendVerificationEmail(email, callbackUrl, session) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/contact-channels/send-verification-code\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          callback_url: callbackUrl\n        })\n      },\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.EmailAlreadyVerified]\n    );\n    if (res.status === \"error\") {\n      return res.error;\n    }\n  }\n  async sendMagicLinkEmail(email, callbackUrl) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/otp/send-sign-in-code\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          callback_url: callbackUrl\n        })\n      },\n      null,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.RedirectUrlNotWhitelisted]\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    } else {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(await res.data.json());\n    }\n  }\n  async resetPassword(options) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"onlyVerifyCode\" in options ? \"/auth/password/reset/check-code\" : \"/auth/password/reset\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          code: options.code,\n          ...\"password\" in options ? { password: options.password } : {}\n        })\n      },\n      null,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.VerificationCodeError]\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    } else {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(void 0);\n    }\n  }\n  async updatePassword(options, session) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/password/update\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          old_password: options.oldPassword,\n          new_password: options.newPassword\n        })\n      },\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.PasswordConfirmationMismatch, _known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.PasswordRequirementsNotMet]\n    );\n    if (res.status === \"error\") {\n      return res.error;\n    }\n  }\n  async setPassword(options, session) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/password/set\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(options)\n      },\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.PasswordRequirementsNotMet]\n    );\n    if (res.status === \"error\") {\n      return res.error;\n    }\n  }\n  async verifyPasswordResetCode(code) {\n    const res = await this.resetPassword({ code, onlyVerifyCode: true });\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    } else {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(void 0);\n    }\n  }\n  async verifyEmail(code) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/contact-channels/verify\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          code\n        })\n      },\n      null,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.VerificationCodeError]\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    } else {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(void 0);\n    }\n  }\n  async initiatePasskeyRegistration(options, session) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/passkey/initiate-passkey-registration\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(options)\n      },\n      session,\n      []\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    }\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(await res.data.json());\n  }\n  async registerPasskey(options, session) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/passkey/register\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(options)\n      },\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.PasskeyRegistrationFailed]\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    }\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(void 0);\n  }\n  async initiatePasskeyAuthentication(options, session) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/passkey/initiate-passkey-authentication\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(options)\n      },\n      session,\n      []\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    }\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(await res.data.json());\n  }\n  async sendTeamInvitation(options) {\n    await this.sendClientRequest(\n      \"/team-invitations/send-code\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email: options.email,\n          team_id: options.teamId,\n          callback_url: options.callbackUrl\n        })\n      },\n      options.session\n    );\n  }\n  async acceptTeamInvitation(options) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      options.type === \"check\" ? \"/team-invitations/accept/check-code\" : options.type === \"details\" ? \"/team-invitations/accept/details\" : \"/team-invitations/accept\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          code: options.code\n        })\n      },\n      options.session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.VerificationCodeError]\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    } else {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(await res.data.json());\n    }\n  }\n  async totpMfa(attemptCode, totp, session) {\n    const res = await this.sendClientRequest(\"/auth/mfa/sign-in\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        code: attemptCode,\n        type: \"totp\",\n        totp\n      })\n    }, session);\n    const result = await res.json();\n    return {\n      accessToken: result.access_token,\n      refreshToken: result.refresh_token,\n      newUser: result.is_new_user\n    };\n  }\n  async signInWithCredential(email, password, session) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/password/sign-in\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      },\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.EmailPasswordMismatch]\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    }\n    const result = await res.data.json();\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok({\n      accessToken: result.access_token,\n      refreshToken: result.refresh_token\n    });\n  }\n  async signUpWithCredential(email, password, emailVerificationRedirectUrl, session) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/password/sign-up\",\n      {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        method: \"POST\",\n        body: JSON.stringify({\n          email,\n          password,\n          verification_callback_url: emailVerificationRedirectUrl\n        })\n      },\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.UserWithEmailAlreadyExists, _known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.PasswordRequirementsNotMet]\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    }\n    const result = await res.data.json();\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok({\n      accessToken: result.access_token,\n      refreshToken: result.refresh_token\n    });\n  }\n  async signUpAnonymously(session) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/anonymous/sign-up\",\n      {\n        method: \"POST\"\n      },\n      session,\n      []\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    }\n    const result = await res.data.json();\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok({\n      accessToken: result.access_token,\n      refreshToken: result.refresh_token\n    });\n  }\n  async signInWithMagicLink(code, session) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/otp/sign-in\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          code\n        })\n      },\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.VerificationCodeError]\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    }\n    const result = await res.data.json();\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok({\n      accessToken: result.access_token,\n      refreshToken: result.refresh_token,\n      newUser: result.is_new_user\n    });\n  }\n  async signInWithMfa(totp, code, session) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/mfa/sign-in\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          type: \"totp\",\n          totp,\n          code\n        })\n      },\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.VerificationCodeError]\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    }\n    const result = await res.data.json();\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok({\n      accessToken: result.access_token,\n      refreshToken: result.refresh_token,\n      newUser: result.is_new_user\n    });\n  }\n  async signInWithPasskey(body, session) {\n    const res = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/passkey/sign-in\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(body)\n      },\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.PasskeyAuthenticationFailed]\n    );\n    if (res.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(res.error);\n    }\n    const result = await res.data.json();\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok({\n      accessToken: result.access_token,\n      refreshToken: result.refresh_token\n    });\n  }\n  async getOAuthUrl(options) {\n    const updatedRedirectUrl = new URL(options.redirectUrl);\n    for (const key of [\"code\", \"state\"]) {\n      if (updatedRedirectUrl.searchParams.has(key)) {\n        console.warn(\"Redirect URL already contains \" + key + \" parameter, removing it as it will be overwritten by the OAuth callback\");\n      }\n      updatedRedirectUrl.searchParams.delete(key);\n    }\n    if (!(\"publishableClientKey\" in this.options)) {\n      throw new Error(\"Admin session token is currently not supported for OAuth\");\n    }\n    const url = new URL(this.getApiUrl() + \"/auth/oauth/authorize/\" + options.provider.toLowerCase());\n    url.searchParams.set(\"client_id\", this.projectId);\n    url.searchParams.set(\"client_secret\", this.options.publishableClientKey);\n    url.searchParams.set(\"redirect_uri\", updatedRedirectUrl.toString());\n    url.searchParams.set(\"scope\", \"legacy\");\n    url.searchParams.set(\"state\", options.state);\n    url.searchParams.set(\"grant_type\", \"authorization_code\");\n    url.searchParams.set(\"code_challenge\", options.codeChallenge);\n    url.searchParams.set(\"code_challenge_method\", \"S256\");\n    url.searchParams.set(\"response_type\", \"code\");\n    url.searchParams.set(\"type\", options.type);\n    url.searchParams.set(\"error_redirect_url\", options.errorRedirectUrl);\n    const tokens = await options.session.getOrFetchLikelyValidTokens(2e4);\n    if (tokens) {\n      url.searchParams.set(\"token\", tokens.accessToken.token);\n    }\n    if (options.afterCallbackRedirectUrl) {\n      url.searchParams.set(\"after_callback_redirect_url\", options.afterCallbackRedirectUrl);\n    }\n    if (options.providerScope) {\n      url.searchParams.set(\"provider_scope\", options.providerScope);\n    }\n    return url.toString();\n  }\n  async callOAuthCallback(options) {\n    if (!(\"publishableClientKey\" in this.options)) {\n      throw new Error(\"Admin session token is currently not supported for OAuth\");\n    }\n    const as = {\n      issuer: this.options.getBaseUrl(),\n      algorithm: \"oauth2\",\n      token_endpoint: this.getApiUrl() + \"/auth/oauth/token\"\n    };\n    const client = {\n      client_id: this.projectId,\n      client_secret: this.options.publishableClientKey,\n      token_endpoint_auth_method: \"client_secret_post\"\n    };\n    const params = await this._networkRetryException(\n      async () => oauth4webapi__WEBPACK_IMPORTED_MODULE_11__.validateAuthResponse(as, client, options.oauthParams, options.state)\n    );\n    if (oauth4webapi__WEBPACK_IMPORTED_MODULE_11__.isOAuth2Error(params)) {\n      throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Error validating outer OAuth response\", { params });\n    }\n    const response = await oauth4webapi__WEBPACK_IMPORTED_MODULE_11__.authorizationCodeGrantRequest(\n      as,\n      client,\n      params,\n      options.redirectUri,\n      options.codeVerifier\n    );\n    const result = await oauth4webapi__WEBPACK_IMPORTED_MODULE_11__.processAuthorizationCodeOAuth2Response(as, client, response);\n    if (oauth4webapi__WEBPACK_IMPORTED_MODULE_11__.isOAuth2Error(result)) {\n      if (\"code\" in result && result.code === \"MULTI_FACTOR_AUTHENTICATION_REQUIRED\") {\n        throw new _known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.MultiFactorAuthenticationRequired(result.details.attempt_code);\n      }\n      throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Outer OAuth error during authorization code response\", { result });\n    }\n    return {\n      newUser: result.is_new_user,\n      afterCallbackRedirectUrl: result.after_callback_redirect_url,\n      accessToken: result.access_token,\n      refreshToken: result.refresh_token ?? (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.throwErr)(\"Refresh token not found in outer OAuth response\")\n    };\n  }\n  async signOut(session) {\n    const tokenObj = await session.getOrFetchLikelyValidTokens(2e4);\n    if (tokenObj) {\n      const resOrError = await this.sendClientRequestAndCatchKnownError(\n        \"/auth/sessions/current\",\n        {\n          method: \"DELETE\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({})\n        },\n        session,\n        [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.RefreshTokenError]\n      );\n      if (resOrError.status === \"error\") {\n        if (_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.RefreshTokenError.isInstance(resOrError.error)) {\n        } else {\n          throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Unexpected error\", { error: resOrError.error });\n        }\n      } else {\n      }\n    }\n    session.markInvalid();\n  }\n  async getClientUserByToken(session) {\n    const responseOrError = await this.sendClientRequestAndCatchKnownError(\n      \"/users/me\",\n      {},\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.CannotGetOwnUserWithoutUser]\n    );\n    if (responseOrError.status === \"error\") {\n      if (_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.CannotGetOwnUserWithoutUser.isInstance(responseOrError.error)) {\n        return null;\n      } else {\n        throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Unexpected uncaught error\", { cause: responseOrError.error });\n      }\n    }\n    const response = responseOrError.data;\n    const user = await response.json();\n    if (!user) throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"User endpoint returned null; this should never happen\");\n    return user;\n  }\n  async listTeamInvitations(options, session) {\n    const response = await this.sendClientRequest(\n      \"/team-invitations?\" + new URLSearchParams({ team_id: options.teamId }),\n      {},\n      session\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async revokeTeamInvitation(invitationId, teamId, session) {\n    await this.sendClientRequest(\n      `/team-invitations/${invitationId}?team_id=${teamId}`,\n      { method: \"DELETE\" },\n      session\n    );\n  }\n  async listTeamMemberProfiles(options, session) {\n    const response = await this.sendClientRequest(\n      \"/team-member-profiles?\" + new URLSearchParams((0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_6__.filterUndefined)({\n        team_id: options.teamId,\n        user_id: options.userId\n      })),\n      {},\n      session\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async getTeamMemberProfile(options, session) {\n    const response = await this.sendClientRequest(\n      `/team-member-profiles/${options.teamId}/${options.userId}`,\n      {},\n      session\n    );\n    return await response.json();\n  }\n  async leaveTeam(teamId, session) {\n    await this.sendClientRequest(\n      `/team-memberships/${teamId}/me`,\n      {\n        method: \"DELETE\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({})\n      },\n      session\n    );\n  }\n  async updateTeamMemberProfile(options, session) {\n    await this.sendClientRequest(\n      `/team-member-profiles/${options.teamId}/${options.userId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(options.profile)\n      },\n      session\n    );\n  }\n  async updateTeam(options, session) {\n    await this.sendClientRequest(\n      `/teams/${options.teamId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(options.data)\n      },\n      session\n    );\n  }\n  async listCurrentUserTeamPermissions(options, session) {\n    const response = await this.sendClientRequest(\n      `/team-permissions?team_id=${options.teamId}&user_id=me&recursive=${options.recursive}`,\n      {},\n      session\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async listCurrentUserProjectPermissions(options, session) {\n    const response = await this.sendClientRequest(\n      `/project-permissions?user_id=me&recursive=${options.recursive}`,\n      {},\n      session\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async listCurrentUserTeams(session) {\n    const response = await this.sendClientRequest(\n      \"/teams?user_id=me\",\n      {},\n      session\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async getClientProject() {\n    const responseOrError = await this.sendClientRequestAndCatchKnownError(\"/projects/current\", {}, null, [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.ProjectNotFound]);\n    if (responseOrError.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(responseOrError.error);\n    }\n    const response = responseOrError.data;\n    const project = await response.json();\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(project);\n  }\n  async updateClientUser(update, session) {\n    await this.sendClientRequest(\n      \"/users/me\",\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(update)\n      },\n      session\n    );\n  }\n  async listProjects(session) {\n    const response = await this.sendClientRequest(\"/internal/projects\", {}, session);\n    if (!response.ok) {\n      throw new Error(\"Failed to list projects: \" + response.status + \" \" + await response.text());\n    }\n    const json = await response.json();\n    return json.items;\n  }\n  async createProject(project, session) {\n    const fetchResponse = await this.sendClientRequest(\n      \"/internal/projects\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(project)\n      },\n      session\n    );\n    if (!fetchResponse.ok) {\n      throw new Error(\"Failed to create project: \" + fetchResponse.status + \" \" + await fetchResponse.text());\n    }\n    const json = await fetchResponse.json();\n    return json;\n  }\n  async createProviderAccessToken(provider, scope, session) {\n    const response = await this.sendClientRequest(\n      `/connected-accounts/me/${provider}/access-token`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({ scope })\n      },\n      session\n    );\n    return await response.json();\n  }\n  async createClientTeam(data, session) {\n    const response = await this.sendClientRequest(\n      \"/teams\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      session\n    );\n    return await response.json();\n  }\n  async deleteTeam(teamId, session) {\n    await this.sendClientRequest(\n      `/teams/${teamId}`,\n      {\n        method: \"DELETE\"\n      },\n      session\n    );\n  }\n  async deleteCurrentUser(session) {\n    await this.sendClientRequest(\n      \"/users/me\",\n      {\n        method: \"DELETE\"\n      },\n      session\n    );\n  }\n  async createClientContactChannel(data, session) {\n    const response = await this.sendClientRequest(\n      \"/contact-channels\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      session\n    );\n    return await response.json();\n  }\n  async updateClientContactChannel(id, data, session) {\n    const response = await this.sendClientRequest(\n      `/contact-channels/me/${id}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      session\n    );\n    return await response.json();\n  }\n  async deleteClientContactChannel(id, session) {\n    await this.sendClientRequest(\n      `/contact-channels/me/${id}`,\n      {\n        method: \"DELETE\"\n      },\n      session\n    );\n  }\n  async deleteSession(sessionId, session) {\n    await this.sendClientRequest(\n      `/auth/sessions/${sessionId}?user_id=me`,\n      {\n        method: \"DELETE\"\n      },\n      session\n    );\n  }\n  async listSessions(session) {\n    const response = await this.sendClientRequest(\n      \"/auth/sessions?user_id=me\",\n      {\n        method: \"GET\"\n      },\n      session\n    );\n    return await response.json();\n  }\n  async listClientContactChannels(session) {\n    const response = await this.sendClientRequest(\n      \"/contact-channels?user_id=me\",\n      {\n        method: \"GET\"\n      },\n      session\n    );\n    const json = await response.json();\n    return json.items;\n  }\n  async sendCurrentUserContactChannelVerificationEmail(contactChannelId, callbackUrl, session) {\n    const responseOrError = await this.sendClientRequestAndCatchKnownError(\n      `/contact-channels/me/${contactChannelId}/send-verification-code`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({ callback_url: callbackUrl })\n      },\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.EmailAlreadyVerified]\n    );\n    if (responseOrError.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(responseOrError.error);\n    }\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(void 0);\n  }\n  async cliLogin(loginCode, refreshToken, session) {\n    const responseOrError = await this.sendClientRequestAndCatchKnownError(\n      \"/auth/cli/complete\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          login_code: loginCode,\n          refresh_token: refreshToken\n        })\n      },\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.SchemaError]\n    );\n    if (responseOrError.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.error(responseOrError.error);\n    }\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_8__.Result.ok(void 0);\n  }\n  async _getApiKeyRequestInfo(options) {\n    if (\"user_id\" in options && \"team_id\" in options) {\n      throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"Cannot specify both user_id and team_id in _getApiKeyRequestInfo\");\n    }\n    return {\n      endpoint: \"team_id\" in options ? \"/team-api-keys\" : \"/user-api-keys\",\n      queryParams: new URLSearchParams((0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_6__.filterUndefinedOrNull)(options))\n    };\n  }\n  async listProjectApiKeys(options, session, requestType) {\n    const sendRequest = (requestType === \"client\" ? this.sendClientRequest : this.sendServerRequest).bind(this);\n    const { endpoint, queryParams } = await this._getApiKeyRequestInfo(options);\n    const response = await sendRequest(\n      `${endpoint}?${queryParams.toString()}`,\n      {\n        method: \"GET\"\n      },\n      session,\n      requestType\n    );\n    const json = await response.json();\n    return json.items;\n  }\n  async createProjectApiKey(data, session, requestType) {\n    const sendRequest = (requestType === \"client\" ? this.sendClientRequest : this.sendServerRequest).bind(this);\n    const { endpoint } = await this._getApiKeyRequestInfo(data);\n    const response = await sendRequest(\n      `${endpoint}`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      session,\n      requestType\n    );\n    return await response.json();\n  }\n  async getProjectApiKey(options, keyId, session, requestType) {\n    const sendRequest = (requestType === \"client\" ? this.sendClientRequest : this.sendServerRequest).bind(this);\n    const { endpoint, queryParams } = await this._getApiKeyRequestInfo(options);\n    const response = await sendRequest(\n      `${endpoint}/${keyId}?${queryParams.toString()}`,\n      {\n        method: \"GET\"\n      },\n      session,\n      requestType\n    );\n    return await response.json();\n  }\n  async updateProjectApiKey(options, keyId, data, session, requestType) {\n    const sendRequest = (requestType === \"client\" ? this.sendClientRequest : this.sendServerRequest).bind(this);\n    const { endpoint, queryParams } = await this._getApiKeyRequestInfo(options);\n    const response = await sendRequest(\n      `${endpoint}/${keyId}?${queryParams.toString()}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      session,\n      requestType\n    );\n    return await response.json();\n  }\n  async checkProjectApiKey(type, apiKey, session, requestType) {\n    const sendRequest = (requestType === \"client\" ? this.sendClientRequestAndCatchKnownError : this.sendServerRequestAndCatchKnownError).bind(this);\n    const result = await sendRequest(\n      `/${type}-api-keys/check`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({ api_key: apiKey })\n      },\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_0__.KnownErrors.ApiKeyNotValid]\n    );\n    if (result.status === \"error\") {\n      return null;\n    }\n    return await result.data.json();\n  }\n  async listNotificationCategories(session) {\n    const response = await this.sendClientRequest(\n      `/emails/notification-preference/me`,\n      {},\n      session\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async setNotificationsEnabled(notificationCategoryId, enabled, session) {\n    await this.sendClientRequest(\n      `/emails/notification-preference/me/${notificationCategoryId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          enabled\n        })\n      },\n      session\n    );\n  }\n  async getOAuthProvider(userId, providerId, session) {\n    const response = await this.sendClientRequest(\n      `/oauth-providers/${userId}/${providerId}`,\n      {\n        method: \"GET\"\n      },\n      session\n    );\n    return await response.json();\n  }\n  async updateOAuthProvider(userId, providerId, data, session) {\n    const response = await this.sendClientRequest(\n      `/oauth-providers/${userId}/${providerId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      session\n    );\n    return await response.json();\n  }\n  async listOAuthProviders(options = {}, session) {\n    const queryParams = new URLSearchParams((0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_6__.filterUndefined)(options));\n    const response = await this.sendClientRequest(\n      `/oauth-providers${queryParams.toString() ? `?${queryParams.toString()}` : \"\"}`,\n      {\n        method: \"GET\"\n      },\n      session\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async deleteOAuthProvider(userId, providerId, session) {\n    const response = await this.sendClientRequest(\n      `/oauth-providers/${userId}/${providerId}`,\n      {\n        method: \"DELETE\"\n      },\n      session\n    );\n    return await response.json();\n  }\n  async getItem(options, session) {\n    let customerType;\n    let customerId;\n    if (\"userId\" in options) {\n      customerType = \"user\";\n      customerId = options.userId;\n    } else if (\"teamId\" in options) {\n      customerType = \"team\";\n      customerId = options.teamId;\n    } else if (\"customCustomerId\" in options) {\n      customerType = \"custom\";\n      customerId = options.customCustomerId;\n    } else {\n      throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_3__.StackAssertionError(\"getItem requires one of userId, teamId, or customCustomerId\");\n    }\n    const response = await this.sendClientRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_10__.urlString)`/payments/items/${customerType}/${customerId}/${options.itemId}`,\n      {},\n      session\n    );\n    return await response.json();\n  }\n  async createCheckoutUrl(customer_type, customer_id, offerIdOrInline, session) {\n    const offerBody = typeof offerIdOrInline === \"string\" ? { offer_id: offerIdOrInline } : { inline_offer: offerIdOrInline };\n    const response = await this.sendClientRequest(\n      \"/payments/purchases/create-purchase-url\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({ customer_type, customer_id, ...offerBody })\n      },\n      session\n    );\n    const { url } = await response.json();\n    return url;\n  }\n};\n\n//# sourceMappingURL=client-interface.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vaW50ZXJmYWNlL2NsaWVudC1pbnRlcmZhY2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ3NDO0FBQ3VCO0FBQ0M7QUFDRTtBQUNHO0FBQ25CO0FBQ0E7QUFDNkI7QUFDakM7QUFDQztBQUNFO0FBQ0Y7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSLGtCQUFrQixFQUFFO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsWUFBWSxFQUFFLGVBQWUsSUFBSSxpQkFBaUI7QUFDN0U7QUFDQSxLQUFLO0FBQ0w7QUFDQSwyREFBMkQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixZQUFZLEVBQUUsZUFBZSxJQUFJLGlCQUFpQjtBQUM3RTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsWUFBWSxFQUFFLGVBQWUsSUFBSSxpQkFBaUI7QUFDN0U7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLFlBQVksRUFBRSxlQUFlLElBQUksaUJBQWlCO0FBQzdFO0FBQ0EsS0FBSztBQUNMO0FBQ0EsMkJBQTJCLHdEQUFTO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMkRBQVE7QUFDN0I7O0FBRUE7O0FBRUEsUUFBUTs7QUFFUixRQUFRO0FB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Q0EsdUNBQXVDO0FBQ3ZDLDRDQUE0QyxrRUFBZTtBQUMzRDtBQUNBLHlCQUF5Qiw2QkFBNkIsdUJBQXVCLE9BQU87QUFDcEY7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixPQUFPLEdBQUcsV0FBVztBQUMvQztBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTixnQkFBZ0IsaUVBQW1CO0FBQ25DO0FBQ0E7QUFDQSxNQUFNLDBEQUFTLG1CQUFtQixhQUFhLEdBQUcsV0FBVyxHQUFHLGVBQWU7QUFDL0UsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4REFBOEQsNEJBQTRCLElBQUk7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULCtCQUErQiwwQ0FBMEM7QUFDekUsT0FBTztBQUNQO0FBQ0E7QUFDQSxZQUFZLE1BQU07QUFDbEI7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2dmeDJlZGVub2FzaXMvRG93bmxvYWRzL0RldmVsb3BtZW50L0VzcGFkYS9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vaW50ZXJmYWNlL2NsaWVudC1pbnRlcmZhY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2ludGVyZmFjZS9jbGllbnQtaW50ZXJmYWNlLnRzXG5pbXBvcnQgKiBhcyBvYXV0aCBmcm9tIFwib2F1dGg0d2ViYXBpXCI7XG5pbXBvcnQgeyBLbm93bkVycm9yLCBLbm93bkVycm9ycyB9IGZyb20gXCIuLi9rbm93bi1lcnJvcnMuanNcIjtcbmltcG9ydCB7IEFjY2Vzc1Rva2VuLCBJbnRlcm5hbFNlc3Npb24gfSBmcm9tIFwiLi4vc2Vzc2lvbnMuanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlU2VjdXJlUmFuZG9tU3RyaW5nIH0gZnJvbSBcIi4uL3V0aWxzL2NyeXB0by5qc1wiO1xuaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciwgdGhyb3dFcnIgfSBmcm9tIFwiLi4vdXRpbHMvZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBnbG9iYWxWYXIgfSBmcm9tIFwiLi4vdXRpbHMvZ2xvYmFscy5qc1wiO1xuaW1wb3J0IHsgSFRUUF9NRVRIT0RTIH0gZnJvbSBcIi4uL3V0aWxzL2h0dHAuanNcIjtcbmltcG9ydCB7IGZpbHRlclVuZGVmaW5lZCwgZmlsdGVyVW5kZWZpbmVkT3JOdWxsIH0gZnJvbSBcIi4uL3V0aWxzL29iamVjdHMuanNcIjtcbmltcG9ydCB7IHdhaXQgfSBmcm9tIFwiLi4vdXRpbHMvcHJvbWlzZXMuanNcIjtcbmltcG9ydCB7IFJlc3VsdCB9IGZyb20gXCIuLi91dGlscy9yZXN1bHRzLmpzXCI7XG5pbXBvcnQgeyBkZWluZGVudCB9IGZyb20gXCIuLi91dGlscy9zdHJpbmdzLmpzXCI7XG5pbXBvcnQgeyB1cmxTdHJpbmcgfSBmcm9tIFwiLi4vdXRpbHMvdXJscy5qc1wiO1xudmFyIFN0YWNrQ2xpZW50SW50ZXJmYWNlID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuICBnZXQgcHJvamVjdElkKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMucHJvamVjdElkO1xuICB9XG4gIGdldEFwaVVybCgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmdldEJhc2VVcmwoKSArIFwiL2FwaS92MVwiO1xuICB9XG4gIGFzeW5jIHJ1bk5ldHdvcmtEaWFnbm9zdGljcyhzZXNzaW9uLCByZXF1ZXN0VHlwZSkge1xuICAgIGNvbnN0IHRyeVJlcXVlc3QgPSBhc3luYyAoY2IpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGNiKCk7XG4gICAgICAgIHJldHVybiBcIk9LXCI7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBgJHtlfWA7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBjZlRyYWNlID0gYXdhaXQgdHJ5UmVxdWVzdChhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcImh0dHBzOi8vMS4xLjEuMS9jZG4tY2dpL3RyYWNlXCIpO1xuICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3Jlcy5zdGF0dXN9ICR7cmVzLnN0YXR1c1RleHR9OiAke2F3YWl0IHJlcy50ZXh0KCl9YCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgYXBpUm9vdCA9IHNlc3Npb24gIT09IHZvaWQgMCAmJiByZXF1ZXN0VHlwZSAhPT0gdm9pZCAwID8gYXdhaXQgdHJ5UmVxdWVzdChhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0SW5uZXIoXCIvXCIsIHt9LCBzZXNzaW9uLCByZXF1ZXN0VHlwZSk7XG4gICAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICAgIHRocm93IHJlcy5lcnJvcjtcbiAgICAgIH1cbiAgICB9KSA6IFwiTm90IHRlc3RlZFwiO1xuICAgIGNvbnN0IGJhc2VVcmxCYWNrZW5kID0gYXdhaXQgdHJ5UmVxdWVzdChhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChuZXcgVVJMKFwiL2hlYWx0aFwiLCB0aGlzLmdldEFwaVVybCgpKSk7XG4gICAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7cmVzLnN0YXR1c30gJHtyZXMuc3RhdHVzVGV4dH06ICR7YXdhaXQgcmVzLnRleHQoKX1gKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBwcm9kRGFzaGJvYXJkID0gYXdhaXQgdHJ5UmVxdWVzdChhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcImh0dHBzOi8vYXBwLnN0YWNrLWF1dGguY29tL2hlYWx0aFwiKTtcbiAgICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtyZXMuc3RhdHVzfSAke3Jlcy5zdGF0dXNUZXh0fTogJHthd2FpdCByZXMudGV4dCgpfWApO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IHByb2RCYWNrZW5kID0gYXdhaXQgdHJ5UmVxdWVzdChhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcImh0dHBzOi8vYXBpLnN0YWNrLWF1dGguY29tL2hlYWx0aFwiKTtcbiAgICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtyZXMuc3RhdHVzfSAke3Jlcy5zdGF0dXNUZXh0fTogJHthd2FpdCByZXMudGV4dCgpfWApO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICBcIm5hdmlnYXRvcj8ub25MaW5lXCI6IGdsb2JhbFZhci5uYXZpZ2F0b3I/Lm9uTGluZSxcbiAgICAgIGNmVHJhY2UsXG4gICAgICBhcGlSb290LFxuICAgICAgYmFzZVVybEJhY2tlbmQsXG4gICAgICBwcm9kRGFzaGJvYXJkLFxuICAgICAgcHJvZEJhY2tlbmRcbiAgICB9O1xuICB9XG4gIGFzeW5jIF9jcmVhdGVOZXR3b3JrRXJyb3IoY2F1c2UsIHNlc3Npb24sIHJlcXVlc3RUeXBlKSB7XG4gICAgcmV0dXJuIG5ldyBFcnJvcihkZWluZGVudGBcbiAgICAgIFN0YWNrIEF1dGggaXMgdW5hYmxlIHRvIGNvbm5lY3QgdG8gdGhlIHNlcnZlci4gUGxlYXNlIGNoZWNrIHlvdXIgaW50ZXJuZXQgY29ubmVjdGlvbiBhbmQgdHJ5IGFnYWluLlxuXG4gICAgICBJZiB0aGUgcHJvYmxlbSBwZXJzaXN0cywgcGxlYXNlIGNvbnRhY3Qgc3VwcG9ydCBhbmQgcHJvdmlkZSBhIHNjcmVlbnNob3Qgb2YgeW91ciBlbnRpcmUgYnJvd3NlciBjb25zb2xlLlxuXG4gICAgICAke2NhdXNlfVxuXG4gICAgICAke0pTT04uc3RyaW5naWZ5KGF3YWl0IHRoaXMucnVuTmV0d29ya0RpYWdub3N0aWNzKHNlc3Npb24sIHJlcXVlc3RUeXBlKSwgbnVsbCwgMil9XG4gICAgYCwgeyBjYXVzZSB9KTtcbiAgfVxuICBhc3luYyBfbmV0d29ya1JldHJ5KGNiLCBzZXNzaW9uLCByZXF1ZXN0VHlwZSkge1xuICAgIGNvbnN0IHJldHJpZWRSZXN1bHQgPSBhd2FpdCBSZXN1bHQucmV0cnkoXG4gICAgICBjYixcbiAgICAgIDUsXG4gICAgICB7IGV4cG9uZW50aWFsRGVsYXlCYXNlOiAxZTMgfVxuICAgICk7XG4gICAgaWYgKHJldHJpZWRSZXN1bHQuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgIGlmIChnbG9iYWxWYXIubmF2aWdhdG9yICYmIGdsb2JhbFZhci5uYXZpZ2F0b3Iub25MaW5lID09PSBmYWxzZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgYXJlIG9mZmxpbmUuIFBsZWFzZSBjaGVjayB5b3VyIGludGVybmV0IGNvbm5lY3Rpb24gYW5kIHRyeSBhZ2Fpbi4gKHdpbmRvdy5uYXZpZ2F0b3Iub25MaW5lIGlzIGZhbHNlKVwiLCB7IGNhdXNlOiByZXRyaWVkUmVzdWx0LmVycm9yIH0pO1xuICAgICAgfVxuICAgICAgdGhyb3cgYXdhaXQgdGhpcy5fY3JlYXRlTmV0d29ya0Vycm9yKHJldHJpZWRSZXN1bHQuZXJyb3IsIHNlc3Npb24sIHJlcXVlc3RUeXBlKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldHJpZWRSZXN1bHQuZGF0YTtcbiAgfVxuICBhc3luYyBfbmV0d29ya1JldHJ5RXhjZXB0aW9uKGNiLCBzZXNzaW9uLCByZXF1ZXN0VHlwZSkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLl9uZXR3b3JrUmV0cnkoYXN5bmMgKCkgPT4gYXdhaXQgUmVzdWx0LmZyb21UaHJvd2luZ0FzeW5jKGNiKSwgc2Vzc2lvbiwgcmVxdWVzdFR5cGUpO1xuICB9XG4gIGFzeW5jIGZldGNoTmV3QWNjZXNzVG9rZW4ocmVmcmVzaFRva2VuKSB7XG4gICAgaWYgKCEoXCJwdWJsaXNoYWJsZUNsaWVudEtleVwiIGluIHRoaXMub3B0aW9ucykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFkbWluIHNlc3Npb24gdG9rZW4gaXMgY3VycmVudGx5IG5vdCBzdXBwb3J0ZWQgZm9yIGZldGNoaW5nIG5ldyBhY2Nlc3MgdG9rZW4uIERpZCB5b3UgdHJ5IHRvIGxvZyBpbiBvbiBhIFN0YWNrQXBwIGluaXRpYXRlZCB3aXRoIHRoZSBhZG1pbiBzZXNzaW9uP1wiKTtcbiAgICB9XG4gICAgY29uc3QgYXMgPSB7XG4gICAgICBpc3N1ZXI6IHRoaXMub3B0aW9ucy5nZXRCYXNlVXJsKCksXG4gICAgICBhbGdvcml0aG06IFwib2F1dGgyXCIsXG4gICAgICB0b2tlbl9lbmRwb2ludDogdGhpcy5nZXRBcGlVcmwoKSArIFwiL2F1dGgvb2F1dGgvdG9rZW5cIlxuICAgIH07XG4gICAgY29uc3QgY2xpZW50ID0ge1xuICAgICAgY2xpZW50X2lkOiB0aGlzLnByb2plY3RJZCxcbiAgICAgIGNsaWVudF9zZWNyZXQ6IHRoaXMub3B0aW9ucy5wdWJsaXNoYWJsZUNsaWVudEtleSxcbiAgICAgIHRva2VuX2VuZHBvaW50X2F1dGhfbWV0aG9kOiBcImNsaWVudF9zZWNyZXRfcG9zdFwiXG4gICAgfTtcbiAgICBjb25zdCByYXdSZXNwb25zZSA9IGF3YWl0IHRoaXMuX25ldHdvcmtSZXRyeUV4Y2VwdGlvbihcbiAgICAgIGFzeW5jICgpID0+IGF3YWl0IG9hdXRoLnJlZnJlc2hUb2tlbkdyYW50UmVxdWVzdChcbiAgICAgICAgYXMsXG4gICAgICAgIGNsaWVudCxcbiAgICAgICAgcmVmcmVzaFRva2VuLnRva2VuXG4gICAgICApXG4gICAgKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuX3Byb2Nlc3NSZXNwb25zZShyYXdSZXNwb25zZSk7XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICBjb25zdCBlcnJvciA9IHJlc3BvbnNlLmVycm9yO1xuICAgICAgaWYgKEtub3duRXJyb3JzLlJlZnJlc2hUb2tlbkVycm9yLmlzSW5zdGFuY2UoZXJyb3IpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIGlmICghcmVzcG9uc2UuZGF0YS5vaykge1xuICAgICAgY29uc3QgYm9keSA9IGF3YWl0IHJlc3BvbnNlLmRhdGEudGV4dCgpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gc2VuZCByZWZyZXNoIHRva2VuIHJlcXVlc3Q6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke2JvZHl9YCk7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9hdXRoLnByb2Nlc3NSZWZyZXNoVG9rZW5SZXNwb25zZShhcywgY2xpZW50LCByZXNwb25zZS5kYXRhKTtcbiAgICBpZiAob2F1dGguaXNPQXV0aDJFcnJvcihyZXN1bHQpKSB7XG4gICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIk9BdXRoIGVycm9yXCIsIHsgcmVzdWx0IH0pO1xuICAgIH1cbiAgICBpZiAoIXJlc3VsdC5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiQWNjZXNzIHRva2VuIG5vdCBmb3VuZCBpbiB0b2tlbiBlbmRwb2ludCByZXNwb25zZSwgdGhpcyBpcyB3ZWlyZCFcIik7XG4gICAgfVxuICAgIHJldHVybiBBY2Nlc3NUb2tlbi5jcmVhdGVJZlZhbGlkKHJlc3VsdC5hY2Nlc3NfdG9rZW4pID8/IHRocm93RXJyKFwiQWNjZXNzIHRva2VuIGluIGZldGNoTmV3QWNjZXNzVG9rZW4gaXMgaW52YWxpZCwgbG9va3MgbGlrZSB0aGUgYmFja2VuZCBpcyByZXR1cm5pbmcgYW4gaW52YWxpZCB0b2tlbiFcIiwgeyByZXN1bHQgfSk7XG4gIH1cbiAgYXN5bmMgc2VuZENsaWVudFJlcXVlc3QocGF0aCwgcmVxdWVzdE9wdGlvbnMsIHNlc3Npb24sIHJlcXVlc3RUeXBlID0gXCJjbGllbnRcIikge1xuICAgIHNlc3Npb24gPz89IHRoaXMuY3JlYXRlU2Vzc2lvbih7XG4gICAgICByZWZyZXNoVG9rZW46IG51bGxcbiAgICB9KTtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5fbmV0d29ya1JldHJ5KFxuICAgICAgKCkgPT4gdGhpcy5zZW5kQ2xpZW50UmVxdWVzdElubmVyKHBhdGgsIHJlcXVlc3RPcHRpb25zLCBzZXNzaW9uLCByZXF1ZXN0VHlwZSksXG4gICAgICBzZXNzaW9uLFxuICAgICAgcmVxdWVzdFR5cGVcbiAgICApO1xuICB9XG4gIGNyZWF0ZVNlc3Npb24ob3B0aW9ucykge1xuICAgIGNvbnN0IHNlc3Npb24gPSBuZXcgSW50ZXJuYWxTZXNzaW9uKHtcbiAgICAgIHJlZnJlc2hBY2Nlc3NUb2tlbkNhbGxiYWNrOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiBhd2FpdCB0aGlzLmZldGNoTmV3QWNjZXNzVG9rZW4ocmVmcmVzaFRva2VuKSxcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9KTtcbiAgICByZXR1cm4gc2Vzc2lvbjtcbiAgfVxuICBhc3luYyBzZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihwYXRoLCByZXF1ZXN0T3B0aW9ucywgdG9rZW5TdG9yZU9yTnVsbCwgZXJyb3JzVG9DYXRjaCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gUmVzdWx0Lm9rKGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QocGF0aCwgcmVxdWVzdE9wdGlvbnMsIHRva2VuU3RvcmVPck51bGwpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBmb3IgKGNvbnN0IGVycm9yVHlwZSBvZiBlcnJvcnNUb0NhdGNoKSB7XG4gICAgICAgIGlmIChlcnJvclR5cGUuaXNJbnN0YW5jZShlKSkge1xuICAgICAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IoZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9XG4gIGFzeW5jIHNlbmRDbGllbnRSZXF1ZXN0SW5uZXIocGF0aCwgb3B0aW9ucywgc2Vzc2lvbiwgcmVxdWVzdFR5cGUpIHtcbiAgICBsZXQgdG9rZW5PYmogPSBhd2FpdCBzZXNzaW9uLmdldE9yRmV0Y2hMaWtlbHlWYWxpZFRva2VucygyZTQpO1xuICAgIGxldCBhZG1pblNlc3Npb24gPSBcInByb2plY3RPd25lclNlc3Npb25cIiBpbiB0aGlzLm9wdGlvbnMgPyB0aGlzLm9wdGlvbnMucHJvamVjdE93bmVyU2Vzc2lvbiA6IG51bGw7XG4gICAgbGV0IGFkbWluVG9rZW5PYmogPSBhZG1pblNlc3Npb24gPyBhd2FpdCBhZG1pblNlc3Npb24uZ2V0T3JGZXRjaExpa2VseVZhbGlkVG9rZW5zKDJlNCkgOiBudWxsO1xuICAgIGF3YWl0IHRoaXMub3B0aW9ucy5wcmVwYXJlUmVxdWVzdD8uKCk7XG4gICAgbGV0IHVybCA9IHRoaXMuZ2V0QXBpVXJsKCkgKyBwYXRoO1xuICAgIGlmICh1cmwuZW5kc1dpdGgoXCIvXCIpKSB7XG4gICAgICB1cmwgPSB1cmwuc2xpY2UoMCwgLTEpO1xuICAgIH1cbiAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAvKipcbiAgICAgICAqIFRoaXMgZmV0Y2ggbWF5IGJlIGNyb3NzLW9yaWdpbiwgaW4gd2hpY2ggY2FzZSB3ZSBkb24ndCB3YW50IHRvIHNlbmQgY29va2llcyBvZiB0aGVcbiAgICAgICAqIG9yaWdpbmFsIG9yaWdpbiAodGhpcyBpcyB0aGUgZGVmYXVsdCBiZWhhdmlvciBvZiBgY3JlZGVudGlhbHNgKS5cbiAgICAgICAqXG4gICAgICAgKiBUbyBoZWxwIGRlYnVnZ2luZywgYWxzbyBvbWl0IGNvb2tpZXMgb24gc2FtZS1vcmlnaW4sIHNvIHdlIGRvbid0IGFjY2lkZW50YWxseVxuICAgICAgICogaW1wbGVtZW50IHJlbGlhbmNlIG9uIGNvb2tpZXMgYW55d2hlcmUuXG4gICAgICAgKlxuICAgICAgICogSG93ZXZlciwgQ2xvdWRmbGFyZSBXb3JrZXJzIGRvbid0IGFjdHVhbGx5IHN1cHBvcnQgYGNyZWRlbnRpYWxzYCwgc28gd2Ugb25seSBzZXQgaXRcbiAgICAgICAqIGlmIENsb3VkZmxhcmUtZXhjbHVzaXZlIGdsb2JhbHMgYXJlIG5vdCBkZXRlY3RlZC4gaHR0cHM6Ly9naXRodWIuY29tL2Nsb3VkZmxhcmUvd29ya2Vycy1zZGsvaXNzdWVzLzI1MTRcbiAgICAgICAqL1xuICAgICAgLi4uXCJXZWJTb2NrZXRQYWlyXCIgaW4gZ2xvYmFsVmFyID8ge30gOiB7XG4gICAgICAgIGNyZWRlbnRpYWxzOiBcIm9taXRcIlxuICAgICAgfSxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIFwiWC1TdGFjay1PdmVycmlkZS1FcnJvci1TdGF0dXNcIjogXCJ0cnVlXCIsXG4gICAgICAgIFwiWC1TdGFjay1Qcm9qZWN0LUlkXCI6IHRoaXMucHJvamVjdElkLFxuICAgICAgICBcIlgtU3RhY2stQWNjZXNzLVR5cGVcIjogcmVxdWVzdFR5cGUsXG4gICAgICAgIFwiWC1TdGFjay1DbGllbnQtVmVyc2lvblwiOiB0aGlzLm9wdGlvbnMuY2xpZW50VmVyc2lvbixcbiAgICAgICAgLi4udG9rZW5PYmogPyB7XG4gICAgICAgICAgXCJYLVN0YWNrLUFjY2Vzcy1Ub2tlblwiOiB0b2tlbk9iai5hY2Nlc3NUb2tlbi50b2tlblxuICAgICAgICB9IDoge30sXG4gICAgICAgIC4uLnRva2VuT2JqPy5yZWZyZXNoVG9rZW4gPyB7XG4gICAgICAgICAgXCJYLVN0YWNrLVJlZnJlc2gtVG9rZW5cIjogdG9rZW5PYmoucmVmcmVzaFRva2VuLnRva2VuXG4gICAgICAgIH0gOiB7fSxcbiAgICAgICAgXCJYLVN0YWNrLUFsbG93LUFub255bW91cy1Vc2VyXCI6IFwidHJ1ZVwiLFxuICAgICAgICAuLi5cInB1Ymxpc2hhYmxlQ2xpZW50S2V5XCIgaW4gdGhpcy5vcHRpb25zID8ge1xuICAgICAgICAgIFwiWC1TdGFjay1QdWJsaXNoYWJsZS1DbGllbnQtS2V5XCI6IHRoaXMub3B0aW9ucy5wdWJsaXNoYWJsZUNsaWVudEtleVxuICAgICAgICB9IDoge30sXG4gICAgICAgIC4uLmFkbWluVG9rZW5PYmogPyB7XG4gICAgICAgICAgXCJYLVN0YWNrLUFkbWluLUFjY2Vzcy1Ub2tlblwiOiBhZG1pblRva2VuT2JqLmFjY2Vzc1Rva2VuLnRva2VuXG4gICAgICAgIH0gOiB7fSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE5leHQuanMgdW50aWwgdjE1IHdvdWxkIGNhY2hlIGZldGNoIHJlcXVlc3RzIGJ5IGRlZmF1bHQsIGFuZCBmb3JjZWZ1bGx5IGRpc2FibGluZyBpdCB3YXMgbmVhcmx5IGltcG9zc2libGUuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgaGVhZGVyIGlzIHVzZWQgdG8gY2hhbmdlIHRoZSBjYWNoZSBrZXkgYW5kIGhlbmNlIGFsd2F5cyBkaXNhYmxlIGl0LCBiZWNhdXNlIHdlIGRvIG91ciBvd24gY2FjaGluZy5cbiAgICAgICAgICpcbiAgICAgICAgICogV2hlbiB3ZSBkcm9wIHN1cHBvcnQgZm9yIE5leHQuanMgPDE1LCB3ZSBtYXkgYmUgYWJsZSB0byByZW1vdmUgdGhpcyBoZWFkZXIsIGJ1dCBwbGVhc2UgbWFrZSBzdXJlIHRoYXQgdGhpcyBpc1xuICAgICAgICAgKiB0aGUgY2FzZSAoSSBoYXZlbid0IGFjdHVhbGx5IHRlc3RlZC4pXG4gICAgICAgICAqL1xuICAgICAgICBcIlgtU3RhY2stUmFuZG9tLU5vbmNlXCI6IGdlbmVyYXRlU2VjdXJlUmFuZG9tU3RyaW5nKCksXG4gICAgICAgIC8vIGRvbid0IHNob3cgYSB3YXJuaW5nIHdoZW4gcHJveHlpbmcgdGhlIEFQSSB0aHJvdWdoIG5ncm9rIChvbmx5IHJlbGV2YW50IGlmIHRoZSBBUEkgdXJsIGlzIGFuIG5ncm9rIHNpdGUpXG4gICAgICAgIFwibmdyb2stc2tpcC1icm93c2VyLXdhcm5pbmdcIjogXCJ0cnVlXCIsXG4gICAgICAgIC4uLnRoaXMub3B0aW9ucy5leHRyYVJlcXVlc3RIZWFkZXJzLFxuICAgICAgICAuLi5vcHRpb25zLmhlYWRlcnNcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIENsb3VkZmxhcmUgV29ya2VycyBkb2VzIG5vdCBzdXBwb3J0IGNhY2hlLCBzbyBkb24ndCBwYXNzIGl0IHRoZXJlXG4gICAgICAgKi9cbiAgICAgIC4uLlwiV2ViU29ja2V0UGFpclwiIGluIGdsb2JhbFZhciA/IHt9IDoge1xuICAgICAgICBjYWNoZTogXCJuby1zdG9yZVwiXG4gICAgICB9XG4gICAgfTtcbiAgICBsZXQgcmF3UmVzO1xuICAgIHRyeSB7XG4gICAgICByYXdSZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHBhcmFtcyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKGUgaW5zdGFuY2VvZiBUeXBlRXJyb3IpIHtcbiAgICAgICAgaWYgKEhUVFBfTUVUSE9EU1twYXJhbXMubWV0aG9kID8/IFwiR0VUXCJdLmlkZW1wb3RlbnQpIHtcbiAgICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IGF3YWl0IHRoaXMuX2NyZWF0ZU5ldHdvcmtFcnJvcihlLCBzZXNzaW9uLCByZXF1ZXN0VHlwZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRocm93IGU7XG4gICAgfVxuICAgIGNvbnN0IHByb2Nlc3NlZFJlcyA9IGF3YWl0IHRoaXMuX3Byb2Nlc3NSZXNwb25zZShyYXdSZXMpO1xuICAgIGlmIChwcm9jZXNzZWRSZXMuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgIGlmIChLbm93bkVycm9ycy5JbnZhbGlkQWNjZXNzVG9rZW4uaXNJbnN0YW5jZShwcm9jZXNzZWRSZXMuZXJyb3IpKSB7XG4gICAgICAgIGlmICghdG9rZW5PYmopIHtcbiAgICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIlJlY2VpdmVkIGludmFsaWQgYWNjZXNzIHRva2VuLCBidXQgc2Vzc2lvbiBpcyBub3QgbG9nZ2VkIGluXCIsIHsgdG9rZW5PYmosIHByb2Nlc3NlZFJlcyB9KTtcbiAgICAgICAgfVxuICAgICAgICBzZXNzaW9uLm1hcmtBY2Nlc3NUb2tlbkV4cGlyZWQodG9rZW5PYmouYWNjZXNzVG9rZW4pO1xuICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHByb2Nlc3NlZFJlcy5lcnJvcik7XG4gICAgICB9XG4gICAgICBpZiAoYWRtaW5TZXNzaW9uICYmIChLbm93bkVycm9ycy5JbnZhbGlkQWRtaW5BY2Nlc3NUb2tlbi5pc0luc3RhbmNlKHByb2Nlc3NlZFJlcy5lcnJvcikgfHwgS25vd25FcnJvcnMuQXBpS2V5Tm90Rm91bmQuaXNJbnN0YW5jZShwcm9jZXNzZWRSZXMuZXJyb3IpKSkge1xuICAgICAgICBpZiAoIWFkbWluVG9rZW5PYmopIHtcbiAgICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIlJlY2VpdmVkIGludmFsaWQgYWRtaW4gYWNjZXNzIHRva2VuLCBidXQgYWRtaW4gc2Vzc2lvbiBpcyBub3QgbG9nZ2VkIGluXCIsIHsgYWRtaW5Ub2tlbk9iaiwgcHJvY2Vzc2VkUmVzIH0pO1xuICAgICAgICB9XG4gICAgICAgIGFkbWluU2Vzc2lvbi5tYXJrQWNjZXNzVG9rZW5FeHBpcmVkKGFkbWluVG9rZW5PYmouYWNjZXNzVG9rZW4pO1xuICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHByb2Nlc3NlZFJlcy5lcnJvcik7XG4gICAgICB9XG4gICAgICB0aHJvdyBwcm9jZXNzZWRSZXMuZXJyb3I7XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IE9iamVjdC5hc3NpZ24ocHJvY2Vzc2VkUmVzLmRhdGEsIHtcbiAgICAgIHVzZWRUb2tlbnM6IHRva2VuT2JqXG4gICAgfSk7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIFJlc3VsdC5vayhyZXMpO1xuICAgIH0gZWxzZSBpZiAocmVzLnN0YXR1cyA9PT0gNDI5KSB7XG4gICAgICBjb25zdCByZXRyeUFmdGVyID0gcmVzLmhlYWRlcnMuZ2V0KFwiUmV0cnktQWZ0ZXJcIik7XG4gICAgICBpZiAocmV0cnlBZnRlciAhPT0gbnVsbCkge1xuICAgICAgICBjb25zb2xlLmxvZyhgUmF0ZSBsaW1pdGVkIHdoaWxlIHNlbmRpbmcgcmVxdWVzdCB0byAke3VybH0uIFdpbGwgcmV0cnkgYWZ0ZXIgJHtyZXRyeUFmdGVyfSBzZWNvbmRzLi4uYCk7XG4gICAgICAgIGF3YWl0IHdhaXQoTnVtYmVyKHJldHJ5QWZ0ZXIpICogMWUzKTtcbiAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihuZXcgRXJyb3IoYFJhdGUgbGltaXRlZCwgcmV0cnlpbmcgYWZ0ZXIgJHtyZXRyeUFmdGVyfSBzZWNvbmRzYCkpO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coYFJhdGUgbGltaXRlZCB3aGlsZSBzZW5kaW5nIHJlcXVlc3QgdG8gJHt1cmx9LCBubyByZXRyeS1hZnRlciBoZWFkZXIgcmVjZWl2ZWQuIFJldHJ5aW5nLi4uYCk7XG4gICAgICByZXR1cm4gUmVzdWx0LmVycm9yKG5ldyBFcnJvcihcIlJhdGUgbGltaXRlZCwgbm8gcmV0cnktYWZ0ZXIgaGVhZGVyIHJlY2VpdmVkXCIpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZXJyb3IgPSBhd2FpdCByZXMudGV4dCgpO1xuICAgICAgY29uc3QgZXJyb3JPYmogPSBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihgRmFpbGVkIHRvIHNlbmQgcmVxdWVzdCB0byAke3VybH06ICR7cmVzLnN0YXR1c30gJHtlcnJvcn1gLCB7IHJlcXVlc3Q6IHBhcmFtcywgcmVzLCBwYXRoIH0pO1xuICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDUwOCAmJiBlcnJvci5pbmNsdWRlcyhcIklORklOSVRFX0xPT1BfREVURUNURURcIikpIHtcbiAgICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihlcnJvck9iaik7XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnJvck9iajtcbiAgICB9XG4gIH1cbiAgYXN5bmMgX3Byb2Nlc3NSZXNwb25zZShyYXdSZXMpIHtcbiAgICBsZXQgcmVzID0gcmF3UmVzO1xuICAgIGlmIChyYXdSZXMuaGVhZGVycy5oYXMoXCJ4LXN0YWNrLWFjdHVhbC1zdGF0dXNcIikpIHtcbiAgICAgIGNvbnN0IGFjdHVhbFN0YXR1cyA9IE51bWJlcihyYXdSZXMuaGVhZGVycy5nZXQoXCJ4LXN0YWNrLWFjdHVhbC1zdGF0dXNcIikpO1xuICAgICAgcmVzID0gbmV3IFJlc3BvbnNlKHJhd1Jlcy5ib2R5LCB7XG4gICAgICAgIHN0YXR1czogYWN0dWFsU3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiByYXdSZXMuc3RhdHVzVGV4dCxcbiAgICAgICAgaGVhZGVyczogcmF3UmVzLmhlYWRlcnNcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAocmVzLmhlYWRlcnMuaGFzKFwieC1zdGFjay1rbm93bi1lcnJvclwiKSkge1xuICAgICAgY29uc3QgZXJyb3JKc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIGlmIChyZXMuaGVhZGVycy5nZXQoXCJ4LXN0YWNrLWtub3duLWVycm9yXCIpICE9PSBlcnJvckpzb24uY29kZSkge1xuICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIk1pc21hdGNoIGJldHdlZW4geC1zdGFjay1rbm93bi1lcnJvciBoZWFkZXIgYW5kIGVycm9yIGNvZGUgaW4gYm9keTsgdGhlIHNlcnZlcidzIHJlc3BvbnNlIGlzIGludmFsaWRcIik7XG4gICAgICB9XG4gICAgICBjb25zdCBlcnJvciA9IEtub3duRXJyb3IuZnJvbUpzb24oZXJyb3JKc29uKTtcbiAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgICByZXR1cm4gUmVzdWx0Lm9rKHJlcyk7XG4gIH1cbiAgYXN5bmMgY2hlY2tGZWF0dXJlU3VwcG9ydChvcHRpb25zKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcIi9jaGVjay1mZWF0dXJlLXN1cHBvcnRcIiwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvcHRpb25zKVxuICAgIH0sIG51bGwpO1xuICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKGF3YWl0IHJlcy50ZXh0KCkpO1xuICB9XG4gIGFzeW5jIHNlbmRGb3Jnb3RQYXNzd29yZEVtYWlsKGVtYWlsLCBjYWxsYmFja1VybCkge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXG4gICAgICBcIi9hdXRoL3Bhc3N3b3JkL3NlbmQtcmVzZXQtY29kZVwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgIGNhbGxiYWNrX3VybDogY2FsbGJhY2tVcmxcbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBudWxsLFxuICAgICAgW0tub3duRXJyb3JzLlVzZXJOb3RGb3VuZF1cbiAgICApO1xuICAgIGlmIChyZXMuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IocmVzLmVycm9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFJlc3VsdC5vayh2b2lkIDApO1xuICAgIH1cbiAgfVxuICBhc3luYyBzZW5kVmVyaWZpY2F0aW9uRW1haWwoZW1haWwsIGNhbGxiYWNrVXJsLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcbiAgICAgIFwiL2NvbnRhY3QtY2hhbm5lbHMvc2VuZC12ZXJpZmljYXRpb24tY29kZVwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgIGNhbGxiYWNrX3VybDogY2FsbGJhY2tVcmxcbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBzZXNzaW9uLFxuICAgICAgW0tub3duRXJyb3JzLkVtYWlsQWxyZWFkeVZlcmlmaWVkXVxuICAgICk7XG4gICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgcmV0dXJuIHJlcy5lcnJvcjtcbiAgICB9XG4gIH1cbiAgYXN5bmMgc2VuZE1hZ2ljTGlua0VtYWlsKGVtYWlsLCBjYWxsYmFja1VybCkge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXG4gICAgICBcIi9hdXRoL290cC9zZW5kLXNpZ24taW4tY29kZVwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgIGNhbGxiYWNrX3VybDogY2FsbGJhY2tVcmxcbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBudWxsLFxuICAgICAgW0tub3duRXJyb3JzLlJlZGlyZWN0VXJsTm90V2hpdGVsaXN0ZWRdXG4gICAgKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlcy5lcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBSZXN1bHQub2soYXdhaXQgcmVzLmRhdGEuanNvbigpKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgcmVzZXRQYXNzd29yZChvcHRpb25zKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcbiAgICAgIFwib25seVZlcmlmeUNvZGVcIiBpbiBvcHRpb25zID8gXCIvYXV0aC9wYXNzd29yZC9yZXNldC9jaGVjay1jb2RlXCIgOiBcIi9hdXRoL3Bhc3N3b3JkL3Jlc2V0XCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgY29kZTogb3B0aW9ucy5jb2RlLFxuICAgICAgICAgIC4uLlwicGFzc3dvcmRcIiBpbiBvcHRpb25zID8geyBwYXNzd29yZDogb3B0aW9ucy5wYXNzd29yZCB9IDoge31cbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBudWxsLFxuICAgICAgW0tub3duRXJyb3JzLlZlcmlmaWNhdGlvbkNvZGVFcnJvcl1cbiAgICApO1xuICAgIGlmIChyZXMuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IocmVzLmVycm9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFJlc3VsdC5vayh2b2lkIDApO1xuICAgIH1cbiAgfVxuICBhc3luYyB1cGRhdGVQYXNzd29yZChvcHRpb25zLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcbiAgICAgIFwiL2F1dGgvcGFzc3dvcmQvdXBkYXRlXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgb2xkX3Bhc3N3b3JkOiBvcHRpb25zLm9sZFBhc3N3b3JkLFxuICAgICAgICAgIG5ld19wYXNzd29yZDogb3B0aW9ucy5uZXdQYXNzd29yZFxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIHNlc3Npb24sXG4gICAgICBbS25vd25FcnJvcnMuUGFzc3dvcmRDb25maXJtYXRpb25NaXNtYXRjaCwgS25vd25FcnJvcnMuUGFzc3dvcmRSZXF1aXJlbWVudHNOb3RNZXRdXG4gICAgKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gcmVzLmVycm9yO1xuICAgIH1cbiAgfVxuICBhc3luYyBzZXRQYXNzd29yZChvcHRpb25zLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcbiAgICAgIFwiL2F1dGgvcGFzc3dvcmQvc2V0XCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvcHRpb25zKVxuICAgICAgfSxcbiAgICAgIHNlc3Npb24sXG4gICAgICBbS25vd25FcnJvcnMuUGFzc3dvcmRSZXF1aXJlbWVudHNOb3RNZXRdXG4gICAgKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gcmVzLmVycm9yO1xuICAgIH1cbiAgfVxuICBhc3luYyB2ZXJpZnlQYXNzd29yZFJlc2V0Q29kZShjb2RlKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5yZXNldFBhc3N3b3JkKHsgY29kZSwgb25seVZlcmlmeUNvZGU6IHRydWUgfSk7XG4gICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihyZXMuZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gUmVzdWx0Lm9rKHZvaWQgMCk7XG4gICAgfVxuICB9XG4gIGFzeW5jIHZlcmlmeUVtYWlsKGNvZGUpIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFxuICAgICAgXCIvY29udGFjdC1jaGFubmVscy92ZXJpZnlcIixcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBjb2RlXG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgbnVsbCxcbiAgICAgIFtLbm93bkVycm9ycy5WZXJpZmljYXRpb25Db2RlRXJyb3JdXG4gICAgKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlcy5lcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBSZXN1bHQub2sodm9pZCAwKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgaW5pdGlhdGVQYXNza2V5UmVnaXN0cmF0aW9uKG9wdGlvbnMsIHNlc3Npb24pIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFxuICAgICAgXCIvYXV0aC9wYXNza2V5L2luaXRpYXRlLXBhc3NrZXktcmVnaXN0cmF0aW9uXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvcHRpb25zKVxuICAgICAgfSxcbiAgICAgIHNlc3Npb24sXG4gICAgICBbXVxuICAgICk7XG4gICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihyZXMuZXJyb3IpO1xuICAgIH1cbiAgICByZXR1cm4gUmVzdWx0Lm9rKGF3YWl0IHJlcy5kYXRhLmpzb24oKSk7XG4gIH1cbiAgYXN5bmMgcmVnaXN0ZXJQYXNza2V5KG9wdGlvbnMsIHNlc3Npb24pIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFxuICAgICAgXCIvYXV0aC9wYXNza2V5L3JlZ2lzdGVyXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvcHRpb25zKVxuICAgICAgfSxcbiAgICAgIHNlc3Npb24sXG4gICAgICBbS25vd25FcnJvcnMuUGFzc2tleVJlZ2lzdHJhdGlvbkZhaWxlZF1cbiAgICApO1xuICAgIGlmIChyZXMuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IocmVzLmVycm9yKTtcbiAgICB9XG4gICAgcmV0dXJuIFJlc3VsdC5vayh2b2lkIDApO1xuICB9XG4gIGFzeW5jIGluaXRpYXRlUGFzc2tleUF1dGhlbnRpY2F0aW9uKG9wdGlvbnMsIHNlc3Npb24pIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFxuICAgICAgXCIvYXV0aC9wYXNza2V5L2luaXRpYXRlLXBhc3NrZXktYXV0aGVudGljYXRpb25cIixcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpXG4gICAgICB9LFxuICAgICAgc2Vzc2lvbixcbiAgICAgIFtdXG4gICAgKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlcy5lcnJvcik7XG4gICAgfVxuICAgIHJldHVybiBSZXN1bHQub2soYXdhaXQgcmVzLmRhdGEuanNvbigpKTtcbiAgfVxuICBhc3luYyBzZW5kVGVhbUludml0YXRpb24ob3B0aW9ucykge1xuICAgIGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXG4gICAgICBcIi90ZWFtLWludml0YXRpb25zL3NlbmQtY29kZVwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGVtYWlsOiBvcHRpb25zLmVtYWlsLFxuICAgICAgICAgIHRlYW1faWQ6IG9wdGlvbnMudGVhbUlkLFxuICAgICAgICAgIGNhbGxiYWNrX3VybDogb3B0aW9ucy5jYWxsYmFja1VybFxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIG9wdGlvbnMuc2Vzc2lvblxuICAgICk7XG4gIH1cbiAgYXN5bmMgYWNjZXB0VGVhbUludml0YXRpb24ob3B0aW9ucykge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXG4gICAgICBvcHRpb25zLnR5cGUgPT09IFwiY2hlY2tcIiA/IFwiL3RlYW0taW52aXRhdGlvbnMvYWNjZXB0L2NoZWNrLWNvZGVcIiA6IG9wdGlvbnMudHlwZSA9PT0gXCJkZXRhaWxzXCIgPyBcIi90ZWFtLWludml0YXRpb25zL2FjY2VwdC9kZXRhaWxzXCIgOiBcIi90ZWFtLWludml0YXRpb25zL2FjY2VwdFwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGNvZGU6IG9wdGlvbnMuY29kZVxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIG9wdGlvbnMuc2Vzc2lvbixcbiAgICAgIFtLbm93bkVycm9ycy5WZXJpZmljYXRpb25Db2RlRXJyb3JdXG4gICAgKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlcy5lcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBSZXN1bHQub2soYXdhaXQgcmVzLmRhdGEuanNvbigpKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgdG90cE1mYShhdHRlbXB0Q29kZSwgdG90cCwgc2Vzc2lvbikge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXCIvYXV0aC9tZmEvc2lnbi1pblwiLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgY29kZTogYXR0ZW1wdENvZGUsXG4gICAgICAgIHR5cGU6IFwidG90cFwiLFxuICAgICAgICB0b3RwXG4gICAgICB9KVxuICAgIH0sIHNlc3Npb24pO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFjY2Vzc1Rva2VuOiByZXN1bHQuYWNjZXNzX3Rva2VuLFxuICAgICAgcmVmcmVzaFRva2VuOiByZXN1bHQucmVmcmVzaF90b2tlbixcbiAgICAgIG5ld1VzZXI6IHJlc3VsdC5pc19uZXdfdXNlclxuICAgIH07XG4gIH1cbiAgYXN5bmMgc2lnbkluV2l0aENyZWRlbnRpYWwoZW1haWwsIHBhc3N3b3JkLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcbiAgICAgIFwiL2F1dGgvcGFzc3dvcmQvc2lnbi1pblwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgIHBhc3N3b3JkXG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgc2Vzc2lvbixcbiAgICAgIFtLbm93bkVycm9ycy5FbWFpbFBhc3N3b3JkTWlzbWF0Y2hdXG4gICAgKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlcy5lcnJvcik7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlcy5kYXRhLmpzb24oKTtcbiAgICByZXR1cm4gUmVzdWx0Lm9rKHtcbiAgICAgIGFjY2Vzc1Rva2VuOiByZXN1bHQuYWNjZXNzX3Rva2VuLFxuICAgICAgcmVmcmVzaFRva2VuOiByZXN1bHQucmVmcmVzaF90b2tlblxuICAgIH0pO1xuICB9XG4gIGFzeW5jIHNpZ25VcFdpdGhDcmVkZW50aWFsKGVtYWlsLCBwYXNzd29yZCwgZW1haWxWZXJpZmljYXRpb25SZWRpcmVjdFVybCwgc2Vzc2lvbikge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXG4gICAgICBcIi9hdXRoL3Bhc3N3b3JkL3NpZ24tdXBcIixcbiAgICAgIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICBwYXNzd29yZCxcbiAgICAgICAgICB2ZXJpZmljYXRpb25fY2FsbGJhY2tfdXJsOiBlbWFpbFZlcmlmaWNhdGlvblJlZGlyZWN0VXJsXG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgc2Vzc2lvbixcbiAgICAgIFtLbm93bkVycm9ycy5Vc2VyV2l0aEVtYWlsQWxyZWFkeUV4aXN0cywgS25vd25FcnJvcnMuUGFzc3dvcmRSZXF1aXJlbWVudHNOb3RNZXRdXG4gICAgKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlcy5lcnJvcik7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlcy5kYXRhLmpzb24oKTtcbiAgICByZXR1cm4gUmVzdWx0Lm9rKHtcbiAgICAgIGFjY2Vzc1Rva2VuOiByZXN1bHQuYWNjZXNzX3Rva2VuLFxuICAgICAgcmVmcmVzaFRva2VuOiByZXN1bHQucmVmcmVzaF90b2tlblxuICAgIH0pO1xuICB9XG4gIGFzeW5jIHNpZ25VcEFub255bW91c2x5KHNlc3Npb24pIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFxuICAgICAgXCIvYXV0aC9hbm9ueW1vdXMvc2lnbi11cFwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiXG4gICAgICB9LFxuICAgICAgc2Vzc2lvbixcbiAgICAgIFtdXG4gICAgKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlcy5lcnJvcik7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlcy5kYXRhLmpzb24oKTtcbiAgICByZXR1cm4gUmVzdWx0Lm9rKHtcbiAgICAgIGFjY2Vzc1Rva2VuOiByZXN1bHQuYWNjZXNzX3Rva2VuLFxuICAgICAgcmVmcmVzaFRva2VuOiByZXN1bHQucmVmcmVzaF90b2tlblxuICAgIH0pO1xuICB9XG4gIGFzeW5jIHNpZ25JbldpdGhNYWdpY0xpbmsoY29kZSwgc2Vzc2lvbikge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXG4gICAgICBcIi9hdXRoL290cC9zaWduLWluXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgY29kZVxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIHNlc3Npb24sXG4gICAgICBbS25vd25FcnJvcnMuVmVyaWZpY2F0aW9uQ29kZUVycm9yXVxuICAgICk7XG4gICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihyZXMuZXJyb3IpO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXMuZGF0YS5qc29uKCk7XG4gICAgcmV0dXJuIFJlc3VsdC5vayh7XG4gICAgICBhY2Nlc3NUb2tlbjogcmVzdWx0LmFjY2Vzc190b2tlbixcbiAgICAgIHJlZnJlc2hUb2tlbjogcmVzdWx0LnJlZnJlc2hfdG9rZW4sXG4gICAgICBuZXdVc2VyOiByZXN1bHQuaXNfbmV3X3VzZXJcbiAgICB9KTtcbiAgfVxuICBhc3luYyBzaWduSW5XaXRoTWZhKHRvdHAsIGNvZGUsIHNlc3Npb24pIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFxuICAgICAgXCIvYXV0aC9tZmEvc2lnbi1pblwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHR5cGU6IFwidG90cFwiLFxuICAgICAgICAgIHRvdHAsXG4gICAgICAgICAgY29kZVxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIHNlc3Npb24sXG4gICAgICBbS25vd25FcnJvcnMuVmVyaWZpY2F0aW9uQ29kZUVycm9yXVxuICAgICk7XG4gICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihyZXMuZXJyb3IpO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXMuZGF0YS5qc29uKCk7XG4gICAgcmV0dXJuIFJlc3VsdC5vayh7XG4gICAgICBhY2Nlc3NUb2tlbjogcmVzdWx0LmFjY2Vzc190b2tlbixcbiAgICAgIHJlZnJlc2hUb2tlbjogcmVzdWx0LnJlZnJlc2hfdG9rZW4sXG4gICAgICBuZXdVc2VyOiByZXN1bHQuaXNfbmV3X3VzZXJcbiAgICB9KTtcbiAgfVxuICBhc3luYyBzaWduSW5XaXRoUGFzc2tleShib2R5LCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcbiAgICAgIFwiL2F1dGgvcGFzc2tleS9zaWduLWluXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxuICAgICAgfSxcbiAgICAgIHNlc3Npb24sXG4gICAgICBbS25vd25FcnJvcnMuUGFzc2tleUF1dGhlbnRpY2F0aW9uRmFpbGVkXVxuICAgICk7XG4gICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIikge1xuICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcihyZXMuZXJyb3IpO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXMuZGF0YS5qc29uKCk7XG4gICAgcmV0dXJuIFJlc3VsdC5vayh7XG4gICAgICBhY2Nlc3NUb2tlbjogcmVzdWx0LmFjY2Vzc190b2tlbixcbiAgICAgIHJlZnJlc2hUb2tlbjogcmVzdWx0LnJlZnJlc2hfdG9rZW5cbiAgICB9KTtcbiAgfVxuICBhc3luYyBnZXRPQXV0aFVybChvcHRpb25zKSB7XG4gICAgY29uc3QgdXBkYXRlZFJlZGlyZWN0VXJsID0gbmV3IFVSTChvcHRpb25zLnJlZGlyZWN0VXJsKTtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbXCJjb2RlXCIsIFwic3RhdGVcIl0pIHtcbiAgICAgIGlmICh1cGRhdGVkUmVkaXJlY3RVcmwuc2VhcmNoUGFyYW1zLmhhcyhrZXkpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIlJlZGlyZWN0IFVSTCBhbHJlYWR5IGNvbnRhaW5zIFwiICsga2V5ICsgXCIgcGFyYW1ldGVyLCByZW1vdmluZyBpdCBhcyBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuIGJ5IHRoZSBPQXV0aCBjYWxsYmFja1wiKTtcbiAgICAgIH1cbiAgICAgIHVwZGF0ZWRSZWRpcmVjdFVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKGtleSk7XG4gICAgfVxuICAgIGlmICghKFwicHVibGlzaGFibGVDbGllbnRLZXlcIiBpbiB0aGlzLm9wdGlvbnMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBZG1pbiBzZXNzaW9uIHRva2VuIGlzIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkIGZvciBPQXV0aFwiKTtcbiAgICB9XG4gICAgY29uc3QgdXJsID0gbmV3IFVSTCh0aGlzLmdldEFwaVVybCgpICsgXCIvYXV0aC9vYXV0aC9hdXRob3JpemUvXCIgKyBvcHRpb25zLnByb3ZpZGVyLnRvTG93ZXJDYXNlKCkpO1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiY2xpZW50X2lkXCIsIHRoaXMucHJvamVjdElkKTtcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcImNsaWVudF9zZWNyZXRcIiwgdGhpcy5vcHRpb25zLnB1Ymxpc2hhYmxlQ2xpZW50S2V5KTtcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcInJlZGlyZWN0X3VyaVwiLCB1cGRhdGVkUmVkaXJlY3RVcmwudG9TdHJpbmcoKSk7XG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJzY29wZVwiLCBcImxlZ2FjeVwiKTtcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcInN0YXRlXCIsIG9wdGlvbnMuc3RhdGUpO1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiZ3JhbnRfdHlwZVwiLCBcImF1dGhvcml6YXRpb25fY29kZVwiKTtcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcImNvZGVfY2hhbGxlbmdlXCIsIG9wdGlvbnMuY29kZUNoYWxsZW5nZSk7XG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJjb2RlX2NoYWxsZW5nZV9tZXRob2RcIiwgXCJTMjU2XCIpO1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwicmVzcG9uc2VfdHlwZVwiLCBcImNvZGVcIik7XG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJ0eXBlXCIsIG9wdGlvbnMudHlwZSk7XG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJlcnJvcl9yZWRpcmVjdF91cmxcIiwgb3B0aW9ucy5lcnJvclJlZGlyZWN0VXJsKTtcbiAgICBjb25zdCB0b2tlbnMgPSBhd2FpdCBvcHRpb25zLnNlc3Npb24uZ2V0T3JGZXRjaExpa2VseVZhbGlkVG9rZW5zKDJlNCk7XG4gICAgaWYgKHRva2Vucykge1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJ0b2tlblwiLCB0b2tlbnMuYWNjZXNzVG9rZW4udG9rZW4pO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5hZnRlckNhbGxiYWNrUmVkaXJlY3RVcmwpIHtcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiYWZ0ZXJfY2FsbGJhY2tfcmVkaXJlY3RfdXJsXCIsIG9wdGlvbnMuYWZ0ZXJDYWxsYmFja1JlZGlyZWN0VXJsKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMucHJvdmlkZXJTY29wZSkge1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJwcm92aWRlcl9zY29wZVwiLCBvcHRpb25zLnByb3ZpZGVyU2NvcGUpO1xuICAgIH1cbiAgICByZXR1cm4gdXJsLnRvU3RyaW5nKCk7XG4gIH1cbiAgYXN5bmMgY2FsbE9BdXRoQ2FsbGJhY2sob3B0aW9ucykge1xuICAgIGlmICghKFwicHVibGlzaGFibGVDbGllbnRLZXlcIiBpbiB0aGlzLm9wdGlvbnMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBZG1pbiBzZXNzaW9uIHRva2VuIGlzIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkIGZvciBPQXV0aFwiKTtcbiAgICB9XG4gICAgY29uc3QgYXMgPSB7XG4gICAgICBpc3N1ZXI6IHRoaXMub3B0aW9ucy5nZXRCYXNlVXJsKCksXG4gICAgICBhbGdvcml0aG06IFwib2F1dGgyXCIsXG4gICAgICB0b2tlbl9lbmRwb2ludDogdGhpcy5nZXRBcGlVcmwoKSArIFwiL2F1dGgvb2F1dGgvdG9rZW5cIlxuICAgIH07XG4gICAgY29uc3QgY2xpZW50ID0ge1xuICAgICAgY2xpZW50X2lkOiB0aGlzLnByb2plY3RJZCxcbiAgICAgIGNsaWVudF9zZWNyZXQ6IHRoaXMub3B0aW9ucy5wdWJsaXNoYWJsZUNsaWVudEtleSxcbiAgICAgIHRva2VuX2VuZHBvaW50X2F1dGhfbWV0aG9kOiBcImNsaWVudF9zZWNyZXRfcG9zdFwiXG4gICAgfTtcbiAgICBjb25zdCBwYXJhbXMgPSBhd2FpdCB0aGlzLl9uZXR3b3JrUmV0cnlFeGNlcHRpb24oXG4gICAgICBhc3luYyAoKSA9PiBvYXV0aC52YWxpZGF0ZUF1dGhSZXNwb25zZShhcywgY2xpZW50LCBvcHRpb25zLm9hdXRoUGFyYW1zLCBvcHRpb25zLnN0YXRlKVxuICAgICk7XG4gICAgaWYgKG9hdXRoLmlzT0F1dGgyRXJyb3IocGFyYW1zKSkge1xuICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJFcnJvciB2YWxpZGF0aW5nIG91dGVyIE9BdXRoIHJlc3BvbnNlXCIsIHsgcGFyYW1zIH0pO1xuICAgIH1cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG9hdXRoLmF1dGhvcml6YXRpb25Db2RlR3JhbnRSZXF1ZXN0KFxuICAgICAgYXMsXG4gICAgICBjbGllbnQsXG4gICAgICBwYXJhbXMsXG4gICAgICBvcHRpb25zLnJlZGlyZWN0VXJpLFxuICAgICAgb3B0aW9ucy5jb2RlVmVyaWZpZXJcbiAgICApO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9hdXRoLnByb2Nlc3NBdXRob3JpemF0aW9uQ29kZU9BdXRoMlJlc3BvbnNlKGFzLCBjbGllbnQsIHJlc3BvbnNlKTtcbiAgICBpZiAob2F1dGguaXNPQXV0aDJFcnJvcihyZXN1bHQpKSB7XG4gICAgICBpZiAoXCJjb2RlXCIgaW4gcmVzdWx0ICYmIHJlc3VsdC5jb2RlID09PSBcIk1VTFRJX0ZBQ1RPUl9BVVRIRU5USUNBVElPTl9SRVFVSVJFRFwiKSB7XG4gICAgICAgIHRocm93IG5ldyBLbm93bkVycm9ycy5NdWx0aUZhY3RvckF1dGhlbnRpY2F0aW9uUmVxdWlyZWQocmVzdWx0LmRldGFpbHMuYXR0ZW1wdF9jb2RlKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiT3V0ZXIgT0F1dGggZXJyb3IgZHVyaW5nIGF1dGhvcml6YXRpb24gY29kZSByZXNwb25zZVwiLCB7IHJlc3VsdCB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIG5ld1VzZXI6IHJlc3VsdC5pc19uZXdfdXNlcixcbiAgICAgIGFmdGVyQ2FsbGJhY2tSZWRpcmVjdFVybDogcmVzdWx0LmFmdGVyX2NhbGxiYWNrX3JlZGlyZWN0X3VybCxcbiAgICAgIGFjY2Vzc1Rva2VuOiByZXN1bHQuYWNjZXNzX3Rva2VuLFxuICAgICAgcmVmcmVzaFRva2VuOiByZXN1bHQucmVmcmVzaF90b2tlbiA/PyB0aHJvd0VycihcIlJlZnJlc2ggdG9rZW4gbm90IGZvdW5kIGluIG91dGVyIE9BdXRoIHJlc3BvbnNlXCIpXG4gICAgfTtcbiAgfVxuICBhc3luYyBzaWduT3V0KHNlc3Npb24pIHtcbiAgICBjb25zdCB0b2tlbk9iaiA9IGF3YWl0IHNlc3Npb24uZ2V0T3JGZXRjaExpa2VseVZhbGlkVG9rZW5zKDJlNCk7XG4gICAgaWYgKHRva2VuT2JqKSB7XG4gICAgICBjb25zdCByZXNPckVycm9yID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcbiAgICAgICAgXCIvYXV0aC9zZXNzaW9ucy9jdXJyZW50XCIsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHt9KVxuICAgICAgICB9LFxuICAgICAgICBzZXNzaW9uLFxuICAgICAgICBbS25vd25FcnJvcnMuUmVmcmVzaFRva2VuRXJyb3JdXG4gICAgICApO1xuICAgICAgaWYgKHJlc09yRXJyb3Iuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgaWYgKEtub3duRXJyb3JzLlJlZnJlc2hUb2tlbkVycm9yLmlzSW5zdGFuY2UocmVzT3JFcnJvci5lcnJvcikpIHtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIlVuZXhwZWN0ZWQgZXJyb3JcIiwgeyBlcnJvcjogcmVzT3JFcnJvci5lcnJvciB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgIH1cbiAgICB9XG4gICAgc2Vzc2lvbi5tYXJrSW52YWxpZCgpO1xuICB9XG4gIGFzeW5jIGdldENsaWVudFVzZXJCeVRva2VuKHNlc3Npb24pIHtcbiAgICBjb25zdCByZXNwb25zZU9yRXJyb3IgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFxuICAgICAgXCIvdXNlcnMvbWVcIixcbiAgICAgIHt9LFxuICAgICAgc2Vzc2lvbixcbiAgICAgIFtLbm93bkVycm9ycy5DYW5ub3RHZXRPd25Vc2VyV2l0aG91dFVzZXJdXG4gICAgKTtcbiAgICBpZiAocmVzcG9uc2VPckVycm9yLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICBpZiAoS25vd25FcnJvcnMuQ2Fubm90R2V0T3duVXNlcldpdGhvdXRVc2VyLmlzSW5zdGFuY2UocmVzcG9uc2VPckVycm9yLmVycm9yKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiVW5leHBlY3RlZCB1bmNhdWdodCBlcnJvclwiLCB7IGNhdXNlOiByZXNwb25zZU9yRXJyb3IuZXJyb3IgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJlc3BvbnNlID0gcmVzcG9uc2VPckVycm9yLmRhdGE7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICBpZiAoIXVzZXIpIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiVXNlciBlbmRwb2ludCByZXR1cm5lZCBudWxsOyB0aGlzIHNob3VsZCBuZXZlciBoYXBwZW5cIik7XG4gICAgcmV0dXJuIHVzZXI7XG4gIH1cbiAgYXN5bmMgbGlzdFRlYW1JbnZpdGF0aW9ucyhvcHRpb25zLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgXCIvdGVhbS1pbnZpdGF0aW9ucz9cIiArIG5ldyBVUkxTZWFyY2hQYXJhbXMoeyB0ZWFtX2lkOiBvcHRpb25zLnRlYW1JZCB9KSxcbiAgICAgIHt9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiByZXN1bHQuaXRlbXM7XG4gIH1cbiAgYXN5bmMgcmV2b2tlVGVhbUludml0YXRpb24oaW52aXRhdGlvbklkLCB0ZWFtSWQsIHNlc3Npb24pIHtcbiAgICBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgYC90ZWFtLWludml0YXRpb25zLyR7aW52aXRhdGlvbklkfT90ZWFtX2lkPSR7dGVhbUlkfWAsXG4gICAgICB7IG1ldGhvZDogXCJERUxFVEVcIiB9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gIH1cbiAgYXN5bmMgbGlzdFRlYW1NZW1iZXJQcm9maWxlcyhvcHRpb25zLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgXCIvdGVhbS1tZW1iZXItcHJvZmlsZXM/XCIgKyBuZXcgVVJMU2VhcmNoUGFyYW1zKGZpbHRlclVuZGVmaW5lZCh7XG4gICAgICAgIHRlYW1faWQ6IG9wdGlvbnMudGVhbUlkLFxuICAgICAgICB1c2VyX2lkOiBvcHRpb25zLnVzZXJJZFxuICAgICAgfSkpLFxuICAgICAge30sXG4gICAgICBzZXNzaW9uXG4gICAgKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHJlc3VsdC5pdGVtcztcbiAgfVxuICBhc3luYyBnZXRUZWFtTWVtYmVyUHJvZmlsZShvcHRpb25zLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgYC90ZWFtLW1lbWJlci1wcm9maWxlcy8ke29wdGlvbnMudGVhbUlkfS8ke29wdGlvbnMudXNlcklkfWAsXG4gICAgICB7fSxcbiAgICAgIHNlc3Npb25cbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgbGVhdmVUZWFtKHRlYW1JZCwgc2Vzc2lvbikge1xuICAgIGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXG4gICAgICBgL3RlYW0tbWVtYmVyc2hpcHMvJHt0ZWFtSWR9L21lYCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe30pXG4gICAgICB9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlVGVhbU1lbWJlclByb2ZpbGUob3B0aW9ucywgc2Vzc2lvbikge1xuICAgIGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXG4gICAgICBgL3RlYW0tbWVtYmVyLXByb2ZpbGVzLyR7b3B0aW9ucy50ZWFtSWR9LyR7b3B0aW9ucy51c2VySWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShvcHRpb25zLnByb2ZpbGUpXG4gICAgICB9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlVGVhbShvcHRpb25zLCBzZXNzaW9uKSB7XG4gICAgYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcbiAgICAgIGAvdGVhbXMvJHtvcHRpb25zLnRlYW1JZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMuZGF0YSlcbiAgICAgIH0sXG4gICAgICBzZXNzaW9uXG4gICAgKTtcbiAgfVxuICBhc3luYyBsaXN0Q3VycmVudFVzZXJUZWFtUGVybWlzc2lvbnMob3B0aW9ucywgc2Vzc2lvbikge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcbiAgICAgIGAvdGVhbS1wZXJtaXNzaW9ucz90ZWFtX2lkPSR7b3B0aW9ucy50ZWFtSWR9JnVzZXJfaWQ9bWUmcmVjdXJzaXZlPSR7b3B0aW9ucy5yZWN1cnNpdmV9YCxcbiAgICAgIHt9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiByZXN1bHQuaXRlbXM7XG4gIH1cbiAgYXN5bmMgbGlzdEN1cnJlbnRVc2VyUHJvamVjdFBlcm1pc3Npb25zKG9wdGlvbnMsIHNlc3Npb24pIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXG4gICAgICBgL3Byb2plY3QtcGVybWlzc2lvbnM/dXNlcl9pZD1tZSZyZWN1cnNpdmU9JHtvcHRpb25zLnJlY3Vyc2l2ZX1gLFxuICAgICAge30sXG4gICAgICBzZXNzaW9uXG4gICAgKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHJlc3VsdC5pdGVtcztcbiAgfVxuICBhc3luYyBsaXN0Q3VycmVudFVzZXJUZWFtcyhzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgXCIvdGVhbXM/dXNlcl9pZD1tZVwiLFxuICAgICAge30sXG4gICAgICBzZXNzaW9uXG4gICAgKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHJlc3VsdC5pdGVtcztcbiAgfVxuICBhc3luYyBnZXRDbGllbnRQcm9qZWN0KCkge1xuICAgIGNvbnN0IHJlc3BvbnNlT3JFcnJvciA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IoXCIvcHJvamVjdHMvY3VycmVudFwiLCB7fSwgbnVsbCwgW0tub3duRXJyb3JzLlByb2plY3ROb3RGb3VuZF0pO1xuICAgIGlmIChyZXNwb25zZU9yRXJyb3Iuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IocmVzcG9uc2VPckVycm9yLmVycm9yKTtcbiAgICB9XG4gICAgY29uc3QgcmVzcG9uc2UgPSByZXNwb25zZU9yRXJyb3IuZGF0YTtcbiAgICBjb25zdCBwcm9qZWN0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiBSZXN1bHQub2socHJvamVjdCk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlQ2xpZW50VXNlcih1cGRhdGUsIHNlc3Npb24pIHtcbiAgICBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgXCIvdXNlcnMvbWVcIixcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh1cGRhdGUpXG4gICAgICB9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gIH1cbiAgYXN5bmMgbGlzdFByb2plY3RzKHNlc3Npb24pIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXCIvaW50ZXJuYWwvcHJvamVjdHNcIiwge30sIHNlc3Npb24pO1xuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBsaXN0IHByb2plY3RzOiBcIiArIHJlc3BvbnNlLnN0YXR1cyArIFwiIFwiICsgYXdhaXQgcmVzcG9uc2UudGV4dCgpKTtcbiAgICB9XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4ganNvbi5pdGVtcztcbiAgfVxuICBhc3luYyBjcmVhdGVQcm9qZWN0KHByb2plY3QsIHNlc3Npb24pIHtcbiAgICBjb25zdCBmZXRjaFJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcbiAgICAgIFwiL2ludGVybmFsL3Byb2plY3RzXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwcm9qZWN0KVxuICAgICAgfSxcbiAgICAgIHNlc3Npb25cbiAgICApO1xuICAgIGlmICghZmV0Y2hSZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGNyZWF0ZSBwcm9qZWN0OiBcIiArIGZldGNoUmVzcG9uc2Uuc3RhdHVzICsgXCIgXCIgKyBhd2FpdCBmZXRjaFJlc3BvbnNlLnRleHQoKSk7XG4gICAgfVxuICAgIGNvbnN0IGpzb24gPSBhd2FpdCBmZXRjaFJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4ganNvbjtcbiAgfVxuICBhc3luYyBjcmVhdGVQcm92aWRlckFjY2Vzc1Rva2VuKHByb3ZpZGVyLCBzY29wZSwgc2Vzc2lvbikge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcbiAgICAgIGAvY29ubmVjdGVkLWFjY291bnRzL21lLyR7cHJvdmlkZXJ9L2FjY2Vzcy10b2tlbmAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHNjb3BlIH0pXG4gICAgICB9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBjcmVhdGVDbGllbnRUZWFtKGRhdGEsIHNlc3Npb24pIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXG4gICAgICBcIi90ZWFtc1wiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0sXG4gICAgICBzZXNzaW9uXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIGRlbGV0ZVRlYW0odGVhbUlkLCBzZXNzaW9uKSB7XG4gICAgYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcbiAgICAgIGAvdGVhbXMvJHt0ZWFtSWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiXG4gICAgICB9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gIH1cbiAgYXN5bmMgZGVsZXRlQ3VycmVudFVzZXIoc2Vzc2lvbikge1xuICAgIGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXG4gICAgICBcIi91c2Vycy9tZVwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCJcbiAgICAgIH0sXG4gICAgICBzZXNzaW9uXG4gICAgKTtcbiAgfVxuICBhc3luYyBjcmVhdGVDbGllbnRDb250YWN0Q2hhbm5lbChkYXRhLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgXCIvY29udGFjdC1jaGFubmVsc1wiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0sXG4gICAgICBzZXNzaW9uXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIHVwZGF0ZUNsaWVudENvbnRhY3RDaGFubmVsKGlkLCBkYXRhLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgYC9jb250YWN0LWNoYW5uZWxzL21lLyR7aWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgICAgfSxcbiAgICAgIHNlc3Npb25cbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgZGVsZXRlQ2xpZW50Q29udGFjdENoYW5uZWwoaWQsIHNlc3Npb24pIHtcbiAgICBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgYC9jb250YWN0LWNoYW5uZWxzL21lLyR7aWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiXG4gICAgICB9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gIH1cbiAgYXN5bmMgZGVsZXRlU2Vzc2lvbihzZXNzaW9uSWQsIHNlc3Npb24pIHtcbiAgICBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgYC9hdXRoL3Nlc3Npb25zLyR7c2Vzc2lvbklkfT91c2VyX2lkPW1lYCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiXG4gICAgICB9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gIH1cbiAgYXN5bmMgbGlzdFNlc3Npb25zKHNlc3Npb24pIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXG4gICAgICBcIi9hdXRoL3Nlc3Npb25zP3VzZXJfaWQ9bWVcIixcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkdFVFwiXG4gICAgICB9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBsaXN0Q2xpZW50Q29udGFjdENoYW5uZWxzKHNlc3Npb24pIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXG4gICAgICBcIi9jb250YWN0LWNoYW5uZWxzP3VzZXJfaWQ9bWVcIixcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkdFVFwiXG4gICAgICB9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4ganNvbi5pdGVtcztcbiAgfVxuICBhc3luYyBzZW5kQ3VycmVudFVzZXJDb250YWN0Q2hhbm5lbFZlcmlmaWNhdGlvbkVtYWlsKGNvbnRhY3RDaGFubmVsSWQsIGNhbGxiYWNrVXJsLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzcG9uc2VPckVycm9yID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcbiAgICAgIGAvY29udGFjdC1jaGFubmVscy9tZS8ke2NvbnRhY3RDaGFubmVsSWR9L3NlbmQtdmVyaWZpY2F0aW9uLWNvZGVgLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBjYWxsYmFja191cmw6IGNhbGxiYWNrVXJsIH0pXG4gICAgICB9LFxuICAgICAgc2Vzc2lvbixcbiAgICAgIFtLbm93bkVycm9ycy5FbWFpbEFscmVhZHlWZXJpZmllZF1cbiAgICApO1xuICAgIGlmIChyZXNwb25zZU9yRXJyb3Iuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IocmVzcG9uc2VPckVycm9yLmVycm9yKTtcbiAgICB9XG4gICAgcmV0dXJuIFJlc3VsdC5vayh2b2lkIDApO1xuICB9XG4gIGFzeW5jIGNsaUxvZ2luKGxvZ2luQ29kZSwgcmVmcmVzaFRva2VuLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzcG9uc2VPckVycm9yID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcbiAgICAgIFwiL2F1dGgvY2xpL2NvbXBsZXRlXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbG9naW5fY29kZTogbG9naW5Db2RlLFxuICAgICAgICAgIHJlZnJlc2hfdG9rZW46IHJlZnJlc2hUb2tlblxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIHNlc3Npb24sXG4gICAgICBbS25vd25FcnJvcnMuU2NoZW1hRXJyb3JdXG4gICAgKTtcbiAgICBpZiAocmVzcG9uc2VPckVycm9yLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlc3BvbnNlT3JFcnJvci5lcnJvcik7XG4gICAgfVxuICAgIHJldHVybiBSZXN1bHQub2sodm9pZCAwKTtcbiAgfVxuICBhc3luYyBfZ2V0QXBpS2V5UmVxdWVzdEluZm8ob3B0aW9ucykge1xuICAgIGlmIChcInVzZXJfaWRcIiBpbiBvcHRpb25zICYmIFwidGVhbV9pZFwiIGluIG9wdGlvbnMpIHtcbiAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiQ2Fubm90IHNwZWNpZnkgYm90aCB1c2VyX2lkIGFuZCB0ZWFtX2lkIGluIF9nZXRBcGlLZXlSZXF1ZXN0SW5mb1wiKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGVuZHBvaW50OiBcInRlYW1faWRcIiBpbiBvcHRpb25zID8gXCIvdGVhbS1hcGkta2V5c1wiIDogXCIvdXNlci1hcGkta2V5c1wiLFxuICAgICAgcXVlcnlQYXJhbXM6IG5ldyBVUkxTZWFyY2hQYXJhbXMoZmlsdGVyVW5kZWZpbmVkT3JOdWxsKG9wdGlvbnMpKVxuICAgIH07XG4gIH1cbiAgYXN5bmMgbGlzdFByb2plY3RBcGlLZXlzKG9wdGlvbnMsIHNlc3Npb24sIHJlcXVlc3RUeXBlKSB7XG4gICAgY29uc3Qgc2VuZFJlcXVlc3QgPSAocmVxdWVzdFR5cGUgPT09IFwiY2xpZW50XCIgPyB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0IDogdGhpcy5zZW5kU2VydmVyUmVxdWVzdCkuYmluZCh0aGlzKTtcbiAgICBjb25zdCB7IGVuZHBvaW50LCBxdWVyeVBhcmFtcyB9ID0gYXdhaXQgdGhpcy5fZ2V0QXBpS2V5UmVxdWVzdEluZm8ob3B0aW9ucyk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzZW5kUmVxdWVzdChcbiAgICAgIGAke2VuZHBvaW50fT8ke3F1ZXJ5UGFyYW1zLnRvU3RyaW5nKCl9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkdFVFwiXG4gICAgICB9LFxuICAgICAgc2Vzc2lvbixcbiAgICAgIHJlcXVlc3RUeXBlXG4gICAgKTtcbiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiBqc29uLml0ZW1zO1xuICB9XG4gIGFzeW5jIGNyZWF0ZVByb2plY3RBcGlLZXkoZGF0YSwgc2Vzc2lvbiwgcmVxdWVzdFR5cGUpIHtcbiAgICBjb25zdCBzZW5kUmVxdWVzdCA9IChyZXF1ZXN0VHlwZSA9PT0gXCJjbGllbnRcIiA/IHRoaXMuc2VuZENsaWVudFJlcXVlc3QgOiB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KS5iaW5kKHRoaXMpO1xuICAgIGNvbnN0IHsgZW5kcG9pbnQgfSA9IGF3YWl0IHRoaXMuX2dldEFwaUtleVJlcXVlc3RJbmZvKGRhdGEpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2VuZFJlcXVlc3QoXG4gICAgICBgJHtlbmRwb2ludH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0sXG4gICAgICBzZXNzaW9uLFxuICAgICAgcmVxdWVzdFR5cGVcbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgZ2V0UHJvamVjdEFwaUtleShvcHRpb25zLCBrZXlJZCwgc2Vzc2lvbiwgcmVxdWVzdFR5cGUpIHtcbiAgICBjb25zdCBzZW5kUmVxdWVzdCA9IChyZXF1ZXN0VHlwZSA9PT0gXCJjbGllbnRcIiA/IHRoaXMuc2VuZENsaWVudFJlcXVlc3QgOiB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KS5iaW5kKHRoaXMpO1xuICAgIGNvbnN0IHsgZW5kcG9pbnQsIHF1ZXJ5UGFyYW1zIH0gPSBhd2FpdCB0aGlzLl9nZXRBcGlLZXlSZXF1ZXN0SW5mbyhvcHRpb25zKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNlbmRSZXF1ZXN0KFxuICAgICAgYCR7ZW5kcG9pbnR9LyR7a2V5SWR9PyR7cXVlcnlQYXJhbXMudG9TdHJpbmcoKX1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiR0VUXCJcbiAgICAgIH0sXG4gICAgICBzZXNzaW9uLFxuICAgICAgcmVxdWVzdFR5cGVcbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlUHJvamVjdEFwaUtleShvcHRpb25zLCBrZXlJZCwgZGF0YSwgc2Vzc2lvbiwgcmVxdWVzdFR5cGUpIHtcbiAgICBjb25zdCBzZW5kUmVxdWVzdCA9IChyZXF1ZXN0VHlwZSA9PT0gXCJjbGllbnRcIiA/IHRoaXMuc2VuZENsaWVudFJlcXVlc3QgOiB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KS5iaW5kKHRoaXMpO1xuICAgIGNvbnN0IHsgZW5kcG9pbnQsIHF1ZXJ5UGFyYW1zIH0gPSBhd2FpdCB0aGlzLl9nZXRBcGlLZXlSZXF1ZXN0SW5mbyhvcHRpb25zKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNlbmRSZXF1ZXN0KFxuICAgICAgYCR7ZW5kcG9pbnR9LyR7a2V5SWR9PyR7cXVlcnlQYXJhbXMudG9TdHJpbmcoKX1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXG4gICAgICB9LFxuICAgICAgc2Vzc2lvbixcbiAgICAgIHJlcXVlc3RUeXBlXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIGNoZWNrUHJvamVjdEFwaUtleSh0eXBlLCBhcGlLZXksIHNlc3Npb24sIHJlcXVlc3RUeXBlKSB7XG4gICAgY29uc3Qgc2VuZFJlcXVlc3QgPSAocmVxdWVzdFR5cGUgPT09IFwiY2xpZW50XCIgPyB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yIDogdGhpcy5zZW5kU2VydmVyUmVxdWVzdEFuZENhdGNoS25vd25FcnJvcikuYmluZCh0aGlzKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZW5kUmVxdWVzdChcbiAgICAgIGAvJHt0eXBlfS1hcGkta2V5cy9jaGVja2AsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGFwaV9rZXk6IGFwaUtleSB9KVxuICAgICAgfSxcbiAgICAgIHNlc3Npb24sXG4gICAgICBbS25vd25FcnJvcnMuQXBpS2V5Tm90VmFsaWRdXG4gICAgKTtcbiAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHJlc3VsdC5kYXRhLmpzb24oKTtcbiAgfVxuICBhc3luYyBsaXN0Tm90aWZpY2F0aW9uQ2F0ZWdvcmllcyhzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgYC9lbWFpbHMvbm90aWZpY2F0aW9uLXByZWZlcmVuY2UvbWVgLFxuICAgICAge30sXG4gICAgICBzZXNzaW9uXG4gICAgKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHJlc3VsdC5pdGVtcztcbiAgfVxuICBhc3luYyBzZXROb3RpZmljYXRpb25zRW5hYmxlZChub3RpZmljYXRpb25DYXRlZ29yeUlkLCBlbmFibGVkLCBzZXNzaW9uKSB7XG4gICAgYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcbiAgICAgIGAvZW1haWxzL25vdGlmaWNhdGlvbi1wcmVmZXJlbmNlL21lLyR7bm90aWZpY2F0aW9uQ2F0ZWdvcnlJZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBlbmFibGVkXG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gIH1cbiAgYXN5bmMgZ2V0T0F1dGhQcm92aWRlcih1c2VySWQsIHByb3ZpZGVySWQsIHNlc3Npb24pIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXG4gICAgICBgL29hdXRoLXByb3ZpZGVycy8ke3VzZXJJZH0vJHtwcm92aWRlcklkfWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJHRVRcIlxuICAgICAgfSxcbiAgICAgIHNlc3Npb25cbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlT0F1dGhQcm92aWRlcih1c2VySWQsIHByb3ZpZGVySWQsIGRhdGEsIHNlc3Npb24pIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXG4gICAgICBgL29hdXRoLXByb3ZpZGVycy8ke3VzZXJJZH0vJHtwcm92aWRlcklkfWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0sXG4gICAgICBzZXNzaW9uXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIGxpc3RPQXV0aFByb3ZpZGVycyhvcHRpb25zID0ge30sIHNlc3Npb24pIHtcbiAgICBjb25zdCBxdWVyeVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoZmlsdGVyVW5kZWZpbmVkKG9wdGlvbnMpKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXG4gICAgICBgL29hdXRoLXByb3ZpZGVycyR7cXVlcnlQYXJhbXMudG9TdHJpbmcoKSA/IGA/JHtxdWVyeVBhcmFtcy50b1N0cmluZygpfWAgOiBcIlwifWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJHRVRcIlxuICAgICAgfSxcbiAgICAgIHNlc3Npb25cbiAgICApO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4gcmVzdWx0Lml0ZW1zO1xuICB9XG4gIGFzeW5jIGRlbGV0ZU9BdXRoUHJvdmlkZXIodXNlcklkLCBwcm92aWRlcklkLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgYC9vYXV0aC1wcm92aWRlcnMvJHt1c2VySWR9LyR7cHJvdmlkZXJJZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCJcbiAgICAgIH0sXG4gICAgICBzZXNzaW9uXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIGdldEl0ZW0ob3B0aW9ucywgc2Vzc2lvbikge1xuICAgIGxldCBjdXN0b21lclR5cGU7XG4gICAgbGV0IGN1c3RvbWVySWQ7XG4gICAgaWYgKFwidXNlcklkXCIgaW4gb3B0aW9ucykge1xuICAgICAgY3VzdG9tZXJUeXBlID0gXCJ1c2VyXCI7XG4gICAgICBjdXN0b21lcklkID0gb3B0aW9ucy51c2VySWQ7XG4gICAgfSBlbHNlIGlmIChcInRlYW1JZFwiIGluIG9wdGlvbnMpIHtcbiAgICAgIGN1c3RvbWVyVHlwZSA9IFwidGVhbVwiO1xuICAgICAgY3VzdG9tZXJJZCA9IG9wdGlvbnMudGVhbUlkO1xuICAgIH0gZWxzZSBpZiAoXCJjdXN0b21DdXN0b21lcklkXCIgaW4gb3B0aW9ucykge1xuICAgICAgY3VzdG9tZXJUeXBlID0gXCJjdXN0b21cIjtcbiAgICAgIGN1c3RvbWVySWQgPSBvcHRpb25zLmN1c3RvbUN1c3RvbWVySWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiZ2V0SXRlbSByZXF1aXJlcyBvbmUgb2YgdXNlcklkLCB0ZWFtSWQsIG9yIGN1c3RvbUN1c3RvbWVySWRcIik7XG4gICAgfVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcbiAgICAgIHVybFN0cmluZ2AvcGF5bWVudHMvaXRlbXMvJHtjdXN0b21lclR5cGV9LyR7Y3VzdG9tZXJJZH0vJHtvcHRpb25zLml0ZW1JZH1gLFxuICAgICAge30sXG4gICAgICBzZXNzaW9uXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIGNyZWF0ZUNoZWNrb3V0VXJsKGN1c3RvbWVyX3R5cGUsIGN1c3RvbWVyX2lkLCBvZmZlcklkT3JJbmxpbmUsIHNlc3Npb24pIHtcbiAgICBjb25zdCBvZmZlckJvZHkgPSB0eXBlb2Ygb2ZmZXJJZE9ySW5saW5lID09PSBcInN0cmluZ1wiID8geyBvZmZlcl9pZDogb2ZmZXJJZE9ySW5saW5lIH0gOiB7IGlubGluZV9vZmZlcjogb2ZmZXJJZE9ySW5saW5lIH07XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDbGllbnRSZXF1ZXN0KFxuICAgICAgXCIvcGF5bWVudHMvcHVyY2hhc2VzL2NyZWF0ZS1wdXJjaGFzZS11cmxcIixcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgY3VzdG9tZXJfdHlwZSwgY3VzdG9tZXJfaWQsIC4uLm9mZmVyQm9keSB9KVxuICAgICAgfSxcbiAgICAgIHNlc3Npb25cbiAgICApO1xuICAgIGNvbnN0IHsgdXJsIH0gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxufTtcbmV4cG9ydCB7XG4gIFN0YWNrQ2xpZW50SW50ZXJmYWNlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xpZW50LWludGVyZmFjZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/client-interface.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/server-interface.js":
/*!**********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/server-interface.js ***!
  \**********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StackServerInterface: () => (/* binding */ StackServerInterface)\n/* harmony export */ });\n/* harmony import */ var _helpers_vault_client_side_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../helpers/vault/client-side.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/helpers/vault/client-side.js\");\n/* harmony import */ var _known_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../known-errors.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/known-errors.js\");\n/* harmony import */ var _utils_errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/errors.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n/* harmony import */ var _utils_objects_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/objects.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/objects.js\");\n/* harmony import */ var _utils_results_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/results.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/results.js\");\n/* harmony import */ var _utils_urls_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/urls.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/urls.js\");\n/* harmony import */ var _client_interface_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./client-interface.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/client-interface.js\");\n// src/interface/server-interface.ts\n\n\n\n\n\n\n\nvar StackServerInterface = class extends _client_interface_js__WEBPACK_IMPORTED_MODULE_6__.StackClientInterface {\n  constructor(options) {\n    super(options);\n    this.options = options;\n  }\n  async sendServerRequest(path, options, session, requestType = \"server\") {\n    return await this.sendClientRequest(\n      path,\n      {\n        ...options,\n        headers: {\n          \"x-stack-secret-server-key\": \"secretServerKey\" in this.options ? this.options.secretServerKey : \"\",\n          ...options.headers\n        }\n      },\n      session,\n      requestType\n    );\n  }\n  async sendServerRequestAndCatchKnownError(path, requestOptions, tokenStoreOrNull, errorsToCatch) {\n    try {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_4__.Result.ok(await this.sendServerRequest(path, requestOptions, tokenStoreOrNull));\n    } catch (e) {\n      for (const errorType of errorsToCatch) {\n        if (errorType.isInstance(e)) {\n          return _utils_results_js__WEBPACK_IMPORTED_MODULE_4__.Result.error(e);\n        }\n      }\n      throw e;\n    }\n  }\n  async createServerUser(data) {\n    const response = await this.sendServerRequest(\n      \"/users\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async getServerUserByToken(session) {\n    const responseOrError = await this.sendServerRequestAndCatchKnownError(\n      \"/users/me\",\n      {},\n      session,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.CannotGetOwnUserWithoutUser]\n    );\n    if (responseOrError.status === \"error\") {\n      if (_known_errors_js__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.CannotGetOwnUserWithoutUser.isInstance(responseOrError.error)) {\n        return null;\n      } else {\n        throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_2__.StackAssertionError(\"Unexpected uncaught error\", { cause: responseOrError.error });\n      }\n    }\n    const response = responseOrError.data;\n    const user = await response.json();\n    if (!user) throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_2__.StackAssertionError(\"User endpoint returned null; this should never happen\");\n    return user;\n  }\n  async getServerUserById(userId) {\n    const responseOrError = await this.sendServerRequestAndCatchKnownError(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/users/${userId}`,\n      {},\n      null,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.UserNotFound]\n    );\n    if (responseOrError.status === \"error\") {\n      return _utils_results_js__WEBPACK_IMPORTED_MODULE_4__.Result.error(responseOrError.error);\n    }\n    const user = await responseOrError.data.json();\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_4__.Result.ok(user);\n  }\n  async listServerTeamInvitations(options) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/team-invitations?team_id=${options.teamId}`,\n      {},\n      null\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async revokeServerTeamInvitation(invitationId, teamId) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/team-invitations/${invitationId}?team_id=${teamId}`,\n      { method: \"DELETE\" },\n      null\n    );\n  }\n  async listServerTeamMemberProfiles(options) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/team-member-profiles?team_id=${options.teamId}`,\n      {},\n      null\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async getServerTeamMemberProfile(options) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/team-member-profiles/${options.teamId}/${options.userId}`,\n      {},\n      null\n    );\n    return await response.json();\n  }\n  async listServerTeamPermissions(options, session) {\n    const response = await this.sendServerRequest(\n      `/team-permissions?${new URLSearchParams((0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_3__.filterUndefined)({\n        user_id: options.userId,\n        team_id: options.teamId,\n        recursive: options.recursive.toString()\n      }))}`,\n      {},\n      session\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async listServerProjectPermissions(options, session) {\n    const response = await this.sendServerRequest(\n      `/project-permissions?${new URLSearchParams((0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_3__.filterUndefined)({\n        user_id: options.userId,\n        recursive: options.recursive.toString()\n      }))}`,\n      {},\n      session\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async listServerUsers(options) {\n    const searchParams = new URLSearchParams((0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_3__.filterUndefined)({\n      cursor: options.cursor,\n      limit: options.limit?.toString(),\n      desc: options.desc?.toString(),\n      ...options.orderBy ? {\n        order_by: {\n          signedUpAt: \"signed_up_at\"\n        }[options.orderBy]\n      } : {},\n      ...options.query ? {\n        query: options.query\n      } : {},\n      ...options.includeAnonymous ? {\n        include_anonymous: \"true\"\n      } : {}\n    }));\n    const response = await this.sendServerRequest(\"/users?\" + searchParams.toString(), {}, null);\n    return await response.json();\n  }\n  async listServerTeams(options) {\n    const response = await this.sendServerRequest(\n      `/teams?${new URLSearchParams((0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_3__.filterUndefined)({\n        user_id: options?.userId\n      }))}`,\n      {},\n      null\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async getServerTeam(teamId) {\n    const response = await this.sendServerRequest(\n      `/teams/${teamId}`,\n      {},\n      null\n    );\n    return await response.json();\n  }\n  async listServerTeamUsers(teamId) {\n    const response = await this.sendServerRequest(`/users?team_id=${teamId}`, {}, null);\n    const result = await response.json();\n    return result.items;\n  }\n  /* when passing a session, the user will be added to the team */\n  async createServerTeam(data) {\n    const response = await this.sendServerRequest(\n      \"/teams\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async updateServerTeam(teamId, data) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/teams/${teamId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async deleteServerTeam(teamId) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/teams/${teamId}`,\n      { method: \"DELETE\" },\n      null\n    );\n  }\n  async addServerUserToTeam(options) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/team-memberships/${options.teamId}/${options.userId}`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({})\n      },\n      null\n    );\n    return await response.json();\n  }\n  async removeServerUserFromTeam(options) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/team-memberships/${options.teamId}/${options.userId}`,\n      {\n        method: \"DELETE\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({})\n      },\n      null\n    );\n  }\n  async updateServerUser(userId, update) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/users/${userId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(update)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async createServerProviderAccessToken(userId, provider, scope) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/connected-accounts/${userId}/${provider}/access-token`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({ scope })\n      },\n      null\n    );\n    return await response.json();\n  }\n  async createServerUserSession(userId, expiresInMillis, isImpersonation) {\n    const response = await this.sendServerRequest(\n      \"/auth/sessions\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          user_id: userId,\n          expires_in_millis: expiresInMillis,\n          is_impersonation: isImpersonation\n        })\n      },\n      null\n    );\n    const result = await response.json();\n    return {\n      accessToken: result.access_token,\n      refreshToken: result.refresh_token\n    };\n  }\n  async leaveServerTeam(options) {\n    await this.sendClientRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/team-memberships/${options.teamId}/${options.userId}`,\n      {\n        method: \"DELETE\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({})\n      },\n      null\n    );\n  }\n  async updateServerTeamMemberProfile(options) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/team-member-profiles/${options.teamId}/${options.userId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(options.profile)\n      },\n      null\n    );\n  }\n  async grantServerTeamUserPermission(teamId, userId, permissionId) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/team-permissions/${teamId}/${userId}/${permissionId}`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({})\n      },\n      null\n    );\n  }\n  async grantServerProjectPermission(userId, permissionId) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/project-permissions/${userId}/${permissionId}`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({})\n      },\n      null\n    );\n  }\n  async revokeServerTeamUserPermission(teamId, userId, permissionId) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/team-permissions/${teamId}/${userId}/${permissionId}`,\n      {\n        method: \"DELETE\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({})\n      },\n      null\n    );\n  }\n  async revokeServerProjectPermission(userId, permissionId) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/project-permissions/${userId}/${permissionId}`,\n      {\n        method: \"DELETE\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({})\n      },\n      null\n    );\n  }\n  async deleteServerUser(userId) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/users/${userId}`,\n      {\n        method: \"DELETE\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({})\n      },\n      null\n    );\n  }\n  async createServerContactChannel(data) {\n    const response = await this.sendServerRequest(\n      \"/contact-channels\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async updateServerContactChannel(userId, contactChannelId, data) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/contact-channels/${userId}/${contactChannelId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async deleteServerContactChannel(userId, contactChannelId) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/contact-channels/${userId}/${contactChannelId}`,\n      {\n        method: \"DELETE\"\n      },\n      null\n    );\n  }\n  async listServerContactChannels(userId) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/contact-channels?user_id=${userId}`,\n      {\n        method: \"GET\"\n      },\n      null\n    );\n    const json = await response.json();\n    return json.items;\n  }\n  async listServerNotificationCategories(userId) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/emails/notification-preference/${userId}`,\n      {\n        method: \"GET\"\n      },\n      null\n    );\n    const json = await response.json();\n    return json.items;\n  }\n  async setServerNotificationsEnabled(userId, notificationCategoryId, enabled) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/emails/notification-preference/${userId}/${notificationCategoryId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          enabled\n        })\n      },\n      null\n    );\n  }\n  async sendServerContactChannelVerificationEmail(userId, contactChannelId, callbackUrl) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/contact-channels/${userId}/${contactChannelId}/send-verification-code`,\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({ callback_url: callbackUrl })\n      },\n      null\n    );\n  }\n  async listServerSessions(userId) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/auth/sessions?user_id=${userId}`,\n      {\n        method: \"GET\"\n      },\n      null\n    );\n    return await response.json();\n  }\n  async deleteServerSession(sessionId) {\n    await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/auth/sessions/${sessionId}`,\n      {\n        method: \"DELETE\"\n      },\n      null\n    );\n  }\n  async sendServerTeamInvitation(options) {\n    await this.sendServerRequest(\n      \"/team-invitations/send-code\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email: options.email,\n          team_id: options.teamId,\n          callback_url: options.callbackUrl\n        })\n      },\n      null\n    );\n  }\n  async updatePassword(options) {\n    const res = await this.sendServerRequestAndCatchKnownError(\n      \"/auth/password/update\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          old_password: options.oldPassword,\n          new_password: options.newPassword\n        })\n      },\n      null,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.PasswordConfirmationMismatch, _known_errors_js__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.PasswordRequirementsNotMet]\n    );\n    if (res.status === \"error\") {\n      return res.error;\n    }\n  }\n  // OAuth Providers CRUD operations\n  async createServerOAuthProvider(data) {\n    const response = await this.sendServerRequest(\n      \"/oauth-providers\",\n      {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async listServerOAuthProviders(options = {}) {\n    const queryParams = new URLSearchParams((0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_3__.filterUndefined)(options));\n    const response = await this.sendServerRequest(\n      `/oauth-providers${queryParams.toString() ? `?${queryParams.toString()}` : \"\"}`,\n      {\n        method: \"GET\"\n      },\n      null\n    );\n    const result = await response.json();\n    return result.items;\n  }\n  async updateServerOAuthProvider(userId, providerId, data) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/oauth-providers/${userId}/${providerId}`,\n      {\n        method: \"PATCH\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      },\n      null\n    );\n    return await response.json();\n  }\n  async deleteServerOAuthProvider(userId, providerId) {\n    const response = await this.sendServerRequest(\n      (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_5__.urlString)`/oauth-providers/${userId}/${providerId}`,\n      {\n        method: \"DELETE\"\n      },\n      null\n    );\n    return await response.json();\n  }\n  async sendEmail(options) {\n    const res = await this.sendServerRequest(\n      \"/emails/send-email\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          user_ids: options.userIds,\n          all_users: options.allUsers,\n          theme_id: options.themeId,\n          html: options.html,\n          subject: options.subject,\n          notification_category_name: options.notificationCategoryName,\n          template_id: options.templateId,\n          variables: options.variables,\n          draft_id: options.draftId\n        })\n      },\n      null\n    );\n    return _utils_results_js__WEBPACK_IMPORTED_MODULE_4__.Result.ok(void 0);\n  }\n  async updateItemQuantity(options, data) {\n    let customerType;\n    let customerId;\n    const itemId = options.itemId;\n    if (\"userId\" in options) {\n      customerType = \"user\";\n      customerId = options.userId;\n    } else if (\"teamId\" in options) {\n      customerType = \"team\";\n      customerId = options.teamId;\n    } else if (\"customCustomerId\" in options) {\n      customerType = \"custom\";\n      customerId = options.customCustomerId;\n    } else {\n      throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_2__.StackAssertionError(\"updateItemQuantity requires one of userId, teamId, or customCustomerId\");\n    }\n    const queryParams = new URLSearchParams({ allow_negative: (data.allow_negative ?? false).toString() });\n    await this.sendServerRequest(\n      `/payments/items/${customerType}/${customerId}/${itemId}/update-quantity?${queryParams.toString()}`,\n      {\n        method: \"POST\",\n        headers: { \"content-type\": \"application/json\" },\n        body: JSON.stringify({ delta: data.delta, expires_at: data.expires_at, description: data.description })\n      },\n      null\n    );\n  }\n  async getDataVaultStoreValue(secret, storeId, key) {\n    const hashedKey = await (0,_helpers_vault_client_side_js__WEBPACK_IMPORTED_MODULE_0__.hashKey)(secret, key);\n    const response = await this.sendServerRequestAndCatchKnownError(\n      `/data-vault/stores/${storeId}/get`,\n      {\n        method: \"POST\",\n        headers: { \"content-type\": \"application/json\" },\n        body: JSON.stringify({ hashed_key: hashedKey })\n      },\n      null,\n      [_known_errors_js__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.DataVaultStoreHashedKeyDoesNotExist]\n    );\n    if (response.status === \"error\") {\n      if (_known_errors_js__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.DataVaultStoreHashedKeyDoesNotExist.isInstance(response.error)) {\n        return null;\n      } else {\n        throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_2__.StackAssertionError(\"Unexpected uncaught error\", { cause: response.error });\n      }\n    }\n    const json = await response.data.json();\n    const encryptedValue = json.encrypted_value;\n    if (typeof encryptedValue !== \"string\") throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_2__.StackAssertionError(\"encrypted_value is not a string\", { type: typeof encryptedValue });\n    return await (0,_helpers_vault_client_side_js__WEBPACK_IMPORTED_MODULE_0__.decryptValue)(secret, key, encryptedValue);\n  }\n  async setDataVaultStoreValue(secret, storeId, key, value) {\n    const hashedKey = await (0,_helpers_vault_client_side_js__WEBPACK_IMPORTED_MODULE_0__.hashKey)(secret, key);\n    const encryptedValue = await (0,_helpers_vault_client_side_js__WEBPACK_IMPORTED_MODULE_0__.encryptValue)(secret, key, value);\n    await this.sendServerRequest(\n      `/data-vault/stores/${storeId}/set`,\n      {\n        method: \"POST\",\n        headers: { \"content-type\": \"application/json\" },\n        body: JSON.stringify({ hashed_key: hashedKey, encrypted_value: encryptedValue })\n      },\n      null\n    );\n  }\n};\n\n//# sourceMappingURL=server-interface.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vaW50ZXJmYWNlL3NlcnZlci1pbnRlcmZhY2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNzRjtBQUNyQztBQUNRO0FBQ0g7QUFDVDtBQUNBO0FBR2Q7QUFDL0IseUNBQXlDLHNFQUFvQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHFEQUFNO0FBQ25CLE1BQU07QUFDTjtBQUNBO0FBQ0EsaUJBQWlCLHFEQUFNO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLE9BQU8seURBQVc7QUFDbEI7QUFDQTtBQUNBLFVBQVUseURBQVc7QUFDckI7QUFDQSxRQUFRO0FBQ1Isa0JBQWtCLGlFQUFtQixnQ0FBZ0MsOEJBQThCO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGlFQUFtQiwrQkFBK0I7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHlEQUFTLFVBQVUsT0FBTztBQUNoQyxRQUFRO0FBQ1I7QUFDQSxPQUFPLHlEQUFXO0FBQ2xCO0FBQ0E7QUFDQSxhQUFhLHFEQUFNO0FBQ25CO0FBQ0E7QUFDQSxXQUFXLHFEQUFN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QkFBbUIsb0NBQW9DO0FBQ3ZELCtCQUErQix1QkFBdUI7QUFDdEQsT0FBTztBQUNQO0FBQ0EsT0FBTyx5REFBVztBQUNsQjtBQUNBO0FBQ0EsVUFBVSx5REFBVztBQUNyQjtBQUNBLFFBQVE7QUFDUixrQkFBa0IsaUVBQW1CLGdDQUFnQyx1QkFBdUI7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsaUVBQW1CLHNDQUFzQyw2QkFBNkI7QUFDNUksaUJBQWlCLDJFQUFZO0FBQzdCO0FBQ0E7QUFDQSw0QkFBNEIsc0VBQU87QUFDbkMsaUNBQWlDLDJFQUFZO0FBQzdDO0FBQ0EsNEJBQTRCLFFBQVE7QUFDcEM7QUFDQTtBQUNBLG1CQUFtQixvQ0FBb0M7QUFDdkQsK0JBQStCLHdEQUF3RDtBQUN2RixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS9pbnRlcmZhY2Uvc2VydmVyLWludGVyZmFjZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvaW50ZXJmYWNlL3NlcnZlci1pbnRlcmZhY2UudHNcbmltcG9ydCB7IGRlY3J5cHRWYWx1ZSwgZW5jcnlwdFZhbHVlLCBoYXNoS2V5IH0gZnJvbSBcIi4uL2hlbHBlcnMvdmF1bHQvY2xpZW50LXNpZGUuanNcIjtcbmltcG9ydCB7IEtub3duRXJyb3JzIH0gZnJvbSBcIi4uL2tub3duLWVycm9ycy5qc1wiO1xuaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciB9IGZyb20gXCIuLi91dGlscy9lcnJvcnMuanNcIjtcbmltcG9ydCB7IGZpbHRlclVuZGVmaW5lZCB9IGZyb20gXCIuLi91dGlscy9vYmplY3RzLmpzXCI7XG5pbXBvcnQgeyBSZXN1bHQgfSBmcm9tIFwiLi4vdXRpbHMvcmVzdWx0cy5qc1wiO1xuaW1wb3J0IHsgdXJsU3RyaW5nIH0gZnJvbSBcIi4uL3V0aWxzL3VybHMuanNcIjtcbmltcG9ydCB7XG4gIFN0YWNrQ2xpZW50SW50ZXJmYWNlXG59IGZyb20gXCIuL2NsaWVudC1pbnRlcmZhY2UuanNcIjtcbnZhciBTdGFja1NlcnZlckludGVyZmFjZSA9IGNsYXNzIGV4dGVuZHMgU3RhY2tDbGllbnRJbnRlcmZhY2Uge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgc3VwZXIob3B0aW9ucyk7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuICBhc3luYyBzZW5kU2VydmVyUmVxdWVzdChwYXRoLCBvcHRpb25zLCBzZXNzaW9uLCByZXF1ZXN0VHlwZSA9IFwic2VydmVyXCIpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5zZW5kQ2xpZW50UmVxdWVzdChcbiAgICAgIHBhdGgsXG4gICAgICB7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIngtc3RhY2stc2VjcmV0LXNlcnZlci1rZXlcIjogXCJzZWNyZXRTZXJ2ZXJLZXlcIiBpbiB0aGlzLm9wdGlvbnMgPyB0aGlzLm9wdGlvbnMuc2VjcmV0U2VydmVyS2V5IDogXCJcIixcbiAgICAgICAgICAuLi5vcHRpb25zLmhlYWRlcnNcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNlc3Npb24sXG4gICAgICByZXF1ZXN0VHlwZVxuICAgICk7XG4gIH1cbiAgYXN5bmMgc2VuZFNlcnZlclJlcXVlc3RBbmRDYXRjaEtub3duRXJyb3IocGF0aCwgcmVxdWVzdE9wdGlvbnMsIHRva2VuU3RvcmVPck51bGwsIGVycm9yc1RvQ2F0Y2gpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIFJlc3VsdC5vayhhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KHBhdGgsIHJlcXVlc3RPcHRpb25zLCB0b2tlblN0b3JlT3JOdWxsKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgZm9yIChjb25zdCBlcnJvclR5cGUgb2YgZXJyb3JzVG9DYXRjaCkge1xuICAgICAgICBpZiAoZXJyb3JUeXBlLmlzSW5zdGFuY2UoZSkpIHtcbiAgICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgfVxuICBhc3luYyBjcmVhdGVTZXJ2ZXJVc2VyKGRhdGEpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXG4gICAgICBcIi91c2Vyc1wiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIGdldFNlcnZlclVzZXJCeVRva2VuKHNlc3Npb24pIHtcbiAgICBjb25zdCByZXNwb25zZU9yRXJyb3IgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFxuICAgICAgXCIvdXNlcnMvbWVcIixcbiAgICAgIHt9LFxuICAgICAgc2Vzc2lvbixcbiAgICAgIFtLbm93bkVycm9ycy5DYW5ub3RHZXRPd25Vc2VyV2l0aG91dFVzZXJdXG4gICAgKTtcbiAgICBpZiAocmVzcG9uc2VPckVycm9yLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICBpZiAoS25vd25FcnJvcnMuQ2Fubm90R2V0T3duVXNlcldpdGhvdXRVc2VyLmlzSW5zdGFuY2UocmVzcG9uc2VPckVycm9yLmVycm9yKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiVW5leHBlY3RlZCB1bmNhdWdodCBlcnJvclwiLCB7IGNhdXNlOiByZXNwb25zZU9yRXJyb3IuZXJyb3IgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJlc3BvbnNlID0gcmVzcG9uc2VPckVycm9yLmRhdGE7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICBpZiAoIXVzZXIpIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiVXNlciBlbmRwb2ludCByZXR1cm5lZCBudWxsOyB0aGlzIHNob3VsZCBuZXZlciBoYXBwZW5cIik7XG4gICAgcmV0dXJuIHVzZXI7XG4gIH1cbiAgYXN5bmMgZ2V0U2VydmVyVXNlckJ5SWQodXNlcklkKSB7XG4gICAgY29uc3QgcmVzcG9uc2VPckVycm9yID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcbiAgICAgIHVybFN0cmluZ2AvdXNlcnMvJHt1c2VySWR9YCxcbiAgICAgIHt9LFxuICAgICAgbnVsbCxcbiAgICAgIFtLbm93bkVycm9ycy5Vc2VyTm90Rm91bmRdXG4gICAgKTtcbiAgICBpZiAocmVzcG9uc2VPckVycm9yLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHJlc3BvbnNlT3JFcnJvci5lcnJvcik7XG4gICAgfVxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCByZXNwb25zZU9yRXJyb3IuZGF0YS5qc29uKCk7XG4gICAgcmV0dXJuIFJlc3VsdC5vayh1c2VyKTtcbiAgfVxuICBhc3luYyBsaXN0U2VydmVyVGVhbUludml0YXRpb25zKG9wdGlvbnMpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXG4gICAgICB1cmxTdHJpbmdgL3RlYW0taW52aXRhdGlvbnM/dGVhbV9pZD0ke29wdGlvbnMudGVhbUlkfWAsXG4gICAgICB7fSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4gcmVzdWx0Lml0ZW1zO1xuICB9XG4gIGFzeW5jIHJldm9rZVNlcnZlclRlYW1JbnZpdGF0aW9uKGludml0YXRpb25JZCwgdGVhbUlkKSB7XG4gICAgYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIHVybFN0cmluZ2AvdGVhbS1pbnZpdGF0aW9ucy8ke2ludml0YXRpb25JZH0/dGVhbV9pZD0ke3RlYW1JZH1gLFxuICAgICAgeyBtZXRob2Q6IFwiREVMRVRFXCIgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICB9XG4gIGFzeW5jIGxpc3RTZXJ2ZXJUZWFtTWVtYmVyUHJvZmlsZXMob3B0aW9ucykge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIHVybFN0cmluZ2AvdGVhbS1tZW1iZXItcHJvZmlsZXM/dGVhbV9pZD0ke29wdGlvbnMudGVhbUlkfWAsXG4gICAgICB7fSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4gcmVzdWx0Lml0ZW1zO1xuICB9XG4gIGFzeW5jIGdldFNlcnZlclRlYW1NZW1iZXJQcm9maWxlKG9wdGlvbnMpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXG4gICAgICB1cmxTdHJpbmdgL3RlYW0tbWVtYmVyLXByb2ZpbGVzLyR7b3B0aW9ucy50ZWFtSWR9LyR7b3B0aW9ucy51c2VySWR9YCxcbiAgICAgIHt9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBsaXN0U2VydmVyVGVhbVBlcm1pc3Npb25zKG9wdGlvbnMsIHNlc3Npb24pIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXG4gICAgICBgL3RlYW0tcGVybWlzc2lvbnM/JHtuZXcgVVJMU2VhcmNoUGFyYW1zKGZpbHRlclVuZGVmaW5lZCh7XG4gICAgICAgIHVzZXJfaWQ6IG9wdGlvbnMudXNlcklkLFxuICAgICAgICB0ZWFtX2lkOiBvcHRpb25zLnRlYW1JZCxcbiAgICAgICAgcmVjdXJzaXZlOiBvcHRpb25zLnJlY3Vyc2l2ZS50b1N0cmluZygpXG4gICAgICB9KSl9YCxcbiAgICAgIHt9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiByZXN1bHQuaXRlbXM7XG4gIH1cbiAgYXN5bmMgbGlzdFNlcnZlclByb2plY3RQZXJtaXNzaW9ucyhvcHRpb25zLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgYC9wcm9qZWN0LXBlcm1pc3Npb25zPyR7bmV3IFVSTFNlYXJjaFBhcmFtcyhmaWx0ZXJVbmRlZmluZWQoe1xuICAgICAgICB1c2VyX2lkOiBvcHRpb25zLnVzZXJJZCxcbiAgICAgICAgcmVjdXJzaXZlOiBvcHRpb25zLnJlY3Vyc2l2ZS50b1N0cmluZygpXG4gICAgICB9KSl9YCxcbiAgICAgIHt9LFxuICAgICAgc2Vzc2lvblxuICAgICk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiByZXN1bHQuaXRlbXM7XG4gIH1cbiAgYXN5bmMgbGlzdFNlcnZlclVzZXJzKG9wdGlvbnMpIHtcbiAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGZpbHRlclVuZGVmaW5lZCh7XG4gICAgICBjdXJzb3I6IG9wdGlvbnMuY3Vyc29yLFxuICAgICAgbGltaXQ6IG9wdGlvbnMubGltaXQ/LnRvU3RyaW5nKCksXG4gICAgICBkZXNjOiBvcHRpb25zLmRlc2M/LnRvU3RyaW5nKCksXG4gICAgICAuLi5vcHRpb25zLm9yZGVyQnkgPyB7XG4gICAgICAgIG9yZGVyX2J5OiB7XG4gICAgICAgICAgc2lnbmVkVXBBdDogXCJzaWduZWRfdXBfYXRcIlxuICAgICAgICB9W29wdGlvbnMub3JkZXJCeV1cbiAgICAgIH0gOiB7fSxcbiAgICAgIC4uLm9wdGlvbnMucXVlcnkgPyB7XG4gICAgICAgIHF1ZXJ5OiBvcHRpb25zLnF1ZXJ5XG4gICAgICB9IDoge30sXG4gICAgICAuLi5vcHRpb25zLmluY2x1ZGVBbm9ueW1vdXMgPyB7XG4gICAgICAgIGluY2x1ZGVfYW5vbnltb3VzOiBcInRydWVcIlxuICAgICAgfSA6IHt9XG4gICAgfSkpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcIi91c2Vycz9cIiArIHNlYXJjaFBhcmFtcy50b1N0cmluZygpLCB7fSwgbnVsbCk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBsaXN0U2VydmVyVGVhbXMob3B0aW9ucykge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIGAvdGVhbXM/JHtuZXcgVVJMU2VhcmNoUGFyYW1zKGZpbHRlclVuZGVmaW5lZCh7XG4gICAgICAgIHVzZXJfaWQ6IG9wdGlvbnM/LnVzZXJJZFxuICAgICAgfSkpfWAsXG4gICAgICB7fSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4gcmVzdWx0Lml0ZW1zO1xuICB9XG4gIGFzeW5jIGdldFNlcnZlclRlYW0odGVhbUlkKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgYC90ZWFtcy8ke3RlYW1JZH1gLFxuICAgICAge30sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIGxpc3RTZXJ2ZXJUZWFtVXNlcnModGVhbUlkKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KGAvdXNlcnM/dGVhbV9pZD0ke3RlYW1JZH1gLCB7fSwgbnVsbCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIHJldHVybiByZXN1bHQuaXRlbXM7XG4gIH1cbiAgLyogd2hlbiBwYXNzaW5nIGEgc2Vzc2lvbiwgdGhlIHVzZXIgd2lsbCBiZSBhZGRlZCB0byB0aGUgdGVhbSAqL1xuICBhc3luYyBjcmVhdGVTZXJ2ZXJUZWFtKGRhdGEpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXG4gICAgICBcIi90ZWFtc1wiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIHVwZGF0ZVNlcnZlclRlYW0odGVhbUlkLCBkYXRhKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgdXJsU3RyaW5nYC90ZWFtcy8ke3RlYW1JZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBkZWxldGVTZXJ2ZXJUZWFtKHRlYW1JZCkge1xuICAgIGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXG4gICAgICB1cmxTdHJpbmdgL3RlYW1zLyR7dGVhbUlkfWAsXG4gICAgICB7IG1ldGhvZDogXCJERUxFVEVcIiB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gIH1cbiAgYXN5bmMgYWRkU2VydmVyVXNlclRvVGVhbShvcHRpb25zKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgdXJsU3RyaW5nYC90ZWFtLW1lbWJlcnNoaXBzLyR7b3B0aW9ucy50ZWFtSWR9LyR7b3B0aW9ucy51c2VySWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHt9KVxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIH1cbiAgYXN5bmMgcmVtb3ZlU2VydmVyVXNlckZyb21UZWFtKG9wdGlvbnMpIHtcbiAgICBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgdXJsU3RyaW5nYC90ZWFtLW1lbWJlcnNoaXBzLyR7b3B0aW9ucy50ZWFtSWR9LyR7b3B0aW9ucy51c2VySWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe30pXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlU2VydmVyVXNlcih1c2VySWQsIHVwZGF0ZSkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIHVybFN0cmluZ2AvdXNlcnMvJHt1c2VySWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh1cGRhdGUpXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBjcmVhdGVTZXJ2ZXJQcm92aWRlckFjY2Vzc1Rva2VuKHVzZXJJZCwgcHJvdmlkZXIsIHNjb3BlKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgdXJsU3RyaW5nYC9jb25uZWN0ZWQtYWNjb3VudHMvJHt1c2VySWR9LyR7cHJvdmlkZXJ9L2FjY2Vzcy10b2tlbmAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHNjb3BlIH0pXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBjcmVhdGVTZXJ2ZXJVc2VyU2Vzc2lvbih1c2VySWQsIGV4cGlyZXNJbk1pbGxpcywgaXNJbXBlcnNvbmF0aW9uKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgXCIvYXV0aC9zZXNzaW9uc1wiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgICAgICBleHBpcmVzX2luX21pbGxpczogZXhwaXJlc0luTWlsbGlzLFxuICAgICAgICAgIGlzX2ltcGVyc29uYXRpb246IGlzSW1wZXJzb25hdGlvblxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4ge1xuICAgICAgYWNjZXNzVG9rZW46IHJlc3VsdC5hY2Nlc3NfdG9rZW4sXG4gICAgICByZWZyZXNoVG9rZW46IHJlc3VsdC5yZWZyZXNoX3Rva2VuXG4gICAgfTtcbiAgfVxuICBhc3luYyBsZWF2ZVNlcnZlclRlYW0ob3B0aW9ucykge1xuICAgIGF3YWl0IHRoaXMuc2VuZENsaWVudFJlcXVlc3QoXG4gICAgICB1cmxTdHJpbmdgL3RlYW0tbWVtYmVyc2hpcHMvJHtvcHRpb25zLnRlYW1JZH0vJHtvcHRpb25zLnVzZXJJZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7fSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuICBhc3luYyB1cGRhdGVTZXJ2ZXJUZWFtTWVtYmVyUHJvZmlsZShvcHRpb25zKSB7XG4gICAgYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIHVybFN0cmluZ2AvdGVhbS1tZW1iZXItcHJvZmlsZXMvJHtvcHRpb25zLnRlYW1JZH0vJHtvcHRpb25zLnVzZXJJZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMucHJvZmlsZSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuICBhc3luYyBncmFudFNlcnZlclRlYW1Vc2VyUGVybWlzc2lvbih0ZWFtSWQsIHVzZXJJZCwgcGVybWlzc2lvbklkKSB7XG4gICAgYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIHVybFN0cmluZ2AvdGVhbS1wZXJtaXNzaW9ucy8ke3RlYW1JZH0vJHt1c2VySWR9LyR7cGVybWlzc2lvbklkfWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7fSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuICBhc3luYyBncmFudFNlcnZlclByb2plY3RQZXJtaXNzaW9uKHVzZXJJZCwgcGVybWlzc2lvbklkKSB7XG4gICAgYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIHVybFN0cmluZ2AvcHJvamVjdC1wZXJtaXNzaW9ucy8ke3VzZXJJZH0vJHtwZXJtaXNzaW9uSWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHt9KVxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICB9XG4gIGFzeW5jIHJldm9rZVNlcnZlclRlYW1Vc2VyUGVybWlzc2lvbih0ZWFtSWQsIHVzZXJJZCwgcGVybWlzc2lvbklkKSB7XG4gICAgYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIHVybFN0cmluZ2AvdGVhbS1wZXJtaXNzaW9ucy8ke3RlYW1JZH0vJHt1c2VySWR9LyR7cGVybWlzc2lvbklkfWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHt9KVxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICB9XG4gIGFzeW5jIHJldm9rZVNlcnZlclByb2plY3RQZXJtaXNzaW9uKHVzZXJJZCwgcGVybWlzc2lvbklkKSB7XG4gICAgYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIHVybFN0cmluZ2AvcHJvamVjdC1wZXJtaXNzaW9ucy8ke3VzZXJJZH0vJHtwZXJtaXNzaW9uSWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe30pXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gIH1cbiAgYXN5bmMgZGVsZXRlU2VydmVyVXNlcih1c2VySWQpIHtcbiAgICBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgdXJsU3RyaW5nYC91c2Vycy8ke3VzZXJJZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7fSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuICBhc3luYyBjcmVhdGVTZXJ2ZXJDb250YWN0Q2hhbm5lbChkYXRhKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgXCIvY29udGFjdC1jaGFubmVsc1wiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIHVwZGF0ZVNlcnZlckNvbnRhY3RDaGFubmVsKHVzZXJJZCwgY29udGFjdENoYW5uZWxJZCwgZGF0YSkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIHVybFN0cmluZ2AvY29udGFjdC1jaGFubmVscy8ke3VzZXJJZH0vJHtjb250YWN0Q2hhbm5lbElkfWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIGRlbGV0ZVNlcnZlckNvbnRhY3RDaGFubmVsKHVzZXJJZCwgY29udGFjdENoYW5uZWxJZCkge1xuICAgIGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXG4gICAgICB1cmxTdHJpbmdgL2NvbnRhY3QtY2hhbm5lbHMvJHt1c2VySWR9LyR7Y29udGFjdENoYW5uZWxJZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCJcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuICBhc3luYyBsaXN0U2VydmVyQ29udGFjdENoYW5uZWxzKHVzZXJJZCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIHVybFN0cmluZ2AvY29udGFjdC1jaGFubmVscz91c2VyX2lkPSR7dXNlcklkfWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJHRVRcIlxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIGpzb24uaXRlbXM7XG4gIH1cbiAgYXN5bmMgbGlzdFNlcnZlck5vdGlmaWNhdGlvbkNhdGVnb3JpZXModXNlcklkKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgdXJsU3RyaW5nYC9lbWFpbHMvbm90aWZpY2F0aW9uLXByZWZlcmVuY2UvJHt1c2VySWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkdFVFwiXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4ganNvbi5pdGVtcztcbiAgfVxuICBhc3luYyBzZXRTZXJ2ZXJOb3RpZmljYXRpb25zRW5hYmxlZCh1c2VySWQsIG5vdGlmaWNhdGlvbkNhdGVnb3J5SWQsIGVuYWJsZWQpIHtcbiAgICBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgdXJsU3RyaW5nYC9lbWFpbHMvbm90aWZpY2F0aW9uLXByZWZlcmVuY2UvJHt1c2VySWR9LyR7bm90aWZpY2F0aW9uQ2F0ZWdvcnlJZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBlbmFibGVkXG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gIH1cbiAgYXN5bmMgc2VuZFNlcnZlckNvbnRhY3RDaGFubmVsVmVyaWZpY2F0aW9uRW1haWwodXNlcklkLCBjb250YWN0Q2hhbm5lbElkLCBjYWxsYmFja1VybCkge1xuICAgIGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXG4gICAgICB1cmxTdHJpbmdgL2NvbnRhY3QtY2hhbm5lbHMvJHt1c2VySWR9LyR7Y29udGFjdENoYW5uZWxJZH0vc2VuZC12ZXJpZmljYXRpb24tY29kZWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGNhbGxiYWNrX3VybDogY2FsbGJhY2tVcmwgfSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuICBhc3luYyBsaXN0U2VydmVyU2Vzc2lvbnModXNlcklkKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgdXJsU3RyaW5nYC9hdXRoL3Nlc3Npb25zP3VzZXJfaWQ9JHt1c2VySWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkdFVFwiXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBkZWxldGVTZXJ2ZXJTZXNzaW9uKHNlc3Npb25JZCkge1xuICAgIGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXG4gICAgICB1cmxTdHJpbmdgL2F1dGgvc2Vzc2lvbnMvJHtzZXNzaW9uSWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gIH1cbiAgYXN5bmMgc2VuZFNlcnZlclRlYW1JbnZpdGF0aW9uKG9wdGlvbnMpIHtcbiAgICBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgXCIvdGVhbS1pbnZpdGF0aW9ucy9zZW5kLWNvZGVcIixcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBlbWFpbDogb3B0aW9ucy5lbWFpbCxcbiAgICAgICAgICB0ZWFtX2lkOiBvcHRpb25zLnRlYW1JZCxcbiAgICAgICAgICBjYWxsYmFja191cmw6IG9wdGlvbnMuY2FsbGJhY2tVcmxcbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuICBhc3luYyB1cGRhdGVQYXNzd29yZChvcHRpb25zKSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdEFuZENhdGNoS25vd25FcnJvcihcbiAgICAgIFwiL2F1dGgvcGFzc3dvcmQvdXBkYXRlXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgb2xkX3Bhc3N3b3JkOiBvcHRpb25zLm9sZFBhc3N3b3JkLFxuICAgICAgICAgIG5ld19wYXNzd29yZDogb3B0aW9ucy5uZXdQYXNzd29yZFxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICAgIG51bGwsXG4gICAgICBbS25vd25FcnJvcnMuUGFzc3dvcmRDb25maXJtYXRpb25NaXNtYXRjaCwgS25vd25FcnJvcnMuUGFzc3dvcmRSZXF1aXJlbWVudHNOb3RNZXRdXG4gICAgKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICByZXR1cm4gcmVzLmVycm9yO1xuICAgIH1cbiAgfVxuICAvLyBPQXV0aCBQcm92aWRlcnMgQ1JVRCBvcGVyYXRpb25zXG4gIGFzeW5jIGNyZWF0ZVNlcnZlck9BdXRoUHJvdmlkZXIoZGF0YSkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIFwiL29hdXRoLXByb3ZpZGVyc1wiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICB9XG4gIGFzeW5jIGxpc3RTZXJ2ZXJPQXV0aFByb3ZpZGVycyhvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBxdWVyeVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoZmlsdGVyVW5kZWZpbmVkKG9wdGlvbnMpKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXG4gICAgICBgL29hdXRoLXByb3ZpZGVycyR7cXVlcnlQYXJhbXMudG9TdHJpbmcoKSA/IGA/JHtxdWVyeVBhcmFtcy50b1N0cmluZygpfWAgOiBcIlwifWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJHRVRcIlxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICByZXR1cm4gcmVzdWx0Lml0ZW1zO1xuICB9XG4gIGFzeW5jIHVwZGF0ZVNlcnZlck9BdXRoUHJvdmlkZXIodXNlcklkLCBwcm92aWRlcklkLCBkYXRhKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgdXJsU3RyaW5nYC9vYXV0aC1wcm92aWRlcnMvJHt1c2VySWR9LyR7cHJvdmlkZXJJZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBkZWxldGVTZXJ2ZXJPQXV0aFByb3ZpZGVyKHVzZXJJZCwgcHJvdmlkZXJJZCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kU2VydmVyUmVxdWVzdChcbiAgICAgIHVybFN0cmluZ2Avb2F1dGgtcHJvdmlkZXJzLyR7dXNlcklkfS8ke3Byb3ZpZGVySWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiXG4gICAgICB9LFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfVxuICBhc3luYyBzZW5kRW1haWwob3B0aW9ucykge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXG4gICAgICBcIi9lbWFpbHMvc2VuZC1lbWFpbFwiLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHVzZXJfaWRzOiBvcHRpb25zLnVzZXJJZHMsXG4gICAgICAgICAgYWxsX3VzZXJzOiBvcHRpb25zLmFsbFVzZXJzLFxuICAgICAgICAgIHRoZW1lX2lkOiBvcHRpb25zLnRoZW1lSWQsXG4gICAgICAgICAgaHRtbDogb3B0aW9ucy5odG1sLFxuICAgICAgICAgIHN1YmplY3Q6IG9wdGlvbnMuc3ViamVjdCxcbiAgICAgICAgICBub3RpZmljYXRpb25fY2F0ZWdvcnlfbmFtZTogb3B0aW9ucy5ub3RpZmljYXRpb25DYXRlZ29yeU5hbWUsXG4gICAgICAgICAgdGVtcGxhdGVfaWQ6IG9wdGlvbnMudGVtcGxhdGVJZCxcbiAgICAgICAgICB2YXJpYWJsZXM6IG9wdGlvbnMudmFyaWFibGVzLFxuICAgICAgICAgIGRyYWZ0X2lkOiBvcHRpb25zLmRyYWZ0SWRcbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gUmVzdWx0Lm9rKHZvaWQgMCk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlSXRlbVF1YW50aXR5KG9wdGlvbnMsIGRhdGEpIHtcbiAgICBsZXQgY3VzdG9tZXJUeXBlO1xuICAgIGxldCBjdXN0b21lcklkO1xuICAgIGNvbnN0IGl0ZW1JZCA9IG9wdGlvbnMuaXRlbUlkO1xuICAgIGlmIChcInVzZXJJZFwiIGluIG9wdGlvbnMpIHtcbiAgICAgIGN1c3RvbWVyVHlwZSA9IFwidXNlclwiO1xuICAgICAgY3VzdG9tZXJJZCA9IG9wdGlvbnMudXNlcklkO1xuICAgIH0gZWxzZSBpZiAoXCJ0ZWFtSWRcIiBpbiBvcHRpb25zKSB7XG4gICAgICBjdXN0b21lclR5cGUgPSBcInRlYW1cIjtcbiAgICAgIGN1c3RvbWVySWQgPSBvcHRpb25zLnRlYW1JZDtcbiAgICB9IGVsc2UgaWYgKFwiY3VzdG9tQ3VzdG9tZXJJZFwiIGluIG9wdGlvbnMpIHtcbiAgICAgIGN1c3RvbWVyVHlwZSA9IFwiY3VzdG9tXCI7XG4gICAgICBjdXN0b21lcklkID0gb3B0aW9ucy5jdXN0b21DdXN0b21lcklkO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcInVwZGF0ZUl0ZW1RdWFudGl0eSByZXF1aXJlcyBvbmUgb2YgdXNlcklkLCB0ZWFtSWQsIG9yIGN1c3RvbUN1c3RvbWVySWRcIik7XG4gICAgfVxuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7IGFsbG93X25lZ2F0aXZlOiAoZGF0YS5hbGxvd19uZWdhdGl2ZSA/PyBmYWxzZSkudG9TdHJpbmcoKSB9KTtcbiAgICBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0KFxuICAgICAgYC9wYXltZW50cy9pdGVtcy8ke2N1c3RvbWVyVHlwZX0vJHtjdXN0b21lcklkfS8ke2l0ZW1JZH0vdXBkYXRlLXF1YW50aXR5PyR7cXVlcnlQYXJhbXMudG9TdHJpbmcoKX1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7IFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgZGVsdGE6IGRhdGEuZGVsdGEsIGV4cGlyZXNfYXQ6IGRhdGEuZXhwaXJlc19hdCwgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24gfSlcbiAgICAgIH0sXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuICBhc3luYyBnZXREYXRhVmF1bHRTdG9yZVZhbHVlKHNlY3JldCwgc3RvcmVJZCwga2V5KSB7XG4gICAgY29uc3QgaGFzaGVkS2V5ID0gYXdhaXQgaGFzaEtleShzZWNyZXQsIGtleSk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRTZXJ2ZXJSZXF1ZXN0QW5kQ2F0Y2hLbm93bkVycm9yKFxuICAgICAgYC9kYXRhLXZhdWx0L3N0b3Jlcy8ke3N0b3JlSWR9L2dldGAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHsgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBoYXNoZWRfa2V5OiBoYXNoZWRLZXkgfSlcbiAgICAgIH0sXG4gICAgICBudWxsLFxuICAgICAgW0tub3duRXJyb3JzLkRhdGFWYXVsdFN0b3JlSGFzaGVkS2V5RG9lc05vdEV4aXN0XVxuICAgICk7XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XG4gICAgICBpZiAoS25vd25FcnJvcnMuRGF0YVZhdWx0U3RvcmVIYXNoZWRLZXlEb2VzTm90RXhpc3QuaXNJbnN0YW5jZShyZXNwb25zZS5lcnJvcikpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIlVuZXhwZWN0ZWQgdW5jYXVnaHQgZXJyb3JcIiwgeyBjYXVzZTogcmVzcG9uc2UuZXJyb3IgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXNwb25zZS5kYXRhLmpzb24oKTtcbiAgICBjb25zdCBlbmNyeXB0ZWRWYWx1ZSA9IGpzb24uZW5jcnlwdGVkX3ZhbHVlO1xuICAgIGlmICh0eXBlb2YgZW5jcnlwdGVkVmFsdWUgIT09IFwic3RyaW5nXCIpIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiZW5jcnlwdGVkX3ZhbHVlIGlzIG5vdCBhIHN0cmluZ1wiLCB7IHR5cGU6IHR5cGVvZiBlbmNyeXB0ZWRWYWx1ZSB9KTtcbiAgICByZXR1cm4gYXdhaXQgZGVjcnlwdFZhbHVlKHNlY3JldCwga2V5LCBlbmNyeXB0ZWRWYWx1ZSk7XG4gIH1cbiAgYXN5bmMgc2V0RGF0YVZhdWx0U3RvcmVWYWx1ZShzZWNyZXQsIHN0b3JlSWQsIGtleSwgdmFsdWUpIHtcbiAgICBjb25zdCBoYXNoZWRLZXkgPSBhd2FpdCBoYXNoS2V5KHNlY3JldCwga2V5KTtcbiAgICBjb25zdCBlbmNyeXB0ZWRWYWx1ZSA9IGF3YWl0IGVuY3J5cHRWYWx1ZShzZWNyZXQsIGtleSwgdmFsdWUpO1xuICAgIGF3YWl0IHRoaXMuc2VuZFNlcnZlclJlcXVlc3QoXG4gICAgICBgL2RhdGEtdmF1bHQvc3RvcmVzLyR7c3RvcmVJZH0vc2V0YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczogeyBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGhhc2hlZF9rZXk6IGhhc2hlZEtleSwgZW5jcnlwdGVkX3ZhbHVlOiBlbmNyeXB0ZWRWYWx1ZSB9KVxuICAgICAgfSxcbiAgICAgIG51bGxcbiAgICApO1xuICB9XG59O1xuZXhwb3J0IHtcbiAgU3RhY2tTZXJ2ZXJJbnRlcmZhY2Vcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXJ2ZXItaW50ZXJmYWNlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/interface/server-interface.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/known-errors.js":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/known-errors.js ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KnownError: () => (/* binding */ KnownError),\n/* harmony export */   KnownErrors: () => (/* binding */ KnownErrors)\n/* harmony export */ });\n/* harmony import */ var _utils_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/errors.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n/* harmony import */ var _utils_functions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/functions.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/functions.js\");\n/* harmony import */ var _utils_strings_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/strings.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/strings.js\");\n// src/known-errors.tsx\n\n\n\nvar KnownError = class extends _utils_errors_js__WEBPACK_IMPORTED_MODULE_0__.StatusError {\n  constructor(statusCode, humanReadableMessage, details) {\n    super(\n      statusCode,\n      humanReadableMessage\n    );\n    this.statusCode = statusCode;\n    this.humanReadableMessage = humanReadableMessage;\n    this.details = details;\n    this.__stackKnownErrorBrand = \"stack-known-error-brand-sentinel\";\n    this.name = \"KnownError\";\n  }\n  static isKnownError(error) {\n    return typeof error === \"object\" && error !== null && \"__stackKnownErrorBrand\" in error && error.__stackKnownErrorBrand === \"stack-known-error-brand-sentinel\";\n  }\n  getBody() {\n    return new TextEncoder().encode(JSON.stringify(this.toDescriptiveJson(), void 0, 2));\n  }\n  getHeaders() {\n    return {\n      \"Content-Type\": [\"application/json; charset=utf-8\"],\n      \"X-Stack-Known-Error\": [this.errorCode]\n    };\n  }\n  toDescriptiveJson() {\n    return {\n      code: this.errorCode,\n      ...this.details ? { details: this.details } : {},\n      error: this.humanReadableMessage\n    };\n  }\n  get errorCode() {\n    return this.constructor.errorCode ?? (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_0__.throwErr)(`Can't find error code for this KnownError. Is its constructor a KnownErrorConstructor? ${this}`);\n  }\n  static constructorArgsFromJson(json) {\n    return [\n      400,\n      json.message,\n      json\n    ];\n  }\n  static fromJson(json) {\n    for (const [_, KnownErrorType] of Object.entries(KnownErrors)) {\n      if (json.code === KnownErrorType.prototype.errorCode) {\n        const constructorArgs = KnownErrorType.constructorArgsFromJson(json);\n        return new KnownErrorType(\n          ...constructorArgs\n        );\n      }\n    }\n    throw new Error(`Unknown KnownError code. You may need to update your version of Stack to see more detailed information. ${json.code}: ${json.message}`);\n  }\n};\nvar knownErrorConstructorErrorCodeSentinel = Symbol(\"knownErrorConstructorErrorCodeSentinel\");\nfunction createKnownErrorConstructor(SuperClass, errorCode, create, constructorArgsFromJson) {\n  const createFn = create === \"inherit\" ? _utils_functions_js__WEBPACK_IMPORTED_MODULE_1__.identityArgs : create;\n  const constructorArgsFromJsonFn = constructorArgsFromJson === \"inherit\" ? SuperClass.constructorArgsFromJson : constructorArgsFromJson;\n  class KnownErrorImpl extends SuperClass {\n    constructor(...args) {\n      super(...createFn(...args));\n      this.name = `KnownError<${errorCode}>`;\n      this.constructorArgs = args;\n    }\n    static constructorArgsFromJson(json) {\n      return constructorArgsFromJsonFn(json.details);\n    }\n    static isInstance(error) {\n      if (!KnownError.isKnownError(error)) return false;\n      let current = error;\n      while (true) {\n        current = Object.getPrototypeOf(current);\n        if (!current) break;\n        if (\"errorCode\" in current.constructor && current.constructor.errorCode === errorCode) return true;\n      }\n      return false;\n    }\n  }\n  KnownErrorImpl.errorCode = errorCode;\n  ;\n  return KnownErrorImpl;\n}\nvar UnsupportedError = createKnownErrorConstructor(\n  KnownError,\n  \"UNSUPPORTED_ERROR\",\n  (originalErrorCode) => [\n    500,\n    `An error occurred that is not currently supported (possibly because it was added in a version of Stack that is newer than this client). The original unsupported error code was: ${originalErrorCode}`,\n    {\n      originalErrorCode\n    }\n  ],\n  (json) => [\n    json?.originalErrorCode ?? (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"originalErrorCode not found in UnsupportedError details\")\n  ]\n);\nvar BodyParsingError = createKnownErrorConstructor(\n  KnownError,\n  \"BODY_PARSING_ERROR\",\n  (message) => [\n    400,\n    message\n  ],\n  (json) => [json.message]\n);\nvar SchemaError = createKnownErrorConstructor(\n  KnownError,\n  \"SCHEMA_ERROR\",\n  (message) => [\n    400,\n    message || (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"SchemaError requires a message\"),\n    {\n      message\n    }\n  ],\n  (json) => [json.message]\n);\nvar AllOverloadsFailed = createKnownErrorConstructor(\n  KnownError,\n  \"ALL_OVERLOADS_FAILED\",\n  (overloadErrors) => [\n    400,\n    (0,_utils_strings_js__WEBPACK_IMPORTED_MODULE_2__.deindent)`\n      This endpoint has multiple overloads, but they all failed to process the request.\n\n        ${overloadErrors.map((e, i) => (0,_utils_strings_js__WEBPACK_IMPORTED_MODULE_2__.deindent)`\n          Overload ${i + 1}: ${JSON.stringify(e, void 0, 2)}\n        `).join(\"\\n\\n\")}\n    `,\n    {\n      overload_errors: overloadErrors\n    }\n  ],\n  (json) => [\n    json?.overload_errors ?? (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"overload_errors not found in AllOverloadsFailed details\")\n  ]\n);\nvar ProjectAuthenticationError = createKnownErrorConstructor(\n  KnownError,\n  \"PROJECT_AUTHENTICATION_ERROR\",\n  \"inherit\",\n  \"inherit\"\n);\nvar InvalidProjectAuthentication = createKnownErrorConstructor(\n  ProjectAuthenticationError,\n  \"INVALID_PROJECT_AUTHENTICATION\",\n  \"inherit\",\n  \"inherit\"\n);\nvar ProjectKeyWithoutAccessType = createKnownErrorConstructor(\n  InvalidProjectAuthentication,\n  \"PROJECT_KEY_WITHOUT_ACCESS_TYPE\",\n  () => [\n    400,\n    \"Either an API key or an admin access token was provided, but the x-stack-access-type header is missing. Set it to 'client', 'server', or 'admin' as appropriate.\"\n  ],\n  () => []\n);\nvar InvalidAccessType = createKnownErrorConstructor(\n  InvalidProjectAuthentication,\n  \"INVALID_ACCESS_TYPE\",\n  (accessType) => [\n    400,\n    `The x-stack-access-type header must be 'client', 'server', or 'admin', but was '${accessType}'.`\n  ],\n  (json) => [\n    json?.accessType ?? (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"accessType not found in InvalidAccessType details\")\n  ]\n);\nvar AccessTypeWithoutProjectId = createKnownErrorConstructor(\n  InvalidProjectAuthentication,\n  \"ACCESS_TYPE_WITHOUT_PROJECT_ID\",\n  (accessType) => [\n    400,\n    (0,_utils_strings_js__WEBPACK_IMPORTED_MODULE_2__.deindent)`\n      The x-stack-access-type header was '${accessType}', but the x-stack-project-id header was not provided.\n      \n      For more information, see the docs on REST API authentication: https://docs.stack-auth.com/rest-api/overview#authentication\n    `,\n    {\n      request_type: accessType\n    }\n  ],\n  (json) => [json.request_type]\n);\nvar AccessTypeRequired = createKnownErrorConstructor(\n  InvalidProjectAuthentication,\n  \"ACCESS_TYPE_REQUIRED\",\n  () => [\n    400,\n    (0,_utils_strings_js__WEBPACK_IMPORTED_MODULE_2__.deindent)`\n      You must specify an access level for this Stack project. Make sure project API keys are provided (eg. x-stack-publishable-client-key) and you set the x-stack-access-type header to 'client', 'server', or 'admin'.\n      \n      For more information, see the docs on REST API authentication: https://docs.stack-auth.com/rest-api/overview#authentication\n    `\n  ],\n  () => []\n);\nvar InsufficientAccessType = createKnownErrorConstructor(\n  InvalidProjectAuthentication,\n  \"INSUFFICIENT_ACCESS_TYPE\",\n  (actualAccessType, allowedAccessTypes) => [\n    401,\n    `The x-stack-access-type header must be ${allowedAccessTypes.map((s) => `'${s}'`).join(\" or \")}, but was '${actualAccessType}'.`,\n    {\n      actual_access_type: actualAccessType,\n      allowed_access_types: allowedAccessTypes\n    }\n  ],\n  (json) => [\n    json.actual_access_type,\n    json.allowed_access_types\n  ]\n);\nvar InvalidPublishableClientKey = createKnownErrorConstructor(\n  InvalidProjectAuthentication,\n  \"INVALID_PUBLISHABLE_CLIENT_KEY\",\n  (projectId) => [\n    401,\n    `The publishable key is not valid for the project ${JSON.stringify(projectId)}. Does the project and/or the key exist?`,\n    {\n      project_id: projectId\n    }\n  ],\n  (json) => [json.project_id]\n);\nvar InvalidSecretServerKey = createKnownErrorConstructor(\n  InvalidProjectAuthentication,\n  \"INVALID_SECRET_SERVER_KEY\",\n  (projectId) => [\n    401,\n    `The secret server key is not valid for the project ${JSON.stringify(projectId)}. Does the project and/or the key exist?`,\n    {\n      project_id: projectId\n    }\n  ],\n  (json) => [json.project_id]\n);\nvar InvalidSuperSecretAdminKey = createKnownErrorConstructor(\n  InvalidProjectAuthentication,\n  \"INVALID_SUPER_SECRET_ADMIN_KEY\",\n  (projectId) => [\n    401,\n    `The super secret admin key is not valid for the project ${JSON.stringify(projectId)}. Does the project and/or the key exist?`,\n    {\n      project_id: projectId\n    }\n  ],\n  (json) => [json.project_id]\n);\nvar InvalidAdminAccessToken = createKnownErrorConstructor(\n  InvalidProjectAuthentication,\n  \"INVALID_ADMIN_ACCESS_TOKEN\",\n  \"inherit\",\n  \"inherit\"\n);\nvar UnparsableAdminAccessToken = createKnownErrorConstructor(\n  InvalidAdminAccessToken,\n  \"UNPARSABLE_ADMIN_ACCESS_TOKEN\",\n  () => [\n    401,\n    \"Admin access token is not parsable.\"\n  ],\n  () => []\n);\nvar AdminAccessTokenExpired = createKnownErrorConstructor(\n  InvalidAdminAccessToken,\n  \"ADMIN_ACCESS_TOKEN_EXPIRED\",\n  (expiredAt) => [\n    401,\n    `Admin access token has expired. Please refresh it and try again.${expiredAt ? ` (The access token expired at ${expiredAt.toISOString()}.)` : \"\"}`,\n    { expired_at_millis: expiredAt?.getTime() ?? null }\n  ],\n  (json) => [json.expired_at_millis ?? void 0]\n);\nvar InvalidProjectForAdminAccessToken = createKnownErrorConstructor(\n  InvalidAdminAccessToken,\n  \"INVALID_PROJECT_FOR_ADMIN_ACCESS_TOKEN\",\n  () => [\n    401,\n    \"Admin access tokens must be created on the internal project.\"\n  ],\n  () => []\n);\nvar AdminAccessTokenIsNotAdmin = createKnownErrorConstructor(\n  InvalidAdminAccessToken,\n  \"ADMIN_ACCESS_TOKEN_IS_NOT_ADMIN\",\n  () => [\n    401,\n    \"Admin access token does not have the required permissions to access this project.\"\n  ],\n  () => []\n);\nvar ProjectAuthenticationRequired = createKnownErrorConstructor(\n  ProjectAuthenticationError,\n  \"PROJECT_AUTHENTICATION_REQUIRED\",\n  \"inherit\",\n  \"inherit\"\n);\nvar ClientAuthenticationRequired = createKnownErrorConstructor(\n  ProjectAuthenticationRequired,\n  \"CLIENT_AUTHENTICATION_REQUIRED\",\n  () => [\n    401,\n    \"The publishable client key must be provided.\"\n  ],\n  () => []\n);\nvar ServerAuthenticationRequired = createKnownErrorConstructor(\n  ProjectAuthenticationRequired,\n  \"SERVER_AUTHENTICATION_REQUIRED\",\n  () => [\n    401,\n    \"The secret server key must be provided.\"\n  ],\n  () => []\n);\nvar ClientOrServerAuthenticationRequired = createKnownErrorConstructor(\n  ProjectAuthenticationRequired,\n  \"CLIENT_OR_SERVER_AUTHENTICATION_REQUIRED\",\n  () => [\n    401,\n    \"Either the publishable client key or the secret server key must be provided.\"\n  ],\n  () => []\n);\nvar ClientOrAdminAuthenticationRequired = createKnownErrorConstructor(\n  ProjectAuthenticationRequired,\n  \"CLIENT_OR_ADMIN_AUTHENTICATION_REQUIRED\",\n  () => [\n    401,\n    \"Either the publishable client key or the super secret admin key must be provided.\"\n  ],\n  () => []\n);\nvar ClientOrServerOrAdminAuthenticationRequired = createKnownErrorConstructor(\n  ProjectAuthenticationRequired,\n  \"CLIENT_OR_SERVER_OR_ADMIN_AUTHENTICATION_REQUIRED\",\n  () => [\n    401,\n    \"Either the publishable client key, the secret server key, or the super secret admin key must be provided.\"\n  ],\n  () => []\n);\nvar AdminAuthenticationRequired = createKnownErrorConstructor(\n  ProjectAuthenticationRequired,\n  \"ADMIN_AUTHENTICATION_REQUIRED\",\n  () => [\n    401,\n    \"The super secret admin key must be provided.\"\n  ],\n  () => []\n);\nvar ExpectedInternalProject = createKnownErrorConstructor(\n  ProjectAuthenticationError,\n  \"EXPECTED_INTERNAL_PROJECT\",\n  () => [\n    401,\n    \"The project ID is expected to be internal.\"\n  ],\n  () => []\n);\nvar SessionAuthenticationError = createKnownErrorConstructor(\n  KnownError,\n  \"SESSION_AUTHENTICATION_ERROR\",\n  \"inherit\",\n  \"inherit\"\n);\nvar InvalidSessionAuthentication = createKnownErrorConstructor(\n  SessionAuthenticationError,\n  \"INVALID_SESSION_AUTHENTICATION\",\n  \"inherit\",\n  \"inherit\"\n);\nvar InvalidAccessToken = createKnownErrorConstructor(\n  InvalidSessionAuthentication,\n  \"INVALID_ACCESS_TOKEN\",\n  \"inherit\",\n  \"inherit\"\n);\nvar UnparsableAccessToken = createKnownErrorConstructor(\n  InvalidAccessToken,\n  \"UNPARSABLE_ACCESS_TOKEN\",\n  () => [\n    401,\n    \"Access token is not parsable.\"\n  ],\n  () => []\n);\nvar AccessTokenExpired = createKnownErrorConstructor(\n  InvalidAccessToken,\n  \"ACCESS_TOKEN_EXPIRED\",\n  (expiredAt) => [\n    401,\n    `Access token has expired. Please refresh it and try again.${expiredAt ? ` (The access token expired at ${expiredAt.toISOString()}.)` : \"\"}`,\n    { expired_at_millis: expiredAt?.getTime() ?? null }\n  ],\n  (json) => [json.expired_at_millis ? new Date(json.expired_at_millis) : void 0]\n);\nvar InvalidProjectForAccessToken = createKnownErrorConstructor(\n  InvalidAccessToken,\n  \"INVALID_PROJECT_FOR_ACCESS_TOKEN\",\n  (expectedProjectId, actualProjectId) => [\n    401,\n    `Access token not valid for this project. Expected project ID ${JSON.stringify(expectedProjectId)}, but the token is for project ID ${JSON.stringify(actualProjectId)}.`,\n    {\n      expected_project_id: expectedProjectId,\n      actual_project_id: actualProjectId\n    }\n  ],\n  (json) => [json.expected_project_id, json.actual_project_id]\n);\nvar RefreshTokenError = createKnownErrorConstructor(\n  KnownError,\n  \"REFRESH_TOKEN_ERROR\",\n  \"inherit\",\n  \"inherit\"\n);\nvar RefreshTokenNotFoundOrExpired = createKnownErrorConstructor(\n  RefreshTokenError,\n  \"REFRESH_TOKEN_NOT_FOUND_OR_EXPIRED\",\n  () => [\n    401,\n    \"Refresh token not found for this project, or the session has expired/been revoked.\"\n  ],\n  () => []\n);\nvar CannotDeleteCurrentSession = createKnownErrorConstructor(\n  RefreshTokenError,\n  \"CANNOT_DELETE_CURRENT_SESSION\",\n  () => [\n    400,\n    \"Cannot delete the current session.\"\n  ],\n  () => []\n);\nvar ProviderRejected = createKnownErrorConstructor(\n  RefreshTokenError,\n  \"PROVIDER_REJECTED\",\n  () => [\n    401,\n    \"The provider refused to refresh their token. This usually means that the provider used to authenticate the user no longer regards this session as valid, and the user must re-authenticate.\"\n  ],\n  () => []\n);\nvar UserWithEmailAlreadyExists = createKnownErrorConstructor(\n  KnownError,\n  \"USER_EMAIL_ALREADY_EXISTS\",\n  (email, wouldWorkIfEmailWasVerified = false) => [\n    409,\n    `A user with email ${JSON.stringify(email)} already exists${wouldWorkIfEmailWasVerified ? \" but the email is not verified. Please login to your existing account with the method you used to sign up, and then verify your email to sign in with this login method.\" : \".\"}`,\n    {\n      email,\n      would_work_if_email_was_verified: wouldWorkIfEmailWasVerified\n    }\n  ],\n  (json) => [json.email, json.would_work_if_email_was_verified ?? false]\n);\nvar EmailNotVerified = createKnownErrorConstructor(\n  KnownError,\n  \"EMAIL_NOT_VERIFIED\",\n  () => [\n    400,\n    \"The email is not verified.\"\n  ],\n  () => []\n);\nvar CannotGetOwnUserWithoutUser = createKnownErrorConstructor(\n  KnownError,\n  \"CANNOT_GET_OWN_USER_WITHOUT_USER\",\n  () => [\n    400,\n    \"You have specified 'me' as a userId, but did not provide authentication for a user.\"\n  ],\n  () => []\n);\nvar UserIdDoesNotExist = createKnownErrorConstructor(\n  KnownError,\n  \"USER_ID_DOES_NOT_EXIST\",\n  (userId) => [\n    400,\n    `The given user with the ID ${userId} does not exist.`,\n    {\n      user_id: userId\n    }\n  ],\n  (json) => [json.user_id]\n);\nvar UserNotFound = createKnownErrorConstructor(\n  KnownError,\n  \"USER_NOT_FOUND\",\n  () => [\n    404,\n    \"User not found.\"\n  ],\n  () => []\n);\nvar ProjectNotFound = createKnownErrorConstructor(\n  KnownError,\n  \"PROJECT_NOT_FOUND\",\n  (projectId) => {\n    if (typeof projectId !== \"string\") throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"projectId of KnownErrors.ProjectNotFound must be a string\");\n    return [\n      404,\n      `Project ${projectId} not found or is not accessible with the current user.`,\n      {\n        project_id: projectId\n      }\n    ];\n  },\n  (json) => [json.project_id]\n);\nvar CurrentProjectNotFound = createKnownErrorConstructor(\n  KnownError,\n  \"CURRENT_PROJECT_NOT_FOUND\",\n  (projectId) => [\n    400,\n    `The current project with ID ${projectId} was not found. Please check the value of the x-stack-project-id header.`,\n    {\n      project_id: projectId\n    }\n  ],\n  (json) => [json.project_id]\n);\nvar BranchDoesNotExist = createKnownErrorConstructor(\n  KnownError,\n  \"BRANCH_DOES_NOT_EXIST\",\n  (branchId) => [\n    400,\n    `The branch with ID ${branchId} does not exist.`,\n    {\n      branch_id: branchId\n    }\n  ],\n  (json) => [json.branch_id]\n);\nvar SignUpNotEnabled = createKnownErrorConstructor(\n  KnownError,\n  \"SIGN_UP_NOT_ENABLED\",\n  () => [\n    400,\n    \"Creation of new accounts is not enabled for this project. Please ask the project owner to enable it.\"\n  ],\n  () => []\n);\nvar PasswordAuthenticationNotEnabled = createKnownErrorConstructor(\n  KnownError,\n  \"PASSWORD_AUTHENTICATION_NOT_ENABLED\",\n  () => [\n    400,\n    \"Password authentication is not enabled for this project.\"\n  ],\n  () => []\n);\nvar DataVaultStoreDoesNotExist = createKnownErrorConstructor(\n  KnownError,\n  \"DATA_VAULT_STORE_DOES_NOT_EXIST\",\n  (storeId) => [\n    400,\n    `Data vault store with ID ${storeId} does not exist.`,\n    {\n      store_id: storeId\n    }\n  ],\n  (json) => [json.store_id]\n);\nvar DataVaultStoreHashedKeyDoesNotExist = createKnownErrorConstructor(\n  KnownError,\n  \"DATA_VAULT_STORE_HASHED_KEY_DOES_NOT_EXIST\",\n  (storeId, hashedKey) => [\n    400,\n    `Data vault store with ID ${storeId} does not contain a key with hash ${hashedKey}.`,\n    {\n      store_id: storeId,\n      hashed_key: hashedKey\n    }\n  ],\n  (json) => [json.store_id, json.hashed_key]\n);\nvar PasskeyAuthenticationNotEnabled = createKnownErrorConstructor(\n  KnownError,\n  \"PASSKEY_AUTHENTICATION_NOT_ENABLED\",\n  () => [\n    400,\n    \"Passkey authentication is not enabled for this project.\"\n  ],\n  () => []\n);\nvar AnonymousAccountsNotEnabled = createKnownErrorConstructor(\n  KnownError,\n  \"ANONYMOUS_ACCOUNTS_NOT_ENABLED\",\n  () => [\n    400,\n    \"Anonymous accounts are not enabled for this project.\"\n  ],\n  () => []\n);\nvar AnonymousAuthenticationNotAllowed = createKnownErrorConstructor(\n  KnownError,\n  \"ANONYMOUS_AUTHENTICATION_NOT_ALLOWED\",\n  () => [\n    401,\n    \"X-Stack-Access-Token is for an anonymous user, but anonymous users are not enabled. Set the X-Stack-Allow-Anonymous-User header of this request to 'true' to allow anonymous users.\"\n  ],\n  () => []\n);\nvar EmailPasswordMismatch = createKnownErrorConstructor(\n  KnownError,\n  \"EMAIL_PASSWORD_MISMATCH\",\n  () => [\n    400,\n    \"Wrong e-mail or password.\"\n  ],\n  () => []\n);\nvar RedirectUrlNotWhitelisted = createKnownErrorConstructor(\n  KnownError,\n  \"REDIRECT_URL_NOT_WHITELISTED\",\n  () => [\n    400,\n    \"Redirect URL not whitelisted. Did you forget to add this domain to the trusted domains list on the Stack Auth dashboard?\"\n  ],\n  () => []\n);\nvar PasswordRequirementsNotMet = createKnownErrorConstructor(\n  KnownError,\n  \"PASSWORD_REQUIREMENTS_NOT_MET\",\n  \"inherit\",\n  \"inherit\"\n);\nvar PasswordTooShort = createKnownErrorConstructor(\n  PasswordRequirementsNotMet,\n  \"PASSWORD_TOO_SHORT\",\n  (minLength) => [\n    400,\n    `Password too short. Minimum length is ${minLength}.`,\n    {\n      min_length: minLength\n    }\n  ],\n  (json) => [\n    json?.min_length ?? (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"min_length not found in PasswordTooShort details\")\n  ]\n);\nvar PasswordTooLong = createKnownErrorConstructor(\n  PasswordRequirementsNotMet,\n  \"PASSWORD_TOO_LONG\",\n  (maxLength) => [\n    400,\n    `Password too long. Maximum length is ${maxLength}.`,\n    {\n      maxLength\n    }\n  ],\n  (json) => [\n    json?.maxLength ?? (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_0__.throwErr)(\"maxLength not found in PasswordTooLong details\")\n  ]\n);\nvar UserDoesNotHavePassword = createKnownErrorConstructor(\n  KnownError,\n  \"USER_DOES_NOT_HAVE_PASSWORD\",\n  () => [\n    400,\n    \"This user does not have password authentication enabled.\"\n  ],\n  () => []\n);\nvar VerificationCodeError = createKnownErrorConstructor(\n  KnownError,\n  \"VERIFICATION_ERROR\",\n  \"inherit\",\n  \"inherit\"\n);\nvar VerificationCodeNotFound = createKnownErrorConstructor(\n  VerificationCodeError,\n  \"VERIFICATION_CODE_NOT_FOUND\",\n  () => [\n    404,\n    \"The verification code does not exist for this project.\"\n  ],\n  () => []\n);\nvar VerificationCodeExpired = createKnownErrorConstructor(\n  VerificationCodeError,\n  \"VERIFICATION_CODE_EXPIRED\",\n  () => [\n    400,\n    \"The verification code has expired.\"\n  ],\n  () => []\n);\nvar VerificationCodeAlreadyUsed = createKnownErrorConstructor(\n  VerificationCodeError,\n  \"VERIFICATION_CODE_ALREADY_USED\",\n  () => [\n    409,\n    \"The verification link has already been used.\"\n  ],\n  () => []\n);\nvar VerificationCodeMaxAttemptsReached = createKnownErrorConstructor(\n  VerificationCodeError,\n  \"VERIFICATION_CODE_MAX_ATTEMPTS_REACHED\",\n  () => [\n    400,\n    \"The verification code nonce has reached the maximum number of attempts. This code is not valid anymore.\"\n  ],\n  () => []\n);\nvar PasswordConfirmationMismatch = createKnownErrorConstructor(\n  KnownError,\n  \"PASSWORD_CONFIRMATION_MISMATCH\",\n  () => [\n    400,\n    \"Passwords do not match.\"\n  ],\n  () => []\n);\nvar EmailAlreadyVerified = createKnownErrorConstructor(\n  KnownError,\n  \"EMAIL_ALREADY_VERIFIED\",\n  () => [\n    409,\n    \"The e-mail is already verified.\"\n  ],\n  () => []\n);\nvar EmailNotAssociatedWithUser = createKnownErrorConstructor(\n  KnownError,\n  \"EMAIL_NOT_ASSOCIATED_WITH_USER\",\n  () => [\n    400,\n    \"The e-mail is not associated with a user that could log in with that e-mail.\"\n  ],\n  () => []\n);\nvar EmailIsNotPrimaryEmail = createKnownErrorConstructor(\n  KnownError,\n  \"EMAIL_IS_NOT_PRIMARY_EMAIL\",\n  (email, primaryEmail) => [\n    400,\n    `The given e-mail (${email}) must equal the user's primary e-mail (${primaryEmail}).`,\n    {\n      email,\n      primary_email: primaryEmail\n    }\n  ],\n  (json) => [json.email, json.primary_email]\n);\nvar PasskeyRegistrationFailed = createKnownErrorConstructor(\n  KnownError,\n  \"PASSKEY_REGISTRATION_FAILED\",\n  (message) => [\n    400,\n    message\n  ],\n  (json) => [json.message]\n);\nvar PasskeyWebAuthnError = createKnownErrorConstructor(\n  KnownError,\n  \"PASSKEY_WEBAUTHN_ERROR\",\n  (message, code) => [\n    400,\n    message,\n    {\n      message,\n      code\n    }\n  ],\n  (json) => [json.message, json.code]\n);\nvar PasskeyAuthenticationFailed = createKnownErrorConstructor(\n  KnownError,\n  \"PASSKEY_AUTHENTICATION_FAILED\",\n  (message) => [\n    400,\n    message\n  ],\n  (json) => [json.message]\n);\nvar PermissionNotFound = createKnownErrorConstructor(\n  KnownError,\n  \"PERMISSION_NOT_FOUND\",\n  (permissionId) => [\n    404,\n    `Permission \"${permissionId}\" not found. Make sure you created it on the dashboard.`,\n    {\n      permission_id: permissionId\n    }\n  ],\n  (json) => [json.permission_id]\n);\nvar PermissionScopeMismatch = createKnownErrorConstructor(\n  KnownError,\n  \"WRONG_PERMISSION_SCOPE\",\n  (permissionId, expectedScope, actualScope) => [\n    404,\n    `Permission ${JSON.stringify(permissionId)} not found. (It was found for a different scope ${JSON.stringify(actualScope)}, but scope ${JSON.stringify(expectedScope)} was expected.)`,\n    {\n      permission_id: permissionId,\n      expected_scope: expectedScope,\n      actual_scope: actualScope\n    }\n  ],\n  (json) => [json.permission_id, json.expected_scope, json.actual_scope]\n);\nvar ContainedPermissionNotFound = createKnownErrorConstructor(\n  KnownError,\n  \"CONTAINED_PERMISSION_NOT_FOUND\",\n  (permissionId) => [\n    400,\n    `Contained permission with ID \"${permissionId}\" not found. Make sure you created it on the dashboard.`,\n    {\n      permission_id: permissionId\n    }\n  ],\n  (json) => [json.permission_id]\n);\nvar TeamNotFound = createKnownErrorConstructor(\n  KnownError,\n  \"TEAM_NOT_FOUND\",\n  (teamId) => [\n    404,\n    `Team ${teamId} not found.`,\n    {\n      team_id: teamId\n    }\n  ],\n  (json) => [json.team_id]\n);\nvar TeamAlreadyExists = createKnownErrorConstructor(\n  KnownError,\n  \"TEAM_ALREADY_EXISTS\",\n  (teamId) => [\n    409,\n    `Team ${teamId} already exists.`,\n    {\n      team_id: teamId\n    }\n  ],\n  (json) => [json.team_id]\n);\nvar TeamMembershipNotFound = createKnownErrorConstructor(\n  KnownError,\n  \"TEAM_MEMBERSHIP_NOT_FOUND\",\n  (teamId, userId) => [\n    404,\n    `User ${userId} is not found in team ${teamId}.`,\n    {\n      team_id: teamId,\n      user_id: userId\n    }\n  ],\n  (json) => [json.team_id, json.user_id]\n);\nvar EmailTemplateAlreadyExists = createKnownErrorConstructor(\n  KnownError,\n  \"EMAIL_TEMPLATE_ALREADY_EXISTS\",\n  () => [\n    409,\n    \"Email template already exists.\"\n  ],\n  () => []\n);\nvar OAuthConnectionNotConnectedToUser = createKnownErrorConstructor(\n  KnownError,\n  \"OAUTH_CONNECTION_NOT_CONNECTED_TO_USER\",\n  () => [\n    400,\n    \"The OAuth connection is not connected to any user.\"\n  ],\n  () => []\n);\nvar OAuthConnectionAlreadyConnectedToAnotherUser = createKnownErrorConstructor(\n  KnownError,\n  \"OAUTH_CONNECTION_ALREADY_CONNECTED_TO_ANOTHER_USER\",\n  () => [\n    409,\n    \"The OAuth connection is already connected to another user.\"\n  ],\n  () => []\n);\nvar OAuthConnectionDoesNotHaveRequiredScope = createKnownErrorConstructor(\n  KnownError,\n  \"OAUTH_CONNECTION_DOES_NOT_HAVE_REQUIRED_SCOPE\",\n  () => [\n    400,\n    \"The OAuth connection does not have the required scope.\"\n  ],\n  () => []\n);\nvar OAuthExtraScopeNotAvailableWithSharedOAuthKeys = createKnownErrorConstructor(\n  KnownError,\n  \"OAUTH_EXTRA_SCOPE_NOT_AVAILABLE_WITH_SHARED_OAUTH_KEYS\",\n  () => [\n    400,\n    \"Extra scopes are not available with shared OAuth keys. Please add your own OAuth keys on the Stack dashboard to use extra scopes.\"\n  ],\n  () => []\n);\nvar OAuthAccessTokenNotAvailableWithSharedOAuthKeys = createKnownErrorConstructor(\n  KnownError,\n  \"OAUTH_ACCESS_TOKEN_NOT_AVAILABLE_WITH_SHARED_OAUTH_KEYS\",\n  () => [\n    400,\n    \"Access tokens are not available with shared OAuth keys. Please add your own OAuth keys on the Stack dashboard to use access tokens.\"\n  ],\n  () => []\n);\nvar InvalidOAuthClientIdOrSecret = createKnownErrorConstructor(\n  KnownError,\n  \"INVALID_OAUTH_CLIENT_ID_OR_SECRET\",\n  (clientId) => [\n    400,\n    \"The OAuth client ID or secret is invalid. The client ID must be equal to the project ID (potentially with a hash and a branch ID), and the client secret must be a publishable client key.\",\n    {\n      client_id: clientId ?? null\n    }\n  ],\n  (json) => [json.client_id ?? void 0]\n);\nvar InvalidScope = createKnownErrorConstructor(\n  KnownError,\n  \"INVALID_SCOPE\",\n  (scope) => [\n    400,\n    `The scope \"${scope}\" is not a valid OAuth scope for Stack.`\n  ],\n  (json) => [json.scope]\n);\nvar UserAlreadyConnectedToAnotherOAuthConnection = createKnownErrorConstructor(\n  KnownError,\n  \"USER_ALREADY_CONNECTED_TO_ANOTHER_OAUTH_CONNECTION\",\n  () => [\n    409,\n    \"The user is already connected to another OAuth account. Did you maybe selected the wrong account?\"\n  ],\n  () => []\n);\nvar OuterOAuthTimeout = createKnownErrorConstructor(\n  KnownError,\n  \"OUTER_OAUTH_TIMEOUT\",\n  () => [\n    408,\n    \"The OAuth flow has timed out. Please sign in again.\"\n  ],\n  () => []\n);\nvar OAuthProviderNotFoundOrNotEnabled = createKnownErrorConstructor(\n  KnownError,\n  \"OAUTH_PROVIDER_NOT_FOUND_OR_NOT_ENABLED\",\n  () => [\n    400,\n    \"The OAuth provider is not found or not enabled.\"\n  ],\n  () => []\n);\nvar OAuthProviderAccountIdAlreadyUsedForSignIn = createKnownErrorConstructor(\n  KnownError,\n  \"OAUTH_PROVIDER_ACCOUNT_ID_ALREADY_USED_FOR_SIGN_IN\",\n  () => [\n    400,\n    `A provider with the same account ID is already used for signing in.`\n  ],\n  () => []\n);\nvar MultiFactorAuthenticationRequired = createKnownErrorConstructor(\n  KnownError,\n  \"MULTI_FACTOR_AUTHENTICATION_REQUIRED\",\n  (attemptCode) => [\n    400,\n    `Multi-factor authentication is required for this user.`,\n    {\n      attempt_code: attemptCode\n    }\n  ],\n  (json) => [json.attempt_code]\n);\nvar InvalidTotpCode = createKnownErrorConstructor(\n  KnownError,\n  \"INVALID_TOTP_CODE\",\n  () => [\n    400,\n    \"The TOTP code is invalid. Please try again.\"\n  ],\n  () => []\n);\nvar UserAuthenticationRequired = createKnownErrorConstructor(\n  KnownError,\n  \"USER_AUTHENTICATION_REQUIRED\",\n  () => [\n    401,\n    \"User authentication required for this endpoint.\"\n  ],\n  () => []\n);\nvar TeamMembershipAlreadyExists = createKnownErrorConstructor(\n  KnownError,\n  \"TEAM_MEMBERSHIP_ALREADY_EXISTS\",\n  () => [\n    409,\n    \"Team membership already exists.\"\n  ],\n  () => []\n);\nvar ProjectPermissionRequired = createKnownErrorConstructor(\n  KnownError,\n  \"PROJECT_PERMISSION_REQUIRED\",\n  (userId, permissionId) => [\n    401,\n    `User ${userId} does not have permission ${permissionId}.`,\n    {\n      user_id: userId,\n      permission_id: permissionId\n    }\n  ],\n  (json) => [json.user_id, json.permission_id]\n);\nvar TeamPermissionRequired = createKnownErrorConstructor(\n  KnownError,\n  \"TEAM_PERMISSION_REQUIRED\",\n  (teamId, userId, permissionId) => [\n    401,\n    `User ${userId} does not have permission ${permissionId} in team ${teamId}.`,\n    {\n      team_id: teamId,\n      user_id: userId,\n      permission_id: permissionId\n    }\n  ],\n  (json) => [json.team_id, json.user_id, json.permission_id]\n);\nvar TeamPermissionNotFound = createKnownErrorConstructor(\n  KnownError,\n  \"TEAM_PERMISSION_NOT_FOUND\",\n  (teamId, userId, permissionId) => [\n    401,\n    `User ${userId} does not have permission ${permissionId} in team ${teamId}.`,\n    {\n      team_id: teamId,\n      user_id: userId,\n      permission_id: permissionId\n    }\n  ],\n  (json) => [json.team_id, json.user_id, json.permission_id]\n);\nvar InvalidSharedOAuthProviderId = createKnownErrorConstructor(\n  KnownError,\n  \"INVALID_SHARED_OAUTH_PROVIDER_ID\",\n  (providerId) => [\n    400,\n    `The shared OAuth provider with ID ${providerId} is not valid.`,\n    {\n      provider_id: providerId\n    }\n  ],\n  (json) => [json.provider_id]\n);\nvar InvalidStandardOAuthProviderId = createKnownErrorConstructor(\n  KnownError,\n  \"INVALID_STANDARD_OAUTH_PROVIDER_ID\",\n  (providerId) => [\n    400,\n    `The standard OAuth provider with ID ${providerId} is not valid.`,\n    {\n      provider_id: providerId\n    }\n  ],\n  (json) => [json.provider_id]\n);\nvar InvalidAuthorizationCode = createKnownErrorConstructor(\n  KnownError,\n  \"INVALID_AUTHORIZATION_CODE\",\n  () => [\n    400,\n    \"The given authorization code is invalid.\"\n  ],\n  () => []\n);\nvar OAuthProviderAccessDenied = createKnownErrorConstructor(\n  KnownError,\n  \"OAUTH_PROVIDER_ACCESS_DENIED\",\n  () => [\n    400,\n    \"The OAuth provider denied access to the user.\"\n  ],\n  () => []\n);\nvar ContactChannelAlreadyUsedForAuthBySomeoneElse = createKnownErrorConstructor(\n  KnownError,\n  \"CONTACT_CHANNEL_ALREADY_USED_FOR_AUTH_BY_SOMEONE_ELSE\",\n  (type, contactChannelValue, wouldWorkIfEmailWasVerified = false) => [\n    409,\n    `This ${type} ${contactChannelValue ? `\"(${contactChannelValue})\"` : \"\"} is already used for authentication by another account${wouldWorkIfEmailWasVerified ? \" but the email is not verified. Please login to your existing account with the method you used to sign up, and then verify your email to sign in with this login method.\" : \".\"}`,\n    {\n      type,\n      contact_channel_value: contactChannelValue ?? null,\n      would_work_if_email_was_verified: wouldWorkIfEmailWasVerified\n    }\n  ],\n  (json) => [json.type, json.contact_channel_value, json.would_work_if_email_was_verified ?? false]\n);\nvar InvalidPollingCodeError = createKnownErrorConstructor(\n  KnownError,\n  \"INVALID_POLLING_CODE\",\n  (details) => [\n    400,\n    \"The polling code is invalid or does not exist.\",\n    details\n  ],\n  (json) => [json]\n);\nvar CliAuthError = createKnownErrorConstructor(\n  KnownError,\n  \"CLI_AUTH_ERROR\",\n  (message) => [\n    400,\n    message\n  ],\n  (json) => [json.message]\n);\nvar CliAuthExpiredError = createKnownErrorConstructor(\n  KnownError,\n  \"CLI_AUTH_EXPIRED_ERROR\",\n  (message = \"CLI authentication request expired. Please try again.\") => [\n    400,\n    message\n  ],\n  (json) => [json.message]\n);\nvar CliAuthUsedError = createKnownErrorConstructor(\n  KnownError,\n  \"CLI_AUTH_USED_ERROR\",\n  (message = \"This authentication token has already been used.\") => [\n    400,\n    message\n  ],\n  (json) => [json.message]\n);\nvar ApiKeyNotValid = createKnownErrorConstructor(\n  KnownError,\n  \"API_KEY_NOT_VALID\",\n  \"inherit\",\n  \"inherit\"\n);\nvar ApiKeyExpired = createKnownErrorConstructor(\n  ApiKeyNotValid,\n  \"API_KEY_EXPIRED\",\n  () => [\n    401,\n    \"API key has expired.\"\n  ],\n  () => []\n);\nvar ApiKeyRevoked = createKnownErrorConstructor(\n  ApiKeyNotValid,\n  \"API_KEY_REVOKED\",\n  () => [\n    401,\n    \"API key has been revoked.\"\n  ],\n  () => []\n);\nvar WrongApiKeyType = createKnownErrorConstructor(\n  ApiKeyNotValid,\n  \"WRONG_API_KEY_TYPE\",\n  (expectedType, actualType) => [\n    400,\n    `This endpoint is for ${expectedType} API keys, but a ${actualType} API key was provided.`,\n    { expected_type: expectedType, actual_type: actualType }\n  ],\n  (json) => [json.expected_type, json.actual_type]\n);\nvar ApiKeyNotFound = createKnownErrorConstructor(\n  ApiKeyNotValid,\n  \"API_KEY_NOT_FOUND\",\n  () => [\n    404,\n    \"API key not found.\"\n  ],\n  () => []\n);\nvar PublicApiKeyCannotBeRevoked = createKnownErrorConstructor(\n  ApiKeyNotValid,\n  \"PUBLIC_API_KEY_CANNOT_BE_REVOKED\",\n  () => [\n    400,\n    \"Public API keys cannot be revoked by the secretscanner endpoint.\"\n  ],\n  () => []\n);\nvar PermissionIdAlreadyExists = createKnownErrorConstructor(\n  KnownError,\n  \"PERMISSION_ID_ALREADY_EXISTS\",\n  (permissionId) => [\n    400,\n    `Permission with ID \"${permissionId}\" already exists. Choose a different ID.`,\n    {\n      permission_id: permissionId\n    }\n  ],\n  (json) => [json.permission_id]\n);\nvar EmailRenderingError = createKnownErrorConstructor(\n  KnownError,\n  \"EMAIL_RENDERING_ERROR\",\n  (error) => [\n    400,\n    `Failed to render email with theme: ${error}`,\n    { error }\n  ],\n  (json) => [json.error]\n);\nvar RequiresCustomEmailServer = createKnownErrorConstructor(\n  KnownError,\n  \"REQUIRES_CUSTOM_EMAIL_SERVER\",\n  () => [\n    400,\n    `This action requires a custom SMTP server. Please edit your email server configuration and try again.`\n  ],\n  () => []\n);\nvar ItemNotFound = createKnownErrorConstructor(\n  KnownError,\n  \"ITEM_NOT_FOUND\",\n  (itemId) => [\n    404,\n    `Item with ID \"${itemId}\" not found.`,\n    {\n      item_id: itemId\n    }\n  ],\n  (json) => [json.item_id]\n);\nvar ItemCustomerTypeDoesNotMatch = createKnownErrorConstructor(\n  KnownError,\n  \"ITEM_CUSTOMER_TYPE_DOES_NOT_MATCH\",\n  (itemId, customerId, itemCustomerType, actualCustomerType) => [\n    400,\n    `The ${actualCustomerType} with ID ${JSON.stringify(customerId)} is not a valid customer for the item with ID ${JSON.stringify(itemId)}. ${itemCustomerType ? `The item is configured to only be available for ${itemCustomerType} customers, but the customer is a ${actualCustomerType}.` : `The item is missing a customer type field. Please make sure it is set up correctly in your project configuration.`}`,\n    {\n      item_id: itemId,\n      customer_id: customerId,\n      item_customer_type: itemCustomerType ?? null,\n      actual_customer_type: actualCustomerType\n    }\n  ],\n  (json) => [json.item_id, json.customer_id, json.item_customer_type ?? void 0, json.actual_customer_type]\n);\nvar CustomerDoesNotExist = createKnownErrorConstructor(\n  KnownError,\n  \"CUSTOMER_DOES_NOT_EXIST\",\n  (customerId) => [\n    400,\n    `Customer with ID ${JSON.stringify(customerId)} does not exist.`,\n    {\n      customer_id: customerId\n    }\n  ],\n  (json) => [json.customer_id]\n);\nvar OfferDoesNotExist = createKnownErrorConstructor(\n  KnownError,\n  \"OFFER_DOES_NOT_EXIST\",\n  (offerId, accessType) => [\n    400,\n    `Offer with ID ${JSON.stringify(offerId)} does not exist${accessType === \"client\" ? \" or you don't have permissions to access it.\" : \".\"}`,\n    {\n      offer_id: offerId,\n      access_type: accessType\n    }\n  ],\n  (json) => [json.offer_id, json.access_type]\n);\nvar OfferCustomerTypeDoesNotMatch = createKnownErrorConstructor(\n  KnownError,\n  \"OFFER_CUSTOMER_TYPE_DOES_NOT_MATCH\",\n  (offerId, customerId, offerCustomerType, actualCustomerType) => [\n    400,\n    `The ${actualCustomerType} with ID ${JSON.stringify(customerId)} is not a valid customer for the inline offer that has been passed in. ${offerCustomerType ? `The offer is configured to only be available for ${offerCustomerType} customers, but the customer is a ${actualCustomerType}.` : `The offer is missing a customer type field. Please make sure it is set up correctly in your project configuration.`}`,\n    {\n      offer_id: offerId ?? null,\n      customer_id: customerId,\n      offer_customer_type: offerCustomerType ?? null,\n      actual_customer_type: actualCustomerType\n    }\n  ],\n  (json) => [json.offer_id ?? void 0, json.customer_id, json.offer_customer_type ?? void 0, json.actual_customer_type]\n);\nvar ItemQuantityInsufficientAmount = createKnownErrorConstructor(\n  KnownError,\n  \"ITEM_QUANTITY_INSUFFICIENT_AMOUNT\",\n  (itemId, customerId, quantity) => [\n    400,\n    `The item with ID ${JSON.stringify(itemId)} has an insufficient quantity for the customer with ID ${JSON.stringify(customerId)}. An attempt was made to charge ${quantity} credits.`,\n    {\n      item_id: itemId,\n      customer_id: customerId,\n      quantity\n    }\n  ],\n  (json) => [json.item_id, json.customer_id, json.quantity]\n);\nvar StripeAccountInfoNotFound = createKnownErrorConstructor(\n  KnownError,\n  \"STRIPE_ACCOUNT_INFO_NOT_FOUND\",\n  () => [\n    404,\n    \"Stripe account information not found. Please make sure the user has onboarded with Stripe.\"\n  ],\n  () => []\n);\nvar WorkflowTokenDoesNotExist = createKnownErrorConstructor(\n  KnownError,\n  \"WORKFLOW_TOKEN_DOES_NOT_EXIST\",\n  () => [\n    400,\n    \"The workflow token you specified does not exist. Make sure the value in x-stack-workflow-token is correct.\"\n  ],\n  () => []\n);\nvar WorkflowTokenExpired = createKnownErrorConstructor(\n  KnownError,\n  \"WORKFLOW_TOKEN_EXPIRED\",\n  () => [\n    400,\n    \"The workflow token you specified has expired. Make sure the value in x-stack-workflow-token is correct.\"\n  ],\n  () => []\n);\nvar KnownErrors = {\n  CannotDeleteCurrentSession,\n  UnsupportedError,\n  BodyParsingError,\n  SchemaError,\n  AllOverloadsFailed,\n  ProjectAuthenticationError,\n  PermissionIdAlreadyExists,\n  CliAuthError,\n  CliAuthExpiredError,\n  CliAuthUsedError,\n  InvalidProjectAuthentication,\n  ProjectKeyWithoutAccessType,\n  InvalidAccessType,\n  AccessTypeWithoutProjectId,\n  AccessTypeRequired,\n  CannotGetOwnUserWithoutUser,\n  InsufficientAccessType,\n  InvalidPublishableClientKey,\n  InvalidSecretServerKey,\n  InvalidSuperSecretAdminKey,\n  InvalidAdminAccessToken,\n  UnparsableAdminAccessToken,\n  AdminAccessTokenExpired,\n  InvalidProjectForAdminAccessToken,\n  AdminAccessTokenIsNotAdmin,\n  ProjectAuthenticationRequired,\n  ClientAuthenticationRequired,\n  ServerAuthenticationRequired,\n  ClientOrServerAuthenticationRequired,\n  ClientOrAdminAuthenticationRequired,\n  ClientOrServerOrAdminAuthenticationRequired,\n  AdminAuthenticationRequired,\n  ExpectedInternalProject,\n  SessionAuthenticationError,\n  InvalidSessionAuthentication,\n  InvalidAccessToken,\n  UnparsableAccessToken,\n  AccessTokenExpired,\n  InvalidProjectForAccessToken,\n  RefreshTokenError,\n  ProviderRejected,\n  RefreshTokenNotFoundOrExpired,\n  UserWithEmailAlreadyExists,\n  EmailNotVerified,\n  UserIdDoesNotExist,\n  UserNotFound,\n  ApiKeyNotFound,\n  PublicApiKeyCannotBeRevoked,\n  ProjectNotFound,\n  CurrentProjectNotFound,\n  BranchDoesNotExist,\n  SignUpNotEnabled,\n  PasswordAuthenticationNotEnabled,\n  PasskeyAuthenticationNotEnabled,\n  AnonymousAccountsNotEnabled,\n  AnonymousAuthenticationNotAllowed,\n  EmailPasswordMismatch,\n  RedirectUrlNotWhitelisted,\n  PasswordRequirementsNotMet,\n  PasswordTooShort,\n  PasswordTooLong,\n  UserDoesNotHavePassword,\n  VerificationCodeError,\n  VerificationCodeNotFound,\n  VerificationCodeExpired,\n  VerificationCodeAlreadyUsed,\n  VerificationCodeMaxAttemptsReached,\n  PasswordConfirmationMismatch,\n  EmailAlreadyVerified,\n  EmailNotAssociatedWithUser,\n  EmailIsNotPrimaryEmail,\n  PasskeyRegistrationFailed,\n  PasskeyWebAuthnError,\n  PasskeyAuthenticationFailed,\n  PermissionNotFound,\n  PermissionScopeMismatch,\n  ContainedPermissionNotFound,\n  TeamNotFound,\n  TeamMembershipNotFound,\n  EmailTemplateAlreadyExists,\n  OAuthConnectionNotConnectedToUser,\n  OAuthConnectionAlreadyConnectedToAnotherUser,\n  OAuthConnectionDoesNotHaveRequiredScope,\n  OAuthExtraScopeNotAvailableWithSharedOAuthKeys,\n  OAuthAccessTokenNotAvailableWithSharedOAuthKeys,\n  InvalidOAuthClientIdOrSecret,\n  InvalidScope,\n  UserAlreadyConnectedToAnotherOAuthConnection,\n  OuterOAuthTimeout,\n  OAuthProviderNotFoundOrNotEnabled,\n  OAuthProviderAccountIdAlreadyUsedForSignIn,\n  MultiFactorAuthenticationRequired,\n  InvalidTotpCode,\n  UserAuthenticationRequired,\n  TeamMembershipAlreadyExists,\n  ProjectPermissionRequired,\n  TeamPermissionRequired,\n  InvalidSharedOAuthProviderId,\n  InvalidStandardOAuthProviderId,\n  InvalidAuthorizationCode,\n  TeamPermissionNotFound,\n  OAuthProviderAccessDenied,\n  ContactChannelAlreadyUsedForAuthBySomeoneElse,\n  InvalidPollingCodeError,\n  ApiKeyNotValid,\n  ApiKeyExpired,\n  ApiKeyRevoked,\n  WrongApiKeyType,\n  EmailRenderingError,\n  RequiresCustomEmailServer,\n  ItemNotFound,\n  ItemCustomerTypeDoesNotMatch,\n  CustomerDoesNotExist,\n  OfferDoesNotExist,\n  OfferCustomerTypeDoesNotMatch,\n  ItemQuantityInsufficientAmount,\n  StripeAccountInfoNotFound,\n  DataVaultStoreDoesNotExist,\n  DataVaultStoreHashedKeyDoesNotExist,\n  WorkflowTokenDoesNotExist,\n  WorkflowTokenExpired\n};\nvar knownErrorCodes = /* @__PURE__ */ new Set();\nfor (const [_, KnownError2] of Object.entries(KnownErrors)) {\n  if (knownErrorCodes.has(KnownError2.errorCode)) {\n    throw new Error(`Duplicate known error code: ${KnownError2.errorCode}`);\n  }\n  knownErrorCodes.add(KnownError2.errorCode);\n}\n\n//# sourceMappingURL=known-errors.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20va25vd24tZXJyb3JzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDK0U7QUFDM0I7QUFDTjtBQUM5QywrQkFBK0IseURBQVc7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHdCQUF3QixJQUFJO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLDBEQUFRLDJGQUEyRixLQUFLO0FBQ2pKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrSEFBK0gsVUFBVSxJQUFJLGFBQWE7QUFDMUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsNkRBQVk7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsVUFBVTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdMQUF3TCxrQkFBa0I7QUFDMU07QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiwwREFBUTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMERBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksMkRBQVE7QUFDWjs7QUFFQSxVQUFVLDZCQUE2QiwyREFBUTtBQUMvQyxxQkFBcUIsTUFBTSxJQUFJO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDBEQUFRO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUZBQXVGLFdBQVc7QUFDbEc7QUFDQTtBQUNBLHdCQUF3QiwwREFBUTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksMkRBQVE7QUFDWiw0Q0FBNEMsV0FBVztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSwyREFBUTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxrQ0FBa0MsRUFBRSxpQkFBaUIsYUFBYSxpQkFBaUI7QUFDakk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELDBCQUEwQjtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELDBCQUEwQjtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELDBCQUEwQjtBQUN6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLDZDQUE2Qyx3QkFBd0IsU0FBUztBQUNySixNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSw2Q0FBNkMsd0JBQXdCLFNBQVM7QUFDL0ksTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRUFBb0Usa0NBQWtDLG9DQUFvQyxnQ0FBZ0M7QUFDMUs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QixnQkFBZ0IsK01BQStNO0FBQy9RO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxRQUFRO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELGlFQUFtQjtBQUNwRTtBQUNBO0FBQ0EsaUJBQWlCLFdBQVc7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsV0FBVztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLFVBQVU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxTQUFTO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsU0FBUyxtQ0FBbUMsVUFBVTtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsVUFBVTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDBEQUFRO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLFVBQVU7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwwREFBUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixNQUFNLDBDQUEwQyxhQUFhO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGFBQWE7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw4QkFBOEIsaURBQWlELDRCQUE0QixjQUFjLCtCQUErQjtBQUMxSztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxhQUFhO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFFBQVE7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksUUFBUTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxRQUFRLHVCQUF1QixPQUFPO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixNQUFNO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFFBQVEsMkJBQTJCLGFBQWE7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxRQUFRLDJCQUEyQixjQUFjLFVBQVUsT0FBTztBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxzQkFBc0I7QUFDekU7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2dmeDJlZGVub2FzaXMvRG93bmxvYWRzL0RldmVsb3BtZW50L0VzcGFkYS9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20va25vd24tZXJyb3JzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9rbm93bi1lcnJvcnMudHN4XG5pbXBvcnQgeyBTdGFja0Fzc2VydGlvbkVycm9yLCBTdGF0dXNFcnJvciwgdGhyb3dFcnIgfSBmcm9tIFwiLi91dGlscy9lcnJvcnMuanNcIjtcbmltcG9ydCB7IGlkZW50aXR5QXJncyB9IGZyb20gXCIuL3V0aWxzL2Z1bmN0aW9ucy5qc1wiO1xuaW1wb3J0IHsgZGVpbmRlbnQgfSBmcm9tIFwiLi91dGlscy9zdHJpbmdzLmpzXCI7XG52YXIgS25vd25FcnJvciA9IGNsYXNzIGV4dGVuZHMgU3RhdHVzRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihzdGF0dXNDb2RlLCBodW1hblJlYWRhYmxlTWVzc2FnZSwgZGV0YWlscykge1xuICAgIHN1cGVyKFxuICAgICAgc3RhdHVzQ29kZSxcbiAgICAgIGh1bWFuUmVhZGFibGVNZXNzYWdlXG4gICAgKTtcbiAgICB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlO1xuICAgIHRoaXMuaHVtYW5SZWFkYWJsZU1lc3NhZ2UgPSBodW1hblJlYWRhYmxlTWVzc2FnZTtcbiAgICB0aGlzLmRldGFpbHMgPSBkZXRhaWxzO1xuICAgIHRoaXMuX19zdGFja0tub3duRXJyb3JCcmFuZCA9IFwic3RhY2sta25vd24tZXJyb3ItYnJhbmQtc2VudGluZWxcIjtcbiAgICB0aGlzLm5hbWUgPSBcIktub3duRXJyb3JcIjtcbiAgfVxuICBzdGF0aWMgaXNLbm93bkVycm9yKGVycm9yKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBlcnJvciA9PT0gXCJvYmplY3RcIiAmJiBlcnJvciAhPT0gbnVsbCAmJiBcIl9fc3RhY2tLbm93bkVycm9yQnJhbmRcIiBpbiBlcnJvciAmJiBlcnJvci5fX3N0YWNrS25vd25FcnJvckJyYW5kID09PSBcInN0YWNrLWtub3duLWVycm9yLWJyYW5kLXNlbnRpbmVsXCI7XG4gIH1cbiAgZ2V0Qm9keSgpIHtcbiAgICByZXR1cm4gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKEpTT04uc3RyaW5naWZ5KHRoaXMudG9EZXNjcmlwdGl2ZUpzb24oKSwgdm9pZCAwLCAyKSk7XG4gIH1cbiAgZ2V0SGVhZGVycygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgXCJDb250ZW50LVR5cGVcIjogW1wiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFwiXSxcbiAgICAgIFwiWC1TdGFjay1Lbm93bi1FcnJvclwiOiBbdGhpcy5lcnJvckNvZGVdXG4gICAgfTtcbiAgfVxuICB0b0Rlc2NyaXB0aXZlSnNvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29kZTogdGhpcy5lcnJvckNvZGUsXG4gICAgICAuLi50aGlzLmRldGFpbHMgPyB7IGRldGFpbHM6IHRoaXMuZGV0YWlscyB9IDoge30sXG4gICAgICBlcnJvcjogdGhpcy5odW1hblJlYWRhYmxlTWVzc2FnZVxuICAgIH07XG4gIH1cbiAgZ2V0IGVycm9yQ29kZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5lcnJvckNvZGUgPz8gdGhyb3dFcnIoYENhbid0IGZpbmQgZXJyb3IgY29kZSBmb3IgdGhpcyBLbm93bkVycm9yLiBJcyBpdHMgY29uc3RydWN0b3IgYSBLbm93bkVycm9yQ29uc3RydWN0b3I/ICR7dGhpc31gKTtcbiAgfVxuICBzdGF0aWMgY29uc3RydWN0b3JBcmdzRnJvbUpzb24oanNvbikge1xuICAgIHJldHVybiBbXG4gICAgICA0MDAsXG4gICAgICBqc29uLm1lc3NhZ2UsXG4gICAgICBqc29uXG4gICAgXTtcbiAgfVxuICBzdGF0aWMgZnJvbUpzb24oanNvbikge1xuICAgIGZvciAoY29uc3QgW18sIEtub3duRXJyb3JUeXBlXSBvZiBPYmplY3QuZW50cmllcyhLbm93bkVycm9ycykpIHtcbiAgICAgIGlmIChqc29uLmNvZGUgPT09IEtub3duRXJyb3JUeXBlLnByb3RvdHlwZS5lcnJvckNvZGUpIHtcbiAgICAgICAgY29uc3QgY29uc3RydWN0b3JBcmdzID0gS25vd25FcnJvclR5cGUuY29uc3RydWN0b3JBcmdzRnJvbUpzb24oanNvbik7XG4gICAgICAgIHJldHVybiBuZXcgS25vd25FcnJvclR5cGUoXG4gICAgICAgICAgLi4uY29uc3RydWN0b3JBcmdzXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBLbm93bkVycm9yIGNvZGUuIFlvdSBtYXkgbmVlZCB0byB1cGRhdGUgeW91ciB2ZXJzaW9uIG9mIFN0YWNrIHRvIHNlZSBtb3JlIGRldGFpbGVkIGluZm9ybWF0aW9uLiAke2pzb24uY29kZX06ICR7anNvbi5tZXNzYWdlfWApO1xuICB9XG59O1xudmFyIGtub3duRXJyb3JDb25zdHJ1Y3RvckVycm9yQ29kZVNlbnRpbmVsID0gU3ltYm9sKFwia25vd25FcnJvckNvbnN0cnVjdG9yRXJyb3JDb2RlU2VudGluZWxcIik7XG5mdW5jdGlvbiBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoU3VwZXJDbGFzcywgZXJyb3JDb2RlLCBjcmVhdGUsIGNvbnN0cnVjdG9yQXJnc0Zyb21Kc29uKSB7XG4gIGNvbnN0IGNyZWF0ZUZuID0gY3JlYXRlID09PSBcImluaGVyaXRcIiA/IGlkZW50aXR5QXJncyA6IGNyZWF0ZTtcbiAgY29uc3QgY29uc3RydWN0b3JBcmdzRnJvbUpzb25GbiA9IGNvbnN0cnVjdG9yQXJnc0Zyb21Kc29uID09PSBcImluaGVyaXRcIiA/IFN1cGVyQ2xhc3MuY29uc3RydWN0b3JBcmdzRnJvbUpzb24gOiBjb25zdHJ1Y3RvckFyZ3NGcm9tSnNvbjtcbiAgY2xhc3MgS25vd25FcnJvckltcGwgZXh0ZW5kcyBTdXBlckNsYXNzIHtcbiAgICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XG4gICAgICBzdXBlciguLi5jcmVhdGVGbiguLi5hcmdzKSk7XG4gICAgICB0aGlzLm5hbWUgPSBgS25vd25FcnJvcjwke2Vycm9yQ29kZX0+YDtcbiAgICAgIHRoaXMuY29uc3RydWN0b3JBcmdzID0gYXJncztcbiAgICB9XG4gICAgc3RhdGljIGNvbnN0cnVjdG9yQXJnc0Zyb21Kc29uKGpzb24pIHtcbiAgICAgIHJldHVybiBjb25zdHJ1Y3RvckFyZ3NGcm9tSnNvbkZuKGpzb24uZGV0YWlscyk7XG4gICAgfVxuICAgIHN0YXRpYyBpc0luc3RhbmNlKGVycm9yKSB7XG4gICAgICBpZiAoIUtub3duRXJyb3IuaXNLbm93bkVycm9yKGVycm9yKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgbGV0IGN1cnJlbnQgPSBlcnJvcjtcbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGN1cnJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoY3VycmVudCk7XG4gICAgICAgIGlmICghY3VycmVudCkgYnJlYWs7XG4gICAgICAgIGlmIChcImVycm9yQ29kZVwiIGluIGN1cnJlbnQuY29uc3RydWN0b3IgJiYgY3VycmVudC5jb25zdHJ1Y3Rvci5lcnJvckNvZGUgPT09IGVycm9yQ29kZSkgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIEtub3duRXJyb3JJbXBsLmVycm9yQ29kZSA9IGVycm9yQ29kZTtcbiAgO1xuICByZXR1cm4gS25vd25FcnJvckltcGw7XG59XG52YXIgVW5zdXBwb3J0ZWRFcnJvciA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJVTlNVUFBPUlRFRF9FUlJPUlwiLFxuICAob3JpZ2luYWxFcnJvckNvZGUpID0+IFtcbiAgICA1MDAsXG4gICAgYEFuIGVycm9yIG9jY3VycmVkIHRoYXQgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgKHBvc3NpYmx5IGJlY2F1c2UgaXQgd2FzIGFkZGVkIGluIGEgdmVyc2lvbiBvZiBTdGFjayB0aGF0IGlzIG5ld2VyIHRoYW4gdGhpcyBjbGllbnQpLiBUaGUgb3JpZ2luYWwgdW5zdXBwb3J0ZWQgZXJyb3IgY29kZSB3YXM6ICR7b3JpZ2luYWxFcnJvckNvZGV9YCxcbiAgICB7XG4gICAgICBvcmlnaW5hbEVycm9yQ29kZVxuICAgIH1cbiAgXSxcbiAgKGpzb24pID0+IFtcbiAgICBqc29uPy5vcmlnaW5hbEVycm9yQ29kZSA/PyB0aHJvd0VycihcIm9yaWdpbmFsRXJyb3JDb2RlIG5vdCBmb3VuZCBpbiBVbnN1cHBvcnRlZEVycm9yIGRldGFpbHNcIilcbiAgXVxuKTtcbnZhciBCb2R5UGFyc2luZ0Vycm9yID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIkJPRFlfUEFSU0lOR19FUlJPUlwiLFxuICAobWVzc2FnZSkgPT4gW1xuICAgIDQwMCxcbiAgICBtZXNzYWdlXG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi5tZXNzYWdlXVxuKTtcbnZhciBTY2hlbWFFcnJvciA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJTQ0hFTUFfRVJST1JcIixcbiAgKG1lc3NhZ2UpID0+IFtcbiAgICA0MDAsXG4gICAgbWVzc2FnZSB8fCB0aHJvd0VycihcIlNjaGVtYUVycm9yIHJlcXVpcmVzIGEgbWVzc2FnZVwiKSxcbiAgICB7XG4gICAgICBtZXNzYWdlXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ubWVzc2FnZV1cbik7XG52YXIgQWxsT3ZlcmxvYWRzRmFpbGVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIkFMTF9PVkVSTE9BRFNfRkFJTEVEXCIsXG4gIChvdmVybG9hZEVycm9ycykgPT4gW1xuICAgIDQwMCxcbiAgICBkZWluZGVudGBcbiAgICAgIFRoaXMgZW5kcG9pbnQgaGFzIG11bHRpcGxlIG92ZXJsb2FkcywgYnV0IHRoZXkgYWxsIGZhaWxlZCB0byBwcm9jZXNzIHRoZSByZXF1ZXN0LlxuXG4gICAgICAgICR7b3ZlcmxvYWRFcnJvcnMubWFwKChlLCBpKSA9PiBkZWluZGVudGBcbiAgICAgICAgICBPdmVybG9hZCAke2kgKyAxfTogJHtKU09OLnN0cmluZ2lmeShlLCB2b2lkIDAsIDIpfVxuICAgICAgICBgKS5qb2luKFwiXFxuXFxuXCIpfVxuICAgIGAsXG4gICAge1xuICAgICAgb3ZlcmxvYWRfZXJyb3JzOiBvdmVybG9hZEVycm9yc1xuICAgIH1cbiAgXSxcbiAgKGpzb24pID0+IFtcbiAgICBqc29uPy5vdmVybG9hZF9lcnJvcnMgPz8gdGhyb3dFcnIoXCJvdmVybG9hZF9lcnJvcnMgbm90IGZvdW5kIGluIEFsbE92ZXJsb2Fkc0ZhaWxlZCBkZXRhaWxzXCIpXG4gIF1cbik7XG52YXIgUHJvamVjdEF1dGhlbnRpY2F0aW9uRXJyb3IgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiUFJPSkVDVF9BVVRIRU5USUNBVElPTl9FUlJPUlwiLFxuICBcImluaGVyaXRcIixcbiAgXCJpbmhlcml0XCJcbik7XG52YXIgSW52YWxpZFByb2plY3RBdXRoZW50aWNhdGlvbiA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgUHJvamVjdEF1dGhlbnRpY2F0aW9uRXJyb3IsXG4gIFwiSU5WQUxJRF9QUk9KRUNUX0FVVEhFTlRJQ0FUSU9OXCIsXG4gIFwiaW5oZXJpdFwiLFxuICBcImluaGVyaXRcIlxuKTtcbnZhciBQcm9qZWN0S2V5V2l0aG91dEFjY2Vzc1R5cGUgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEludmFsaWRQcm9qZWN0QXV0aGVudGljYXRpb24sXG4gIFwiUFJPSkVDVF9LRVlfV0lUSE9VVF9BQ0NFU1NfVFlQRVwiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiRWl0aGVyIGFuIEFQSSBrZXkgb3IgYW4gYWRtaW4gYWNjZXNzIHRva2VuIHdhcyBwcm92aWRlZCwgYnV0IHRoZSB4LXN0YWNrLWFjY2Vzcy10eXBlIGhlYWRlciBpcyBtaXNzaW5nLiBTZXQgaXQgdG8gJ2NsaWVudCcsICdzZXJ2ZXInLCBvciAnYWRtaW4nIGFzIGFwcHJvcHJpYXRlLlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIEludmFsaWRBY2Nlc3NUeXBlID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBJbnZhbGlkUHJvamVjdEF1dGhlbnRpY2F0aW9uLFxuICBcIklOVkFMSURfQUNDRVNTX1RZUEVcIixcbiAgKGFjY2Vzc1R5cGUpID0+IFtcbiAgICA0MDAsXG4gICAgYFRoZSB4LXN0YWNrLWFjY2Vzcy10eXBlIGhlYWRlciBtdXN0IGJlICdjbGllbnQnLCAnc2VydmVyJywgb3IgJ2FkbWluJywgYnV0IHdhcyAnJHthY2Nlc3NUeXBlfScuYFxuICBdLFxuICAoanNvbikgPT4gW1xuICAgIGpzb24/LmFjY2Vzc1R5cGUgPz8gdGhyb3dFcnIoXCJhY2Nlc3NUeXBlIG5vdCBmb3VuZCBpbiBJbnZhbGlkQWNjZXNzVHlwZSBkZXRhaWxzXCIpXG4gIF1cbik7XG52YXIgQWNjZXNzVHlwZVdpdGhvdXRQcm9qZWN0SWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEludmFsaWRQcm9qZWN0QXV0aGVudGljYXRpb24sXG4gIFwiQUNDRVNTX1RZUEVfV0lUSE9VVF9QUk9KRUNUX0lEXCIsXG4gIChhY2Nlc3NUeXBlKSA9PiBbXG4gICAgNDAwLFxuICAgIGRlaW5kZW50YFxuICAgICAgVGhlIHgtc3RhY2stYWNjZXNzLXR5cGUgaGVhZGVyIHdhcyAnJHthY2Nlc3NUeXBlfScsIGJ1dCB0aGUgeC1zdGFjay1wcm9qZWN0LWlkIGhlYWRlciB3YXMgbm90IHByb3ZpZGVkLlxuICAgICAgXG4gICAgICBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlIHRoZSBkb2NzIG9uIFJFU1QgQVBJIGF1dGhlbnRpY2F0aW9uOiBodHRwczovL2RvY3Muc3RhY2stYXV0aC5jb20vcmVzdC1hcGkvb3ZlcnZpZXcjYXV0aGVudGljYXRpb25cbiAgICBgLFxuICAgIHtcbiAgICAgIHJlcXVlc3RfdHlwZTogYWNjZXNzVHlwZVxuICAgIH1cbiAgXSxcbiAgKGpzb24pID0+IFtqc29uLnJlcXVlc3RfdHlwZV1cbik7XG52YXIgQWNjZXNzVHlwZVJlcXVpcmVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBJbnZhbGlkUHJvamVjdEF1dGhlbnRpY2F0aW9uLFxuICBcIkFDQ0VTU19UWVBFX1JFUVVJUkVEXCIsXG4gICgpID0+IFtcbiAgICA0MDAsXG4gICAgZGVpbmRlbnRgXG4gICAgICBZb3UgbXVzdCBzcGVjaWZ5IGFuIGFjY2VzcyBsZXZlbCBmb3IgdGhpcyBTdGFjayBwcm9qZWN0LiBNYWtlIHN1cmUgcHJvamVjdCBBUEkga2V5cyBhcmUgcHJvdmlkZWQgKGVnLiB4LXN0YWNrLXB1Ymxpc2hhYmxlLWNsaWVudC1rZXkpIGFuZCB5b3Ugc2V0IHRoZSB4LXN0YWNrLWFjY2Vzcy10eXBlIGhlYWRlciB0byAnY2xpZW50JywgJ3NlcnZlcicsIG9yICdhZG1pbicuXG4gICAgICBcbiAgICAgIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWUgdGhlIGRvY3Mgb24gUkVTVCBBUEkgYXV0aGVudGljYXRpb246IGh0dHBzOi8vZG9jcy5zdGFjay1hdXRoLmNvbS9yZXN0LWFwaS9vdmVydmlldyNhdXRoZW50aWNhdGlvblxuICAgIGBcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgSW5zdWZmaWNpZW50QWNjZXNzVHlwZSA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgSW52YWxpZFByb2plY3RBdXRoZW50aWNhdGlvbixcbiAgXCJJTlNVRkZJQ0lFTlRfQUNDRVNTX1RZUEVcIixcbiAgKGFjdHVhbEFjY2Vzc1R5cGUsIGFsbG93ZWRBY2Nlc3NUeXBlcykgPT4gW1xuICAgIDQwMSxcbiAgICBgVGhlIHgtc3RhY2stYWNjZXNzLXR5cGUgaGVhZGVyIG11c3QgYmUgJHthbGxvd2VkQWNjZXNzVHlwZXMubWFwKChzKSA9PiBgJyR7c30nYCkuam9pbihcIiBvciBcIil9LCBidXQgd2FzICcke2FjdHVhbEFjY2Vzc1R5cGV9Jy5gLFxuICAgIHtcbiAgICAgIGFjdHVhbF9hY2Nlc3NfdHlwZTogYWN0dWFsQWNjZXNzVHlwZSxcbiAgICAgIGFsbG93ZWRfYWNjZXNzX3R5cGVzOiBhbGxvd2VkQWNjZXNzVHlwZXNcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbXG4gICAganNvbi5hY3R1YWxfYWNjZXNzX3R5cGUsXG4gICAganNvbi5hbGxvd2VkX2FjY2Vzc190eXBlc1xuICBdXG4pO1xudmFyIEludmFsaWRQdWJsaXNoYWJsZUNsaWVudEtleSA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgSW52YWxpZFByb2plY3RBdXRoZW50aWNhdGlvbixcbiAgXCJJTlZBTElEX1BVQkxJU0hBQkxFX0NMSUVOVF9LRVlcIixcbiAgKHByb2plY3RJZCkgPT4gW1xuICAgIDQwMSxcbiAgICBgVGhlIHB1Ymxpc2hhYmxlIGtleSBpcyBub3QgdmFsaWQgZm9yIHRoZSBwcm9qZWN0ICR7SlNPTi5zdHJpbmdpZnkocHJvamVjdElkKX0uIERvZXMgdGhlIHByb2plY3QgYW5kL29yIHRoZSBrZXkgZXhpc3Q/YCxcbiAgICB7XG4gICAgICBwcm9qZWN0X2lkOiBwcm9qZWN0SWRcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi5wcm9qZWN0X2lkXVxuKTtcbnZhciBJbnZhbGlkU2VjcmV0U2VydmVyS2V5ID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBJbnZhbGlkUHJvamVjdEF1dGhlbnRpY2F0aW9uLFxuICBcIklOVkFMSURfU0VDUkVUX1NFUlZFUl9LRVlcIixcbiAgKHByb2plY3RJZCkgPT4gW1xuICAgIDQwMSxcbiAgICBgVGhlIHNlY3JldCBzZXJ2ZXIga2V5IGlzIG5vdCB2YWxpZCBmb3IgdGhlIHByb2plY3QgJHtKU09OLnN0cmluZ2lmeShwcm9qZWN0SWQpfS4gRG9lcyB0aGUgcHJvamVjdCBhbmQvb3IgdGhlIGtleSBleGlzdD9gLFxuICAgIHtcbiAgICAgIHByb2plY3RfaWQ6IHByb2plY3RJZFxuICAgIH1cbiAgXSxcbiAgKGpzb24pID0+IFtqc29uLnByb2plY3RfaWRdXG4pO1xudmFyIEludmFsaWRTdXBlclNlY3JldEFkbWluS2V5ID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBJbnZhbGlkUHJvamVjdEF1dGhlbnRpY2F0aW9uLFxuICBcIklOVkFMSURfU1VQRVJfU0VDUkVUX0FETUlOX0tFWVwiLFxuICAocHJvamVjdElkKSA9PiBbXG4gICAgNDAxLFxuICAgIGBUaGUgc3VwZXIgc2VjcmV0IGFkbWluIGtleSBpcyBub3QgdmFsaWQgZm9yIHRoZSBwcm9qZWN0ICR7SlNPTi5zdHJpbmdpZnkocHJvamVjdElkKX0uIERvZXMgdGhlIHByb2plY3QgYW5kL29yIHRoZSBrZXkgZXhpc3Q/YCxcbiAgICB7XG4gICAgICBwcm9qZWN0X2lkOiBwcm9qZWN0SWRcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi5wcm9qZWN0X2lkXVxuKTtcbnZhciBJbnZhbGlkQWRtaW5BY2Nlc3NUb2tlbiA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgSW52YWxpZFByb2plY3RBdXRoZW50aWNhdGlvbixcbiAgXCJJTlZBTElEX0FETUlOX0FDQ0VTU19UT0tFTlwiLFxuICBcImluaGVyaXRcIixcbiAgXCJpbmhlcml0XCJcbik7XG52YXIgVW5wYXJzYWJsZUFkbWluQWNjZXNzVG9rZW4gPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEludmFsaWRBZG1pbkFjY2Vzc1Rva2VuLFxuICBcIlVOUEFSU0FCTEVfQURNSU5fQUNDRVNTX1RPS0VOXCIsXG4gICgpID0+IFtcbiAgICA0MDEsXG4gICAgXCJBZG1pbiBhY2Nlc3MgdG9rZW4gaXMgbm90IHBhcnNhYmxlLlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIEFkbWluQWNjZXNzVG9rZW5FeHBpcmVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBJbnZhbGlkQWRtaW5BY2Nlc3NUb2tlbixcbiAgXCJBRE1JTl9BQ0NFU1NfVE9LRU5fRVhQSVJFRFwiLFxuICAoZXhwaXJlZEF0KSA9PiBbXG4gICAgNDAxLFxuICAgIGBBZG1pbiBhY2Nlc3MgdG9rZW4gaGFzIGV4cGlyZWQuIFBsZWFzZSByZWZyZXNoIGl0IGFuZCB0cnkgYWdhaW4uJHtleHBpcmVkQXQgPyBgIChUaGUgYWNjZXNzIHRva2VuIGV4cGlyZWQgYXQgJHtleHBpcmVkQXQudG9JU09TdHJpbmcoKX0uKWAgOiBcIlwifWAsXG4gICAgeyBleHBpcmVkX2F0X21pbGxpczogZXhwaXJlZEF0Py5nZXRUaW1lKCkgPz8gbnVsbCB9XG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi5leHBpcmVkX2F0X21pbGxpcyA/PyB2b2lkIDBdXG4pO1xudmFyIEludmFsaWRQcm9qZWN0Rm9yQWRtaW5BY2Nlc3NUb2tlbiA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgSW52YWxpZEFkbWluQWNjZXNzVG9rZW4sXG4gIFwiSU5WQUxJRF9QUk9KRUNUX0ZPUl9BRE1JTl9BQ0NFU1NfVE9LRU5cIixcbiAgKCkgPT4gW1xuICAgIDQwMSxcbiAgICBcIkFkbWluIGFjY2VzcyB0b2tlbnMgbXVzdCBiZSBjcmVhdGVkIG9uIHRoZSBpbnRlcm5hbCBwcm9qZWN0LlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIEFkbWluQWNjZXNzVG9rZW5Jc05vdEFkbWluID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBJbnZhbGlkQWRtaW5BY2Nlc3NUb2tlbixcbiAgXCJBRE1JTl9BQ0NFU1NfVE9LRU5fSVNfTk9UX0FETUlOXCIsXG4gICgpID0+IFtcbiAgICA0MDEsXG4gICAgXCJBZG1pbiBhY2Nlc3MgdG9rZW4gZG9lcyBub3QgaGF2ZSB0aGUgcmVxdWlyZWQgcGVybWlzc2lvbnMgdG8gYWNjZXNzIHRoaXMgcHJvamVjdC5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBQcm9qZWN0QXV0aGVudGljYXRpb25SZXF1aXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgUHJvamVjdEF1dGhlbnRpY2F0aW9uRXJyb3IsXG4gIFwiUFJPSkVDVF9BVVRIRU5USUNBVElPTl9SRVFVSVJFRFwiLFxuICBcImluaGVyaXRcIixcbiAgXCJpbmhlcml0XCJcbik7XG52YXIgQ2xpZW50QXV0aGVudGljYXRpb25SZXF1aXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgUHJvamVjdEF1dGhlbnRpY2F0aW9uUmVxdWlyZWQsXG4gIFwiQ0xJRU5UX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEXCIsXG4gICgpID0+IFtcbiAgICA0MDEsXG4gICAgXCJUaGUgcHVibGlzaGFibGUgY2xpZW50IGtleSBtdXN0IGJlIHByb3ZpZGVkLlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIFNlcnZlckF1dGhlbnRpY2F0aW9uUmVxdWlyZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIFByb2plY3RBdXRoZW50aWNhdGlvblJlcXVpcmVkLFxuICBcIlNFUlZFUl9BVVRIRU5USUNBVElPTl9SRVFVSVJFRFwiLFxuICAoKSA9PiBbXG4gICAgNDAxLFxuICAgIFwiVGhlIHNlY3JldCBzZXJ2ZXIga2V5IG11c3QgYmUgcHJvdmlkZWQuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgQ2xpZW50T3JTZXJ2ZXJBdXRoZW50aWNhdGlvblJlcXVpcmVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBQcm9qZWN0QXV0aGVudGljYXRpb25SZXF1aXJlZCxcbiAgXCJDTElFTlRfT1JfU0VSVkVSX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEXCIsXG4gICgpID0+IFtcbiAgICA0MDEsXG4gICAgXCJFaXRoZXIgdGhlIHB1Ymxpc2hhYmxlIGNsaWVudCBrZXkgb3IgdGhlIHNlY3JldCBzZXJ2ZXIga2V5IG11c3QgYmUgcHJvdmlkZWQuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgQ2xpZW50T3JBZG1pbkF1dGhlbnRpY2F0aW9uUmVxdWlyZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIFByb2plY3RBdXRoZW50aWNhdGlvblJlcXVpcmVkLFxuICBcIkNMSUVOVF9PUl9BRE1JTl9BVVRIRU5USUNBVElPTl9SRVFVSVJFRFwiLFxuICAoKSA9PiBbXG4gICAgNDAxLFxuICAgIFwiRWl0aGVyIHRoZSBwdWJsaXNoYWJsZSBjbGllbnQga2V5IG9yIHRoZSBzdXBlciBzZWNyZXQgYWRtaW4ga2V5IG11c3QgYmUgcHJvdmlkZWQuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgQ2xpZW50T3JTZXJ2ZXJPckFkbWluQXV0aGVudGljYXRpb25SZXF1aXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgUHJvamVjdEF1dGhlbnRpY2F0aW9uUmVxdWlyZWQsXG4gIFwiQ0xJRU5UX09SX1NFUlZFUl9PUl9BRE1JTl9BVVRIRU5USUNBVElPTl9SRVFVSVJFRFwiLFxuICAoKSA9PiBbXG4gICAgNDAxLFxuICAgIFwiRWl0aGVyIHRoZSBwdWJsaXNoYWJsZSBjbGllbnQga2V5LCB0aGUgc2VjcmV0IHNlcnZlciBrZXksIG9yIHRoZSBzdXBlciBzZWNyZXQgYWRtaW4ga2V5IG11c3QgYmUgcHJvdmlkZWQuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgQWRtaW5BdXRoZW50aWNhdGlvblJlcXVpcmVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBQcm9qZWN0QXV0aGVudGljYXRpb25SZXF1aXJlZCxcbiAgXCJBRE1JTl9BVVRIRU5USUNBVElPTl9SRVFVSVJFRFwiLFxuICAoKSA9PiBbXG4gICAgNDAxLFxuICAgIFwiVGhlIHN1cGVyIHNlY3JldCBhZG1pbiBrZXkgbXVzdCBiZSBwcm92aWRlZC5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBFeHBlY3RlZEludGVybmFsUHJvamVjdCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgUHJvamVjdEF1dGhlbnRpY2F0aW9uRXJyb3IsXG4gIFwiRVhQRUNURURfSU5URVJOQUxfUFJPSkVDVFwiLFxuICAoKSA9PiBbXG4gICAgNDAxLFxuICAgIFwiVGhlIHByb2plY3QgSUQgaXMgZXhwZWN0ZWQgdG8gYmUgaW50ZXJuYWwuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgU2Vzc2lvbkF1dGhlbnRpY2F0aW9uRXJyb3IgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiU0VTU0lPTl9BVVRIRU5USUNBVElPTl9FUlJPUlwiLFxuICBcImluaGVyaXRcIixcbiAgXCJpbmhlcml0XCJcbik7XG52YXIgSW52YWxpZFNlc3Npb25BdXRoZW50aWNhdGlvbiA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgU2Vzc2lvbkF1dGhlbnRpY2F0aW9uRXJyb3IsXG4gIFwiSU5WQUxJRF9TRVNTSU9OX0FVVEhFTlRJQ0FUSU9OXCIsXG4gIFwiaW5oZXJpdFwiLFxuICBcImluaGVyaXRcIlxuKTtcbnZhciBJbnZhbGlkQWNjZXNzVG9rZW4gPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEludmFsaWRTZXNzaW9uQXV0aGVudGljYXRpb24sXG4gIFwiSU5WQUxJRF9BQ0NFU1NfVE9LRU5cIixcbiAgXCJpbmhlcml0XCIsXG4gIFwiaW5oZXJpdFwiXG4pO1xudmFyIFVucGFyc2FibGVBY2Nlc3NUb2tlbiA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgSW52YWxpZEFjY2Vzc1Rva2VuLFxuICBcIlVOUEFSU0FCTEVfQUNDRVNTX1RPS0VOXCIsXG4gICgpID0+IFtcbiAgICA0MDEsXG4gICAgXCJBY2Nlc3MgdG9rZW4gaXMgbm90IHBhcnNhYmxlLlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIEFjY2Vzc1Rva2VuRXhwaXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgSW52YWxpZEFjY2Vzc1Rva2VuLFxuICBcIkFDQ0VTU19UT0tFTl9FWFBJUkVEXCIsXG4gIChleHBpcmVkQXQpID0+IFtcbiAgICA0MDEsXG4gICAgYEFjY2VzcyB0b2tlbiBoYXMgZXhwaXJlZC4gUGxlYXNlIHJlZnJlc2ggaXQgYW5kIHRyeSBhZ2Fpbi4ke2V4cGlyZWRBdCA/IGAgKFRoZSBhY2Nlc3MgdG9rZW4gZXhwaXJlZCBhdCAke2V4cGlyZWRBdC50b0lTT1N0cmluZygpfS4pYCA6IFwiXCJ9YCxcbiAgICB7IGV4cGlyZWRfYXRfbWlsbGlzOiBleHBpcmVkQXQ/LmdldFRpbWUoKSA/PyBudWxsIH1cbiAgXSxcbiAgKGpzb24pID0+IFtqc29uLmV4cGlyZWRfYXRfbWlsbGlzID8gbmV3IERhdGUoanNvbi5leHBpcmVkX2F0X21pbGxpcykgOiB2b2lkIDBdXG4pO1xudmFyIEludmFsaWRQcm9qZWN0Rm9yQWNjZXNzVG9rZW4gPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEludmFsaWRBY2Nlc3NUb2tlbixcbiAgXCJJTlZBTElEX1BST0pFQ1RfRk9SX0FDQ0VTU19UT0tFTlwiLFxuICAoZXhwZWN0ZWRQcm9qZWN0SWQsIGFjdHVhbFByb2plY3RJZCkgPT4gW1xuICAgIDQwMSxcbiAgICBgQWNjZXNzIHRva2VuIG5vdCB2YWxpZCBmb3IgdGhpcyBwcm9qZWN0LiBFeHBlY3RlZCBwcm9qZWN0IElEICR7SlNPTi5zdHJpbmdpZnkoZXhwZWN0ZWRQcm9qZWN0SWQpfSwgYnV0IHRoZSB0b2tlbiBpcyBmb3IgcHJvamVjdCBJRCAke0pTT04uc3RyaW5naWZ5KGFjdHVhbFByb2plY3RJZCl9LmAsXG4gICAge1xuICAgICAgZXhwZWN0ZWRfcHJvamVjdF9pZDogZXhwZWN0ZWRQcm9qZWN0SWQsXG4gICAgICBhY3R1YWxfcHJvamVjdF9pZDogYWN0dWFsUHJvamVjdElkXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24uZXhwZWN0ZWRfcHJvamVjdF9pZCwganNvbi5hY3R1YWxfcHJvamVjdF9pZF1cbik7XG52YXIgUmVmcmVzaFRva2VuRXJyb3IgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiUkVGUkVTSF9UT0tFTl9FUlJPUlwiLFxuICBcImluaGVyaXRcIixcbiAgXCJpbmhlcml0XCJcbik7XG52YXIgUmVmcmVzaFRva2VuTm90Rm91bmRPckV4cGlyZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIFJlZnJlc2hUb2tlbkVycm9yLFxuICBcIlJFRlJFU0hfVE9LRU5fTk9UX0ZPVU5EX09SX0VYUElSRURcIixcbiAgKCkgPT4gW1xuICAgIDQwMSxcbiAgICBcIlJlZnJlc2ggdG9rZW4gbm90IGZvdW5kIGZvciB0aGlzIHByb2plY3QsIG9yIHRoZSBzZXNzaW9uIGhhcyBleHBpcmVkL2JlZW4gcmV2b2tlZC5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBDYW5ub3REZWxldGVDdXJyZW50U2Vzc2lvbiA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgUmVmcmVzaFRva2VuRXJyb3IsXG4gIFwiQ0FOTk9UX0RFTEVURV9DVVJSRU5UX1NFU1NJT05cIixcbiAgKCkgPT4gW1xuICAgIDQwMCxcbiAgICBcIkNhbm5vdCBkZWxldGUgdGhlIGN1cnJlbnQgc2Vzc2lvbi5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBQcm92aWRlclJlamVjdGVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBSZWZyZXNoVG9rZW5FcnJvcixcbiAgXCJQUk9WSURFUl9SRUpFQ1RFRFwiLFxuICAoKSA9PiBbXG4gICAgNDAxLFxuICAgIFwiVGhlIHByb3ZpZGVyIHJlZnVzZWQgdG8gcmVmcmVzaCB0aGVpciB0b2tlbi4gVGhpcyB1c3VhbGx5IG1lYW5zIHRoYXQgdGhlIHByb3ZpZGVyIHVzZWQgdG8gYXV0aGVudGljYXRlIHRoZSB1c2VyIG5vIGxvbmdlciByZWdhcmRzIHRoaXMgc2Vzc2lvbiBhcyB2YWxpZCwgYW5kIHRoZSB1c2VyIG11c3QgcmUtYXV0aGVudGljYXRlLlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIFVzZXJXaXRoRW1haWxBbHJlYWR5RXhpc3RzID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIlVTRVJfRU1BSUxfQUxSRUFEWV9FWElTVFNcIixcbiAgKGVtYWlsLCB3b3VsZFdvcmtJZkVtYWlsV2FzVmVyaWZpZWQgPSBmYWxzZSkgPT4gW1xuICAgIDQwOSxcbiAgICBgQSB1c2VyIHdpdGggZW1haWwgJHtKU09OLnN0cmluZ2lmeShlbWFpbCl9IGFscmVhZHkgZXhpc3RzJHt3b3VsZFdvcmtJZkVtYWlsV2FzVmVyaWZpZWQgPyBcIiBidXQgdGhlIGVtYWlsIGlzIG5vdCB2ZXJpZmllZC4gUGxlYXNlIGxvZ2luIHRvIHlvdXIgZXhpc3RpbmcgYWNjb3VudCB3aXRoIHRoZSBtZXRob2QgeW91IHVzZWQgdG8gc2lnbiB1cCwgYW5kIHRoZW4gdmVyaWZ5IHlvdXIgZW1haWwgdG8gc2lnbiBpbiB3aXRoIHRoaXMgbG9naW4gbWV0aG9kLlwiIDogXCIuXCJ9YCxcbiAgICB7XG4gICAgICBlbWFpbCxcbiAgICAgIHdvdWxkX3dvcmtfaWZfZW1haWxfd2FzX3ZlcmlmaWVkOiB3b3VsZFdvcmtJZkVtYWlsV2FzVmVyaWZpZWRcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi5lbWFpbCwganNvbi53b3VsZF93b3JrX2lmX2VtYWlsX3dhc192ZXJpZmllZCA/PyBmYWxzZV1cbik7XG52YXIgRW1haWxOb3RWZXJpZmllZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJFTUFJTF9OT1RfVkVSSUZJRURcIixcbiAgKCkgPT4gW1xuICAgIDQwMCxcbiAgICBcIlRoZSBlbWFpbCBpcyBub3QgdmVyaWZpZWQuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgQ2Fubm90R2V0T3duVXNlcldpdGhvdXRVc2VyID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIkNBTk5PVF9HRVRfT1dOX1VTRVJfV0lUSE9VVF9VU0VSXCIsXG4gICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJZb3UgaGF2ZSBzcGVjaWZpZWQgJ21lJyBhcyBhIHVzZXJJZCwgYnV0IGRpZCBub3QgcHJvdmlkZSBhdXRoZW50aWNhdGlvbiBmb3IgYSB1c2VyLlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIFVzZXJJZERvZXNOb3RFeGlzdCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJVU0VSX0lEX0RPRVNfTk9UX0VYSVNUXCIsXG4gICh1c2VySWQpID0+IFtcbiAgICA0MDAsXG4gICAgYFRoZSBnaXZlbiB1c2VyIHdpdGggdGhlIElEICR7dXNlcklkfSBkb2VzIG5vdCBleGlzdC5gLFxuICAgIHtcbiAgICAgIHVzZXJfaWQ6IHVzZXJJZFxuICAgIH1cbiAgXSxcbiAgKGpzb24pID0+IFtqc29uLnVzZXJfaWRdXG4pO1xudmFyIFVzZXJOb3RGb3VuZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJVU0VSX05PVF9GT1VORFwiLFxuICAoKSA9PiBbXG4gICAgNDA0LFxuICAgIFwiVXNlciBub3QgZm91bmQuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgUHJvamVjdE5vdEZvdW5kID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIlBST0pFQ1RfTk9UX0ZPVU5EXCIsXG4gIChwcm9qZWN0SWQpID0+IHtcbiAgICBpZiAodHlwZW9mIHByb2plY3RJZCAhPT0gXCJzdHJpbmdcIikgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJwcm9qZWN0SWQgb2YgS25vd25FcnJvcnMuUHJvamVjdE5vdEZvdW5kIG11c3QgYmUgYSBzdHJpbmdcIik7XG4gICAgcmV0dXJuIFtcbiAgICAgIDQwNCxcbiAgICAgIGBQcm9qZWN0ICR7cHJvamVjdElkfSBub3QgZm91bmQgb3IgaXMgbm90IGFjY2Vzc2libGUgd2l0aCB0aGUgY3VycmVudCB1c2VyLmAsXG4gICAgICB7XG4gICAgICAgIHByb2plY3RfaWQ6IHByb2plY3RJZFxuICAgICAgfVxuICAgIF07XG4gIH0sXG4gIChqc29uKSA9PiBbanNvbi5wcm9qZWN0X2lkXVxuKTtcbnZhciBDdXJyZW50UHJvamVjdE5vdEZvdW5kID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIkNVUlJFTlRfUFJPSkVDVF9OT1RfRk9VTkRcIixcbiAgKHByb2plY3RJZCkgPT4gW1xuICAgIDQwMCxcbiAgICBgVGhlIGN1cnJlbnQgcHJvamVjdCB3aXRoIElEICR7cHJvamVjdElkfSB3YXMgbm90IGZvdW5kLiBQbGVhc2UgY2hlY2sgdGhlIHZhbHVlIG9mIHRoZSB4LXN0YWNrLXByb2plY3QtaWQgaGVhZGVyLmAsXG4gICAge1xuICAgICAgcHJvamVjdF9pZDogcHJvamVjdElkXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ucHJvamVjdF9pZF1cbik7XG52YXIgQnJhbmNoRG9lc05vdEV4aXN0ID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIkJSQU5DSF9ET0VTX05PVF9FWElTVFwiLFxuICAoYnJhbmNoSWQpID0+IFtcbiAgICA0MDAsXG4gICAgYFRoZSBicmFuY2ggd2l0aCBJRCAke2JyYW5jaElkfSBkb2VzIG5vdCBleGlzdC5gLFxuICAgIHtcbiAgICAgIGJyYW5jaF9pZDogYnJhbmNoSWRcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi5icmFuY2hfaWRdXG4pO1xudmFyIFNpZ25VcE5vdEVuYWJsZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiU0lHTl9VUF9OT1RfRU5BQkxFRFwiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiQ3JlYXRpb24gb2YgbmV3IGFjY291bnRzIGlzIG5vdCBlbmFibGVkIGZvciB0aGlzIHByb2plY3QuIFBsZWFzZSBhc2sgdGhlIHByb2plY3Qgb3duZXIgdG8gZW5hYmxlIGl0LlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIFBhc3N3b3JkQXV0aGVudGljYXRpb25Ob3RFbmFibGVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIlBBU1NXT1JEX0FVVEhFTlRJQ0FUSU9OX05PVF9FTkFCTEVEXCIsXG4gICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJQYXNzd29yZCBhdXRoZW50aWNhdGlvbiBpcyBub3QgZW5hYmxlZCBmb3IgdGhpcyBwcm9qZWN0LlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIERhdGFWYXVsdFN0b3JlRG9lc05vdEV4aXN0ID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIkRBVEFfVkFVTFRfU1RPUkVfRE9FU19OT1RfRVhJU1RcIixcbiAgKHN0b3JlSWQpID0+IFtcbiAgICA0MDAsXG4gICAgYERhdGEgdmF1bHQgc3RvcmUgd2l0aCBJRCAke3N0b3JlSWR9IGRvZXMgbm90IGV4aXN0LmAsXG4gICAge1xuICAgICAgc3RvcmVfaWQ6IHN0b3JlSWRcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi5zdG9yZV9pZF1cbik7XG52YXIgRGF0YVZhdWx0U3RvcmVIYXNoZWRLZXlEb2VzTm90RXhpc3QgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiREFUQV9WQVVMVF9TVE9SRV9IQVNIRURfS0VZX0RPRVNfTk9UX0VYSVNUXCIsXG4gIChzdG9yZUlkLCBoYXNoZWRLZXkpID0+IFtcbiAgICA0MDAsXG4gICAgYERhdGEgdmF1bHQgc3RvcmUgd2l0aCBJRCAke3N0b3JlSWR9IGRvZXMgbm90IGNvbnRhaW4gYSBrZXkgd2l0aCBoYXNoICR7aGFzaGVkS2V5fS5gLFxuICAgIHtcbiAgICAgIHN0b3JlX2lkOiBzdG9yZUlkLFxuICAgICAgaGFzaGVkX2tleTogaGFzaGVkS2V5XG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24uc3RvcmVfaWQsIGpzb24uaGFzaGVkX2tleV1cbik7XG52YXIgUGFzc2tleUF1dGhlbnRpY2F0aW9uTm90RW5hYmxlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJQQVNTS0VZX0FVVEhFTlRJQ0FUSU9OX05PVF9FTkFCTEVEXCIsXG4gICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJQYXNza2V5IGF1dGhlbnRpY2F0aW9uIGlzIG5vdCBlbmFibGVkIGZvciB0aGlzIHByb2plY3QuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgQW5vbnltb3VzQWNjb3VudHNOb3RFbmFibGVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIkFOT05ZTU9VU19BQ0NPVU5UU19OT1RfRU5BQkxFRFwiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiQW5vbnltb3VzIGFjY291bnRzIGFyZSBub3QgZW5hYmxlZCBmb3IgdGhpcyBwcm9qZWN0LlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIEFub255bW91c0F1dGhlbnRpY2F0aW9uTm90QWxsb3dlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJBTk9OWU1PVVNfQVVUSEVOVElDQVRJT05fTk9UX0FMTE9XRURcIixcbiAgKCkgPT4gW1xuICAgIDQwMSxcbiAgICBcIlgtU3RhY2stQWNjZXNzLVRva2VuIGlzIGZvciBhbiBhbm9ueW1vdXMgdXNlciwgYnV0IGFub255bW91cyB1c2VycyBhcmUgbm90IGVuYWJsZWQuIFNldCB0aGUgWC1TdGFjay1BbGxvdy1Bbm9ueW1vdXMtVXNlciBoZWFkZXIgb2YgdGhpcyByZXF1ZXN0IHRvICd0cnVlJyB0byBhbGxvdyBhbm9ueW1vdXMgdXNlcnMuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgRW1haWxQYXNzd29yZE1pc21hdGNoID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIkVNQUlMX1BBU1NXT1JEX01JU01BVENIXCIsXG4gICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJXcm9uZyBlLW1haWwgb3IgcGFzc3dvcmQuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgUmVkaXJlY3RVcmxOb3RXaGl0ZWxpc3RlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJSRURJUkVDVF9VUkxfTk9UX1dISVRFTElTVEVEXCIsXG4gICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJSZWRpcmVjdCBVUkwgbm90IHdoaXRlbGlzdGVkLiBEaWQgeW91IGZvcmdldCB0byBhZGQgdGhpcyBkb21haW4gdG8gdGhlIHRydXN0ZWQgZG9tYWlucyBsaXN0IG9uIHRoZSBTdGFjayBBdXRoIGRhc2hib2FyZD9cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBQYXNzd29yZFJlcXVpcmVtZW50c05vdE1ldCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJQQVNTV09SRF9SRVFVSVJFTUVOVFNfTk9UX01FVFwiLFxuICBcImluaGVyaXRcIixcbiAgXCJpbmhlcml0XCJcbik7XG52YXIgUGFzc3dvcmRUb29TaG9ydCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgUGFzc3dvcmRSZXF1aXJlbWVudHNOb3RNZXQsXG4gIFwiUEFTU1dPUkRfVE9PX1NIT1JUXCIsXG4gIChtaW5MZW5ndGgpID0+IFtcbiAgICA0MDAsXG4gICAgYFBhc3N3b3JkIHRvbyBzaG9ydC4gTWluaW11bSBsZW5ndGggaXMgJHttaW5MZW5ndGh9LmAsXG4gICAge1xuICAgICAgbWluX2xlbmd0aDogbWluTGVuZ3RoXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW1xuICAgIGpzb24/Lm1pbl9sZW5ndGggPz8gdGhyb3dFcnIoXCJtaW5fbGVuZ3RoIG5vdCBmb3VuZCBpbiBQYXNzd29yZFRvb1Nob3J0IGRldGFpbHNcIilcbiAgXVxuKTtcbnZhciBQYXNzd29yZFRvb0xvbmcgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIFBhc3N3b3JkUmVxdWlyZW1lbnRzTm90TWV0LFxuICBcIlBBU1NXT1JEX1RPT19MT05HXCIsXG4gIChtYXhMZW5ndGgpID0+IFtcbiAgICA0MDAsXG4gICAgYFBhc3N3b3JkIHRvbyBsb25nLiBNYXhpbXVtIGxlbmd0aCBpcyAke21heExlbmd0aH0uYCxcbiAgICB7XG4gICAgICBtYXhMZW5ndGhcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbXG4gICAganNvbj8ubWF4TGVuZ3RoID8/IHRocm93RXJyKFwibWF4TGVuZ3RoIG5vdCBmb3VuZCBpbiBQYXNzd29yZFRvb0xvbmcgZGV0YWlsc1wiKVxuICBdXG4pO1xudmFyIFVzZXJEb2VzTm90SGF2ZVBhc3N3b3JkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIlVTRVJfRE9FU19OT1RfSEFWRV9QQVNTV09SRFwiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhpcyB1c2VyIGRvZXMgbm90IGhhdmUgcGFzc3dvcmQgYXV0aGVudGljYXRpb24gZW5hYmxlZC5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBWZXJpZmljYXRpb25Db2RlRXJyb3IgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiVkVSSUZJQ0FUSU9OX0VSUk9SXCIsXG4gIFwiaW5oZXJpdFwiLFxuICBcImluaGVyaXRcIlxuKTtcbnZhciBWZXJpZmljYXRpb25Db2RlTm90Rm91bmQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIFZlcmlmaWNhdGlvbkNvZGVFcnJvcixcbiAgXCJWRVJJRklDQVRJT05fQ09ERV9OT1RfRk9VTkRcIixcbiAgKCkgPT4gW1xuICAgIDQwNCxcbiAgICBcIlRoZSB2ZXJpZmljYXRpb24gY29kZSBkb2VzIG5vdCBleGlzdCBmb3IgdGhpcyBwcm9qZWN0LlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIFZlcmlmaWNhdGlvbkNvZGVFeHBpcmVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBWZXJpZmljYXRpb25Db2RlRXJyb3IsXG4gIFwiVkVSSUZJQ0FUSU9OX0NPREVfRVhQSVJFRFwiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIHZlcmlmaWNhdGlvbiBjb2RlIGhhcyBleHBpcmVkLlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIFZlcmlmaWNhdGlvbkNvZGVBbHJlYWR5VXNlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgVmVyaWZpY2F0aW9uQ29kZUVycm9yLFxuICBcIlZFUklGSUNBVElPTl9DT0RFX0FMUkVBRFlfVVNFRFwiLFxuICAoKSA9PiBbXG4gICAgNDA5LFxuICAgIFwiVGhlIHZlcmlmaWNhdGlvbiBsaW5rIGhhcyBhbHJlYWR5IGJlZW4gdXNlZC5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBWZXJpZmljYXRpb25Db2RlTWF4QXR0ZW1wdHNSZWFjaGVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBWZXJpZmljYXRpb25Db2RlRXJyb3IsXG4gIFwiVkVSSUZJQ0FUSU9OX0NPREVfTUFYX0FUVEVNUFRTX1JFQUNIRURcIixcbiAgKCkgPT4gW1xuICAgIDQwMCxcbiAgICBcIlRoZSB2ZXJpZmljYXRpb24gY29kZSBub25jZSBoYXMgcmVhY2hlZCB0aGUgbWF4aW11bSBudW1iZXIgb2YgYXR0ZW1wdHMuIFRoaXMgY29kZSBpcyBub3QgdmFsaWQgYW55bW9yZS5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBQYXNzd29yZENvbmZpcm1hdGlvbk1pc21hdGNoID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIlBBU1NXT1JEX0NPTkZJUk1BVElPTl9NSVNNQVRDSFwiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiUGFzc3dvcmRzIGRvIG5vdCBtYXRjaC5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBFbWFpbEFscmVhZHlWZXJpZmllZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJFTUFJTF9BTFJFQURZX1ZFUklGSUVEXCIsXG4gICgpID0+IFtcbiAgICA0MDksXG4gICAgXCJUaGUgZS1tYWlsIGlzIGFscmVhZHkgdmVyaWZpZWQuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgRW1haWxOb3RBc3NvY2lhdGVkV2l0aFVzZXIgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiRU1BSUxfTk9UX0FTU09DSUFURURfV0lUSF9VU0VSXCIsXG4gICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJUaGUgZS1tYWlsIGlzIG5vdCBhc3NvY2lhdGVkIHdpdGggYSB1c2VyIHRoYXQgY291bGQgbG9nIGluIHdpdGggdGhhdCBlLW1haWwuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgRW1haWxJc05vdFByaW1hcnlFbWFpbCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJFTUFJTF9JU19OT1RfUFJJTUFSWV9FTUFJTFwiLFxuICAoZW1haWwsIHByaW1hcnlFbWFpbCkgPT4gW1xuICAgIDQwMCxcbiAgICBgVGhlIGdpdmVuIGUtbWFpbCAoJHtlbWFpbH0pIG11c3QgZXF1YWwgdGhlIHVzZXIncyBwcmltYXJ5IGUtbWFpbCAoJHtwcmltYXJ5RW1haWx9KS5gLFxuICAgIHtcbiAgICAgIGVtYWlsLFxuICAgICAgcHJpbWFyeV9lbWFpbDogcHJpbWFyeUVtYWlsXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24uZW1haWwsIGpzb24ucHJpbWFyeV9lbWFpbF1cbik7XG52YXIgUGFzc2tleVJlZ2lzdHJhdGlvbkZhaWxlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJQQVNTS0VZX1JFR0lTVFJBVElPTl9GQUlMRURcIixcbiAgKG1lc3NhZ2UpID0+IFtcbiAgICA0MDAsXG4gICAgbWVzc2FnZVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ubWVzc2FnZV1cbik7XG52YXIgUGFzc2tleVdlYkF1dGhuRXJyb3IgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiUEFTU0tFWV9XRUJBVVRITl9FUlJPUlwiLFxuICAobWVzc2FnZSwgY29kZSkgPT4gW1xuICAgIDQwMCxcbiAgICBtZXNzYWdlLFxuICAgIHtcbiAgICAgIG1lc3NhZ2UsXG4gICAgICBjb2RlXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ubWVzc2FnZSwganNvbi5jb2RlXVxuKTtcbnZhciBQYXNza2V5QXV0aGVudGljYXRpb25GYWlsZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiUEFTU0tFWV9BVVRIRU5USUNBVElPTl9GQUlMRURcIixcbiAgKG1lc3NhZ2UpID0+IFtcbiAgICA0MDAsXG4gICAgbWVzc2FnZVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ubWVzc2FnZV1cbik7XG52YXIgUGVybWlzc2lvbk5vdEZvdW5kID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIlBFUk1JU1NJT05fTk9UX0ZPVU5EXCIsXG4gIChwZXJtaXNzaW9uSWQpID0+IFtcbiAgICA0MDQsXG4gICAgYFBlcm1pc3Npb24gXCIke3Blcm1pc3Npb25JZH1cIiBub3QgZm91bmQuIE1ha2Ugc3VyZSB5b3UgY3JlYXRlZCBpdCBvbiB0aGUgZGFzaGJvYXJkLmAsXG4gICAge1xuICAgICAgcGVybWlzc2lvbl9pZDogcGVybWlzc2lvbklkXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ucGVybWlzc2lvbl9pZF1cbik7XG52YXIgUGVybWlzc2lvblNjb3BlTWlzbWF0Y2ggPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiV1JPTkdfUEVSTUlTU0lPTl9TQ09QRVwiLFxuICAocGVybWlzc2lvbklkLCBleHBlY3RlZFNjb3BlLCBhY3R1YWxTY29wZSkgPT4gW1xuICAgIDQwNCxcbiAgICBgUGVybWlzc2lvbiAke0pTT04uc3RyaW5naWZ5KHBlcm1pc3Npb25JZCl9IG5vdCBmb3VuZC4gKEl0IHdhcyBmb3VuZCBmb3IgYSBkaWZmZXJlbnQgc2NvcGUgJHtKU09OLnN0cmluZ2lmeShhY3R1YWxTY29wZSl9LCBidXQgc2NvcGUgJHtKU09OLnN0cmluZ2lmeShleHBlY3RlZFNjb3BlKX0gd2FzIGV4cGVjdGVkLilgLFxuICAgIHtcbiAgICAgIHBlcm1pc3Npb25faWQ6IHBlcm1pc3Npb25JZCxcbiAgICAgIGV4cGVjdGVkX3Njb3BlOiBleHBlY3RlZFNjb3BlLFxuICAgICAgYWN0dWFsX3Njb3BlOiBhY3R1YWxTY29wZVxuICAgIH1cbiAgXSxcbiAgKGpzb24pID0+IFtqc29uLnBlcm1pc3Npb25faWQsIGpzb24uZXhwZWN0ZWRfc2NvcGUsIGpzb24uYWN0dWFsX3Njb3BlXVxuKTtcbnZhciBDb250YWluZWRQZXJtaXNzaW9uTm90Rm91bmQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiQ09OVEFJTkVEX1BFUk1JU1NJT05fTk9UX0ZPVU5EXCIsXG4gIChwZXJtaXNzaW9uSWQpID0+IFtcbiAgICA0MDAsXG4gICAgYENvbnRhaW5lZCBwZXJtaXNzaW9uIHdpdGggSUQgXCIke3Blcm1pc3Npb25JZH1cIiBub3QgZm91bmQuIE1ha2Ugc3VyZSB5b3UgY3JlYXRlZCBpdCBvbiB0aGUgZGFzaGJvYXJkLmAsXG4gICAge1xuICAgICAgcGVybWlzc2lvbl9pZDogcGVybWlzc2lvbklkXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ucGVybWlzc2lvbl9pZF1cbik7XG52YXIgVGVhbU5vdEZvdW5kID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIlRFQU1fTk9UX0ZPVU5EXCIsXG4gICh0ZWFtSWQpID0+IFtcbiAgICA0MDQsXG4gICAgYFRlYW0gJHt0ZWFtSWR9IG5vdCBmb3VuZC5gLFxuICAgIHtcbiAgICAgIHRlYW1faWQ6IHRlYW1JZFxuICAgIH1cbiAgXSxcbiAgKGpzb24pID0+IFtqc29uLnRlYW1faWRdXG4pO1xudmFyIFRlYW1BbHJlYWR5RXhpc3RzID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIlRFQU1fQUxSRUFEWV9FWElTVFNcIixcbiAgKHRlYW1JZCkgPT4gW1xuICAgIDQwOSxcbiAgICBgVGVhbSAke3RlYW1JZH0gYWxyZWFkeSBleGlzdHMuYCxcbiAgICB7XG4gICAgICB0ZWFtX2lkOiB0ZWFtSWRcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi50ZWFtX2lkXVxuKTtcbnZhciBUZWFtTWVtYmVyc2hpcE5vdEZvdW5kID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIlRFQU1fTUVNQkVSU0hJUF9OT1RfRk9VTkRcIixcbiAgKHRlYW1JZCwgdXNlcklkKSA9PiBbXG4gICAgNDA0LFxuICAgIGBVc2VyICR7dXNlcklkfSBpcyBub3QgZm91bmQgaW4gdGVhbSAke3RlYW1JZH0uYCxcbiAgICB7XG4gICAgICB0ZWFtX2lkOiB0ZWFtSWQsXG4gICAgICB1c2VyX2lkOiB1c2VySWRcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi50ZWFtX2lkLCBqc29uLnVzZXJfaWRdXG4pO1xudmFyIEVtYWlsVGVtcGxhdGVBbHJlYWR5RXhpc3RzID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIkVNQUlMX1RFTVBMQVRFX0FMUkVBRFlfRVhJU1RTXCIsXG4gICgpID0+IFtcbiAgICA0MDksXG4gICAgXCJFbWFpbCB0ZW1wbGF0ZSBhbHJlYWR5IGV4aXN0cy5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBPQXV0aENvbm5lY3Rpb25Ob3RDb25uZWN0ZWRUb1VzZXIgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiT0FVVEhfQ09OTkVDVElPTl9OT1RfQ09OTkVDVEVEX1RPX1VTRVJcIixcbiAgKCkgPT4gW1xuICAgIDQwMCxcbiAgICBcIlRoZSBPQXV0aCBjb25uZWN0aW9uIGlzIG5vdCBjb25uZWN0ZWQgdG8gYW55IHVzZXIuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgT0F1dGhDb25uZWN0aW9uQWxyZWFkeUNvbm5lY3RlZFRvQW5vdGhlclVzZXIgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiT0FVVEhfQ09OTkVDVElPTl9BTFJFQURZX0NPTk5FQ1RFRF9UT19BTk9USEVSX1VTRVJcIixcbiAgKCkgPT4gW1xuICAgIDQwOSxcbiAgICBcIlRoZSBPQXV0aCBjb25uZWN0aW9uIGlzIGFscmVhZHkgY29ubmVjdGVkIHRvIGFub3RoZXIgdXNlci5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBPQXV0aENvbm5lY3Rpb25Eb2VzTm90SGF2ZVJlcXVpcmVkU2NvcGUgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiT0FVVEhfQ09OTkVDVElPTl9ET0VTX05PVF9IQVZFX1JFUVVJUkVEX1NDT1BFXCIsXG4gICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJUaGUgT0F1dGggY29ubmVjdGlvbiBkb2VzIG5vdCBoYXZlIHRoZSByZXF1aXJlZCBzY29wZS5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBPQXV0aEV4dHJhU2NvcGVOb3RBdmFpbGFibGVXaXRoU2hhcmVkT0F1dGhLZXlzID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIk9BVVRIX0VYVFJBX1NDT1BFX05PVF9BVkFJTEFCTEVfV0lUSF9TSEFSRURfT0FVVEhfS0VZU1wiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiRXh0cmEgc2NvcGVzIGFyZSBub3QgYXZhaWxhYmxlIHdpdGggc2hhcmVkIE9BdXRoIGtleXMuIFBsZWFzZSBhZGQgeW91ciBvd24gT0F1dGgga2V5cyBvbiB0aGUgU3RhY2sgZGFzaGJvYXJkIHRvIHVzZSBleHRyYSBzY29wZXMuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgT0F1dGhBY2Nlc3NUb2tlbk5vdEF2YWlsYWJsZVdpdGhTaGFyZWRPQXV0aEtleXMgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiT0FVVEhfQUNDRVNTX1RPS0VOX05PVF9BVkFJTEFCTEVfV0lUSF9TSEFSRURfT0FVVEhfS0VZU1wiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiQWNjZXNzIHRva2VucyBhcmUgbm90IGF2YWlsYWJsZSB3aXRoIHNoYXJlZCBPQXV0aCBrZXlzLiBQbGVhc2UgYWRkIHlvdXIgb3duIE9BdXRoIGtleXMgb24gdGhlIFN0YWNrIGRhc2hib2FyZCB0byB1c2UgYWNjZXNzIHRva2Vucy5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBJbnZhbGlkT0F1dGhDbGllbnRJZE9yU2VjcmV0ID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIklOVkFMSURfT0FVVEhfQ0xJRU5UX0lEX09SX1NFQ1JFVFwiLFxuICAoY2xpZW50SWQpID0+IFtcbiAgICA0MDAsXG4gICAgXCJUaGUgT0F1dGggY2xpZW50IElEIG9yIHNlY3JldCBpcyBpbnZhbGlkLiBUaGUgY2xpZW50IElEIG11c3QgYmUgZXF1YWwgdG8gdGhlIHByb2plY3QgSUQgKHBvdGVudGlhbGx5IHdpdGggYSBoYXNoIGFuZCBhIGJyYW5jaCBJRCksIGFuZCB0aGUgY2xpZW50IHNlY3JldCBtdXN0IGJlIGEgcHVibGlzaGFibGUgY2xpZW50IGtleS5cIixcbiAgICB7XG4gICAgICBjbGllbnRfaWQ6IGNsaWVudElkID8/IG51bGxcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi5jbGllbnRfaWQgPz8gdm9pZCAwXVxuKTtcbnZhciBJbnZhbGlkU2NvcGUgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiSU5WQUxJRF9TQ09QRVwiLFxuICAoc2NvcGUpID0+IFtcbiAgICA0MDAsXG4gICAgYFRoZSBzY29wZSBcIiR7c2NvcGV9XCIgaXMgbm90IGEgdmFsaWQgT0F1dGggc2NvcGUgZm9yIFN0YWNrLmBcbiAgXSxcbiAgKGpzb24pID0+IFtqc29uLnNjb3BlXVxuKTtcbnZhciBVc2VyQWxyZWFkeUNvbm5lY3RlZFRvQW5vdGhlck9BdXRoQ29ubmVjdGlvbiA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJVU0VSX0FMUkVBRFlfQ09OTkVDVEVEX1RPX0FOT1RIRVJfT0FVVEhfQ09OTkVDVElPTlwiLFxuICAoKSA9PiBbXG4gICAgNDA5LFxuICAgIFwiVGhlIHVzZXIgaXMgYWxyZWFkeSBjb25uZWN0ZWQgdG8gYW5vdGhlciBPQXV0aCBhY2NvdW50LiBEaWQgeW91IG1heWJlIHNlbGVjdGVkIHRoZSB3cm9uZyBhY2NvdW50P1wiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIE91dGVyT0F1dGhUaW1lb3V0ID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIk9VVEVSX09BVVRIX1RJTUVPVVRcIixcbiAgKCkgPT4gW1xuICAgIDQwOCxcbiAgICBcIlRoZSBPQXV0aCBmbG93IGhhcyB0aW1lZCBvdXQuIFBsZWFzZSBzaWduIGluIGFnYWluLlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIE9BdXRoUHJvdmlkZXJOb3RGb3VuZE9yTm90RW5hYmxlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJPQVVUSF9QUk9WSURFUl9OT1RfRk9VTkRfT1JfTk9UX0VOQUJMRURcIixcbiAgKCkgPT4gW1xuICAgIDQwMCxcbiAgICBcIlRoZSBPQXV0aCBwcm92aWRlciBpcyBub3QgZm91bmQgb3Igbm90IGVuYWJsZWQuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgT0F1dGhQcm92aWRlckFjY291bnRJZEFscmVhZHlVc2VkRm9yU2lnbkluID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIk9BVVRIX1BST1ZJREVSX0FDQ09VTlRfSURfQUxSRUFEWV9VU0VEX0ZPUl9TSUdOX0lOXCIsXG4gICgpID0+IFtcbiAgICA0MDAsXG4gICAgYEEgcHJvdmlkZXIgd2l0aCB0aGUgc2FtZSBhY2NvdW50IElEIGlzIGFscmVhZHkgdXNlZCBmb3Igc2lnbmluZyBpbi5gXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIE11bHRpRmFjdG9yQXV0aGVudGljYXRpb25SZXF1aXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJNVUxUSV9GQUNUT1JfQVVUSEVOVElDQVRJT05fUkVRVUlSRURcIixcbiAgKGF0dGVtcHRDb2RlKSA9PiBbXG4gICAgNDAwLFxuICAgIGBNdWx0aS1mYWN0b3IgYXV0aGVudGljYXRpb24gaXMgcmVxdWlyZWQgZm9yIHRoaXMgdXNlci5gLFxuICAgIHtcbiAgICAgIGF0dGVtcHRfY29kZTogYXR0ZW1wdENvZGVcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi5hdHRlbXB0X2NvZGVdXG4pO1xudmFyIEludmFsaWRUb3RwQ29kZSA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJJTlZBTElEX1RPVFBfQ09ERVwiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIFRPVFAgY29kZSBpcyBpbnZhbGlkLiBQbGVhc2UgdHJ5IGFnYWluLlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIFVzZXJBdXRoZW50aWNhdGlvblJlcXVpcmVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIlVTRVJfQVVUSEVOVElDQVRJT05fUkVRVUlSRURcIixcbiAgKCkgPT4gW1xuICAgIDQwMSxcbiAgICBcIlVzZXIgYXV0aGVudGljYXRpb24gcmVxdWlyZWQgZm9yIHRoaXMgZW5kcG9pbnQuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgVGVhbU1lbWJlcnNoaXBBbHJlYWR5RXhpc3RzID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIlRFQU1fTUVNQkVSU0hJUF9BTFJFQURZX0VYSVNUU1wiLFxuICAoKSA9PiBbXG4gICAgNDA5LFxuICAgIFwiVGVhbSBtZW1iZXJzaGlwIGFscmVhZHkgZXhpc3RzLlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIFByb2plY3RQZXJtaXNzaW9uUmVxdWlyZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiUFJPSkVDVF9QRVJNSVNTSU9OX1JFUVVJUkVEXCIsXG4gICh1c2VySWQsIHBlcm1pc3Npb25JZCkgPT4gW1xuICAgIDQwMSxcbiAgICBgVXNlciAke3VzZXJJZH0gZG9lcyBub3QgaGF2ZSBwZXJtaXNzaW9uICR7cGVybWlzc2lvbklkfS5gLFxuICAgIHtcbiAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgIHBlcm1pc3Npb25faWQ6IHBlcm1pc3Npb25JZFxuICAgIH1cbiAgXSxcbiAgKGpzb24pID0+IFtqc29uLnVzZXJfaWQsIGpzb24ucGVybWlzc2lvbl9pZF1cbik7XG52YXIgVGVhbVBlcm1pc3Npb25SZXF1aXJlZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJURUFNX1BFUk1JU1NJT05fUkVRVUlSRURcIixcbiAgKHRlYW1JZCwgdXNlcklkLCBwZXJtaXNzaW9uSWQpID0+IFtcbiAgICA0MDEsXG4gICAgYFVzZXIgJHt1c2VySWR9IGRvZXMgbm90IGhhdmUgcGVybWlzc2lvbiAke3Blcm1pc3Npb25JZH0gaW4gdGVhbSAke3RlYW1JZH0uYCxcbiAgICB7XG4gICAgICB0ZWFtX2lkOiB0ZWFtSWQsXG4gICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICBwZXJtaXNzaW9uX2lkOiBwZXJtaXNzaW9uSWRcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi50ZWFtX2lkLCBqc29uLnVzZXJfaWQsIGpzb24ucGVybWlzc2lvbl9pZF1cbik7XG52YXIgVGVhbVBlcm1pc3Npb25Ob3RGb3VuZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJURUFNX1BFUk1JU1NJT05fTk9UX0ZPVU5EXCIsXG4gICh0ZWFtSWQsIHVzZXJJZCwgcGVybWlzc2lvbklkKSA9PiBbXG4gICAgNDAxLFxuICAgIGBVc2VyICR7dXNlcklkfSBkb2VzIG5vdCBoYXZlIHBlcm1pc3Npb24gJHtwZXJtaXNzaW9uSWR9IGluIHRlYW0gJHt0ZWFtSWR9LmAsXG4gICAge1xuICAgICAgdGVhbV9pZDogdGVhbUlkLFxuICAgICAgdXNlcl9pZDogdXNlcklkLFxuICAgICAgcGVybWlzc2lvbl9pZDogcGVybWlzc2lvbklkXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24udGVhbV9pZCwganNvbi51c2VyX2lkLCBqc29uLnBlcm1pc3Npb25faWRdXG4pO1xudmFyIEludmFsaWRTaGFyZWRPQXV0aFByb3ZpZGVySWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiSU5WQUxJRF9TSEFSRURfT0FVVEhfUFJPVklERVJfSURcIixcbiAgKHByb3ZpZGVySWQpID0+IFtcbiAgICA0MDAsXG4gICAgYFRoZSBzaGFyZWQgT0F1dGggcHJvdmlkZXIgd2l0aCBJRCAke3Byb3ZpZGVySWR9IGlzIG5vdCB2YWxpZC5gLFxuICAgIHtcbiAgICAgIHByb3ZpZGVyX2lkOiBwcm92aWRlcklkXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ucHJvdmlkZXJfaWRdXG4pO1xudmFyIEludmFsaWRTdGFuZGFyZE9BdXRoUHJvdmlkZXJJZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJJTlZBTElEX1NUQU5EQVJEX09BVVRIX1BST1ZJREVSX0lEXCIsXG4gIChwcm92aWRlcklkKSA9PiBbXG4gICAgNDAwLFxuICAgIGBUaGUgc3RhbmRhcmQgT0F1dGggcHJvdmlkZXIgd2l0aCBJRCAke3Byb3ZpZGVySWR9IGlzIG5vdCB2YWxpZC5gLFxuICAgIHtcbiAgICAgIHByb3ZpZGVyX2lkOiBwcm92aWRlcklkXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ucHJvdmlkZXJfaWRdXG4pO1xudmFyIEludmFsaWRBdXRob3JpemF0aW9uQ29kZSA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJJTlZBTElEX0FVVEhPUklaQVRJT05fQ09ERVwiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIGdpdmVuIGF1dGhvcml6YXRpb24gY29kZSBpcyBpbnZhbGlkLlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIE9BdXRoUHJvdmlkZXJBY2Nlc3NEZW5pZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiT0FVVEhfUFJPVklERVJfQUNDRVNTX0RFTklFRFwiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIE9BdXRoIHByb3ZpZGVyIGRlbmllZCBhY2Nlc3MgdG8gdGhlIHVzZXIuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgQ29udGFjdENoYW5uZWxBbHJlYWR5VXNlZEZvckF1dGhCeVNvbWVvbmVFbHNlID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIkNPTlRBQ1RfQ0hBTk5FTF9BTFJFQURZX1VTRURfRk9SX0FVVEhfQllfU09NRU9ORV9FTFNFXCIsXG4gICh0eXBlLCBjb250YWN0Q2hhbm5lbFZhbHVlLCB3b3VsZFdvcmtJZkVtYWlsV2FzVmVyaWZpZWQgPSBmYWxzZSkgPT4gW1xuICAgIDQwOSxcbiAgICBgVGhpcyAke3R5cGV9ICR7Y29udGFjdENoYW5uZWxWYWx1ZSA/IGBcIigke2NvbnRhY3RDaGFubmVsVmFsdWV9KVwiYCA6IFwiXCJ9IGlzIGFscmVhZHkgdXNlZCBmb3IgYXV0aGVudGljYXRpb24gYnkgYW5vdGhlciBhY2NvdW50JHt3b3VsZFdvcmtJZkVtYWlsV2FzVmVyaWZpZWQgPyBcIiBidXQgdGhlIGVtYWlsIGlzIG5vdCB2ZXJpZmllZC4gUGxlYXNlIGxvZ2luIHRvIHlvdXIgZXhpc3RpbmcgYWNjb3VudCB3aXRoIHRoZSBtZXRob2QgeW91IHVzZWQgdG8gc2lnbiB1cCwgYW5kIHRoZW4gdmVyaWZ5IHlvdXIgZW1haWwgdG8gc2lnbiBpbiB3aXRoIHRoaXMgbG9naW4gbWV0aG9kLlwiIDogXCIuXCJ9YCxcbiAgICB7XG4gICAgICB0eXBlLFxuICAgICAgY29udGFjdF9jaGFubmVsX3ZhbHVlOiBjb250YWN0Q2hhbm5lbFZhbHVlID8/IG51bGwsXG4gICAgICB3b3VsZF93b3JrX2lmX2VtYWlsX3dhc192ZXJpZmllZDogd291bGRXb3JrSWZFbWFpbFdhc1ZlcmlmaWVkXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24udHlwZSwganNvbi5jb250YWN0X2NoYW5uZWxfdmFsdWUsIGpzb24ud291bGRfd29ya19pZl9lbWFpbF93YXNfdmVyaWZpZWQgPz8gZmFsc2VdXG4pO1xudmFyIEludmFsaWRQb2xsaW5nQ29kZUVycm9yID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIklOVkFMSURfUE9MTElOR19DT0RFXCIsXG4gIChkZXRhaWxzKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIHBvbGxpbmcgY29kZSBpcyBpbnZhbGlkIG9yIGRvZXMgbm90IGV4aXN0LlwiLFxuICAgIGRldGFpbHNcbiAgXSxcbiAgKGpzb24pID0+IFtqc29uXVxuKTtcbnZhciBDbGlBdXRoRXJyb3IgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiQ0xJX0FVVEhfRVJST1JcIixcbiAgKG1lc3NhZ2UpID0+IFtcbiAgICA0MDAsXG4gICAgbWVzc2FnZVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ubWVzc2FnZV1cbik7XG52YXIgQ2xpQXV0aEV4cGlyZWRFcnJvciA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJDTElfQVVUSF9FWFBJUkVEX0VSUk9SXCIsXG4gIChtZXNzYWdlID0gXCJDTEkgYXV0aGVudGljYXRpb24gcmVxdWVzdCBleHBpcmVkLiBQbGVhc2UgdHJ5IGFnYWluLlwiKSA9PiBbXG4gICAgNDAwLFxuICAgIG1lc3NhZ2VcbiAgXSxcbiAgKGpzb24pID0+IFtqc29uLm1lc3NhZ2VdXG4pO1xudmFyIENsaUF1dGhVc2VkRXJyb3IgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiQ0xJX0FVVEhfVVNFRF9FUlJPUlwiLFxuICAobWVzc2FnZSA9IFwiVGhpcyBhdXRoZW50aWNhdGlvbiB0b2tlbiBoYXMgYWxyZWFkeSBiZWVuIHVzZWQuXCIpID0+IFtcbiAgICA0MDAsXG4gICAgbWVzc2FnZVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ubWVzc2FnZV1cbik7XG52YXIgQXBpS2V5Tm90VmFsaWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiQVBJX0tFWV9OT1RfVkFMSURcIixcbiAgXCJpbmhlcml0XCIsXG4gIFwiaW5oZXJpdFwiXG4pO1xudmFyIEFwaUtleUV4cGlyZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEFwaUtleU5vdFZhbGlkLFxuICBcIkFQSV9LRVlfRVhQSVJFRFwiLFxuICAoKSA9PiBbXG4gICAgNDAxLFxuICAgIFwiQVBJIGtleSBoYXMgZXhwaXJlZC5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBBcGlLZXlSZXZva2VkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBBcGlLZXlOb3RWYWxpZCxcbiAgXCJBUElfS0VZX1JFVk9LRURcIixcbiAgKCkgPT4gW1xuICAgIDQwMSxcbiAgICBcIkFQSSBrZXkgaGFzIGJlZW4gcmV2b2tlZC5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBXcm9uZ0FwaUtleVR5cGUgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEFwaUtleU5vdFZhbGlkLFxuICBcIldST05HX0FQSV9LRVlfVFlQRVwiLFxuICAoZXhwZWN0ZWRUeXBlLCBhY3R1YWxUeXBlKSA9PiBbXG4gICAgNDAwLFxuICAgIGBUaGlzIGVuZHBvaW50IGlzIGZvciAke2V4cGVjdGVkVHlwZX0gQVBJIGtleXMsIGJ1dCBhICR7YWN0dWFsVHlwZX0gQVBJIGtleSB3YXMgcHJvdmlkZWQuYCxcbiAgICB7IGV4cGVjdGVkX3R5cGU6IGV4cGVjdGVkVHlwZSwgYWN0dWFsX3R5cGU6IGFjdHVhbFR5cGUgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24uZXhwZWN0ZWRfdHlwZSwganNvbi5hY3R1YWxfdHlwZV1cbik7XG52YXIgQXBpS2V5Tm90Rm91bmQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEFwaUtleU5vdFZhbGlkLFxuICBcIkFQSV9LRVlfTk9UX0ZPVU5EXCIsXG4gICgpID0+IFtcbiAgICA0MDQsXG4gICAgXCJBUEkga2V5IG5vdCBmb3VuZC5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBQdWJsaWNBcGlLZXlDYW5ub3RCZVJldm9rZWQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEFwaUtleU5vdFZhbGlkLFxuICBcIlBVQkxJQ19BUElfS0VZX0NBTk5PVF9CRV9SRVZPS0VEXCIsXG4gICgpID0+IFtcbiAgICA0MDAsXG4gICAgXCJQdWJsaWMgQVBJIGtleXMgY2Fubm90IGJlIHJldm9rZWQgYnkgdGhlIHNlY3JldHNjYW5uZXIgZW5kcG9pbnQuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgUGVybWlzc2lvbklkQWxyZWFkeUV4aXN0cyA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJQRVJNSVNTSU9OX0lEX0FMUkVBRFlfRVhJU1RTXCIsXG4gIChwZXJtaXNzaW9uSWQpID0+IFtcbiAgICA0MDAsXG4gICAgYFBlcm1pc3Npb24gd2l0aCBJRCBcIiR7cGVybWlzc2lvbklkfVwiIGFscmVhZHkgZXhpc3RzLiBDaG9vc2UgYSBkaWZmZXJlbnQgSUQuYCxcbiAgICB7XG4gICAgICBwZXJtaXNzaW9uX2lkOiBwZXJtaXNzaW9uSWRcbiAgICB9XG4gIF0sXG4gIChqc29uKSA9PiBbanNvbi5wZXJtaXNzaW9uX2lkXVxuKTtcbnZhciBFbWFpbFJlbmRlcmluZ0Vycm9yID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIkVNQUlMX1JFTkRFUklOR19FUlJPUlwiLFxuICAoZXJyb3IpID0+IFtcbiAgICA0MDAsXG4gICAgYEZhaWxlZCB0byByZW5kZXIgZW1haWwgd2l0aCB0aGVtZTogJHtlcnJvcn1gLFxuICAgIHsgZXJyb3IgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24uZXJyb3JdXG4pO1xudmFyIFJlcXVpcmVzQ3VzdG9tRW1haWxTZXJ2ZXIgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiUkVRVUlSRVNfQ1VTVE9NX0VNQUlMX1NFUlZFUlwiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIGBUaGlzIGFjdGlvbiByZXF1aXJlcyBhIGN1c3RvbSBTTVRQIHNlcnZlci4gUGxlYXNlIGVkaXQgeW91ciBlbWFpbCBzZXJ2ZXIgY29uZmlndXJhdGlvbiBhbmQgdHJ5IGFnYWluLmBcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgSXRlbU5vdEZvdW5kID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIklURU1fTk9UX0ZPVU5EXCIsXG4gIChpdGVtSWQpID0+IFtcbiAgICA0MDQsXG4gICAgYEl0ZW0gd2l0aCBJRCBcIiR7aXRlbUlkfVwiIG5vdCBmb3VuZC5gLFxuICAgIHtcbiAgICAgIGl0ZW1faWQ6IGl0ZW1JZFxuICAgIH1cbiAgXSxcbiAgKGpzb24pID0+IFtqc29uLml0ZW1faWRdXG4pO1xudmFyIEl0ZW1DdXN0b21lclR5cGVEb2VzTm90TWF0Y2ggPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiSVRFTV9DVVNUT01FUl9UWVBFX0RPRVNfTk9UX01BVENIXCIsXG4gIChpdGVtSWQsIGN1c3RvbWVySWQsIGl0ZW1DdXN0b21lclR5cGUsIGFjdHVhbEN1c3RvbWVyVHlwZSkgPT4gW1xuICAgIDQwMCxcbiAgICBgVGhlICR7YWN0dWFsQ3VzdG9tZXJUeXBlfSB3aXRoIElEICR7SlNPTi5zdHJpbmdpZnkoY3VzdG9tZXJJZCl9IGlzIG5vdCBhIHZhbGlkIGN1c3RvbWVyIGZvciB0aGUgaXRlbSB3aXRoIElEICR7SlNPTi5zdHJpbmdpZnkoaXRlbUlkKX0uICR7aXRlbUN1c3RvbWVyVHlwZSA/IGBUaGUgaXRlbSBpcyBjb25maWd1cmVkIHRvIG9ubHkgYmUgYXZhaWxhYmxlIGZvciAke2l0ZW1DdXN0b21lclR5cGV9IGN1c3RvbWVycywgYnV0IHRoZSBjdXN0b21lciBpcyBhICR7YWN0dWFsQ3VzdG9tZXJUeXBlfS5gIDogYFRoZSBpdGVtIGlzIG1pc3NpbmcgYSBjdXN0b21lciB0eXBlIGZpZWxkLiBQbGVhc2UgbWFrZSBzdXJlIGl0IGlzIHNldCB1cCBjb3JyZWN0bHkgaW4geW91ciBwcm9qZWN0IGNvbmZpZ3VyYXRpb24uYH1gLFxuICAgIHtcbiAgICAgIGl0ZW1faWQ6IGl0ZW1JZCxcbiAgICAgIGN1c3RvbWVyX2lkOiBjdXN0b21lcklkLFxuICAgICAgaXRlbV9jdXN0b21lcl90eXBlOiBpdGVtQ3VzdG9tZXJUeXBlID8/IG51bGwsXG4gICAgICBhY3R1YWxfY3VzdG9tZXJfdHlwZTogYWN0dWFsQ3VzdG9tZXJUeXBlXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24uaXRlbV9pZCwganNvbi5jdXN0b21lcl9pZCwganNvbi5pdGVtX2N1c3RvbWVyX3R5cGUgPz8gdm9pZCAwLCBqc29uLmFjdHVhbF9jdXN0b21lcl90eXBlXVxuKTtcbnZhciBDdXN0b21lckRvZXNOb3RFeGlzdCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJDVVNUT01FUl9ET0VTX05PVF9FWElTVFwiLFxuICAoY3VzdG9tZXJJZCkgPT4gW1xuICAgIDQwMCxcbiAgICBgQ3VzdG9tZXIgd2l0aCBJRCAke0pTT04uc3RyaW5naWZ5KGN1c3RvbWVySWQpfSBkb2VzIG5vdCBleGlzdC5gLFxuICAgIHtcbiAgICAgIGN1c3RvbWVyX2lkOiBjdXN0b21lcklkXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24uY3VzdG9tZXJfaWRdXG4pO1xudmFyIE9mZmVyRG9lc05vdEV4aXN0ID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIk9GRkVSX0RPRVNfTk9UX0VYSVNUXCIsXG4gIChvZmZlcklkLCBhY2Nlc3NUeXBlKSA9PiBbXG4gICAgNDAwLFxuICAgIGBPZmZlciB3aXRoIElEICR7SlNPTi5zdHJpbmdpZnkob2ZmZXJJZCl9IGRvZXMgbm90IGV4aXN0JHthY2Nlc3NUeXBlID09PSBcImNsaWVudFwiID8gXCIgb3IgeW91IGRvbid0IGhhdmUgcGVybWlzc2lvbnMgdG8gYWNjZXNzIGl0LlwiIDogXCIuXCJ9YCxcbiAgICB7XG4gICAgICBvZmZlcl9pZDogb2ZmZXJJZCxcbiAgICAgIGFjY2Vzc190eXBlOiBhY2Nlc3NUeXBlXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ub2ZmZXJfaWQsIGpzb24uYWNjZXNzX3R5cGVdXG4pO1xudmFyIE9mZmVyQ3VzdG9tZXJUeXBlRG9lc05vdE1hdGNoID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIk9GRkVSX0NVU1RPTUVSX1RZUEVfRE9FU19OT1RfTUFUQ0hcIixcbiAgKG9mZmVySWQsIGN1c3RvbWVySWQsIG9mZmVyQ3VzdG9tZXJUeXBlLCBhY3R1YWxDdXN0b21lclR5cGUpID0+IFtcbiAgICA0MDAsXG4gICAgYFRoZSAke2FjdHVhbEN1c3RvbWVyVHlwZX0gd2l0aCBJRCAke0pTT04uc3RyaW5naWZ5KGN1c3RvbWVySWQpfSBpcyBub3QgYSB2YWxpZCBjdXN0b21lciBmb3IgdGhlIGlubGluZSBvZmZlciB0aGF0IGhhcyBiZWVuIHBhc3NlZCBpbi4gJHtvZmZlckN1c3RvbWVyVHlwZSA/IGBUaGUgb2ZmZXIgaXMgY29uZmlndXJlZCB0byBvbmx5IGJlIGF2YWlsYWJsZSBmb3IgJHtvZmZlckN1c3RvbWVyVHlwZX0gY3VzdG9tZXJzLCBidXQgdGhlIGN1c3RvbWVyIGlzIGEgJHthY3R1YWxDdXN0b21lclR5cGV9LmAgOiBgVGhlIG9mZmVyIGlzIG1pc3NpbmcgYSBjdXN0b21lciB0eXBlIGZpZWxkLiBQbGVhc2UgbWFrZSBzdXJlIGl0IGlzIHNldCB1cCBjb3JyZWN0bHkgaW4geW91ciBwcm9qZWN0IGNvbmZpZ3VyYXRpb24uYH1gLFxuICAgIHtcbiAgICAgIG9mZmVyX2lkOiBvZmZlcklkID8/IG51bGwsXG4gICAgICBjdXN0b21lcl9pZDogY3VzdG9tZXJJZCxcbiAgICAgIG9mZmVyX2N1c3RvbWVyX3R5cGU6IG9mZmVyQ3VzdG9tZXJUeXBlID8/IG51bGwsXG4gICAgICBhY3R1YWxfY3VzdG9tZXJfdHlwZTogYWN0dWFsQ3VzdG9tZXJUeXBlXG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24ub2ZmZXJfaWQgPz8gdm9pZCAwLCBqc29uLmN1c3RvbWVyX2lkLCBqc29uLm9mZmVyX2N1c3RvbWVyX3R5cGUgPz8gdm9pZCAwLCBqc29uLmFjdHVhbF9jdXN0b21lcl90eXBlXVxuKTtcbnZhciBJdGVtUXVhbnRpdHlJbnN1ZmZpY2llbnRBbW91bnQgPSBjcmVhdGVLbm93bkVycm9yQ29uc3RydWN0b3IoXG4gIEtub3duRXJyb3IsXG4gIFwiSVRFTV9RVUFOVElUWV9JTlNVRkZJQ0lFTlRfQU1PVU5UXCIsXG4gIChpdGVtSWQsIGN1c3RvbWVySWQsIHF1YW50aXR5KSA9PiBbXG4gICAgNDAwLFxuICAgIGBUaGUgaXRlbSB3aXRoIElEICR7SlNPTi5zdHJpbmdpZnkoaXRlbUlkKX0gaGFzIGFuIGluc3VmZmljaWVudCBxdWFudGl0eSBmb3IgdGhlIGN1c3RvbWVyIHdpdGggSUQgJHtKU09OLnN0cmluZ2lmeShjdXN0b21lcklkKX0uIEFuIGF0dGVtcHQgd2FzIG1hZGUgdG8gY2hhcmdlICR7cXVhbnRpdHl9IGNyZWRpdHMuYCxcbiAgICB7XG4gICAgICBpdGVtX2lkOiBpdGVtSWQsXG4gICAgICBjdXN0b21lcl9pZDogY3VzdG9tZXJJZCxcbiAgICAgIHF1YW50aXR5XG4gICAgfVxuICBdLFxuICAoanNvbikgPT4gW2pzb24uaXRlbV9pZCwganNvbi5jdXN0b21lcl9pZCwganNvbi5xdWFudGl0eV1cbik7XG52YXIgU3RyaXBlQWNjb3VudEluZm9Ob3RGb3VuZCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJTVFJJUEVfQUNDT1VOVF9JTkZPX05PVF9GT1VORFwiLFxuICAoKSA9PiBbXG4gICAgNDA0LFxuICAgIFwiU3RyaXBlIGFjY291bnQgaW5mb3JtYXRpb24gbm90IGZvdW5kLiBQbGVhc2UgbWFrZSBzdXJlIHRoZSB1c2VyIGhhcyBvbmJvYXJkZWQgd2l0aCBTdHJpcGUuXCJcbiAgXSxcbiAgKCkgPT4gW11cbik7XG52YXIgV29ya2Zsb3dUb2tlbkRvZXNOb3RFeGlzdCA9IGNyZWF0ZUtub3duRXJyb3JDb25zdHJ1Y3RvcihcbiAgS25vd25FcnJvcixcbiAgXCJXT1JLRkxPV19UT0tFTl9ET0VTX05PVF9FWElTVFwiLFxuICAoKSA9PiBbXG4gICAgNDAwLFxuICAgIFwiVGhlIHdvcmtmbG93IHRva2VuIHlvdSBzcGVjaWZpZWQgZG9lcyBub3QgZXhpc3QuIE1ha2Ugc3VyZSB0aGUgdmFsdWUgaW4geC1zdGFjay13b3JrZmxvdy10b2tlbiBpcyBjb3JyZWN0LlwiXG4gIF0sXG4gICgpID0+IFtdXG4pO1xudmFyIFdvcmtmbG93VG9rZW5FeHBpcmVkID0gY3JlYXRlS25vd25FcnJvckNvbnN0cnVjdG9yKFxuICBLbm93bkVycm9yLFxuICBcIldPUktGTE9XX1RPS0VOX0VYUElSRURcIixcbiAgKCkgPT4gW1xuICAgIDQwMCxcbiAgICBcIlRoZSB3b3JrZmxvdyB0b2tlbiB5b3Ugc3BlY2lmaWVkIGhhcyBleHBpcmVkLiBNYWtlIHN1cmUgdGhlIHZhbHVlIGluIHgtc3RhY2std29ya2Zsb3ctdG9rZW4gaXMgY29ycmVjdC5cIlxuICBdLFxuICAoKSA9PiBbXVxuKTtcbnZhciBLbm93bkVycm9ycyA9IHtcbiAgQ2Fubm90RGVsZXRlQ3VycmVudFNlc3Npb24sXG4gIFVuc3VwcG9ydGVkRXJyb3IsXG4gIEJvZHlQYXJzaW5nRXJyb3IsXG4gIFNjaGVtYUVycm9yLFxuICBBbGxPdmVybG9hZHNGYWlsZWQsXG4gIFByb2plY3RBdXRoZW50aWNhdGlvbkVycm9yLFxuICBQZXJtaXNzaW9uSWRBbHJlYWR5RXhpc3RzLFxuICBDbGlBdXRoRXJyb3IsXG4gIENsaUF1dGhFeHBpcmVkRXJyb3IsXG4gIENsaUF1dGhVc2VkRXJyb3IsXG4gIEludmFsaWRQcm9qZWN0QXV0aGVudGljYXRpb24sXG4gIFByb2plY3RLZXlXaXRob3V0QWNjZXNzVHlwZSxcbiAgSW52YWxpZEFjY2Vzc1R5cGUsXG4gIEFjY2Vzc1R5cGVXaXRob3V0UHJvamVjdElkLFxuICBBY2Nlc3NUeXBlUmVxdWlyZWQsXG4gIENhbm5vdEdldE93blVzZXJXaXRob3V0VXNlcixcbiAgSW5zdWZmaWNpZW50QWNjZXNzVHlwZSxcbiAgSW52YWxpZFB1Ymxpc2hhYmxlQ2xpZW50S2V5LFxuICBJbnZhbGlkU2VjcmV0U2VydmVyS2V5LFxuICBJbnZhbGlkU3VwZXJTZWNyZXRBZG1pbktleSxcbiAgSW52YWxpZEFkbWluQWNjZXNzVG9rZW4sXG4gIFVucGFyc2FibGVBZG1pbkFjY2Vzc1Rva2VuLFxuICBBZG1pbkFjY2Vzc1Rva2VuRXhwaXJlZCxcbiAgSW52YWxpZFByb2plY3RGb3JBZG1pbkFjY2Vzc1Rva2VuLFxuICBBZG1pbkFjY2Vzc1Rva2VuSXNOb3RBZG1pbixcbiAgUHJvamVjdEF1dGhlbnRpY2F0aW9uUmVxdWlyZWQsXG4gIENsaWVudEF1dGhlbnRpY2F0aW9uUmVxdWlyZWQsXG4gIFNlcnZlckF1dGhlbnRpY2F0aW9uUmVxdWlyZWQsXG4gIENsaWVudE9yU2VydmVyQXV0aGVudGljYXRpb25SZXF1aXJlZCxcbiAgQ2xpZW50T3JBZG1pbkF1dGhlbnRpY2F0aW9uUmVxdWlyZWQsXG4gIENsaWVudE9yU2VydmVyT3JBZG1pbkF1dGhlbnRpY2F0aW9uUmVxdWlyZWQsXG4gIEFkbWluQXV0aGVudGljYXRpb25SZXF1aXJlZCxcbiAgRXhwZWN0ZWRJbnRlcm5hbFByb2plY3QsXG4gIFNlc3Npb25BdXRoZW50aWNhdGlvbkVycm9yLFxuICBJbnZhbGlkU2Vzc2lvbkF1dGhlbnRpY2F0aW9uLFxuICBJbnZhbGlkQWNjZXNzVG9rZW4sXG4gIFVucGFyc2FibGVBY2Nlc3NUb2tlbixcbiAgQWNjZXNzVG9rZW5FeHBpcmVkLFxuICBJbnZhbGlkUHJvamVjdEZvckFjY2Vzc1Rva2VuLFxuICBSZWZyZXNoVG9rZW5FcnJvcixcbiAgUHJvdmlkZXJSZWplY3RlZCxcbiAgUmVmcmVzaFRva2VuTm90Rm91bmRPckV4cGlyZWQsXG4gIFVzZXJXaXRoRW1haWxBbHJlYWR5RXhpc3RzLFxuICBFbWFpbE5vdFZlcmlmaWVkLFxuICBVc2VySWREb2VzTm90RXhpc3QsXG4gIFVzZXJOb3RGb3VuZCxcbiAgQXBpS2V5Tm90Rm91bmQsXG4gIFB1YmxpY0FwaUtleUNhbm5vdEJlUmV2b2tlZCxcbiAgUHJvamVjdE5vdEZvdW5kLFxuICBDdXJyZW50UHJvamVjdE5vdEZvdW5kLFxuICBCcmFuY2hEb2VzTm90RXhpc3QsXG4gIFNpZ25VcE5vdEVuYWJsZWQsXG4gIFBhc3N3b3JkQXV0aGVudGljYXRpb25Ob3RFbmFibGVkLFxuICBQYXNza2V5QXV0aGVudGljYXRpb25Ob3RFbmFibGVkLFxuICBBbm9ueW1vdXNBY2NvdW50c05vdEVuYWJsZWQsXG4gIEFub255bW91c0F1dGhlbnRpY2F0aW9uTm90QWxsb3dlZCxcbiAgRW1haWxQYXNzd29yZE1pc21hdGNoLFxuICBSZWRpcmVjdFVybE5vdFdoaXRlbGlzdGVkLFxuICBQYXNzd29yZFJlcXVpcmVtZW50c05vdE1ldCxcbiAgUGFzc3dvcmRUb29TaG9ydCxcbiAgUGFzc3dvcmRUb29Mb25nLFxuICBVc2VyRG9lc05vdEhhdmVQYXNzd29yZCxcbiAgVmVyaWZpY2F0aW9uQ29kZUVycm9yLFxuICBWZXJpZmljYXRpb25Db2RlTm90Rm91bmQsXG4gIFZlcmlmaWNhdGlvbkNvZGVFeHBpcmVkLFxuICBWZXJpZmljYXRpb25Db2RlQWxyZWFkeVVzZWQsXG4gIFZlcmlmaWNhdGlvbkNvZGVNYXhBdHRlbXB0c1JlYWNoZWQsXG4gIFBhc3N3b3JkQ29uZmlybWF0aW9uTWlzbWF0Y2gsXG4gIEVtYWlsQWxyZWFkeVZlcmlmaWVkLFxuICBFbWFpbE5vdEFzc29jaWF0ZWRXaXRoVXNlcixcbiAgRW1haWxJc05vdFByaW1hcnlFbWFpbCxcbiAgUGFzc2tleVJlZ2lzdHJhdGlvbkZhaWxlZCxcbiAgUGFzc2tleVdlYkF1dGhuRXJyb3IsXG4gIFBhc3NrZXlBdXRoZW50aWNhdGlvbkZhaWxlZCxcbiAgUGVybWlzc2lvbk5vdEZvdW5kLFxuICBQZXJtaXNzaW9uU2NvcGVNaXNtYXRjaCxcbiAgQ29udGFpbmVkUGVybWlzc2lvbk5vdEZvdW5kLFxuICBUZWFtTm90Rm91bmQsXG4gIFRlYW1NZW1iZXJzaGlwTm90Rm91bmQsXG4gIEVtYWlsVGVtcGxhdGVBbHJlYWR5RXhpc3RzLFxuICBPQXV0aENvbm5lY3Rpb25Ob3RDb25uZWN0ZWRUb1VzZXIsXG4gIE9BdXRoQ29ubmVjdGlvbkFscmVhZHlDb25uZWN0ZWRUb0Fub3RoZXJVc2VyLFxuICBPQXV0aENvbm5lY3Rpb25Eb2VzTm90SGF2ZVJlcXVpcmVkU2NvcGUsXG4gIE9BdXRoRXh0cmFTY29wZU5vdEF2YWlsYWJsZVdpdGhTaGFyZWRPQXV0aEtleXMsXG4gIE9BdXRoQWNjZXNzVG9rZW5Ob3RBdmFpbGFibGVXaXRoU2hhcmVkT0F1dGhLZXlzLFxuICBJbnZhbGlkT0F1dGhDbGllbnRJZE9yU2VjcmV0LFxuICBJbnZhbGlkU2NvcGUsXG4gIFVzZXJBbHJlYWR5Q29ubmVjdGVkVG9Bbm90aGVyT0F1dGhDb25uZWN0aW9uLFxuICBPdXRlck9BdXRoVGltZW91dCxcbiAgT0F1dGhQcm92aWRlck5vdEZvdW5kT3JOb3RFbmFibGVkLFxuICBPQXV0aFByb3ZpZGVyQWNjb3VudElkQWxyZWFkeVVzZWRGb3JTaWduSW4sXG4gIE11bHRpRmFjdG9yQXV0aGVudGljYXRpb25SZXF1aXJlZCxcbiAgSW52YWxpZFRvdHBDb2RlLFxuICBVc2VyQXV0aGVudGljYXRpb25SZXF1aXJlZCxcbiAgVGVhbU1lbWJlcnNoaXBBbHJlYWR5RXhpc3RzLFxuICBQcm9qZWN0UGVybWlzc2lvblJlcXVpcmVkLFxuICBUZWFtUGVybWlzc2lvblJlcXVpcmVkLFxuICBJbnZhbGlkU2hhcmVkT0F1dGhQcm92aWRlcklkLFxuICBJbnZhbGlkU3RhbmRhcmRPQXV0aFByb3ZpZGVySWQsXG4gIEludmFsaWRBdXRob3JpemF0aW9uQ29kZSxcbiAgVGVhbVBlcm1pc3Npb25Ob3RGb3VuZCxcbiAgT0F1dGhQcm92aWRlckFjY2Vzc0RlbmllZCxcbiAgQ29udGFjdENoYW5uZWxBbHJlYWR5VXNlZEZvckF1dGhCeVNvbWVvbmVFbHNlLFxuICBJbnZhbGlkUG9sbGluZ0NvZGVFcnJvcixcbiAgQXBpS2V5Tm90VmFsaWQsXG4gIEFwaUtleUV4cGlyZWQsXG4gIEFwaUtleVJldm9rZWQsXG4gIFdyb25nQXBpS2V5VHlwZSxcbiAgRW1haWxSZW5kZXJpbmdFcnJvcixcbiAgUmVxdWlyZXNDdXN0b21FbWFpbFNlcnZlcixcbiAgSXRlbU5vdEZvdW5kLFxuICBJdGVtQ3VzdG9tZXJUeXBlRG9lc05vdE1hdGNoLFxuICBDdXN0b21lckRvZXNOb3RFeGlzdCxcbiAgT2ZmZXJEb2VzTm90RXhpc3QsXG4gIE9mZmVyQ3VzdG9tZXJUeXBlRG9lc05vdE1hdGNoLFxuICBJdGVtUXVhbnRpdHlJbnN1ZmZpY2llbnRBbW91bnQsXG4gIFN0cmlwZUFjY291bnRJbmZvTm90Rm91bmQsXG4gIERhdGFWYXVsdFN0b3JlRG9lc05vdEV4aXN0LFxuICBEYXRhVmF1bHRTdG9yZUhhc2hlZEtleURvZXNOb3RFeGlzdCxcbiAgV29ya2Zsb3dUb2tlbkRvZXNOb3RFeGlzdCxcbiAgV29ya2Zsb3dUb2tlbkV4cGlyZWRcbn07XG52YXIga25vd25FcnJvckNvZGVzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbmZvciAoY29uc3QgW18sIEtub3duRXJyb3IyXSBvZiBPYmplY3QuZW50cmllcyhLbm93bkVycm9ycykpIHtcbiAgaWYgKGtub3duRXJyb3JDb2Rlcy5oYXMoS25vd25FcnJvcjIuZXJyb3JDb2RlKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgRHVwbGljYXRlIGtub3duIGVycm9yIGNvZGU6ICR7S25vd25FcnJvcjIuZXJyb3JDb2RlfWApO1xuICB9XG4gIGtub3duRXJyb3JDb2Rlcy5hZGQoS25vd25FcnJvcjIuZXJyb3JDb2RlKTtcbn1cbmV4cG9ydCB7XG4gIEtub3duRXJyb3IsXG4gIEtub3duRXJyb3JzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9a25vd24tZXJyb3JzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/known-errors.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/schema-fields.js":
/*!*********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/schema-fields.js ***!
  \*********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ReplaceFieldWithOwnUserId: () => (/* binding */ ReplaceFieldWithOwnUserId),\n/* harmony export */   accessTokenPayloadSchema: () => (/* binding */ accessTokenPayloadSchema),\n/* harmony export */   accessTokenResponseSchema: () => (/* binding */ accessTokenResponseSchema),\n/* harmony export */   adaptSchema: () => (/* binding */ adaptSchema),\n/* harmony export */   adminAuthTypeSchema: () => (/* binding */ adminAuthTypeSchema),\n/* harmony export */   base64Schema: () => (/* binding */ base64Schema),\n/* harmony export */   basicAuthorizationHeaderSchema: () => (/* binding */ basicAuthorizationHeaderSchema),\n/* harmony export */   clientOrHigherAuthTypeSchema: () => (/* binding */ clientOrHigherAuthTypeSchema),\n/* harmony export */   contactChannelIdSchema: () => (/* binding */ contactChannelIdSchema),\n/* harmony export */   contactChannelIsPrimarySchema: () => (/* binding */ contactChannelIsPrimarySchema),\n/* harmony export */   contactChannelIsVerifiedSchema: () => (/* binding */ contactChannelIsVerifiedSchema),\n/* harmony export */   contactChannelTypeSchema: () => (/* binding */ contactChannelTypeSchema),\n/* harmony export */   contactChannelUsedForAuthSchema: () => (/* binding */ contactChannelUsedForAuthSchema),\n/* harmony export */   contactChannelValueSchema: () => (/* binding */ contactChannelValueSchema),\n/* harmony export */   containedPermissionIdsSchema: () => (/* binding */ containedPermissionIdsSchema),\n/* harmony export */   customPermissionDefinitionIdSchema: () => (/* binding */ customPermissionDefinitionIdSchema),\n/* harmony export */   customerTypeSchema: () => (/* binding */ customerTypeSchema),\n/* harmony export */   dayIntervalOrNeverSchema: () => (/* binding */ dayIntervalOrNeverSchema),\n/* harmony export */   dayIntervalSchema: () => (/* binding */ dayIntervalSchema),\n/* harmony export */   emailHostSchema: () => (/* binding */ emailHostSchema),\n/* harmony export */   emailOtpSignInCallbackUrlSchema: () => (/* binding */ emailOtpSignInCallbackUrlSchema),\n/* harmony export */   emailPasswordSchema: () => (/* binding */ emailPasswordSchema),\n/* harmony export */   emailPortSchema: () => (/* binding */ emailPortSchema),\n/* harmony export */   emailSchema: () => (/* binding */ emailSchema),\n/* harmony export */   emailSenderEmailSchema: () => (/* binding */ emailSenderEmailSchema),\n/* harmony export */   emailSenderNameSchema: () => (/* binding */ emailSenderNameSchema),\n/* harmony export */   emailTemplateListSchema: () => (/* binding */ emailTemplateListSchema),\n/* harmony export */   emailThemeListSchema: () => (/* binding */ emailThemeListSchema),\n/* harmony export */   emailThemeSchema: () => (/* binding */ emailThemeSchema),\n/* harmony export */   emailTypeSchema: () => (/* binding */ emailTypeSchema),\n/* harmony export */   emailUsernameSchema: () => (/* binding */ emailUsernameSchema),\n/* harmony export */   emailVerificationCallbackUrlSchema: () => (/* binding */ emailVerificationCallbackUrlSchema),\n/* harmony export */   ensureObjectSchema: () => (/* binding */ ensureObjectSchema),\n/* harmony export */   handlerPathSchema: () => (/* binding */ handlerPathSchema),\n/* harmony export */   inlineOfferSchema: () => (/* binding */ inlineOfferSchema),\n/* harmony export */   intervalOrNeverSchema: () => (/* binding */ intervalOrNeverSchema),\n/* harmony export */   intervalSchema: () => (/* binding */ intervalSchema),\n/* harmony export */   jsonSchema: () => (/* binding */ jsonSchema),\n/* harmony export */   jsonStringOrEmptySchema: () => (/* binding */ jsonStringOrEmptySchema),\n/* harmony export */   jsonStringSchema: () => (/* binding */ jsonStringSchema),\n/* harmony export */   moneyAmountSchema: () => (/* binding */ moneyAmountSchema),\n/* harmony export */   neonAuthorizationHeaderSchema: () => (/* binding */ neonAuthorizationHeaderSchema),\n/* harmony export */   oauthAccountMergeStrategySchema: () => (/* binding */ oauthAccountMergeStrategySchema),\n/* harmony export */   oauthClientIdSchema: () => (/* binding */ oauthClientIdSchema),\n/* harmony export */   oauthClientSecretSchema: () => (/* binding */ oauthClientSecretSchema),\n/* harmony export */   oauthEnabledSchema: () => (/* binding */ oauthEnabledSchema),\n/* harmony export */   oauthFacebookConfigIdSchema: () => (/* binding */ oauthFacebookConfigIdSchema),\n/* harmony export */   oauthIdSchema: () => (/* binding */ oauthIdSchema),\n/* harmony export */   oauthMicrosoftTenantIdSchema: () => (/* binding */ oauthMicrosoftTenantIdSchema),\n/* harmony export */   oauthProviderAccountIdSchema: () => (/* binding */ oauthProviderAccountIdSchema),\n/* harmony export */   oauthProviderAllowConnectedAccountsSchema: () => (/* binding */ oauthProviderAllowConnectedAccountsSchema),\n/* harmony export */   oauthProviderAllowSignInSchema: () => (/* binding */ oauthProviderAllowSignInSchema),\n/* harmony export */   oauthProviderEmailSchema: () => (/* binding */ oauthProviderEmailSchema),\n/* harmony export */   oauthProviderIdSchema: () => (/* binding */ oauthProviderIdSchema),\n/* harmony export */   oauthProviderProviderConfigIdSchema: () => (/* binding */ oauthProviderProviderConfigIdSchema),\n/* harmony export */   oauthProviderTypeSchema: () => (/* binding */ oauthProviderTypeSchema),\n/* harmony export */   oauthTypeSchema: () => (/* binding */ oauthTypeSchema),\n/* harmony export */   offerPriceSchema: () => (/* binding */ offerPriceSchema),\n/* harmony export */   offerSchema: () => (/* binding */ offerSchema),\n/* harmony export */   passwordSchema: () => (/* binding */ passwordSchema),\n/* harmony export */   permissionDefinitionIdSchema: () => (/* binding */ permissionDefinitionIdSchema),\n/* harmony export */   priceOrIncludeByDefaultSchema: () => (/* binding */ priceOrIncludeByDefaultSchema),\n/* harmony export */   primaryEmailAuthEnabledSchema: () => (/* binding */ primaryEmailAuthEnabledSchema),\n/* harmony export */   primaryEmailSchema: () => (/* binding */ primaryEmailSchema),\n/* harmony export */   primaryEmailVerifiedSchema: () => (/* binding */ primaryEmailVerifiedSchema),\n/* harmony export */   profileImageUrlSchema: () => (/* binding */ profileImageUrlSchema),\n/* harmony export */   projectAllowLocalhostSchema: () => (/* binding */ projectAllowLocalhostSchema),\n/* harmony export */   projectBranchIdSchema: () => (/* binding */ projectBranchIdSchema),\n/* harmony export */   projectClientTeamCreationEnabledSchema: () => (/* binding */ projectClientTeamCreationEnabledSchema),\n/* harmony export */   projectClientUserDeletionEnabledSchema: () => (/* binding */ projectClientUserDeletionEnabledSchema),\n/* harmony export */   projectConfigIdSchema: () => (/* binding */ projectConfigIdSchema),\n/* harmony export */   projectCreateTeamOnSignUpSchema: () => (/* binding */ projectCreateTeamOnSignUpSchema),\n/* harmony export */   projectCreatedAtMillisSchema: () => (/* binding */ projectCreatedAtMillisSchema),\n/* harmony export */   projectCredentialEnabledSchema: () => (/* binding */ projectCredentialEnabledSchema),\n/* harmony export */   projectDescriptionSchema: () => (/* binding */ projectDescriptionSchema),\n/* harmony export */   projectDisplayNameSchema: () => (/* binding */ projectDisplayNameSchema),\n/* harmony export */   projectFullLogoUrlSchema: () => (/* binding */ projectFullLogoUrlSchema),\n/* harmony export */   projectIdSchema: () => (/* binding */ projectIdSchema),\n/* harmony export */   projectIsProductionModeSchema: () => (/* binding */ projectIsProductionModeSchema),\n/* harmony export */   projectLogoUrlSchema: () => (/* binding */ projectLogoUrlSchema),\n/* harmony export */   projectMagicLinkEnabledSchema: () => (/* binding */ projectMagicLinkEnabledSchema),\n/* harmony export */   projectPasskeyEnabledSchema: () => (/* binding */ projectPasskeyEnabledSchema),\n/* harmony export */   projectSignUpEnabledSchema: () => (/* binding */ projectSignUpEnabledSchema),\n/* harmony export */   refreshTokenResponseSchema: () => (/* binding */ refreshTokenResponseSchema),\n/* harmony export */   selectedTeamIdSchema: () => (/* binding */ selectedTeamIdSchema),\n/* harmony export */   serverOrHigherAuthTypeSchema: () => (/* binding */ serverOrHigherAuthTypeSchema),\n/* harmony export */   signInEmailSchema: () => (/* binding */ signInEmailSchema),\n/* harmony export */   signInResponseSchema: () => (/* binding */ signInResponseSchema),\n/* harmony export */   signedUpAtMillisSchema: () => (/* binding */ signedUpAtMillisSchema),\n/* harmony export */   strictEmailSchema: () => (/* binding */ strictEmailSchema),\n/* harmony export */   teamClientMetadataSchema: () => (/* binding */ teamClientMetadataSchema),\n/* harmony export */   teamClientReadOnlyMetadataSchema: () => (/* binding */ teamClientReadOnlyMetadataSchema),\n/* harmony export */   teamCreatedAtMillisSchema: () => (/* binding */ teamCreatedAtMillisSchema),\n/* harmony export */   teamCreatorUserIdSchema: () => (/* binding */ teamCreatorUserIdSchema),\n/* harmony export */   teamDisplayNameSchema: () => (/* binding */ teamDisplayNameSchema),\n/* harmony export */   teamIdSchema: () => (/* binding */ teamIdSchema),\n/* harmony export */   teamInvitationCallbackUrlSchema: () => (/* binding */ teamInvitationCallbackUrlSchema),\n/* harmony export */   teamInvitationEmailSchema: () => (/* binding */ teamInvitationEmailSchema),\n/* harmony export */   teamMemberDisplayNameSchema: () => (/* binding */ teamMemberDisplayNameSchema),\n/* harmony export */   teamMemberProfileImageUrlSchema: () => (/* binding */ teamMemberProfileImageUrlSchema),\n/* harmony export */   teamPermissionDescriptionSchema: () => (/* binding */ teamPermissionDescriptionSchema),\n/* harmony export */   teamProfileImageUrlSchema: () => (/* binding */ teamProfileImageUrlSchema),\n/* harmony export */   teamServerMetadataSchema: () => (/* binding */ teamServerMetadataSchema),\n/* harmony export */   teamSystemPermissions: () => (/* binding */ teamSystemPermissions),\n/* harmony export */   templateThemeIdSchema: () => (/* binding */ templateThemeIdSchema),\n/* harmony export */   urlSchema: () => (/* binding */ urlSchema),\n/* harmony export */   userClientMetadataSchema: () => (/* binding */ userClientMetadataSchema),\n/* harmony export */   userClientReadOnlyMetadataSchema: () => (/* binding */ userClientReadOnlyMetadataSchema),\n/* harmony export */   userDisplayNameSchema: () => (/* binding */ userDisplayNameSchema),\n/* harmony export */   userHasPasswordSchema: () => (/* binding */ userHasPasswordSchema),\n/* harmony export */   userIdOrMeSchema: () => (/* binding */ userIdOrMeSchema),\n/* harmony export */   userIdSchema: () => (/* binding */ userIdSchema),\n/* harmony export */   userLastActiveAtMillisSchema: () => (/* binding */ userLastActiveAtMillisSchema),\n/* harmony export */   userOAuthProviderSchema: () => (/* binding */ userOAuthProviderSchema),\n/* harmony export */   userOtpAuthEnabledMutationSchema: () => (/* binding */ userOtpAuthEnabledMutationSchema),\n/* harmony export */   userOtpAuthEnabledSchema: () => (/* binding */ userOtpAuthEnabledSchema),\n/* harmony export */   userPasskeyAuthEnabledSchema: () => (/* binding */ userPasskeyAuthEnabledSchema),\n/* harmony export */   userPasswordHashMutationSchema: () => (/* binding */ userPasswordHashMutationSchema),\n/* harmony export */   userPasswordMutationSchema: () => (/* binding */ userPasswordMutationSchema),\n/* harmony export */   userServerMetadataSchema: () => (/* binding */ userServerMetadataSchema),\n/* harmony export */   userSpecifiedIdSchema: () => (/* binding */ userSpecifiedIdSchema),\n/* harmony export */   userTotpSecretMutationSchema: () => (/* binding */ userTotpSecretMutationSchema),\n/* harmony export */   wildcardUrlSchema: () => (/* binding */ wildcardUrlSchema),\n/* harmony export */   yupArray: () => (/* binding */ yupArray),\n/* harmony export */   yupBoolean: () => (/* binding */ yupBoolean),\n/* harmony export */   yupDate: () => (/* binding */ yupDate),\n/* harmony export */   yupDefinedAndNonEmptyWhen: () => (/* binding */ yupDefinedAndNonEmptyWhen),\n/* harmony export */   yupDefinedWhen: () => (/* binding */ yupDefinedWhen),\n/* harmony export */   yupMixed: () => (/* binding */ yupMixed),\n/* harmony export */   yupNever: () => (/* binding */ yupNever),\n/* harmony export */   yupNumber: () => (/* binding */ yupNumber),\n/* harmony export */   yupObject: () => (/* binding */ yupObject),\n/* harmony export */   yupObjectWithAutoDefault: () => (/* binding */ yupObjectWithAutoDefault),\n/* harmony export */   yupRecord: () => (/* binding */ yupRecord),\n/* harmony export */   yupString: () => (/* binding */ yupString),\n/* harmony export */   yupTuple: () => (/* binding */ yupTuple),\n/* harmony export */   yupUnion: () => (/* binding */ yupUnion),\n/* harmony export */   yupValidate: () => (/* binding */ yupValidate)\n/* harmony export */ });\n/* harmony import */ var yup__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! yup */ \"(ssr)/./node_modules/.pnpm/yup@1.7.1/node_modules/yup/index.esm.js\");\n/* harmony import */ var _known_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./known-errors.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/known-errors.js\");\n/* harmony import */ var _utils_bytes_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/bytes.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/bytes.js\");\n/* harmony import */ var _utils_currency_constants_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/currency-constants.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/currency-constants.js\");\n/* harmony import */ var _utils_errors_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/errors.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n/* harmony import */ var _utils_http_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/http.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/http.js\");\n/* harmony import */ var _utils_oauth_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/oauth.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/oauth.js\");\n/* harmony import */ var _utils_objects_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils/objects.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/objects.js\");\n/* harmony import */ var _utils_strings_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utils/strings.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/strings.js\");\n/* harmony import */ var _utils_urls_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./utils/urls.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/urls.js\");\n/* harmony import */ var _utils_uuids_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./utils/uuids.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/uuids.js\");\n// src/schema-fields.ts\n\n\n\n\n\n\n\n\n\n\n\nvar MAX_IMAGE_SIZE_BASE64_BYTES = 1e6;\nyup__WEBPACK_IMPORTED_MODULE_0__.addMethod(yup__WEBPACK_IMPORTED_MODULE_0__.string, \"nonEmpty\", function(message) {\n  return this.test(\n    \"non-empty\",\n    message ?? (({ path }) => `${path} must not be empty`),\n    (value) => {\n      return value !== \"\";\n    }\n  );\n});\nyup__WEBPACK_IMPORTED_MODULE_0__.addMethod(yup__WEBPACK_IMPORTED_MODULE_0__.Schema, \"hasNested\", function(path) {\n  if (!path.match(/^[a-zA-Z0-9_$:-]+$/)) throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(`yupSchema.hasNested can currently only be used with alphanumeric keys, underscores, dollar signs, colons, and hyphens. Fix this in the future. Provided key: ${JSON.stringify(path)}`);\n  const schemaInfo = this.meta()?.stackSchemaInfo;\n  if (schemaInfo?.type === \"record\") {\n    return schemaInfo.keySchema.isValidSync(path);\n  } else if (schemaInfo?.type === \"union\") {\n    return schemaInfo.items.some((s) => s.hasNested(path));\n  } else {\n    try {\n      yup__WEBPACK_IMPORTED_MODULE_0__.reach(this, path);\n      return true;\n    } catch (e) {\n      if (e instanceof Error && e.message.includes(\"The schema does not contain the path\")) {\n        return false;\n      }\n      throw e;\n    }\n  }\n});\nyup__WEBPACK_IMPORTED_MODULE_0__.addMethod(yup__WEBPACK_IMPORTED_MODULE_0__.Schema, \"getNested\", function(path) {\n  if (!path.match(/^[a-zA-Z0-9_$:-]+$/)) throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(`yupSchema.getNested can currently only be used with alphanumeric keys, underscores, dollar signs, colons, and hyphens. Fix this in the future. Provided key: ${path}`);\n  if (!this.hasNested(path)) throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(`Tried to call yupSchema.getNested, but key is not present in the schema. Provided key: ${path}`, { path, schema: this });\n  const schemaInfo = this.meta()?.stackSchemaInfo;\n  if (schemaInfo?.type === \"record\") {\n    return schemaInfo.valueSchema;\n  } else if (schemaInfo?.type === \"union\") {\n    const schemasWithNested = schemaInfo.items.filter((s) => s.hasNested(path));\n    return yupUnion(...schemasWithNested.map((s) => s.getNested(path)));\n  } else {\n    return yup__WEBPACK_IMPORTED_MODULE_0__.reach(this, path);\n  }\n});\nasync function yupValidate(schema, obj, options) {\n  try {\n    return await schema.validate(obj, {\n      ...(0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_7__.omit)(options ?? {}, [\"currentUserId\"]),\n      context: {\n        ...options?.context,\n        stackAllowUserIdMe: options?.currentUserId !== void 0\n      }\n    });\n  } catch (error) {\n    if (error instanceof ReplaceFieldWithOwnUserId) {\n      const currentUserId = options?.currentUserId;\n      if (!currentUserId) throw new _known_errors_js__WEBPACK_IMPORTED_MODULE_1__.KnownErrors.CannotGetOwnUserWithoutUser();\n      let pathRemaining = error.path;\n      const fieldPath = [];\n      while (pathRemaining.length > 0) {\n        if (pathRemaining.startsWith(\"[\")) {\n          const index = pathRemaining.indexOf(\"]\");\n          if (index < 0) throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(\"Invalid path\");\n          fieldPath.push(JSON.parse(pathRemaining.slice(1, index)));\n          pathRemaining = pathRemaining.slice(index + 1);\n        } else {\n          let dotIndex = pathRemaining.indexOf(\".\");\n          if (dotIndex === -1) dotIndex = pathRemaining.length;\n          fieldPath.push(pathRemaining.slice(0, dotIndex));\n          pathRemaining = pathRemaining.slice(dotIndex + 1);\n        }\n      }\n      const newObj = (0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_7__.deepPlainClone)(obj);\n      let it = newObj;\n      for (const field of fieldPath.slice(0, -1)) {\n        if (!Object.prototype.hasOwnProperty.call(it, field)) {\n          throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(`Segment ${field} of path ${error.path} not found in object`);\n        }\n        it = it[field];\n      }\n      it[fieldPath[fieldPath.length - 1]] = currentUserId;\n      return await yupValidate(schema, newObj, options);\n    }\n    throw error;\n  }\n}\nvar _idDescription = (identify) => `The unique identifier of the ${identify}`;\nvar _displayNameDescription = (identify) => `Human-readable ${identify} display name. This is not a unique identifier.`;\nvar _clientMetaDataDescription = (identify) => `Client metadata. Used as a data store, accessible from the client side. Do not store information that should not be exposed to the client.`;\nvar _clientReadOnlyMetaDataDescription = (identify) => `Client read-only, server-writable metadata. Used as a data store, accessible from the client side. Do not store information that should not be exposed to the client. The client can read this data, but cannot modify it. This is useful for things like subscription status.`;\nvar _profileImageUrlDescription = (identify) => `URL of the profile image for ${identify}. Can be a Base64 encoded image. Must be smaller than 100KB. Please compress and crop to a square before passing in.`;\nvar _serverMetaDataDescription = (identify) => `Server metadata. Used as a data store, only accessible from the server side. You can store secret information related to the ${identify} here.`;\nvar _atMillisDescription = (identify) => `(the number of milliseconds since epoch, January 1, 1970, UTC)`;\nvar _createdAtMillisDescription = (identify) => `The time the ${identify} was created ${_atMillisDescription(identify)}`;\nvar _signedUpAtMillisDescription = `The time the user signed up ${_atMillisDescription}`;\nvar _lastActiveAtMillisDescription = `The time the user was last active ${_atMillisDescription}`;\nfunction yupString(...args) {\n  return yup__WEBPACK_IMPORTED_MODULE_0__.string(...args).meta({ stackSchemaInfo: { type: \"string\" } });\n}\nfunction yupNumber(...args) {\n  return yup__WEBPACK_IMPORTED_MODULE_0__.number(...args).meta({ stackSchemaInfo: { type: \"number\" } });\n}\nfunction yupBoolean(...args) {\n  return yup__WEBPACK_IMPORTED_MODULE_0__.boolean(...args).meta({ stackSchemaInfo: { type: \"boolean\" } });\n}\nfunction yupDate(...args) {\n  return yup__WEBPACK_IMPORTED_MODULE_0__.date(...args).meta({ stackSchemaInfo: { type: \"date\" } });\n}\nfunction _yupMixedInternal(...args) {\n  return yup__WEBPACK_IMPORTED_MODULE_0__.mixed(...args);\n}\nfunction yupMixed(...args) {\n  return _yupMixedInternal(...args).meta({ stackSchemaInfo: { type: \"mixed\" } });\n}\nfunction yupArray(...args) {\n  return yup__WEBPACK_IMPORTED_MODULE_0__.array(...args).meta({ stackSchemaInfo: { type: \"array\" } });\n}\nfunction yupTuple(schemas) {\n  if (schemas.length === 0) throw new Error(\"yupTuple must have at least one schema\");\n  return yup__WEBPACK_IMPORTED_MODULE_0__.tuple(schemas).meta({ stackSchemaInfo: { type: \"tuple\", items: schemas } });\n}\nfunction yupObjectWithAutoDefault(...args) {\n  const object2 = yup__WEBPACK_IMPORTED_MODULE_0__.object(...args).test(\n    \"no-unknown-object-properties\",\n    ({ path }) => `${path} contains unknown properties`,\n    (value, context) => {\n      if (context.options.context?.noUnknownPathPrefixes?.some((prefix) => context.path.startsWith(prefix))) {\n        if (context.schema.spec.noUnknown !== false) {\n          const availableKeys = new Set(Object.keys(context.schema.fields));\n          const unknownKeys = Object.keys(value ?? {}).filter((key) => !availableKeys.has(key));\n          if (unknownKeys.length > 0) {\n            return context.createError({\n              message: `${context.path || \"Object\"} contains unknown properties: ${unknownKeys.join(\", \")}`,\n              path: context.path,\n              params: { unknownKeys, availableKeys }\n            });\n          }\n        }\n      }\n      return true;\n    }\n  ).meta({ stackSchemaInfo: { type: \"object\" } });\n  return object2;\n}\nfunction yupObject(...args) {\n  const object2 = yupObjectWithAutoDefault(...args);\n  return object2.default(void 0);\n}\nfunction yupNever() {\n  return _yupMixedInternal().meta({ stackSchemaInfo: { type: \"never\" } }).test(\"never\", \"This value should never be reached\", () => false);\n}\nfunction yupUnion(...args) {\n  if (args.length === 0) throw new Error(\"yupUnion must have at least one schema\");\n  return _yupMixedInternal().meta({ stackSchemaInfo: { type: \"union\", items: args } }).test(\"is-one-of\", \"Invalid value\", async (value, context) => {\n    if (value == null) return true;\n    const errors = [];\n    for (const schema of args) {\n      try {\n        await yupValidate(schema, value, context.options);\n        return true;\n      } catch (e) {\n        errors.push(e);\n      }\n    }\n    return context.createError({\n      message: (0,_utils_strings_js__WEBPACK_IMPORTED_MODULE_8__.deindent)`\n        ${context.path} is not matched by any of the provided schemas:\n          ${errors.map((e, i) => (0,_utils_strings_js__WEBPACK_IMPORTED_MODULE_8__.deindent)`\n            Schema ${i}:\n              ${e.errors.join(\"\\n\")}\n          `).join(\"\\n\")}`,\n      path: context.path\n    });\n  });\n}\nfunction yupRecord(keySchema, valueSchema) {\n  return yupObject().meta({ stackSchemaInfo: { type: \"record\", keySchema, valueSchema } }).unknown(true).test(\n    \"record\",\n    \"${path} must be a record of valid values\",\n    async function(value, context) {\n      if (value == null) return true;\n      const { path, createError } = this;\n      if (typeof value !== \"object\") {\n        return createError({ message: `${path} must be an object` });\n      }\n      for (const key of Object.keys(value)) {\n        await yupValidate(keySchema, key, context.options);\n        try {\n          await yupValidate(valueSchema, value[key], {\n            ...context.options,\n            context: {\n              ...context.options.context,\n              path: path ? `${path}.${key}` : key\n            }\n          });\n        } catch (e) {\n          return createError({\n            path: path ? `${path}.${key}` : key,\n            message: e.message\n          });\n        }\n      }\n      return true;\n    }\n  );\n}\nfunction ensureObjectSchema(schema) {\n  if (!(schema instanceof yup__WEBPACK_IMPORTED_MODULE_0__.ObjectSchema)) throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(`assertObjectSchema: schema is not an ObjectSchema: ${schema.describe().type}`);\n  return schema;\n}\nvar adaptSchema = yupMixed();\nvar urlSchema = yupString().test({\n  name: \"no-spaces\",\n  message: (params) => `${params.path} contains spaces`,\n  test: (value) => value == null || !value.includes(\" \")\n}).test({\n  name: \"url\",\n  message: (params) => `${params.path} is not a valid URL`,\n  test: (value) => value == null || (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_9__.isValidUrl)(value)\n});\nvar wildcardUrlSchema = yupString().test({\n  name: \"no-spaces\",\n  message: (params) => `${params.path} contains spaces`,\n  test: (value) => value == null || !value.includes(\" \")\n}).test({\n  name: \"wildcard-url\",\n  message: (params) => `${params.path} is not a valid URL or wildcard URL pattern`,\n  test: (value) => {\n    if (value == null) return true;\n    if (!value.includes(\"*\")) {\n      return (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_9__.isValidUrl)(value);\n    }\n    try {\n      const PLACEHOLDER = \"wildcard-placeholder\";\n      const normalizedUrl = value.replace(/\\*/g, PLACEHOLDER);\n      const url = new URL(normalizedUrl);\n      if (url.username.includes(PLACEHOLDER) || url.password.includes(PLACEHOLDER) || url.pathname.includes(PLACEHOLDER) || url.search.includes(PLACEHOLDER) || url.hash.includes(PLACEHOLDER)) {\n        return false;\n      }\n      if (url.protocol !== \"http:\" && url.protocol !== \"https:\") {\n        return false;\n      }\n      const hostPattern = url.hostname.split(PLACEHOLDER).join(\"*\");\n      return (0,_utils_urls_js__WEBPACK_IMPORTED_MODULE_9__.isValidHostnameWithWildcards)(hostPattern);\n    } catch (e) {\n      return false;\n    }\n  }\n});\nvar jsonSchema = yupMixed().nullable().defined().transform((value) => JSON.parse(JSON.stringify(value)));\nvar jsonStringSchema = yupString().test(\"json\", (params) => `${params.path} is not valid JSON`, (value) => {\n  if (value == null) return true;\n  try {\n    JSON.parse(value);\n    return true;\n  } catch (error) {\n    return false;\n  }\n});\nvar jsonStringOrEmptySchema = yupString().test(\"json\", (params) => `${params.path} is not valid JSON`, (value) => {\n  if (!value) return true;\n  try {\n    JSON.parse(value);\n    return true;\n  } catch (error) {\n    return false;\n  }\n});\nvar base64Schema = yupString().test(\"is-base64\", (params) => `${params.path} is not valid base64`, (value) => {\n  if (value == null) return true;\n  return (0,_utils_bytes_js__WEBPACK_IMPORTED_MODULE_2__.isBase64)(value);\n});\nvar passwordSchema = yupString().max(70);\nvar intervalSchema = yupTuple([yupNumber().min(0).integer().defined(), yupString().oneOf([\"millisecond\", \"second\", \"minute\", \"hour\", \"day\", \"week\", \"month\", \"year\"]).defined()]);\nvar dayIntervalSchema = yupTuple([yupNumber().min(0).integer().defined(), yupString().oneOf([\"day\", \"week\", \"month\", \"year\"]).defined()]);\nvar intervalOrNeverSchema = yupUnion(intervalSchema.defined(), yupString().oneOf([\"never\"]).defined());\nvar dayIntervalOrNeverSchema = yupUnion(dayIntervalSchema.defined(), yupString().oneOf([\"never\"]).defined());\nvar userSpecifiedIdSchema = (idName) => yupString().max(63).matches(/^[a-zA-Z_][a-zA-Z0-9_-]*$/, `${idName} must start with a letter, underscore, or number, and contain only letters, numbers, underscores, and hyphens`);\nvar moneyAmountSchema = (currency) => yupString().test(\"money-amount\", \"Invalid money amount\", (value, context) => {\n  if (value == null) return true;\n  const regex = /^([0-9]+)(\\.([0-9]+))?$/;\n  const match = value.match(regex);\n  if (!match) return context.createError({ message: \"Money amount must be in the format of <number> or <number>.<number>\" });\n  const whole = match[1];\n  const decimals = match[3];\n  if (decimals && decimals.length > currency.decimals) return context.createError({ message: `Too many decimals; ${currency.code} only has ${currency.decimals} decimals` });\n  if (whole !== \"0\" && whole.startsWith(\"0\")) return context.createError({ message: \"Money amount must not have leading zeros\" });\n  return true;\n});\nvar strictEmailSchema = (message) => yupString().email(message).max(256).matches(/^[^.]+(\\.[^.]+)*@.*\\.[^.][^.]+$/, message);\nvar emailSchema = yupString().email();\nvar clientOrHigherAuthTypeSchema = yupString().oneOf([\"client\", \"server\", \"admin\"]).defined();\nvar serverOrHigherAuthTypeSchema = yupString().oneOf([\"server\", \"admin\"]).defined();\nvar adminAuthTypeSchema = yupString().oneOf([\"admin\"]).defined();\nvar projectIdSchema = yupString().test((v) => v === void 0 || v === \"internal\" || (0,_utils_uuids_js__WEBPACK_IMPORTED_MODULE_10__.isUuid)(v)).meta({ openapiField: { description: _idDescription(\"project\"), exampleValue: \"e0b52f4d-dece-408c-af49-d23061bb0f8d\" } });\nvar projectBranchIdSchema = yupString().nonEmpty().max(255).meta({ openapiField: { description: _idDescription(\"project branch\"), exampleValue: \"main\" } });\nvar projectDisplayNameSchema = yupString().meta({ openapiField: { description: _displayNameDescription(\"project\"), exampleValue: \"MyMusic\" } });\nvar projectLogoUrlSchema = urlSchema.max(MAX_IMAGE_SIZE_BASE64_BYTES).meta({ openapiField: { description: \"URL of the logo for the project. This is usually a close to 1:1 image of the company logo.\", exampleValue: \"https://example.com/logo.png\" } });\nvar projectFullLogoUrlSchema = urlSchema.max(MAX_IMAGE_SIZE_BASE64_BYTES).meta({ openapiField: { description: \"URL of the full logo for the project. This is usually a vertical image with the logo and the company name.\", exampleValue: \"https://example.com/full-logo.png\" } });\nvar projectDescriptionSchema = yupString().nullable().meta({ openapiField: { description: \"A human readable description of the project\", exampleValue: \"A music streaming service\" } });\nvar projectCreatedAtMillisSchema = yupNumber().meta({ openapiField: { description: _createdAtMillisDescription(\"project\"), exampleValue: 163e10 } });\nvar projectIsProductionModeSchema = yupBoolean().meta({ openapiField: { description: \"Whether the project is in production mode\", exampleValue: true } });\nvar projectConfigIdSchema = yupString().meta({ openapiField: { description: _idDescription(\"project config\"), exampleValue: \"d09201f0-54f5-40bd-89ff-6d1815ddad24\" } });\nvar projectAllowLocalhostSchema = yupBoolean().meta({ openapiField: { description: \"Whether localhost is allowed as a domain for this project. Should only be allowed in development mode\", exampleValue: true } });\nvar projectCreateTeamOnSignUpSchema = yupBoolean().meta({ openapiField: { description: \"Whether a team should be created for each user that signs up\", exampleValue: true } });\nvar projectMagicLinkEnabledSchema = yupBoolean().meta({ openapiField: { description: \"Whether magic link authentication is enabled for this project\", exampleValue: true } });\nvar projectPasskeyEnabledSchema = yupBoolean().meta({ openapiField: { description: \"Whether passkey authentication is enabled for this project\", exampleValue: true } });\nvar projectClientTeamCreationEnabledSchema = yupBoolean().meta({ openapiField: { description: \"Whether client users can create teams\", exampleValue: true } });\nvar projectClientUserDeletionEnabledSchema = yupBoolean().meta({ openapiField: { description: \"Whether client users can delete their own account from the client\", exampleValue: true } });\nvar projectSignUpEnabledSchema = yupBoolean().meta({ openapiField: { description: \"Whether users can sign up new accounts, or whether they are only allowed to sign in to existing accounts. Regardless of this option, the server API can always create new users with the `POST /users` endpoint.\", exampleValue: true } });\nvar projectCredentialEnabledSchema = yupBoolean().meta({ openapiField: { description: \"Whether email password authentication is enabled for this project\", exampleValue: true } });\nvar oauthIdSchema = yupString().oneOf(_utils_oauth_js__WEBPACK_IMPORTED_MODULE_6__.allProviders).meta({ openapiField: { description: `OAuth provider ID, one of ${_utils_oauth_js__WEBPACK_IMPORTED_MODULE_6__.allProviders.map((x) => `\\`${x}\\``).join(\", \")}`, exampleValue: \"google\" } });\nvar oauthEnabledSchema = yupBoolean().meta({ openapiField: { description: \"Whether the OAuth provider is enabled. If an provider is first enabled, then disabled, it will be shown in the list but with enabled=false\", exampleValue: true } });\nvar oauthTypeSchema = yupString().oneOf([\"shared\", \"standard\"]).meta({ openapiField: { description: 'OAuth provider type, one of shared, standard. \"shared\" uses Stack shared OAuth keys and it is only meant for development. \"standard\" uses your own OAuth keys and will show your logo and company name when signing in with the provider.', exampleValue: \"standard\" } });\nvar oauthClientIdSchema = yupString().meta({ openapiField: { description: 'OAuth client ID. Needs to be specified when using type=\"standard\"', exampleValue: \"google-oauth-client-id\" } });\nvar oauthClientSecretSchema = yupString().meta({ openapiField: { description: 'OAuth client secret. Needs to be specified when using type=\"standard\"', exampleValue: \"google-oauth-client-secret\" } });\nvar oauthFacebookConfigIdSchema = yupString().meta({ openapiField: { description: \"The configuration id for Facebook business login (for things like ads and marketing). This is only required if you are using the standard OAuth with Facebook and you are using Facebook business login.\" } });\nvar oauthMicrosoftTenantIdSchema = yupString().meta({ openapiField: { description: \"The Microsoft tenant id for Microsoft directory. This is only required if you are using the standard OAuth with Microsoft and you have an Azure AD tenant.\" } });\nvar oauthAccountMergeStrategySchema = yupString().oneOf([\"link_method\", \"raise_error\", \"allow_duplicates\"]).meta({ openapiField: { description: \"Determines how to handle OAuth logins that match an existing user by email. `link_method` adds the OAuth method to the existing user. `raise_error` rejects the login with an error. `allow_duplicates` creates a new user.\", exampleValue: \"link_method\" } });\nvar emailTypeSchema = yupString().oneOf([\"shared\", \"standard\"]).meta({ openapiField: { description: 'Email provider type, one of shared, standard. \"shared\" uses Stack shared email provider and it is only meant for development. \"standard\" uses your own email server and will have your email address as the sender.', exampleValue: \"standard\" } });\nvar emailSenderNameSchema = yupString().meta({ openapiField: { description: 'Email sender name. Needs to be specified when using type=\"standard\"', exampleValue: \"Stack\" } });\nvar emailHostSchema = yupString().meta({ openapiField: { description: 'Email host. Needs to be specified when using type=\"standard\"', exampleValue: \"smtp.your-domain.com\" } });\nvar emailPortSchema = yupNumber().min(0).max(65535).meta({ openapiField: { description: 'Email port. Needs to be specified when using type=\"standard\"', exampleValue: 587 } });\nvar emailUsernameSchema = yupString().meta({ openapiField: { description: 'Email username. Needs to be specified when using type=\"standard\"', exampleValue: \"smtp-email\" } });\nvar emailSenderEmailSchema = emailSchema.meta({ openapiField: { description: 'Email sender email. Needs to be specified when using type=\"standard\"', exampleValue: \"example@your-domain.com\" } });\nvar emailPasswordSchema = passwordSchema.meta({ openapiField: { description: 'Email password. Needs to be specified when using type=\"standard\"', exampleValue: \"your-email-password\" } });\nvar handlerPathSchema = yupString().test(\"is-handler-path\", \"Handler path must start with /\", (value) => value?.startsWith(\"/\")).meta({ openapiField: { description: 'Handler path. If you did not setup a custom handler path, it should be \"/handler\" by default. It needs to start with /', exampleValue: \"/handler\" } });\nvar emailThemeSchema = yupString().meta({ openapiField: { description: \"Email theme id for the project. Determines the visual style of emails sent by the project.\" } });\nvar emailThemeListSchema = yupRecord(\n  yupString().uuid(),\n  yupObject({\n    displayName: yupString().meta({ openapiField: { description: \"Email theme name\", exampleValue: \"Default Light\" } }).defined(),\n    tsxSource: yupString().meta({ openapiField: { description: \"Email theme source code tsx component\" } }).defined()\n  })\n).meta({ openapiField: { description: \"Record of email theme IDs to their display name and source code\" } });\nvar templateThemeIdSchema = yupMixed().test((v) => v === void 0 || v === false || v === null || typeof v === \"string\" && (0,_utils_uuids_js__WEBPACK_IMPORTED_MODULE_10__.isUuid)(v)).meta({ openapiField: { description: \"Email theme id for the template\" } }).optional();\nvar emailTemplateListSchema = yupRecord(\n  yupString().uuid(),\n  yupObject({\n    displayName: yupString().meta({ openapiField: { description: \"Email template name\", exampleValue: \"Email Verification\" } }).defined(),\n    tsxSource: yupString().meta({ openapiField: { description: \"Email template source code tsx component\" } }).defined(),\n    // themeId can be one of three values:\n    // 1. A valid theme id\n    // 2. false, which means the template uses no theme\n    // 3. undefined/not given, which means the template uses the project's active theme\n    themeId: templateThemeIdSchema\n  })\n).meta({ openapiField: { description: \"Record of email template IDs to their display name and source code\" } });\nvar customerTypeSchema = yupString().oneOf([\"user\", \"team\", \"custom\"]);\nvar validateHasAtLeastOneSupportedCurrency = (value, context) => {\n  if (!value) return true;\n  const currencies = Object.keys(value).filter((key) => _utils_currency_constants_js__WEBPACK_IMPORTED_MODULE_3__.SUPPORTED_CURRENCIES.some((c) => c.code === key));\n  if (currencies.length === 0) {\n    return context.createError({ message: \"At least one currency is required\" });\n  }\n  return true;\n};\nvar offerPriceSchema = yupObject({\n  ...(0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_7__.typedFromEntries)(_utils_currency_constants_js__WEBPACK_IMPORTED_MODULE_3__.SUPPORTED_CURRENCIES.map((currency) => [currency.code, moneyAmountSchema(currency).optional()])),\n  interval: dayIntervalSchema.optional(),\n  serverOnly: yupBoolean(),\n  freeTrial: dayIntervalSchema.optional()\n}).test(\"at-least-one-currency\", (value, context) => validateHasAtLeastOneSupportedCurrency(value, context));\nvar priceOrIncludeByDefaultSchema = yupUnion(\n  yupString().oneOf([\"include-by-default\"]).meta({ openapiField: { description: \"Makes this item free and includes it by default for all customers.\", exampleValue: \"include-by-default\" } }),\n  yupRecord(\n    userSpecifiedIdSchema(\"priceId\"),\n    offerPriceSchema\n  )\n);\nvar offerSchema = yupObject({\n  displayName: yupString(),\n  groupId: userSpecifiedIdSchema(\"groupId\").optional().meta({ openapiField: { description: \"The ID of the group this offer belongs to. Within a group, all offers are mutually exclusive unless they are an add-on to another offer in the group.\", exampleValue: \"group-id\" } }),\n  isAddOnTo: yupUnion(\n    yupBoolean().isFalse(),\n    yupRecord(\n      userSpecifiedIdSchema(\"offerId\"),\n      yupBoolean().isTrue().defined()\n    )\n  ).optional().meta({ openapiField: { description: \"The offers that this offer is an add-on to. If this is set, the customer must already have one of the offers in the record to be able to purchase this offer.\", exampleValue: { \"offer-id\": true } } }),\n  customerType: customerTypeSchema.defined(),\n  freeTrial: dayIntervalSchema.optional(),\n  serverOnly: yupBoolean(),\n  stackable: yupBoolean(),\n  prices: priceOrIncludeByDefaultSchema.defined(),\n  includedItems: yupRecord(\n    userSpecifiedIdSchema(\"itemId\"),\n    yupObject({\n      quantity: yupNumber().defined(),\n      repeat: dayIntervalOrNeverSchema.optional(),\n      expires: yupString().oneOf([\"never\", \"when-purchase-expires\", \"when-repeated\"]).optional()\n    })\n  )\n});\nvar inlineOfferSchema = yupObject({\n  display_name: yupString().defined(),\n  customer_type: customerTypeSchema.defined(),\n  free_trial: dayIntervalSchema.optional(),\n  server_only: yupBoolean().oneOf([true]).default(true),\n  prices: yupRecord(\n    userSpecifiedIdSchema(\"priceId\"),\n    yupObject({\n      ...(0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_7__.typedFromEntries)(_utils_currency_constants_js__WEBPACK_IMPORTED_MODULE_3__.SUPPORTED_CURRENCIES.map((currency) => [currency.code, moneyAmountSchema(currency).optional()])),\n      interval: dayIntervalSchema.optional(),\n      free_trial: dayIntervalSchema.optional()\n    }).test(\"at-least-one-currency\", (value, context) => validateHasAtLeastOneSupportedCurrency(value, context))\n  ),\n  included_items: yupRecord(\n    userSpecifiedIdSchema(\"itemId\"),\n    yupObject({\n      quantity: yupNumber(),\n      repeat: dayIntervalOrNeverSchema.optional(),\n      expires: yupString().oneOf([\"never\", \"when-purchase-expires\", \"when-repeated\"]).optional()\n    })\n  )\n});\nvar ReplaceFieldWithOwnUserId = class extends Error {\n  constructor(path) {\n    super(`This error should be caught by whoever validated the schema, and the field in the path '${path}' should be replaced with the current user's id. This is a workaround to yup not providing access to the context inside the transform function.`);\n    this.path = path;\n  }\n};\nvar userIdMeSentinelUuid = \"cad564fd-f81b-43f4-b390-98abf3fcc17e\";\nvar userIdOrMeSchema = yupString().uuid().transform((v) => {\n  if (v === \"me\") return userIdMeSentinelUuid;\n  else return v;\n}).test((v, context) => {\n  if (!(\"stackAllowUserIdMe\" in (context.options.context ?? {}))) throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(\"userIdOrMeSchema is not allowed in this context. Make sure you're using yupValidate from schema-fields.ts to validate, instead of schema.validate(...).\");\n  if (!context.options.context?.stackAllowUserIdMe) throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_4__.StackAssertionError(\"userIdOrMeSchema is not allowed in this context. Make sure you're passing in the currentUserId option in yupValidate.\");\n  if (v === userIdMeSentinelUuid) throw new ReplaceFieldWithOwnUserId(context.path);\n  return true;\n}).meta({ openapiField: { description: \"The ID of the user, or the special value `me` for the currently authenticated user\", exampleValue: \"3241a285-8329-4d69-8f3d-316e08cf140c\" } });\nvar userIdSchema = yupString().uuid().meta({ openapiField: { description: _idDescription(\"user\"), exampleValue: \"3241a285-8329-4d69-8f3d-316e08cf140c\" } });\nvar primaryEmailSchema = emailSchema.meta({ openapiField: { description: \"Primary email\", exampleValue: \"johndoe@example.com\" } });\nvar primaryEmailAuthEnabledSchema = yupBoolean().meta({ openapiField: { description: \"Whether the primary email is used for authentication. If this is set to `false`, the user will not be able to sign in with the primary email with password or OTP\", exampleValue: true } });\nvar primaryEmailVerifiedSchema = yupBoolean().meta({ openapiField: { description: \"Whether the primary email has been verified to belong to this user\", exampleValue: true } });\nvar userDisplayNameSchema = yupString().nullable().max(256).meta({ openapiField: { description: _displayNameDescription(\"user\"), exampleValue: \"John Doe\" } });\nvar selectedTeamIdSchema = yupString().uuid().meta({ openapiField: { description: \"ID of the team currently selected by the user\", exampleValue: \"team-id\" } });\nvar profileImageUrlSchema = urlSchema.max(MAX_IMAGE_SIZE_BASE64_BYTES).meta({ openapiField: { description: _profileImageUrlDescription(\"user\"), exampleValue: \"https://example.com/image.jpg\" } });\nvar signedUpAtMillisSchema = yupNumber().meta({ openapiField: { description: _signedUpAtMillisDescription, exampleValue: 163e10 } });\nvar userClientMetadataSchema = jsonSchema.meta({ openapiField: { description: _clientMetaDataDescription(\"user\"), exampleValue: { key: \"value\" } } });\nvar userClientReadOnlyMetadataSchema = jsonSchema.meta({ openapiField: { description: _clientReadOnlyMetaDataDescription(\"user\"), exampleValue: { key: \"value\" } } });\nvar userServerMetadataSchema = jsonSchema.meta({ openapiField: { description: _serverMetaDataDescription(\"user\"), exampleValue: { key: \"value\" } } });\nvar userOAuthProviderSchema = yupObject({\n  id: yupString().defined(),\n  type: yupString().oneOf(_utils_oauth_js__WEBPACK_IMPORTED_MODULE_6__.allProviders).defined(),\n  provider_user_id: yupString().defined()\n});\nvar userLastActiveAtMillisSchema = yupNumber().nullable().meta({ openapiField: { description: _lastActiveAtMillisDescription, exampleValue: 163e10 } });\nvar userPasskeyAuthEnabledSchema = yupBoolean().meta({ openapiField: { hidden: true, description: \"Whether the user has passkeys enabled\", exampleValue: false } });\nvar userOtpAuthEnabledSchema = yupBoolean().meta({ openapiField: { hidden: true, description: \"Whether the user has OTP/magic link enabled. \", exampleValue: true } });\nvar userOtpAuthEnabledMutationSchema = yupBoolean().meta({ openapiField: { hidden: true, description: \"Whether the user has OTP/magic link enabled. Note that only accounts with verified emails can sign-in with OTP.\", exampleValue: true } });\nvar userHasPasswordSchema = yupBoolean().meta({ openapiField: { hidden: true, description: \"Whether the user has a password set. If the user does not have a password set, they will not be able to sign in with email/password.\", exampleValue: true } });\nvar userPasswordMutationSchema = passwordSchema.nullable().meta({ openapiField: { description: \"Sets the user's password. Doing so revokes all current sessions.\", exampleValue: \"my-new-password\" } }).max(70);\nvar userPasswordHashMutationSchema = yupString().nonEmpty().meta({ openapiField: { description: \"If `password` is not given, sets the user's password hash to the given string in Modular Crypt Format (ex.: `$2a$10$VIhIOofSMqGdGlL4wzE//e.77dAQGqNtF/1dT7bqCrVtQuInWy2qi`). Doing so revokes all current sessions.\" } });\nvar userTotpSecretMutationSchema = base64Schema.nullable().meta({ openapiField: { description: \"Enables 2FA and sets a TOTP secret for the user. Set to null to disable 2FA.\", exampleValue: \"dG90cC1zZWNyZXQ=\" } });\nvar accessTokenPayloadSchema = yupObject({\n  sub: yupString().defined(),\n  exp: yupNumber().optional(),\n  iss: yupString().defined(),\n  aud: yupString().defined(),\n  project_id: yupString().defined(),\n  branch_id: yupString().defined(),\n  refresh_token_id: yupString().defined(),\n  role: yupString().oneOf([\"authenticated\"]).defined(),\n  name: yupString().defined().nullable(),\n  email: yupString().defined().nullable(),\n  email_verified: yupBoolean().defined(),\n  selected_team_id: yupString().defined().nullable(),\n  is_anonymous: yupBoolean().defined()\n});\nvar signInEmailSchema = strictEmailSchema(void 0).meta({ openapiField: { description: \"The email to sign in with.\", exampleValue: \"johndoe@example.com\" } });\nvar emailOtpSignInCallbackUrlSchema = urlSchema.meta({ openapiField: { description: \"The base callback URL to construct the magic link from. A query parameter `code` with the verification code will be appended to it. The page should then make a request to the `/auth/otp/sign-in` endpoint.\", exampleValue: \"https://example.com/handler/magic-link-callback\" } });\nvar emailVerificationCallbackUrlSchema = urlSchema.meta({ openapiField: { description: \"The base callback URL to construct a verification link for the verification e-mail. A query parameter `code` with the verification code will be appended to it. The page should then make a request to the `/contact-channels/verify` endpoint.\", exampleValue: \"https://example.com/handler/email-verification\" } });\nvar accessTokenResponseSchema = yupString().meta({ openapiField: { description: \"Short-lived access token that can be used to authenticate the user\", exampleValue: \"eyJhmMiJB2TO...diI4QT\" } });\nvar refreshTokenResponseSchema = yupString().meta({ openapiField: { description: \"Long-lived refresh token that can be used to obtain a new access token\", exampleValue: \"i8ns3aq2...14y\" } });\nvar signInResponseSchema = yupObject({\n  refresh_token: refreshTokenResponseSchema.defined(),\n  access_token: accessTokenResponseSchema.defined(),\n  is_new_user: yupBoolean().meta({ openapiField: { description: \"Whether the user is a new user\", exampleValue: true } }).defined(),\n  user_id: userIdSchema.defined()\n});\nvar teamSystemPermissions = [\n  \"$update_team\",\n  \"$delete_team\",\n  \"$read_members\",\n  \"$remove_members\",\n  \"$invite_members\",\n  \"$manage_api_keys\"\n];\nvar permissionDefinitionIdSchema = yupString().matches(/^\\$?[a-z0-9_:]+$/, 'Only lowercase letters, numbers, \":\", \"_\" and optional \"$\" at the beginning are allowed').test(\"is-system-permission\", \"System permissions must start with a dollar sign\", (value, ctx) => {\n  if (!value) return true;\n  if (value.startsWith(\"$\") && !teamSystemPermissions.includes(value)) {\n    return ctx.createError({ message: \"Invalid system permission\" });\n  }\n  return true;\n}).meta({ openapiField: { description: `The permission ID used to uniquely identify a permission. Can either be a custom permission with lowercase letters, numbers, \\`:\\`, and \\`_\\` characters, or one of the system permissions: ${teamSystemPermissions.map((x) => `\\`${x}\\``).join(\", \")}`, exampleValue: \"read_secret_info\" } });\nvar customPermissionDefinitionIdSchema = yupString().matches(/^[a-z0-9_:]+$/, 'Only lowercase letters, numbers, \":\", \"_\" are allowed').meta({ openapiField: { description: 'The permission ID used to uniquely identify a permission. Can only contain lowercase letters, numbers, \":\", and \"_\" characters', exampleValue: \"read_secret_info\" } });\nvar teamPermissionDescriptionSchema = yupString().meta({ openapiField: { description: \"A human-readable description of the permission\", exampleValue: \"Read secret information\" } });\nvar containedPermissionIdsSchema = yupArray(permissionDefinitionIdSchema.defined()).meta({ openapiField: { description: \"The IDs of the permissions that are contained in this permission\", exampleValue: [\"read_public_info\"] } });\nvar teamIdSchema = yupString().uuid().meta({ openapiField: { description: _idDescription(\"team\"), exampleValue: \"ad962777-8244-496a-b6a2-e0c6a449c79e\" } });\nvar teamDisplayNameSchema = yupString().meta({ openapiField: { description: _displayNameDescription(\"team\"), exampleValue: \"My Team\" } });\nvar teamProfileImageUrlSchema = urlSchema.max(1e6).meta({ openapiField: { description: _profileImageUrlDescription(\"team\"), exampleValue: \"https://example.com/image.jpg\" } });\nvar teamClientMetadataSchema = jsonSchema.meta({ openapiField: { description: _clientMetaDataDescription(\"team\"), exampleValue: { key: \"value\" } } });\nvar teamClientReadOnlyMetadataSchema = jsonSchema.meta({ openapiField: { description: _clientReadOnlyMetaDataDescription(\"team\"), exampleValue: { key: \"value\" } } });\nvar teamServerMetadataSchema = jsonSchema.meta({ openapiField: { description: _serverMetaDataDescription(\"team\"), exampleValue: { key: \"value\" } } });\nvar teamCreatedAtMillisSchema = yupNumber().meta({ openapiField: { description: _createdAtMillisDescription(\"team\"), exampleValue: 163e10 } });\nvar teamInvitationEmailSchema = emailSchema.meta({ openapiField: { description: \"The email of the user to invite.\", exampleValue: \"johndoe@example.com\" } });\nvar teamInvitationCallbackUrlSchema = urlSchema.meta({ openapiField: { description: \"The base callback URL to construct an invite link with. A query parameter `code` with the verification code will be appended to it. The page should then make a request to the `/team-invitations/accept` endpoint.\", exampleValue: \"https://example.com/handler/team-invitation\" } });\nvar teamCreatorUserIdSchema = userIdOrMeSchema.meta({ openapiField: { description: 'The ID of the creator of the team. If not specified, the user will not be added to the team. Can be either \"me\" or the ID of the user. Only used on the client side.', exampleValue: \"me\" } });\nvar teamMemberDisplayNameSchema = yupString().meta({ openapiField: { description: _displayNameDescription(\"team member\") + \" Note that this is separate from the display_name of the user.\", exampleValue: \"John Doe\" } });\nvar teamMemberProfileImageUrlSchema = urlSchema.max(1e6).meta({ openapiField: { description: _profileImageUrlDescription(\"team member\"), exampleValue: \"https://example.com/image.jpg\" } });\nvar contactChannelIdSchema = yupString().uuid().meta({ openapiField: { description: _idDescription(\"contact channel\"), exampleValue: \"b3d396b8-c574-4c80-97b3-50031675ceb2\" } });\nvar contactChannelTypeSchema = yupString().oneOf([\"email\"]).meta({ openapiField: { description: `The type of the contact channel. Currently only \"email\" is supported.`, exampleValue: \"email\" } });\nvar contactChannelValueSchema = yupString().when(\"type\", {\n  is: \"email\",\n  then: (schema) => schema.email()\n}).meta({ openapiField: { description: \"The value of the contact channel. For email, this should be a valid email address.\", exampleValue: \"johndoe@example.com\" } });\nvar contactChannelUsedForAuthSchema = yupBoolean().meta({ openapiField: { description: \"Whether the contact channel is used for authentication. If this is set to `true`, the user will be able to sign in with the contact channel with password or OTP.\", exampleValue: true } });\nvar contactChannelIsVerifiedSchema = yupBoolean().meta({ openapiField: { description: \"Whether the contact channel has been verified. If this is set to `true`, the contact channel has been verified to belong to the user.\", exampleValue: true } });\nvar contactChannelIsPrimarySchema = yupBoolean().meta({ openapiField: { description: \"Whether the contact channel is the primary contact channel. If this is set to `true`, it will be used for authentication and notifications by default.\", exampleValue: true } });\nvar oauthProviderIdSchema = yupString().uuid().meta({ openapiField: { description: _idDescription(\"OAuth provider\"), exampleValue: \"b3d396b8-c574-4c80-97b3-50031675ceb2\" } });\nvar oauthProviderEmailSchema = emailSchema.meta({ openapiField: { description: \"Email of the OAuth provider. This is used to display and identify the OAuth provider in the UI.\", exampleValue: \"test@gmail.com\" } });\nvar oauthProviderTypeSchema = yupString().oneOf(_utils_oauth_js__WEBPACK_IMPORTED_MODULE_6__.allProviders).meta({ openapiField: { description: `OAuth provider type, one of ${_utils_oauth_js__WEBPACK_IMPORTED_MODULE_6__.allProviders.map((x) => `\\`${x}\\``).join(\", \")}`, exampleValue: \"google\" } });\nvar oauthProviderAllowSignInSchema = yupBoolean().meta({ openapiField: { description: \"Whether the user can use this OAuth provider to sign in. Only one OAuth provider per type can have this set to `true`.\", exampleValue: true } });\nvar oauthProviderAllowConnectedAccountsSchema = yupBoolean().meta({ openapiField: { description: \"Whether the user can use this OAuth provider as connected account. Multiple OAuth providers per type can have this set to `true`.\", exampleValue: true } });\nvar oauthProviderAccountIdSchema = yupString().meta({ openapiField: { description: \"Account ID of the OAuth provider. This uniquely identifies the account on the provider side.\", exampleValue: \"google-account-id-12345\" } });\nvar oauthProviderProviderConfigIdSchema = yupString().meta({ openapiField: { description: \"Provider config ID of the OAuth provider. This uniquely identifies the provider config on config.json file\", exampleValue: \"google\" } });\nvar basicAuthorizationHeaderSchema = yupString().test(\"is-basic-authorization-header\", 'Authorization header must be in the format \"Basic <base64>\"', (value) => {\n  if (!value) return true;\n  return (0,_utils_http_js__WEBPACK_IMPORTED_MODULE_5__.decodeBasicAuthorizationHeader)(value) !== null;\n});\nvar neonAuthorizationHeaderSchema = basicAuthorizationHeaderSchema.test(\"is-authorization-header\", \"Invalid client_id:client_secret values; did you use the correct values for the integration?\", (value) => {\n  if (!value) return true;\n  const [clientId, clientSecret] = (0,_utils_http_js__WEBPACK_IMPORTED_MODULE_5__.decodeBasicAuthorizationHeader)(value) ?? (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_4__.throwErr)(`Authz header invalid? This should've been validated by basicAuthorizationHeaderSchema: ${value}`);\n  for (const neonClientConfig of JSON.parse(process.env.STACK_INTEGRATION_CLIENTS_CONFIG || \"[]\")) {\n    if (clientId === neonClientConfig.client_id && clientSecret === neonClientConfig.client_secret) return true;\n  }\n  return false;\n});\nfunction yupDefinedWhen(schema, triggers) {\n  const entries = Object.entries(triggers);\n  return schema.when(entries.map(([key]) => key), {\n    is: (...values) => entries.every(([key, value], index) => value === values[index]),\n    then: (schema2) => schema2.defined(),\n    otherwise: (schema2) => schema2.optional()\n  });\n}\nfunction yupDefinedAndNonEmptyWhen(schema, triggers) {\n  const entries = Object.entries(triggers);\n  return schema.when(entries.map(([key]) => key), {\n    is: (...values) => entries.every(([key, value], index) => value === values[index]),\n    then: (schema2) => schema2.defined().nonEmpty(),\n    otherwise: (schema2) => schema2.optional()\n  });\n}\n\n//# sourceMappingURL=schema-fields.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vc2NoZW1hLWZpZWxkcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQzJCO0FBQ3FCO0FBQ0o7QUFDeUI7QUFDSDtBQUNEO0FBQ2pCO0FBQzRCO0FBQzlCO0FBQzZCO0FBQ2pDO0FBQzFDO0FBQ0EsMENBQWEsQ0FBQyx1Q0FBVTtBQUN4QjtBQUNBO0FBQ0EsbUJBQW1CLE1BQU0sUUFBUSxNQUFNO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELDBDQUFhLENBQUMsdUNBQVU7QUFDeEIsbURBQW1ELGlFQUFtQixpS0FBaUsscUJBQXFCO0FBQzVQO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBLE1BQU0sc0NBQVM7QUFDZjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsMENBQWEsQ0FBQyx1Q0FBVTtBQUN4QixtREFBbUQsaUVBQW1CLGlLQUFpSyxLQUFLO0FBQzVPLHVDQUF1QyxpRUFBbUIsMkZBQTJGLEtBQUssS0FBSyxvQkFBb0I7QUFDbkw7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0osV0FBVyxzQ0FBUztBQUNw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QTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUE0SUU7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2dmeDJlZGVub2FzaXMvRG93bmxvYWRzL0RldmVsb3BtZW50L0VzcGFkYS9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vc2NoZW1hLWZpZWxkcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvc2NoZW1hLWZpZWxkcy50c1xuaW1wb3J0ICogYXMgeXVwIGZyb20gXCJ5dXBcIjtcbmltcG9ydCB7IEtub3duRXJyb3JzIH0gZnJvbSBcIi4va25vd24tZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBpc0Jhc2U2NCB9IGZyb20gXCIuL3V0aWxzL2J5dGVzLmpzXCI7XG5pbXBvcnQgeyBTVVBQT1JURURfQ1VSUkVOQ0lFUyB9IGZyb20gXCIuL3V0aWxzL2N1cnJlbmN5LWNvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciwgdGhyb3dFcnIgfSBmcm9tIFwiLi91dGlscy9lcnJvcnMuanNcIjtcbmltcG9ydCB7IGRlY29kZUJhc2ljQXV0aG9yaXphdGlvbkhlYWRlciB9IGZyb20gXCIuL3V0aWxzL2h0dHAuanNcIjtcbmltcG9ydCB7IGFsbFByb3ZpZGVycyB9IGZyb20gXCIuL3V0aWxzL29hdXRoLmpzXCI7XG5pbXBvcnQgeyBkZWVwUGxhaW5DbG9uZSwgb21pdCwgdHlwZWRGcm9tRW50cmllcyB9IGZyb20gXCIuL3V0aWxzL29iamVjdHMuanNcIjtcbmltcG9ydCB7IGRlaW5kZW50IH0gZnJvbSBcIi4vdXRpbHMvc3RyaW5ncy5qc1wiO1xuaW1wb3J0IHsgaXNWYWxpZEhvc3RuYW1lV2l0aFdpbGRjYXJkcywgaXNWYWxpZFVybCB9IGZyb20gXCIuL3V0aWxzL3VybHMuanNcIjtcbmltcG9ydCB7IGlzVXVpZCB9IGZyb20gXCIuL3V0aWxzL3V1aWRzLmpzXCI7XG52YXIgTUFYX0lNQUdFX1NJWkVfQkFTRTY0X0JZVEVTID0gMWU2O1xueXVwLmFkZE1ldGhvZCh5dXAuc3RyaW5nLCBcIm5vbkVtcHR5XCIsIGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgcmV0dXJuIHRoaXMudGVzdChcbiAgICBcIm5vbi1lbXB0eVwiLFxuICAgIG1lc3NhZ2UgPz8gKCh7IHBhdGggfSkgPT4gYCR7cGF0aH0gbXVzdCBub3QgYmUgZW1wdHlgKSxcbiAgICAodmFsdWUpID0+IHtcbiAgICAgIHJldHVybiB2YWx1ZSAhPT0gXCJcIjtcbiAgICB9XG4gICk7XG59KTtcbnl1cC5hZGRNZXRob2QoeXVwLlNjaGVtYSwgXCJoYXNOZXN0ZWRcIiwgZnVuY3Rpb24ocGF0aCkge1xuICBpZiAoIXBhdGgubWF0Y2goL15bYS16QS1aMC05XyQ6LV0rJC8pKSB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihgeXVwU2NoZW1hLmhhc05lc3RlZCBjYW4gY3VycmVudGx5IG9ubHkgYmUgdXNlZCB3aXRoIGFscGhhbnVtZXJpYyBrZXlzLCB1bmRlcnNjb3JlcywgZG9sbGFyIHNpZ25zLCBjb2xvbnMsIGFuZCBoeXBoZW5zLiBGaXggdGhpcyBpbiB0aGUgZnV0dXJlLiBQcm92aWRlZCBrZXk6ICR7SlNPTi5zdHJpbmdpZnkocGF0aCl9YCk7XG4gIGNvbnN0IHNjaGVtYUluZm8gPSB0aGlzLm1ldGEoKT8uc3RhY2tTY2hlbWFJbmZvO1xuICBpZiAoc2NoZW1hSW5mbz8udHlwZSA9PT0gXCJyZWNvcmRcIikge1xuICAgIHJldHVybiBzY2hlbWFJbmZvLmtleVNjaGVtYS5pc1ZhbGlkU3luYyhwYXRoKTtcbiAgfSBlbHNlIGlmIChzY2hlbWFJbmZvPy50eXBlID09PSBcInVuaW9uXCIpIHtcbiAgICByZXR1cm4gc2NoZW1hSW5mby5pdGVtcy5zb21lKChzKSA9PiBzLmhhc05lc3RlZChwYXRoKSk7XG4gIH0gZWxzZSB7XG4gICAgdHJ5IHtcbiAgICAgIHl1cC5yZWFjaCh0aGlzLCBwYXRoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5tZXNzYWdlLmluY2x1ZGVzKFwiVGhlIHNjaGVtYSBkb2VzIG5vdCBjb250YWluIHRoZSBwYXRoXCIpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9XG59KTtcbnl1cC5hZGRNZXRob2QoeXVwLlNjaGVtYSwgXCJnZXROZXN0ZWRcIiwgZnVuY3Rpb24ocGF0aCkge1xuICBpZiAoIXBhdGgubWF0Y2goL15bYS16QS1aMC05XyQ6LV0rJC8pKSB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihgeXVwU2NoZW1hLmdldE5lc3RlZCBjYW4gY3VycmVudGx5IG9ubHkgYmUgdXNlZCB3aXRoIGFscGhhbnVtZXJpYyBrZXlzLCB1bmRlcnNjb3JlcywgZG9sbGFyIHNpZ25zLCBjb2xvbnMsIGFuZCBoeXBoZW5zLiBGaXggdGhpcyBpbiB0aGUgZnV0dXJlLiBQcm92aWRlZCBrZXk6ICR7cGF0aH1gKTtcbiAgaWYgKCF0aGlzLmhhc05lc3RlZChwYXRoKSkgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoYFRyaWVkIHRvIGNhbGwgeXVwU2NoZW1hLmdldE5lc3RlZCwgYnV0IGtleSBpcyBub3QgcHJlc2VudCBpbiB0aGUgc2NoZW1hLiBQcm92aWRlZCBrZXk6ICR7cGF0aH1gLCB7IHBhdGgsIHNjaGVtYTogdGhpcyB9KTtcbiAgY29uc3Qgc2NoZW1hSW5mbyA9IHRoaXMubWV0YSgpPy5zdGFja1NjaGVtYUluZm87XG4gIGlmIChzY2hlbWFJbmZvPy50eXBlID09PSBcInJlY29yZFwiKSB7XG4gICAgcmV0dXJuIHNjaGVtYUluZm8udmFsdWVTY2hlbWE7XG4gIH0gZWxzZSBpZiAoc2NoZW1hSW5mbz8udHlwZSA9PT0gXCJ1bmlvblwiKSB7XG4gICAgY29uc3Qgc2NoZW1hc1dpdGhOZXN0ZWQgPSBzY2hlbWFJbmZvLml0ZW1zLmZpbHRlcigocykgPT4gcy5oYXNOZXN0ZWQocGF0aCkpO1xuICAgIHJldHVybiB5dXBVbmlvbiguLi5zY2hlbWFzV2l0aE5lc3RlZC5tYXAoKHMpID0+IHMuZ2V0TmVzdGVkKHBhdGgpKSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHl1cC5yZWFjaCh0aGlzLCBwYXRoKTtcbiAgfVxufSk7XG5hc3luYyBmdW5jdGlvbiB5dXBWYWxpZGF0ZShzY2hlbWEsIG9iaiwgb3B0aW9ucykge1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBzY2hlbWEudmFsaWRhdGUob2JqLCB7XG4gICAgICAuLi5vbWl0KG9wdGlvbnMgPz8ge30sIFtcImN1cnJlbnRVc2VySWRcIl0pLFxuICAgICAgY29udGV4dDoge1xuICAgICAgICAuLi5vcHRpb25zPy5jb250ZXh0LFxuICAgICAgICBzdGFja0FsbG93VXNlcklkTWU6IG9wdGlvbnM/LmN1cnJlbnRVc2VySWQgIT09IHZvaWQgMFxuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFJlcGxhY2VGaWVsZFdpdGhPd25Vc2VySWQpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VySWQgPSBvcHRpb25zPy5jdXJyZW50VXNlcklkO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcklkKSB0aHJvdyBuZXcgS25vd25FcnJvcnMuQ2Fubm90R2V0T3duVXNlcldpdGhvdXRVc2VyKCk7XG4gICAgICBsZXQgcGF0aFJlbWFpbmluZyA9IGVycm9yLnBhdGg7XG4gICAgICBjb25zdCBmaWVsZFBhdGggPSBbXTtcbiAgICAgIHdoaWxlIChwYXRoUmVtYWluaW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKHBhdGhSZW1haW5pbmcuc3RhcnRzV2l0aChcIltcIikpIHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHBhdGhSZW1haW5pbmcuaW5kZXhPZihcIl1cIik7XG4gICAgICAgICAgaWYgKGluZGV4IDwgMCkgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJJbnZhbGlkIHBhdGhcIik7XG4gICAgICAgICAgZmllbGRQYXRoLnB1c2goSlNPTi5wYXJzZShwYXRoUmVtYWluaW5nLnNsaWNlKDEsIGluZGV4KSkpO1xuICAgICAgICAgIHBhdGhSZW1haW5pbmcgPSBwYXRoUmVtYWluaW5nLnNsaWNlKGluZGV4ICsgMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGV0IGRvdEluZGV4ID0gcGF0aFJlbWFpbmluZy5pbmRleE9mKFwiLlwiKTtcbiAgICAgICAgICBpZiAoZG90SW5kZXggPT09IC0xKSBkb3RJbmRleCA9IHBhdGhSZW1haW5pbmcubGVuZ3RoO1xuICAgICAgICAgIGZpZWxkUGF0aC5wdXNoKHBhdGhSZW1haW5pbmcuc2xpY2UoMCwgZG90SW5kZXgpKTtcbiAgICAgICAgICBwYXRoUmVtYWluaW5nID0gcGF0aFJlbWFpbmluZy5zbGljZShkb3RJbmRleCArIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBuZXdPYmogPSBkZWVwUGxhaW5DbG9uZShvYmopO1xuICAgICAgbGV0IGl0ID0gbmV3T2JqO1xuICAgICAgZm9yIChjb25zdCBmaWVsZCBvZiBmaWVsZFBhdGguc2xpY2UoMCwgLTEpKSB7XG4gICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGl0LCBmaWVsZCkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihgU2VnbWVudCAke2ZpZWxkfSBvZiBwYXRoICR7ZXJyb3IucGF0aH0gbm90IGZvdW5kIGluIG9iamVjdGApO1xuICAgICAgICB9XG4gICAgICAgIGl0ID0gaXRbZmllbGRdO1xuICAgICAgfVxuICAgICAgaXRbZmllbGRQYXRoW2ZpZWxkUGF0aC5sZW5ndGggLSAxXV0gPSBjdXJyZW50VXNlcklkO1xuICAgICAgcmV0dXJuIGF3YWl0IHl1cFZhbGlkYXRlKHNjaGVtYSwgbmV3T2JqLCBvcHRpb25zKTtcbiAgICB9XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cbnZhciBfaWREZXNjcmlwdGlvbiA9IChpZGVudGlmeSkgPT4gYFRoZSB1bmlxdWUgaWRlbnRpZmllciBvZiB0aGUgJHtpZGVudGlmeX1gO1xudmFyIF9kaXNwbGF5TmFtZURlc2NyaXB0aW9uID0gKGlkZW50aWZ5KSA9PiBgSHVtYW4tcmVhZGFibGUgJHtpZGVudGlmeX0gZGlzcGxheSBuYW1lLiBUaGlzIGlzIG5vdCBhIHVuaXF1ZSBpZGVudGlmaWVyLmA7XG52YXIgX2NsaWVudE1ldGFEYXRhRGVzY3JpcHRpb24gPSAoaWRlbnRpZnkpID0+IGBDbGllbnQgbWV0YWRhdGEuIFVzZWQgYXMgYSBkYXRhIHN0b3JlLCBhY2Nlc3NpYmxlIGZyb20gdGhlIGNsaWVudCBzaWRlLiBEbyBub3Qgc3RvcmUgaW5mb3JtYXRpb24gdGhhdCBzaG91bGQgbm90IGJlIGV4cG9zZWQgdG8gdGhlIGNsaWVudC5gO1xudmFyIF9jbGllbnRSZWFkT25seU1ldGFEYXRhRGVzY3JpcHRpb24gPSAoaWRlbnRpZnkpID0+IGBDbGllbnQgcmVhZC1vbmx5LCBzZXJ2ZXItd3JpdGFibGUgbWV0YWRhdGEuIFVzZWQgYXMgYSBkYXRhIHN0b3JlLCBhY2Nlc3NpYmxlIGZyb20gdGhlIGNsaWVudCBzaWRlLiBEbyBub3Qgc3RvcmUgaW5mb3JtYXRpb24gdGhhdCBzaG91bGQgbm90IGJlIGV4cG9zZWQgdG8gdGhlIGNsaWVudC4gVGhlIGNsaWVudCBjYW4gcmVhZCB0aGlzIGRhdGEsIGJ1dCBjYW5ub3QgbW9kaWZ5IGl0LiBUaGlzIGlzIHVzZWZ1bCBmb3IgdGhpbmdzIGxpa2Ugc3Vic2NyaXB0aW9uIHN0YXR1cy5gO1xudmFyIF9wcm9maWxlSW1hZ2VVcmxEZXNjcmlwdGlvbiA9IChpZGVudGlmeSkgPT4gYFVSTCBvZiB0aGUgcHJvZmlsZSBpbWFnZSBmb3IgJHtpZGVudGlmeX0uIENhbiBiZSBhIEJhc2U2NCBlbmNvZGVkIGltYWdlLiBNdXN0IGJlIHNtYWxsZXIgdGhhbiAxMDBLQi4gUGxlYXNlIGNvbXByZXNzIGFuZCBjcm9wIHRvIGEgc3F1YXJlIGJlZm9yZSBwYXNzaW5nIGluLmA7XG52YXIgX3NlcnZlck1ldGFEYXRhRGVzY3JpcHRpb24gPSAoaWRlbnRpZnkpID0+IGBTZXJ2ZXIgbWV0YWRhdGEuIFVzZWQgYXMgYSBkYXRhIHN0b3JlLCBvbmx5IGFjY2Vzc2libGUgZnJvbSB0aGUgc2VydmVyIHNpZGUuIFlvdSBjYW4gc3RvcmUgc2VjcmV0IGluZm9ybWF0aW9uIHJlbGF0ZWQgdG8gdGhlICR7aWRlbnRpZnl9IGhlcmUuYDtcbnZhciBfYXRNaWxsaXNEZXNjcmlwdGlvbiA9IChpZGVudGlmeSkgPT4gYCh0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSBlcG9jaCwgSmFudWFyeSAxLCAxOTcwLCBVVEMpYDtcbnZhciBfY3JlYXRlZEF0TWlsbGlzRGVzY3JpcHRpb24gPSAoaWRlbnRpZnkpID0+IGBUaGUgdGltZSB0aGUgJHtpZGVudGlmeX0gd2FzIGNyZWF0ZWQgJHtfYXRNaWxsaXNEZXNjcmlwdGlvbihpZGVudGlmeSl9YDtcbnZhciBfc2lnbmVkVXBBdE1pbGxpc0Rlc2NyaXB0aW9uID0gYFRoZSB0aW1lIHRoZSB1c2VyIHNpZ25lZCB1cCAke19hdE1pbGxpc0Rlc2NyaXB0aW9ufWA7XG52YXIgX2xhc3RBY3RpdmVBdE1pbGxpc0Rlc2NyaXB0aW9uID0gYFRoZSB0aW1lIHRoZSB1c2VyIHdhcyBsYXN0IGFjdGl2ZSAke19hdE1pbGxpc0Rlc2NyaXB0aW9ufWA7XG5mdW5jdGlvbiB5dXBTdHJpbmcoLi4uYXJncykge1xuICByZXR1cm4geXVwLnN0cmluZyguLi5hcmdzKS5tZXRhKHsgc3RhY2tTY2hlbWFJbmZvOiB7IHR5cGU6IFwic3RyaW5nXCIgfSB9KTtcbn1cbmZ1bmN0aW9uIHl1cE51bWJlciguLi5hcmdzKSB7XG4gIHJldHVybiB5dXAubnVtYmVyKC4uLmFyZ3MpLm1ldGEoeyBzdGFja1NjaGVtYUluZm86IHsgdHlwZTogXCJudW1iZXJcIiB9IH0pO1xufVxuZnVuY3Rpb24geXVwQm9vbGVhbiguLi5hcmdzKSB7XG4gIHJldHVybiB5dXAuYm9vbGVhbiguLi5hcmdzKS5tZXRhKHsgc3RhY2tTY2hlbWFJbmZvOiB7IHR5cGU6IFwiYm9vbGVhblwiIH0gfSk7XG59XG5mdW5jdGlvbiB5dXBEYXRlKC4uLmFyZ3MpIHtcbiAgcmV0dXJuIHl1cC5kYXRlKC4uLmFyZ3MpLm1ldGEoeyBzdGFja1NjaGVtYUluZm86IHsgdHlwZTogXCJkYXRlXCIgfSB9KTtcbn1cbmZ1bmN0aW9uIF95dXBNaXhlZEludGVybmFsKC4uLmFyZ3MpIHtcbiAgcmV0dXJuIHl1cC5taXhlZCguLi5hcmdzKTtcbn1cbmZ1bmN0aW9uIHl1cE1peGVkKC4uLmFyZ3MpIHtcbiAgcmV0dXJuIF95dXBNaXhlZEludGVybmFsKC4uLmFyZ3MpLm1ldGEoeyBzdGFja1NjaGVtYUluZm86IHsgdHlwZTogXCJtaXhlZFwiIH0gfSk7XG59XG5mdW5jdGlvbiB5dXBBcnJheSguLi5hcmdzKSB7XG4gIHJldHVybiB5dXAuYXJyYXkoLi4uYXJncykubWV0YSh7IHN0YWNrU2NoZW1hSW5mbzogeyB0eXBlOiBcImFycmF5XCIgfSB9KTtcbn1cbmZ1bmN0aW9uIHl1cFR1cGxlKHNjaGVtYXMpIHtcbiAgaWYgKHNjaGVtYXMubGVuZ3RoID09PSAwKSB0aHJvdyBuZXcgRXJyb3IoXCJ5dXBUdXBsZSBtdXN0IGhhdmUgYXQgbGVhc3Qgb25lIHNjaGVtYVwiKTtcbiAgcmV0dXJuIHl1cC50dXBsZShzY2hlbWFzKS5tZXRhKHsgc3RhY2tTY2hlbWFJbmZvOiB7IHR5cGU6IFwidHVwbGVcIiwgaXRlbXM6IHNjaGVtYXMgfSB9KTtcbn1cbmZ1bmN0aW9uIHl1cE9iamVjdFdpdGhBdXRvRGVmYXVsdCguLi5hcmdzKSB7XG4gIGNvbnN0IG9iamVjdDIgPSB5dXAub2JqZWN0KC4uLmFyZ3MpLnRlc3QoXG4gICAgXCJuby11bmtub3duLW9iamVjdC1wcm9wZXJ0aWVzXCIsXG4gICAgKHsgcGF0aCB9KSA9PiBgJHtwYXRofSBjb250YWlucyB1bmtub3duIHByb3BlcnRpZXNgLFxuICAgICh2YWx1ZSwgY29udGV4dCkgPT4ge1xuICAgICAgaWYgKGNvbnRleHQub3B0aW9ucy5jb250ZXh0Py5ub1Vua25vd25QYXRoUHJlZml4ZXM/LnNvbWUoKHByZWZpeCkgPT4gY29udGV4dC5wYXRoLnN0YXJ0c1dpdGgocHJlZml4KSkpIHtcbiAgICAgICAgaWYgKGNvbnRleHQuc2NoZW1hLnNwZWMubm9Vbmtub3duICE9PSBmYWxzZSkge1xuICAgICAgICAgIGNvbnN0IGF2YWlsYWJsZUtleXMgPSBuZXcgU2V0KE9iamVjdC5rZXlzKGNvbnRleHQuc2NoZW1hLmZpZWxkcykpO1xuICAgICAgICAgIGNvbnN0IHVua25vd25LZXlzID0gT2JqZWN0LmtleXModmFsdWUgPz8ge30pLmZpbHRlcigoa2V5KSA9PiAhYXZhaWxhYmxlS2V5cy5oYXMoa2V5KSk7XG4gICAgICAgICAgaWYgKHVua25vd25LZXlzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmNyZWF0ZUVycm9yKHtcbiAgICAgICAgICAgICAgbWVzc2FnZTogYCR7Y29udGV4dC5wYXRoIHx8IFwiT2JqZWN0XCJ9IGNvbnRhaW5zIHVua25vd24gcHJvcGVydGllczogJHt1bmtub3duS2V5cy5qb2luKFwiLCBcIil9YCxcbiAgICAgICAgICAgICAgcGF0aDogY29udGV4dC5wYXRoLFxuICAgICAgICAgICAgICBwYXJhbXM6IHsgdW5rbm93bktleXMsIGF2YWlsYWJsZUtleXMgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICkubWV0YSh7IHN0YWNrU2NoZW1hSW5mbzogeyB0eXBlOiBcIm9iamVjdFwiIH0gfSk7XG4gIHJldHVybiBvYmplY3QyO1xufVxuZnVuY3Rpb24geXVwT2JqZWN0KC4uLmFyZ3MpIHtcbiAgY29uc3Qgb2JqZWN0MiA9IHl1cE9iamVjdFdpdGhBdXRvRGVmYXVsdCguLi5hcmdzKTtcbiAgcmV0dXJuIG9iamVjdDIuZGVmYXVsdCh2b2lkIDApO1xufVxuZnVuY3Rpb24geXVwTmV2ZXIoKSB7XG4gIHJldHVybiBfeXVwTWl4ZWRJbnRlcm5hbCgpLm1ldGEoeyBzdGFja1NjaGVtYUluZm86IHsgdHlwZTogXCJuZXZlclwiIH0gfSkudGVzdChcIm5ldmVyXCIsIFwiVGhpcyB2YWx1ZSBzaG91bGQgbmV2ZXIgYmUgcmVhY2hlZFwiLCAoKSA9PiBmYWxzZSk7XG59XG5mdW5jdGlvbiB5dXBVbmlvbiguLi5hcmdzKSB7XG4gIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkgdGhyb3cgbmV3IEVycm9yKFwieXVwVW5pb24gbXVzdCBoYXZlIGF0IGxlYXN0IG9uZSBzY2hlbWFcIik7XG4gIHJldHVybiBfeXVwTWl4ZWRJbnRlcm5hbCgpLm1ldGEoeyBzdGFja1NjaGVtYUluZm86IHsgdHlwZTogXCJ1bmlvblwiLCBpdGVtczogYXJncyB9IH0pLnRlc3QoXCJpcy1vbmUtb2ZcIiwgXCJJbnZhbGlkIHZhbHVlXCIsIGFzeW5jICh2YWx1ZSwgY29udGV4dCkgPT4ge1xuICAgIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgICBjb25zdCBlcnJvcnMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHNjaGVtYSBvZiBhcmdzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB5dXBWYWxpZGF0ZShzY2hlbWEsIHZhbHVlLCBjb250ZXh0Lm9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgZXJyb3JzLnB1c2goZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb250ZXh0LmNyZWF0ZUVycm9yKHtcbiAgICAgIG1lc3NhZ2U6IGRlaW5kZW50YFxuICAgICAgICAke2NvbnRleHQucGF0aH0gaXMgbm90IG1hdGNoZWQgYnkgYW55IG9mIHRoZSBwcm92aWRlZCBzY2hlbWFzOlxuICAgICAgICAgICR7ZXJyb3JzLm1hcCgoZSwgaSkgPT4gZGVpbmRlbnRgXG4gICAgICAgICAgICBTY2hlbWEgJHtpfTpcbiAgICAgICAgICAgICAgJHtlLmVycm9ycy5qb2luKFwiXFxuXCIpfVxuICAgICAgICAgIGApLmpvaW4oXCJcXG5cIil9YCxcbiAgICAgIHBhdGg6IGNvbnRleHQucGF0aFxuICAgIH0pO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHl1cFJlY29yZChrZXlTY2hlbWEsIHZhbHVlU2NoZW1hKSB7XG4gIHJldHVybiB5dXBPYmplY3QoKS5tZXRhKHsgc3RhY2tTY2hlbWFJbmZvOiB7IHR5cGU6IFwicmVjb3JkXCIsIGtleVNjaGVtYSwgdmFsdWVTY2hlbWEgfSB9KS51bmtub3duKHRydWUpLnRlc3QoXG4gICAgXCJyZWNvcmRcIixcbiAgICBcIiR7cGF0aH0gbXVzdCBiZSBhIHJlY29yZCBvZiB2YWxpZCB2YWx1ZXNcIixcbiAgICBhc3luYyBmdW5jdGlvbih2YWx1ZSwgY29udGV4dCkge1xuICAgICAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiB0cnVlO1xuICAgICAgY29uc3QgeyBwYXRoLCBjcmVhdGVFcnJvciB9ID0gdGhpcztcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVycm9yKHsgbWVzc2FnZTogYCR7cGF0aH0gbXVzdCBiZSBhbiBvYmplY3RgIH0pO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXModmFsdWUpKSB7XG4gICAgICAgIGF3YWl0IHl1cFZhbGlkYXRlKGtleVNjaGVtYSwga2V5LCBjb250ZXh0Lm9wdGlvbnMpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHl1cFZhbGlkYXRlKHZhbHVlU2NoZW1hLCB2YWx1ZVtrZXldLCB7XG4gICAgICAgICAgICAuLi5jb250ZXh0Lm9wdGlvbnMsXG4gICAgICAgICAgICBjb250ZXh0OiB7XG4gICAgICAgICAgICAgIC4uLmNvbnRleHQub3B0aW9ucy5jb250ZXh0LFxuICAgICAgICAgICAgICBwYXRoOiBwYXRoID8gYCR7cGF0aH0uJHtrZXl9YCA6IGtleVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgcmV0dXJuIGNyZWF0ZUVycm9yKHtcbiAgICAgICAgICAgIHBhdGg6IHBhdGggPyBgJHtwYXRofS4ke2tleX1gIDoga2V5LFxuICAgICAgICAgICAgbWVzc2FnZTogZS5tZXNzYWdlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgKTtcbn1cbmZ1bmN0aW9uIGVuc3VyZU9iamVjdFNjaGVtYShzY2hlbWEpIHtcbiAgaWYgKCEoc2NoZW1hIGluc3RhbmNlb2YgeXVwLk9iamVjdFNjaGVtYSkpIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKGBhc3NlcnRPYmplY3RTY2hlbWE6IHNjaGVtYSBpcyBub3QgYW4gT2JqZWN0U2NoZW1hOiAke3NjaGVtYS5kZXNjcmliZSgpLnR5cGV9YCk7XG4gIHJldHVybiBzY2hlbWE7XG59XG52YXIgYWRhcHRTY2hlbWEgPSB5dXBNaXhlZCgpO1xudmFyIHVybFNjaGVtYSA9IHl1cFN0cmluZygpLnRlc3Qoe1xuICBuYW1lOiBcIm5vLXNwYWNlc1wiLFxuICBtZXNzYWdlOiAocGFyYW1zKSA9PiBgJHtwYXJhbXMucGF0aH0gY29udGFpbnMgc3BhY2VzYCxcbiAgdGVzdDogKHZhbHVlKSA9PiB2YWx1ZSA9PSBudWxsIHx8ICF2YWx1ZS5pbmNsdWRlcyhcIiBcIilcbn0pLnRlc3Qoe1xuICBuYW1lOiBcInVybFwiLFxuICBtZXNzYWdlOiAocGFyYW1zKSA9PiBgJHtwYXJhbXMucGF0aH0gaXMgbm90IGEgdmFsaWQgVVJMYCxcbiAgdGVzdDogKHZhbHVlKSA9PiB2YWx1ZSA9PSBudWxsIHx8IGlzVmFsaWRVcmwodmFsdWUpXG59KTtcbnZhciB3aWxkY2FyZFVybFNjaGVtYSA9IHl1cFN0cmluZygpLnRlc3Qoe1xuICBuYW1lOiBcIm5vLXNwYWNlc1wiLFxuICBtZXNzYWdlOiAocGFyYW1zKSA9PiBgJHtwYXJhbXMucGF0aH0gY29udGFpbnMgc3BhY2VzYCxcbiAgdGVzdDogKHZhbHVlKSA9PiB2YWx1ZSA9PSBudWxsIHx8ICF2YWx1ZS5pbmNsdWRlcyhcIiBcIilcbn0pLnRlc3Qoe1xuICBuYW1lOiBcIndpbGRjYXJkLXVybFwiLFxuICBtZXNzYWdlOiAocGFyYW1zKSA9PiBgJHtwYXJhbXMucGF0aH0gaXMgbm90IGEgdmFsaWQgVVJMIG9yIHdpbGRjYXJkIFVSTCBwYXR0ZXJuYCxcbiAgdGVzdDogKHZhbHVlKSA9PiB7XG4gICAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiB0cnVlO1xuICAgIGlmICghdmFsdWUuaW5jbHVkZXMoXCIqXCIpKSB7XG4gICAgICByZXR1cm4gaXNWYWxpZFVybCh2YWx1ZSk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBQTEFDRUhPTERFUiA9IFwid2lsZGNhcmQtcGxhY2Vob2xkZXJcIjtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWRVcmwgPSB2YWx1ZS5yZXBsYWNlKC9cXCovZywgUExBQ0VIT0xERVIpO1xuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChub3JtYWxpemVkVXJsKTtcbiAgICAgIGlmICh1cmwudXNlcm5hbWUuaW5jbHVkZXMoUExBQ0VIT0xERVIpIHx8IHVybC5wYXNzd29yZC5pbmNsdWRlcyhQTEFDRUhPTERFUikgfHwgdXJsLnBhdGhuYW1lLmluY2x1ZGVzKFBMQUNFSE9MREVSKSB8fCB1cmwuc2VhcmNoLmluY2x1ZGVzKFBMQUNFSE9MREVSKSB8fCB1cmwuaGFzaC5pbmNsdWRlcyhQTEFDRUhPTERFUikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKHVybC5wcm90b2NvbCAhPT0gXCJodHRwOlwiICYmIHVybC5wcm90b2NvbCAhPT0gXCJodHRwczpcIikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBjb25zdCBob3N0UGF0dGVybiA9IHVybC5ob3N0bmFtZS5zcGxpdChQTEFDRUhPTERFUikuam9pbihcIipcIik7XG4gICAgICByZXR1cm4gaXNWYWxpZEhvc3RuYW1lV2l0aFdpbGRjYXJkcyhob3N0UGF0dGVybik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufSk7XG52YXIganNvblNjaGVtYSA9IHl1cE1peGVkKCkubnVsbGFibGUoKS5kZWZpbmVkKCkudHJhbnNmb3JtKCh2YWx1ZSkgPT4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh2YWx1ZSkpKTtcbnZhciBqc29uU3RyaW5nU2NoZW1hID0geXVwU3RyaW5nKCkudGVzdChcImpzb25cIiwgKHBhcmFtcykgPT4gYCR7cGFyYW1zLnBhdGh9IGlzIG5vdCB2YWxpZCBKU09OYCwgKHZhbHVlKSA9PiB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgdHJ5IHtcbiAgICBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn0pO1xudmFyIGpzb25TdHJpbmdPckVtcHR5U2NoZW1hID0geXVwU3RyaW5nKCkudGVzdChcImpzb25cIiwgKHBhcmFtcykgPT4gYCR7cGFyYW1zLnBhdGh9IGlzIG5vdCB2YWxpZCBKU09OYCwgKHZhbHVlKSA9PiB7XG4gIGlmICghdmFsdWUpIHJldHVybiB0cnVlO1xuICB0cnkge1xuICAgIEpTT04ucGFyc2UodmFsdWUpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufSk7XG52YXIgYmFzZTY0U2NoZW1hID0geXVwU3RyaW5nKCkudGVzdChcImlzLWJhc2U2NFwiLCAocGFyYW1zKSA9PiBgJHtwYXJhbXMucGF0aH0gaXMgbm90IHZhbGlkIGJhc2U2NGAsICh2YWx1ZSkgPT4ge1xuICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gIHJldHVybiBpc0Jhc2U2NCh2YWx1ZSk7XG59KTtcbnZhciBwYXNzd29yZFNjaGVtYSA9IHl1cFN0cmluZygpLm1heCg3MCk7XG52YXIgaW50ZXJ2YWxTY2hlbWEgPSB5dXBUdXBsZShbeXVwTnVtYmVyKCkubWluKDApLmludGVnZXIoKS5kZWZpbmVkKCksIHl1cFN0cmluZygpLm9uZU9mKFtcIm1pbGxpc2Vjb25kXCIsIFwic2Vjb25kXCIsIFwibWludXRlXCIsIFwiaG91clwiLCBcImRheVwiLCBcIndlZWtcIiwgXCJtb250aFwiLCBcInllYXJcIl0pLmRlZmluZWQoKV0pO1xudmFyIGRheUludGVydmFsU2NoZW1hID0geXVwVHVwbGUoW3l1cE51bWJlcigpLm1pbigwKS5pbnRlZ2VyKCkuZGVmaW5lZCgpLCB5dXBTdHJpbmcoKS5vbmVPZihbXCJkYXlcIiwgXCJ3ZWVrXCIsIFwibW9udGhcIiwgXCJ5ZWFyXCJdKS5kZWZpbmVkKCldKTtcbnZhciBpbnRlcnZhbE9yTmV2ZXJTY2hlbWEgPSB5dXBVbmlvbihpbnRlcnZhbFNjaGVtYS5kZWZpbmVkKCksIHl1cFN0cmluZygpLm9uZU9mKFtcIm5ldmVyXCJdKS5kZWZpbmVkKCkpO1xudmFyIGRheUludGVydmFsT3JOZXZlclNjaGVtYSA9IHl1cFVuaW9uKGRheUludGVydmFsU2NoZW1hLmRlZmluZWQoKSwgeXVwU3RyaW5nKCkub25lT2YoW1wibmV2ZXJcIl0pLmRlZmluZWQoKSk7XG52YXIgdXNlclNwZWNpZmllZElkU2NoZW1hID0gKGlkTmFtZSkgPT4geXVwU3RyaW5nKCkubWF4KDYzKS5tYXRjaGVzKC9eW2EtekEtWl9dW2EtekEtWjAtOV8tXSokLywgYCR7aWROYW1lfSBtdXN0IHN0YXJ0IHdpdGggYSBsZXR0ZXIsIHVuZGVyc2NvcmUsIG9yIG51bWJlciwgYW5kIGNvbnRhaW4gb25seSBsZXR0ZXJzLCBudW1iZXJzLCB1bmRlcnNjb3JlcywgYW5kIGh5cGhlbnNgKTtcbnZhciBtb25leUFtb3VudFNjaGVtYSA9IChjdXJyZW5jeSkgPT4geXVwU3RyaW5nKCkudGVzdChcIm1vbmV5LWFtb3VudFwiLCBcIkludmFsaWQgbW9uZXkgYW1vdW50XCIsICh2YWx1ZSwgY29udGV4dCkgPT4ge1xuICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gIGNvbnN0IHJlZ2V4ID0gL14oWzAtOV0rKShcXC4oWzAtOV0rKSk/JC87XG4gIGNvbnN0IG1hdGNoID0gdmFsdWUubWF0Y2gocmVnZXgpO1xuICBpZiAoIW1hdGNoKSByZXR1cm4gY29udGV4dC5jcmVhdGVFcnJvcih7IG1lc3NhZ2U6IFwiTW9uZXkgYW1vdW50IG11c3QgYmUgaW4gdGhlIGZvcm1hdCBvZiA8bnVtYmVyPiBvciA8bnVtYmVyPi48bnVtYmVyPlwiIH0pO1xuICBjb25zdCB3aG9sZSA9IG1hdGNoWzFdO1xuICBjb25zdCBkZWNpbWFscyA9IG1hdGNoWzNdO1xuICBpZiAoZGVjaW1hbHMgJiYgZGVjaW1hbHMubGVuZ3RoID4gY3VycmVuY3kuZGVjaW1hbHMpIHJldHVybiBjb250ZXh0LmNyZWF0ZUVycm9yKHsgbWVzc2FnZTogYFRvbyBtYW55IGRlY2ltYWxzOyAke2N1cnJlbmN5LmNvZGV9IG9ubHkgaGFzICR7Y3VycmVuY3kuZGVjaW1hbHN9IGRlY2ltYWxzYCB9KTtcbiAgaWYgKHdob2xlICE9PSBcIjBcIiAmJiB3aG9sZS5zdGFydHNXaXRoKFwiMFwiKSkgcmV0dXJuIGNvbnRleHQuY3JlYXRlRXJyb3IoeyBtZXNzYWdlOiBcIk1vbmV5IGFtb3VudCBtdXN0IG5vdCBoYXZlIGxlYWRpbmcgemVyb3NcIiB9KTtcbiAgcmV0dXJuIHRydWU7XG59KTtcbnZhciBzdHJpY3RFbWFpbFNjaGVtYSA9IChtZXNzYWdlKSA9PiB5dXBTdHJpbmcoKS5lbWFpbChtZXNzYWdlKS5tYXgoMjU2KS5tYXRjaGVzKC9eW14uXSsoXFwuW14uXSspKkAuKlxcLlteLl1bXi5dKyQvLCBtZXNzYWdlKTtcbnZhciBlbWFpbFNjaGVtYSA9IHl1cFN0cmluZygpLmVtYWlsKCk7XG52YXIgY2xpZW50T3JIaWdoZXJBdXRoVHlwZVNjaGVtYSA9IHl1cFN0cmluZygpLm9uZU9mKFtcImNsaWVudFwiLCBcInNlcnZlclwiLCBcImFkbWluXCJdKS5kZWZpbmVkKCk7XG52YXIgc2VydmVyT3JIaWdoZXJBdXRoVHlwZVNjaGVtYSA9IHl1cFN0cmluZygpLm9uZU9mKFtcInNlcnZlclwiLCBcImFkbWluXCJdKS5kZWZpbmVkKCk7XG52YXIgYWRtaW5BdXRoVHlwZVNjaGVtYSA9IHl1cFN0cmluZygpLm9uZU9mKFtcImFkbWluXCJdKS5kZWZpbmVkKCk7XG52YXIgcHJvamVjdElkU2NoZW1hID0geXVwU3RyaW5nKCkudGVzdCgodikgPT4gdiA9PT0gdm9pZCAwIHx8IHYgPT09IFwiaW50ZXJuYWxcIiB8fCBpc1V1aWQodikpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IF9pZERlc2NyaXB0aW9uKFwicHJvamVjdFwiKSwgZXhhbXBsZVZhbHVlOiBcImUwYjUyZjRkLWRlY2UtNDA4Yy1hZjQ5LWQyMzA2MWJiMGY4ZFwiIH0gfSk7XG52YXIgcHJvamVjdEJyYW5jaElkU2NoZW1hID0geXVwU3RyaW5nKCkubm9uRW1wdHkoKS5tYXgoMjU1KS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBfaWREZXNjcmlwdGlvbihcInByb2plY3QgYnJhbmNoXCIpLCBleGFtcGxlVmFsdWU6IFwibWFpblwiIH0gfSk7XG52YXIgcHJvamVjdERpc3BsYXlOYW1lU2NoZW1hID0geXVwU3RyaW5nKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogX2Rpc3BsYXlOYW1lRGVzY3JpcHRpb24oXCJwcm9qZWN0XCIpLCBleGFtcGxlVmFsdWU6IFwiTXlNdXNpY1wiIH0gfSk7XG52YXIgcHJvamVjdExvZ29VcmxTY2hlbWEgPSB1cmxTY2hlbWEubWF4KE1BWF9JTUFHRV9TSVpFX0JBU0U2NF9CWVRFUykubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJVUkwgb2YgdGhlIGxvZ28gZm9yIHRoZSBwcm9qZWN0LiBUaGlzIGlzIHVzdWFsbHkgYSBjbG9zZSB0byAxOjEgaW1hZ2Ugb2YgdGhlIGNvbXBhbnkgbG9nby5cIiwgZXhhbXBsZVZhbHVlOiBcImh0dHBzOi8vZXhhbXBsZS5jb20vbG9nby5wbmdcIiB9IH0pO1xudmFyIHByb2plY3RGdWxsTG9nb1VybFNjaGVtYSA9IHVybFNjaGVtYS5tYXgoTUFYX0lNQUdFX1NJWkVfQkFTRTY0X0JZVEVTKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIlVSTCBvZiB0aGUgZnVsbCBsb2dvIGZvciB0aGUgcHJvamVjdC4gVGhpcyBpcyB1c3VhbGx5IGEgdmVydGljYWwgaW1hZ2Ugd2l0aCB0aGUgbG9nbyBhbmQgdGhlIGNvbXBhbnkgbmFtZS5cIiwgZXhhbXBsZVZhbHVlOiBcImh0dHBzOi8vZXhhbXBsZS5jb20vZnVsbC1sb2dvLnBuZ1wiIH0gfSk7XG52YXIgcHJvamVjdERlc2NyaXB0aW9uU2NoZW1hID0geXVwU3RyaW5nKCkubnVsbGFibGUoKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIkEgaHVtYW4gcmVhZGFibGUgZGVzY3JpcHRpb24gb2YgdGhlIHByb2plY3RcIiwgZXhhbXBsZVZhbHVlOiBcIkEgbXVzaWMgc3RyZWFtaW5nIHNlcnZpY2VcIiB9IH0pO1xudmFyIHByb2plY3RDcmVhdGVkQXRNaWxsaXNTY2hlbWEgPSB5dXBOdW1iZXIoKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBfY3JlYXRlZEF0TWlsbGlzRGVzY3JpcHRpb24oXCJwcm9qZWN0XCIpLCBleGFtcGxlVmFsdWU6IDE2M2UxMCB9IH0pO1xudmFyIHByb2plY3RJc1Byb2R1Y3Rpb25Nb2RlU2NoZW1hID0geXVwQm9vbGVhbigpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiV2hldGhlciB0aGUgcHJvamVjdCBpcyBpbiBwcm9kdWN0aW9uIG1vZGVcIiwgZXhhbXBsZVZhbHVlOiB0cnVlIH0gfSk7XG52YXIgcHJvamVjdENvbmZpZ0lkU2NoZW1hID0geXVwU3RyaW5nKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogX2lkRGVzY3JpcHRpb24oXCJwcm9qZWN0IGNvbmZpZ1wiKSwgZXhhbXBsZVZhbHVlOiBcImQwOTIwMWYwLTU0ZjUtNDBiZC04OWZmLTZkMTgxNWRkYWQyNFwiIH0gfSk7XG52YXIgcHJvamVjdEFsbG93TG9jYWxob3N0U2NoZW1hID0geXVwQm9vbGVhbigpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiV2hldGhlciBsb2NhbGhvc3QgaXMgYWxsb3dlZCBhcyBhIGRvbWFpbiBmb3IgdGhpcyBwcm9qZWN0LiBTaG91bGQgb25seSBiZSBhbGxvd2VkIGluIGRldmVsb3BtZW50IG1vZGVcIiwgZXhhbXBsZVZhbHVlOiB0cnVlIH0gfSk7XG52YXIgcHJvamVjdENyZWF0ZVRlYW1PblNpZ25VcFNjaGVtYSA9IHl1cEJvb2xlYW4oKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIldoZXRoZXIgYSB0ZWFtIHNob3VsZCBiZSBjcmVhdGVkIGZvciBlYWNoIHVzZXIgdGhhdCBzaWducyB1cFwiLCBleGFtcGxlVmFsdWU6IHRydWUgfSB9KTtcbnZhciBwcm9qZWN0TWFnaWNMaW5rRW5hYmxlZFNjaGVtYSA9IHl1cEJvb2xlYW4oKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIldoZXRoZXIgbWFnaWMgbGluayBhdXRoZW50aWNhdGlvbiBpcyBlbmFibGVkIGZvciB0aGlzIHByb2plY3RcIiwgZXhhbXBsZVZhbHVlOiB0cnVlIH0gfSk7XG52YXIgcHJvamVjdFBhc3NrZXlFbmFibGVkU2NoZW1hID0geXVwQm9vbGVhbigpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiV2hldGhlciBwYXNza2V5IGF1dGhlbnRpY2F0aW9uIGlzIGVuYWJsZWQgZm9yIHRoaXMgcHJvamVjdFwiLCBleGFtcGxlVmFsdWU6IHRydWUgfSB9KTtcbnZhciBwcm9qZWN0Q2xpZW50VGVhbUNyZWF0aW9uRW5hYmxlZFNjaGVtYSA9IHl1cEJvb2xlYW4oKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIldoZXRoZXIgY2xpZW50IHVzZXJzIGNhbiBjcmVhdGUgdGVhbXNcIiwgZXhhbXBsZVZhbHVlOiB0cnVlIH0gfSk7XG52YXIgcHJvamVjdENsaWVudFVzZXJEZWxldGlvbkVuYWJsZWRTY2hlbWEgPSB5dXBCb29sZWFuKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJXaGV0aGVyIGNsaWVudCB1c2VycyBjYW4gZGVsZXRlIHRoZWlyIG93biBhY2NvdW50IGZyb20gdGhlIGNsaWVudFwiLCBleGFtcGxlVmFsdWU6IHRydWUgfSB9KTtcbnZhciBwcm9qZWN0U2lnblVwRW5hYmxlZFNjaGVtYSA9IHl1cEJvb2xlYW4oKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIldoZXRoZXIgdXNlcnMgY2FuIHNpZ24gdXAgbmV3IGFjY291bnRzLCBvciB3aGV0aGVyIHRoZXkgYXJlIG9ubHkgYWxsb3dlZCB0byBzaWduIGluIHRvIGV4aXN0aW5nIGFjY291bnRzLiBSZWdhcmRsZXNzIG9mIHRoaXMgb3B0aW9uLCB0aGUgc2VydmVyIEFQSSBjYW4gYWx3YXlzIGNyZWF0ZSBuZXcgdXNlcnMgd2l0aCB0aGUgYFBPU1QgL3VzZXJzYCBlbmRwb2ludC5cIiwgZXhhbXBsZVZhbHVlOiB0cnVlIH0gfSk7XG52YXIgcHJvamVjdENyZWRlbnRpYWxFbmFibGVkU2NoZW1hID0geXVwQm9vbGVhbigpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiV2hldGhlciBlbWFpbCBwYXNzd29yZCBhdXRoZW50aWNhdGlvbiBpcyBlbmFibGVkIGZvciB0aGlzIHByb2plY3RcIiwgZXhhbXBsZVZhbHVlOiB0cnVlIH0gfSk7XG52YXIgb2F1dGhJZFNjaGVtYSA9IHl1cFN0cmluZygpLm9uZU9mKGFsbFByb3ZpZGVycykubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogYE9BdXRoIHByb3ZpZGVyIElELCBvbmUgb2YgJHthbGxQcm92aWRlcnMubWFwKCh4KSA9PiBgXFxgJHt4fVxcYGApLmpvaW4oXCIsIFwiKX1gLCBleGFtcGxlVmFsdWU6IFwiZ29vZ2xlXCIgfSB9KTtcbnZhciBvYXV0aEVuYWJsZWRTY2hlbWEgPSB5dXBCb29sZWFuKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJXaGV0aGVyIHRoZSBPQXV0aCBwcm92aWRlciBpcyBlbmFibGVkLiBJZiBhbiBwcm92aWRlciBpcyBmaXJzdCBlbmFibGVkLCB0aGVuIGRpc2FibGVkLCBpdCB3aWxsIGJlIHNob3duIGluIHRoZSBsaXN0IGJ1dCB3aXRoIGVuYWJsZWQ9ZmFsc2VcIiwgZXhhbXBsZVZhbHVlOiB0cnVlIH0gfSk7XG52YXIgb2F1dGhUeXBlU2NoZW1hID0geXVwU3RyaW5nKCkub25lT2YoW1wic2hhcmVkXCIsIFwic3RhbmRhcmRcIl0pLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246ICdPQXV0aCBwcm92aWRlciB0eXBlLCBvbmUgb2Ygc2hhcmVkLCBzdGFuZGFyZC4gXCJzaGFyZWRcIiB1c2VzIFN0YWNrIHNoYXJlZCBPQXV0aCBrZXlzIGFuZCBpdCBpcyBvbmx5IG1lYW50IGZvciBkZXZlbG9wbWVudC4gXCJzdGFuZGFyZFwiIHVzZXMgeW91ciBvd24gT0F1dGgga2V5cyBhbmQgd2lsbCBzaG93IHlvdXIgbG9nbyBhbmQgY29tcGFueSBuYW1lIHdoZW4gc2lnbmluZyBpbiB3aXRoIHRoZSBwcm92aWRlci4nLCBleGFtcGxlVmFsdWU6IFwic3RhbmRhcmRcIiB9IH0pO1xudmFyIG9hdXRoQ2xpZW50SWRTY2hlbWEgPSB5dXBTdHJpbmcoKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiAnT0F1dGggY2xpZW50IElELiBOZWVkcyB0byBiZSBzcGVjaWZpZWQgd2hlbiB1c2luZyB0eXBlPVwic3RhbmRhcmRcIicsIGV4YW1wbGVWYWx1ZTogXCJnb29nbGUtb2F1dGgtY2xpZW50LWlkXCIgfSB9KTtcbnZhciBvYXV0aENsaWVudFNlY3JldFNjaGVtYSA9IHl1cFN0cmluZygpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246ICdPQXV0aCBjbGllbnQgc2VjcmV0LiBOZWVkcyB0byBiZSBzcGVjaWZpZWQgd2hlbiB1c2luZyB0eXBlPVwic3RhbmRhcmRcIicsIGV4YW1wbGVWYWx1ZTogXCJnb29nbGUtb2F1dGgtY2xpZW50LXNlY3JldFwiIH0gfSk7XG52YXIgb2F1dGhGYWNlYm9va0NvbmZpZ0lkU2NoZW1hID0geXVwU3RyaW5nKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJUaGUgY29uZmlndXJhdGlvbiBpZCBmb3IgRmFjZWJvb2sgYnVzaW5lc3MgbG9naW4gKGZvciB0aGluZ3MgbGlrZSBhZHMgYW5kIG1hcmtldGluZykuIFRoaXMgaXMgb25seSByZXF1aXJlZCBpZiB5b3UgYXJlIHVzaW5nIHRoZSBzdGFuZGFyZCBPQXV0aCB3aXRoIEZhY2Vib29rIGFuZCB5b3UgYXJlIHVzaW5nIEZhY2Vib29rIGJ1c2luZXNzIGxvZ2luLlwiIH0gfSk7XG52YXIgb2F1dGhNaWNyb3NvZnRUZW5hbnRJZFNjaGVtYSA9IHl1cFN0cmluZygpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiVGhlIE1pY3Jvc29mdCB0ZW5hbnQgaWQgZm9yIE1pY3Jvc29mdCBkaXJlY3RvcnkuIFRoaXMgaXMgb25seSByZXF1aXJlZCBpZiB5b3UgYXJlIHVzaW5nIHRoZSBzdGFuZGFyZCBPQXV0aCB3aXRoIE1pY3Jvc29mdCBhbmQgeW91IGhhdmUgYW4gQXp1cmUgQUQgdGVuYW50LlwiIH0gfSk7XG52YXIgb2F1dGhBY2NvdW50TWVyZ2VTdHJhdGVneVNjaGVtYSA9IHl1cFN0cmluZygpLm9uZU9mKFtcImxpbmtfbWV0aG9kXCIsIFwicmFpc2VfZXJyb3JcIiwgXCJhbGxvd19kdXBsaWNhdGVzXCJdKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIkRldGVybWluZXMgaG93IHRvIGhhbmRsZSBPQXV0aCBsb2dpbnMgdGhhdCBtYXRjaCBhbiBleGlzdGluZyB1c2VyIGJ5IGVtYWlsLiBgbGlua19tZXRob2RgIGFkZHMgdGhlIE9BdXRoIG1ldGhvZCB0byB0aGUgZXhpc3RpbmcgdXNlci4gYHJhaXNlX2Vycm9yYCByZWplY3RzIHRoZSBsb2dpbiB3aXRoIGFuIGVycm9yLiBgYWxsb3dfZHVwbGljYXRlc2AgY3JlYXRlcyBhIG5ldyB1c2VyLlwiLCBleGFtcGxlVmFsdWU6IFwibGlua19tZXRob2RcIiB9IH0pO1xudmFyIGVtYWlsVHlwZVNjaGVtYSA9IHl1cFN0cmluZygpLm9uZU9mKFtcInNoYXJlZFwiLCBcInN0YW5kYXJkXCJdKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiAnRW1haWwgcHJvdmlkZXIgdHlwZSwgb25lIG9mIHNoYXJlZCwgc3RhbmRhcmQuIFwic2hhcmVkXCIgdXNlcyBTdGFjayBzaGFyZWQgZW1haWwgcHJvdmlkZXIgYW5kIGl0IGlzIG9ubHkgbWVhbnQgZm9yIGRldmVsb3BtZW50LiBcInN0YW5kYXJkXCIgdXNlcyB5b3VyIG93biBlbWFpbCBzZXJ2ZXIgYW5kIHdpbGwgaGF2ZSB5b3VyIGVtYWlsIGFkZHJlc3MgYXMgdGhlIHNlbmRlci4nLCBleGFtcGxlVmFsdWU6IFwic3RhbmRhcmRcIiB9IH0pO1xudmFyIGVtYWlsU2VuZGVyTmFtZVNjaGVtYSA9IHl1cFN0cmluZygpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246ICdFbWFpbCBzZW5kZXIgbmFtZS4gTmVlZHMgdG8gYmUgc3BlY2lmaWVkIHdoZW4gdXNpbmcgdHlwZT1cInN0YW5kYXJkXCInLCBleGFtcGxlVmFsdWU6IFwiU3RhY2tcIiB9IH0pO1xudmFyIGVtYWlsSG9zdFNjaGVtYSA9IHl1cFN0cmluZygpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246ICdFbWFpbCBob3N0LiBOZWVkcyB0byBiZSBzcGVjaWZpZWQgd2hlbiB1c2luZyB0eXBlPVwic3RhbmRhcmRcIicsIGV4YW1wbGVWYWx1ZTogXCJzbXRwLnlvdXItZG9tYWluLmNvbVwiIH0gfSk7XG52YXIgZW1haWxQb3J0U2NoZW1hID0geXVwTnVtYmVyKCkubWluKDApLm1heCg2NTUzNSkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogJ0VtYWlsIHBvcnQuIE5lZWRzIHRvIGJlIHNwZWNpZmllZCB3aGVuIHVzaW5nIHR5cGU9XCJzdGFuZGFyZFwiJywgZXhhbXBsZVZhbHVlOiA1ODcgfSB9KTtcbnZhciBlbWFpbFVzZXJuYW1lU2NoZW1hID0geXVwU3RyaW5nKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogJ0VtYWlsIHVzZXJuYW1lLiBOZWVkcyB0byBiZSBzcGVjaWZpZWQgd2hlbiB1c2luZyB0eXBlPVwic3RhbmRhcmRcIicsIGV4YW1wbGVWYWx1ZTogXCJzbXRwLWVtYWlsXCIgfSB9KTtcbnZhciBlbWFpbFNlbmRlckVtYWlsU2NoZW1hID0gZW1haWxTY2hlbWEubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogJ0VtYWlsIHNlbmRlciBlbWFpbC4gTmVlZHMgdG8gYmUgc3BlY2lmaWVkIHdoZW4gdXNpbmcgdHlwZT1cInN0YW5kYXJkXCInLCBleGFtcGxlVmFsdWU6IFwiZXhhbXBsZUB5b3VyLWRvbWFpbi5jb21cIiB9IH0pO1xudmFyIGVtYWlsUGFzc3dvcmRTY2hlbWEgPSBwYXNzd29yZFNjaGVtYS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiAnRW1haWwgcGFzc3dvcmQuIE5lZWRzIHRvIGJlIHNwZWNpZmllZCB3aGVuIHVzaW5nIHR5cGU9XCJzdGFuZGFyZFwiJywgZXhhbXBsZVZhbHVlOiBcInlvdXItZW1haWwtcGFzc3dvcmRcIiB9IH0pO1xudmFyIGhhbmRsZXJQYXRoU2NoZW1hID0geXVwU3RyaW5nKCkudGVzdChcImlzLWhhbmRsZXItcGF0aFwiLCBcIkhhbmRsZXIgcGF0aCBtdXN0IHN0YXJ0IHdpdGggL1wiLCAodmFsdWUpID0+IHZhbHVlPy5zdGFydHNXaXRoKFwiL1wiKSkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogJ0hhbmRsZXIgcGF0aC4gSWYgeW91IGRpZCBub3Qgc2V0dXAgYSBjdXN0b20gaGFuZGxlciBwYXRoLCBpdCBzaG91bGQgYmUgXCIvaGFuZGxlclwiIGJ5IGRlZmF1bHQuIEl0IG5lZWRzIHRvIHN0YXJ0IHdpdGggLycsIGV4YW1wbGVWYWx1ZTogXCIvaGFuZGxlclwiIH0gfSk7XG52YXIgZW1haWxUaGVtZVNjaGVtYSA9IHl1cFN0cmluZygpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiRW1haWwgdGhlbWUgaWQgZm9yIHRoZSBwcm9qZWN0LiBEZXRlcm1pbmVzIHRoZSB2aXN1YWwgc3R5bGUgb2YgZW1haWxzIHNlbnQgYnkgdGhlIHByb2plY3QuXCIgfSB9KTtcbnZhciBlbWFpbFRoZW1lTGlzdFNjaGVtYSA9IHl1cFJlY29yZChcbiAgeXVwU3RyaW5nKCkudXVpZCgpLFxuICB5dXBPYmplY3Qoe1xuICAgIGRpc3BsYXlOYW1lOiB5dXBTdHJpbmcoKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIkVtYWlsIHRoZW1lIG5hbWVcIiwgZXhhbXBsZVZhbHVlOiBcIkRlZmF1bHQgTGlnaHRcIiB9IH0pLmRlZmluZWQoKSxcbiAgICB0c3hTb3VyY2U6IHl1cFN0cmluZygpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiRW1haWwgdGhlbWUgc291cmNlIGNvZGUgdHN4IGNvbXBvbmVudFwiIH0gfSkuZGVmaW5lZCgpXG4gIH0pXG4pLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiUmVjb3JkIG9mIGVtYWlsIHRoZW1lIElEcyB0byB0aGVpciBkaXNwbGF5IG5hbWUgYW5kIHNvdXJjZSBjb2RlXCIgfSB9KTtcbnZhciB0ZW1wbGF0ZVRoZW1lSWRTY2hlbWEgPSB5dXBNaXhlZCgpLnRlc3QoKHYpID0+IHYgPT09IHZvaWQgMCB8fCB2ID09PSBmYWxzZSB8fCB2ID09PSBudWxsIHx8IHR5cGVvZiB2ID09PSBcInN0cmluZ1wiICYmIGlzVXVpZCh2KSkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJFbWFpbCB0aGVtZSBpZCBmb3IgdGhlIHRlbXBsYXRlXCIgfSB9KS5vcHRpb25hbCgpO1xudmFyIGVtYWlsVGVtcGxhdGVMaXN0U2NoZW1hID0geXVwUmVjb3JkKFxuICB5dXBTdHJpbmcoKS51dWlkKCksXG4gIHl1cE9iamVjdCh7XG4gICAgZGlzcGxheU5hbWU6IHl1cFN0cmluZygpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiRW1haWwgdGVtcGxhdGUgbmFtZVwiLCBleGFtcGxlVmFsdWU6IFwiRW1haWwgVmVyaWZpY2F0aW9uXCIgfSB9KS5kZWZpbmVkKCksXG4gICAgdHN4U291cmNlOiB5dXBTdHJpbmcoKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIkVtYWlsIHRlbXBsYXRlIHNvdXJjZSBjb2RlIHRzeCBjb21wb25lbnRcIiB9IH0pLmRlZmluZWQoKSxcbiAgICAvLyB0aGVtZUlkIGNhbiBiZSBvbmUgb2YgdGhyZWUgdmFsdWVzOlxuICAgIC8vIDEuIEEgdmFsaWQgdGhlbWUgaWRcbiAgICAvLyAyLiBmYWxzZSwgd2hpY2ggbWVhbnMgdGhlIHRlbXBsYXRlIHVzZXMgbm8gdGhlbWVcbiAgICAvLyAzLiB1bmRlZmluZWQvbm90IGdpdmVuLCB3aGljaCBtZWFucyB0aGUgdGVtcGxhdGUgdXNlcyB0aGUgcHJvamVjdCdzIGFjdGl2ZSB0aGVtZVxuICAgIHRoZW1lSWQ6IHRlbXBsYXRlVGhlbWVJZFNjaGVtYVxuICB9KVxuKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIlJlY29yZCBvZiBlbWFpbCB0ZW1wbGF0ZSBJRHMgdG8gdGhlaXIgZGlzcGxheSBuYW1lIGFuZCBzb3VyY2UgY29kZVwiIH0gfSk7XG52YXIgY3VzdG9tZXJUeXBlU2NoZW1hID0geXVwU3RyaW5nKCkub25lT2YoW1widXNlclwiLCBcInRlYW1cIiwgXCJjdXN0b21cIl0pO1xudmFyIHZhbGlkYXRlSGFzQXRMZWFzdE9uZVN1cHBvcnRlZEN1cnJlbmN5ID0gKHZhbHVlLCBjb250ZXh0KSA9PiB7XG4gIGlmICghdmFsdWUpIHJldHVybiB0cnVlO1xuICBjb25zdCBjdXJyZW5jaWVzID0gT2JqZWN0LmtleXModmFsdWUpLmZpbHRlcigoa2V5KSA9PiBTVVBQT1JURURfQ1VSUkVOQ0lFUy5zb21lKChjKSA9PiBjLmNvZGUgPT09IGtleSkpO1xuICBpZiAoY3VycmVuY2llcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gY29udGV4dC5jcmVhdGVFcnJvcih7IG1lc3NhZ2U6IFwiQXQgbGVhc3Qgb25lIGN1cnJlbmN5IGlzIHJlcXVpcmVkXCIgfSk7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59O1xudmFyIG9mZmVyUHJpY2VTY2hlbWEgPSB5dXBPYmplY3Qoe1xuICAuLi50eXBlZEZyb21FbnRyaWVzKFNVUFBPUlRFRF9DVVJSRU5DSUVTLm1hcCgoY3VycmVuY3kpID0+IFtjdXJyZW5jeS5jb2RlLCBtb25leUFtb3VudFNjaGVtYShjdXJyZW5jeSkub3B0aW9uYWwoKV0pKSxcbiAgaW50ZXJ2YWw6IGRheUludGVydmFsU2NoZW1hLm9wdGlvbmFsKCksXG4gIHNlcnZlck9ubHk6IHl1cEJvb2xlYW4oKSxcbiAgZnJlZVRyaWFsOiBkYXlJbnRlcnZhbFNjaGVtYS5vcHRpb25hbCgpXG59KS50ZXN0KFwiYXQtbGVhc3Qtb25lLWN1cnJlbmN5XCIsICh2YWx1ZSwgY29udGV4dCkgPT4gdmFsaWRhdGVIYXNBdExlYXN0T25lU3VwcG9ydGVkQ3VycmVuY3kodmFsdWUsIGNvbnRleHQpKTtcbnZhciBwcmljZU9ySW5jbHVkZUJ5RGVmYXVsdFNjaGVtYSA9IHl1cFVuaW9uKFxuICB5dXBTdHJpbmcoKS5vbmVPZihbXCJpbmNsdWRlLWJ5LWRlZmF1bHRcIl0pLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiTWFrZXMgdGhpcyBpdGVtIGZyZWUgYW5kIGluY2x1ZGVzIGl0IGJ5IGRlZmF1bHQgZm9yIGFsbCBjdXN0b21lcnMuXCIsIGV4YW1wbGVWYWx1ZTogXCJpbmNsdWRlLWJ5LWRlZmF1bHRcIiB9IH0pLFxuICB5dXBSZWNvcmQoXG4gICAgdXNlclNwZWNpZmllZElkU2NoZW1hKFwicHJpY2VJZFwiKSxcbiAgICBvZmZlclByaWNlU2NoZW1hXG4gIClcbik7XG52YXIgb2ZmZXJTY2hlbWEgPSB5dXBPYmplY3Qoe1xuICBkaXNwbGF5TmFtZTogeXVwU3RyaW5nKCksXG4gIGdyb3VwSWQ6IHVzZXJTcGVjaWZpZWRJZFNjaGVtYShcImdyb3VwSWRcIikub3B0aW9uYWwoKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIlRoZSBJRCBvZiB0aGUgZ3JvdXAgdGhpcyBvZmZlciBiZWxvbmdzIHRvLiBXaXRoaW4gYSBncm91cCwgYWxsIG9mZmVycyBhcmUgbXV0dWFsbHkgZXhjbHVzaXZlIHVubGVzcyB0aGV5IGFyZSBhbiBhZGQtb24gdG8gYW5vdGhlciBvZmZlciBpbiB0aGUgZ3JvdXAuXCIsIGV4YW1wbGVWYWx1ZTogXCJncm91cC1pZFwiIH0gfSksXG4gIGlzQWRkT25UbzogeXVwVW5pb24oXG4gICAgeXVwQm9vbGVhbigpLmlzRmFsc2UoKSxcbiAgICB5dXBSZWNvcmQoXG4gICAgICB1c2VyU3BlY2lmaWVkSWRTY2hlbWEoXCJvZmZlcklkXCIpLFxuICAgICAgeXVwQm9vbGVhbigpLmlzVHJ1ZSgpLmRlZmluZWQoKVxuICAgIClcbiAgKS5vcHRpb25hbCgpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiVGhlIG9mZmVycyB0aGF0IHRoaXMgb2ZmZXIgaXMgYW4gYWRkLW9uIHRvLiBJZiB0aGlzIGlzIHNldCwgdGhlIGN1c3RvbWVyIG11c3QgYWxyZWFkeSBoYXZlIG9uZSBvZiB0aGUgb2ZmZXJzIGluIHRoZSByZWNvcmQgdG8gYmUgYWJsZSB0byBwdXJjaGFzZSB0aGlzIG9mZmVyLlwiLCBleGFtcGxlVmFsdWU6IHsgXCJvZmZlci1pZFwiOiB0cnVlIH0gfSB9KSxcbiAgY3VzdG9tZXJUeXBlOiBjdXN0b21lclR5cGVTY2hlbWEuZGVmaW5lZCgpLFxuICBmcmVlVHJpYWw6IGRheUludGVydmFsU2NoZW1hLm9wdGlvbmFsKCksXG4gIHNlcnZlck9ubHk6IHl1cEJvb2xlYW4oKSxcbiAgc3RhY2thYmxlOiB5dXBCb29sZWFuKCksXG4gIHByaWNlczogcHJpY2VPckluY2x1ZGVCeURlZmF1bHRTY2hlbWEuZGVmaW5lZCgpLFxuICBpbmNsdWRlZEl0ZW1zOiB5dXBSZWNvcmQoXG4gICAgdXNlclNwZWNpZmllZElkU2NoZW1hKFwiaXRlbUlkXCIpLFxuICAgIHl1cE9iamVjdCh7XG4gICAgICBxdWFudGl0eTogeXVwTnVtYmVyKCkuZGVmaW5lZCgpLFxuICAgICAgcmVwZWF0OiBkYXlJbnRlcnZhbE9yTmV2ZXJTY2hlbWEub3B0aW9uYWwoKSxcbiAgICAgIGV4cGlyZXM6IHl1cFN0cmluZygpLm9uZU9mKFtcIm5ldmVyXCIsIFwid2hlbi1wdXJjaGFzZS1leHBpcmVzXCIsIFwid2hlbi1yZXBlYXRlZFwiXSkub3B0aW9uYWwoKVxuICAgIH0pXG4gIClcbn0pO1xudmFyIGlubGluZU9mZmVyU2NoZW1hID0geXVwT2JqZWN0KHtcbiAgZGlzcGxheV9uYW1lOiB5dXBTdHJpbmcoKS5kZWZpbmVkKCksXG4gIGN1c3RvbWVyX3R5cGU6IGN1c3RvbWVyVHlwZVNjaGVtYS5kZWZpbmVkKCksXG4gIGZyZWVfdHJpYWw6IGRheUludGVydmFsU2NoZW1hLm9wdGlvbmFsKCksXG4gIHNlcnZlcl9vbmx5OiB5dXBCb29sZWFuKCkub25lT2YoW3RydWVdKS5kZWZhdWx0KHRydWUpLFxuICBwcmljZXM6IHl1cFJlY29yZChcbiAgICB1c2VyU3BlY2lmaWVkSWRTY2hlbWEoXCJwcmljZUlkXCIpLFxuICAgIHl1cE9iamVjdCh7XG4gICAgICAuLi50eXBlZEZyb21FbnRyaWVzKFNVUFBPUlRFRF9DVVJSRU5DSUVTLm1hcCgoY3VycmVuY3kpID0+IFtjdXJyZW5jeS5jb2RlLCBtb25leUFtb3VudFNjaGVtYShjdXJyZW5jeSkub3B0aW9uYWwoKV0pKSxcbiAgICAgIGludGVydmFsOiBkYXlJbnRlcnZhbFNjaGVtYS5vcHRpb25hbCgpLFxuICAgICAgZnJlZV90cmlhbDogZGF5SW50ZXJ2YWxTY2hlbWEub3B0aW9uYWwoKVxuICAgIH0pLnRlc3QoXCJhdC1sZWFzdC1vbmUtY3VycmVuY3lcIiwgKHZhbHVlLCBjb250ZXh0KSA9PiB2YWxpZGF0ZUhhc0F0TGVhc3RPbmVTdXBwb3J0ZWRDdXJyZW5jeSh2YWx1ZSwgY29udGV4dCkpXG4gICksXG4gIGluY2x1ZGVkX2l0ZW1zOiB5dXBSZWNvcmQoXG4gICAgdXNlclNwZWNpZmllZElkU2NoZW1hKFwiaXRlbUlkXCIpLFxuICAgIHl1cE9iamVjdCh7XG4gICAgICBxdWFudGl0eTogeXVwTnVtYmVyKCksXG4gICAgICByZXBlYXQ6IGRheUludGVydmFsT3JOZXZlclNjaGVtYS5vcHRpb25hbCgpLFxuICAgICAgZXhwaXJlczogeXVwU3RyaW5nKCkub25lT2YoW1wibmV2ZXJcIiwgXCJ3aGVuLXB1cmNoYXNlLWV4cGlyZXNcIiwgXCJ3aGVuLXJlcGVhdGVkXCJdKS5vcHRpb25hbCgpXG4gICAgfSlcbiAgKVxufSk7XG52YXIgUmVwbGFjZUZpZWxkV2l0aE93blVzZXJJZCA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihwYXRoKSB7XG4gICAgc3VwZXIoYFRoaXMgZXJyb3Igc2hvdWxkIGJlIGNhdWdodCBieSB3aG9ldmVyIHZhbGlkYXRlZCB0aGUgc2NoZW1hLCBhbmQgdGhlIGZpZWxkIGluIHRoZSBwYXRoICcke3BhdGh9JyBzaG91bGQgYmUgcmVwbGFjZWQgd2l0aCB0aGUgY3VycmVudCB1c2VyJ3MgaWQuIFRoaXMgaXMgYSB3b3JrYXJvdW5kIHRvIHl1cCBub3QgcHJvdmlkaW5nIGFjY2VzcyB0byB0aGUgY29udGV4dCBpbnNpZGUgdGhlIHRyYW5zZm9ybSBmdW5jdGlvbi5gKTtcbiAgICB0aGlzLnBhdGggPSBwYXRoO1xuICB9XG59O1xudmFyIHVzZXJJZE1lU2VudGluZWxVdWlkID0gXCJjYWQ1NjRmZC1mODFiLTQzZjQtYjM5MC05OGFiZjNmY2MxN2VcIjtcbnZhciB1c2VySWRPck1lU2NoZW1hID0geXVwU3RyaW5nKCkudXVpZCgpLnRyYW5zZm9ybSgodikgPT4ge1xuICBpZiAodiA9PT0gXCJtZVwiKSByZXR1cm4gdXNlcklkTWVTZW50aW5lbFV1aWQ7XG4gIGVsc2UgcmV0dXJuIHY7XG59KS50ZXN0KCh2LCBjb250ZXh0KSA9PiB7XG4gIGlmICghKFwic3RhY2tBbGxvd1VzZXJJZE1lXCIgaW4gKGNvbnRleHQub3B0aW9ucy5jb250ZXh0ID8/IHt9KSkpIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwidXNlcklkT3JNZVNjaGVtYSBpcyBub3QgYWxsb3dlZCBpbiB0aGlzIGNvbnRleHQuIE1ha2Ugc3VyZSB5b3UncmUgdXNpbmcgeXVwVmFsaWRhdGUgZnJvbSBzY2hlbWEtZmllbGRzLnRzIHRvIHZhbGlkYXRlLCBpbnN0ZWFkIG9mIHNjaGVtYS52YWxpZGF0ZSguLi4pLlwiKTtcbiAgaWYgKCFjb250ZXh0Lm9wdGlvbnMuY29udGV4dD8uc3RhY2tBbGxvd1VzZXJJZE1lKSB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcInVzZXJJZE9yTWVTY2hlbWEgaXMgbm90IGFsbG93ZWQgaW4gdGhpcyBjb250ZXh0LiBNYWtlIHN1cmUgeW91J3JlIHBhc3NpbmcgaW4gdGhlIGN1cnJlbnRVc2VySWQgb3B0aW9uIGluIHl1cFZhbGlkYXRlLlwiKTtcbiAgaWYgKHYgPT09IHVzZXJJZE1lU2VudGluZWxVdWlkKSB0aHJvdyBuZXcgUmVwbGFjZUZpZWxkV2l0aE93blVzZXJJZChjb250ZXh0LnBhdGgpO1xuICByZXR1cm4gdHJ1ZTtcbn0pLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiVGhlIElEIG9mIHRoZSB1c2VyLCBvciB0aGUgc3BlY2lhbCB2YWx1ZSBgbWVgIGZvciB0aGUgY3VycmVudGx5IGF1dGhlbnRpY2F0ZWQgdXNlclwiLCBleGFtcGxlVmFsdWU6IFwiMzI0MWEyODUtODMyOS00ZDY5LThmM2QtMzE2ZTA4Y2YxNDBjXCIgfSB9KTtcbnZhciB1c2VySWRTY2hlbWEgPSB5dXBTdHJpbmcoKS51dWlkKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogX2lkRGVzY3JpcHRpb24oXCJ1c2VyXCIpLCBleGFtcGxlVmFsdWU6IFwiMzI0MWEyODUtODMyOS00ZDY5LThmM2QtMzE2ZTA4Y2YxNDBjXCIgfSB9KTtcbnZhciBwcmltYXJ5RW1haWxTY2hlbWEgPSBlbWFpbFNjaGVtYS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIlByaW1hcnkgZW1haWxcIiwgZXhhbXBsZVZhbHVlOiBcImpvaG5kb2VAZXhhbXBsZS5jb21cIiB9IH0pO1xudmFyIHByaW1hcnlFbWFpbEF1dGhFbmFibGVkU2NoZW1hID0geXVwQm9vbGVhbigpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiV2hldGhlciB0aGUgcHJpbWFyeSBlbWFpbCBpcyB1c2VkIGZvciBhdXRoZW50aWNhdGlvbi4gSWYgdGhpcyBpcyBzZXQgdG8gYGZhbHNlYCwgdGhlIHVzZXIgd2lsbCBub3QgYmUgYWJsZSB0byBzaWduIGluIHdpdGggdGhlIHByaW1hcnkgZW1haWwgd2l0aCBwYXNzd29yZCBvciBPVFBcIiwgZXhhbXBsZVZhbHVlOiB0cnVlIH0gfSk7XG52YXIgcHJpbWFyeUVtYWlsVmVyaWZpZWRTY2hlbWEgPSB5dXBCb29sZWFuKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJXaGV0aGVyIHRoZSBwcmltYXJ5IGVtYWlsIGhhcyBiZWVuIHZlcmlmaWVkIHRvIGJlbG9uZyB0byB0aGlzIHVzZXJcIiwgZXhhbXBsZVZhbHVlOiB0cnVlIH0gfSk7XG52YXIgdXNlckRpc3BsYXlOYW1lU2NoZW1hID0geXVwU3RyaW5nKCkubnVsbGFibGUoKS5tYXgoMjU2KS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBfZGlzcGxheU5hbWVEZXNjcmlwdGlvbihcInVzZXJcIiksIGV4YW1wbGVWYWx1ZTogXCJKb2huIERvZVwiIH0gfSk7XG52YXIgc2VsZWN0ZWRUZWFtSWRTY2hlbWEgPSB5dXBTdHJpbmcoKS51dWlkKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJJRCBvZiB0aGUgdGVhbSBjdXJyZW50bHkgc2VsZWN0ZWQgYnkgdGhlIHVzZXJcIiwgZXhhbXBsZVZhbHVlOiBcInRlYW0taWRcIiB9IH0pO1xudmFyIHByb2ZpbGVJbWFnZVVybFNjaGVtYSA9IHVybFNjaGVtYS5tYXgoTUFYX0lNQUdFX1NJWkVfQkFTRTY0X0JZVEVTKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBfcHJvZmlsZUltYWdlVXJsRGVzY3JpcHRpb24oXCJ1c2VyXCIpLCBleGFtcGxlVmFsdWU6IFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9pbWFnZS5qcGdcIiB9IH0pO1xudmFyIHNpZ25lZFVwQXRNaWxsaXNTY2hlbWEgPSB5dXBOdW1iZXIoKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBfc2lnbmVkVXBBdE1pbGxpc0Rlc2NyaXB0aW9uLCBleGFtcGxlVmFsdWU6IDE2M2UxMCB9IH0pO1xudmFyIHVzZXJDbGllbnRNZXRhZGF0YVNjaGVtYSA9IGpzb25TY2hlbWEubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogX2NsaWVudE1ldGFEYXRhRGVzY3JpcHRpb24oXCJ1c2VyXCIpLCBleGFtcGxlVmFsdWU6IHsga2V5OiBcInZhbHVlXCIgfSB9IH0pO1xudmFyIHVzZXJDbGllbnRSZWFkT25seU1ldGFkYXRhU2NoZW1hID0ganNvblNjaGVtYS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBfY2xpZW50UmVhZE9ubHlNZXRhRGF0YURlc2NyaXB0aW9uKFwidXNlclwiKSwgZXhhbXBsZVZhbHVlOiB7IGtleTogXCJ2YWx1ZVwiIH0gfSB9KTtcbnZhciB1c2VyU2VydmVyTWV0YWRhdGFTY2hlbWEgPSBqc29uU2NoZW1hLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IF9zZXJ2ZXJNZXRhRGF0YURlc2NyaXB0aW9uKFwidXNlclwiKSwgZXhhbXBsZVZhbHVlOiB7IGtleTogXCJ2YWx1ZVwiIH0gfSB9KTtcbnZhciB1c2VyT0F1dGhQcm92aWRlclNjaGVtYSA9IHl1cE9iamVjdCh7XG4gIGlkOiB5dXBTdHJpbmcoKS5kZWZpbmVkKCksXG4gIHR5cGU6IHl1cFN0cmluZygpLm9uZU9mKGFsbFByb3ZpZGVycykuZGVmaW5lZCgpLFxuICBwcm92aWRlcl91c2VyX2lkOiB5dXBTdHJpbmcoKS5kZWZpbmVkKClcbn0pO1xudmFyIHVzZXJMYXN0QWN0aXZlQXRNaWxsaXNTY2hlbWEgPSB5dXBOdW1iZXIoKS5udWxsYWJsZSgpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IF9sYXN0QWN0aXZlQXRNaWxsaXNEZXNjcmlwdGlvbiwgZXhhbXBsZVZhbHVlOiAxNjNlMTAgfSB9KTtcbnZhciB1c2VyUGFzc2tleUF1dGhFbmFibGVkU2NoZW1hID0geXVwQm9vbGVhbigpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgaGlkZGVuOiB0cnVlLCBkZXNjcmlwdGlvbjogXCJXaGV0aGVyIHRoZSB1c2VyIGhhcyBwYXNza2V5cyBlbmFibGVkXCIsIGV4YW1wbGVWYWx1ZTogZmFsc2UgfSB9KTtcbnZhciB1c2VyT3RwQXV0aEVuYWJsZWRTY2hlbWEgPSB5dXBCb29sZWFuKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBoaWRkZW46IHRydWUsIGRlc2NyaXB0aW9uOiBcIldoZXRoZXIgdGhlIHVzZXIgaGFzIE9UUC9tYWdpYyBsaW5rIGVuYWJsZWQuIFwiLCBleGFtcGxlVmFsdWU6IHRydWUgfSB9KTtcbnZhciB1c2VyT3RwQXV0aEVuYWJsZWRNdXRhdGlvblNjaGVtYSA9IHl1cEJvb2xlYW4oKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGhpZGRlbjogdHJ1ZSwgZGVzY3JpcHRpb246IFwiV2hldGhlciB0aGUgdXNlciBoYXMgT1RQL21hZ2ljIGxpbmsgZW5hYmxlZC4gTm90ZSB0aGF0IG9ubHkgYWNjb3VudHMgd2l0aCB2ZXJpZmllZCBlbWFpbHMgY2FuIHNpZ24taW4gd2l0aCBPVFAuXCIsIGV4YW1wbGVWYWx1ZTogdHJ1ZSB9IH0pO1xudmFyIHVzZXJIYXNQYXNzd29yZFNjaGVtYSA9IHl1cEJvb2xlYW4oKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGhpZGRlbjogdHJ1ZSwgZGVzY3JpcHRpb246IFwiV2hldGhlciB0aGUgdXNlciBoYXMgYSBwYXNzd29yZCBzZXQuIElmIHRoZSB1c2VyIGRvZXMgbm90IGhhdmUgYSBwYXNzd29yZCBzZXQsIHRoZXkgd2lsbCBub3QgYmUgYWJsZSB0byBzaWduIGluIHdpdGggZW1haWwvcGFzc3dvcmQuXCIsIGV4YW1wbGVWYWx1ZTogdHJ1ZSB9IH0pO1xudmFyIHVzZXJQYXNzd29yZE11dGF0aW9uU2NoZW1hID0gcGFzc3dvcmRTY2hlbWEubnVsbGFibGUoKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIlNldHMgdGhlIHVzZXIncyBwYXNzd29yZC4gRG9pbmcgc28gcmV2b2tlcyBhbGwgY3VycmVudCBzZXNzaW9ucy5cIiwgZXhhbXBsZVZhbHVlOiBcIm15LW5ldy1wYXNzd29yZFwiIH0gfSkubWF4KDcwKTtcbnZhciB1c2VyUGFzc3dvcmRIYXNoTXV0YXRpb25TY2hlbWEgPSB5dXBTdHJpbmcoKS5ub25FbXB0eSgpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiSWYgYHBhc3N3b3JkYCBpcyBub3QgZ2l2ZW4sIHNldHMgdGhlIHVzZXIncyBwYXNzd29yZCBoYXNoIHRvIHRoZSBnaXZlbiBzdHJpbmcgaW4gTW9kdWxhciBDcnlwdCBGb3JtYXQgKGV4LjogYCQyYSQxMCRWSWhJT29mU01xR2RHbEw0d3pFLy9lLjc3ZEFRR3FOdEYvMWRUN2JxQ3JWdFF1SW5XeTJxaWApLiBEb2luZyBzbyByZXZva2VzIGFsbCBjdXJyZW50IHNlc3Npb25zLlwiIH0gfSk7XG52YXIgdXNlclRvdHBTZWNyZXRNdXRhdGlvblNjaGVtYSA9IGJhc2U2NFNjaGVtYS5udWxsYWJsZSgpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiRW5hYmxlcyAyRkEgYW5kIHNldHMgYSBUT1RQIHNlY3JldCBmb3IgdGhlIHVzZXIuIFNldCB0byBudWxsIHRvIGRpc2FibGUgMkZBLlwiLCBleGFtcGxlVmFsdWU6IFwiZEc5MGNDMXpaV055WlhRPVwiIH0gfSk7XG52YXIgYWNjZXNzVG9rZW5QYXlsb2FkU2NoZW1hID0geXVwT2JqZWN0KHtcbiAgc3ViOiB5dXBTdHJpbmcoKS5kZWZpbmVkKCksXG4gIGV4cDogeXVwTnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgaXNzOiB5dXBTdHJpbmcoKS5kZWZpbmVkKCksXG4gIGF1ZDogeXVwU3RyaW5nKCkuZGVmaW5lZCgpLFxuICBwcm9qZWN0X2lkOiB5dXBTdHJpbmcoKS5kZWZpbmVkKCksXG4gIGJyYW5jaF9pZDogeXVwU3RyaW5nKCkuZGVmaW5lZCgpLFxuICByZWZyZXNoX3Rva2VuX2lkOiB5dXBTdHJpbmcoKS5kZWZpbmVkKCksXG4gIHJvbGU6IHl1cFN0cmluZygpLm9uZU9mKFtcImF1dGhlbnRpY2F0ZWRcIl0pLmRlZmluZWQoKSxcbiAgbmFtZTogeXVwU3RyaW5nKCkuZGVmaW5lZCgpLm51bGxhYmxlKCksXG4gIGVtYWlsOiB5dXBTdHJpbmcoKS5kZWZpbmVkKCkubnVsbGFibGUoKSxcbiAgZW1haWxfdmVyaWZpZWQ6IHl1cEJvb2xlYW4oKS5kZWZpbmVkKCksXG4gIHNlbGVjdGVkX3RlYW1faWQ6IHl1cFN0cmluZygpLmRlZmluZWQoKS5udWxsYWJsZSgpLFxuICBpc19hbm9ueW1vdXM6IHl1cEJvb2xlYW4oKS5kZWZpbmVkKClcbn0pO1xudmFyIHNpZ25JbkVtYWlsU2NoZW1hID0gc3RyaWN0RW1haWxTY2hlbWEodm9pZCAwKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIlRoZSBlbWFpbCB0byBzaWduIGluIHdpdGguXCIsIGV4YW1wbGVWYWx1ZTogXCJqb2huZG9lQGV4YW1wbGUuY29tXCIgfSB9KTtcbnZhciBlbWFpbE90cFNpZ25JbkNhbGxiYWNrVXJsU2NoZW1hID0gdXJsU2NoZW1hLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiVGhlIGJhc2UgY2FsbGJhY2sgVVJMIHRvIGNvbnN0cnVjdCB0aGUgbWFnaWMgbGluayBmcm9tLiBBIHF1ZXJ5IHBhcmFtZXRlciBgY29kZWAgd2l0aCB0aGUgdmVyaWZpY2F0aW9uIGNvZGUgd2lsbCBiZSBhcHBlbmRlZCB0byBpdC4gVGhlIHBhZ2Ugc2hvdWxkIHRoZW4gbWFrZSBhIHJlcXVlc3QgdG8gdGhlIGAvYXV0aC9vdHAvc2lnbi1pbmAgZW5kcG9pbnQuXCIsIGV4YW1wbGVWYWx1ZTogXCJodHRwczovL2V4YW1wbGUuY29tL2hhbmRsZXIvbWFnaWMtbGluay1jYWxsYmFja1wiIH0gfSk7XG52YXIgZW1haWxWZXJpZmljYXRpb25DYWxsYmFja1VybFNjaGVtYSA9IHVybFNjaGVtYS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIlRoZSBiYXNlIGNhbGxiYWNrIFVSTCB0byBjb25zdHJ1Y3QgYSB2ZXJpZmljYXRpb24gbGluayBmb3IgdGhlIHZlcmlmaWNhdGlvbiBlLW1haWwuIEEgcXVlcnkgcGFyYW1ldGVyIGBjb2RlYCB3aXRoIHRoZSB2ZXJpZmljYXRpb24gY29kZSB3aWxsIGJlIGFwcGVuZGVkIHRvIGl0LiBUaGUgcGFnZSBzaG91bGQgdGhlbiBtYWtlIGEgcmVxdWVzdCB0byB0aGUgYC9jb250YWN0LWNoYW5uZWxzL3ZlcmlmeWAgZW5kcG9pbnQuXCIsIGV4YW1wbGVWYWx1ZTogXCJodHRwczovL2V4YW1wbGUuY29tL2hhbmRsZXIvZW1haWwtdmVyaWZpY2F0aW9uXCIgfSB9KTtcbnZhciBhY2Nlc3NUb2tlblJlc3BvbnNlU2NoZW1hID0geXVwU3RyaW5nKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJTaG9ydC1saXZlZCBhY2Nlc3MgdG9rZW4gdGhhdCBjYW4gYmUgdXNlZCB0byBhdXRoZW50aWNhdGUgdGhlIHVzZXJcIiwgZXhhbXBsZVZhbHVlOiBcImV5SmhtTWlKQjJUTy4uLmRpSTRRVFwiIH0gfSk7XG52YXIgcmVmcmVzaFRva2VuUmVzcG9uc2VTY2hlbWEgPSB5dXBTdHJpbmcoKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIkxvbmctbGl2ZWQgcmVmcmVzaCB0b2tlbiB0aGF0IGNhbiBiZSB1c2VkIHRvIG9idGFpbiBhIG5ldyBhY2Nlc3MgdG9rZW5cIiwgZXhhbXBsZVZhbHVlOiBcImk4bnMzYXEyLi4uMTR5XCIgfSB9KTtcbnZhciBzaWduSW5SZXNwb25zZVNjaGVtYSA9IHl1cE9iamVjdCh7XG4gIHJlZnJlc2hfdG9rZW46IHJlZnJlc2hUb2tlblJlc3BvbnNlU2NoZW1hLmRlZmluZWQoKSxcbiAgYWNjZXNzX3Rva2VuOiBhY2Nlc3NUb2tlblJlc3BvbnNlU2NoZW1hLmRlZmluZWQoKSxcbiAgaXNfbmV3X3VzZXI6IHl1cEJvb2xlYW4oKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIldoZXRoZXIgdGhlIHVzZXIgaXMgYSBuZXcgdXNlclwiLCBleGFtcGxlVmFsdWU6IHRydWUgfSB9KS5kZWZpbmVkKCksXG4gIHVzZXJfaWQ6IHVzZXJJZFNjaGVtYS5kZWZpbmVkKClcbn0pO1xudmFyIHRlYW1TeXN0ZW1QZXJtaXNzaW9ucyA9IFtcbiAgXCIkdXBkYXRlX3RlYW1cIixcbiAgXCIkZGVsZXRlX3RlYW1cIixcbiAgXCIkcmVhZF9tZW1iZXJzXCIsXG4gIFwiJHJlbW92ZV9tZW1iZXJzXCIsXG4gIFwiJGludml0ZV9tZW1iZXJzXCIsXG4gIFwiJG1hbmFnZV9hcGlfa2V5c1wiXG5dO1xudmFyIHBlcm1pc3Npb25EZWZpbml0aW9uSWRTY2hlbWEgPSB5dXBTdHJpbmcoKS5tYXRjaGVzKC9eXFwkP1thLXowLTlfOl0rJC8sICdPbmx5IGxvd2VyY2FzZSBsZXR0ZXJzLCBudW1iZXJzLCBcIjpcIiwgXCJfXCIgYW5kIG9wdGlvbmFsIFwiJFwiIGF0IHRoZSBiZWdpbm5pbmcgYXJlIGFsbG93ZWQnKS50ZXN0KFwiaXMtc3lzdGVtLXBlcm1pc3Npb25cIiwgXCJTeXN0ZW0gcGVybWlzc2lvbnMgbXVzdCBzdGFydCB3aXRoIGEgZG9sbGFyIHNpZ25cIiwgKHZhbHVlLCBjdHgpID0+IHtcbiAgaWYgKCF2YWx1ZSkgcmV0dXJuIHRydWU7XG4gIGlmICh2YWx1ZS5zdGFydHNXaXRoKFwiJFwiKSAmJiAhdGVhbVN5c3RlbVBlcm1pc3Npb25zLmluY2x1ZGVzKHZhbHVlKSkge1xuICAgIHJldHVybiBjdHguY3JlYXRlRXJyb3IoeyBtZXNzYWdlOiBcIkludmFsaWQgc3lzdGVtIHBlcm1pc3Npb25cIiB9KTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn0pLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IGBUaGUgcGVybWlzc2lvbiBJRCB1c2VkIHRvIHVuaXF1ZWx5IGlkZW50aWZ5IGEgcGVybWlzc2lvbi4gQ2FuIGVpdGhlciBiZSBhIGN1c3RvbSBwZXJtaXNzaW9uIHdpdGggbG93ZXJjYXNlIGxldHRlcnMsIG51bWJlcnMsIFxcYDpcXGAsIGFuZCBcXGBfXFxgIGNoYXJhY3RlcnMsIG9yIG9uZSBvZiB0aGUgc3lzdGVtIHBlcm1pc3Npb25zOiAke3RlYW1TeXN0ZW1QZXJtaXNzaW9ucy5tYXAoKHgpID0+IGBcXGAke3h9XFxgYCkuam9pbihcIiwgXCIpfWAsIGV4YW1wbGVWYWx1ZTogXCJyZWFkX3NlY3JldF9pbmZvXCIgfSB9KTtcbnZhciBjdXN0b21QZXJtaXNzaW9uRGVmaW5pdGlvbklkU2NoZW1hID0geXVwU3RyaW5nKCkubWF0Y2hlcygvXlthLXowLTlfOl0rJC8sICdPbmx5IGxvd2VyY2FzZSBsZXR0ZXJzLCBudW1iZXJzLCBcIjpcIiwgXCJfXCIgYXJlIGFsbG93ZWQnKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiAnVGhlIHBlcm1pc3Npb24gSUQgdXNlZCB0byB1bmlxdWVseSBpZGVudGlmeSBhIHBlcm1pc3Npb24uIENhbiBvbmx5IGNvbnRhaW4gbG93ZXJjYXNlIGxldHRlcnMsIG51bWJlcnMsIFwiOlwiLCBhbmQgXCJfXCIgY2hhcmFjdGVycycsIGV4YW1wbGVWYWx1ZTogXCJyZWFkX3NlY3JldF9pbmZvXCIgfSB9KTtcbnZhciB0ZWFtUGVybWlzc2lvbkRlc2NyaXB0aW9uU2NoZW1hID0geXVwU3RyaW5nKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJBIGh1bWFuLXJlYWRhYmxlIGRlc2NyaXB0aW9uIG9mIHRoZSBwZXJtaXNzaW9uXCIsIGV4YW1wbGVWYWx1ZTogXCJSZWFkIHNlY3JldCBpbmZvcm1hdGlvblwiIH0gfSk7XG52YXIgY29udGFpbmVkUGVybWlzc2lvbklkc1NjaGVtYSA9IHl1cEFycmF5KHBlcm1pc3Npb25EZWZpbml0aW9uSWRTY2hlbWEuZGVmaW5lZCgpKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIlRoZSBJRHMgb2YgdGhlIHBlcm1pc3Npb25zIHRoYXQgYXJlIGNvbnRhaW5lZCBpbiB0aGlzIHBlcm1pc3Npb25cIiwgZXhhbXBsZVZhbHVlOiBbXCJyZWFkX3B1YmxpY19pbmZvXCJdIH0gfSk7XG52YXIgdGVhbUlkU2NoZW1hID0geXVwU3RyaW5nKCkudXVpZCgpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IF9pZERlc2NyaXB0aW9uKFwidGVhbVwiKSwgZXhhbXBsZVZhbHVlOiBcImFkOTYyNzc3LTgyNDQtNDk2YS1iNmEyLWUwYzZhNDQ5Yzc5ZVwiIH0gfSk7XG52YXIgdGVhbURpc3BsYXlOYW1lU2NoZW1hID0geXVwU3RyaW5nKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogX2Rpc3BsYXlOYW1lRGVzY3JpcHRpb24oXCJ0ZWFtXCIpLCBleGFtcGxlVmFsdWU6IFwiTXkgVGVhbVwiIH0gfSk7XG52YXIgdGVhbVByb2ZpbGVJbWFnZVVybFNjaGVtYSA9IHVybFNjaGVtYS5tYXgoMWU2KS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBfcHJvZmlsZUltYWdlVXJsRGVzY3JpcHRpb24oXCJ0ZWFtXCIpLCBleGFtcGxlVmFsdWU6IFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9pbWFnZS5qcGdcIiB9IH0pO1xudmFyIHRlYW1DbGllbnRNZXRhZGF0YVNjaGVtYSA9IGpzb25TY2hlbWEubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogX2NsaWVudE1ldGFEYXRhRGVzY3JpcHRpb24oXCJ0ZWFtXCIpLCBleGFtcGxlVmFsdWU6IHsga2V5OiBcInZhbHVlXCIgfSB9IH0pO1xudmFyIHRlYW1DbGllbnRSZWFkT25seU1ldGFkYXRhU2NoZW1hID0ganNvblNjaGVtYS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBfY2xpZW50UmVhZE9ubHlNZXRhRGF0YURlc2NyaXB0aW9uKFwidGVhbVwiKSwgZXhhbXBsZVZhbHVlOiB7IGtleTogXCJ2YWx1ZVwiIH0gfSB9KTtcbnZhciB0ZWFtU2VydmVyTWV0YWRhdGFTY2hlbWEgPSBqc29uU2NoZW1hLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IF9zZXJ2ZXJNZXRhRGF0YURlc2NyaXB0aW9uKFwidGVhbVwiKSwgZXhhbXBsZVZhbHVlOiB7IGtleTogXCJ2YWx1ZVwiIH0gfSB9KTtcbnZhciB0ZWFtQ3JlYXRlZEF0TWlsbGlzU2NoZW1hID0geXVwTnVtYmVyKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogX2NyZWF0ZWRBdE1pbGxpc0Rlc2NyaXB0aW9uKFwidGVhbVwiKSwgZXhhbXBsZVZhbHVlOiAxNjNlMTAgfSB9KTtcbnZhciB0ZWFtSW52aXRhdGlvbkVtYWlsU2NoZW1hID0gZW1haWxTY2hlbWEubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJUaGUgZW1haWwgb2YgdGhlIHVzZXIgdG8gaW52aXRlLlwiLCBleGFtcGxlVmFsdWU6IFwiam9obmRvZUBleGFtcGxlLmNvbVwiIH0gfSk7XG52YXIgdGVhbUludml0YXRpb25DYWxsYmFja1VybFNjaGVtYSA9IHVybFNjaGVtYS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIlRoZSBiYXNlIGNhbGxiYWNrIFVSTCB0byBjb25zdHJ1Y3QgYW4gaW52aXRlIGxpbmsgd2l0aC4gQSBxdWVyeSBwYXJhbWV0ZXIgYGNvZGVgIHdpdGggdGhlIHZlcmlmaWNhdGlvbiBjb2RlIHdpbGwgYmUgYXBwZW5kZWQgdG8gaXQuIFRoZSBwYWdlIHNob3VsZCB0aGVuIG1ha2UgYSByZXF1ZXN0IHRvIHRoZSBgL3RlYW0taW52aXRhdGlvbnMvYWNjZXB0YCBlbmRwb2ludC5cIiwgZXhhbXBsZVZhbHVlOiBcImh0dHBzOi8vZXhhbXBsZS5jb20vaGFuZGxlci90ZWFtLWludml0YXRpb25cIiB9IH0pO1xudmFyIHRlYW1DcmVhdG9yVXNlcklkU2NoZW1hID0gdXNlcklkT3JNZVNjaGVtYS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiAnVGhlIElEIG9mIHRoZSBjcmVhdG9yIG9mIHRoZSB0ZWFtLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgdXNlciB3aWxsIG5vdCBiZSBhZGRlZCB0byB0aGUgdGVhbS4gQ2FuIGJlIGVpdGhlciBcIm1lXCIgb3IgdGhlIElEIG9mIHRoZSB1c2VyLiBPbmx5IHVzZWQgb24gdGhlIGNsaWVudCBzaWRlLicsIGV4YW1wbGVWYWx1ZTogXCJtZVwiIH0gfSk7XG52YXIgdGVhbU1lbWJlckRpc3BsYXlOYW1lU2NoZW1hID0geXVwU3RyaW5nKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogX2Rpc3BsYXlOYW1lRGVzY3JpcHRpb24oXCJ0ZWFtIG1lbWJlclwiKSArIFwiIE5vdGUgdGhhdCB0aGlzIGlzIHNlcGFyYXRlIGZyb20gdGhlIGRpc3BsYXlfbmFtZSBvZiB0aGUgdXNlci5cIiwgZXhhbXBsZVZhbHVlOiBcIkpvaG4gRG9lXCIgfSB9KTtcbnZhciB0ZWFtTWVtYmVyUHJvZmlsZUltYWdlVXJsU2NoZW1hID0gdXJsU2NoZW1hLm1heCgxZTYpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IF9wcm9maWxlSW1hZ2VVcmxEZXNjcmlwdGlvbihcInRlYW0gbWVtYmVyXCIpLCBleGFtcGxlVmFsdWU6IFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9pbWFnZS5qcGdcIiB9IH0pO1xudmFyIGNvbnRhY3RDaGFubmVsSWRTY2hlbWEgPSB5dXBTdHJpbmcoKS51dWlkKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogX2lkRGVzY3JpcHRpb24oXCJjb250YWN0IGNoYW5uZWxcIiksIGV4YW1wbGVWYWx1ZTogXCJiM2QzOTZiOC1jNTc0LTRjODAtOTdiMy01MDAzMTY3NWNlYjJcIiB9IH0pO1xudmFyIGNvbnRhY3RDaGFubmVsVHlwZVNjaGVtYSA9IHl1cFN0cmluZygpLm9uZU9mKFtcImVtYWlsXCJdKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBgVGhlIHR5cGUgb2YgdGhlIGNvbnRhY3QgY2hhbm5lbC4gQ3VycmVudGx5IG9ubHkgXCJlbWFpbFwiIGlzIHN1cHBvcnRlZC5gLCBleGFtcGxlVmFsdWU6IFwiZW1haWxcIiB9IH0pO1xudmFyIGNvbnRhY3RDaGFubmVsVmFsdWVTY2hlbWEgPSB5dXBTdHJpbmcoKS53aGVuKFwidHlwZVwiLCB7XG4gIGlzOiBcImVtYWlsXCIsXG4gIHRoZW46IChzY2hlbWEpID0+IHNjaGVtYS5lbWFpbCgpXG59KS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIlRoZSB2YWx1ZSBvZiB0aGUgY29udGFjdCBjaGFubmVsLiBGb3IgZW1haWwsIHRoaXMgc2hvdWxkIGJlIGEgdmFsaWQgZW1haWwgYWRkcmVzcy5cIiwgZXhhbXBsZVZhbHVlOiBcImpvaG5kb2VAZXhhbXBsZS5jb21cIiB9IH0pO1xudmFyIGNvbnRhY3RDaGFubmVsVXNlZEZvckF1dGhTY2hlbWEgPSB5dXBCb29sZWFuKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJXaGV0aGVyIHRoZSBjb250YWN0IGNoYW5uZWwgaXMgdXNlZCBmb3IgYXV0aGVudGljYXRpb24uIElmIHRoaXMgaXMgc2V0IHRvIGB0cnVlYCwgdGhlIHVzZXIgd2lsbCBiZSBhYmxlIHRvIHNpZ24gaW4gd2l0aCB0aGUgY29udGFjdCBjaGFubmVsIHdpdGggcGFzc3dvcmQgb3IgT1RQLlwiLCBleGFtcGxlVmFsdWU6IHRydWUgfSB9KTtcbnZhciBjb250YWN0Q2hhbm5lbElzVmVyaWZpZWRTY2hlbWEgPSB5dXBCb29sZWFuKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJXaGV0aGVyIHRoZSBjb250YWN0IGNoYW5uZWwgaGFzIGJlZW4gdmVyaWZpZWQuIElmIHRoaXMgaXMgc2V0IHRvIGB0cnVlYCwgdGhlIGNvbnRhY3QgY2hhbm5lbCBoYXMgYmVlbiB2ZXJpZmllZCB0byBiZWxvbmcgdG8gdGhlIHVzZXIuXCIsIGV4YW1wbGVWYWx1ZTogdHJ1ZSB9IH0pO1xudmFyIGNvbnRhY3RDaGFubmVsSXNQcmltYXJ5U2NoZW1hID0geXVwQm9vbGVhbigpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiV2hldGhlciB0aGUgY29udGFjdCBjaGFubmVsIGlzIHRoZSBwcmltYXJ5IGNvbnRhY3QgY2hhbm5lbC4gSWYgdGhpcyBpcyBzZXQgdG8gYHRydWVgLCBpdCB3aWxsIGJlIHVzZWQgZm9yIGF1dGhlbnRpY2F0aW9uIGFuZCBub3RpZmljYXRpb25zIGJ5IGRlZmF1bHQuXCIsIGV4YW1wbGVWYWx1ZTogdHJ1ZSB9IH0pO1xudmFyIG9hdXRoUHJvdmlkZXJJZFNjaGVtYSA9IHl1cFN0cmluZygpLnV1aWQoKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBfaWREZXNjcmlwdGlvbihcIk9BdXRoIHByb3ZpZGVyXCIpLCBleGFtcGxlVmFsdWU6IFwiYjNkMzk2YjgtYzU3NC00YzgwLTk3YjMtNTAwMzE2NzVjZWIyXCIgfSB9KTtcbnZhciBvYXV0aFByb3ZpZGVyRW1haWxTY2hlbWEgPSBlbWFpbFNjaGVtYS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIkVtYWlsIG9mIHRoZSBPQXV0aCBwcm92aWRlci4gVGhpcyBpcyB1c2VkIHRvIGRpc3BsYXkgYW5kIGlkZW50aWZ5IHRoZSBPQXV0aCBwcm92aWRlciBpbiB0aGUgVUkuXCIsIGV4YW1wbGVWYWx1ZTogXCJ0ZXN0QGdtYWlsLmNvbVwiIH0gfSk7XG52YXIgb2F1dGhQcm92aWRlclR5cGVTY2hlbWEgPSB5dXBTdHJpbmcoKS5vbmVPZihhbGxQcm92aWRlcnMpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IGBPQXV0aCBwcm92aWRlciB0eXBlLCBvbmUgb2YgJHthbGxQcm92aWRlcnMubWFwKCh4KSA9PiBgXFxgJHt4fVxcYGApLmpvaW4oXCIsIFwiKX1gLCBleGFtcGxlVmFsdWU6IFwiZ29vZ2xlXCIgfSB9KTtcbnZhciBvYXV0aFByb3ZpZGVyQWxsb3dTaWduSW5TY2hlbWEgPSB5dXBCb29sZWFuKCkubWV0YSh7IG9wZW5hcGlGaWVsZDogeyBkZXNjcmlwdGlvbjogXCJXaGV0aGVyIHRoZSB1c2VyIGNhbiB1c2UgdGhpcyBPQXV0aCBwcm92aWRlciB0byBzaWduIGluLiBPbmx5IG9uZSBPQXV0aCBwcm92aWRlciBwZXIgdHlwZSBjYW4gaGF2ZSB0aGlzIHNldCB0byBgdHJ1ZWAuXCIsIGV4YW1wbGVWYWx1ZTogdHJ1ZSB9IH0pO1xudmFyIG9hdXRoUHJvdmlkZXJBbGxvd0Nvbm5lY3RlZEFjY291bnRzU2NoZW1hID0geXVwQm9vbGVhbigpLm1ldGEoeyBvcGVuYXBpRmllbGQ6IHsgZGVzY3JpcHRpb246IFwiV2hldGhlciB0aGUgdXNlciBjYW4gdXNlIHRoaXMgT0F1dGggcHJvdmlkZXIgYXMgY29ubmVjdGVkIGFjY291bnQuIE11bHRpcGxlIE9BdXRoIHByb3ZpZGVycyBwZXIgdHlwZSBjYW4gaGF2ZSB0aGlzIHNldCB0byBgdHJ1ZWAuXCIsIGV4YW1wbGVWYWx1ZTogdHJ1ZSB9IH0pO1xudmFyIG9hdXRoUHJvdmlkZXJBY2NvdW50SWRTY2hlbWEgPSB5dXBTdHJpbmcoKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIkFjY291bnQgSUQgb2YgdGhlIE9BdXRoIHByb3ZpZGVyLiBUaGlzIHVuaXF1ZWx5IGlkZW50aWZpZXMgdGhlIGFjY291bnQgb24gdGhlIHByb3ZpZGVyIHNpZGUuXCIsIGV4YW1wbGVWYWx1ZTogXCJnb29nbGUtYWNjb3VudC1pZC0xMjM0NVwiIH0gfSk7XG52YXIgb2F1dGhQcm92aWRlclByb3ZpZGVyQ29uZmlnSWRTY2hlbWEgPSB5dXBTdHJpbmcoKS5tZXRhKHsgb3BlbmFwaUZpZWxkOiB7IGRlc2NyaXB0aW9uOiBcIlByb3ZpZGVyIGNvbmZpZyBJRCBvZiB0aGUgT0F1dGggcHJvdmlkZXIuIFRoaXMgdW5pcXVlbHkgaWRlbnRpZmllcyB0aGUgcHJvdmlkZXIgY29uZmlnIG9uIGNvbmZpZy5qc29uIGZpbGVcIiwgZXhhbXBsZVZhbHVlOiBcImdvb2dsZVwiIH0gfSk7XG52YXIgYmFzaWNBdXRob3JpemF0aW9uSGVhZGVyU2NoZW1hID0geXVwU3RyaW5nKCkudGVzdChcImlzLWJhc2ljLWF1dGhvcml6YXRpb24taGVhZGVyXCIsICdBdXRob3JpemF0aW9uIGhlYWRlciBtdXN0IGJlIGluIHRoZSBmb3JtYXQgXCJCYXNpYyA8YmFzZTY0PlwiJywgKHZhbHVlKSA9PiB7XG4gIGlmICghdmFsdWUpIHJldHVybiB0cnVlO1xuICByZXR1cm4gZGVjb2RlQmFzaWNBdXRob3JpemF0aW9uSGVhZGVyKHZhbHVlKSAhPT0gbnVsbDtcbn0pO1xudmFyIG5lb25BdXRob3JpemF0aW9uSGVhZGVyU2NoZW1hID0gYmFzaWNBdXRob3JpemF0aW9uSGVhZGVyU2NoZW1hLnRlc3QoXCJpcy1hdXRob3JpemF0aW9uLWhlYWRlclwiLCBcIkludmFsaWQgY2xpZW50X2lkOmNsaWVudF9zZWNyZXQgdmFsdWVzOyBkaWQgeW91IHVzZSB0aGUgY29ycmVjdCB2YWx1ZXMgZm9yIHRoZSBpbnRlZ3JhdGlvbj9cIiwgKHZhbHVlKSA9PiB7XG4gIGlmICghdmFsdWUpIHJldHVybiB0cnVlO1xuICBjb25zdCBbY2xpZW50SWQsIGNsaWVudFNlY3JldF0gPSBkZWNvZGVCYXNpY0F1dGhvcml6YXRpb25IZWFkZXIodmFsdWUpID8/IHRocm93RXJyKGBBdXRoeiBoZWFkZXIgaW52YWxpZD8gVGhpcyBzaG91bGQndmUgYmVlbiB2YWxpZGF0ZWQgYnkgYmFzaWNBdXRob3JpemF0aW9uSGVhZGVyU2NoZW1hOiAke3ZhbHVlfWApO1xuICBmb3IgKGNvbnN0IG5lb25DbGllbnRDb25maWcgb2YgSlNPTi5wYXJzZShwcm9jZXNzLmVudi5TVEFDS19JTlRFR1JBVElPTl9DTElFTlRTX0NPTkZJRyB8fCBcIltdXCIpKSB7XG4gICAgaWYgKGNsaWVudElkID09PSBuZW9uQ2xpZW50Q29uZmlnLmNsaWVudF9pZCAmJiBjbGllbnRTZWNyZXQgPT09IG5lb25DbGllbnRDb25maWcuY2xpZW50X3NlY3JldCkgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufSk7XG5mdW5jdGlvbiB5dXBEZWZpbmVkV2hlbihzY2hlbWEsIHRyaWdnZXJzKSB7XG4gIGNvbnN0IGVudHJpZXMgPSBPYmplY3QuZW50cmllcyh0cmlnZ2Vycyk7XG4gIHJldHVybiBzY2hlbWEud2hlbihlbnRyaWVzLm1hcCgoW2tleV0pID0+IGtleSksIHtcbiAgICBpczogKC4uLnZhbHVlcykgPT4gZW50cmllcy5ldmVyeSgoW2tleSwgdmFsdWVdLCBpbmRleCkgPT4gdmFsdWUgPT09IHZhbHVlc1tpbmRleF0pLFxuICAgIHRoZW46IChzY2hlbWEyKSA9PiBzY2hlbWEyLmRlZmluZWQoKSxcbiAgICBvdGhlcndpc2U6IChzY2hlbWEyKSA9PiBzY2hlbWEyLm9wdGlvbmFsKClcbiAgfSk7XG59XG5mdW5jdGlvbiB5dXBEZWZpbmVkQW5kTm9uRW1wdHlXaGVuKHNjaGVtYSwgdHJpZ2dlcnMpIHtcbiAgY29uc3QgZW50cmllcyA9IE9iamVjdC5lbnRyaWVzKHRyaWdnZXJzKTtcbiAgcmV0dXJuIHNjaGVtYS53aGVuKGVudHJpZXMubWFwKChba2V5XSkgPT4ga2V5KSwge1xuICAgIGlzOiAoLi4udmFsdWVzKSA9PiBlbnRyaWVzLmV2ZXJ5KChba2V5LCB2YWx1ZV0sIGluZGV4KSA9PiB2YWx1ZSA9PT0gdmFsdWVzW2luZGV4XSksXG4gICAgdGhlbjogKHNjaGVtYTIpID0+IHNjaGVtYTIuZGVmaW5lZCgpLm5vbkVtcHR5KCksXG4gICAgb3RoZXJ3aXNlOiAoc2NoZW1hMikgPT4gc2NoZW1hMi5vcHRpb25hbCgpXG4gIH0pO1xufVxuZXhwb3J0IHtcbiAgUmVwbGFjZUZpZWxkV2l0aE93blVzZXJJZCxcbiAgYWNjZXNzVG9rZW5QYXlsb2FkU2NoZW1hLFxuICBhY2Nlc3NUb2tlblJlc3BvbnNlU2NoZW1hLFxuICBhZGFwdFNjaGVtYSxcbiAgYWRtaW5BdXRoVHlwZVNjaGVtYSxcbiAgYmFzZTY0U2NoZW1hLFxuICBiYXNpY0F1dGhvcml6YXRpb25IZWFkZXJTY2hlbWEsXG4gIGNsaWVudE9ySGlnaGVyQXV0aFR5cGVTY2hlbWEsXG4gIGNvbnRhY3RDaGFubmVsSWRTY2hlbWEsXG4gIGNvbnRhY3RDaGFubmVsSXNQcmltYXJ5U2NoZW1hLFxuICBjb250YWN0Q2hhbm5lbElzVmVyaWZpZWRTY2hlbWEsXG4gIGNvbnRhY3RDaGFubmVsVHlwZVNjaGVtYSxcbiAgY29udGFjdENoYW5uZWxVc2VkRm9yQXV0aFNjaGVtYSxcbiAgY29udGFjdENoYW5uZWxWYWx1ZVNjaGVtYSxcbiAgY29udGFpbmVkUGVybWlzc2lvbklkc1NjaGVtYSxcbiAgY3VzdG9tUGVybWlzc2lvbkRlZmluaXRpb25JZFNjaGVtYSxcbiAgY3VzdG9tZXJUeXBlU2NoZW1hLFxuICBkYXlJbnRlcnZhbE9yTmV2ZXJTY2hlbWEsXG4gIGRheUludGVydmFsU2NoZW1hLFxuICBlbWFpbEhvc3RTY2hlbWEsXG4gIGVtYWlsT3RwU2lnbkluQ2FsbGJhY2tVcmxTY2hlbWEsXG4gIGVtYWlsUGFzc3dvcmRTY2hlbWEsXG4gIGVtYWlsUG9ydFNjaGVtYSxcbiAgZW1haWxTY2hlbWEsXG4gIGVtYWlsU2VuZGVyRW1haWxTY2hlbWEsXG4gIGVtYWlsU2VuZGVyTmFtZVNjaGVtYSxcbiAgZW1haWxUZW1wbGF0ZUxpc3RTY2hlbWEsXG4gIGVtYWlsVGhlbWVMaXN0U2NoZW1hLFxuICBlbWFpbFRoZW1lU2NoZW1hLFxuICBlbWFpbFR5cGVTY2hlbWEsXG4gIGVtYWlsVXNlcm5hbWVTY2hlbWEsXG4gIGVtYWlsVmVyaWZpY2F0aW9uQ2FsbGJhY2tVcmxTY2hlbWEsXG4gIGVuc3VyZU9iamVjdFNjaGVtYSxcbiAgaGFuZGxlclBhdGhTY2hlbWEsXG4gIGlubGluZU9mZmVyU2NoZW1hLFxuICBpbnRlcnZhbE9yTmV2ZXJTY2hlbWEsXG4gIGludGVydmFsU2NoZW1hLFxuICBqc29uU2NoZW1hLFxuICBqc29uU3RyaW5nT3JFbXB0eVNjaGVtYSxcbiAganNvblN0cmluZ1NjaGVtYSxcbiAgbW9uZXlBbW91bnRTY2hlbWEsXG4gIG5lb25BdXRob3JpemF0aW9uSGVhZGVyU2NoZW1hLFxuICBvYXV0aEFjY291bnRNZXJnZVN0cmF0ZWd5U2NoZW1hLFxuICBvYXV0aENsaWVudElkU2NoZW1hLFxuICBvYXV0aENsaWVudFNlY3JldFNjaGVtYSxcbiAgb2F1dGhFbmFibGVkU2NoZW1hLFxuICBvYXV0aEZhY2Vib29rQ29uZmlnSWRTY2hlbWEsXG4gIG9hdXRoSWRTY2hlbWEsXG4gIG9hdXRoTWljcm9zb2Z0VGVuYW50SWRTY2hlbWEsXG4gIG9hdXRoUHJvdmlkZXJBY2NvdW50SWRTY2hlbWEsXG4gIG9hdXRoUHJvdmlkZXJBbGxvd0Nvbm5lY3RlZEFjY291bnRzU2NoZW1hLFxuICBvYXV0aFByb3ZpZGVyQWxsb3dTaWduSW5TY2hlbWEsXG4gIG9hdXRoUHJvdmlkZXJFbWFpbFNjaGVtYSxcbiAgb2F1dGhQcm92aWRlcklkU2NoZW1hLFxuICBvYXV0aFByb3ZpZGVyUHJvdmlkZXJDb25maWdJZFNjaGVtYSxcbiAgb2F1dGhQcm92aWRlclR5cGVTY2hlbWEsXG4gIG9hdXRoVHlwZVNjaGVtYSxcbiAgb2ZmZXJQcmljZVNjaGVtYSxcbiAgb2ZmZXJTY2hlbWEsXG4gIHBhc3N3b3JkU2NoZW1hLFxuICBwZXJtaXNzaW9uRGVmaW5pdGlvbklkU2NoZW1hLFxuICBwcmljZU9ySW5jbHVkZUJ5RGVmYXVsdFNjaGVtYSxcbiAgcHJpbWFyeUVtYWlsQXV0aEVuYWJsZWRTY2hlbWEsXG4gIHByaW1hcnlFbWFpbFNjaGVtYSxcbiAgcHJpbWFyeUVtYWlsVmVyaWZpZWRTY2hlbWEsXG4gIHByb2ZpbGVJbWFnZVVybFNjaGVtYSxcbiAgcHJvamVjdEFsbG93TG9jYWxob3N0U2NoZW1hLFxuICBwcm9qZWN0QnJhbmNoSWRTY2hlbWEsXG4gIHByb2plY3RDbGllbnRUZWFtQ3JlYXRpb25FbmFibGVkU2NoZW1hLFxuICBwcm9qZWN0Q2xpZW50VXNlckRlbGV0aW9uRW5hYmxlZFNjaGVtYSxcbiAgcHJvamVjdENvbmZpZ0lkU2NoZW1hLFxuICBwcm9qZWN0Q3JlYXRlVGVhbU9uU2lnblVwU2NoZW1hLFxuICBwcm9qZWN0Q3JlYXRlZEF0TWlsbGlzU2NoZW1hLFxuICBwcm9qZWN0Q3JlZGVudGlhbEVuYWJsZWRTY2hlbWEsXG4gIHByb2plY3REZXNjcmlwdGlvblNjaGVtYSxcbiAgcHJvamVjdERpc3BsYXlOYW1lU2NoZW1hLFxuICBwcm9qZWN0RnVsbExvZ29VcmxTY2hlbWEsXG4gIHByb2plY3RJZFNjaGVtYSxcbiAgcHJvamVjdElzUHJvZHVjdGlvbk1vZGVTY2hlbWEsXG4gIHByb2plY3RMb2dvVXJsU2NoZW1hLFxuICBwcm9qZWN0TWFnaWNMaW5rRW5hYmxlZFNjaGVtYSxcbiAgcHJvamVjdFBhc3NrZXlFbmFibGVkU2NoZW1hLFxuICBwcm9qZWN0U2lnblVwRW5hYmxlZFNjaGVtYSxcbiAgcmVmcmVzaFRva2VuUmVzcG9uc2VTY2hlbWEsXG4gIHNlbGVjdGVkVGVhbUlkU2NoZW1hLFxuICBzZXJ2ZXJPckhpZ2hlckF1dGhUeXBlU2NoZW1hLFxuICBzaWduSW5FbWFpbFNjaGVtYSxcbiAgc2lnbkluUmVzcG9uc2VTY2hlbWEsXG4gIHNpZ25lZFVwQXRNaWxsaXNTY2hlbWEsXG4gIHN0cmljdEVtYWlsU2NoZW1hLFxuICB0ZWFtQ2xpZW50TWV0YWRhdGFTY2hlbWEsXG4gIHRlYW1DbGllbnRSZWFkT25seU1ldGFkYXRhU2NoZW1hLFxuICB0ZWFtQ3JlYXRlZEF0TWlsbGlzU2NoZW1hLFxuICB0ZWFtQ3JlYXRvclVzZXJJZFNjaGVtYSxcbiAgdGVhbURpc3BsYXlOYW1lU2NoZW1hLFxuICB0ZWFtSWRTY2hlbWEsXG4gIHRlYW1JbnZpdGF0aW9uQ2FsbGJhY2tVcmxTY2hlbWEsXG4gIHRlYW1JbnZpdGF0aW9uRW1haWxTY2hlbWEsXG4gIHRlYW1NZW1iZXJEaXNwbGF5TmFtZVNjaGVtYSxcbiAgdGVhbU1lbWJlclByb2ZpbGVJbWFnZVVybFNjaGVtYSxcbiAgdGVhbVBlcm1pc3Npb25EZXNjcmlwdGlvblNjaGVtYSxcbiAgdGVhbVByb2ZpbGVJbWFnZVVybFNjaGVtYSxcbiAgdGVhbVNlcnZlck1ldGFkYXRhU2NoZW1hLFxuICB0ZWFtU3lzdGVtUGVybWlzc2lvbnMsXG4gIHRlbXBsYXRlVGhlbWVJZFNjaGVtYSxcbiAgdXJsU2NoZW1hLFxuICB1c2VyQ2xpZW50TWV0YWRhdGFTY2hlbWEsXG4gIHVzZXJDbGllbnRSZWFkT25seU1ldGFkYXRhU2NoZW1hLFxuICB1c2VyRGlzcGxheU5hbWVTY2hlbWEsXG4gIHVzZXJIYXNQYXNzd29yZFNjaGVtYSxcbiAgdXNlcklkT3JNZVNjaGVtYSxcbiAgdXNlcklkU2NoZW1hLFxuICB1c2VyTGFzdEFjdGl2ZUF0TWlsbGlzU2NoZW1hLFxuICB1c2VyT0F1dGhQcm92aWRlclNjaGVtYSxcbiAgdXNlck90cEF1dGhFbmFibGVkTXV0YXRpb25TY2hlbWEsXG4gIHVzZXJPdHBBdXRoRW5hYmxlZFNjaGVtYSxcbiAgdXNlclBhc3NrZXlBdXRoRW5hYmxlZFNjaGVtYSxcbiAgdXNlclBhc3N3b3JkSGFzaE11dGF0aW9uU2NoZW1hLFxuICB1c2VyUGFzc3dvcmRNdXRhdGlvblNjaGVtYSxcbiAgdXNlclNlcnZlck1ldGFkYXRhU2NoZW1hLFxuICB1c2VyU3BlY2lmaWVkSWRTY2hlbWEsXG4gIHVzZXJUb3RwU2VjcmV0TXV0YXRpb25TY2hlbWEsXG4gIHdpbGRjYXJkVXJsU2NoZW1hLFxuICB5dXBBcnJheSxcbiAgeXVwQm9vbGVhbixcbiAgeXVwRGF0ZSxcbiAgeXVwRGVmaW5lZEFuZE5vbkVtcHR5V2hlbixcbiAgeXVwRGVmaW5lZFdoZW4sXG4gIHl1cE1peGVkLFxuICB5dXBOZXZlcixcbiAgeXVwTnVtYmVyLFxuICB5dXBPYmplY3QsXG4gIHl1cE9iamVjdFdpdGhBdXRvRGVmYXVsdCxcbiAgeXVwUmVjb3JkLFxuICB5dXBTdHJpbmcsXG4gIHl1cFR1cGxlLFxuICB5dXBVbmlvbixcbiAgeXVwVmFsaWRhdGVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zY2hlbWEtZmllbGRzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/schema-fields.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/sessions.js":
/*!****************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/sessions.js ***!
  \****************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AccessToken: () => (/* binding */ AccessToken),\n/* harmony export */   InternalSession: () => (/* binding */ InternalSession),\n/* harmony export */   RefreshToken: () => (/* binding */ RefreshToken)\n/* harmony export */ });\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jose */ \"(ssr)/./node_modules/.pnpm/jose@5.10.0/node_modules/jose/dist/node/esm/util/decode_jwt.js\");\n/* harmony import */ var _schema_fields_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./schema-fields.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/schema-fields.js\");\n/* harmony import */ var _utils_errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/errors.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n/* harmony import */ var _utils_stores_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/stores.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/stores.js\");\n// src/sessions.ts\n\n\n\n\nfunction decodeAccessTokenIfValid(token) {\n  try {\n    const payload = jose__WEBPACK_IMPORTED_MODULE_3__.decodeJwt(token);\n    return _schema_fields_js__WEBPACK_IMPORTED_MODULE_0__.accessTokenPayloadSchema.validateSync(payload);\n  } catch (e) {\n    return null;\n  }\n}\nvar AccessToken = class _AccessToken {\n  constructor(token) {\n    this.token = token;\n    if (token === \"undefined\") {\n      throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Access token is the string 'undefined'; it's unlikely this is the correct value. They're supposed to be unguessable!\");\n    }\n  }\n  static createIfValid(token) {\n    const payload = decodeAccessTokenIfValid(token);\n    if (!payload) return null;\n    return new _AccessToken(token);\n  }\n  get payload() {\n    return decodeAccessTokenIfValid(this.token) ?? (0,_utils_errors_js__WEBPACK_IMPORTED_MODULE_1__.throwErr)(\"Invalid access token in payload (should've been validated in createIfValid)\", { token: this.token });\n  }\n  get expiresAt() {\n    const { exp } = this.payload;\n    if (exp === void 0) return /* @__PURE__ */ new Date(864e13);\n    return new Date(exp * 1e3);\n  }\n  /**\n   * @returns The number of milliseconds until the access token expires, or 0 if it has already expired.\n   */\n  get expiresInMillis() {\n    return Math.max(0, this.expiresAt.getTime() - Date.now());\n  }\n  isExpired() {\n    return this.expiresInMillis <= 0;\n  }\n};\nvar RefreshToken = class {\n  constructor(token) {\n    this.token = token;\n    if (token === \"undefined\") {\n      throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Refresh token is the string 'undefined'; it's unlikely this is the correct value. They're supposed to be unguessable!\");\n    }\n  }\n};\nvar InternalSession = class _InternalSession {\n  constructor(_options) {\n    this._options = _options;\n    /**\n     * Whether the session as a whole is known to be invalid (ie. both access and refresh tokens are invalid). Used as a cache to avoid making multiple requests to the server (sessions never go back to being valid after being invalidated).\n     *\n     * It is possible for the access token to be invalid but the refresh token to be valid, in which case the session is\n     * still valid (just needs a refresh). It is also possible for the access token to be valid but the refresh token to\n     * be invalid, in which case the session is also valid (eg. if the refresh token is null because the user only passed\n     * in an access token, eg. in a server-side request handler).\n     */\n    this._knownToBeInvalid = new _utils_stores_js__WEBPACK_IMPORTED_MODULE_2__.Store(false);\n    this._refreshPromise = null;\n    this._accessToken = new _utils_stores_js__WEBPACK_IMPORTED_MODULE_2__.Store(_options.accessToken ? AccessToken.createIfValid(_options.accessToken) : null);\n    this._refreshToken = _options.refreshToken ? new RefreshToken(_options.refreshToken) : null;\n    if (_options.accessToken === null && _options.refreshToken === null) {\n      this._knownToBeInvalid.set(true);\n    }\n    this.sessionKey = _InternalSession.calculateSessionKey({ accessToken: _options.accessToken ?? null, refreshToken: _options.refreshToken });\n  }\n  static calculateSessionKey(ofTokens) {\n    if (ofTokens.refreshToken) {\n      return `refresh-${ofTokens.refreshToken}`;\n    } else if (ofTokens.accessToken) {\n      return `access-${ofTokens.accessToken}`;\n    } else {\n      return \"not-logged-in\";\n    }\n  }\n  isKnownToBeInvalid() {\n    return this._knownToBeInvalid.get();\n  }\n  /**\n   * Marks the session object as invalid, meaning that the refresh and access tokens can no longer be used.\n   */\n  markInvalid() {\n    this._accessToken.set(null);\n    this._knownToBeInvalid.set(true);\n  }\n  onInvalidate(callback) {\n    return this._knownToBeInvalid.onChange(() => callback());\n  }\n  /**\n   * Returns the access token if it is found in the cache and not expired yet, or null otherwise. Never fetches new tokens.\n   */\n  getAccessTokenIfNotExpiredYet(minMillisUntilExpiration) {\n    if (minMillisUntilExpiration > 6e4) {\n      throw new Error(`Required access token expiry ${minMillisUntilExpiration}ms is too long; access tokens are too short to be used for more than 60s`);\n    }\n    const accessToken = this._getPotentiallyInvalidAccessTokenIfAvailable();\n    if (!accessToken || accessToken.expiresInMillis < minMillisUntilExpiration) return null;\n    return accessToken;\n  }\n  /**\n   * Returns the access token if it is found in the cache, fetching it otherwise.\n   *\n   * This is usually the function you want to call to get an access token. Either set `minMillisUntilExpiration` to a reasonable value, or catch errors that occur if it expires, and call `markAccessTokenExpired` to mark the token as expired if so (after which a call to this function will always refetch the token).\n   *\n   * @returns null if the session is known to be invalid, cached tokens if they exist in the cache and the access token hasn't expired yet (the refresh token might still be invalid), or new tokens otherwise.\n   */\n  async getOrFetchLikelyValidTokens(minMillisUntilExpiration) {\n    const accessToken = this.getAccessTokenIfNotExpiredYet(minMillisUntilExpiration);\n    if (!accessToken) {\n      const newTokens = await this.fetchNewTokens();\n      const expiresInMillis = newTokens?.accessToken.expiresInMillis;\n      if (expiresInMillis && expiresInMillis < minMillisUntilExpiration) {\n        throw new _utils_errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(`Required access token expiry ${minMillisUntilExpiration}ms is too long; access tokens are too short when they're generated (${expiresInMillis}ms)`);\n      }\n      return newTokens;\n    }\n    return { accessToken, refreshToken: this._refreshToken };\n  }\n  /**\n   * Fetches new tokens that are, at the time of fetching, guaranteed to be valid.\n   *\n   * The newly generated tokens are short-lived, so it's good practice not to rely on their validity (if possible). However, this function is useful in some cases where you only want to pass access tokens to a service, and you want to make sure said access token has the longest possible lifetime.\n   *\n   * In most cases, you should prefer `getOrFetchLikelyValidTokens`.\n   *\n   * @returns null if the session is known to be invalid, or new tokens otherwise (which, at the time of fetching, are guaranteed to be valid).\n   */\n  async fetchNewTokens() {\n    const accessToken = await this._getNewlyFetchedAccessToken();\n    return accessToken ? { accessToken, refreshToken: this._refreshToken } : null;\n  }\n  markAccessTokenExpired(accessToken) {\n    if (this._accessToken.get() === accessToken) {\n      this._accessToken.set(null);\n    }\n  }\n  /**\n   * Note that a callback invocation with `null` does not mean the session has been invalidated; the access token may just have expired. Use `onInvalidate` to detect invalidation.\n   */\n  onAccessTokenChange(callback) {\n    return this._accessToken.onChange(callback);\n  }\n  /**\n   * @returns An access token, which may be expired or expire soon, or null if it is known to be invalid.\n   */\n  _getPotentiallyInvalidAccessTokenIfAvailable() {\n    if (!this._refreshToken) return null;\n    if (this.isKnownToBeInvalid()) return null;\n    const accessToken = this._accessToken.get();\n    if (accessToken && !accessToken.isExpired()) return accessToken;\n    return null;\n  }\n  /**\n   * You should prefer `_getOrFetchPotentiallyInvalidAccessToken` in almost all cases.\n   *\n   * @returns A newly fetched access token (never read from cache), or null if the session either does not represent a user or the session is invalid.\n   */\n  async _getNewlyFetchedAccessToken() {\n    if (!this._refreshToken) return null;\n    if (this._knownToBeInvalid.get()) return null;\n    if (!this._refreshPromise) {\n      this._refreshAndSetRefreshPromise(this._refreshToken);\n    }\n    return await this._refreshPromise;\n  }\n  _refreshAndSetRefreshPromise(refreshToken) {\n    let refreshPromise = this._options.refreshAccessTokenCallback(refreshToken).then((accessToken) => {\n      if (refreshPromise === this._refreshPromise) {\n        this._refreshPromise = null;\n        this._accessToken.set(accessToken);\n        if (!accessToken) {\n          this.markInvalid();\n        }\n      }\n      return accessToken;\n    });\n    this._refreshPromise = refreshPromise;\n  }\n};\n\n//# sourceMappingURL=sessions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vc2Vzc2lvbnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQzZCO0FBQ2lDO0FBQ0k7QUFDeEI7QUFDMUM7QUFDQTtBQUNBLG9CQUFvQiwyQ0FBYztBQUNsQyxXQUFXLHVFQUF3QjtBQUNuQyxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsaUVBQW1CLDBDQUEwQztBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELDBEQUFRLGtGQUFrRixtQkFBbUI7QUFDaEs7QUFDQTtBQUNBLFlBQVksTUFBTTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGlFQUFtQiwyQ0FBMkM7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxtREFBSztBQUN0QztBQUNBLDRCQUE0QixtREFBSztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxnRkFBZ0Y7QUFDN0k7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHNCQUFzQjtBQUM5QyxNQUFNO0FBQ04sdUJBQXVCLHFCQUFxQjtBQUM1QyxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELHlCQUF5QixnQkFBZ0I7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGlFQUFtQixpQ0FBaUMseUJBQXlCLGdCQUFnQixzREFBc0QsZ0JBQWdCO0FBQ3JMO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsZ0RBQWdEO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUdBQWlHO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUtFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZngyZWRlbm9hc2lzL0Rvd25sb2Fkcy9EZXZlbG9wbWVudC9Fc3BhZGEvbm9kZV9tb2R1bGVzLy5wbnBtL0BzdGFja2ZyYW1lK3N0YWNrLXNoYXJlZEAyLjguNDFfQGF3cy1zZGsrY3JlZGVudGlhbC1wcm92aWRlci13ZWItaWRlbnRpdHlAMy45MDEuMF9AdHlwZV83NGRiYTAxZjZkODllNzIwODk2YjRkZjM0NTgzMzk5MC9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvZXNtL3Nlc3Npb25zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9zZXNzaW9ucy50c1xuaW1wb3J0ICogYXMgam9zZSBmcm9tIFwiam9zZVwiO1xuaW1wb3J0IHsgYWNjZXNzVG9rZW5QYXlsb2FkU2NoZW1hIH0gZnJvbSBcIi4vc2NoZW1hLWZpZWxkcy5qc1wiO1xuaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciwgdGhyb3dFcnIgfSBmcm9tIFwiLi91dGlscy9lcnJvcnMuanNcIjtcbmltcG9ydCB7IFN0b3JlIH0gZnJvbSBcIi4vdXRpbHMvc3RvcmVzLmpzXCI7XG5mdW5jdGlvbiBkZWNvZGVBY2Nlc3NUb2tlbklmVmFsaWQodG9rZW4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwYXlsb2FkID0gam9zZS5kZWNvZGVKd3QodG9rZW4pO1xuICAgIHJldHVybiBhY2Nlc3NUb2tlblBheWxvYWRTY2hlbWEudmFsaWRhdGVTeW5jKHBheWxvYWQpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbnZhciBBY2Nlc3NUb2tlbiA9IGNsYXNzIF9BY2Nlc3NUb2tlbiB7XG4gIGNvbnN0cnVjdG9yKHRva2VuKSB7XG4gICAgdGhpcy50b2tlbiA9IHRva2VuO1xuICAgIGlmICh0b2tlbiA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJBY2Nlc3MgdG9rZW4gaXMgdGhlIHN0cmluZyAndW5kZWZpbmVkJzsgaXQncyB1bmxpa2VseSB0aGlzIGlzIHRoZSBjb3JyZWN0IHZhbHVlLiBUaGV5J3JlIHN1cHBvc2VkIHRvIGJlIHVuZ3Vlc3NhYmxlIVwiKTtcbiAgICB9XG4gIH1cbiAgc3RhdGljIGNyZWF0ZUlmVmFsaWQodG9rZW4pIHtcbiAgICBjb25zdCBwYXlsb2FkID0gZGVjb2RlQWNjZXNzVG9rZW5JZlZhbGlkKHRva2VuKTtcbiAgICBpZiAoIXBheWxvYWQpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBuZXcgX0FjY2Vzc1Rva2VuKHRva2VuKTtcbiAgfVxuICBnZXQgcGF5bG9hZCgpIHtcbiAgICByZXR1cm4gZGVjb2RlQWNjZXNzVG9rZW5JZlZhbGlkKHRoaXMudG9rZW4pID8/IHRocm93RXJyKFwiSW52YWxpZCBhY2Nlc3MgdG9rZW4gaW4gcGF5bG9hZCAoc2hvdWxkJ3ZlIGJlZW4gdmFsaWRhdGVkIGluIGNyZWF0ZUlmVmFsaWQpXCIsIHsgdG9rZW46IHRoaXMudG9rZW4gfSk7XG4gIH1cbiAgZ2V0IGV4cGlyZXNBdCgpIHtcbiAgICBjb25zdCB7IGV4cCB9ID0gdGhpcy5wYXlsb2FkO1xuICAgIGlmIChleHAgPT09IHZvaWQgMCkgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSg4NjRlMTMpO1xuICAgIHJldHVybiBuZXcgRGF0ZShleHAgKiAxZTMpO1xuICB9XG4gIC8qKlxuICAgKiBAcmV0dXJucyBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB1bnRpbCB0aGUgYWNjZXNzIHRva2VuIGV4cGlyZXMsIG9yIDAgaWYgaXQgaGFzIGFscmVhZHkgZXhwaXJlZC5cbiAgICovXG4gIGdldCBleHBpcmVzSW5NaWxsaXMoKSB7XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIHRoaXMuZXhwaXJlc0F0LmdldFRpbWUoKSAtIERhdGUubm93KCkpO1xuICB9XG4gIGlzRXhwaXJlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5leHBpcmVzSW5NaWxsaXMgPD0gMDtcbiAgfVxufTtcbnZhciBSZWZyZXNoVG9rZW4gPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHRva2VuKSB7XG4gICAgdGhpcy50b2tlbiA9IHRva2VuO1xuICAgIGlmICh0b2tlbiA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJSZWZyZXNoIHRva2VuIGlzIHRoZSBzdHJpbmcgJ3VuZGVmaW5lZCc7IGl0J3MgdW5saWtlbHkgdGhpcyBpcyB0aGUgY29ycmVjdCB2YWx1ZS4gVGhleSdyZSBzdXBwb3NlZCB0byBiZSB1bmd1ZXNzYWJsZSFcIik7XG4gICAgfVxuICB9XG59O1xudmFyIEludGVybmFsU2Vzc2lvbiA9IGNsYXNzIF9JbnRlcm5hbFNlc3Npb24ge1xuICBjb25zdHJ1Y3Rvcihfb3B0aW9ucykge1xuICAgIHRoaXMuX29wdGlvbnMgPSBfb3B0aW9ucztcbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBzZXNzaW9uIGFzIGEgd2hvbGUgaXMga25vd24gdG8gYmUgaW52YWxpZCAoaWUuIGJvdGggYWNjZXNzIGFuZCByZWZyZXNoIHRva2VucyBhcmUgaW52YWxpZCkuIFVzZWQgYXMgYSBjYWNoZSB0byBhdm9pZCBtYWtpbmcgbXVsdGlwbGUgcmVxdWVzdHMgdG8gdGhlIHNlcnZlciAoc2Vzc2lvbnMgbmV2ZXIgZ28gYmFjayB0byBiZWluZyB2YWxpZCBhZnRlciBiZWluZyBpbnZhbGlkYXRlZCkuXG4gICAgICpcbiAgICAgKiBJdCBpcyBwb3NzaWJsZSBmb3IgdGhlIGFjY2VzcyB0b2tlbiB0byBiZSBpbnZhbGlkIGJ1dCB0aGUgcmVmcmVzaCB0b2tlbiB0byBiZSB2YWxpZCwgaW4gd2hpY2ggY2FzZSB0aGUgc2Vzc2lvbiBpc1xuICAgICAqIHN0aWxsIHZhbGlkIChqdXN0IG5lZWRzIGEgcmVmcmVzaCkuIEl0IGlzIGFsc28gcG9zc2libGUgZm9yIHRoZSBhY2Nlc3MgdG9rZW4gdG8gYmUgdmFsaWQgYnV0IHRoZSByZWZyZXNoIHRva2VuIHRvXG4gICAgICogYmUgaW52YWxpZCwgaW4gd2hpY2ggY2FzZSB0aGUgc2Vzc2lvbiBpcyBhbHNvIHZhbGlkIChlZy4gaWYgdGhlIHJlZnJlc2ggdG9rZW4gaXMgbnVsbCBiZWNhdXNlIHRoZSB1c2VyIG9ubHkgcGFzc2VkXG4gICAgICogaW4gYW4gYWNjZXNzIHRva2VuLCBlZy4gaW4gYSBzZXJ2ZXItc2lkZSByZXF1ZXN0IGhhbmRsZXIpLlxuICAgICAqL1xuICAgIHRoaXMuX2tub3duVG9CZUludmFsaWQgPSBuZXcgU3RvcmUoZmFsc2UpO1xuICAgIHRoaXMuX3JlZnJlc2hQcm9taXNlID0gbnVsbDtcbiAgICB0aGlzLl9hY2Nlc3NUb2tlbiA9IG5ldyBTdG9yZShfb3B0aW9ucy5hY2Nlc3NUb2tlbiA/IEFjY2Vzc1Rva2VuLmNyZWF0ZUlmVmFsaWQoX29wdGlvbnMuYWNjZXNzVG9rZW4pIDogbnVsbCk7XG4gICAgdGhpcy5fcmVmcmVzaFRva2VuID0gX29wdGlvbnMucmVmcmVzaFRva2VuID8gbmV3IFJlZnJlc2hUb2tlbihfb3B0aW9ucy5yZWZyZXNoVG9rZW4pIDogbnVsbDtcbiAgICBpZiAoX29wdGlvbnMuYWNjZXNzVG9rZW4gPT09IG51bGwgJiYgX29wdGlvbnMucmVmcmVzaFRva2VuID09PSBudWxsKSB7XG4gICAgICB0aGlzLl9rbm93blRvQmVJbnZhbGlkLnNldCh0cnVlKTtcbiAgICB9XG4gICAgdGhpcy5zZXNzaW9uS2V5ID0gX0ludGVybmFsU2Vzc2lvbi5jYWxjdWxhdGVTZXNzaW9uS2V5KHsgYWNjZXNzVG9rZW46IF9vcHRpb25zLmFjY2Vzc1Rva2VuID8/IG51bGwsIHJlZnJlc2hUb2tlbjogX29wdGlvbnMucmVmcmVzaFRva2VuIH0pO1xuICB9XG4gIHN0YXRpYyBjYWxjdWxhdGVTZXNzaW9uS2V5KG9mVG9rZW5zKSB7XG4gICAgaWYgKG9mVG9rZW5zLnJlZnJlc2hUb2tlbikge1xuICAgICAgcmV0dXJuIGByZWZyZXNoLSR7b2ZUb2tlbnMucmVmcmVzaFRva2VufWA7XG4gICAgfSBlbHNlIGlmIChvZlRva2Vucy5hY2Nlc3NUb2tlbikge1xuICAgICAgcmV0dXJuIGBhY2Nlc3MtJHtvZlRva2Vucy5hY2Nlc3NUb2tlbn1gO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gXCJub3QtbG9nZ2VkLWluXCI7XG4gICAgfVxuICB9XG4gIGlzS25vd25Ub0JlSW52YWxpZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fa25vd25Ub0JlSW52YWxpZC5nZXQoKTtcbiAgfVxuICAvKipcbiAgICogTWFya3MgdGhlIHNlc3Npb24gb2JqZWN0IGFzIGludmFsaWQsIG1lYW5pbmcgdGhhdCB0aGUgcmVmcmVzaCBhbmQgYWNjZXNzIHRva2VucyBjYW4gbm8gbG9uZ2VyIGJlIHVzZWQuXG4gICAqL1xuICBtYXJrSW52YWxpZCgpIHtcbiAgICB0aGlzLl9hY2Nlc3NUb2tlbi5zZXQobnVsbCk7XG4gICAgdGhpcy5fa25vd25Ub0JlSW52YWxpZC5zZXQodHJ1ZSk7XG4gIH1cbiAgb25JbnZhbGlkYXRlKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuX2tub3duVG9CZUludmFsaWQub25DaGFuZ2UoKCkgPT4gY2FsbGJhY2soKSk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGFjY2VzcyB0b2tlbiBpZiBpdCBpcyBmb3VuZCBpbiB0aGUgY2FjaGUgYW5kIG5vdCBleHBpcmVkIHlldCwgb3IgbnVsbCBvdGhlcndpc2UuIE5ldmVyIGZldGNoZXMgbmV3IHRva2Vucy5cbiAgICovXG4gIGdldEFjY2Vzc1Rva2VuSWZOb3RFeHBpcmVkWWV0KG1pbk1pbGxpc1VudGlsRXhwaXJhdGlvbikge1xuICAgIGlmIChtaW5NaWxsaXNVbnRpbEV4cGlyYXRpb24gPiA2ZTQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgUmVxdWlyZWQgYWNjZXNzIHRva2VuIGV4cGlyeSAke21pbk1pbGxpc1VudGlsRXhwaXJhdGlvbn1tcyBpcyB0b28gbG9uZzsgYWNjZXNzIHRva2VucyBhcmUgdG9vIHNob3J0IHRvIGJlIHVzZWQgZm9yIG1vcmUgdGhhbiA2MHNgKTtcbiAgICB9XG4gICAgY29uc3QgYWNjZXNzVG9rZW4gPSB0aGlzLl9nZXRQb3RlbnRpYWxseUludmFsaWRBY2Nlc3NUb2tlbklmQXZhaWxhYmxlKCk7XG4gICAgaWYgKCFhY2Nlc3NUb2tlbiB8fCBhY2Nlc3NUb2tlbi5leHBpcmVzSW5NaWxsaXMgPCBtaW5NaWxsaXNVbnRpbEV4cGlyYXRpb24pIHJldHVybiBudWxsO1xuICAgIHJldHVybiBhY2Nlc3NUb2tlbjtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYWNjZXNzIHRva2VuIGlmIGl0IGlzIGZvdW5kIGluIHRoZSBjYWNoZSwgZmV0Y2hpbmcgaXQgb3RoZXJ3aXNlLlxuICAgKlxuICAgKiBUaGlzIGlzIHVzdWFsbHkgdGhlIGZ1bmN0aW9uIHlvdSB3YW50IHRvIGNhbGwgdG8gZ2V0IGFuIGFjY2VzcyB0b2tlbi4gRWl0aGVyIHNldCBgbWluTWlsbGlzVW50aWxFeHBpcmF0aW9uYCB0byBhIHJlYXNvbmFibGUgdmFsdWUsIG9yIGNhdGNoIGVycm9ycyB0aGF0IG9jY3VyIGlmIGl0IGV4cGlyZXMsIGFuZCBjYWxsIGBtYXJrQWNjZXNzVG9rZW5FeHBpcmVkYCB0byBtYXJrIHRoZSB0b2tlbiBhcyBleHBpcmVkIGlmIHNvIChhZnRlciB3aGljaCBhIGNhbGwgdG8gdGhpcyBmdW5jdGlvbiB3aWxsIGFsd2F5cyByZWZldGNoIHRoZSB0b2tlbikuXG4gICAqXG4gICAqIEByZXR1cm5zIG51bGwgaWYgdGhlIHNlc3Npb24gaXMga25vd24gdG8gYmUgaW52YWxpZCwgY2FjaGVkIHRva2VucyBpZiB0aGV5IGV4aXN0IGluIHRoZSBjYWNoZSBhbmQgdGhlIGFjY2VzcyB0b2tlbiBoYXNuJ3QgZXhwaXJlZCB5ZXQgKHRoZSByZWZyZXNoIHRva2VuIG1pZ2h0IHN0aWxsIGJlIGludmFsaWQpLCBvciBuZXcgdG9rZW5zIG90aGVyd2lzZS5cbiAgICovXG4gIGFzeW5jIGdldE9yRmV0Y2hMaWtlbHlWYWxpZFRva2VucyhtaW5NaWxsaXNVbnRpbEV4cGlyYXRpb24pIHtcbiAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IHRoaXMuZ2V0QWNjZXNzVG9rZW5JZk5vdEV4cGlyZWRZZXQobWluTWlsbGlzVW50aWxFeHBpcmF0aW9uKTtcbiAgICBpZiAoIWFjY2Vzc1Rva2VuKSB7XG4gICAgICBjb25zdCBuZXdUb2tlbnMgPSBhd2FpdCB0aGlzLmZldGNoTmV3VG9rZW5zKCk7XG4gICAgICBjb25zdCBleHBpcmVzSW5NaWxsaXMgPSBuZXdUb2tlbnM/LmFjY2Vzc1Rva2VuLmV4cGlyZXNJbk1pbGxpcztcbiAgICAgIGlmIChleHBpcmVzSW5NaWxsaXMgJiYgZXhwaXJlc0luTWlsbGlzIDwgbWluTWlsbGlzVW50aWxFeHBpcmF0aW9uKSB7XG4gICAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKGBSZXF1aXJlZCBhY2Nlc3MgdG9rZW4gZXhwaXJ5ICR7bWluTWlsbGlzVW50aWxFeHBpcmF0aW9ufW1zIGlzIHRvbyBsb25nOyBhY2Nlc3MgdG9rZW5zIGFyZSB0b28gc2hvcnQgd2hlbiB0aGV5J3JlIGdlbmVyYXRlZCAoJHtleHBpcmVzSW5NaWxsaXN9bXMpYCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3VG9rZW5zO1xuICAgIH1cbiAgICByZXR1cm4geyBhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuOiB0aGlzLl9yZWZyZXNoVG9rZW4gfTtcbiAgfVxuICAvKipcbiAgICogRmV0Y2hlcyBuZXcgdG9rZW5zIHRoYXQgYXJlLCBhdCB0aGUgdGltZSBvZiBmZXRjaGluZywgZ3VhcmFudGVlZCB0byBiZSB2YWxpZC5cbiAgICpcbiAgICogVGhlIG5ld2x5IGdlbmVyYXRlZCB0b2tlbnMgYXJlIHNob3J0LWxpdmVkLCBzbyBpdCdzIGdvb2QgcHJhY3RpY2Ugbm90IHRvIHJlbHkgb24gdGhlaXIgdmFsaWRpdHkgKGlmIHBvc3NpYmxlKS4gSG93ZXZlciwgdGhpcyBmdW5jdGlvbiBpcyB1c2VmdWwgaW4gc29tZSBjYXNlcyB3aGVyZSB5b3Ugb25seSB3YW50IHRvIHBhc3MgYWNjZXNzIHRva2VucyB0byBhIHNlcnZpY2UsIGFuZCB5b3Ugd2FudCB0byBtYWtlIHN1cmUgc2FpZCBhY2Nlc3MgdG9rZW4gaGFzIHRoZSBsb25nZXN0IHBvc3NpYmxlIGxpZmV0aW1lLlxuICAgKlxuICAgKiBJbiBtb3N0IGNhc2VzLCB5b3Ugc2hvdWxkIHByZWZlciBgZ2V0T3JGZXRjaExpa2VseVZhbGlkVG9rZW5zYC5cbiAgICpcbiAgICogQHJldHVybnMgbnVsbCBpZiB0aGUgc2Vzc2lvbiBpcyBrbm93biB0byBiZSBpbnZhbGlkLCBvciBuZXcgdG9rZW5zIG90aGVyd2lzZSAod2hpY2gsIGF0IHRoZSB0aW1lIG9mIGZldGNoaW5nLCBhcmUgZ3VhcmFudGVlZCB0byBiZSB2YWxpZCkuXG4gICAqL1xuICBhc3luYyBmZXRjaE5ld1Rva2VucygpIHtcbiAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IHRoaXMuX2dldE5ld2x5RmV0Y2hlZEFjY2Vzc1Rva2VuKCk7XG4gICAgcmV0dXJuIGFjY2Vzc1Rva2VuID8geyBhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuOiB0aGlzLl9yZWZyZXNoVG9rZW4gfSA6IG51bGw7XG4gIH1cbiAgbWFya0FjY2Vzc1Rva2VuRXhwaXJlZChhY2Nlc3NUb2tlbikge1xuICAgIGlmICh0aGlzLl9hY2Nlc3NUb2tlbi5nZXQoKSA9PT0gYWNjZXNzVG9rZW4pIHtcbiAgICAgIHRoaXMuX2FjY2Vzc1Rva2VuLnNldChudWxsKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIE5vdGUgdGhhdCBhIGNhbGxiYWNrIGludm9jYXRpb24gd2l0aCBgbnVsbGAgZG9lcyBub3QgbWVhbiB0aGUgc2Vzc2lvbiBoYXMgYmVlbiBpbnZhbGlkYXRlZDsgdGhlIGFjY2VzcyB0b2tlbiBtYXkganVzdCBoYXZlIGV4cGlyZWQuIFVzZSBgb25JbnZhbGlkYXRlYCB0byBkZXRlY3QgaW52YWxpZGF0aW9uLlxuICAgKi9cbiAgb25BY2Nlc3NUb2tlbkNoYW5nZShjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLl9hY2Nlc3NUb2tlbi5vbkNoYW5nZShjYWxsYmFjayk7XG4gIH1cbiAgLyoqXG4gICAqIEByZXR1cm5zIEFuIGFjY2VzcyB0b2tlbiwgd2hpY2ggbWF5IGJlIGV4cGlyZWQgb3IgZXhwaXJlIHNvb24sIG9yIG51bGwgaWYgaXQgaXMga25vd24gdG8gYmUgaW52YWxpZC5cbiAgICovXG4gIF9nZXRQb3RlbnRpYWxseUludmFsaWRBY2Nlc3NUb2tlbklmQXZhaWxhYmxlKCkge1xuICAgIGlmICghdGhpcy5fcmVmcmVzaFRva2VuKSByZXR1cm4gbnVsbDtcbiAgICBpZiAodGhpcy5pc0tub3duVG9CZUludmFsaWQoKSkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgYWNjZXNzVG9rZW4gPSB0aGlzLl9hY2Nlc3NUb2tlbi5nZXQoKTtcbiAgICBpZiAoYWNjZXNzVG9rZW4gJiYgIWFjY2Vzc1Rva2VuLmlzRXhwaXJlZCgpKSByZXR1cm4gYWNjZXNzVG9rZW47XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIFlvdSBzaG91bGQgcHJlZmVyIGBfZ2V0T3JGZXRjaFBvdGVudGlhbGx5SW52YWxpZEFjY2Vzc1Rva2VuYCBpbiBhbG1vc3QgYWxsIGNhc2VzLlxuICAgKlxuICAgKiBAcmV0dXJucyBBIG5ld2x5IGZldGNoZWQgYWNjZXNzIHRva2VuIChuZXZlciByZWFkIGZyb20gY2FjaGUpLCBvciBudWxsIGlmIHRoZSBzZXNzaW9uIGVpdGhlciBkb2VzIG5vdCByZXByZXNlbnQgYSB1c2VyIG9yIHRoZSBzZXNzaW9uIGlzIGludmFsaWQuXG4gICAqL1xuICBhc3luYyBfZ2V0TmV3bHlGZXRjaGVkQWNjZXNzVG9rZW4oKSB7XG4gICAgaWYgKCF0aGlzLl9yZWZyZXNoVG9rZW4pIHJldHVybiBudWxsO1xuICAgIGlmICh0aGlzLl9rbm93blRvQmVJbnZhbGlkLmdldCgpKSByZXR1cm4gbnVsbDtcbiAgICBpZiAoIXRoaXMuX3JlZnJlc2hQcm9taXNlKSB7XG4gICAgICB0aGlzLl9yZWZyZXNoQW5kU2V0UmVmcmVzaFByb21pc2UodGhpcy5fcmVmcmVzaFRva2VuKTtcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuX3JlZnJlc2hQcm9taXNlO1xuICB9XG4gIF9yZWZyZXNoQW5kU2V0UmVmcmVzaFByb21pc2UocmVmcmVzaFRva2VuKSB7XG4gICAgbGV0IHJlZnJlc2hQcm9taXNlID0gdGhpcy5fb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW5DYWxsYmFjayhyZWZyZXNoVG9rZW4pLnRoZW4oKGFjY2Vzc1Rva2VuKSA9PiB7XG4gICAgICBpZiAocmVmcmVzaFByb21pc2UgPT09IHRoaXMuX3JlZnJlc2hQcm9taXNlKSB7XG4gICAgICAgIHRoaXMuX3JlZnJlc2hQcm9taXNlID0gbnVsbDtcbiAgICAgICAgdGhpcy5fYWNjZXNzVG9rZW4uc2V0KGFjY2Vzc1Rva2VuKTtcbiAgICAgICAgaWYgKCFhY2Nlc3NUb2tlbikge1xuICAgICAgICAgIHRoaXMubWFya0ludmFsaWQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGFjY2Vzc1Rva2VuO1xuICAgIH0pO1xuICAgIHRoaXMuX3JlZnJlc2hQcm9taXNlID0gcmVmcmVzaFByb21pc2U7XG4gIH1cbn07XG5leHBvcnQge1xuICBBY2Nlc3NUb2tlbixcbiAgSW50ZXJuYWxTZXNzaW9uLFxuICBSZWZyZXNoVG9rZW5cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXNzaW9ucy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/sessions.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/arrays.js":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/arrays.js ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   enumerate: () => (/* binding */ enumerate),\n/* harmony export */   findLastIndex: () => (/* binding */ findLastIndex),\n/* harmony export */   getChunks: () => (/* binding */ getChunks),\n/* harmony export */   groupBy: () => (/* binding */ groupBy),\n/* harmony export */   isBooleanArray: () => (/* binding */ isBooleanArray),\n/* harmony export */   isNumberArray: () => (/* binding */ isNumberArray),\n/* harmony export */   isObjectArray: () => (/* binding */ isObjectArray),\n/* harmony export */   isShallowEqual: () => (/* binding */ isShallowEqual),\n/* harmony export */   isStringArray: () => (/* binding */ isStringArray),\n/* harmony export */   outerProduct: () => (/* binding */ outerProduct),\n/* harmony export */   range: () => (/* binding */ range),\n/* harmony export */   rotateLeft: () => (/* binding */ rotateLeft),\n/* harmony export */   rotateRight: () => (/* binding */ rotateRight),\n/* harmony export */   shuffle: () => (/* binding */ shuffle),\n/* harmony export */   typedIncludes: () => (/* binding */ typedIncludes),\n/* harmony export */   unique: () => (/* binding */ unique)\n/* harmony export */ });\n/* harmony import */ var _math_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./math.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/math.js\");\n// src/utils/arrays.tsx\n\nfunction typedIncludes(arr, item) {\n  return arr.includes(item);\n}\nfunction enumerate(arr) {\n  return arr.map((item, index) => [index, item]);\n}\nfunction isShallowEqual(a, b) {\n  if (a.length !== b.length) return false;\n  for (let i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\nfunction findLastIndex(arr, predicate) {\n  for (let i = arr.length - 1; i >= 0; i--) {\n    if (predicate(arr[i])) return i;\n  }\n  return -1;\n}\nfunction groupBy(arr, key) {\n  const result = /* @__PURE__ */ new Map();\n  for (const item of arr) {\n    const k = key(item);\n    if (result.get(k) === void 0) result.set(k, []);\n    result.get(k).push(item);\n  }\n  return result;\n}\nfunction range(startInclusive, endExclusive, step) {\n  if (endExclusive === void 0) {\n    endExclusive = startInclusive;\n    startInclusive = 0;\n  }\n  if (step === void 0) step = 1;\n  const result = [];\n  for (let i = startInclusive; step > 0 ? i < endExclusive : i > endExclusive; i += step) {\n    result.push(i);\n  }\n  return result;\n}\nfunction rotateLeft(arr, n) {\n  if (arr.length === 0) return [];\n  const index = (0,_math_js__WEBPACK_IMPORTED_MODULE_0__.remainder)(n, arr.length);\n  return [...arr.slice(index), ...arr.slice(0, index)];\n}\nfunction rotateRight(arr, n) {\n  return rotateLeft(arr, -n);\n}\nfunction shuffle(arr) {\n  const result = [...arr];\n  for (let i = result.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [result[i], result[j]] = [result[j], result[i]];\n  }\n  return result;\n}\nfunction outerProduct(arr1, arr2) {\n  return arr1.flatMap((item1) => arr2.map((item2) => [item1, item2]));\n}\nfunction unique(arr) {\n  return [...new Set(arr)];\n}\nfunction getChunks(arr, size) {\n  const result = [];\n  if (size <= 0) return result;\n  for (let i = 0; i < arr.length; i += size) {\n    result.push(arr.slice(i, i + size));\n  }\n  return result;\n}\nfunction isStringArray(arr) {\n  return Array.isArray(arr) && arr.every((item) => typeof item === \"string\");\n}\nfunction isNumberArray(arr) {\n  return Array.isArray(arr) && arr.every((item) => typeof item === \"number\");\n}\nfunction isBooleanArray(arr) {\n  return Array.isArray(arr) && arr.every((item) => typeof item === \"boolean\");\n}\nfunction isObjectArray(arr) {\n  return Array.isArray(arr) && arr.every((item) => typeof item === \"object\" && item !== null);\n}\n\n//# sourceMappingURL=arrays.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvYXJyYXlzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixjQUFjO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsUUFBUTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGdEQUFnRDtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsbURBQVM7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsT0FBTztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGdCQUFnQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWtCRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS91dGlscy9hcnJheXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3V0aWxzL2FycmF5cy50c3hcbmltcG9ydCB7IHJlbWFpbmRlciB9IGZyb20gXCIuL21hdGguanNcIjtcbmZ1bmN0aW9uIHR5cGVkSW5jbHVkZXMoYXJyLCBpdGVtKSB7XG4gIHJldHVybiBhcnIuaW5jbHVkZXMoaXRlbSk7XG59XG5mdW5jdGlvbiBlbnVtZXJhdGUoYXJyKSB7XG4gIHJldHVybiBhcnIubWFwKChpdGVtLCBpbmRleCkgPT4gW2luZGV4LCBpdGVtXSk7XG59XG5mdW5jdGlvbiBpc1NoYWxsb3dFcXVhbChhLCBiKSB7XG4gIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGFbaV0gIT09IGJbaV0pIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGZpbmRMYXN0SW5kZXgoYXJyLCBwcmVkaWNhdGUpIHtcbiAgZm9yIChsZXQgaSA9IGFyci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGlmIChwcmVkaWNhdGUoYXJyW2ldKSkgcmV0dXJuIGk7XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuZnVuY3Rpb24gZ3JvdXBCeShhcnIsIGtleSkge1xuICBjb25zdCByZXN1bHQgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBmb3IgKGNvbnN0IGl0ZW0gb2YgYXJyKSB7XG4gICAgY29uc3QgayA9IGtleShpdGVtKTtcbiAgICBpZiAocmVzdWx0LmdldChrKSA9PT0gdm9pZCAwKSByZXN1bHQuc2V0KGssIFtdKTtcbiAgICByZXN1bHQuZ2V0KGspLnB1c2goaXRlbSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHJhbmdlKHN0YXJ0SW5jbHVzaXZlLCBlbmRFeGNsdXNpdmUsIHN0ZXApIHtcbiAgaWYgKGVuZEV4Y2x1c2l2ZSA9PT0gdm9pZCAwKSB7XG4gICAgZW5kRXhjbHVzaXZlID0gc3RhcnRJbmNsdXNpdmU7XG4gICAgc3RhcnRJbmNsdXNpdmUgPSAwO1xuICB9XG4gIGlmIChzdGVwID09PSB2b2lkIDApIHN0ZXAgPSAxO1xuICBjb25zdCByZXN1bHQgPSBbXTtcbiAgZm9yIChsZXQgaSA9IHN0YXJ0SW5jbHVzaXZlOyBzdGVwID4gMCA/IGkgPCBlbmRFeGNsdXNpdmUgOiBpID4gZW5kRXhjbHVzaXZlOyBpICs9IHN0ZXApIHtcbiAgICByZXN1bHQucHVzaChpKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gcm90YXRlTGVmdChhcnIsIG4pIHtcbiAgaWYgKGFyci5sZW5ndGggPT09IDApIHJldHVybiBbXTtcbiAgY29uc3QgaW5kZXggPSByZW1haW5kZXIobiwgYXJyLmxlbmd0aCk7XG4gIHJldHVybiBbLi4uYXJyLnNsaWNlKGluZGV4KSwgLi4uYXJyLnNsaWNlKDAsIGluZGV4KV07XG59XG5mdW5jdGlvbiByb3RhdGVSaWdodChhcnIsIG4pIHtcbiAgcmV0dXJuIHJvdGF0ZUxlZnQoYXJyLCAtbik7XG59XG5mdW5jdGlvbiBzaHVmZmxlKGFycikge1xuICBjb25zdCByZXN1bHQgPSBbLi4uYXJyXTtcbiAgZm9yIChsZXQgaSA9IHJlc3VsdC5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XG4gICAgY29uc3QgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpICsgMSkpO1xuICAgIFtyZXN1bHRbaV0sIHJlc3VsdFtqXV0gPSBbcmVzdWx0W2pdLCByZXN1bHRbaV1dO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBvdXRlclByb2R1Y3QoYXJyMSwgYXJyMikge1xuICByZXR1cm4gYXJyMS5mbGF0TWFwKChpdGVtMSkgPT4gYXJyMi5tYXAoKGl0ZW0yKSA9PiBbaXRlbTEsIGl0ZW0yXSkpO1xufVxuZnVuY3Rpb24gdW5pcXVlKGFycikge1xuICByZXR1cm4gWy4uLm5ldyBTZXQoYXJyKV07XG59XG5mdW5jdGlvbiBnZXRDaHVua3MoYXJyLCBzaXplKSB7XG4gIGNvbnN0IHJlc3VsdCA9IFtdO1xuICBpZiAoc2l6ZSA8PSAwKSByZXR1cm4gcmVzdWx0O1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkgKz0gc2l6ZSkge1xuICAgIHJlc3VsdC5wdXNoKGFyci5zbGljZShpLCBpICsgc2l6ZSkpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBpc1N0cmluZ0FycmF5KGFycikge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShhcnIpICYmIGFyci5ldmVyeSgoaXRlbSkgPT4gdHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIpO1xufVxuZnVuY3Rpb24gaXNOdW1iZXJBcnJheShhcnIpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXJyKSAmJiBhcnIuZXZlcnkoKGl0ZW0pID0+IHR5cGVvZiBpdGVtID09PSBcIm51bWJlclwiKTtcbn1cbmZ1bmN0aW9uIGlzQm9vbGVhbkFycmF5KGFycikge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShhcnIpICYmIGFyci5ldmVyeSgoaXRlbSkgPT4gdHlwZW9mIGl0ZW0gPT09IFwiYm9vbGVhblwiKTtcbn1cbmZ1bmN0aW9uIGlzT2JqZWN0QXJyYXkoYXJyKSB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KGFycikgJiYgYXJyLmV2ZXJ5KChpdGVtKSA9PiB0eXBlb2YgaXRlbSA9PT0gXCJvYmplY3RcIiAmJiBpdGVtICE9PSBudWxsKTtcbn1cbmV4cG9ydCB7XG4gIGVudW1lcmF0ZSxcbiAgZmluZExhc3RJbmRleCxcbiAgZ2V0Q2h1bmtzLFxuICBncm91cEJ5LFxuICBpc0Jvb2xlYW5BcnJheSxcbiAgaXNOdW1iZXJBcnJheSxcbiAgaXNPYmplY3RBcnJheSxcbiAgaXNTaGFsbG93RXF1YWwsXG4gIGlzU3RyaW5nQXJyYXksXG4gIG91dGVyUHJvZHVjdCxcbiAgcmFuZ2UsXG4gIHJvdGF0ZUxlZnQsXG4gIHJvdGF0ZVJpZ2h0LFxuICBzaHVmZmxlLFxuICB0eXBlZEluY2x1ZGVzLFxuICB1bmlxdWVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcnJheXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/arrays.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/base64.js":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/base64.js ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fileToBase64: () => (/* binding */ fileToBase64),\n/* harmony export */   validateBase64Image: () => (/* binding */ validateBase64Image)\n/* harmony export */ });\n// src/utils/base64.tsx\nfunction fileToBase64(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = (error) => reject(error);\n  });\n}\nfunction validateBase64Image(base64) {\n  const base64ImageRegex = /^data:image\\/(png|jpg|jpeg|gif|bmp|webp);base64,[A-Za-z0-9+/]+={0,2}$|^[A-Za-z0-9+/]+={0,2}$/;\n  return base64ImageRegex.test(base64);\n}\n\n//# sourceMappingURL=base64.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvYmFzZTY0LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLHFFQUFxRSx1QkFBdUIsSUFBSSxtQkFBbUIsSUFBSTtBQUN2SDtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2dmeDJlZGVub2FzaXMvRG93bmxvYWRzL0RldmVsb3BtZW50L0VzcGFkYS9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvYmFzZTY0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy9iYXNlNjQudHN4XG5mdW5jdGlvbiBmaWxlVG9CYXNlNjQoZmlsZSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XG4gICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHJlc29sdmUocmVhZGVyLnJlc3VsdCk7XG4gICAgcmVhZGVyLm9uZXJyb3IgPSAoZXJyb3IpID0+IHJlamVjdChlcnJvcik7XG4gIH0pO1xufVxuZnVuY3Rpb24gdmFsaWRhdGVCYXNlNjRJbWFnZShiYXNlNjQpIHtcbiAgY29uc3QgYmFzZTY0SW1hZ2VSZWdleCA9IC9eZGF0YTppbWFnZVxcLyhwbmd8anBnfGpwZWd8Z2lmfGJtcHx3ZWJwKTtiYXNlNjQsW0EtWmEtejAtOSsvXSs9ezAsMn0kfF5bQS1aYS16MC05Ky9dKz17MCwyfSQvO1xuICByZXR1cm4gYmFzZTY0SW1hZ2VSZWdleC50ZXN0KGJhc2U2NCk7XG59XG5leHBvcnQge1xuICBmaWxlVG9CYXNlNjQsXG4gIHZhbGlkYXRlQmFzZTY0SW1hZ2Vcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iYXNlNjQuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/base64.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/bytes.js":
/*!*******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/bytes.js ***!
  \*******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decodeBase32: () => (/* binding */ decodeBase32),\n/* harmony export */   decodeBase64: () => (/* binding */ decodeBase64),\n/* harmony export */   decodeBase64OrBase64Url: () => (/* binding */ decodeBase64OrBase64Url),\n/* harmony export */   decodeBase64Url: () => (/* binding */ decodeBase64Url),\n/* harmony export */   encodeBase32: () => (/* binding */ encodeBase32),\n/* harmony export */   encodeBase64: () => (/* binding */ encodeBase64),\n/* harmony export */   encodeBase64Url: () => (/* binding */ encodeBase64Url),\n/* harmony export */   getBase32CharacterFromIndex: () => (/* binding */ getBase32CharacterFromIndex),\n/* harmony export */   getBase32IndexFromCharacter: () => (/* binding */ getBase32IndexFromCharacter),\n/* harmony export */   isBase32: () => (/* binding */ isBase32),\n/* harmony export */   isBase64: () => (/* binding */ isBase64),\n/* harmony export */   isBase64Url: () => (/* binding */ isBase64Url),\n/* harmony export */   toHexString: () => (/* binding */ toHexString)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n// src/utils/bytes.tsx\n\nvar crockfordAlphabet = \"0123456789ABCDEFGHJKMNPQRSTVWXYZ\";\nvar crockfordReplacements = /* @__PURE__ */ new Map([\n  [\"o\", \"0\"],\n  [\"i\", \"1\"],\n  [\"l\", \"1\"]\n]);\nfunction toHexString(input) {\n  return Array.from(input).map((b) => b.toString(16).padStart(2, \"0\")).join(\"\");\n}\nfunction getBase32CharacterFromIndex(index) {\n  if (index < 0 || index >= crockfordAlphabet.length) {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(`Invalid base32 index: ${index}`);\n  }\n  return crockfordAlphabet[index];\n}\nfunction getBase32IndexFromCharacter(character) {\n  if (character.length !== 1) {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(`Invalid base32 character: ${character}`);\n  }\n  const index = crockfordAlphabet.indexOf(character.toUpperCase());\n  if (index === -1) {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(`Invalid base32 character: ${character}`);\n  }\n  return index;\n}\nfunction encodeBase32(input) {\n  let bits = 0;\n  let value = 0;\n  let output = \"\";\n  for (let i = 0; i < input.length; i++) {\n    value = value << 8 | input[i];\n    bits += 8;\n    while (bits >= 5) {\n      output += getBase32CharacterFromIndex(value >>> bits - 5 & 31);\n      bits -= 5;\n    }\n  }\n  if (bits > 0) {\n    output += getBase32CharacterFromIndex(value << 5 - bits & 31);\n  }\n  if (!isBase32(output)) {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Invalid base32 output; this should never happen\");\n  }\n  return output;\n}\nfunction decodeBase32(input) {\n  if (!isBase32(input)) {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Invalid base32 string\");\n  }\n  const output = new Uint8Array(input.length * 5 / 8 | 0);\n  let bits = 0;\n  let value = 0;\n  let outputIndex = 0;\n  for (let i = 0; i < input.length; i++) {\n    let char = input[i].toLowerCase();\n    if (char === \" \") continue;\n    if (crockfordReplacements.has(char)) {\n      char = crockfordReplacements.get(char);\n    }\n    const index = getBase32IndexFromCharacter(char);\n    value = value << 5 | index;\n    bits += 5;\n    if (bits >= 8) {\n      output[outputIndex++] = value >>> bits - 8 & 255;\n      bits -= 8;\n    }\n  }\n  return output;\n}\nfunction encodeBase64(input) {\n  return btoa([...input].map((b) => String.fromCharCode(b)).join(\"\"));\n}\nfunction decodeBase64(input) {\n  return new Uint8Array(atob(input).split(\"\").map((char) => char.charCodeAt(0)));\n}\nfunction encodeBase64Url(input) {\n  const res = encodeBase64(input).replace(/=+$/, \"\").replace(/\\+/g, \"-\").replace(/\\//g, \"_\");\n  return res;\n}\nfunction decodeBase64Url(input) {\n  if (!isBase64Url(input)) {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Invalid base64url string\");\n  }\n  if (input === \"\") {\n    return new Uint8Array(0);\n  }\n  return decodeBase64(input.replace(/-/g, \"+\").replace(/_/g, \"/\") + \"====\".slice((input.length - 1) % 4 + 1));\n}\nfunction decodeBase64OrBase64Url(input) {\n  if (isBase64Url(input)) {\n    return decodeBase64Url(input);\n  } else if (isBase64(input)) {\n    return decodeBase64(input);\n  } else {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"Invalid base64 or base64url string\");\n  }\n}\nfunction isBase32(input) {\n  for (const char of input) {\n    if (char === \" \") continue;\n    const upperChar = char.toUpperCase();\n    if (!crockfordAlphabet.includes(upperChar)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction isBase64(input) {\n  const regex = /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/;\n  return regex.test(input);\n}\nfunction isBase64Url(input) {\n  if (input === \"\") {\n    return true;\n  }\n  const regex = /^[0-9a-zA-Z_-]+$/;\n  return regex.test(input);\n}\n\n//# sourceMappingURL=bytes.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvYnl0ZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNrRDtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYywyREFBbUIsMEJBQTBCLE1BQU07QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsMkRBQW1CLDhCQUE4QixVQUFVO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBLGNBQWMsMkRBQW1CLDhCQUE4QixVQUFVO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGtCQUFrQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYywyREFBbUIseUJBQXlCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDJEQUFtQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGtCQUFrQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDJEQUFtQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0osY0FBYywyREFBbUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsRUFBRSxtQkFBbUIsRUFBRSxpQkFBaUIsRUFBRTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFlRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS91dGlscy9ieXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvYnl0ZXMudHN4XG5pbXBvcnQgeyBTdGFja0Fzc2VydGlvbkVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG52YXIgY3JvY2tmb3JkQWxwaGFiZXQgPSBcIjAxMjM0NTY3ODlBQkNERUZHSEpLTU5QUVJTVFZXWFlaXCI7XG52YXIgY3JvY2tmb3JkUmVwbGFjZW1lbnRzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoW1xuICBbXCJvXCIsIFwiMFwiXSxcbiAgW1wiaVwiLCBcIjFcIl0sXG4gIFtcImxcIiwgXCIxXCJdXG5dKTtcbmZ1bmN0aW9uIHRvSGV4U3RyaW5nKGlucHV0KSB7XG4gIHJldHVybiBBcnJheS5mcm9tKGlucHV0KS5tYXAoKGIpID0+IGIudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsIFwiMFwiKSkuam9pbihcIlwiKTtcbn1cbmZ1bmN0aW9uIGdldEJhc2UzMkNoYXJhY3RlckZyb21JbmRleChpbmRleCkge1xuICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IGNyb2NrZm9yZEFscGhhYmV0Lmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKGBJbnZhbGlkIGJhc2UzMiBpbmRleDogJHtpbmRleH1gKTtcbiAgfVxuICByZXR1cm4gY3JvY2tmb3JkQWxwaGFiZXRbaW5kZXhdO1xufVxuZnVuY3Rpb24gZ2V0QmFzZTMySW5kZXhGcm9tQ2hhcmFjdGVyKGNoYXJhY3Rlcikge1xuICBpZiAoY2hhcmFjdGVyLmxlbmd0aCAhPT0gMSkge1xuICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKGBJbnZhbGlkIGJhc2UzMiBjaGFyYWN0ZXI6ICR7Y2hhcmFjdGVyfWApO1xuICB9XG4gIGNvbnN0IGluZGV4ID0gY3JvY2tmb3JkQWxwaGFiZXQuaW5kZXhPZihjaGFyYWN0ZXIudG9VcHBlckNhc2UoKSk7XG4gIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihgSW52YWxpZCBiYXNlMzIgY2hhcmFjdGVyOiAke2NoYXJhY3Rlcn1gKTtcbiAgfVxuICByZXR1cm4gaW5kZXg7XG59XG5mdW5jdGlvbiBlbmNvZGVCYXNlMzIoaW5wdXQpIHtcbiAgbGV0IGJpdHMgPSAwO1xuICBsZXQgdmFsdWUgPSAwO1xuICBsZXQgb3V0cHV0ID0gXCJcIjtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKykge1xuICAgIHZhbHVlID0gdmFsdWUgPDwgOCB8IGlucHV0W2ldO1xuICAgIGJpdHMgKz0gODtcbiAgICB3aGlsZSAoYml0cyA+PSA1KSB7XG4gICAgICBvdXRwdXQgKz0gZ2V0QmFzZTMyQ2hhcmFjdGVyRnJvbUluZGV4KHZhbHVlID4+PiBiaXRzIC0gNSAmIDMxKTtcbiAgICAgIGJpdHMgLT0gNTtcbiAgICB9XG4gIH1cbiAgaWYgKGJpdHMgPiAwKSB7XG4gICAgb3V0cHV0ICs9IGdldEJhc2UzMkNoYXJhY3RlckZyb21JbmRleCh2YWx1ZSA8PCA1IC0gYml0cyAmIDMxKTtcbiAgfVxuICBpZiAoIWlzQmFzZTMyKG91dHB1dCkpIHtcbiAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkludmFsaWQgYmFzZTMyIG91dHB1dDsgdGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuXCIpO1xuICB9XG4gIHJldHVybiBvdXRwdXQ7XG59XG5mdW5jdGlvbiBkZWNvZGVCYXNlMzIoaW5wdXQpIHtcbiAgaWYgKCFpc0Jhc2UzMihpbnB1dCkpIHtcbiAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkludmFsaWQgYmFzZTMyIHN0cmluZ1wiKTtcbiAgfVxuICBjb25zdCBvdXRwdXQgPSBuZXcgVWludDhBcnJheShpbnB1dC5sZW5ndGggKiA1IC8gOCB8IDApO1xuICBsZXQgYml0cyA9IDA7XG4gIGxldCB2YWx1ZSA9IDA7XG4gIGxldCBvdXRwdXRJbmRleCA9IDA7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgY2hhciA9IGlucHV0W2ldLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKGNoYXIgPT09IFwiIFwiKSBjb250aW51ZTtcbiAgICBpZiAoY3JvY2tmb3JkUmVwbGFjZW1lbnRzLmhhcyhjaGFyKSkge1xuICAgICAgY2hhciA9IGNyb2NrZm9yZFJlcGxhY2VtZW50cy5nZXQoY2hhcik7XG4gICAgfVxuICAgIGNvbnN0IGluZGV4ID0gZ2V0QmFzZTMySW5kZXhGcm9tQ2hhcmFjdGVyKGNoYXIpO1xuICAgIHZhbHVlID0gdmFsdWUgPDwgNSB8IGluZGV4O1xuICAgIGJpdHMgKz0gNTtcbiAgICBpZiAoYml0cyA+PSA4KSB7XG4gICAgICBvdXRwdXRbb3V0cHV0SW5kZXgrK10gPSB2YWx1ZSA+Pj4gYml0cyAtIDggJiAyNTU7XG4gICAgICBiaXRzIC09IDg7XG4gICAgfVxuICB9XG4gIHJldHVybiBvdXRwdXQ7XG59XG5mdW5jdGlvbiBlbmNvZGVCYXNlNjQoaW5wdXQpIHtcbiAgcmV0dXJuIGJ0b2EoWy4uLmlucHV0XS5tYXAoKGIpID0+IFN0cmluZy5mcm9tQ2hhckNvZGUoYikpLmpvaW4oXCJcIikpO1xufVxuZnVuY3Rpb24gZGVjb2RlQmFzZTY0KGlucHV0KSB7XG4gIHJldHVybiBuZXcgVWludDhBcnJheShhdG9iKGlucHV0KS5zcGxpdChcIlwiKS5tYXAoKGNoYXIpID0+IGNoYXIuY2hhckNvZGVBdCgwKSkpO1xufVxuZnVuY3Rpb24gZW5jb2RlQmFzZTY0VXJsKGlucHV0KSB7XG4gIGNvbnN0IHJlcyA9IGVuY29kZUJhc2U2NChpbnB1dCkucmVwbGFjZSgvPSskLywgXCJcIikucmVwbGFjZSgvXFwrL2csIFwiLVwiKS5yZXBsYWNlKC9cXC8vZywgXCJfXCIpO1xuICByZXR1cm4gcmVzO1xufVxuZnVuY3Rpb24gZGVjb2RlQmFzZTY0VXJsKGlucHV0KSB7XG4gIGlmICghaXNCYXNlNjRVcmwoaW5wdXQpKSB7XG4gICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJJbnZhbGlkIGJhc2U2NHVybCBzdHJpbmdcIik7XG4gIH1cbiAgaWYgKGlucHV0ID09PSBcIlwiKSB7XG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KDApO1xuICB9XG4gIHJldHVybiBkZWNvZGVCYXNlNjQoaW5wdXQucmVwbGFjZSgvLS9nLCBcIitcIikucmVwbGFjZSgvXy9nLCBcIi9cIikgKyBcIj09PT1cIi5zbGljZSgoaW5wdXQubGVuZ3RoIC0gMSkgJSA0ICsgMSkpO1xufVxuZnVuY3Rpb24gZGVjb2RlQmFzZTY0T3JCYXNlNjRVcmwoaW5wdXQpIHtcbiAgaWYgKGlzQmFzZTY0VXJsKGlucHV0KSkge1xuICAgIHJldHVybiBkZWNvZGVCYXNlNjRVcmwoaW5wdXQpO1xuICB9IGVsc2UgaWYgKGlzQmFzZTY0KGlucHV0KSkge1xuICAgIHJldHVybiBkZWNvZGVCYXNlNjQoaW5wdXQpO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiSW52YWxpZCBiYXNlNjQgb3IgYmFzZTY0dXJsIHN0cmluZ1wiKTtcbiAgfVxufVxuZnVuY3Rpb24gaXNCYXNlMzIoaW5wdXQpIHtcbiAgZm9yIChjb25zdCBjaGFyIG9mIGlucHV0KSB7XG4gICAgaWYgKGNoYXIgPT09IFwiIFwiKSBjb250aW51ZTtcbiAgICBjb25zdCB1cHBlckNoYXIgPSBjaGFyLnRvVXBwZXJDYXNlKCk7XG4gICAgaWYgKCFjcm9ja2ZvcmRBbHBoYWJldC5pbmNsdWRlcyh1cHBlckNoYXIpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gaXNCYXNlNjQoaW5wdXQpIHtcbiAgY29uc3QgcmVnZXggPSAvXig/OltBLVphLXowLTkrL117NH0pKig/OltBLVphLXowLTkrL117Mn09PXxbQS1aYS16MC05Ky9dezN9PSk/JC87XG4gIHJldHVybiByZWdleC50ZXN0KGlucHV0KTtcbn1cbmZ1bmN0aW9uIGlzQmFzZTY0VXJsKGlucHV0KSB7XG4gIGlmIChpbnB1dCA9PT0gXCJcIikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGNvbnN0IHJlZ2V4ID0gL15bMC05YS16QS1aXy1dKyQvO1xuICByZXR1cm4gcmVnZXgudGVzdChpbnB1dCk7XG59XG5leHBvcnQge1xuICBkZWNvZGVCYXNlMzIsXG4gIGRlY29kZUJhc2U2NCxcbiAgZGVjb2RlQmFzZTY0T3JCYXNlNjRVcmwsXG4gIGRlY29kZUJhc2U2NFVybCxcbiAgZW5jb2RlQmFzZTMyLFxuICBlbmNvZGVCYXNlNjQsXG4gIGVuY29kZUJhc2U2NFVybCxcbiAgZ2V0QmFzZTMyQ2hhcmFjdGVyRnJvbUluZGV4LFxuICBnZXRCYXNlMzJJbmRleEZyb21DaGFyYWN0ZXIsXG4gIGlzQmFzZTMyLFxuICBpc0Jhc2U2NCxcbiAgaXNCYXNlNjRVcmwsXG4gIHRvSGV4U3RyaW5nXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Ynl0ZXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/bytes.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/caches.js":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/caches.js ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncCache: () => (/* binding */ AsyncCache),\n/* harmony export */   cacheFunction: () => (/* binding */ cacheFunction)\n/* harmony export */ });\n/* harmony import */ var _maps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./maps.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/maps.js\");\n/* harmony import */ var _objects_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./objects.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/objects.js\");\n/* harmony import */ var _promises_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./promises.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/promises.js\");\n/* harmony import */ var _stores_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./stores.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/stores.js\");\n// src/utils/caches.tsx\n\n\n\n\nfunction cacheFunction(f) {\n  const dependenciesMap = new _maps_js__WEBPACK_IMPORTED_MODULE_0__.DependenciesMap();\n  return (...args) => {\n    if (dependenciesMap.has(args)) {\n      return dependenciesMap.get(args);\n    }\n    const value = f(...args);\n    dependenciesMap.set(args, value);\n    return value;\n  };\n}\nvar AsyncCache = class {\n  constructor(_fetcher, _options = {}) {\n    this._fetcher = _fetcher;\n    this._options = _options;\n    this._map = new _maps_js__WEBPACK_IMPORTED_MODULE_0__.DependenciesMap();\n    this.isCacheAvailable = this._createKeyed(\"isCacheAvailable\");\n    this.getIfCached = this._createKeyed(\"getIfCached\");\n    this.getOrWait = this._createKeyed(\"getOrWait\");\n    this.forceSetCachedValue = this._createKeyed(\"forceSetCachedValue\");\n    this.forceSetCachedValueAsync = this._createKeyed(\"forceSetCachedValueAsync\");\n    this.refresh = this._createKeyed(\"refresh\");\n    this.invalidate = this._createKeyed(\"invalidate\");\n    this.onStateChange = this._createKeyed(\"onStateChange\");\n  }\n  _createKeyed(functionName) {\n    return (key, ...args) => {\n      const valueCache = this.getValueCache(key);\n      return valueCache[functionName].apply(valueCache, args);\n    };\n  }\n  getValueCache(dependencies) {\n    let cache = this._map.get(dependencies);\n    if (!cache) {\n      cache = new AsyncValueCache(\n        async () => await this._fetcher(dependencies),\n        {\n          ...this._options,\n          onSubscribe: this._options.onSubscribe ? (cb) => this._options.onSubscribe(dependencies, cb) : void 0\n        }\n      );\n      this._map.set(dependencies, cache);\n    }\n    return cache;\n  }\n  async refreshWhere(predicate) {\n    const promises = [];\n    for (const [dependencies, cache] of this._map) {\n      if (predicate(dependencies)) {\n        promises.push(cache.refresh());\n      }\n    }\n    await Promise.all(promises);\n  }\n};\nvar AsyncValueCache = class {\n  constructor(fetcher, _options = {}) {\n    this._options = _options;\n    this._subscriptionsCount = 0;\n    this._unsubscribers = [];\n    this._mostRecentRefreshPromiseIndex = 0;\n    this._store = new _stores_js__WEBPACK_IMPORTED_MODULE_3__.AsyncStore();\n    this._rateLimitOptions = {\n      concurrency: 1,\n      throttleMs: 300,\n      ...(0,_objects_js__WEBPACK_IMPORTED_MODULE_1__.filterUndefined)(_options.rateLimiter ?? {})\n    };\n    this._fetcher = (0,_promises_js__WEBPACK_IMPORTED_MODULE_2__.rateLimited)(fetcher, {\n      ...this._rateLimitOptions,\n      batchCalls: true\n    });\n  }\n  isCacheAvailable() {\n    return this._store.isAvailable();\n  }\n  getIfCached() {\n    return this._store.get();\n  }\n  getOrWait(cacheStrategy) {\n    const cached = this.getIfCached();\n    if (cacheStrategy === \"read-write\" && cached.status === \"ok\") {\n      return (0,_promises_js__WEBPACK_IMPORTED_MODULE_2__.resolved)(cached.data);\n    }\n    return this._refetch(cacheStrategy);\n  }\n  _set(value) {\n    this._store.set(value);\n  }\n  _setAsync(value) {\n    const promise = (0,_promises_js__WEBPACK_IMPORTED_MODULE_2__.pending)(value);\n    this._pendingPromise = promise;\n    return (0,_promises_js__WEBPACK_IMPORTED_MODULE_2__.pending)(this._store.setAsync(promise));\n  }\n  _refetch(cacheStrategy) {\n    if (cacheStrategy === \"read-write\" && this._pendingPromise) {\n      return this._pendingPromise;\n    }\n    const promise = (0,_promises_js__WEBPACK_IMPORTED_MODULE_2__.pending)(this._fetcher());\n    if (cacheStrategy === \"never\") {\n      return promise;\n    }\n    return (0,_promises_js__WEBPACK_IMPORTED_MODULE_2__.pending)(this._setAsync(promise).then(() => promise));\n  }\n  forceSetCachedValue(value) {\n    this._set(value);\n  }\n  forceSetCachedValueAsync(value) {\n    return this._setAsync(value);\n  }\n  /**\n   * Refetches the value from the fetcher, and updates the cache with it.\n   */\n  async refresh() {\n    return await this.getOrWait(\"write-only\");\n  }\n  /**\n   * Invalidates the cache, marking it to refresh on the next read. If anyone was listening to it, it will refresh\n   * immediately.\n   */\n  invalidate() {\n    this._store.setUnavailable();\n    this._pendingPromise = void 0;\n    if (this._subscriptionsCount > 0) {\n      (0,_promises_js__WEBPACK_IMPORTED_MODULE_2__.runAsynchronously)(this.refresh());\n    }\n  }\n  onStateChange(callback) {\n    const storeObj = this._store.onChange(callback);\n    (0,_promises_js__WEBPACK_IMPORTED_MODULE_2__.runAsynchronously)(this.getOrWait(\"read-write\"));\n    if (this._subscriptionsCount++ === 0 && this._options.onSubscribe) {\n      const unsubscribe = this._options.onSubscribe(() => {\n        (0,_promises_js__WEBPACK_IMPORTED_MODULE_2__.runAsynchronously)(this.refresh());\n      });\n      this._unsubscribers.push(unsubscribe);\n    }\n    let hasUnsubscribed = false;\n    return {\n      unsubscribe: () => {\n        if (hasUnsubscribed) return;\n        hasUnsubscribed = true;\n        storeObj.unsubscribe();\n        if (--this._subscriptionsCount === 0) {\n          const currentRefreshPromiseIndex = ++this._mostRecentRefreshPromiseIndex;\n          (0,_promises_js__WEBPACK_IMPORTED_MODULE_2__.runAsynchronously)(async () => {\n            await (0,_promises_js__WEBPACK_IMPORTED_MODULE_2__.wait)(5e3);\n            if (this._subscriptionsCount === 0 && currentRefreshPromiseIndex === this._mostRecentRefreshPromiseIndex) {\n              this.invalidate();\n            }\n          });\n          for (const unsubscribe of this._unsubscribers) {\n            unsubscribe();\n          }\n        }\n      }\n    };\n  }\n};\n\n//# sourceMappingURL=caches.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvY2FjaGVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQzRDO0FBQ0c7QUFDeUM7QUFDL0M7QUFDekM7QUFDQSw4QkFBOEIscURBQWU7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBLG9CQUFvQixxREFBZTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixrREFBVTtBQUNoQztBQUNBO0FBQ0E7QUFDQSxTQUFTLDREQUFlLDJCQUEyQjtBQUNuRDtBQUNBLG9CQUFvQix5REFBVztBQUMvQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxzREFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixxREFBTztBQUMzQjtBQUNBLFdBQVcscURBQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixxREFBTztBQUMzQjtBQUNBO0FBQ0E7QUFDQSxXQUFXLHFEQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sK0RBQWlCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSwrREFBaUI7QUFDckI7QUFDQTtBQUNBLFFBQVEsK0RBQWlCO0FBQ3pCLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsK0RBQWlCO0FBQzNCLGtCQUFrQixrREFBSTtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZngyZWRlbm9hc2lzL0Rvd25sb2Fkcy9EZXZlbG9wbWVudC9Fc3BhZGEvbm9kZV9tb2R1bGVzLy5wbnBtL0BzdGFja2ZyYW1lK3N0YWNrLXNoYXJlZEAyLjguNDFfQGF3cy1zZGsrY3JlZGVudGlhbC1wcm92aWRlci13ZWItaWRlbnRpdHlAMy45MDEuMF9AdHlwZV83NGRiYTAxZjZkODllNzIwODk2YjRkZjM0NTgzMzk5MC9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvZXNtL3V0aWxzL2NhY2hlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvY2FjaGVzLnRzeFxuaW1wb3J0IHsgRGVwZW5kZW5jaWVzTWFwIH0gZnJvbSBcIi4vbWFwcy5qc1wiO1xuaW1wb3J0IHsgZmlsdGVyVW5kZWZpbmVkIH0gZnJvbSBcIi4vb2JqZWN0cy5qc1wiO1xuaW1wb3J0IHsgcGVuZGluZywgcmF0ZUxpbWl0ZWQsIHJlc29sdmVkLCBydW5Bc3luY2hyb25vdXNseSwgd2FpdCB9IGZyb20gXCIuL3Byb21pc2VzLmpzXCI7XG5pbXBvcnQgeyBBc3luY1N0b3JlIH0gZnJvbSBcIi4vc3RvcmVzLmpzXCI7XG5mdW5jdGlvbiBjYWNoZUZ1bmN0aW9uKGYpIHtcbiAgY29uc3QgZGVwZW5kZW5jaWVzTWFwID0gbmV3IERlcGVuZGVuY2llc01hcCgpO1xuICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcbiAgICBpZiAoZGVwZW5kZW5jaWVzTWFwLmhhcyhhcmdzKSkge1xuICAgICAgcmV0dXJuIGRlcGVuZGVuY2llc01hcC5nZXQoYXJncyk7XG4gICAgfVxuICAgIGNvbnN0IHZhbHVlID0gZiguLi5hcmdzKTtcbiAgICBkZXBlbmRlbmNpZXNNYXAuc2V0KGFyZ3MsIHZhbHVlKTtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH07XG59XG52YXIgQXN5bmNDYWNoZSA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoX2ZldGNoZXIsIF9vcHRpb25zID0ge30pIHtcbiAgICB0aGlzLl9mZXRjaGVyID0gX2ZldGNoZXI7XG4gICAgdGhpcy5fb3B0aW9ucyA9IF9vcHRpb25zO1xuICAgIHRoaXMuX21hcCA9IG5ldyBEZXBlbmRlbmNpZXNNYXAoKTtcbiAgICB0aGlzLmlzQ2FjaGVBdmFpbGFibGUgPSB0aGlzLl9jcmVhdGVLZXllZChcImlzQ2FjaGVBdmFpbGFibGVcIik7XG4gICAgdGhpcy5nZXRJZkNhY2hlZCA9IHRoaXMuX2NyZWF0ZUtleWVkKFwiZ2V0SWZDYWNoZWRcIik7XG4gICAgdGhpcy5nZXRPcldhaXQgPSB0aGlzLl9jcmVhdGVLZXllZChcImdldE9yV2FpdFwiKTtcbiAgICB0aGlzLmZvcmNlU2V0Q2FjaGVkVmFsdWUgPSB0aGlzLl9jcmVhdGVLZXllZChcImZvcmNlU2V0Q2FjaGVkVmFsdWVcIik7XG4gICAgdGhpcy5mb3JjZVNldENhY2hlZFZhbHVlQXN5bmMgPSB0aGlzLl9jcmVhdGVLZXllZChcImZvcmNlU2V0Q2FjaGVkVmFsdWVBc3luY1wiKTtcbiAgICB0aGlzLnJlZnJlc2ggPSB0aGlzLl9jcmVhdGVLZXllZChcInJlZnJlc2hcIik7XG4gICAgdGhpcy5pbnZhbGlkYXRlID0gdGhpcy5fY3JlYXRlS2V5ZWQoXCJpbnZhbGlkYXRlXCIpO1xuICAgIHRoaXMub25TdGF0ZUNoYW5nZSA9IHRoaXMuX2NyZWF0ZUtleWVkKFwib25TdGF0ZUNoYW5nZVwiKTtcbiAgfVxuICBfY3JlYXRlS2V5ZWQoZnVuY3Rpb25OYW1lKSB7XG4gICAgcmV0dXJuIChrZXksIC4uLmFyZ3MpID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlQ2FjaGUgPSB0aGlzLmdldFZhbHVlQ2FjaGUoa2V5KTtcbiAgICAgIHJldHVybiB2YWx1ZUNhY2hlW2Z1bmN0aW9uTmFtZV0uYXBwbHkodmFsdWVDYWNoZSwgYXJncyk7XG4gICAgfTtcbiAgfVxuICBnZXRWYWx1ZUNhY2hlKGRlcGVuZGVuY2llcykge1xuICAgIGxldCBjYWNoZSA9IHRoaXMuX21hcC5nZXQoZGVwZW5kZW5jaWVzKTtcbiAgICBpZiAoIWNhY2hlKSB7XG4gICAgICBjYWNoZSA9IG5ldyBBc3luY1ZhbHVlQ2FjaGUoXG4gICAgICAgIGFzeW5jICgpID0+IGF3YWl0IHRoaXMuX2ZldGNoZXIoZGVwZW5kZW5jaWVzKSxcbiAgICAgICAge1xuICAgICAgICAgIC4uLnRoaXMuX29wdGlvbnMsXG4gICAgICAgICAgb25TdWJzY3JpYmU6IHRoaXMuX29wdGlvbnMub25TdWJzY3JpYmUgPyAoY2IpID0+IHRoaXMuX29wdGlvbnMub25TdWJzY3JpYmUoZGVwZW5kZW5jaWVzLCBjYikgOiB2b2lkIDBcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIHRoaXMuX21hcC5zZXQoZGVwZW5kZW5jaWVzLCBjYWNoZSk7XG4gICAgfVxuICAgIHJldHVybiBjYWNoZTtcbiAgfVxuICBhc3luYyByZWZyZXNoV2hlcmUocHJlZGljYXRlKSB7XG4gICAgY29uc3QgcHJvbWlzZXMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IFtkZXBlbmRlbmNpZXMsIGNhY2hlXSBvZiB0aGlzLl9tYXApIHtcbiAgICAgIGlmIChwcmVkaWNhdGUoZGVwZW5kZW5jaWVzKSkge1xuICAgICAgICBwcm9taXNlcy5wdXNoKGNhY2hlLnJlZnJlc2goKSk7XG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgfVxufTtcbnZhciBBc3luY1ZhbHVlQ2FjaGUgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGZldGNoZXIsIF9vcHRpb25zID0ge30pIHtcbiAgICB0aGlzLl9vcHRpb25zID0gX29wdGlvbnM7XG4gICAgdGhpcy5fc3Vic2NyaXB0aW9uc0NvdW50ID0gMDtcbiAgICB0aGlzLl91bnN1YnNjcmliZXJzID0gW107XG4gICAgdGhpcy5fbW9zdFJlY2VudFJlZnJlc2hQcm9taXNlSW5kZXggPSAwO1xuICAgIHRoaXMuX3N0b3JlID0gbmV3IEFzeW5jU3RvcmUoKTtcbiAgICB0aGlzLl9yYXRlTGltaXRPcHRpb25zID0ge1xuICAgICAgY29uY3VycmVuY3k6IDEsXG4gICAgICB0aHJvdHRsZU1zOiAzMDAsXG4gICAgICAuLi5maWx0ZXJVbmRlZmluZWQoX29wdGlvbnMucmF0ZUxpbWl0ZXIgPz8ge30pXG4gICAgfTtcbiAgICB0aGlzLl9mZXRjaGVyID0gcmF0ZUxpbWl0ZWQoZmV0Y2hlciwge1xuICAgICAgLi4udGhpcy5fcmF0ZUxpbWl0T3B0aW9ucyxcbiAgICAgIGJhdGNoQ2FsbHM6IHRydWVcbiAgICB9KTtcbiAgfVxuICBpc0NhY2hlQXZhaWxhYmxlKCkge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZS5pc0F2YWlsYWJsZSgpO1xuICB9XG4gIGdldElmQ2FjaGVkKCkge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZS5nZXQoKTtcbiAgfVxuICBnZXRPcldhaXQoY2FjaGVTdHJhdGVneSkge1xuICAgIGNvbnN0IGNhY2hlZCA9IHRoaXMuZ2V0SWZDYWNoZWQoKTtcbiAgICBpZiAoY2FjaGVTdHJhdGVneSA9PT0gXCJyZWFkLXdyaXRlXCIgJiYgY2FjaGVkLnN0YXR1cyA9PT0gXCJva1wiKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZWQoY2FjaGVkLmRhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fcmVmZXRjaChjYWNoZVN0cmF0ZWd5KTtcbiAgfVxuICBfc2V0KHZhbHVlKSB7XG4gICAgdGhpcy5fc3RvcmUuc2V0KHZhbHVlKTtcbiAgfVxuICBfc2V0QXN5bmModmFsdWUpIHtcbiAgICBjb25zdCBwcm9taXNlID0gcGVuZGluZyh2YWx1ZSk7XG4gICAgdGhpcy5fcGVuZGluZ1Byb21pc2UgPSBwcm9taXNlO1xuICAgIHJldHVybiBwZW5kaW5nKHRoaXMuX3N0b3JlLnNldEFzeW5jKHByb21pc2UpKTtcbiAgfVxuICBfcmVmZXRjaChjYWNoZVN0cmF0ZWd5KSB7XG4gICAgaWYgKGNhY2hlU3RyYXRlZ3kgPT09IFwicmVhZC13cml0ZVwiICYmIHRoaXMuX3BlbmRpbmdQcm9taXNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcGVuZGluZ1Byb21pc2U7XG4gICAgfVxuICAgIGNvbnN0IHByb21pc2UgPSBwZW5kaW5nKHRoaXMuX2ZldGNoZXIoKSk7XG4gICAgaWYgKGNhY2hlU3RyYXRlZ3kgPT09IFwibmV2ZXJcIikge1xuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIHJldHVybiBwZW5kaW5nKHRoaXMuX3NldEFzeW5jKHByb21pc2UpLnRoZW4oKCkgPT4gcHJvbWlzZSkpO1xuICB9XG4gIGZvcmNlU2V0Q2FjaGVkVmFsdWUodmFsdWUpIHtcbiAgICB0aGlzLl9zZXQodmFsdWUpO1xuICB9XG4gIGZvcmNlU2V0Q2FjaGVkVmFsdWVBc3luYyh2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLl9zZXRBc3luYyh2YWx1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIFJlZmV0Y2hlcyB0aGUgdmFsdWUgZnJvbSB0aGUgZmV0Y2hlciwgYW5kIHVwZGF0ZXMgdGhlIGNhY2hlIHdpdGggaXQuXG4gICAqL1xuICBhc3luYyByZWZyZXNoKCkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmdldE9yV2FpdChcIndyaXRlLW9ubHlcIik7XG4gIH1cbiAgLyoqXG4gICAqIEludmFsaWRhdGVzIHRoZSBjYWNoZSwgbWFya2luZyBpdCB0byByZWZyZXNoIG9uIHRoZSBuZXh0IHJlYWQuIElmIGFueW9uZSB3YXMgbGlzdGVuaW5nIHRvIGl0LCBpdCB3aWxsIHJlZnJlc2hcbiAgICogaW1tZWRpYXRlbHkuXG4gICAqL1xuICBpbnZhbGlkYXRlKCkge1xuICAgIHRoaXMuX3N0b3JlLnNldFVuYXZhaWxhYmxlKCk7XG4gICAgdGhpcy5fcGVuZGluZ1Byb21pc2UgPSB2b2lkIDA7XG4gICAgaWYgKHRoaXMuX3N1YnNjcmlwdGlvbnNDb3VudCA+IDApIHtcbiAgICAgIHJ1bkFzeW5jaHJvbm91c2x5KHRoaXMucmVmcmVzaCgpKTtcbiAgICB9XG4gIH1cbiAgb25TdGF0ZUNoYW5nZShjYWxsYmFjaykge1xuICAgIGNvbnN0IHN0b3JlT2JqID0gdGhpcy5fc3RvcmUub25DaGFuZ2UoY2FsbGJhY2spO1xuICAgIHJ1bkFzeW5jaHJvbm91c2x5KHRoaXMuZ2V0T3JXYWl0KFwicmVhZC13cml0ZVwiKSk7XG4gICAgaWYgKHRoaXMuX3N1YnNjcmlwdGlvbnNDb3VudCsrID09PSAwICYmIHRoaXMuX29wdGlvbnMub25TdWJzY3JpYmUpIHtcbiAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gdGhpcy5fb3B0aW9ucy5vblN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgIHJ1bkFzeW5jaHJvbm91c2x5KHRoaXMucmVmcmVzaCgpKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5fdW5zdWJzY3JpYmVycy5wdXNoKHVuc3Vic2NyaWJlKTtcbiAgICB9XG4gICAgbGV0IGhhc1Vuc3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgIHJldHVybiB7XG4gICAgICB1bnN1YnNjcmliZTogKCkgPT4ge1xuICAgICAgICBpZiAoaGFzVW5zdWJzY3JpYmVkKSByZXR1cm47XG4gICAgICAgIGhhc1Vuc3Vic2NyaWJlZCA9IHRydWU7XG4gICAgICAgIHN0b3JlT2JqLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIGlmICgtLXRoaXMuX3N1YnNjcmlwdGlvbnNDb3VudCA9PT0gMCkge1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnRSZWZyZXNoUHJvbWlzZUluZGV4ID0gKyt0aGlzLl9tb3N0UmVjZW50UmVmcmVzaFByb21pc2VJbmRleDtcbiAgICAgICAgICBydW5Bc3luY2hyb25vdXNseShhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB3YWl0KDVlMyk7XG4gICAgICAgICAgICBpZiAodGhpcy5fc3Vic2NyaXB0aW9uc0NvdW50ID09PSAwICYmIGN1cnJlbnRSZWZyZXNoUHJvbWlzZUluZGV4ID09PSB0aGlzLl9tb3N0UmVjZW50UmVmcmVzaFByb21pc2VJbmRleCkge1xuICAgICAgICAgICAgICB0aGlzLmludmFsaWRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBmb3IgKGNvbnN0IHVuc3Vic2NyaWJlIG9mIHRoaXMuX3Vuc3Vic2NyaWJlcnMpIHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxufTtcbmV4cG9ydCB7XG4gIEFzeW5jQ2FjaGUsXG4gIGNhY2hlRnVuY3Rpb25cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYWNoZXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/caches.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/compile-time.js":
/*!**************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/compile-time.js ***!
  \**************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   scrambleDuringCompileTime: () => (/* binding */ scrambleDuringCompileTime)\n/* harmony export */ });\n// src/utils/compile-time.tsx\nfunction scrambleDuringCompileTime(t) {\n  if (Math.random() < 1e-5 && Math.random() > 0.99999 && Math.random() < 1e-5 && Math.random() > 0.99999) {\n    return \"this will never happen\";\n  }\n  return t;\n}\n\n//# sourceMappingURL=compile-time.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvY29tcGlsZS10aW1lLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZngyZWRlbm9hc2lzL0Rvd25sb2Fkcy9EZXZlbG9wbWVudC9Fc3BhZGEvbm9kZV9tb2R1bGVzLy5wbnBtL0BzdGFja2ZyYW1lK3N0YWNrLXNoYXJlZEAyLjguNDFfQGF3cy1zZGsrY3JlZGVudGlhbC1wcm92aWRlci13ZWItaWRlbnRpdHlAMy45MDEuMF9AdHlwZV83NGRiYTAxZjZkODllNzIwODk2YjRkZjM0NTgzMzk5MC9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvZXNtL3V0aWxzL2NvbXBpbGUtdGltZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvY29tcGlsZS10aW1lLnRzeFxuZnVuY3Rpb24gc2NyYW1ibGVEdXJpbmdDb21waWxlVGltZSh0KSB7XG4gIGlmIChNYXRoLnJhbmRvbSgpIDwgMWUtNSAmJiBNYXRoLnJhbmRvbSgpID4gMC45OTk5OSAmJiBNYXRoLnJhbmRvbSgpIDwgMWUtNSAmJiBNYXRoLnJhbmRvbSgpID4gMC45OTk5OSkge1xuICAgIHJldHVybiBcInRoaXMgd2lsbCBuZXZlciBoYXBwZW5cIjtcbiAgfVxuICByZXR1cm4gdDtcbn1cbmV4cG9ydCB7XG4gIHNjcmFtYmxlRHVyaW5nQ29tcGlsZVRpbWVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21waWxlLXRpbWUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/compile-time.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/crypto.js":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/crypto.js ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decrypt: () => (/* binding */ decrypt),\n/* harmony export */   encrypt: () => (/* binding */ encrypt),\n/* harmony export */   generateRandomValues: () => (/* binding */ generateRandomValues),\n/* harmony export */   generateSecureRandomString: () => (/* binding */ generateSecureRandomString),\n/* harmony export */   hash: () => (/* binding */ hash),\n/* harmony export */   iteratedHash: () => (/* binding */ iteratedHash)\n/* harmony export */ });\n/* harmony import */ var _bytes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bytes.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/bytes.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./globals.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/globals.js\");\n/* harmony import */ var _results_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./results.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/results.js\");\n// src/utils/crypto.tsx\n\n\n\n\nfunction generateRandomValues(array) {\n  if (!_globals_js__WEBPACK_IMPORTED_MODULE_2__.globalVar.crypto) {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Crypto API is not available in this environment. Are you using an old browser?\");\n  }\n  if (!_globals_js__WEBPACK_IMPORTED_MODULE_2__.globalVar.crypto.getRandomValues) {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"crypto.getRandomValues is not available in this environment. Are you using an old browser?\");\n  }\n  return _globals_js__WEBPACK_IMPORTED_MODULE_2__.globalVar.crypto.getRandomValues(array);\n}\nfunction generateSecureRandomString(minBitsOfEntropy = 224) {\n  const base32CharactersCount = Math.ceil(minBitsOfEntropy / 5);\n  const bytesCount = Math.ceil(base32CharactersCount * 5 / 8);\n  const randomBytes = generateRandomValues(new Uint8Array(bytesCount));\n  const str = (0,_bytes_js__WEBPACK_IMPORTED_MODULE_0__.encodeBase32)(randomBytes);\n  return str.slice(str.length - base32CharactersCount).toLowerCase();\n}\nasync function getDerivedSymmetricKey(purpose, secret, salt) {\n  const originalSecretKey = await crypto.subtle.importKey(\"raw\", typeof secret === \"string\" ? new TextEncoder().encode(secret) : secret, \"HKDF\", false, [\"deriveKey\"]);\n  return await crypto.subtle.deriveKey(\n    {\n      name: \"HKDF\",\n      salt,\n      hash: \"SHA-256\",\n      info: new TextEncoder().encode(JSON.stringify([\n        \"stack-crypto-helper-derived-symmetric-key\",\n        purpose,\n        typeof secret === \"string\" ? \"string-key\" : \"binary-key\",\n        (0,_bytes_js__WEBPACK_IMPORTED_MODULE_0__.encodeBase64)(salt)\n      ]))\n    },\n    originalSecretKey,\n    { name: \"AES-GCM\", length: 256 },\n    false,\n    [\"encrypt\", \"decrypt\"]\n  );\n}\nasync function encrypt({ purpose, secret, value }) {\n  const iv = crypto.getRandomValues(new Uint8Array(12));\n  const salt = crypto.getRandomValues(new Uint8Array(16));\n  const derivedSecretKey = await getDerivedSymmetricKey(purpose, secret, salt);\n  const cipher = await crypto.subtle.encrypt({\n    name: \"AES-GCM\",\n    iv\n  }, derivedSecretKey, value);\n  const version = [1, 0];\n  return new Uint8Array([...version, ...salt, ...iv, ...new Uint8Array(cipher)]);\n}\nasync function decrypt({ purpose, secret, cipher }) {\n  const version = cipher.slice(0, 2);\n  if (version[0] !== 1 || version[1] !== 0) throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Invalid ciphertext version in decrypt(...); expected 0x0100\", { purpose });\n  const salt = cipher.slice(2, 18);\n  const iv = cipher.slice(18, 30);\n  const cipherBytes = cipher.slice(30);\n  const derivedSecretKey = await getDerivedSymmetricKey(purpose, secret, salt);\n  try {\n    const plaintext = await crypto.subtle.decrypt({\n      name: \"AES-GCM\",\n      iv\n    }, derivedSecretKey, cipherBytes);\n    return _results_js__WEBPACK_IMPORTED_MODULE_3__.Result.ok(new Uint8Array(plaintext));\n  } catch (e) {\n    if (e instanceof DOMException && e.name === \"OperationError\") {\n      return _results_js__WEBPACK_IMPORTED_MODULE_3__.Result.error(new Error(\"Invalid ciphertext or secret when decrypting encrypted value\", { cause: e }));\n    }\n    throw e;\n  }\n}\nasync function hash(options) {\n  return await iteratedHash({ ...options, iterations: 1 });\n}\nasync function iteratedHash(options) {\n  const stringOrUint8ArrayToUint8Array = (value) => typeof value === \"string\" ? new TextEncoder().encode(value) : value;\n  const stringOrUint8ArrayToBase64 = (value) => (0,_bytes_js__WEBPACK_IMPORTED_MODULE_0__.encodeBase64)(stringOrUint8ArrayToUint8Array(value));\n  const input = await crypto.subtle.importKey(\n    \"raw\",\n    stringOrUint8ArrayToUint8Array(options.value),\n    \"PBKDF2\",\n    false,\n    [\"deriveBits\"]\n  );\n  return new Uint8Array(await crypto.subtle.deriveBits({\n    name: \"PBKDF2\",\n    salt: new TextEncoder().encode(JSON.stringify([\n      \"stack-crypto-helper-iterated-hash\",\n      options.purpose,\n      stringOrUint8ArrayToBase64(options.salt ?? \"\"),\n      stringOrUint8ArrayToBase64(options.extra ?? \"\")\n    ])),\n    iterations: options.iterations,\n    hash: \"SHA-256\"\n  }, input, 256));\n}\n\n//# sourceMappingURL=crypto.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvY3J5cHRvLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUN3RDtBQUNOO0FBQ1Q7QUFDSDtBQUN0QztBQUNBLE9BQU8sa0RBQVM7QUFDaEIsY0FBYywyREFBbUI7QUFDakM7QUFDQSxPQUFPLGtEQUFTO0FBQ2hCLGNBQWMsMkRBQW1CO0FBQ2pDO0FBQ0EsU0FBUyxrREFBUztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx1REFBWTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdURBQVk7QUFDcEI7QUFDQSxLQUFLO0FBQ0w7QUFDQSxNQUFNLDhCQUE4QjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix3QkFBd0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix5QkFBeUI7QUFDbEQ7QUFDQSxzREFBc0QsMkRBQW1CLDhDQUE4QyxvQkFBb0IsU0FBUztBQUNwSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFdBQVcsK0NBQU07QUFDakIsSUFBSTtBQUNKO0FBQ0EsYUFBYSwrQ0FBTSxtRkFBbUYsVUFBVTtBQUNoSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDJCQUEyQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsdURBQVk7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQVFFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZngyZWRlbm9hc2lzL0Rvd25sb2Fkcy9EZXZlbG9wbWVudC9Fc3BhZGEvbm9kZV9tb2R1bGVzLy5wbnBtL0BzdGFja2ZyYW1lK3N0YWNrLXNoYXJlZEAyLjguNDFfQGF3cy1zZGsrY3JlZGVudGlhbC1wcm92aWRlci13ZWItaWRlbnRpdHlAMy45MDEuMF9AdHlwZV83NGRiYTAxZjZkODllNzIwODk2YjRkZjM0NTgzMzk5MC9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvZXNtL3V0aWxzL2NyeXB0by5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvY3J5cHRvLnRzeFxuaW1wb3J0IHsgZW5jb2RlQmFzZTMyLCBlbmNvZGVCYXNlNjQgfSBmcm9tIFwiLi9ieXRlcy5qc1wiO1xuaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciB9IGZyb20gXCIuL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgZ2xvYmFsVmFyIH0gZnJvbSBcIi4vZ2xvYmFscy5qc1wiO1xuaW1wb3J0IHsgUmVzdWx0IH0gZnJvbSBcIi4vcmVzdWx0cy5qc1wiO1xuZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21WYWx1ZXMoYXJyYXkpIHtcbiAgaWYgKCFnbG9iYWxWYXIuY3J5cHRvKSB7XG4gICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJDcnlwdG8gQVBJIGlzIG5vdCBhdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudC4gQXJlIHlvdSB1c2luZyBhbiBvbGQgYnJvd3Nlcj9cIik7XG4gIH1cbiAgaWYgKCFnbG9iYWxWYXIuY3J5cHRvLmdldFJhbmRvbVZhbHVlcykge1xuICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiY3J5cHRvLmdldFJhbmRvbVZhbHVlcyBpcyBub3QgYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQuIEFyZSB5b3UgdXNpbmcgYW4gb2xkIGJyb3dzZXI/XCIpO1xuICB9XG4gIHJldHVybiBnbG9iYWxWYXIuY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhhcnJheSk7XG59XG5mdW5jdGlvbiBnZW5lcmF0ZVNlY3VyZVJhbmRvbVN0cmluZyhtaW5CaXRzT2ZFbnRyb3B5ID0gMjI0KSB7XG4gIGNvbnN0IGJhc2UzMkNoYXJhY3RlcnNDb3VudCA9IE1hdGguY2VpbChtaW5CaXRzT2ZFbnRyb3B5IC8gNSk7XG4gIGNvbnN0IGJ5dGVzQ291bnQgPSBNYXRoLmNlaWwoYmFzZTMyQ2hhcmFjdGVyc0NvdW50ICogNSAvIDgpO1xuICBjb25zdCByYW5kb21CeXRlcyA9IGdlbmVyYXRlUmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KGJ5dGVzQ291bnQpKTtcbiAgY29uc3Qgc3RyID0gZW5jb2RlQmFzZTMyKHJhbmRvbUJ5dGVzKTtcbiAgcmV0dXJuIHN0ci5zbGljZShzdHIubGVuZ3RoIC0gYmFzZTMyQ2hhcmFjdGVyc0NvdW50KS50b0xvd2VyQ2FzZSgpO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0RGVyaXZlZFN5bW1ldHJpY0tleShwdXJwb3NlLCBzZWNyZXQsIHNhbHQpIHtcbiAgY29uc3Qgb3JpZ2luYWxTZWNyZXRLZXkgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmltcG9ydEtleShcInJhd1wiLCB0eXBlb2Ygc2VjcmV0ID09PSBcInN0cmluZ1wiID8gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHNlY3JldCkgOiBzZWNyZXQsIFwiSEtERlwiLCBmYWxzZSwgW1wiZGVyaXZlS2V5XCJdKTtcbiAgcmV0dXJuIGF3YWl0IGNyeXB0by5zdWJ0bGUuZGVyaXZlS2V5KFxuICAgIHtcbiAgICAgIG5hbWU6IFwiSEtERlwiLFxuICAgICAgc2FsdCxcbiAgICAgIGhhc2g6IFwiU0hBLTI1NlwiLFxuICAgICAgaW5mbzogbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKEpTT04uc3RyaW5naWZ5KFtcbiAgICAgICAgXCJzdGFjay1jcnlwdG8taGVscGVyLWRlcml2ZWQtc3ltbWV0cmljLWtleVwiLFxuICAgICAgICBwdXJwb3NlLFxuICAgICAgICB0eXBlb2Ygc2VjcmV0ID09PSBcInN0cmluZ1wiID8gXCJzdHJpbmcta2V5XCIgOiBcImJpbmFyeS1rZXlcIixcbiAgICAgICAgZW5jb2RlQmFzZTY0KHNhbHQpXG4gICAgICBdKSlcbiAgICB9LFxuICAgIG9yaWdpbmFsU2VjcmV0S2V5LFxuICAgIHsgbmFtZTogXCJBRVMtR0NNXCIsIGxlbmd0aDogMjU2IH0sXG4gICAgZmFsc2UsXG4gICAgW1wiZW5jcnlwdFwiLCBcImRlY3J5cHRcIl1cbiAgKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGVuY3J5cHQoeyBwdXJwb3NlLCBzZWNyZXQsIHZhbHVlIH0pIHtcbiAgY29uc3QgaXYgPSBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDEyKSk7XG4gIGNvbnN0IHNhbHQgPSBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDE2KSk7XG4gIGNvbnN0IGRlcml2ZWRTZWNyZXRLZXkgPSBhd2FpdCBnZXREZXJpdmVkU3ltbWV0cmljS2V5KHB1cnBvc2UsIHNlY3JldCwgc2FsdCk7XG4gIGNvbnN0IGNpcGhlciA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZW5jcnlwdCh7XG4gICAgbmFtZTogXCJBRVMtR0NNXCIsXG4gICAgaXZcbiAgfSwgZGVyaXZlZFNlY3JldEtleSwgdmFsdWUpO1xuICBjb25zdCB2ZXJzaW9uID0gWzEsIDBdO1xuICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoWy4uLnZlcnNpb24sIC4uLnNhbHQsIC4uLml2LCAuLi5uZXcgVWludDhBcnJheShjaXBoZXIpXSk7XG59XG5hc3luYyBmdW5jdGlvbiBkZWNyeXB0KHsgcHVycG9zZSwgc2VjcmV0LCBjaXBoZXIgfSkge1xuICBjb25zdCB2ZXJzaW9uID0gY2lwaGVyLnNsaWNlKDAsIDIpO1xuICBpZiAodmVyc2lvblswXSAhPT0gMSB8fCB2ZXJzaW9uWzFdICE9PSAwKSB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkludmFsaWQgY2lwaGVydGV4dCB2ZXJzaW9uIGluIGRlY3J5cHQoLi4uKTsgZXhwZWN0ZWQgMHgwMTAwXCIsIHsgcHVycG9zZSB9KTtcbiAgY29uc3Qgc2FsdCA9IGNpcGhlci5zbGljZSgyLCAxOCk7XG4gIGNvbnN0IGl2ID0gY2lwaGVyLnNsaWNlKDE4LCAzMCk7XG4gIGNvbnN0IGNpcGhlckJ5dGVzID0gY2lwaGVyLnNsaWNlKDMwKTtcbiAgY29uc3QgZGVyaXZlZFNlY3JldEtleSA9IGF3YWl0IGdldERlcml2ZWRTeW1tZXRyaWNLZXkocHVycG9zZSwgc2VjcmV0LCBzYWx0KTtcbiAgdHJ5IHtcbiAgICBjb25zdCBwbGFpbnRleHQgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmRlY3J5cHQoe1xuICAgICAgbmFtZTogXCJBRVMtR0NNXCIsXG4gICAgICBpdlxuICAgIH0sIGRlcml2ZWRTZWNyZXRLZXksIGNpcGhlckJ5dGVzKTtcbiAgICByZXR1cm4gUmVzdWx0Lm9rKG5ldyBVaW50OEFycmF5KHBsYWludGV4dCkpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKGUgaW5zdGFuY2VvZiBET01FeGNlcHRpb24gJiYgZS5uYW1lID09PSBcIk9wZXJhdGlvbkVycm9yXCIpIHtcbiAgICAgIHJldHVybiBSZXN1bHQuZXJyb3IobmV3IEVycm9yKFwiSW52YWxpZCBjaXBoZXJ0ZXh0IG9yIHNlY3JldCB3aGVuIGRlY3J5cHRpbmcgZW5jcnlwdGVkIHZhbHVlXCIsIHsgY2F1c2U6IGUgfSkpO1xuICAgIH1cbiAgICB0aHJvdyBlO1xuICB9XG59XG5hc3luYyBmdW5jdGlvbiBoYXNoKG9wdGlvbnMpIHtcbiAgcmV0dXJuIGF3YWl0IGl0ZXJhdGVkSGFzaCh7IC4uLm9wdGlvbnMsIGl0ZXJhdGlvbnM6IDEgfSk7XG59XG5hc3luYyBmdW5jdGlvbiBpdGVyYXRlZEhhc2gob3B0aW9ucykge1xuICBjb25zdCBzdHJpbmdPclVpbnQ4QXJyYXlUb1VpbnQ4QXJyYXkgPSAodmFsdWUpID0+IHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiA/IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZSh2YWx1ZSkgOiB2YWx1ZTtcbiAgY29uc3Qgc3RyaW5nT3JVaW50OEFycmF5VG9CYXNlNjQgPSAodmFsdWUpID0+IGVuY29kZUJhc2U2NChzdHJpbmdPclVpbnQ4QXJyYXlUb1VpbnQ4QXJyYXkodmFsdWUpKTtcbiAgY29uc3QgaW5wdXQgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmltcG9ydEtleShcbiAgICBcInJhd1wiLFxuICAgIHN0cmluZ09yVWludDhBcnJheVRvVWludDhBcnJheShvcHRpb25zLnZhbHVlKSxcbiAgICBcIlBCS0RGMlwiLFxuICAgIGZhbHNlLFxuICAgIFtcImRlcml2ZUJpdHNcIl1cbiAgKTtcbiAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGF3YWl0IGNyeXB0by5zdWJ0bGUuZGVyaXZlQml0cyh7XG4gICAgbmFtZTogXCJQQktERjJcIixcbiAgICBzYWx0OiBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoSlNPTi5zdHJpbmdpZnkoW1xuICAgICAgXCJzdGFjay1jcnlwdG8taGVscGVyLWl0ZXJhdGVkLWhhc2hcIixcbiAgICAgIG9wdGlvbnMucHVycG9zZSxcbiAgICAgIHN0cmluZ09yVWludDhBcnJheVRvQmFzZTY0KG9wdGlvbnMuc2FsdCA/PyBcIlwiKSxcbiAgICAgIHN0cmluZ09yVWludDhBcnJheVRvQmFzZTY0KG9wdGlvbnMuZXh0cmEgPz8gXCJcIilcbiAgICBdKSksXG4gICAgaXRlcmF0aW9uczogb3B0aW9ucy5pdGVyYXRpb25zLFxuICAgIGhhc2g6IFwiU0hBLTI1NlwiXG4gIH0sIGlucHV0LCAyNTYpKTtcbn1cbmV4cG9ydCB7XG4gIGRlY3J5cHQsXG4gIGVuY3J5cHQsXG4gIGdlbmVyYXRlUmFuZG9tVmFsdWVzLFxuICBnZW5lcmF0ZVNlY3VyZVJhbmRvbVN0cmluZyxcbiAgaGFzaCxcbiAgaXRlcmF0ZWRIYXNoXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3J5cHRvLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/crypto.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/currency-constants.js":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/currency-constants.js ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SUPPORTED_CURRENCIES: () => (/* binding */ SUPPORTED_CURRENCIES)\n/* harmony export */ });\n// src/utils/currency-constants.tsx\nvar SUPPORTED_CURRENCIES = [\n  {\n    code: \"USD\",\n    decimals: 2,\n    stripeDecimals: 2\n  },\n  {\n    code: \"EUR\",\n    decimals: 2,\n    stripeDecimals: 2\n  },\n  {\n    code: \"GBP\",\n    decimals: 2,\n    stripeDecimals: 2\n  },\n  {\n    code: \"JPY\",\n    decimals: 0,\n    stripeDecimals: 0\n  },\n  {\n    code: \"INR\",\n    decimals: 2,\n    stripeDecimals: 2\n  },\n  {\n    code: \"AUD\",\n    decimals: 2,\n    stripeDecimals: 2\n  },\n  {\n    code: \"CAD\",\n    decimals: 2,\n    stripeDecimals: 2\n  }\n];\n\n//# sourceMappingURL=currency-constants.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvY3VycmVuY3ktY29uc3RhbnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2dmeDJlZGVub2FzaXMvRG93bmxvYWRzL0RldmVsb3BtZW50L0VzcGFkYS9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvY3VycmVuY3ktY29uc3RhbnRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy9jdXJyZW5jeS1jb25zdGFudHMudHN4XG52YXIgU1VQUE9SVEVEX0NVUlJFTkNJRVMgPSBbXG4gIHtcbiAgICBjb2RlOiBcIlVTRFwiLFxuICAgIGRlY2ltYWxzOiAyLFxuICAgIHN0cmlwZURlY2ltYWxzOiAyXG4gIH0sXG4gIHtcbiAgICBjb2RlOiBcIkVVUlwiLFxuICAgIGRlY2ltYWxzOiAyLFxuICAgIHN0cmlwZURlY2ltYWxzOiAyXG4gIH0sXG4gIHtcbiAgICBjb2RlOiBcIkdCUFwiLFxuICAgIGRlY2ltYWxzOiAyLFxuICAgIHN0cmlwZURlY2ltYWxzOiAyXG4gIH0sXG4gIHtcbiAgICBjb2RlOiBcIkpQWVwiLFxuICAgIGRlY2ltYWxzOiAwLFxuICAgIHN0cmlwZURlY2ltYWxzOiAwXG4gIH0sXG4gIHtcbiAgICBjb2RlOiBcIklOUlwiLFxuICAgIGRlY2ltYWxzOiAyLFxuICAgIHN0cmlwZURlY2ltYWxzOiAyXG4gIH0sXG4gIHtcbiAgICBjb2RlOiBcIkFVRFwiLFxuICAgIGRlY2ltYWxzOiAyLFxuICAgIHN0cmlwZURlY2ltYWxzOiAyXG4gIH0sXG4gIHtcbiAgICBjb2RlOiBcIkNBRFwiLFxuICAgIGRlY2ltYWxzOiAyLFxuICAgIHN0cmlwZURlY2ltYWxzOiAyXG4gIH1cbl07XG5leHBvcnQge1xuICBTVVBQT1JURURfQ1VSUkVOQ0lFU1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWN1cnJlbmN5LWNvbnN0YW50cy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/currency-constants.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/dates.js":
/*!*******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/dates.js ***!
  \*******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FAR_FUTURE_DATE: () => (/* binding */ FAR_FUTURE_DATE),\n/* harmony export */   addInterval: () => (/* binding */ addInterval),\n/* harmony export */   fromNow: () => (/* binding */ fromNow),\n/* harmony export */   fromNowDetailed: () => (/* binding */ fromNowDetailed),\n/* harmony export */   getInputDatetimeLocalString: () => (/* binding */ getInputDatetimeLocalString),\n/* harmony export */   getIntervalsElapsed: () => (/* binding */ getIntervalsElapsed),\n/* harmony export */   isWeekend: () => (/* binding */ isWeekend),\n/* harmony export */   subtractInterval: () => (/* binding */ subtractInterval)\n/* harmony export */ });\n/* harmony import */ var _schema_fields_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../schema-fields.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/schema-fields.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n/* harmony import */ var _math_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./math.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/math.js\");\n// src/utils/dates.tsx\n\n\n\nfunction isWeekend(date) {\n  return date.getDay() === 0 || date.getDay() === 6;\n}\nvar agoUnits = [\n  [60, \"second\"],\n  [60, \"minute\"],\n  [24, \"hour\"],\n  [7, \"day\"],\n  [5, \"week\"]\n];\nfunction fromNow(date) {\n  return fromNowDetailed(date).result;\n}\nfunction fromNowDetailed(date) {\n  if (!(date instanceof Date)) {\n    throw new Error(`fromNow only accepts Date objects (received: ${date})`);\n  }\n  const now = /* @__PURE__ */ new Date();\n  const elapsed = now.getTime() - date.getTime();\n  let remainingInUnit = Math.abs(elapsed) / 1e3;\n  if (remainingInUnit < 15) {\n    return {\n      result: \"just now\",\n      secondsUntilChange: 15 - remainingInUnit\n    };\n  }\n  let unitInSeconds = 1;\n  for (const [nextUnitSize, unitName] of agoUnits) {\n    const rounded = Math.round(remainingInUnit);\n    if (rounded < nextUnitSize) {\n      if (elapsed < 0) {\n        return {\n          result: `in ${rounded} ${unitName}${rounded === 1 ? \"\" : \"s\"}`,\n          secondsUntilChange: (0,_math_js__WEBPACK_IMPORTED_MODULE_2__.remainder)((remainingInUnit - rounded + 0.5) * unitInSeconds, unitInSeconds)\n        };\n      } else {\n        return {\n          result: `${rounded} ${unitName}${rounded === 1 ? \"\" : \"s\"} ago`,\n          secondsUntilChange: (0,_math_js__WEBPACK_IMPORTED_MODULE_2__.remainder)((rounded - remainingInUnit - 0.5) * unitInSeconds, unitInSeconds)\n        };\n      }\n    }\n    unitInSeconds *= nextUnitSize;\n    remainingInUnit /= nextUnitSize;\n  }\n  return {\n    result: date.toLocaleDateString(\"en-US\", { year: \"numeric\", month: \"short\", day: \"numeric\" }),\n    secondsUntilChange: Infinity\n  };\n}\nfunction getInputDatetimeLocalString(date) {\n  date = new Date(date);\n  date.setMinutes(date.getMinutes() - date.getTimezoneOffset());\n  return date.toISOString().slice(0, 19);\n}\nfunction applyInterval(date, times, interval) {\n  if (!_schema_fields_js__WEBPACK_IMPORTED_MODULE_0__.intervalSchema.isValidSync(interval)) {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(`Invalid interval`, { interval });\n  }\n  const [amount, unit] = interval;\n  switch (unit) {\n    case \"millisecond\": {\n      date.setMilliseconds(date.getMilliseconds() + amount * times);\n      break;\n    }\n    case \"second\": {\n      date.setSeconds(date.getSeconds() + amount * times);\n      break;\n    }\n    case \"minute\": {\n      date.setMinutes(date.getMinutes() + amount * times);\n      break;\n    }\n    case \"hour\": {\n      date.setHours(date.getHours() + amount * times);\n      break;\n    }\n    case \"day\": {\n      date.setDate(date.getDate() + amount * times);\n      break;\n    }\n    case \"week\": {\n      date.setDate(date.getDate() + amount * times * 7);\n      break;\n    }\n    case \"month\": {\n      date.setMonth(date.getMonth() + amount * times);\n      break;\n    }\n    case \"year\": {\n      date.setFullYear(date.getFullYear() + amount * times);\n      break;\n    }\n    default: {\n      throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(`Invalid interval despite schema validation`, { interval });\n    }\n  }\n  return date;\n}\nfunction subtractInterval(date, interval) {\n  return applyInterval(date, -1, interval);\n}\nfunction addInterval(date, interval) {\n  return applyInterval(date, 1, interval);\n}\nvar FAR_FUTURE_DATE = /* @__PURE__ */ new Date(864e13);\nfunction getMsPerDayIntervalUnit(unit) {\n  if (unit === \"day\") {\n    return 24 * 60 * 60 * 1e3;\n  }\n  return 7 * 24 * 60 * 60 * 1e3;\n}\nfunction getIntervalsElapsed(anchor, to, repeat) {\n  const [amount, unit] = repeat;\n  if (to <= anchor) return 0;\n  if (unit === \"day\" || unit === \"week\") {\n    const msPerUnit = getMsPerDayIntervalUnit(unit);\n    const diffMs = to.getTime() - anchor.getTime();\n    return Math.floor(diffMs / (msPerUnit * amount));\n  }\n  if ([\"month\", \"year\"].includes(unit)) {\n    let count = 0;\n    let current = new Date(anchor);\n    for (; ; ) {\n      const next = addInterval(new Date(current), [amount, unit]);\n      if (next > to) break;\n      current = next;\n      count += 1;\n    }\n    return count;\n  }\n  return 0;\n}\n\n//# sourceMappingURL=dates.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvZGF0ZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNxRDtBQUNIO0FBQ1o7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FLEtBQUs7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsU0FBUyxFQUFFLFNBQVMsRUFBRSx5QkFBeUI7QUFDdkUsOEJBQThCLG1EQUFTO0FBQ3ZDO0FBQ0EsUUFBUTtBQUNSO0FBQ0EscUJBQXFCLFNBQVMsRUFBRSxTQUFTLEVBQUUsMEJBQTBCO0FBQ3JFLDhCQUE4QixtREFBUztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxpREFBaUQ7QUFDaEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyw2REFBYztBQUNyQixjQUFjLDJEQUFtQix1QkFBdUIsVUFBVTtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMkRBQW1CLGlEQUFpRCxVQUFVO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVVFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZngyZWRlbm9hc2lzL0Rvd25sb2Fkcy9EZXZlbG9wbWVudC9Fc3BhZGEvbm9kZV9tb2R1bGVzLy5wbnBtL0BzdGFja2ZyYW1lK3N0YWNrLXNoYXJlZEAyLjguNDFfQGF3cy1zZGsrY3JlZGVudGlhbC1wcm92aWRlci13ZWItaWRlbnRpdHlAMy45MDEuMF9AdHlwZV83NGRiYTAxZjZkODllNzIwODk2YjRkZjM0NTgzMzk5MC9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvZXNtL3V0aWxzL2RhdGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy9kYXRlcy50c3hcbmltcG9ydCB7IGludGVydmFsU2NoZW1hIH0gZnJvbSBcIi4uL3NjaGVtYS1maWVsZHMuanNcIjtcbmltcG9ydCB7IFN0YWNrQXNzZXJ0aW9uRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IHJlbWFpbmRlciB9IGZyb20gXCIuL21hdGguanNcIjtcbmZ1bmN0aW9uIGlzV2Vla2VuZChkYXRlKSB7XG4gIHJldHVybiBkYXRlLmdldERheSgpID09PSAwIHx8IGRhdGUuZ2V0RGF5KCkgPT09IDY7XG59XG52YXIgYWdvVW5pdHMgPSBbXG4gIFs2MCwgXCJzZWNvbmRcIl0sXG4gIFs2MCwgXCJtaW51dGVcIl0sXG4gIFsyNCwgXCJob3VyXCJdLFxuICBbNywgXCJkYXlcIl0sXG4gIFs1LCBcIndlZWtcIl1cbl07XG5mdW5jdGlvbiBmcm9tTm93KGRhdGUpIHtcbiAgcmV0dXJuIGZyb21Ob3dEZXRhaWxlZChkYXRlKS5yZXN1bHQ7XG59XG5mdW5jdGlvbiBmcm9tTm93RGV0YWlsZWQoZGF0ZSkge1xuICBpZiAoIShkYXRlIGluc3RhbmNlb2YgRGF0ZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYGZyb21Ob3cgb25seSBhY2NlcHRzIERhdGUgb2JqZWN0cyAocmVjZWl2ZWQ6ICR7ZGF0ZX0pYCk7XG4gIH1cbiAgY29uc3Qgbm93ID0gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCk7XG4gIGNvbnN0IGVsYXBzZWQgPSBub3cuZ2V0VGltZSgpIC0gZGF0ZS5nZXRUaW1lKCk7XG4gIGxldCByZW1haW5pbmdJblVuaXQgPSBNYXRoLmFicyhlbGFwc2VkKSAvIDFlMztcbiAgaWYgKHJlbWFpbmluZ0luVW5pdCA8IDE1KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3VsdDogXCJqdXN0IG5vd1wiLFxuICAgICAgc2Vjb25kc1VudGlsQ2hhbmdlOiAxNSAtIHJlbWFpbmluZ0luVW5pdFxuICAgIH07XG4gIH1cbiAgbGV0IHVuaXRJblNlY29uZHMgPSAxO1xuICBmb3IgKGNvbnN0IFtuZXh0VW5pdFNpemUsIHVuaXROYW1lXSBvZiBhZ29Vbml0cykge1xuICAgIGNvbnN0IHJvdW5kZWQgPSBNYXRoLnJvdW5kKHJlbWFpbmluZ0luVW5pdCk7XG4gICAgaWYgKHJvdW5kZWQgPCBuZXh0VW5pdFNpemUpIHtcbiAgICAgIGlmIChlbGFwc2VkIDwgMCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHJlc3VsdDogYGluICR7cm91bmRlZH0gJHt1bml0TmFtZX0ke3JvdW5kZWQgPT09IDEgPyBcIlwiIDogXCJzXCJ9YCxcbiAgICAgICAgICBzZWNvbmRzVW50aWxDaGFuZ2U6IHJlbWFpbmRlcigocmVtYWluaW5nSW5Vbml0IC0gcm91bmRlZCArIDAuNSkgKiB1bml0SW5TZWNvbmRzLCB1bml0SW5TZWNvbmRzKVxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICByZXN1bHQ6IGAke3JvdW5kZWR9ICR7dW5pdE5hbWV9JHtyb3VuZGVkID09PSAxID8gXCJcIiA6IFwic1wifSBhZ29gLFxuICAgICAgICAgIHNlY29uZHNVbnRpbENoYW5nZTogcmVtYWluZGVyKChyb3VuZGVkIC0gcmVtYWluaW5nSW5Vbml0IC0gMC41KSAqIHVuaXRJblNlY29uZHMsIHVuaXRJblNlY29uZHMpXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICAgIHVuaXRJblNlY29uZHMgKj0gbmV4dFVuaXRTaXplO1xuICAgIHJlbWFpbmluZ0luVW5pdCAvPSBuZXh0VW5pdFNpemU7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICByZXN1bHQ6IGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKFwiZW4tVVNcIiwgeyB5ZWFyOiBcIm51bWVyaWNcIiwgbW9udGg6IFwic2hvcnRcIiwgZGF5OiBcIm51bWVyaWNcIiB9KSxcbiAgICBzZWNvbmRzVW50aWxDaGFuZ2U6IEluZmluaXR5XG4gIH07XG59XG5mdW5jdGlvbiBnZXRJbnB1dERhdGV0aW1lTG9jYWxTdHJpbmcoZGF0ZSkge1xuICBkYXRlID0gbmV3IERhdGUoZGF0ZSk7XG4gIGRhdGUuc2V0TWludXRlcyhkYXRlLmdldE1pbnV0ZXMoKSAtIGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKSk7XG4gIHJldHVybiBkYXRlLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTkpO1xufVxuZnVuY3Rpb24gYXBwbHlJbnRlcnZhbChkYXRlLCB0aW1lcywgaW50ZXJ2YWwpIHtcbiAgaWYgKCFpbnRlcnZhbFNjaGVtYS5pc1ZhbGlkU3luYyhpbnRlcnZhbCkpIHtcbiAgICB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihgSW52YWxpZCBpbnRlcnZhbGAsIHsgaW50ZXJ2YWwgfSk7XG4gIH1cbiAgY29uc3QgW2Ftb3VudCwgdW5pdF0gPSBpbnRlcnZhbDtcbiAgc3dpdGNoICh1bml0KSB7XG4gICAgY2FzZSBcIm1pbGxpc2Vjb25kXCI6IHtcbiAgICAgIGRhdGUuc2V0TWlsbGlzZWNvbmRzKGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCkgKyBhbW91bnQgKiB0aW1lcyk7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSBcInNlY29uZFwiOiB7XG4gICAgICBkYXRlLnNldFNlY29uZHMoZGF0ZS5nZXRTZWNvbmRzKCkgKyBhbW91bnQgKiB0aW1lcyk7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSBcIm1pbnV0ZVwiOiB7XG4gICAgICBkYXRlLnNldE1pbnV0ZXMoZGF0ZS5nZXRNaW51dGVzKCkgKyBhbW91bnQgKiB0aW1lcyk7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSBcImhvdXJcIjoge1xuICAgICAgZGF0ZS5zZXRIb3VycyhkYXRlLmdldEhvdXJzKCkgKyBhbW91bnQgKiB0aW1lcyk7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSBcImRheVwiOiB7XG4gICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyBhbW91bnQgKiB0aW1lcyk7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSBcIndlZWtcIjoge1xuICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpICsgYW1vdW50ICogdGltZXMgKiA3KTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlIFwibW9udGhcIjoge1xuICAgICAgZGF0ZS5zZXRNb250aChkYXRlLmdldE1vbnRoKCkgKyBhbW91bnQgKiB0aW1lcyk7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSBcInllYXJcIjoge1xuICAgICAgZGF0ZS5zZXRGdWxsWWVhcihkYXRlLmdldEZ1bGxZZWFyKCkgKyBhbW91bnQgKiB0aW1lcyk7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgZGVmYXVsdDoge1xuICAgICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoYEludmFsaWQgaW50ZXJ2YWwgZGVzcGl0ZSBzY2hlbWEgdmFsaWRhdGlvbmAsIHsgaW50ZXJ2YWwgfSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBkYXRlO1xufVxuZnVuY3Rpb24gc3VidHJhY3RJbnRlcnZhbChkYXRlLCBpbnRlcnZhbCkge1xuICByZXR1cm4gYXBwbHlJbnRlcnZhbChkYXRlLCAtMSwgaW50ZXJ2YWwpO1xufVxuZnVuY3Rpb24gYWRkSW50ZXJ2YWwoZGF0ZSwgaW50ZXJ2YWwpIHtcbiAgcmV0dXJuIGFwcGx5SW50ZXJ2YWwoZGF0ZSwgMSwgaW50ZXJ2YWwpO1xufVxudmFyIEZBUl9GVVRVUkVfREFURSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSg4NjRlMTMpO1xuZnVuY3Rpb24gZ2V0TXNQZXJEYXlJbnRlcnZhbFVuaXQodW5pdCkge1xuICBpZiAodW5pdCA9PT0gXCJkYXlcIikge1xuICAgIHJldHVybiAyNCAqIDYwICogNjAgKiAxZTM7XG4gIH1cbiAgcmV0dXJuIDcgKiAyNCAqIDYwICogNjAgKiAxZTM7XG59XG5mdW5jdGlvbiBnZXRJbnRlcnZhbHNFbGFwc2VkKGFuY2hvciwgdG8sIHJlcGVhdCkge1xuICBjb25zdCBbYW1vdW50LCB1bml0XSA9IHJlcGVhdDtcbiAgaWYgKHRvIDw9IGFuY2hvcikgcmV0dXJuIDA7XG4gIGlmICh1bml0ID09PSBcImRheVwiIHx8IHVuaXQgPT09IFwid2Vla1wiKSB7XG4gICAgY29uc3QgbXNQZXJVbml0ID0gZ2V0TXNQZXJEYXlJbnRlcnZhbFVuaXQodW5pdCk7XG4gICAgY29uc3QgZGlmZk1zID0gdG8uZ2V0VGltZSgpIC0gYW5jaG9yLmdldFRpbWUoKTtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihkaWZmTXMgLyAobXNQZXJVbml0ICogYW1vdW50KSk7XG4gIH1cbiAgaWYgKFtcIm1vbnRoXCIsIFwieWVhclwiXS5pbmNsdWRlcyh1bml0KSkge1xuICAgIGxldCBjb3VudCA9IDA7XG4gICAgbGV0IGN1cnJlbnQgPSBuZXcgRGF0ZShhbmNob3IpO1xuICAgIGZvciAoOyA7ICkge1xuICAgICAgY29uc3QgbmV4dCA9IGFkZEludGVydmFsKG5ldyBEYXRlKGN1cnJlbnQpLCBbYW1vdW50LCB1bml0XSk7XG4gICAgICBpZiAobmV4dCA+IHRvKSBicmVhaztcbiAgICAgIGN1cnJlbnQgPSBuZXh0O1xuICAgICAgY291bnQgKz0gMTtcbiAgICB9XG4gICAgcmV0dXJuIGNvdW50O1xuICB9XG4gIHJldHVybiAwO1xufVxuZXhwb3J0IHtcbiAgRkFSX0ZVVFVSRV9EQVRFLFxuICBhZGRJbnRlcnZhbCxcbiAgZnJvbU5vdyxcbiAgZnJvbU5vd0RldGFpbGVkLFxuICBnZXRJbnB1dERhdGV0aW1lTG9jYWxTdHJpbmcsXG4gIGdldEludGVydmFsc0VsYXBzZWQsXG4gIGlzV2Vla2VuZCxcbiAgc3VidHJhY3RJbnRlcnZhbFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGVzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/dates.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/dom.js":
/*!*****************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/dom.js ***!
  \*****************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hasClickableParent: () => (/* binding */ hasClickableParent)\n/* harmony export */ });\n// src/utils/dom.tsx\nfunction hasClickableParent(element) {\n  const parent = element.parentElement;\n  if (!parent) return false;\n  if (parent.dataset.n2Clickable) return true;\n  return hasClickableParent(element.parentElement);\n}\n\n//# sourceMappingURL=dom.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvZG9tLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZngyZWRlbm9hc2lzL0Rvd25sb2Fkcy9EZXZlbG9wbWVudC9Fc3BhZGEvbm9kZV9tb2R1bGVzLy5wbnBtL0BzdGFja2ZyYW1lK3N0YWNrLXNoYXJlZEAyLjguNDFfQGF3cy1zZGsrY3JlZGVudGlhbC1wcm92aWRlci13ZWItaWRlbnRpdHlAMy45MDEuMF9AdHlwZV83NGRiYTAxZjZkODllNzIwODk2YjRkZjM0NTgzMzk5MC9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvZXNtL3V0aWxzL2RvbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvZG9tLnRzeFxuZnVuY3Rpb24gaGFzQ2xpY2thYmxlUGFyZW50KGVsZW1lbnQpIHtcbiAgY29uc3QgcGFyZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICBpZiAoIXBhcmVudCkgcmV0dXJuIGZhbHNlO1xuICBpZiAocGFyZW50LmRhdGFzZXQubjJDbGlja2FibGUpIHJldHVybiB0cnVlO1xuICByZXR1cm4gaGFzQ2xpY2thYmxlUGFyZW50KGVsZW1lbnQucGFyZW50RWxlbWVudCk7XG59XG5leHBvcnQge1xuICBoYXNDbGlja2FibGVQYXJlbnRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kb20uanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/dom.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/env.js":
/*!*****************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/env.js ***!
  \*****************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnvVariable: () => (/* binding */ getEnvVariable),\n/* harmony export */   getNextRuntime: () => (/* binding */ getNextRuntime),\n/* harmony export */   getNodeEnvironment: () => (/* binding */ getNodeEnvironment),\n/* harmony export */   isBrowserLike: () => (/* binding */ isBrowserLike)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n/* harmony import */ var _strings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./strings.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/strings.js\");\n// src/utils/env.tsx\n\n\nfunction isBrowserLike() {\n  return typeof window !== \"undefined\" && typeof document !== \"undefined\" && typeof document.createElement !== \"undefined\";\n}\nvar ENV_VAR_RENAME = {\n  NEXT_PUBLIC_STACK_API_URL: [\"STACK_BASE_URL\", \"NEXT_PUBLIC_STACK_URL\"]\n};\nfunction getEnvVariable(name, defaultValue) {\n  if (isBrowserLike()) {\n    throw new Error((0,_strings_js__WEBPACK_IMPORTED_MODULE_1__.deindent)`\n      Can't use getEnvVariable on the client because Next.js transpiles expressions of the kind process.env.XYZ at build-time on the client.\n    \n      Use process.env.XYZ directly instead.\n    `);\n  }\n  if (name === \"NEXT_RUNTIME\") {\n    throw new Error((0,_strings_js__WEBPACK_IMPORTED_MODULE_1__.deindent)`\n      Can't use getEnvVariable to access the NEXT_RUNTIME environment variable because it's compiled into the client bundle.\n    \n      Use getNextRuntime() instead.\n    `);\n  }\n  for (const [newName, oldNames] of Object.entries(ENV_VAR_RENAME)) {\n    if (oldNames.includes(name)) {\n      (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.throwErr)(`Environment variable ${name} has been renamed to ${newName}. Please update your configuration to use the new name.`);\n    }\n  }\n  let value = process.env[name];\n  if (!value && ENV_VAR_RENAME[name]) {\n    for (const oldName of ENV_VAR_RENAME[name]) {\n      value = process.env[oldName];\n      if (value) break;\n    }\n  }\n  if (value === void 0) {\n    if (defaultValue !== void 0) {\n      value = defaultValue;\n    } else {\n      (0,_errors_js__WEBPACK_IMPORTED_MODULE_0__.throwErr)(`Missing environment variable: ${name}`);\n    }\n  }\n  return value;\n}\nfunction getNextRuntime() {\n  return \"nodejs\" || 0;\n}\nfunction getNodeEnvironment() {\n  return getEnvVariable(\"NODE_ENV\", \"\");\n}\n\n//# sourceMappingURL=env.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvZW52LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ3VDO0FBQ0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixxREFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IscURBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLG9EQUFRLHlCQUF5QixNQUFNLHNCQUFzQixRQUFRO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixNQUFNLG9EQUFRLGtDQUFrQyxLQUFLO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLFFBQXdCLElBQUksQ0FBc0Q7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFNRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS91dGlscy9lbnYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3V0aWxzL2Vudi50c3hcbmltcG9ydCB7IHRocm93RXJyIH0gZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBkZWluZGVudCB9IGZyb20gXCIuL3N0cmluZ3MuanNcIjtcbmZ1bmN0aW9uIGlzQnJvd3Nlckxpa2UoKSB7XG4gIHJldHVybiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBkb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCAhPT0gXCJ1bmRlZmluZWRcIjtcbn1cbnZhciBFTlZfVkFSX1JFTkFNRSA9IHtcbiAgTkVYVF9QVUJMSUNfU1RBQ0tfQVBJX1VSTDogW1wiU1RBQ0tfQkFTRV9VUkxcIiwgXCJORVhUX1BVQkxJQ19TVEFDS19VUkxcIl1cbn07XG5mdW5jdGlvbiBnZXRFbnZWYXJpYWJsZShuYW1lLCBkZWZhdWx0VmFsdWUpIHtcbiAgaWYgKGlzQnJvd3Nlckxpa2UoKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihkZWluZGVudGBcbiAgICAgIENhbid0IHVzZSBnZXRFbnZWYXJpYWJsZSBvbiB0aGUgY2xpZW50IGJlY2F1c2UgTmV4dC5qcyB0cmFuc3BpbGVzIGV4cHJlc3Npb25zIG9mIHRoZSBraW5kIHByb2Nlc3MuZW52LlhZWiBhdCBidWlsZC10aW1lIG9uIHRoZSBjbGllbnQuXG4gICAgXG4gICAgICBVc2UgcHJvY2Vzcy5lbnYuWFlaIGRpcmVjdGx5IGluc3RlYWQuXG4gICAgYCk7XG4gIH1cbiAgaWYgKG5hbWUgPT09IFwiTkVYVF9SVU5USU1FXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoZGVpbmRlbnRgXG4gICAgICBDYW4ndCB1c2UgZ2V0RW52VmFyaWFibGUgdG8gYWNjZXNzIHRoZSBORVhUX1JVTlRJTUUgZW52aXJvbm1lbnQgdmFyaWFibGUgYmVjYXVzZSBpdCdzIGNvbXBpbGVkIGludG8gdGhlIGNsaWVudCBidW5kbGUuXG4gICAgXG4gICAgICBVc2UgZ2V0TmV4dFJ1bnRpbWUoKSBpbnN0ZWFkLlxuICAgIGApO1xuICB9XG4gIGZvciAoY29uc3QgW25ld05hbWUsIG9sZE5hbWVzXSBvZiBPYmplY3QuZW50cmllcyhFTlZfVkFSX1JFTkFNRSkpIHtcbiAgICBpZiAob2xkTmFtZXMuaW5jbHVkZXMobmFtZSkpIHtcbiAgICAgIHRocm93RXJyKGBFbnZpcm9ubWVudCB2YXJpYWJsZSAke25hbWV9IGhhcyBiZWVuIHJlbmFtZWQgdG8gJHtuZXdOYW1lfS4gUGxlYXNlIHVwZGF0ZSB5b3VyIGNvbmZpZ3VyYXRpb24gdG8gdXNlIHRoZSBuZXcgbmFtZS5gKTtcbiAgICB9XG4gIH1cbiAgbGV0IHZhbHVlID0gcHJvY2Vzcy5lbnZbbmFtZV07XG4gIGlmICghdmFsdWUgJiYgRU5WX1ZBUl9SRU5BTUVbbmFtZV0pIHtcbiAgICBmb3IgKGNvbnN0IG9sZE5hbWUgb2YgRU5WX1ZBUl9SRU5BTUVbbmFtZV0pIHtcbiAgICAgIHZhbHVlID0gcHJvY2Vzcy5lbnZbb2xkTmFtZV07XG4gICAgICBpZiAodmFsdWUpIGJyZWFrO1xuICAgIH1cbiAgfVxuICBpZiAodmFsdWUgPT09IHZvaWQgMCkge1xuICAgIGlmIChkZWZhdWx0VmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgdmFsdWUgPSBkZWZhdWx0VmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93RXJyKGBNaXNzaW5nIGVudmlyb25tZW50IHZhcmlhYmxlOiAke25hbWV9YCk7XG4gICAgfVxuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGdldE5leHRSdW50aW1lKCkge1xuICByZXR1cm4gcHJvY2Vzcy5lbnYuTkVYVF9SVU5USU1FIHx8IHRocm93RXJyKFwiTWlzc2luZyBlbnZpcm9ubWVudCB2YXJpYWJsZTogTkVYVF9SVU5USU1FXCIpO1xufVxuZnVuY3Rpb24gZ2V0Tm9kZUVudmlyb25tZW50KCkge1xuICByZXR1cm4gZ2V0RW52VmFyaWFibGUoXCJOT0RFX0VOVlwiLCBcIlwiKTtcbn1cbmV4cG9ydCB7XG4gIGdldEVudlZhcmlhYmxlLFxuICBnZXROZXh0UnVudGltZSxcbiAgZ2V0Tm9kZUVudmlyb25tZW50LFxuICBpc0Jyb3dzZXJMaWtlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW52LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/env.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StackAssertionError: () => (/* binding */ StackAssertionError),\n/* harmony export */   StatusError: () => (/* binding */ StatusError),\n/* harmony export */   captureError: () => (/* binding */ captureError),\n/* harmony export */   concatStacktraces: () => (/* binding */ concatStacktraces),\n/* harmony export */   errorToNiceString: () => (/* binding */ errorToNiceString),\n/* harmony export */   registerErrorSink: () => (/* binding */ registerErrorSink),\n/* harmony export */   throwErr: () => (/* binding */ throwErr)\n/* harmony export */ });\n/* harmony import */ var _globals_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./globals.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/globals.js\");\n/* harmony import */ var _objects_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./objects.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/objects.js\");\n/* harmony import */ var _strings_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./strings.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/strings.js\");\n// src/utils/errors.tsx\n\n\n\nfunction throwErr(...args) {\n  if (typeof args[0] === \"string\") {\n    throw new StackAssertionError(args[0], args[1]);\n  } else if (args[0] instanceof Error) {\n    throw args[0];\n  } else {\n    throw new StatusError(...args);\n  }\n}\nfunction removeStacktraceNameLine(stack) {\n  const addsNameLine = new Error().stack?.startsWith(\"Error\\n\");\n  return stack.split(\"\\n\").slice(addsNameLine ? 1 : 0).join(\"\\n\");\n}\nfunction concatStacktraces(first, ...errors) {\n  const addsEmptyLineAtEnd = first.stack?.endsWith(\"\\n\");\n  const separator = removeStacktraceNameLine(new Error().stack ?? \"\").split(\"\\n\")[0];\n  for (const error of errors) {\n    const toAppend = removeStacktraceNameLine(error.stack ?? \"\");\n    first.stack += (addsEmptyLineAtEnd ? \"\" : \"\\n\") + separator + \"\\n\" + toAppend;\n  }\n}\nvar StackAssertionError = class extends Error {\n  constructor(message, extraData) {\n    const disclaimer = `\n\nThis is likely an error in Stack. Please make sure you are running the newest version and report it.`;\n    super(`${message}${message.endsWith(disclaimer) ? \"\" : disclaimer}`, (0,_objects_js__WEBPACK_IMPORTED_MODULE_1__.pick)(extraData ?? {}, [\"cause\"]));\n    this.extraData = extraData;\n    Object.defineProperty(this, \"customCaptureExtraArgs\", {\n      get() {\n        return [this.extraData];\n      },\n      enumerable: false\n    });\n    if (process.env.NEXT_PUBLIC_STACK_DEBUGGER_ON_ASSERTION_ERROR === \"true\") {\n      debugger;\n    }\n  }\n};\nStackAssertionError.prototype.name = \"StackAssertionError\";\nfunction errorToNiceString(error) {\n  if (!(error instanceof Error)) return `${typeof error}<${(0,_strings_js__WEBPACK_IMPORTED_MODULE_2__.nicify)(error)}>`;\n  return (0,_strings_js__WEBPACK_IMPORTED_MODULE_2__.nicify)(error, { maxDepth: 8 });\n}\nvar errorSinks = /* @__PURE__ */ new Set();\nfunction registerErrorSink(sink) {\n  if (errorSinks.has(sink)) {\n    return;\n  }\n  errorSinks.add(sink);\n}\nregisterErrorSink((location, error, ...extraArgs) => {\n  console.error(\n    `\\x1B[41mCaptured error in ${location}:`,\n    // HACK: Log a nicified version of the error to get around buggy Next.js pretty-printing\n    // https://www.reddit.com/r/nextjs/comments/1gkxdqe/comment/m19kxgn/?utm_source=share&utm_medium=web3x&utm_name=web3xcss&utm_term=1&utm_content=share_button\n    errorToNiceString(error),\n    ...extraArgs,\n    \"\\x1B[0m\"\n  );\n});\nregisterErrorSink((location, error, ...extraArgs) => {\n  _globals_js__WEBPACK_IMPORTED_MODULE_0__.globalVar.stackCapturedErrors = _globals_js__WEBPACK_IMPORTED_MODULE_0__.globalVar.stackCapturedErrors ?? [];\n  _globals_js__WEBPACK_IMPORTED_MODULE_0__.globalVar.stackCapturedErrors.push({ location, error, extraArgs });\n});\nfunction captureError(location, error) {\n  for (const sink of errorSinks) {\n    sink(\n      location,\n      error,\n      ...error && (typeof error === \"object\" || typeof error === \"function\") && \"customCaptureExtraArgs\" in error && Array.isArray(error.customCaptureExtraArgs) ? error.customCaptureExtraArgs : []\n    );\n  }\n}\nvar StatusError = class extends Error {\n  constructor(status, message) {\n    if (typeof status === \"object\") {\n      message ??= status.message;\n      status = status.statusCode;\n    }\n    super(message);\n    this.__stackStatusErrorBrand = \"stack-status-error-brand-sentinel\";\n    this.name = \"StatusError\";\n    this.statusCode = status;\n    if (!message) {\n      throw new StackAssertionError(\"StatusError always requires a message unless a Status object is passed\", { cause: this });\n    }\n  }\n  static isStatusError(error) {\n    return typeof error === \"object\" && error !== null && \"__stackStatusErrorBrand\" in error && error.__stackStatusErrorBrand === \"stack-status-error-brand-sentinel\";\n  }\n  isClientError() {\n    return this.statusCode >= 400 && this.statusCode < 500;\n  }\n  isServerError() {\n    return !this.isClientError();\n  }\n  getStatusCode() {\n    return this.statusCode;\n  }\n  getBody() {\n    return new TextEncoder().encode(this.message);\n  }\n  getHeaders() {\n    return {\n      \"Content-Type\": [\"text/plain; charset=utf-8\"]\n    };\n  }\n  toDescriptiveJson() {\n    return {\n      status_code: this.getStatusCode(),\n      message: this.message,\n      headers: this.getHeaders()\n    };\n  }\n  /**\n   * @deprecated this is not a good way to make status errors human-readable, use toDescriptiveJson instead\n   */\n  toHttpJson() {\n    return {\n      status_code: this.statusCode,\n      body: this.message,\n      headers: this.getHeaders()\n    };\n  }\n};\nStatusError.BadRequest = { statusCode: 400, message: \"Bad Request\" };\nStatusError.Unauthorized = { statusCode: 401, message: \"Unauthorized\" };\nStatusError.PaymentRequired = { statusCode: 402, message: \"Payment Required\" };\nStatusError.Forbidden = { statusCode: 403, message: \"Forbidden\" };\nStatusError.NotFound = { statusCode: 404, message: \"Not Found\" };\nStatusError.MethodNotAllowed = { statusCode: 405, message: \"Method Not Allowed\" };\nStatusError.NotAcceptable = { statusCode: 406, message: \"Not Acceptable\" };\nStatusError.ProxyAuthenticationRequired = { statusCode: 407, message: \"Proxy Authentication Required\" };\nStatusError.RequestTimeout = { statusCode: 408, message: \"Request Timeout\" };\nStatusError.Conflict = { statusCode: 409, message: \"Conflict\" };\nStatusError.Gone = { statusCode: 410, message: \"Gone\" };\nStatusError.LengthRequired = { statusCode: 411, message: \"Length Required\" };\nStatusError.PreconditionFailed = { statusCode: 412, message: \"Precondition Failed\" };\nStatusError.PayloadTooLarge = { statusCode: 413, message: \"Payload Too Large\" };\nStatusError.URITooLong = { statusCode: 414, message: \"URI Too Long\" };\nStatusError.UnsupportedMediaType = { statusCode: 415, message: \"Unsupported Media Type\" };\nStatusError.RangeNotSatisfiable = { statusCode: 416, message: \"Range Not Satisfiable\" };\nStatusError.ExpectationFailed = { statusCode: 417, message: \"Expectation Failed\" };\nStatusError.ImATeapot = { statusCode: 418, message: \"I'm a teapot\" };\nStatusError.MisdirectedRequest = { statusCode: 421, message: \"Misdirected Request\" };\nStatusError.UnprocessableEntity = { statusCode: 422, message: \"Unprocessable Entity\" };\nStatusError.Locked = { statusCode: 423, message: \"Locked\" };\nStatusError.FailedDependency = { statusCode: 424, message: \"Failed Dependency\" };\nStatusError.TooEarly = { statusCode: 425, message: \"Too Early\" };\nStatusError.UpgradeRequired = { statusCode: 426, message: \"Upgrade Required\" };\nStatusError.PreconditionRequired = { statusCode: 428, message: \"Precondition Required\" };\nStatusError.TooManyRequests = { statusCode: 429, message: \"Too Many Requests\" };\nStatusError.RequestHeaderFieldsTooLarge = { statusCode: 431, message: \"Request Header Fields Too Large\" };\nStatusError.UnavailableForLegalReasons = { statusCode: 451, message: \"Unavailable For Legal Reasons\" };\nStatusError.InternalServerError = { statusCode: 500, message: \"Internal Server Error\" };\nStatusError.NotImplemented = { statusCode: 501, message: \"Not Implemented\" };\nStatusError.BadGateway = { statusCode: 502, message: \"Bad Gateway\" };\nStatusError.ServiceUnavailable = { statusCode: 503, message: \"Service Unavailable\" };\nStatusError.GatewayTimeout = { statusCode: 504, message: \"Gateway Timeout\" };\nStatusError.HTTPVersionNotSupported = { statusCode: 505, message: \"HTTP Version Not Supported\" };\nStatusError.VariantAlsoNegotiates = { statusCode: 506, message: \"Variant Also Negotiates\" };\nStatusError.InsufficientStorage = { statusCode: 507, message: \"Insufficient Storage\" };\nStatusError.LoopDetected = { statusCode: 508, message: \"Loop Detected\" };\nStatusError.NotExtended = { statusCode: 510, message: \"Not Extended\" };\nStatusError.NetworkAuthenticationRequired = { statusCode: 511, message: \"Network Authentication Required\" };\nStatusError.prototype.name = \"StatusError\";\n\n//# sourceMappingURL=errors.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvZXJyb3JzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUN5QztBQUNMO0FBQ0U7QUFDdEM7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGFBQWEsUUFBUSxFQUFFLCtDQUErQyxHQUFHLGlEQUFJLGdCQUFnQjtBQUM3RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxhQUFhLEdBQUcsbURBQU0sUUFBUTtBQUN6RSxTQUFTLG1EQUFNLFVBQVUsYUFBYTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxTQUFTO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLEVBQUUsa0RBQVMsdUJBQXVCLGtEQUFTO0FBQzNDLEVBQUUsa0RBQVMsNEJBQTRCLDRCQUE0QjtBQUNuRSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdIQUFnSCxhQUFhO0FBQzdIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0IsNkJBQTZCO0FBQzdCLGdDQUFnQztBQUNoQywwQkFBMEI7QUFDMUIseUJBQXlCO0FBQ3pCLGlDQUFpQztBQUNqQyw4QkFBOEI7QUFDOUIsNENBQTRDO0FBQzVDLCtCQUErQjtBQUMvQix5QkFBeUI7QUFDekIscUJBQXFCO0FBQ3JCLCtCQUErQjtBQUMvQixtQ0FBbUM7QUFDbkMsZ0NBQWdDO0FBQ2hDLDJCQUEyQjtBQUMzQixxQ0FBcUM7QUFDckMsb0NBQW9DO0FBQ3BDLGtDQUFrQztBQUNsQywwQkFBMEI7QUFDMUIsbUNBQW1DO0FBQ25DLG9DQUFvQztBQUNwQyx1QkFBdUI7QUFDdkIsaUNBQWlDO0FBQ2pDLHlCQUF5QjtBQUN6QixnQ0FBZ0M7QUFDaEMscUNBQXFDO0FBQ3JDLGdDQUFnQztBQUNoQyw0Q0FBNEM7QUFDNUMsMkNBQTJDO0FBQzNDLG9DQUFvQztBQUNwQywrQkFBK0I7QUFDL0IsMkJBQTJCO0FBQzNCLG1DQUFtQztBQUNuQywrQkFBK0I7QUFDL0Isd0NBQXdDO0FBQ3hDLHNDQUFzQztBQUN0QyxvQ0FBb0M7QUFDcEMsNkJBQTZCO0FBQzdCLDRCQUE0QjtBQUM1Qiw4Q0FBOEM7QUFDOUM7QUFTRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS91dGlscy9lcnJvcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3V0aWxzL2Vycm9ycy50c3hcbmltcG9ydCB7IGdsb2JhbFZhciB9IGZyb20gXCIuL2dsb2JhbHMuanNcIjtcbmltcG9ydCB7IHBpY2sgfSBmcm9tIFwiLi9vYmplY3RzLmpzXCI7XG5pbXBvcnQgeyBuaWNpZnkgfSBmcm9tIFwiLi9zdHJpbmdzLmpzXCI7XG5mdW5jdGlvbiB0aHJvd0VyciguLi5hcmdzKSB7XG4gIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gXCJzdHJpbmdcIikge1xuICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICB9IGVsc2UgaWYgKGFyZ3NbMF0gaW5zdGFuY2VvZiBFcnJvcikge1xuICAgIHRocm93IGFyZ3NbMF07XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFN0YXR1c0Vycm9yKC4uLmFyZ3MpO1xuICB9XG59XG5mdW5jdGlvbiByZW1vdmVTdGFja3RyYWNlTmFtZUxpbmUoc3RhY2spIHtcbiAgY29uc3QgYWRkc05hbWVMaW5lID0gbmV3IEVycm9yKCkuc3RhY2s/LnN0YXJ0c1dpdGgoXCJFcnJvclxcblwiKTtcbiAgcmV0dXJuIHN0YWNrLnNwbGl0KFwiXFxuXCIpLnNsaWNlKGFkZHNOYW1lTGluZSA/IDEgOiAwKS5qb2luKFwiXFxuXCIpO1xufVxuZnVuY3Rpb24gY29uY2F0U3RhY2t0cmFjZXMoZmlyc3QsIC4uLmVycm9ycykge1xuICBjb25zdCBhZGRzRW1wdHlMaW5lQXRFbmQgPSBmaXJzdC5zdGFjaz8uZW5kc1dpdGgoXCJcXG5cIik7XG4gIGNvbnN0IHNlcGFyYXRvciA9IHJlbW92ZVN0YWNrdHJhY2VOYW1lTGluZShuZXcgRXJyb3IoKS5zdGFjayA/PyBcIlwiKS5zcGxpdChcIlxcblwiKVswXTtcbiAgZm9yIChjb25zdCBlcnJvciBvZiBlcnJvcnMpIHtcbiAgICBjb25zdCB0b0FwcGVuZCA9IHJlbW92ZVN0YWNrdHJhY2VOYW1lTGluZShlcnJvci5zdGFjayA/PyBcIlwiKTtcbiAgICBmaXJzdC5zdGFjayArPSAoYWRkc0VtcHR5TGluZUF0RW5kID8gXCJcIiA6IFwiXFxuXCIpICsgc2VwYXJhdG9yICsgXCJcXG5cIiArIHRvQXBwZW5kO1xuICB9XG59XG52YXIgU3RhY2tBc3NlcnRpb25FcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBleHRyYURhdGEpIHtcbiAgICBjb25zdCBkaXNjbGFpbWVyID0gYFxuXG5UaGlzIGlzIGxpa2VseSBhbiBlcnJvciBpbiBTdGFjay4gUGxlYXNlIG1ha2Ugc3VyZSB5b3UgYXJlIHJ1bm5pbmcgdGhlIG5ld2VzdCB2ZXJzaW9uIGFuZCByZXBvcnQgaXQuYDtcbiAgICBzdXBlcihgJHttZXNzYWdlfSR7bWVzc2FnZS5lbmRzV2l0aChkaXNjbGFpbWVyKSA/IFwiXCIgOiBkaXNjbGFpbWVyfWAsIHBpY2soZXh0cmFEYXRhID8/IHt9LCBbXCJjYXVzZVwiXSkpO1xuICAgIHRoaXMuZXh0cmFEYXRhID0gZXh0cmFEYXRhO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImN1c3RvbUNhcHR1cmVFeHRyYUFyZ3NcIiwge1xuICAgICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gW3RoaXMuZXh0cmFEYXRhXTtcbiAgICAgIH0sXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZVxuICAgIH0pO1xuICAgIGlmIChwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVEFDS19ERUJVR0dFUl9PTl9BU1NFUlRJT05fRVJST1IgPT09IFwidHJ1ZVwiKSB7XG4gICAgICBkZWJ1Z2dlcjtcbiAgICB9XG4gIH1cbn07XG5TdGFja0Fzc2VydGlvbkVycm9yLnByb3RvdHlwZS5uYW1lID0gXCJTdGFja0Fzc2VydGlvbkVycm9yXCI7XG5mdW5jdGlvbiBlcnJvclRvTmljZVN0cmluZyhlcnJvcikge1xuICBpZiAoIShlcnJvciBpbnN0YW5jZW9mIEVycm9yKSkgcmV0dXJuIGAke3R5cGVvZiBlcnJvcn08JHtuaWNpZnkoZXJyb3IpfT5gO1xuICByZXR1cm4gbmljaWZ5KGVycm9yLCB7IG1heERlcHRoOiA4IH0pO1xufVxudmFyIGVycm9yU2lua3MgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuZnVuY3Rpb24gcmVnaXN0ZXJFcnJvclNpbmsoc2luaykge1xuICBpZiAoZXJyb3JTaW5rcy5oYXMoc2luaykpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgZXJyb3JTaW5rcy5hZGQoc2luayk7XG59XG5yZWdpc3RlckVycm9yU2luaygobG9jYXRpb24sIGVycm9yLCAuLi5leHRyYUFyZ3MpID0+IHtcbiAgY29uc29sZS5lcnJvcihcbiAgICBgXFx4MUJbNDFtQ2FwdHVyZWQgZXJyb3IgaW4gJHtsb2NhdGlvbn06YCxcbiAgICAvLyBIQUNLOiBMb2cgYSBuaWNpZmllZCB2ZXJzaW9uIG9mIHRoZSBlcnJvciB0byBnZXQgYXJvdW5kIGJ1Z2d5IE5leHQuanMgcHJldHR5LXByaW50aW5nXG4gICAgLy8gaHR0cHM6Ly93d3cucmVkZGl0LmNvbS9yL25leHRqcy9jb21tZW50cy8xZ2t4ZHFlL2NvbW1lbnQvbTE5a3hnbi8/dXRtX3NvdXJjZT1zaGFyZSZ1dG1fbWVkaXVtPXdlYjN4JnV0bV9uYW1lPXdlYjN4Y3NzJnV0bV90ZXJtPTEmdXRtX2NvbnRlbnQ9c2hhcmVfYnV0dG9uXG4gICAgZXJyb3JUb05pY2VTdHJpbmcoZXJyb3IpLFxuICAgIC4uLmV4dHJhQXJncyxcbiAgICBcIlxceDFCWzBtXCJcbiAgKTtcbn0pO1xucmVnaXN0ZXJFcnJvclNpbmsoKGxvY2F0aW9uLCBlcnJvciwgLi4uZXh0cmFBcmdzKSA9PiB7XG4gIGdsb2JhbFZhci5zdGFja0NhcHR1cmVkRXJyb3JzID0gZ2xvYmFsVmFyLnN0YWNrQ2FwdHVyZWRFcnJvcnMgPz8gW107XG4gIGdsb2JhbFZhci5zdGFja0NhcHR1cmVkRXJyb3JzLnB1c2goeyBsb2NhdGlvbiwgZXJyb3IsIGV4dHJhQXJncyB9KTtcbn0pO1xuZnVuY3Rpb24gY2FwdHVyZUVycm9yKGxvY2F0aW9uLCBlcnJvcikge1xuICBmb3IgKGNvbnN0IHNpbmsgb2YgZXJyb3JTaW5rcykge1xuICAgIHNpbmsoXG4gICAgICBsb2NhdGlvbixcbiAgICAgIGVycm9yLFxuICAgICAgLi4uZXJyb3IgJiYgKHR5cGVvZiBlcnJvciA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZXJyb3IgPT09IFwiZnVuY3Rpb25cIikgJiYgXCJjdXN0b21DYXB0dXJlRXh0cmFBcmdzXCIgaW4gZXJyb3IgJiYgQXJyYXkuaXNBcnJheShlcnJvci5jdXN0b21DYXB0dXJlRXh0cmFBcmdzKSA/IGVycm9yLmN1c3RvbUNhcHR1cmVFeHRyYUFyZ3MgOiBbXVxuICAgICk7XG4gIH1cbn1cbnZhciBTdGF0dXNFcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihzdGF0dXMsIG1lc3NhZ2UpIHtcbiAgICBpZiAodHlwZW9mIHN0YXR1cyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgbWVzc2FnZSA/Pz0gc3RhdHVzLm1lc3NhZ2U7XG4gICAgICBzdGF0dXMgPSBzdGF0dXMuc3RhdHVzQ29kZTtcbiAgICB9XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5fX3N0YWNrU3RhdHVzRXJyb3JCcmFuZCA9IFwic3RhY2stc3RhdHVzLWVycm9yLWJyYW5kLXNlbnRpbmVsXCI7XG4gICAgdGhpcy5uYW1lID0gXCJTdGF0dXNFcnJvclwiO1xuICAgIHRoaXMuc3RhdHVzQ29kZSA9IHN0YXR1cztcbiAgICBpZiAoIW1lc3NhZ2UpIHtcbiAgICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiU3RhdHVzRXJyb3IgYWx3YXlzIHJlcXVpcmVzIGEgbWVzc2FnZSB1bmxlc3MgYSBTdGF0dXMgb2JqZWN0IGlzIHBhc3NlZFwiLCB7IGNhdXNlOiB0aGlzIH0pO1xuICAgIH1cbiAgfVxuICBzdGF0aWMgaXNTdGF0dXNFcnJvcihlcnJvcikge1xuICAgIHJldHVybiB0eXBlb2YgZXJyb3IgPT09IFwib2JqZWN0XCIgJiYgZXJyb3IgIT09IG51bGwgJiYgXCJfX3N0YWNrU3RhdHVzRXJyb3JCcmFuZFwiIGluIGVycm9yICYmIGVycm9yLl9fc3RhY2tTdGF0dXNFcnJvckJyYW5kID09PSBcInN0YWNrLXN0YXR1cy1lcnJvci1icmFuZC1zZW50aW5lbFwiO1xuICB9XG4gIGlzQ2xpZW50RXJyb3IoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdHVzQ29kZSA+PSA0MDAgJiYgdGhpcy5zdGF0dXNDb2RlIDwgNTAwO1xuICB9XG4gIGlzU2VydmVyRXJyb3IoKSB7XG4gICAgcmV0dXJuICF0aGlzLmlzQ2xpZW50RXJyb3IoKTtcbiAgfVxuICBnZXRTdGF0dXNDb2RlKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXR1c0NvZGU7XG4gIH1cbiAgZ2V0Qm9keSgpIHtcbiAgICByZXR1cm4gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHRoaXMubWVzc2FnZSk7XG4gIH1cbiAgZ2V0SGVhZGVycygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgXCJDb250ZW50LVR5cGVcIjogW1widGV4dC9wbGFpbjsgY2hhcnNldD11dGYtOFwiXVxuICAgIH07XG4gIH1cbiAgdG9EZXNjcmlwdGl2ZUpzb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1c19jb2RlOiB0aGlzLmdldFN0YXR1c0NvZGUoKSxcbiAgICAgIG1lc3NhZ2U6IHRoaXMubWVzc2FnZSxcbiAgICAgIGhlYWRlcnM6IHRoaXMuZ2V0SGVhZGVycygpXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgdGhpcyBpcyBub3QgYSBnb29kIHdheSB0byBtYWtlIHN0YXR1cyBlcnJvcnMgaHVtYW4tcmVhZGFibGUsIHVzZSB0b0Rlc2NyaXB0aXZlSnNvbiBpbnN0ZWFkXG4gICAqL1xuICB0b0h0dHBKc29uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXNfY29kZTogdGhpcy5zdGF0dXNDb2RlLFxuICAgICAgYm9keTogdGhpcy5tZXNzYWdlLFxuICAgICAgaGVhZGVyczogdGhpcy5nZXRIZWFkZXJzKClcbiAgICB9O1xuICB9XG59O1xuU3RhdHVzRXJyb3IuQmFkUmVxdWVzdCA9IHsgc3RhdHVzQ29kZTogNDAwLCBtZXNzYWdlOiBcIkJhZCBSZXF1ZXN0XCIgfTtcblN0YXR1c0Vycm9yLlVuYXV0aG9yaXplZCA9IHsgc3RhdHVzQ29kZTogNDAxLCBtZXNzYWdlOiBcIlVuYXV0aG9yaXplZFwiIH07XG5TdGF0dXNFcnJvci5QYXltZW50UmVxdWlyZWQgPSB7IHN0YXR1c0NvZGU6IDQwMiwgbWVzc2FnZTogXCJQYXltZW50IFJlcXVpcmVkXCIgfTtcblN0YXR1c0Vycm9yLkZvcmJpZGRlbiA9IHsgc3RhdHVzQ29kZTogNDAzLCBtZXNzYWdlOiBcIkZvcmJpZGRlblwiIH07XG5TdGF0dXNFcnJvci5Ob3RGb3VuZCA9IHsgc3RhdHVzQ29kZTogNDA0LCBtZXNzYWdlOiBcIk5vdCBGb3VuZFwiIH07XG5TdGF0dXNFcnJvci5NZXRob2ROb3RBbGxvd2VkID0geyBzdGF0dXNDb2RlOiA0MDUsIG1lc3NhZ2U6IFwiTWV0aG9kIE5vdCBBbGxvd2VkXCIgfTtcblN0YXR1c0Vycm9yLk5vdEFjY2VwdGFibGUgPSB7IHN0YXR1c0NvZGU6IDQwNiwgbWVzc2FnZTogXCJOb3QgQWNjZXB0YWJsZVwiIH07XG5TdGF0dXNFcnJvci5Qcm94eUF1dGhlbnRpY2F0aW9uUmVxdWlyZWQgPSB7IHN0YXR1c0NvZGU6IDQwNywgbWVzc2FnZTogXCJQcm94eSBBdXRoZW50aWNhdGlvbiBSZXF1aXJlZFwiIH07XG5TdGF0dXNFcnJvci5SZXF1ZXN0VGltZW91dCA9IHsgc3RhdHVzQ29kZTogNDA4LCBtZXNzYWdlOiBcIlJlcXVlc3QgVGltZW91dFwiIH07XG5TdGF0dXNFcnJvci5Db25mbGljdCA9IHsgc3RhdHVzQ29kZTogNDA5LCBtZXNzYWdlOiBcIkNvbmZsaWN0XCIgfTtcblN0YXR1c0Vycm9yLkdvbmUgPSB7IHN0YXR1c0NvZGU6IDQxMCwgbWVzc2FnZTogXCJHb25lXCIgfTtcblN0YXR1c0Vycm9yLkxlbmd0aFJlcXVpcmVkID0geyBzdGF0dXNDb2RlOiA0MTEsIG1lc3NhZ2U6IFwiTGVuZ3RoIFJlcXVpcmVkXCIgfTtcblN0YXR1c0Vycm9yLlByZWNvbmRpdGlvbkZhaWxlZCA9IHsgc3RhdHVzQ29kZTogNDEyLCBtZXNzYWdlOiBcIlByZWNvbmRpdGlvbiBGYWlsZWRcIiB9O1xuU3RhdHVzRXJyb3IuUGF5bG9hZFRvb0xhcmdlID0geyBzdGF0dXNDb2RlOiA0MTMsIG1lc3NhZ2U6IFwiUGF5bG9hZCBUb28gTGFyZ2VcIiB9O1xuU3RhdHVzRXJyb3IuVVJJVG9vTG9uZyA9IHsgc3RhdHVzQ29kZTogNDE0LCBtZXNzYWdlOiBcIlVSSSBUb28gTG9uZ1wiIH07XG5TdGF0dXNFcnJvci5VbnN1cHBvcnRlZE1lZGlhVHlwZSA9IHsgc3RhdHVzQ29kZTogNDE1LCBtZXNzYWdlOiBcIlVuc3VwcG9ydGVkIE1lZGlhIFR5cGVcIiB9O1xuU3RhdHVzRXJyb3IuUmFuZ2VOb3RTYXRpc2ZpYWJsZSA9IHsgc3RhdHVzQ29kZTogNDE2LCBtZXNzYWdlOiBcIlJhbmdlIE5vdCBTYXRpc2ZpYWJsZVwiIH07XG5TdGF0dXNFcnJvci5FeHBlY3RhdGlvbkZhaWxlZCA9IHsgc3RhdHVzQ29kZTogNDE3LCBtZXNzYWdlOiBcIkV4cGVjdGF0aW9uIEZhaWxlZFwiIH07XG5TdGF0dXNFcnJvci5JbUFUZWFwb3QgPSB7IHN0YXR1c0NvZGU6IDQxOCwgbWVzc2FnZTogXCJJJ20gYSB0ZWFwb3RcIiB9O1xuU3RhdHVzRXJyb3IuTWlzZGlyZWN0ZWRSZXF1ZXN0ID0geyBzdGF0dXNDb2RlOiA0MjEsIG1lc3NhZ2U6IFwiTWlzZGlyZWN0ZWQgUmVxdWVzdFwiIH07XG5TdGF0dXNFcnJvci5VbnByb2Nlc3NhYmxlRW50aXR5ID0geyBzdGF0dXNDb2RlOiA0MjIsIG1lc3NhZ2U6IFwiVW5wcm9jZXNzYWJsZSBFbnRpdHlcIiB9O1xuU3RhdHVzRXJyb3IuTG9ja2VkID0geyBzdGF0dXNDb2RlOiA0MjMsIG1lc3NhZ2U6IFwiTG9ja2VkXCIgfTtcblN0YXR1c0Vycm9yLkZhaWxlZERlcGVuZGVuY3kgPSB7IHN0YXR1c0NvZGU6IDQyNCwgbWVzc2FnZTogXCJGYWlsZWQgRGVwZW5kZW5jeVwiIH07XG5TdGF0dXNFcnJvci5Ub29FYXJseSA9IHsgc3RhdHVzQ29kZTogNDI1LCBtZXNzYWdlOiBcIlRvbyBFYXJseVwiIH07XG5TdGF0dXNFcnJvci5VcGdyYWRlUmVxdWlyZWQgPSB7IHN0YXR1c0NvZGU6IDQyNiwgbWVzc2FnZTogXCJVcGdyYWRlIFJlcXVpcmVkXCIgfTtcblN0YXR1c0Vycm9yLlByZWNvbmRpdGlvblJlcXVpcmVkID0geyBzdGF0dXNDb2RlOiA0MjgsIG1lc3NhZ2U6IFwiUHJlY29uZGl0aW9uIFJlcXVpcmVkXCIgfTtcblN0YXR1c0Vycm9yLlRvb01hbnlSZXF1ZXN0cyA9IHsgc3RhdHVzQ29kZTogNDI5LCBtZXNzYWdlOiBcIlRvbyBNYW55IFJlcXVlc3RzXCIgfTtcblN0YXR1c0Vycm9yLlJlcXVlc3RIZWFkZXJGaWVsZHNUb29MYXJnZSA9IHsgc3RhdHVzQ29kZTogNDMxLCBtZXNzYWdlOiBcIlJlcXVlc3QgSGVhZGVyIEZpZWxkcyBUb28gTGFyZ2VcIiB9O1xuU3RhdHVzRXJyb3IuVW5hdmFpbGFibGVGb3JMZWdhbFJlYXNvbnMgPSB7IHN0YXR1c0NvZGU6IDQ1MSwgbWVzc2FnZTogXCJVbmF2YWlsYWJsZSBGb3IgTGVnYWwgUmVhc29uc1wiIH07XG5TdGF0dXNFcnJvci5JbnRlcm5hbFNlcnZlckVycm9yID0geyBzdGF0dXNDb2RlOiA1MDAsIG1lc3NhZ2U6IFwiSW50ZXJuYWwgU2VydmVyIEVycm9yXCIgfTtcblN0YXR1c0Vycm9yLk5vdEltcGxlbWVudGVkID0geyBzdGF0dXNDb2RlOiA1MDEsIG1lc3NhZ2U6IFwiTm90IEltcGxlbWVudGVkXCIgfTtcblN0YXR1c0Vycm9yLkJhZEdhdGV3YXkgPSB7IHN0YXR1c0NvZGU6IDUwMiwgbWVzc2FnZTogXCJCYWQgR2F0ZXdheVwiIH07XG5TdGF0dXNFcnJvci5TZXJ2aWNlVW5hdmFpbGFibGUgPSB7IHN0YXR1c0NvZGU6IDUwMywgbWVzc2FnZTogXCJTZXJ2aWNlIFVuYXZhaWxhYmxlXCIgfTtcblN0YXR1c0Vycm9yLkdhdGV3YXlUaW1lb3V0ID0geyBzdGF0dXNDb2RlOiA1MDQsIG1lc3NhZ2U6IFwiR2F0ZXdheSBUaW1lb3V0XCIgfTtcblN0YXR1c0Vycm9yLkhUVFBWZXJzaW9uTm90U3VwcG9ydGVkID0geyBzdGF0dXNDb2RlOiA1MDUsIG1lc3NhZ2U6IFwiSFRUUCBWZXJzaW9uIE5vdCBTdXBwb3J0ZWRcIiB9O1xuU3RhdHVzRXJyb3IuVmFyaWFudEFsc29OZWdvdGlhdGVzID0geyBzdGF0dXNDb2RlOiA1MDYsIG1lc3NhZ2U6IFwiVmFyaWFudCBBbHNvIE5lZ290aWF0ZXNcIiB9O1xuU3RhdHVzRXJyb3IuSW5zdWZmaWNpZW50U3RvcmFnZSA9IHsgc3RhdHVzQ29kZTogNTA3LCBtZXNzYWdlOiBcIkluc3VmZmljaWVudCBTdG9yYWdlXCIgfTtcblN0YXR1c0Vycm9yLkxvb3BEZXRlY3RlZCA9IHsgc3RhdHVzQ29kZTogNTA4LCBtZXNzYWdlOiBcIkxvb3AgRGV0ZWN0ZWRcIiB9O1xuU3RhdHVzRXJyb3IuTm90RXh0ZW5kZWQgPSB7IHN0YXR1c0NvZGU6IDUxMCwgbWVzc2FnZTogXCJOb3QgRXh0ZW5kZWRcIiB9O1xuU3RhdHVzRXJyb3IuTmV0d29ya0F1dGhlbnRpY2F0aW9uUmVxdWlyZWQgPSB7IHN0YXR1c0NvZGU6IDUxMSwgbWVzc2FnZTogXCJOZXR3b3JrIEF1dGhlbnRpY2F0aW9uIFJlcXVpcmVkXCIgfTtcblN0YXR1c0Vycm9yLnByb3RvdHlwZS5uYW1lID0gXCJTdGF0dXNFcnJvclwiO1xuZXhwb3J0IHtcbiAgU3RhY2tBc3NlcnRpb25FcnJvcixcbiAgU3RhdHVzRXJyb3IsXG4gIGNhcHR1cmVFcnJvcixcbiAgY29uY2F0U3RhY2t0cmFjZXMsXG4gIGVycm9yVG9OaWNlU3RyaW5nLFxuICByZWdpc3RlckVycm9yU2luayxcbiAgdGhyb3dFcnJcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcnJvcnMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/functions.js":
/*!***********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/functions.js ***!
  \***********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   identity: () => (/* binding */ identity),\n/* harmony export */   identityArgs: () => (/* binding */ identityArgs)\n/* harmony export */ });\n// src/utils/functions.tsx\nfunction identity(t) {\n  return t;\n}\nfunction identityArgs(...args) {\n  return args;\n}\n\n//# sourceMappingURL=functions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvZnVuY3Rpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS91dGlscy9mdW5jdGlvbnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3V0aWxzL2Z1bmN0aW9ucy50c3hcbmZ1bmN0aW9uIGlkZW50aXR5KHQpIHtcbiAgcmV0dXJuIHQ7XG59XG5mdW5jdGlvbiBpZGVudGl0eUFyZ3MoLi4uYXJncykge1xuICByZXR1cm4gYXJncztcbn1cbmV4cG9ydCB7XG4gIGlkZW50aXR5LFxuICBpZGVudGl0eUFyZ3Ncbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mdW5jdGlvbnMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/functions.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/globals.js":
/*!*********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/globals.js ***!
  \*********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createGlobal: () => (/* binding */ createGlobal),\n/* harmony export */   globalVar: () => (/* binding */ globalVar)\n/* harmony export */ });\n// src/utils/globals.tsx\nvar globalVar = typeof globalThis !== \"undefined\" ? globalThis : typeof global !== \"undefined\" ? global : typeof window !== \"undefined\" ? window : typeof self !== \"undefined\" ? self : {};\nif (typeof globalThis === \"undefined\") {\n  globalVar.globalThis = globalVar;\n}\nvar stackGlobalsSymbol = Symbol.for(\"__stack-globals\");\nglobalVar[stackGlobalsSymbol] ??= {};\nfunction createGlobal(key, init) {\n  if (!globalVar[stackGlobalsSymbol][key]) {\n    globalVar[stackGlobalsSymbol][key] = init();\n  }\n  return globalVar[stackGlobalsSymbol][key];\n}\n\n//# sourceMappingURL=globals.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvZ2xvYmFscy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2dmeDJlZGVub2FzaXMvRG93bmxvYWRzL0RldmVsb3BtZW50L0VzcGFkYS9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvZ2xvYmFscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvZ2xvYmFscy50c3hcbnZhciBnbG9iYWxWYXIgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbFRoaXMgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHt9O1xuaWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSBcInVuZGVmaW5lZFwiKSB7XG4gIGdsb2JhbFZhci5nbG9iYWxUaGlzID0gZ2xvYmFsVmFyO1xufVxudmFyIHN0YWNrR2xvYmFsc1N5bWJvbCA9IFN5bWJvbC5mb3IoXCJfX3N0YWNrLWdsb2JhbHNcIik7XG5nbG9iYWxWYXJbc3RhY2tHbG9iYWxzU3ltYm9sXSA/Pz0ge307XG5mdW5jdGlvbiBjcmVhdGVHbG9iYWwoa2V5LCBpbml0KSB7XG4gIGlmICghZ2xvYmFsVmFyW3N0YWNrR2xvYmFsc1N5bWJvbF1ba2V5XSkge1xuICAgIGdsb2JhbFZhcltzdGFja0dsb2JhbHNTeW1ib2xdW2tleV0gPSBpbml0KCk7XG4gIH1cbiAgcmV0dXJuIGdsb2JhbFZhcltzdGFja0dsb2JhbHNTeW1ib2xdW2tleV07XG59XG5leHBvcnQge1xuICBjcmVhdGVHbG9iYWwsXG4gIGdsb2JhbFZhclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdsb2JhbHMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/globals.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/http.js":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/http.js ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HTTP_METHODS: () => (/* binding */ HTTP_METHODS),\n/* harmony export */   decodeBasicAuthorizationHeader: () => (/* binding */ decodeBasicAuthorizationHeader),\n/* harmony export */   encodeBasicAuthorizationHeader: () => (/* binding */ encodeBasicAuthorizationHeader)\n/* harmony export */ });\n/* harmony import */ var _bytes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bytes.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/bytes.js\");\n// src/utils/http.tsx\n\nvar HTTP_METHODS = {\n  \"GET\": {\n    safe: true,\n    idempotent: true\n  },\n  \"POST\": {\n    safe: false,\n    idempotent: false\n  },\n  \"PUT\": {\n    safe: false,\n    idempotent: true\n  },\n  \"DELETE\": {\n    safe: false,\n    idempotent: true\n  },\n  \"PATCH\": {\n    safe: false,\n    idempotent: false\n  },\n  \"OPTIONS\": {\n    safe: true,\n    idempotent: true\n  },\n  \"HEAD\": {\n    safe: true,\n    idempotent: true\n  },\n  \"TRACE\": {\n    safe: true,\n    idempotent: true\n  },\n  \"CONNECT\": {\n    safe: false,\n    idempotent: false\n  }\n};\nfunction decodeBasicAuthorizationHeader(value) {\n  const [type, encoded, ...rest] = value.split(\" \");\n  if (rest.length > 0) return null;\n  if (!encoded) return null;\n  if (type !== \"Basic\") return null;\n  if (!(0,_bytes_js__WEBPACK_IMPORTED_MODULE_0__.isBase64)(encoded)) return null;\n  const decoded = new TextDecoder().decode((0,_bytes_js__WEBPACK_IMPORTED_MODULE_0__.decodeBase64)(encoded));\n  const split = decoded.split(\":\");\n  return [split[0], split.slice(1).join(\":\")];\n}\nfunction encodeBasicAuthorizationHeader(id, password) {\n  if (id.includes(\":\")) throw new Error(\"Basic authorization header id cannot contain ':'\");\n  return `Basic ${(0,_bytes_js__WEBPACK_IMPORTED_MODULE_0__.encodeBase64)(new TextEncoder().encode(`${id}:${password}`))}`;\n}\n\n//# sourceMappingURL=http.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvaHR0cC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDa0U7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxtREFBUTtBQUNmLDJDQUEyQyx1REFBWTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVEQUFZLDZCQUE2QixHQUFHLEdBQUcsU0FBUyxJQUFJO0FBQzlFO0FBS0U7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2dmeDJlZGVub2FzaXMvRG93bmxvYWRzL0RldmVsb3BtZW50L0VzcGFkYS9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvaHR0cC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvaHR0cC50c3hcbmltcG9ydCB7IGRlY29kZUJhc2U2NCwgZW5jb2RlQmFzZTY0LCBpc0Jhc2U2NCB9IGZyb20gXCIuL2J5dGVzLmpzXCI7XG52YXIgSFRUUF9NRVRIT0RTID0ge1xuICBcIkdFVFwiOiB7XG4gICAgc2FmZTogdHJ1ZSxcbiAgICBpZGVtcG90ZW50OiB0cnVlXG4gIH0sXG4gIFwiUE9TVFwiOiB7XG4gICAgc2FmZTogZmFsc2UsXG4gICAgaWRlbXBvdGVudDogZmFsc2VcbiAgfSxcbiAgXCJQVVRcIjoge1xuICAgIHNhZmU6IGZhbHNlLFxuICAgIGlkZW1wb3RlbnQ6IHRydWVcbiAgfSxcbiAgXCJERUxFVEVcIjoge1xuICAgIHNhZmU6IGZhbHNlLFxuICAgIGlkZW1wb3RlbnQ6IHRydWVcbiAgfSxcbiAgXCJQQVRDSFwiOiB7XG4gICAgc2FmZTogZmFsc2UsXG4gICAgaWRlbXBvdGVudDogZmFsc2VcbiAgfSxcbiAgXCJPUFRJT05TXCI6IHtcbiAgICBzYWZlOiB0cnVlLFxuICAgIGlkZW1wb3RlbnQ6IHRydWVcbiAgfSxcbiAgXCJIRUFEXCI6IHtcbiAgICBzYWZlOiB0cnVlLFxuICAgIGlkZW1wb3RlbnQ6IHRydWVcbiAgfSxcbiAgXCJUUkFDRVwiOiB7XG4gICAgc2FmZTogdHJ1ZSxcbiAgICBpZGVtcG90ZW50OiB0cnVlXG4gIH0sXG4gIFwiQ09OTkVDVFwiOiB7XG4gICAgc2FmZTogZmFsc2UsXG4gICAgaWRlbXBvdGVudDogZmFsc2VcbiAgfVxufTtcbmZ1bmN0aW9uIGRlY29kZUJhc2ljQXV0aG9yaXphdGlvbkhlYWRlcih2YWx1ZSkge1xuICBjb25zdCBbdHlwZSwgZW5jb2RlZCwgLi4ucmVzdF0gPSB2YWx1ZS5zcGxpdChcIiBcIik7XG4gIGlmIChyZXN0Lmxlbmd0aCA+IDApIHJldHVybiBudWxsO1xuICBpZiAoIWVuY29kZWQpIHJldHVybiBudWxsO1xuICBpZiAodHlwZSAhPT0gXCJCYXNpY1wiKSByZXR1cm4gbnVsbDtcbiAgaWYgKCFpc0Jhc2U2NChlbmNvZGVkKSkgcmV0dXJuIG51bGw7XG4gIGNvbnN0IGRlY29kZWQgPSBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoZGVjb2RlQmFzZTY0KGVuY29kZWQpKTtcbiAgY29uc3Qgc3BsaXQgPSBkZWNvZGVkLnNwbGl0KFwiOlwiKTtcbiAgcmV0dXJuIFtzcGxpdFswXSwgc3BsaXQuc2xpY2UoMSkuam9pbihcIjpcIildO1xufVxuZnVuY3Rpb24gZW5jb2RlQmFzaWNBdXRob3JpemF0aW9uSGVhZGVyKGlkLCBwYXNzd29yZCkge1xuICBpZiAoaWQuaW5jbHVkZXMoXCI6XCIpKSB0aHJvdyBuZXcgRXJyb3IoXCJCYXNpYyBhdXRob3JpemF0aW9uIGhlYWRlciBpZCBjYW5ub3QgY29udGFpbiAnOidcIik7XG4gIHJldHVybiBgQmFzaWMgJHtlbmNvZGVCYXNlNjQobmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGAke2lkfToke3Bhc3N3b3JkfWApKX1gO1xufVxuZXhwb3J0IHtcbiAgSFRUUF9NRVRIT0RTLFxuICBkZWNvZGVCYXNpY0F1dGhvcml6YXRpb25IZWFkZXIsXG4gIGVuY29kZUJhc2ljQXV0aG9yaXphdGlvbkhlYWRlclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWh0dHAuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/http.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/locks.js":
/*!*******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/locks.js ***!
  \*******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ReadWriteLock: () => (/* binding */ ReadWriteLock)\n/* harmony export */ });\n/* harmony import */ var async_mutex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! async-mutex */ \"(ssr)/./node_modules/.pnpm/async-mutex@0.5.0/node_modules/async-mutex/index.mjs\");\n// src/utils/locks.tsx\n\nvar ReadWriteLock = class {\n  constructor() {\n    this.semaphore = new async_mutex__WEBPACK_IMPORTED_MODULE_0__.Semaphore(1);\n    this.readers = 0;\n    this.readersMutex = new async_mutex__WEBPACK_IMPORTED_MODULE_0__.Semaphore(1);\n  }\n  async withReadLock(callback) {\n    await this._acquireReadLock();\n    try {\n      return await callback();\n    } finally {\n      await this._releaseReadLock();\n    }\n  }\n  async withWriteLock(callback) {\n    await this._acquireWriteLock();\n    try {\n      return await callback();\n    } finally {\n      await this._releaseWriteLock();\n    }\n  }\n  async _acquireReadLock() {\n    await this.readersMutex.acquire();\n    try {\n      this.readers += 1;\n      if (this.readers === 1) {\n        await this.semaphore.acquire();\n      }\n    } finally {\n      this.readersMutex.release();\n    }\n  }\n  async _releaseReadLock() {\n    await this.readersMutex.acquire();\n    try {\n      this.readers -= 1;\n      if (this.readers === 0) {\n        this.semaphore.release();\n      }\n    } finally {\n      this.readersMutex.release();\n    }\n  }\n  async _acquireWriteLock() {\n    await this.semaphore.acquire();\n  }\n  async _releaseWriteLock() {\n    this.semaphore.release();\n  }\n};\n\n//# sourceMappingURL=locks.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvbG9ja3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUN3QztBQUN4QztBQUNBO0FBQ0EseUJBQXlCLGtEQUFTO0FBQ2xDO0FBQ0EsNEJBQTRCLGtEQUFTO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS91dGlscy9sb2Nrcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvbG9ja3MudHN4XG5pbXBvcnQgeyBTZW1hcGhvcmUgfSBmcm9tIFwiYXN5bmMtbXV0ZXhcIjtcbnZhciBSZWFkV3JpdGVMb2NrID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnNlbWFwaG9yZSA9IG5ldyBTZW1hcGhvcmUoMSk7XG4gICAgdGhpcy5yZWFkZXJzID0gMDtcbiAgICB0aGlzLnJlYWRlcnNNdXRleCA9IG5ldyBTZW1hcGhvcmUoMSk7XG4gIH1cbiAgYXN5bmMgd2l0aFJlYWRMb2NrKGNhbGxiYWNrKSB7XG4gICAgYXdhaXQgdGhpcy5fYWNxdWlyZVJlYWRMb2NrKCk7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCBjYWxsYmFjaygpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBhd2FpdCB0aGlzLl9yZWxlYXNlUmVhZExvY2soKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgd2l0aFdyaXRlTG9jayhjYWxsYmFjaykge1xuICAgIGF3YWl0IHRoaXMuX2FjcXVpcmVXcml0ZUxvY2soKTtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IGNhbGxiYWNrKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGF3YWl0IHRoaXMuX3JlbGVhc2VXcml0ZUxvY2soKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgX2FjcXVpcmVSZWFkTG9jaygpIHtcbiAgICBhd2FpdCB0aGlzLnJlYWRlcnNNdXRleC5hY3F1aXJlKCk7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMucmVhZGVycyArPSAxO1xuICAgICAgaWYgKHRoaXMucmVhZGVycyA9PT0gMSkge1xuICAgICAgICBhd2FpdCB0aGlzLnNlbWFwaG9yZS5hY3F1aXJlKCk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMucmVhZGVyc011dGV4LnJlbGVhc2UoKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgX3JlbGVhc2VSZWFkTG9jaygpIHtcbiAgICBhd2FpdCB0aGlzLnJlYWRlcnNNdXRleC5hY3F1aXJlKCk7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMucmVhZGVycyAtPSAxO1xuICAgICAgaWYgKHRoaXMucmVhZGVycyA9PT0gMCkge1xuICAgICAgICB0aGlzLnNlbWFwaG9yZS5yZWxlYXNlKCk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMucmVhZGVyc011dGV4LnJlbGVhc2UoKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgX2FjcXVpcmVXcml0ZUxvY2soKSB7XG4gICAgYXdhaXQgdGhpcy5zZW1hcGhvcmUuYWNxdWlyZSgpO1xuICB9XG4gIGFzeW5jIF9yZWxlYXNlV3JpdGVMb2NrKCkge1xuICAgIHRoaXMuc2VtYXBob3JlLnJlbGVhc2UoKTtcbiAgfVxufTtcbmV4cG9ydCB7XG4gIFJlYWRXcml0ZUxvY2tcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2Nrcy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/locks.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/maps.js":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/maps.js ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DependenciesMap: () => (/* binding */ DependenciesMap),\n/* harmony export */   IterableWeakMap: () => (/* binding */ IterableWeakMap),\n/* harmony export */   MaybeWeakMap: () => (/* binding */ MaybeWeakMap),\n/* harmony export */   WeakRefIfAvailable: () => (/* binding */ WeakRefIfAvailable)\n/* harmony export */ });\n/* harmony import */ var _results_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./results.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/results.js\");\n// src/utils/maps.tsx\n\nvar WeakRefIfAvailable = class {\n  constructor(value) {\n    if (typeof WeakRef === \"undefined\") {\n      this._ref = { deref: () => value };\n    } else {\n      this._ref = new WeakRef(value);\n    }\n  }\n  deref() {\n    return this._ref.deref();\n  }\n};\nvar _a, _b;\nvar IterableWeakMap = class {\n  constructor(entries) {\n    this[_a] = \"IterableWeakMap\";\n    const mappedEntries = entries?.map((e) => [e[0], { value: e[1], keyRef: new WeakRefIfAvailable(e[0]) }]);\n    this._weakMap = new WeakMap(mappedEntries ?? []);\n    this._keyRefs = new Set(mappedEntries?.map((e) => e[1].keyRef) ?? []);\n  }\n  get(key) {\n    return this._weakMap.get(key)?.value;\n  }\n  set(key, value) {\n    const existing = this._weakMap.get(key);\n    const updated = { value, keyRef: existing?.keyRef ?? new WeakRefIfAvailable(key) };\n    this._weakMap.set(key, updated);\n    this._keyRefs.add(updated.keyRef);\n    return this;\n  }\n  delete(key) {\n    const res = this._weakMap.get(key);\n    if (res) {\n      this._weakMap.delete(key);\n      this._keyRefs.delete(res.keyRef);\n      return true;\n    }\n    return false;\n  }\n  has(key) {\n    return this._weakMap.has(key) && this._keyRefs.has(this._weakMap.get(key).keyRef);\n  }\n  *[(_b = Symbol.iterator, _a = Symbol.toStringTag, _b)]() {\n    for (const keyRef of this._keyRefs) {\n      const key = keyRef.deref();\n      const existing = key ? this._weakMap.get(key) : void 0;\n      if (!key) {\n        this._keyRefs.delete(keyRef);\n      } else if (existing) {\n        yield [key, existing.value];\n      }\n    }\n  }\n};\nvar _a2, _b2;\nvar MaybeWeakMap = class {\n  constructor(entries) {\n    this[_a2] = \"MaybeWeakMap\";\n    const entriesArray = [...entries ?? []];\n    this._primitiveMap = new Map(entriesArray.filter((e) => !this._isAllowedInWeakMap(e[0])));\n    this._weakMap = new IterableWeakMap(entriesArray.filter((e) => this._isAllowedInWeakMap(e[0])));\n  }\n  _isAllowedInWeakMap(key) {\n    return typeof key === \"object\" && key !== null || typeof key === \"symbol\" && Symbol.keyFor(key) === void 0;\n  }\n  get(key) {\n    if (this._isAllowedInWeakMap(key)) {\n      return this._weakMap.get(key);\n    } else {\n      return this._primitiveMap.get(key);\n    }\n  }\n  set(key, value) {\n    if (this._isAllowedInWeakMap(key)) {\n      this._weakMap.set(key, value);\n    } else {\n      this._primitiveMap.set(key, value);\n    }\n    return this;\n  }\n  delete(key) {\n    if (this._isAllowedInWeakMap(key)) {\n      return this._weakMap.delete(key);\n    } else {\n      return this._primitiveMap.delete(key);\n    }\n  }\n  has(key) {\n    if (this._isAllowedInWeakMap(key)) {\n      return this._weakMap.has(key);\n    } else {\n      return this._primitiveMap.has(key);\n    }\n  }\n  *[(_b2 = Symbol.iterator, _a2 = Symbol.toStringTag, _b2)]() {\n    yield* this._primitiveMap;\n    yield* this._weakMap;\n  }\n};\nvar _a3, _b3;\nvar DependenciesMap = class {\n  constructor() {\n    this._inner = { map: new MaybeWeakMap(), hasValue: false, value: void 0 };\n    this[_a3] = \"DependenciesMap\";\n  }\n  _valueToResult(inner) {\n    if (inner.hasValue) {\n      return _results_js__WEBPACK_IMPORTED_MODULE_0__.Result.ok(inner.value);\n    } else {\n      return _results_js__WEBPACK_IMPORTED_MODULE_0__.Result.error(void 0);\n    }\n  }\n  _unwrapFromInner(dependencies, inner) {\n    if (dependencies.length === 0) {\n      return this._valueToResult(inner);\n    } else {\n      const [key, ...rest] = dependencies;\n      const newInner = inner.map.get(key);\n      if (!newInner) {\n        return _results_js__WEBPACK_IMPORTED_MODULE_0__.Result.error(void 0);\n      }\n      return this._unwrapFromInner(rest, newInner);\n    }\n  }\n  _setInInner(dependencies, value, inner) {\n    if (dependencies.length === 0) {\n      const res = this._valueToResult(inner);\n      if (value.status === \"ok\") {\n        inner.hasValue = true;\n        inner.value = value.data;\n      } else {\n        inner.hasValue = false;\n        inner.value = void 0;\n      }\n      return res;\n    } else {\n      const [key, ...rest] = dependencies;\n      let newInner = inner.map.get(key);\n      if (!newInner) {\n        inner.map.set(key, newInner = { map: new MaybeWeakMap(), hasValue: false, value: void 0 });\n      }\n      return this._setInInner(rest, value, newInner);\n    }\n  }\n  *_iterateInner(dependencies, inner) {\n    if (inner.hasValue) {\n      yield [dependencies, inner.value];\n    }\n    for (const [key, value] of inner.map) {\n      yield* this._iterateInner([...dependencies, key], value);\n    }\n  }\n  get(dependencies) {\n    return _results_js__WEBPACK_IMPORTED_MODULE_0__.Result.or(this._unwrapFromInner(dependencies, this._inner), void 0);\n  }\n  set(dependencies, value) {\n    this._setInInner(dependencies, _results_js__WEBPACK_IMPORTED_MODULE_0__.Result.ok(value), this._inner);\n    return this;\n  }\n  delete(dependencies) {\n    return this._setInInner(dependencies, _results_js__WEBPACK_IMPORTED_MODULE_0__.Result.error(void 0), this._inner).status === \"ok\";\n  }\n  has(dependencies) {\n    return this._unwrapFromInner(dependencies, this._inner).status === \"ok\";\n  }\n  clear() {\n    this._inner = { map: new MaybeWeakMap(), hasValue: false, value: void 0 };\n  }\n  *[(_b3 = Symbol.iterator, _a3 = Symbol.toStringTag, _b3)]() {\n    yield* this._iterateInner([], this._inner);\n  }\n};\n\n//# sourceMappingURL=maps.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvbWFwcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ3NDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQixNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCxtREFBbUQ7QUFDMUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLCtDQUFNO0FBQ25CLE1BQU07QUFDTixhQUFhLCtDQUFNO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsZUFBZSwrQ0FBTTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MseURBQXlEO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywrQ0FBTTtBQUNqQjtBQUNBO0FBQ0EsbUNBQW1DLCtDQUFNO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQywrQ0FBTTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS91dGlscy9tYXBzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy9tYXBzLnRzeFxuaW1wb3J0IHsgUmVzdWx0IH0gZnJvbSBcIi4vcmVzdWx0cy5qc1wiO1xudmFyIFdlYWtSZWZJZkF2YWlsYWJsZSA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIFdlYWtSZWYgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRoaXMuX3JlZiA9IHsgZGVyZWY6ICgpID0+IHZhbHVlIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3JlZiA9IG5ldyBXZWFrUmVmKHZhbHVlKTtcbiAgICB9XG4gIH1cbiAgZGVyZWYoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlZi5kZXJlZigpO1xuICB9XG59O1xudmFyIF9hLCBfYjtcbnZhciBJdGVyYWJsZVdlYWtNYXAgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGVudHJpZXMpIHtcbiAgICB0aGlzW19hXSA9IFwiSXRlcmFibGVXZWFrTWFwXCI7XG4gICAgY29uc3QgbWFwcGVkRW50cmllcyA9IGVudHJpZXM/Lm1hcCgoZSkgPT4gW2VbMF0sIHsgdmFsdWU6IGVbMV0sIGtleVJlZjogbmV3IFdlYWtSZWZJZkF2YWlsYWJsZShlWzBdKSB9XSk7XG4gICAgdGhpcy5fd2Vha01hcCA9IG5ldyBXZWFrTWFwKG1hcHBlZEVudHJpZXMgPz8gW10pO1xuICAgIHRoaXMuX2tleVJlZnMgPSBuZXcgU2V0KG1hcHBlZEVudHJpZXM/Lm1hcCgoZSkgPT4gZVsxXS5rZXlSZWYpID8/IFtdKTtcbiAgfVxuICBnZXQoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuX3dlYWtNYXAuZ2V0KGtleSk/LnZhbHVlO1xuICB9XG4gIHNldChrZXksIHZhbHVlKSB7XG4gICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLl93ZWFrTWFwLmdldChrZXkpO1xuICAgIGNvbnN0IHVwZGF0ZWQgPSB7IHZhbHVlLCBrZXlSZWY6IGV4aXN0aW5nPy5rZXlSZWYgPz8gbmV3IFdlYWtSZWZJZkF2YWlsYWJsZShrZXkpIH07XG4gICAgdGhpcy5fd2Vha01hcC5zZXQoa2V5LCB1cGRhdGVkKTtcbiAgICB0aGlzLl9rZXlSZWZzLmFkZCh1cGRhdGVkLmtleVJlZik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZGVsZXRlKGtleSkge1xuICAgIGNvbnN0IHJlcyA9IHRoaXMuX3dlYWtNYXAuZ2V0KGtleSk7XG4gICAgaWYgKHJlcykge1xuICAgICAgdGhpcy5fd2Vha01hcC5kZWxldGUoa2V5KTtcbiAgICAgIHRoaXMuX2tleVJlZnMuZGVsZXRlKHJlcy5rZXlSZWYpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBoYXMoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuX3dlYWtNYXAuaGFzKGtleSkgJiYgdGhpcy5fa2V5UmVmcy5oYXModGhpcy5fd2Vha01hcC5nZXQoa2V5KS5rZXlSZWYpO1xuICB9XG4gICpbKF9iID0gU3ltYm9sLml0ZXJhdG9yLCBfYSA9IFN5bWJvbC50b1N0cmluZ1RhZywgX2IpXSgpIHtcbiAgICBmb3IgKGNvbnN0IGtleVJlZiBvZiB0aGlzLl9rZXlSZWZzKSB7XG4gICAgICBjb25zdCBrZXkgPSBrZXlSZWYuZGVyZWYoKTtcbiAgICAgIGNvbnN0IGV4aXN0aW5nID0ga2V5ID8gdGhpcy5fd2Vha01hcC5nZXQoa2V5KSA6IHZvaWQgMDtcbiAgICAgIGlmICgha2V5KSB7XG4gICAgICAgIHRoaXMuX2tleVJlZnMuZGVsZXRlKGtleVJlZik7XG4gICAgICB9IGVsc2UgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgIHlpZWxkIFtrZXksIGV4aXN0aW5nLnZhbHVlXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG52YXIgX2EyLCBfYjI7XG52YXIgTWF5YmVXZWFrTWFwID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihlbnRyaWVzKSB7XG4gICAgdGhpc1tfYTJdID0gXCJNYXliZVdlYWtNYXBcIjtcbiAgICBjb25zdCBlbnRyaWVzQXJyYXkgPSBbLi4uZW50cmllcyA/PyBbXV07XG4gICAgdGhpcy5fcHJpbWl0aXZlTWFwID0gbmV3IE1hcChlbnRyaWVzQXJyYXkuZmlsdGVyKChlKSA9PiAhdGhpcy5faXNBbGxvd2VkSW5XZWFrTWFwKGVbMF0pKSk7XG4gICAgdGhpcy5fd2Vha01hcCA9IG5ldyBJdGVyYWJsZVdlYWtNYXAoZW50cmllc0FycmF5LmZpbHRlcigoZSkgPT4gdGhpcy5faXNBbGxvd2VkSW5XZWFrTWFwKGVbMF0pKSk7XG4gIH1cbiAgX2lzQWxsb3dlZEluV2Vha01hcChrZXkpIHtcbiAgICByZXR1cm4gdHlwZW9mIGtleSA9PT0gXCJvYmplY3RcIiAmJiBrZXkgIT09IG51bGwgfHwgdHlwZW9mIGtleSA9PT0gXCJzeW1ib2xcIiAmJiBTeW1ib2wua2V5Rm9yKGtleSkgPT09IHZvaWQgMDtcbiAgfVxuICBnZXQoa2V5KSB7XG4gICAgaWYgKHRoaXMuX2lzQWxsb3dlZEluV2Vha01hcChrZXkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5fd2Vha01hcC5nZXQoa2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuX3ByaW1pdGl2ZU1hcC5nZXQoa2V5KTtcbiAgICB9XG4gIH1cbiAgc2V0KGtleSwgdmFsdWUpIHtcbiAgICBpZiAodGhpcy5faXNBbGxvd2VkSW5XZWFrTWFwKGtleSkpIHtcbiAgICAgIHRoaXMuX3dlYWtNYXAuc2V0KGtleSwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9wcmltaXRpdmVNYXAuc2V0KGtleSwgdmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBkZWxldGUoa2V5KSB7XG4gICAgaWYgKHRoaXMuX2lzQWxsb3dlZEluV2Vha01hcChrZXkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5fd2Vha01hcC5kZWxldGUoa2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuX3ByaW1pdGl2ZU1hcC5kZWxldGUoa2V5KTtcbiAgICB9XG4gIH1cbiAgaGFzKGtleSkge1xuICAgIGlmICh0aGlzLl9pc0FsbG93ZWRJbldlYWtNYXAoa2V5KSkge1xuICAgICAgcmV0dXJuIHRoaXMuX3dlYWtNYXAuaGFzKGtleSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLl9wcmltaXRpdmVNYXAuaGFzKGtleSk7XG4gICAgfVxuICB9XG4gICpbKF9iMiA9IFN5bWJvbC5pdGVyYXRvciwgX2EyID0gU3ltYm9sLnRvU3RyaW5nVGFnLCBfYjIpXSgpIHtcbiAgICB5aWVsZCogdGhpcy5fcHJpbWl0aXZlTWFwO1xuICAgIHlpZWxkKiB0aGlzLl93ZWFrTWFwO1xuICB9XG59O1xudmFyIF9hMywgX2IzO1xudmFyIERlcGVuZGVuY2llc01hcCA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5faW5uZXIgPSB7IG1hcDogbmV3IE1heWJlV2Vha01hcCgpLCBoYXNWYWx1ZTogZmFsc2UsIHZhbHVlOiB2b2lkIDAgfTtcbiAgICB0aGlzW19hM10gPSBcIkRlcGVuZGVuY2llc01hcFwiO1xuICB9XG4gIF92YWx1ZVRvUmVzdWx0KGlubmVyKSB7XG4gICAgaWYgKGlubmVyLmhhc1ZhbHVlKSB7XG4gICAgICByZXR1cm4gUmVzdWx0Lm9rKGlubmVyLnZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFJlc3VsdC5lcnJvcih2b2lkIDApO1xuICAgIH1cbiAgfVxuICBfdW53cmFwRnJvbUlubmVyKGRlcGVuZGVuY2llcywgaW5uZXIpIHtcbiAgICBpZiAoZGVwZW5kZW5jaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlVG9SZXN1bHQoaW5uZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBba2V5LCAuLi5yZXN0XSA9IGRlcGVuZGVuY2llcztcbiAgICAgIGNvbnN0IG5ld0lubmVyID0gaW5uZXIubWFwLmdldChrZXkpO1xuICAgICAgaWYgKCFuZXdJbm5lcikge1xuICAgICAgICByZXR1cm4gUmVzdWx0LmVycm9yKHZvaWQgMCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fdW53cmFwRnJvbUlubmVyKHJlc3QsIG5ld0lubmVyKTtcbiAgICB9XG4gIH1cbiAgX3NldEluSW5uZXIoZGVwZW5kZW5jaWVzLCB2YWx1ZSwgaW5uZXIpIHtcbiAgICBpZiAoZGVwZW5kZW5jaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3QgcmVzID0gdGhpcy5fdmFsdWVUb1Jlc3VsdChpbm5lcik7XG4gICAgICBpZiAodmFsdWUuc3RhdHVzID09PSBcIm9rXCIpIHtcbiAgICAgICAgaW5uZXIuaGFzVmFsdWUgPSB0cnVlO1xuICAgICAgICBpbm5lci52YWx1ZSA9IHZhbHVlLmRhdGE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbm5lci5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICBpbm5lci52YWx1ZSA9IHZvaWQgMDtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IFtrZXksIC4uLnJlc3RdID0gZGVwZW5kZW5jaWVzO1xuICAgICAgbGV0IG5ld0lubmVyID0gaW5uZXIubWFwLmdldChrZXkpO1xuICAgICAgaWYgKCFuZXdJbm5lcikge1xuICAgICAgICBpbm5lci5tYXAuc2V0KGtleSwgbmV3SW5uZXIgPSB7IG1hcDogbmV3IE1heWJlV2Vha01hcCgpLCBoYXNWYWx1ZTogZmFsc2UsIHZhbHVlOiB2b2lkIDAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fc2V0SW5Jbm5lcihyZXN0LCB2YWx1ZSwgbmV3SW5uZXIpO1xuICAgIH1cbiAgfVxuICAqX2l0ZXJhdGVJbm5lcihkZXBlbmRlbmNpZXMsIGlubmVyKSB7XG4gICAgaWYgKGlubmVyLmhhc1ZhbHVlKSB7XG4gICAgICB5aWVsZCBbZGVwZW5kZW5jaWVzLCBpbm5lci52YWx1ZV07XG4gICAgfVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGlubmVyLm1hcCkge1xuICAgICAgeWllbGQqIHRoaXMuX2l0ZXJhdGVJbm5lcihbLi4uZGVwZW5kZW5jaWVzLCBrZXldLCB2YWx1ZSk7XG4gICAgfVxuICB9XG4gIGdldChkZXBlbmRlbmNpZXMpIHtcbiAgICByZXR1cm4gUmVzdWx0Lm9yKHRoaXMuX3Vud3JhcEZyb21Jbm5lcihkZXBlbmRlbmNpZXMsIHRoaXMuX2lubmVyKSwgdm9pZCAwKTtcbiAgfVxuICBzZXQoZGVwZW5kZW5jaWVzLCB2YWx1ZSkge1xuICAgIHRoaXMuX3NldEluSW5uZXIoZGVwZW5kZW5jaWVzLCBSZXN1bHQub2sodmFsdWUpLCB0aGlzLl9pbm5lcik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgZGVsZXRlKGRlcGVuZGVuY2llcykge1xuICAgIHJldHVybiB0aGlzLl9zZXRJbklubmVyKGRlcGVuZGVuY2llcywgUmVzdWx0LmVycm9yKHZvaWQgMCksIHRoaXMuX2lubmVyKS5zdGF0dXMgPT09IFwib2tcIjtcbiAgfVxuICBoYXMoZGVwZW5kZW5jaWVzKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Vud3JhcEZyb21Jbm5lcihkZXBlbmRlbmNpZXMsIHRoaXMuX2lubmVyKS5zdGF0dXMgPT09IFwib2tcIjtcbiAgfVxuICBjbGVhcigpIHtcbiAgICB0aGlzLl9pbm5lciA9IHsgbWFwOiBuZXcgTWF5YmVXZWFrTWFwKCksIGhhc1ZhbHVlOiBmYWxzZSwgdmFsdWU6IHZvaWQgMCB9O1xuICB9XG4gICpbKF9iMyA9IFN5bWJvbC5pdGVyYXRvciwgX2EzID0gU3ltYm9sLnRvU3RyaW5nVGFnLCBfYjMpXSgpIHtcbiAgICB5aWVsZCogdGhpcy5faXRlcmF0ZUlubmVyKFtdLCB0aGlzLl9pbm5lcik7XG4gIH1cbn07XG5leHBvcnQge1xuICBEZXBlbmRlbmNpZXNNYXAsXG4gIEl0ZXJhYmxlV2Vha01hcCxcbiAgTWF5YmVXZWFrTWFwLFxuICBXZWFrUmVmSWZBdmFpbGFibGVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXBzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/maps.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/math.js":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/math.js ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   remainder: () => (/* binding */ remainder)\n/* harmony export */ });\n// src/utils/math.tsx\nfunction remainder(n, d) {\n  return (n % d + Math.abs(d)) % d;\n}\n\n//# sourceMappingURL=math.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvbWF0aC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS91dGlscy9tYXRoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy9tYXRoLnRzeFxuZnVuY3Rpb24gcmVtYWluZGVyKG4sIGQpIHtcbiAgcmV0dXJuIChuICUgZCArIE1hdGguYWJzKGQpKSAlIGQ7XG59XG5leHBvcnQge1xuICByZW1haW5kZXJcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXRoLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/math.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/oauth.js":
/*!*******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/oauth.js ***!
  \*******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   allProviders: () => (/* binding */ allProviders),\n/* harmony export */   sharedProviders: () => (/* binding */ sharedProviders),\n/* harmony export */   standardProviders: () => (/* binding */ standardProviders)\n/* harmony export */ });\n// src/utils/oauth.tsx\nvar standardProviders = [\"google\", \"github\", \"microsoft\", \"spotify\", \"facebook\", \"discord\", \"gitlab\", \"bitbucket\", \"linkedin\", \"apple\", \"x\", \"twitch\"];\nvar sharedProviders = [\"google\", \"github\", \"microsoft\", \"spotify\"];\nvar allProviders = standardProviders;\n\n//# sourceMappingURL=oauth.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvb2F1dGguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFLRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS91dGlscy9vYXV0aC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvb2F1dGgudHN4XG52YXIgc3RhbmRhcmRQcm92aWRlcnMgPSBbXCJnb29nbGVcIiwgXCJnaXRodWJcIiwgXCJtaWNyb3NvZnRcIiwgXCJzcG90aWZ5XCIsIFwiZmFjZWJvb2tcIiwgXCJkaXNjb3JkXCIsIFwiZ2l0bGFiXCIsIFwiYml0YnVja2V0XCIsIFwibGlua2VkaW5cIiwgXCJhcHBsZVwiLCBcInhcIiwgXCJ0d2l0Y2hcIl07XG52YXIgc2hhcmVkUHJvdmlkZXJzID0gW1wiZ29vZ2xlXCIsIFwiZ2l0aHViXCIsIFwibWljcm9zb2Z0XCIsIFwic3BvdGlmeVwiXTtcbnZhciBhbGxQcm92aWRlcnMgPSBzdGFuZGFyZFByb3ZpZGVycztcbmV4cG9ydCB7XG4gIGFsbFByb3ZpZGVycyxcbiAgc2hhcmVkUHJvdmlkZXJzLFxuICBzdGFuZGFyZFByb3ZpZGVyc1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9hdXRoLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/oauth.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/objects.js":
/*!*********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/objects.js ***!
  \*********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deepFilterUndefined: () => (/* binding */ deepFilterUndefined),\n/* harmony export */   deepMerge: () => (/* binding */ deepMerge),\n/* harmony export */   deepPlainClone: () => (/* binding */ deepPlainClone),\n/* harmony export */   deepPlainEquals: () => (/* binding */ deepPlainEquals),\n/* harmony export */   deepSortKeys: () => (/* binding */ deepSortKeys),\n/* harmony export */   deleteKey: () => (/* binding */ deleteKey),\n/* harmony export */   filterUndefined: () => (/* binding */ filterUndefined),\n/* harmony export */   filterUndefinedOrNull: () => (/* binding */ filterUndefinedOrNull),\n/* harmony export */   get: () => (/* binding */ get),\n/* harmony export */   getOrUndefined: () => (/* binding */ getOrUndefined),\n/* harmony export */   has: () => (/* binding */ has),\n/* harmony export */   hasAndNotUndefined: () => (/* binding */ hasAndNotUndefined),\n/* harmony export */   isCloneable: () => (/* binding */ isCloneable),\n/* harmony export */   isNotNull: () => (/* binding */ isNotNull),\n/* harmony export */   isObjectLike: () => (/* binding */ isObjectLike),\n/* harmony export */   mapValues: () => (/* binding */ mapValues),\n/* harmony export */   omit: () => (/* binding */ omit),\n/* harmony export */   pick: () => (/* binding */ pick),\n/* harmony export */   set: () => (/* binding */ set),\n/* harmony export */   shallowClone: () => (/* binding */ shallowClone),\n/* harmony export */   sortKeys: () => (/* binding */ sortKeys),\n/* harmony export */   split: () => (/* binding */ split),\n/* harmony export */   typedAssign: () => (/* binding */ typedAssign),\n/* harmony export */   typedEntries: () => (/* binding */ typedEntries),\n/* harmony export */   typedFromEntries: () => (/* binding */ typedFromEntries),\n/* harmony export */   typedKeys: () => (/* binding */ typedKeys),\n/* harmony export */   typedValues: () => (/* binding */ typedValues)\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n/* harmony import */ var _functions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./functions.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/functions.js\");\n/* harmony import */ var _strings_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./strings.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/strings.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/types.js\");\n// src/utils/objects.tsx\n\n\n\n\nfunction isNotNull(value) {\n  return value !== null && value !== void 0;\n}\nfunction deepPlainEquals(obj1, obj2, options = {}) {\n  if (typeof obj1 !== typeof obj2) return false;\n  if (obj1 === obj2) return true;\n  switch (typeof obj1) {\n    case \"object\": {\n      if (!obj1 || !obj2) return false;\n      if (Array.isArray(obj1) || Array.isArray(obj2)) {\n        if (!Array.isArray(obj1) || !Array.isArray(obj2)) return false;\n        if (obj1.length !== obj2.length) return false;\n        return obj1.every((v, i) => deepPlainEquals(v, obj2[i], options));\n      }\n      const entries1 = Object.entries(obj1).filter(([k, v]) => !options.ignoreUndefinedValues || v !== void 0);\n      const entries2 = Object.entries(obj2).filter(([k, v]) => !options.ignoreUndefinedValues || v !== void 0);\n      if (entries1.length !== entries2.length) return false;\n      return entries1.every(([k, v1]) => {\n        const e2 = entries2.find(([k2]) => k === k2);\n        if (!e2) return false;\n        return deepPlainEquals(v1, e2[1], options);\n      });\n    }\n    case \"undefined\":\n    case \"string\":\n    case \"number\":\n    case \"boolean\":\n    case \"bigint\":\n    case \"symbol\":\n    case \"function\": {\n      return false;\n    }\n    default: {\n      throw new Error(\"Unexpected typeof \" + typeof obj1);\n    }\n  }\n}\nfunction isCloneable(obj) {\n  return typeof obj !== \"symbol\" && typeof obj !== \"function\";\n}\nfunction shallowClone(obj) {\n  if (!isCloneable(obj)) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"shallowClone does not support symbols or functions\", { obj });\n  if (Array.isArray(obj)) return obj.map(_functions_js__WEBPACK_IMPORTED_MODULE_1__.identity);\n  return { ...obj };\n}\nfunction deepPlainClone(obj) {\n  if (typeof obj === \"function\") throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"deepPlainClone does not support functions\");\n  if (typeof obj === \"symbol\") throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"deepPlainClone does not support symbols\");\n  if (typeof obj !== \"object\" || !obj) return obj;\n  if (Array.isArray(obj)) return obj.map(deepPlainClone);\n  return Object.fromEntries(Object.entries(obj).map(([k, v]) => [k, deepPlainClone(v)]));\n}\nfunction deepMerge(baseObj, mergeObj) {\n  if ([baseObj, mergeObj, ...Object.values(baseObj), ...Object.values(mergeObj)].some((o) => !isCloneable(o))) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"deepMerge does not support functions or symbols\", { baseObj, mergeObj });\n  const res = shallowClone(baseObj);\n  for (const [key, mergeValue] of Object.entries(mergeObj)) {\n    if (has(res, key)) {\n      const baseValue = get(res, key);\n      if (isObjectLike(baseValue) && isObjectLike(mergeValue)) {\n        set(res, key, deepMerge(baseValue, mergeValue));\n        continue;\n      }\n    }\n    set(res, key, mergeValue);\n  }\n  return res;\n}\nfunction typedEntries(obj) {\n  return Object.entries(obj);\n}\nfunction typedFromEntries(entries) {\n  return Object.fromEntries(entries);\n}\nfunction typedKeys(obj) {\n  return Object.keys(obj);\n}\nfunction typedValues(obj) {\n  return Object.values(obj);\n}\nfunction typedAssign(target, source) {\n  return Object.assign(target, source);\n}\nfunction filterUndefined(obj) {\n  return Object.fromEntries(Object.entries(obj).filter(([, v]) => v !== void 0));\n}\nfunction filterUndefinedOrNull(obj) {\n  return Object.fromEntries(Object.entries(obj).filter(([, v]) => v !== void 0 && v !== null));\n}\n(0,_types_js__WEBPACK_IMPORTED_MODULE_3__.typeAssertIs)()();\nfunction deepFilterUndefined(obj) {\n  return Object.fromEntries(Object.entries(obj).filter(([, v]) => v !== void 0).map(([k, v]) => [k, isObjectLike(v) ? deepFilterUndefined(v) : v]));\n}\nfunction pick(obj, keys) {\n  return Object.fromEntries(Object.entries(obj).filter(([k]) => keys.includes(k)));\n}\nfunction omit(obj, keys) {\n  if (!Array.isArray(keys)) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(\"omit: keys must be an array\", { obj, keys });\n  return Object.fromEntries(Object.entries(obj).filter(([k]) => !keys.includes(k)));\n}\nfunction split(obj, keys) {\n  return [pick(obj, keys), omit(obj, keys)];\n}\nfunction mapValues(obj, fn) {\n  if (Array.isArray(obj)) {\n    return obj.map((v) => fn(v));\n  }\n  return Object.fromEntries(Object.entries(obj).map(([k, v]) => [k, fn(v)]));\n}\nfunction sortKeys(obj) {\n  if (Array.isArray(obj)) {\n    return [...obj];\n  }\n  return Object.fromEntries(Object.entries(obj).sort(([a], [b]) => (0,_strings_js__WEBPACK_IMPORTED_MODULE_2__.stringCompare)(a, b)));\n}\nfunction deepSortKeys(obj) {\n  return sortKeys(mapValues(obj, (v) => isObjectLike(v) ? deepSortKeys(v) : v));\n}\nfunction set(obj, key, value) {\n  Object.defineProperty(obj, key, { value, writable: true, configurable: true, enumerable: true });\n}\nfunction get(obj, key) {\n  const descriptor = Object.getOwnPropertyDescriptor(obj, key);\n  if (!descriptor) throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(`get: key ${String(key)} does not exist`, { obj, key });\n  return descriptor.value;\n}\nfunction getOrUndefined(obj, key) {\n  return has(obj, key) ? get(obj, key) : void 0;\n}\nfunction has(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\nfunction hasAndNotUndefined(obj, key) {\n  return has(obj, key) && get(obj, key) !== void 0;\n}\nfunction deleteKey(obj, key) {\n  if (has(obj, key)) {\n    Reflect.deleteProperty(obj, key);\n  } else {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_0__.StackAssertionError(`deleteKey: key ${String(key)} does not exist`, { obj, key });\n  }\n}\nfunction isObjectLike(value) {\n  return (typeof value === \"object\" || typeof value === \"function\") && value !== null;\n}\n\n//# sourceMappingURL=objects.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvb2JqZWN0cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDa0Q7QUFDUjtBQUNHO0FBQ0g7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsMkRBQW1CLHlEQUF5RCxLQUFLO0FBQ3BILHlDQUF5QyxtREFBUTtBQUNqRCxXQUFXO0FBQ1g7QUFDQTtBQUNBLDJDQUEyQywyREFBbUI7QUFDOUQseUNBQXlDLDJEQUFtQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUhBQXlILDJEQUFtQixzREFBc0QsbUJBQW1CO0FBQ3JOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdURBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQywyREFBbUIsa0NBQWtDLFdBQVc7QUFDdEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FLDBEQUFhO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsNkRBQTZEO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwyREFBbUIsYUFBYSxhQUFhLG1CQUFtQixVQUFVO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osY0FBYywyREFBbUIsbUJBQW1CLGFBQWEsbUJBQW1CLFVBQVU7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTZCRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS91dGlscy9vYmplY3RzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy9vYmplY3RzLnRzeFxuaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciB9IGZyb20gXCIuL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgaWRlbnRpdHkgfSBmcm9tIFwiLi9mdW5jdGlvbnMuanNcIjtcbmltcG9ydCB7IHN0cmluZ0NvbXBhcmUgfSBmcm9tIFwiLi9zdHJpbmdzLmpzXCI7XG5pbXBvcnQgeyB0eXBlQXNzZXJ0SXMgfSBmcm9tIFwiLi90eXBlcy5qc1wiO1xuZnVuY3Rpb24gaXNOb3ROdWxsKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdm9pZCAwO1xufVxuZnVuY3Rpb24gZGVlcFBsYWluRXF1YWxzKG9iajEsIG9iajIsIG9wdGlvbnMgPSB7fSkge1xuICBpZiAodHlwZW9mIG9iajEgIT09IHR5cGVvZiBvYmoyKSByZXR1cm4gZmFsc2U7XG4gIGlmIChvYmoxID09PSBvYmoyKSByZXR1cm4gdHJ1ZTtcbiAgc3dpdGNoICh0eXBlb2Ygb2JqMSkge1xuICAgIGNhc2UgXCJvYmplY3RcIjoge1xuICAgICAgaWYgKCFvYmoxIHx8ICFvYmoyKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShvYmoxKSB8fCBBcnJheS5pc0FycmF5KG9iajIpKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShvYmoxKSB8fCAhQXJyYXkuaXNBcnJheShvYmoyKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAob2JqMS5sZW5ndGggIT09IG9iajIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiBvYmoxLmV2ZXJ5KCh2LCBpKSA9PiBkZWVwUGxhaW5FcXVhbHModiwgb2JqMltpXSwgb3B0aW9ucykpO1xuICAgICAgfVxuICAgICAgY29uc3QgZW50cmllczEgPSBPYmplY3QuZW50cmllcyhvYmoxKS5maWx0ZXIoKFtrLCB2XSkgPT4gIW9wdGlvbnMuaWdub3JlVW5kZWZpbmVkVmFsdWVzIHx8IHYgIT09IHZvaWQgMCk7XG4gICAgICBjb25zdCBlbnRyaWVzMiA9IE9iamVjdC5lbnRyaWVzKG9iajIpLmZpbHRlcigoW2ssIHZdKSA9PiAhb3B0aW9ucy5pZ25vcmVVbmRlZmluZWRWYWx1ZXMgfHwgdiAhPT0gdm9pZCAwKTtcbiAgICAgIGlmIChlbnRyaWVzMS5sZW5ndGggIT09IGVudHJpZXMyLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgcmV0dXJuIGVudHJpZXMxLmV2ZXJ5KChbaywgdjFdKSA9PiB7XG4gICAgICAgIGNvbnN0IGUyID0gZW50cmllczIuZmluZCgoW2syXSkgPT4gayA9PT0gazIpO1xuICAgICAgICBpZiAoIWUyKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiBkZWVwUGxhaW5FcXVhbHModjEsIGUyWzFdLCBvcHRpb25zKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgY2FzZSBcInN0cmluZ1wiOlxuICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICBjYXNlIFwiYm9vbGVhblwiOlxuICAgIGNhc2UgXCJiaWdpbnRcIjpcbiAgICBjYXNlIFwic3ltYm9sXCI6XG4gICAgY2FzZSBcImZ1bmN0aW9uXCI6IHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZGVmYXVsdDoge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCB0eXBlb2YgXCIgKyB0eXBlb2Ygb2JqMSk7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBpc0Nsb25lYWJsZShvYmopIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmogIT09IFwic3ltYm9sXCIgJiYgdHlwZW9mIG9iaiAhPT0gXCJmdW5jdGlvblwiO1xufVxuZnVuY3Rpb24gc2hhbGxvd0Nsb25lKG9iaikge1xuICBpZiAoIWlzQ2xvbmVhYmxlKG9iaikpIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwic2hhbGxvd0Nsb25lIGRvZXMgbm90IHN1cHBvcnQgc3ltYm9scyBvciBmdW5jdGlvbnNcIiwgeyBvYmogfSk7XG4gIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHJldHVybiBvYmoubWFwKGlkZW50aXR5KTtcbiAgcmV0dXJuIHsgLi4ub2JqIH07XG59XG5mdW5jdGlvbiBkZWVwUGxhaW5DbG9uZShvYmopIHtcbiAgaWYgKHR5cGVvZiBvYmogPT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJkZWVwUGxhaW5DbG9uZSBkb2VzIG5vdCBzdXBwb3J0IGZ1bmN0aW9uc1wiKTtcbiAgaWYgKHR5cGVvZiBvYmogPT09IFwic3ltYm9sXCIpIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiZGVlcFBsYWluQ2xvbmUgZG9lcyBub3Qgc3VwcG9ydCBzeW1ib2xzXCIpO1xuICBpZiAodHlwZW9mIG9iaiAhPT0gXCJvYmplY3RcIiB8fCAhb2JqKSByZXR1cm4gb2JqO1xuICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSByZXR1cm4gb2JqLm1hcChkZWVwUGxhaW5DbG9uZSk7XG4gIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMob2JqKS5tYXAoKFtrLCB2XSkgPT4gW2ssIGRlZXBQbGFpbkNsb25lKHYpXSkpO1xufVxuZnVuY3Rpb24gZGVlcE1lcmdlKGJhc2VPYmosIG1lcmdlT2JqKSB7XG4gIGlmIChbYmFzZU9iaiwgbWVyZ2VPYmosIC4uLk9iamVjdC52YWx1ZXMoYmFzZU9iaiksIC4uLk9iamVjdC52YWx1ZXMobWVyZ2VPYmopXS5zb21lKChvKSA9PiAhaXNDbG9uZWFibGUobykpKSB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcImRlZXBNZXJnZSBkb2VzIG5vdCBzdXBwb3J0IGZ1bmN0aW9ucyBvciBzeW1ib2xzXCIsIHsgYmFzZU9iaiwgbWVyZ2VPYmogfSk7XG4gIGNvbnN0IHJlcyA9IHNoYWxsb3dDbG9uZShiYXNlT2JqKTtcbiAgZm9yIChjb25zdCBba2V5LCBtZXJnZVZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhtZXJnZU9iaikpIHtcbiAgICBpZiAoaGFzKHJlcywga2V5KSkge1xuICAgICAgY29uc3QgYmFzZVZhbHVlID0gZ2V0KHJlcywga2V5KTtcbiAgICAgIGlmIChpc09iamVjdExpa2UoYmFzZVZhbHVlKSAmJiBpc09iamVjdExpa2UobWVyZ2VWYWx1ZSkpIHtcbiAgICAgICAgc2V0KHJlcywga2V5LCBkZWVwTWVyZ2UoYmFzZVZhbHVlLCBtZXJnZVZhbHVlKSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBzZXQocmVzLCBrZXksIG1lcmdlVmFsdWUpO1xuICB9XG4gIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiB0eXBlZEVudHJpZXMob2JqKSB7XG4gIHJldHVybiBPYmplY3QuZW50cmllcyhvYmopO1xufVxuZnVuY3Rpb24gdHlwZWRGcm9tRW50cmllcyhlbnRyaWVzKSB7XG4gIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoZW50cmllcyk7XG59XG5mdW5jdGlvbiB0eXBlZEtleXMob2JqKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhvYmopO1xufVxuZnVuY3Rpb24gdHlwZWRWYWx1ZXMob2JqKSB7XG4gIHJldHVybiBPYmplY3QudmFsdWVzKG9iaik7XG59XG5mdW5jdGlvbiB0eXBlZEFzc2lnbih0YXJnZXQsIHNvdXJjZSkge1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbih0YXJnZXQsIHNvdXJjZSk7XG59XG5mdW5jdGlvbiBmaWx0ZXJVbmRlZmluZWQob2JqKSB7XG4gIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMob2JqKS5maWx0ZXIoKFssIHZdKSA9PiB2ICE9PSB2b2lkIDApKTtcbn1cbmZ1bmN0aW9uIGZpbHRlclVuZGVmaW5lZE9yTnVsbChvYmopIHtcbiAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhvYmopLmZpbHRlcigoWywgdl0pID0+IHYgIT09IHZvaWQgMCAmJiB2ICE9PSBudWxsKSk7XG59XG50eXBlQXNzZXJ0SXMoKSgpO1xuZnVuY3Rpb24gZGVlcEZpbHRlclVuZGVmaW5lZChvYmopIHtcbiAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhvYmopLmZpbHRlcigoWywgdl0pID0+IHYgIT09IHZvaWQgMCkubWFwKChbaywgdl0pID0+IFtrLCBpc09iamVjdExpa2UodikgPyBkZWVwRmlsdGVyVW5kZWZpbmVkKHYpIDogdl0pKTtcbn1cbmZ1bmN0aW9uIHBpY2sob2JqLCBrZXlzKSB7XG4gIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMob2JqKS5maWx0ZXIoKFtrXSkgPT4ga2V5cy5pbmNsdWRlcyhrKSkpO1xufVxuZnVuY3Rpb24gb21pdChvYmosIGtleXMpIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGtleXMpKSB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIm9taXQ6IGtleXMgbXVzdCBiZSBhbiBhcnJheVwiLCB7IG9iaiwga2V5cyB9KTtcbiAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhvYmopLmZpbHRlcigoW2tdKSA9PiAha2V5cy5pbmNsdWRlcyhrKSkpO1xufVxuZnVuY3Rpb24gc3BsaXQob2JqLCBrZXlzKSB7XG4gIHJldHVybiBbcGljayhvYmosIGtleXMpLCBvbWl0KG9iaiwga2V5cyldO1xufVxuZnVuY3Rpb24gbWFwVmFsdWVzKG9iaiwgZm4pIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgIHJldHVybiBvYmoubWFwKCh2KSA9PiBmbih2KSk7XG4gIH1cbiAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhvYmopLm1hcCgoW2ssIHZdKSA9PiBbaywgZm4odildKSk7XG59XG5mdW5jdGlvbiBzb3J0S2V5cyhvYmopIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgIHJldHVybiBbLi4ub2JqXTtcbiAgfVxuICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKG9iaikuc29ydCgoW2FdLCBbYl0pID0+IHN0cmluZ0NvbXBhcmUoYSwgYikpKTtcbn1cbmZ1bmN0aW9uIGRlZXBTb3J0S2V5cyhvYmopIHtcbiAgcmV0dXJuIHNvcnRLZXlzKG1hcFZhbHVlcyhvYmosICh2KSA9PiBpc09iamVjdExpa2UodikgPyBkZWVwU29ydEtleXModikgOiB2KSk7XG59XG5mdW5jdGlvbiBzZXQob2JqLCBrZXksIHZhbHVlKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbn1cbmZ1bmN0aW9uIGdldChvYmosIGtleSkge1xuICBjb25zdCBkZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7XG4gIGlmICghZGVzY3JpcHRvcikgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoYGdldDoga2V5ICR7U3RyaW5nKGtleSl9IGRvZXMgbm90IGV4aXN0YCwgeyBvYmosIGtleSB9KTtcbiAgcmV0dXJuIGRlc2NyaXB0b3IudmFsdWU7XG59XG5mdW5jdGlvbiBnZXRPclVuZGVmaW5lZChvYmosIGtleSkge1xuICByZXR1cm4gaGFzKG9iaiwga2V5KSA/IGdldChvYmosIGtleSkgOiB2b2lkIDA7XG59XG5mdW5jdGlvbiBoYXMob2JqLCBrZXkpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG59XG5mdW5jdGlvbiBoYXNBbmROb3RVbmRlZmluZWQob2JqLCBrZXkpIHtcbiAgcmV0dXJuIGhhcyhvYmosIGtleSkgJiYgZ2V0KG9iaiwga2V5KSAhPT0gdm9pZCAwO1xufVxuZnVuY3Rpb24gZGVsZXRlS2V5KG9iaiwga2V5KSB7XG4gIGlmIChoYXMob2JqLCBrZXkpKSB7XG4gICAgUmVmbGVjdC5kZWxldGVQcm9wZXJ0eShvYmosIGtleSk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoYGRlbGV0ZUtleToga2V5ICR7U3RyaW5nKGtleSl9IGRvZXMgbm90IGV4aXN0YCwgeyBvYmosIGtleSB9KTtcbiAgfVxufVxuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSAmJiB2YWx1ZSAhPT0gbnVsbDtcbn1cbmV4cG9ydCB7XG4gIGRlZXBGaWx0ZXJVbmRlZmluZWQsXG4gIGRlZXBNZXJnZSxcbiAgZGVlcFBsYWluQ2xvbmUsXG4gIGRlZXBQbGFpbkVxdWFscyxcbiAgZGVlcFNvcnRLZXlzLFxuICBkZWxldGVLZXksXG4gIGZpbHRlclVuZGVmaW5lZCxcbiAgZmlsdGVyVW5kZWZpbmVkT3JOdWxsLFxuICBnZXQsXG4gIGdldE9yVW5kZWZpbmVkLFxuICBoYXMsXG4gIGhhc0FuZE5vdFVuZGVmaW5lZCxcbiAgaXNDbG9uZWFibGUsXG4gIGlzTm90TnVsbCxcbiAgaXNPYmplY3RMaWtlLFxuICBtYXBWYWx1ZXMsXG4gIG9taXQsXG4gIHBpY2ssXG4gIHNldCxcbiAgc2hhbGxvd0Nsb25lLFxuICBzb3J0S2V5cyxcbiAgc3BsaXQsXG4gIHR5cGVkQXNzaWduLFxuICB0eXBlZEVudHJpZXMsXG4gIHR5cGVkRnJvbUVudHJpZXMsXG4gIHR5cGVkS2V5cyxcbiAgdHlwZWRWYWx1ZXNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYmplY3RzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/objects.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/promises.js":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/promises.js ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   concatStacktracesIfRejected: () => (/* binding */ concatStacktracesIfRejected),\n/* harmony export */   createPromise: () => (/* binding */ createPromise),\n/* harmony export */   ignoreUnhandledRejection: () => (/* binding */ ignoreUnhandledRejection),\n/* harmony export */   neverResolve: () => (/* binding */ neverResolve),\n/* harmony export */   pending: () => (/* binding */ pending),\n/* harmony export */   rateLimited: () => (/* binding */ rateLimited),\n/* harmony export */   rejected: () => (/* binding */ rejected),\n/* harmony export */   resolved: () => (/* binding */ resolved),\n/* harmony export */   runAsynchronously: () => (/* binding */ runAsynchronously),\n/* harmony export */   runAsynchronouslyWithAlert: () => (/* binding */ runAsynchronouslyWithAlert),\n/* harmony export */   throttled: () => (/* binding */ throttled),\n/* harmony export */   timeout: () => (/* binding */ timeout),\n/* harmony export */   timeoutThrow: () => (/* binding */ timeoutThrow),\n/* harmony export */   wait: () => (/* binding */ wait),\n/* harmony export */   waitUntil: () => (/* binding */ waitUntil)\n/* harmony export */ });\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../index.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/index.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n/* harmony import */ var _maps_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./maps.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/maps.js\");\n/* harmony import */ var _results_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./results.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/results.js\");\n/* harmony import */ var _uuids_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./uuids.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/uuids.js\");\n// src/utils/promises.tsx\n\n\n\n\n\nfunction createPromise(callback) {\n  let status = \"pending\";\n  let valueOrReason = void 0;\n  let resolve = null;\n  let reject = null;\n  const promise = new Promise((res, rej) => {\n    resolve = (value) => {\n      if (status !== \"pending\") return;\n      status = \"fulfilled\";\n      valueOrReason = value;\n      res(value);\n    };\n    reject = (reason) => {\n      if (status !== \"pending\") return;\n      status = \"rejected\";\n      valueOrReason = reason;\n      rej(reason);\n    };\n  });\n  callback(resolve, reject);\n  return Object.assign(promise, {\n    status,\n    ...status === \"fulfilled\" ? { value: valueOrReason } : {},\n    ...status === \"rejected\" ? { reason: valueOrReason } : {}\n  });\n}\nvar resolvedCache = null;\nfunction resolved(value) {\n  resolvedCache ??= new _maps_js__WEBPACK_IMPORTED_MODULE_2__.DependenciesMap();\n  if (resolvedCache.has([value])) {\n    return resolvedCache.get([value]);\n  }\n  const res = Object.assign(Promise.resolve(value), {\n    status: \"fulfilled\",\n    value\n  });\n  resolvedCache.set([value], res);\n  return res;\n}\nvar rejectedCache = null;\nfunction rejected(reason) {\n  rejectedCache ??= new _maps_js__WEBPACK_IMPORTED_MODULE_2__.DependenciesMap();\n  if (rejectedCache.has([reason])) {\n    return rejectedCache.get([reason]);\n  }\n  const promise = Promise.reject(reason);\n  ignoreUnhandledRejection(promise);\n  const res = Object.assign(promise, {\n    status: \"rejected\",\n    reason\n  });\n  rejectedCache.set([reason], res);\n  return res;\n}\nvar neverResolvePromise = pending(new Promise(() => {\n}));\nfunction neverResolve() {\n  return neverResolvePromise;\n}\nfunction pending(promise, options = {}) {\n  const res = promise.then(\n    (value) => {\n      res.status = \"fulfilled\";\n      res.value = value;\n      return value;\n    },\n    (actualReason) => {\n      res.status = \"rejected\";\n      res.reason = actualReason;\n      throw actualReason;\n    }\n  );\n  res.status = \"pending\";\n  return res;\n}\nfunction ignoreUnhandledRejection(promise) {\n  promise.catch(() => {\n  });\n}\nfunction concatStacktracesIfRejected(promise) {\n  const currentError = new Error();\n  promise.catch((error) => {\n    if (error instanceof Error) {\n      (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.concatStacktraces)(error, currentError);\n    } else {\n    }\n  });\n}\nasync function wait(ms) {\n  if (!Number.isFinite(ms) || ms < 0) {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(`wait() requires a non-negative integer number of milliseconds to wait. (found: ${ms}ms)`);\n  }\n  if (ms >= 2 ** 31) {\n    throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"The maximum timeout for wait() is 2147483647ms (2**31 - 1). (found: ${ms}ms)\");\n  }\n  return await new Promise((resolve) => setTimeout(resolve, ms));\n}\nasync function waitUntil(date) {\n  return await wait(date.getTime() - Date.now());\n}\nfunction runAsynchronouslyWithAlert(...args) {\n  return runAsynchronously(\n    args[0],\n    {\n      ...args[1],\n      onError: (error) => {\n        if (_index_js__WEBPACK_IMPORTED_MODULE_0__.KnownError.isKnownError(error) && typeof process !== \"undefined\" && \"development\"?.includes(\"production\")) {\n          alert(error.message);\n        } else {\n          alert(`An unhandled error occurred. Please ${ true ? `check the browser console for the full error.` : 0}\n\n${error}`);\n        }\n        args[1]?.onError?.(error);\n      }\n    },\n    ...args.slice(2)\n  );\n}\nfunction runAsynchronously(promiseOrFunc, options = {}) {\n  if (typeof promiseOrFunc === \"function\") {\n    promiseOrFunc = promiseOrFunc();\n  }\n  if (promiseOrFunc) {\n    concatStacktracesIfRejected(promiseOrFunc);\n    promiseOrFunc.catch((error) => {\n      options.onError?.(error);\n      const newError = new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\n        \"Uncaught error in asynchronous function: \" + (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.errorToNiceString)(error),\n        { cause: error }\n      );\n      if (!options.noErrorLogging) {\n        (0,_errors_js__WEBPACK_IMPORTED_MODULE_1__.captureError)(\"runAsynchronously\", newError);\n      }\n    });\n  }\n}\nvar TimeoutError = class extends Error {\n  constructor(ms) {\n    super(`Timeout after ${ms}ms`);\n    this.ms = ms;\n    this.name = \"TimeoutError\";\n  }\n};\nasync function timeout(promiseOrFunc, ms) {\n  const promise = typeof promiseOrFunc === \"function\" ? promiseOrFunc() : promiseOrFunc;\n  return await Promise.race([\n    promise.then((value) => _results_js__WEBPACK_IMPORTED_MODULE_3__.Result.ok(value)),\n    wait(ms).then(() => _results_js__WEBPACK_IMPORTED_MODULE_3__.Result.error(new TimeoutError(ms)))\n  ]);\n}\nasync function timeoutThrow(promise, ms) {\n  return _results_js__WEBPACK_IMPORTED_MODULE_3__.Result.orThrow(await timeout(promise, ms));\n}\nfunction rateLimited(func, options) {\n  let waitUntil2 = performance.now();\n  let queue = [];\n  let addedToQueueCallbacks = /* @__PURE__ */ new Map();\n  const next = async () => {\n    while (true) {\n      if (waitUntil2 > performance.now()) {\n        await wait(Math.max(1, waitUntil2 - performance.now() + 1));\n      } else if (queue.length === 0) {\n        const uuid = (0,_uuids_js__WEBPACK_IMPORTED_MODULE_4__.generateUuid)();\n        await new Promise((resolve) => {\n          addedToQueueCallbacks.set(uuid, resolve);\n        });\n        addedToQueueCallbacks.delete(uuid);\n      } else {\n        break;\n      }\n    }\n    const nextFuncs = options.batchCalls ? queue.splice(0, queue.length) : [queue.shift()];\n    const start = performance.now();\n    const value = await _results_js__WEBPACK_IMPORTED_MODULE_3__.Result.fromPromise(func());\n    const end = performance.now();\n    waitUntil2 = Math.max(\n      waitUntil2,\n      start + (options.throttleMs ?? 0),\n      end + (options.gapMs ?? 0)\n    );\n    for (const nextFunc of nextFuncs) {\n      if (value.status === \"ok\") {\n        nextFunc[0](value.data);\n      } else {\n        nextFunc[1](value.error);\n      }\n    }\n  };\n  runAsynchronously(async () => {\n    while (true) {\n      await next();\n    }\n  });\n  return () => {\n    return new Promise((resolve, reject) => {\n      waitUntil2 = Math.max(\n        waitUntil2,\n        performance.now() + (options.debounceMs ?? 0)\n      );\n      queue.push([resolve, reject]);\n      addedToQueueCallbacks.forEach((cb) => cb());\n    });\n  };\n}\nfunction throttled(func, delayMs) {\n  let timeout2 = null;\n  let nextAvailable = null;\n  return async (...args) => {\n    while (nextAvailable !== null) {\n      await nextAvailable;\n    }\n    nextAvailable = new Promise((resolve) => {\n      timeout2 = setTimeout(() => {\n        nextAvailable = null;\n        resolve(func(...args));\n      }, delayMs);\n    });\n    return await nextAvailable;\n  };\n}\n\n//# sourceMappingURL=promises.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvcHJvbWlzZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUN5QztBQUM2RDtBQUMxRDtBQUNOO0FBQ0k7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyx1QkFBdUIsSUFBSTtBQUM3RCxpQ0FBaUMsd0JBQXdCO0FBQ3pELEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IscURBQWU7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IscURBQWU7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLDZEQUFpQjtBQUN2QixNQUFNO0FBQ047QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsY0FBYywyREFBbUIsbUZBQW1GLEdBQUc7QUFDdkg7QUFDQTtBQUNBLGNBQWMsMkRBQW1CLHdFQUF3RSxHQUFHO0FBQzVHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaURBQVUsMERBQTBELGFBQW9CO0FBQ3BHO0FBQ0EsVUFBVTtBQUNWLHVEQUF1RCxLQUFzQyxxREFBcUQsQ0FBK0I7O0FBRWpMLEVBQUUsTUFBTTtBQUNSO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxzREFBc0Q7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsMkRBQW1CO0FBQzlDLHNEQUFzRCw2REFBaUI7QUFDdkUsVUFBVTtBQUNWO0FBQ0E7QUFDQSxRQUFRLHdEQUFZO0FBQ3BCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLEdBQUc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsK0NBQU07QUFDbEMsd0JBQXdCLCtDQUFNO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLFNBQVMsK0NBQU07QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1IscUJBQXFCLHVEQUFZO0FBQ2pDO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwrQ0FBTTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFpQkU7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2dmeDJlZGVub2FzaXMvRG93bmxvYWRzL0RldmVsb3BtZW50L0VzcGFkYS9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvcHJvbWlzZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3V0aWxzL3Byb21pc2VzLnRzeFxuaW1wb3J0IHsgS25vd25FcnJvciB9IGZyb20gXCIuLi9pbmRleC5qc1wiO1xuaW1wb3J0IHsgU3RhY2tBc3NlcnRpb25FcnJvciwgY2FwdHVyZUVycm9yLCBjb25jYXRTdGFja3RyYWNlcywgZXJyb3JUb05pY2VTdHJpbmcgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IERlcGVuZGVuY2llc01hcCB9IGZyb20gXCIuL21hcHMuanNcIjtcbmltcG9ydCB7IFJlc3VsdCB9IGZyb20gXCIuL3Jlc3VsdHMuanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlVXVpZCB9IGZyb20gXCIuL3V1aWRzLmpzXCI7XG5mdW5jdGlvbiBjcmVhdGVQcm9taXNlKGNhbGxiYWNrKSB7XG4gIGxldCBzdGF0dXMgPSBcInBlbmRpbmdcIjtcbiAgbGV0IHZhbHVlT3JSZWFzb24gPSB2b2lkIDA7XG4gIGxldCByZXNvbHZlID0gbnVsbDtcbiAgbGV0IHJlamVjdCA9IG51bGw7XG4gIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHtcbiAgICByZXNvbHZlID0gKHZhbHVlKSA9PiB7XG4gICAgICBpZiAoc3RhdHVzICE9PSBcInBlbmRpbmdcIikgcmV0dXJuO1xuICAgICAgc3RhdHVzID0gXCJmdWxmaWxsZWRcIjtcbiAgICAgIHZhbHVlT3JSZWFzb24gPSB2YWx1ZTtcbiAgICAgIHJlcyh2YWx1ZSk7XG4gICAgfTtcbiAgICByZWplY3QgPSAocmVhc29uKSA9PiB7XG4gICAgICBpZiAoc3RhdHVzICE9PSBcInBlbmRpbmdcIikgcmV0dXJuO1xuICAgICAgc3RhdHVzID0gXCJyZWplY3RlZFwiO1xuICAgICAgdmFsdWVPclJlYXNvbiA9IHJlYXNvbjtcbiAgICAgIHJlaihyZWFzb24pO1xuICAgIH07XG4gIH0pO1xuICBjYWxsYmFjayhyZXNvbHZlLCByZWplY3QpO1xuICByZXR1cm4gT2JqZWN0LmFzc2lnbihwcm9taXNlLCB7XG4gICAgc3RhdHVzLFxuICAgIC4uLnN0YXR1cyA9PT0gXCJmdWxmaWxsZWRcIiA/IHsgdmFsdWU6IHZhbHVlT3JSZWFzb24gfSA6IHt9LFxuICAgIC4uLnN0YXR1cyA9PT0gXCJyZWplY3RlZFwiID8geyByZWFzb246IHZhbHVlT3JSZWFzb24gfSA6IHt9XG4gIH0pO1xufVxudmFyIHJlc29sdmVkQ2FjaGUgPSBudWxsO1xuZnVuY3Rpb24gcmVzb2x2ZWQodmFsdWUpIHtcbiAgcmVzb2x2ZWRDYWNoZSA/Pz0gbmV3IERlcGVuZGVuY2llc01hcCgpO1xuICBpZiAocmVzb2x2ZWRDYWNoZS5oYXMoW3ZhbHVlXSkpIHtcbiAgICByZXR1cm4gcmVzb2x2ZWRDYWNoZS5nZXQoW3ZhbHVlXSk7XG4gIH1cbiAgY29uc3QgcmVzID0gT2JqZWN0LmFzc2lnbihQcm9taXNlLnJlc29sdmUodmFsdWUpLCB7XG4gICAgc3RhdHVzOiBcImZ1bGZpbGxlZFwiLFxuICAgIHZhbHVlXG4gIH0pO1xuICByZXNvbHZlZENhY2hlLnNldChbdmFsdWVdLCByZXMpO1xuICByZXR1cm4gcmVzO1xufVxudmFyIHJlamVjdGVkQ2FjaGUgPSBudWxsO1xuZnVuY3Rpb24gcmVqZWN0ZWQocmVhc29uKSB7XG4gIHJlamVjdGVkQ2FjaGUgPz89IG5ldyBEZXBlbmRlbmNpZXNNYXAoKTtcbiAgaWYgKHJlamVjdGVkQ2FjaGUuaGFzKFtyZWFzb25dKSkge1xuICAgIHJldHVybiByZWplY3RlZENhY2hlLmdldChbcmVhc29uXSk7XG4gIH1cbiAgY29uc3QgcHJvbWlzZSA9IFByb21pc2UucmVqZWN0KHJlYXNvbik7XG4gIGlnbm9yZVVuaGFuZGxlZFJlamVjdGlvbihwcm9taXNlKTtcbiAgY29uc3QgcmVzID0gT2JqZWN0LmFzc2lnbihwcm9taXNlLCB7XG4gICAgc3RhdHVzOiBcInJlamVjdGVkXCIsXG4gICAgcmVhc29uXG4gIH0pO1xuICByZWplY3RlZENhY2hlLnNldChbcmVhc29uXSwgcmVzKTtcbiAgcmV0dXJuIHJlcztcbn1cbnZhciBuZXZlclJlc29sdmVQcm9taXNlID0gcGVuZGluZyhuZXcgUHJvbWlzZSgoKSA9PiB7XG59KSk7XG5mdW5jdGlvbiBuZXZlclJlc29sdmUoKSB7XG4gIHJldHVybiBuZXZlclJlc29sdmVQcm9taXNlO1xufVxuZnVuY3Rpb24gcGVuZGluZyhwcm9taXNlLCBvcHRpb25zID0ge30pIHtcbiAgY29uc3QgcmVzID0gcHJvbWlzZS50aGVuKFxuICAgICh2YWx1ZSkgPT4ge1xuICAgICAgcmVzLnN0YXR1cyA9IFwiZnVsZmlsbGVkXCI7XG4gICAgICByZXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIChhY3R1YWxSZWFzb24pID0+IHtcbiAgICAgIHJlcy5zdGF0dXMgPSBcInJlamVjdGVkXCI7XG4gICAgICByZXMucmVhc29uID0gYWN0dWFsUmVhc29uO1xuICAgICAgdGhyb3cgYWN0dWFsUmVhc29uO1xuICAgIH1cbiAgKTtcbiAgcmVzLnN0YXR1cyA9IFwicGVuZGluZ1wiO1xuICByZXR1cm4gcmVzO1xufVxuZnVuY3Rpb24gaWdub3JlVW5oYW5kbGVkUmVqZWN0aW9uKHByb21pc2UpIHtcbiAgcHJvbWlzZS5jYXRjaCgoKSA9PiB7XG4gIH0pO1xufVxuZnVuY3Rpb24gY29uY2F0U3RhY2t0cmFjZXNJZlJlamVjdGVkKHByb21pc2UpIHtcbiAgY29uc3QgY3VycmVudEVycm9yID0gbmV3IEVycm9yKCk7XG4gIHByb21pc2UuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGNvbmNhdFN0YWNrdHJhY2VzKGVycm9yLCBjdXJyZW50RXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgfVxuICB9KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHdhaXQobXMpIHtcbiAgaWYgKCFOdW1iZXIuaXNGaW5pdGUobXMpIHx8IG1zIDwgMCkge1xuICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKGB3YWl0KCkgcmVxdWlyZXMgYSBub24tbmVnYXRpdmUgaW50ZWdlciBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIHdhaXQuIChmb3VuZDogJHttc31tcylgKTtcbiAgfVxuICBpZiAobXMgPj0gMiAqKiAzMSkge1xuICAgIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwiVGhlIG1heGltdW0gdGltZW91dCBmb3Igd2FpdCgpIGlzIDIxNDc0ODM2NDdtcyAoMioqMzEgLSAxKS4gKGZvdW5kOiAke21zfW1zKVwiKTtcbiAgfVxuICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHdhaXRVbnRpbChkYXRlKSB7XG4gIHJldHVybiBhd2FpdCB3YWl0KGRhdGUuZ2V0VGltZSgpIC0gRGF0ZS5ub3coKSk7XG59XG5mdW5jdGlvbiBydW5Bc3luY2hyb25vdXNseVdpdGhBbGVydCguLi5hcmdzKSB7XG4gIHJldHVybiBydW5Bc3luY2hyb25vdXNseShcbiAgICBhcmdzWzBdLFxuICAgIHtcbiAgICAgIC4uLmFyZ3NbMV0sXG4gICAgICBvbkVycm9yOiAoZXJyb3IpID0+IHtcbiAgICAgICAgaWYgKEtub3duRXJyb3IuaXNLbm93bkVycm9yKGVycm9yKSAmJiB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLmVudi5OT0RFX0VOVj8uaW5jbHVkZXMoXCJwcm9kdWN0aW9uXCIpKSB7XG4gICAgICAgICAgYWxlcnQoZXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWxlcnQoYEFuIHVuaGFuZGxlZCBlcnJvciBvY2N1cnJlZC4gUGxlYXNlICR7cHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIiA/IGBjaGVjayB0aGUgYnJvd3NlciBjb25zb2xlIGZvciB0aGUgZnVsbCBlcnJvci5gIDogXCJyZXBvcnQgdGhpcyB0byB0aGUgZGV2ZWxvcGVyLlwifVxuXG4ke2Vycm9yfWApO1xuICAgICAgICB9XG4gICAgICAgIGFyZ3NbMV0/Lm9uRXJyb3I/LihlcnJvcik7XG4gICAgICB9XG4gICAgfSxcbiAgICAuLi5hcmdzLnNsaWNlKDIpXG4gICk7XG59XG5mdW5jdGlvbiBydW5Bc3luY2hyb25vdXNseShwcm9taXNlT3JGdW5jLCBvcHRpb25zID0ge30pIHtcbiAgaWYgKHR5cGVvZiBwcm9taXNlT3JGdW5jID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBwcm9taXNlT3JGdW5jID0gcHJvbWlzZU9yRnVuYygpO1xuICB9XG4gIGlmIChwcm9taXNlT3JGdW5jKSB7XG4gICAgY29uY2F0U3RhY2t0cmFjZXNJZlJlamVjdGVkKHByb21pc2VPckZ1bmMpO1xuICAgIHByb21pc2VPckZ1bmMuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICBvcHRpb25zLm9uRXJyb3I/LihlcnJvcik7XG4gICAgICBjb25zdCBuZXdFcnJvciA9IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFxuICAgICAgICBcIlVuY2F1Z2h0IGVycm9yIGluIGFzeW5jaHJvbm91cyBmdW5jdGlvbjogXCIgKyBlcnJvclRvTmljZVN0cmluZyhlcnJvciksXG4gICAgICAgIHsgY2F1c2U6IGVycm9yIH1cbiAgICAgICk7XG4gICAgICBpZiAoIW9wdGlvbnMubm9FcnJvckxvZ2dpbmcpIHtcbiAgICAgICAgY2FwdHVyZUVycm9yKFwicnVuQXN5bmNocm9ub3VzbHlcIiwgbmV3RXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG52YXIgVGltZW91dEVycm9yID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1zKSB7XG4gICAgc3VwZXIoYFRpbWVvdXQgYWZ0ZXIgJHttc31tc2ApO1xuICAgIHRoaXMubXMgPSBtcztcbiAgICB0aGlzLm5hbWUgPSBcIlRpbWVvdXRFcnJvclwiO1xuICB9XG59O1xuYXN5bmMgZnVuY3Rpb24gdGltZW91dChwcm9taXNlT3JGdW5jLCBtcykge1xuICBjb25zdCBwcm9taXNlID0gdHlwZW9mIHByb21pc2VPckZ1bmMgPT09IFwiZnVuY3Rpb25cIiA/IHByb21pc2VPckZ1bmMoKSA6IHByb21pc2VPckZ1bmM7XG4gIHJldHVybiBhd2FpdCBQcm9taXNlLnJhY2UoW1xuICAgIHByb21pc2UudGhlbigodmFsdWUpID0+IFJlc3VsdC5vayh2YWx1ZSkpLFxuICAgIHdhaXQobXMpLnRoZW4oKCkgPT4gUmVzdWx0LmVycm9yKG5ldyBUaW1lb3V0RXJyb3IobXMpKSlcbiAgXSk7XG59XG5hc3luYyBmdW5jdGlvbiB0aW1lb3V0VGhyb3cocHJvbWlzZSwgbXMpIHtcbiAgcmV0dXJuIFJlc3VsdC5vclRocm93KGF3YWl0IHRpbWVvdXQocHJvbWlzZSwgbXMpKTtcbn1cbmZ1bmN0aW9uIHJhdGVMaW1pdGVkKGZ1bmMsIG9wdGlvbnMpIHtcbiAgbGV0IHdhaXRVbnRpbDIgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgbGV0IHF1ZXVlID0gW107XG4gIGxldCBhZGRlZFRvUXVldWVDYWxsYmFja3MgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBjb25zdCBuZXh0ID0gYXN5bmMgKCkgPT4ge1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBpZiAod2FpdFVudGlsMiA+IHBlcmZvcm1hbmNlLm5vdygpKSB7XG4gICAgICAgIGF3YWl0IHdhaXQoTWF0aC5tYXgoMSwgd2FpdFVudGlsMiAtIHBlcmZvcm1hbmNlLm5vdygpICsgMSkpO1xuICAgICAgfSBlbHNlIGlmIChxdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc3QgdXVpZCA9IGdlbmVyYXRlVXVpZCgpO1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgIGFkZGVkVG9RdWV1ZUNhbGxiYWNrcy5zZXQodXVpZCwgcmVzb2x2ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBhZGRlZFRvUXVldWVDYWxsYmFja3MuZGVsZXRlKHV1aWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5leHRGdW5jcyA9IG9wdGlvbnMuYmF0Y2hDYWxscyA/IHF1ZXVlLnNwbGljZSgwLCBxdWV1ZS5sZW5ndGgpIDogW3F1ZXVlLnNoaWZ0KCldO1xuICAgIGNvbnN0IHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgY29uc3QgdmFsdWUgPSBhd2FpdCBSZXN1bHQuZnJvbVByb21pc2UoZnVuYygpKTtcbiAgICBjb25zdCBlbmQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICB3YWl0VW50aWwyID0gTWF0aC5tYXgoXG4gICAgICB3YWl0VW50aWwyLFxuICAgICAgc3RhcnQgKyAob3B0aW9ucy50aHJvdHRsZU1zID8/IDApLFxuICAgICAgZW5kICsgKG9wdGlvbnMuZ2FwTXMgPz8gMClcbiAgICApO1xuICAgIGZvciAoY29uc3QgbmV4dEZ1bmMgb2YgbmV4dEZ1bmNzKSB7XG4gICAgICBpZiAodmFsdWUuc3RhdHVzID09PSBcIm9rXCIpIHtcbiAgICAgICAgbmV4dEZ1bmNbMF0odmFsdWUuZGF0YSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXh0RnVuY1sxXSh2YWx1ZS5lcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBydW5Bc3luY2hyb25vdXNseShhc3luYyAoKSA9PiB7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGF3YWl0IG5leHQoKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB3YWl0VW50aWwyID0gTWF0aC5tYXgoXG4gICAgICAgIHdhaXRVbnRpbDIsXG4gICAgICAgIHBlcmZvcm1hbmNlLm5vdygpICsgKG9wdGlvbnMuZGVib3VuY2VNcyA/PyAwKVxuICAgICAgKTtcbiAgICAgIHF1ZXVlLnB1c2goW3Jlc29sdmUsIHJlamVjdF0pO1xuICAgICAgYWRkZWRUb1F1ZXVlQ2FsbGJhY2tzLmZvckVhY2goKGNiKSA9PiBjYigpKTtcbiAgICB9KTtcbiAgfTtcbn1cbmZ1bmN0aW9uIHRocm90dGxlZChmdW5jLCBkZWxheU1zKSB7XG4gIGxldCB0aW1lb3V0MiA9IG51bGw7XG4gIGxldCBuZXh0QXZhaWxhYmxlID0gbnVsbDtcbiAgcmV0dXJuIGFzeW5jICguLi5hcmdzKSA9PiB7XG4gICAgd2hpbGUgKG5leHRBdmFpbGFibGUgIT09IG51bGwpIHtcbiAgICAgIGF3YWl0IG5leHRBdmFpbGFibGU7XG4gICAgfVxuICAgIG5leHRBdmFpbGFibGUgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgdGltZW91dDIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgbmV4dEF2YWlsYWJsZSA9IG51bGw7XG4gICAgICAgIHJlc29sdmUoZnVuYyguLi5hcmdzKSk7XG4gICAgICB9LCBkZWxheU1zKTtcbiAgICB9KTtcbiAgICByZXR1cm4gYXdhaXQgbmV4dEF2YWlsYWJsZTtcbiAgfTtcbn1cbmV4cG9ydCB7XG4gIGNvbmNhdFN0YWNrdHJhY2VzSWZSZWplY3RlZCxcbiAgY3JlYXRlUHJvbWlzZSxcbiAgaWdub3JlVW5oYW5kbGVkUmVqZWN0aW9uLFxuICBuZXZlclJlc29sdmUsXG4gIHBlbmRpbmcsXG4gIHJhdGVMaW1pdGVkLFxuICByZWplY3RlZCxcbiAgcmVzb2x2ZWQsXG4gIHJ1bkFzeW5jaHJvbm91c2x5LFxuICBydW5Bc3luY2hyb25vdXNseVdpdGhBbGVydCxcbiAgdGhyb3R0bGVkLFxuICB0aW1lb3V0LFxuICB0aW1lb3V0VGhyb3csXG4gIHdhaXQsXG4gIHdhaXRVbnRpbFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb21pc2VzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/promises.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/react.js":
/*!*******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/react.js ***!
  \*******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NoSuspenseBoundaryError: () => (/* binding */ NoSuspenseBoundaryError),\n/* harmony export */   componentWrapper: () => (/* binding */ componentWrapper),\n/* harmony export */   forwardRefIfNeeded: () => (/* binding */ forwardRefIfNeeded),\n/* harmony export */   getNodeText: () => (/* binding */ getNodeText),\n/* harmony export */   mapRef: () => (/* binding */ mapRef),\n/* harmony export */   mapRefState: () => (/* binding */ mapRefState),\n/* harmony export */   suspend: () => (/* binding */ suspend),\n/* harmony export */   suspendIfSsr: () => (/* binding */ suspendIfSsr),\n/* harmony export */   useRefState: () => (/* binding */ useRefState)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@15.5.4_@opentelemetry+api@1.9.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./env.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/env.js\");\n/* harmony import */ var _promises_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./promises.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/promises.js\");\n/* harmony import */ var _strings_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./strings.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/strings.js\");\n// src/utils/react.tsx\n\n\n\n\nfunction componentWrapper(displayName, render) {\n  const Component = forwardRefIfNeeded(render);\n  Component.displayName = displayName;\n  return Component;\n}\nfunction forwardRefIfNeeded(render) {\n  const version = (react__WEBPACK_IMPORTED_MODULE_0___default().version);\n  const major = parseInt(version.split(\".\")[0]);\n  if (major < 19) {\n    return react__WEBPACK_IMPORTED_MODULE_0___default().forwardRef(render);\n  } else {\n    return (props) => render(props, props.ref);\n  }\n}\nfunction getNodeText(node) {\n  if ([\"number\", \"string\"].includes(typeof node)) {\n    return `${node}`;\n  }\n  if (!node) {\n    return \"\";\n  }\n  if (Array.isArray(node)) {\n    return node.map(getNodeText).join(\"\");\n  }\n  if (typeof node === \"object\" && \"props\" in node) {\n    return getNodeText(node.props.children);\n  }\n  throw new Error(`Unknown node type: ${typeof node}`);\n}\nfunction suspend() {\n  react__WEBPACK_IMPORTED_MODULE_0___default().use((0,_promises_js__WEBPACK_IMPORTED_MODULE_2__.neverResolve)());\n  throw new Error(\"Somehow a Promise that never resolves was resolved?\");\n}\nfunction mapRef(ref, mapper) {\n  let last = null;\n  return {\n    get current() {\n      const input = ref.current;\n      if (last === null || input !== last[0]) {\n        last = [input, mapper(input)];\n      }\n      return last[1];\n    }\n  };\n}\nfunction useRefState(initialValue) {\n  const [, setState] = react__WEBPACK_IMPORTED_MODULE_0___default().useState(initialValue);\n  const ref = react__WEBPACK_IMPORTED_MODULE_0___default().useRef(initialValue);\n  const setValue = react__WEBPACK_IMPORTED_MODULE_0___default().useCallback((updater) => {\n    const value = typeof updater === \"function\" ? updater(ref.current) : updater;\n    console.log(\"setValue\", ref.current);\n    ref.current = value;\n    console.log(\"setValue\", ref.current);\n    setState(value);\n  }, []);\n  const res = react__WEBPACK_IMPORTED_MODULE_0___default().useMemo(() => ({\n    get current() {\n      return ref.current;\n    },\n    set: setValue\n  }), [setValue]);\n  return res;\n}\nfunction mapRefState(refState, mapper, reverseMapper) {\n  let last = null;\n  return {\n    get current() {\n      const input = refState.current;\n      if (last === null || input !== last[0]) {\n        last = [input, mapper(input)];\n      }\n      return last[1];\n    },\n    set(updater) {\n      const value = typeof updater === \"function\" ? updater(this.current) : updater;\n      refState.set(reverseMapper(refState.current, value));\n    }\n  };\n}\nvar NoSuspenseBoundaryError = class extends Error {\n  constructor(options) {\n    super((0,_strings_js__WEBPACK_IMPORTED_MODULE_3__.deindent)`\n      ${options.caller ?? \"This code path\"} attempted to display a loading indicator, but didn't find a Suspense boundary above it. Please read the error message below carefully.\n      \n      The fix depends on which of the 3 scenarios caused it:\n      \n      1. You are missing a loading.tsx file in your app directory. Fix it by adding a loading.tsx file in your app directory.\n\n      2. The component is rendered in the root (outermost) layout.tsx or template.tsx file. Next.js does not wrap those files in a Suspense boundary, even if there is a loading.tsx file in the same folder. To fix it, wrap your layout inside a route group like this:\n\n        - app\n        - - layout.tsx  // contains <html> and <body>, alongside providers and other components that don't need ${options.caller ?? \"this code path\"}\n        - - loading.tsx  // required for suspense\n        - - (main)\n        - - - layout.tsx  // contains the main layout of your app, like a sidebar or a header, and can use ${options.caller ?? \"this code path\"}\n        - - - route.tsx  // your actual main page\n        - - - the rest of your app\n\n        For more information on this approach, see Next's documentation on route groups: https://nextjs.org/docs/app/building-your-application/routing/route-groups\n      \n      3. You caught this error with try-catch or a custom error boundary. Fix this by rethrowing the error or not catching it in the first place.\n\n      See: https://nextjs.org/docs/messages/missing-suspense-with-csr-bailout\n\n      More information on SSR and Suspense boundaries: https://react.dev/reference/react/Suspense#providing-a-fallback-for-server-errors-and-client-only-content\n    `);\n    this.name = \"NoSuspenseBoundaryError\";\n    this.reason = options.caller ?? \"suspendIfSsr()\";\n    this.digest = \"BAILOUT_TO_CLIENT_SIDE_RENDERING\";\n  }\n};\nfunction suspendIfSsr(caller) {\n  if (!(0,_env_js__WEBPACK_IMPORTED_MODULE_1__.isBrowserLike)()) {\n    throw new NoSuspenseBoundaryError({ caller });\n  }\n}\n\n//# sourceMappingURL=react.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvcmVhY3QuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUMwQjtBQUNlO0FBQ0k7QUFDTDtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isc0RBQWE7QUFDL0I7QUFDQTtBQUNBLFdBQVcsdURBQWdCO0FBQzNCLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxLQUFLO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLFlBQVk7QUFDcEQ7QUFDQTtBQUNBLEVBQUUsZ0RBQVMsQ0FBQywwREFBWTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIscURBQWM7QUFDckMsY0FBYyxtREFBWTtBQUMxQixtQkFBbUIsd0RBQWlCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsY0FBYyxvREFBYTtBQUMzQjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUscURBQVE7QUFDbEIsUUFBUSxvQ0FBb0M7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxrSEFBa0g7QUFDbEg7QUFDQTtBQUNBLDZHQUE2RztBQUM3RztBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxzREFBYTtBQUNwQix3Q0FBd0MsUUFBUTtBQUNoRDtBQUNBO0FBV0U7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2dmeDJlZGVub2FzaXMvRG93bmxvYWRzL0RldmVsb3BtZW50L0VzcGFkYS9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvcmVhY3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3V0aWxzL3JlYWN0LnRzeFxuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgaXNCcm93c2VyTGlrZSB9IGZyb20gXCIuL2Vudi5qc1wiO1xuaW1wb3J0IHsgbmV2ZXJSZXNvbHZlIH0gZnJvbSBcIi4vcHJvbWlzZXMuanNcIjtcbmltcG9ydCB7IGRlaW5kZW50IH0gZnJvbSBcIi4vc3RyaW5ncy5qc1wiO1xuZnVuY3Rpb24gY29tcG9uZW50V3JhcHBlcihkaXNwbGF5TmFtZSwgcmVuZGVyKSB7XG4gIGNvbnN0IENvbXBvbmVudCA9IGZvcndhcmRSZWZJZk5lZWRlZChyZW5kZXIpO1xuICBDb21wb25lbnQuZGlzcGxheU5hbWUgPSBkaXNwbGF5TmFtZTtcbiAgcmV0dXJuIENvbXBvbmVudDtcbn1cbmZ1bmN0aW9uIGZvcndhcmRSZWZJZk5lZWRlZChyZW5kZXIpIHtcbiAgY29uc3QgdmVyc2lvbiA9IFJlYWN0LnZlcnNpb247XG4gIGNvbnN0IG1ham9yID0gcGFyc2VJbnQodmVyc2lvbi5zcGxpdChcIi5cIilbMF0pO1xuICBpZiAobWFqb3IgPCAxOSkge1xuICAgIHJldHVybiBSZWFjdC5mb3J3YXJkUmVmKHJlbmRlcik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIChwcm9wcykgPT4gcmVuZGVyKHByb3BzLCBwcm9wcy5yZWYpO1xuICB9XG59XG5mdW5jdGlvbiBnZXROb2RlVGV4dChub2RlKSB7XG4gIGlmIChbXCJudW1iZXJcIiwgXCJzdHJpbmdcIl0uaW5jbHVkZXModHlwZW9mIG5vZGUpKSB7XG4gICAgcmV0dXJuIGAke25vZGV9YDtcbiAgfVxuICBpZiAoIW5vZGUpIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShub2RlKSkge1xuICAgIHJldHVybiBub2RlLm1hcChnZXROb2RlVGV4dCkuam9pbihcIlwiKTtcbiAgfVxuICBpZiAodHlwZW9mIG5vZGUgPT09IFwib2JqZWN0XCIgJiYgXCJwcm9wc1wiIGluIG5vZGUpIHtcbiAgICByZXR1cm4gZ2V0Tm9kZVRleHQobm9kZS5wcm9wcy5jaGlsZHJlbik7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIG5vZGUgdHlwZTogJHt0eXBlb2Ygbm9kZX1gKTtcbn1cbmZ1bmN0aW9uIHN1c3BlbmQoKSB7XG4gIFJlYWN0LnVzZShuZXZlclJlc29sdmUoKSk7XG4gIHRocm93IG5ldyBFcnJvcihcIlNvbWVob3cgYSBQcm9taXNlIHRoYXQgbmV2ZXIgcmVzb2x2ZXMgd2FzIHJlc29sdmVkP1wiKTtcbn1cbmZ1bmN0aW9uIG1hcFJlZihyZWYsIG1hcHBlcikge1xuICBsZXQgbGFzdCA9IG51bGw7XG4gIHJldHVybiB7XG4gICAgZ2V0IGN1cnJlbnQoKSB7XG4gICAgICBjb25zdCBpbnB1dCA9IHJlZi5jdXJyZW50O1xuICAgICAgaWYgKGxhc3QgPT09IG51bGwgfHwgaW5wdXQgIT09IGxhc3RbMF0pIHtcbiAgICAgICAgbGFzdCA9IFtpbnB1dCwgbWFwcGVyKGlucHV0KV07XG4gICAgICB9XG4gICAgICByZXR1cm4gbGFzdFsxXTtcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiB1c2VSZWZTdGF0ZShpbml0aWFsVmFsdWUpIHtcbiAgY29uc3QgWywgc2V0U3RhdGVdID0gUmVhY3QudXNlU3RhdGUoaW5pdGlhbFZhbHVlKTtcbiAgY29uc3QgcmVmID0gUmVhY3QudXNlUmVmKGluaXRpYWxWYWx1ZSk7XG4gIGNvbnN0IHNldFZhbHVlID0gUmVhY3QudXNlQ2FsbGJhY2soKHVwZGF0ZXIpID0+IHtcbiAgICBjb25zdCB2YWx1ZSA9IHR5cGVvZiB1cGRhdGVyID09PSBcImZ1bmN0aW9uXCIgPyB1cGRhdGVyKHJlZi5jdXJyZW50KSA6IHVwZGF0ZXI7XG4gICAgY29uc29sZS5sb2coXCJzZXRWYWx1ZVwiLCByZWYuY3VycmVudCk7XG4gICAgcmVmLmN1cnJlbnQgPSB2YWx1ZTtcbiAgICBjb25zb2xlLmxvZyhcInNldFZhbHVlXCIsIHJlZi5jdXJyZW50KTtcbiAgICBzZXRTdGF0ZSh2YWx1ZSk7XG4gIH0sIFtdKTtcbiAgY29uc3QgcmVzID0gUmVhY3QudXNlTWVtbygoKSA9PiAoe1xuICAgIGdldCBjdXJyZW50KCkge1xuICAgICAgcmV0dXJuIHJlZi5jdXJyZW50O1xuICAgIH0sXG4gICAgc2V0OiBzZXRWYWx1ZVxuICB9KSwgW3NldFZhbHVlXSk7XG4gIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiBtYXBSZWZTdGF0ZShyZWZTdGF0ZSwgbWFwcGVyLCByZXZlcnNlTWFwcGVyKSB7XG4gIGxldCBsYXN0ID0gbnVsbDtcbiAgcmV0dXJuIHtcbiAgICBnZXQgY3VycmVudCgpIHtcbiAgICAgIGNvbnN0IGlucHV0ID0gcmVmU3RhdGUuY3VycmVudDtcbiAgICAgIGlmIChsYXN0ID09PSBudWxsIHx8IGlucHV0ICE9PSBsYXN0WzBdKSB7XG4gICAgICAgIGxhc3QgPSBbaW5wdXQsIG1hcHBlcihpbnB1dCldO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGxhc3RbMV07XG4gICAgfSxcbiAgICBzZXQodXBkYXRlcikge1xuICAgICAgY29uc3QgdmFsdWUgPSB0eXBlb2YgdXBkYXRlciA9PT0gXCJmdW5jdGlvblwiID8gdXBkYXRlcih0aGlzLmN1cnJlbnQpIDogdXBkYXRlcjtcbiAgICAgIHJlZlN0YXRlLnNldChyZXZlcnNlTWFwcGVyKHJlZlN0YXRlLmN1cnJlbnQsIHZhbHVlKSk7XG4gICAgfVxuICB9O1xufVxudmFyIE5vU3VzcGVuc2VCb3VuZGFyeUVycm9yID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBzdXBlcihkZWluZGVudGBcbiAgICAgICR7b3B0aW9ucy5jYWxsZXIgPz8gXCJUaGlzIGNvZGUgcGF0aFwifSBhdHRlbXB0ZWQgdG8gZGlzcGxheSBhIGxvYWRpbmcgaW5kaWNhdG9yLCBidXQgZGlkbid0IGZpbmQgYSBTdXNwZW5zZSBib3VuZGFyeSBhYm92ZSBpdC4gUGxlYXNlIHJlYWQgdGhlIGVycm9yIG1lc3NhZ2UgYmVsb3cgY2FyZWZ1bGx5LlxuICAgICAgXG4gICAgICBUaGUgZml4IGRlcGVuZHMgb24gd2hpY2ggb2YgdGhlIDMgc2NlbmFyaW9zIGNhdXNlZCBpdDpcbiAgICAgIFxuICAgICAgMS4gWW91IGFyZSBtaXNzaW5nIGEgbG9hZGluZy50c3ggZmlsZSBpbiB5b3VyIGFwcCBkaXJlY3RvcnkuIEZpeCBpdCBieSBhZGRpbmcgYSBsb2FkaW5nLnRzeCBmaWxlIGluIHlvdXIgYXBwIGRpcmVjdG9yeS5cblxuICAgICAgMi4gVGhlIGNvbXBvbmVudCBpcyByZW5kZXJlZCBpbiB0aGUgcm9vdCAob3V0ZXJtb3N0KSBsYXlvdXQudHN4IG9yIHRlbXBsYXRlLnRzeCBmaWxlLiBOZXh0LmpzIGRvZXMgbm90IHdyYXAgdGhvc2UgZmlsZXMgaW4gYSBTdXNwZW5zZSBib3VuZGFyeSwgZXZlbiBpZiB0aGVyZSBpcyBhIGxvYWRpbmcudHN4IGZpbGUgaW4gdGhlIHNhbWUgZm9sZGVyLiBUbyBmaXggaXQsIHdyYXAgeW91ciBsYXlvdXQgaW5zaWRlIGEgcm91dGUgZ3JvdXAgbGlrZSB0aGlzOlxuXG4gICAgICAgIC0gYXBwXG4gICAgICAgIC0gLSBsYXlvdXQudHN4ICAvLyBjb250YWlucyA8aHRtbD4gYW5kIDxib2R5PiwgYWxvbmdzaWRlIHByb3ZpZGVycyBhbmQgb3RoZXIgY29tcG9uZW50cyB0aGF0IGRvbid0IG5lZWQgJHtvcHRpb25zLmNhbGxlciA/PyBcInRoaXMgY29kZSBwYXRoXCJ9XG4gICAgICAgIC0gLSBsb2FkaW5nLnRzeCAgLy8gcmVxdWlyZWQgZm9yIHN1c3BlbnNlXG4gICAgICAgIC0gLSAobWFpbilcbiAgICAgICAgLSAtIC0gbGF5b3V0LnRzeCAgLy8gY29udGFpbnMgdGhlIG1haW4gbGF5b3V0IG9mIHlvdXIgYXBwLCBsaWtlIGEgc2lkZWJhciBvciBhIGhlYWRlciwgYW5kIGNhbiB1c2UgJHtvcHRpb25zLmNhbGxlciA/PyBcInRoaXMgY29kZSBwYXRoXCJ9XG4gICAgICAgIC0gLSAtIHJvdXRlLnRzeCAgLy8geW91ciBhY3R1YWwgbWFpbiBwYWdlXG4gICAgICAgIC0gLSAtIHRoZSByZXN0IG9mIHlvdXIgYXBwXG5cbiAgICAgICAgRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gdGhpcyBhcHByb2FjaCwgc2VlIE5leHQncyBkb2N1bWVudGF0aW9uIG9uIHJvdXRlIGdyb3VwczogaHR0cHM6Ly9uZXh0anMub3JnL2RvY3MvYXBwL2J1aWxkaW5nLXlvdXItYXBwbGljYXRpb24vcm91dGluZy9yb3V0ZS1ncm91cHNcbiAgICAgIFxuICAgICAgMy4gWW91IGNhdWdodCB0aGlzIGVycm9yIHdpdGggdHJ5LWNhdGNoIG9yIGEgY3VzdG9tIGVycm9yIGJvdW5kYXJ5LiBGaXggdGhpcyBieSByZXRocm93aW5nIHRoZSBlcnJvciBvciBub3QgY2F0Y2hpbmcgaXQgaW4gdGhlIGZpcnN0IHBsYWNlLlxuXG4gICAgICBTZWU6IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL21lc3NhZ2VzL21pc3Npbmctc3VzcGVuc2Utd2l0aC1jc3ItYmFpbG91dFxuXG4gICAgICBNb3JlIGluZm9ybWF0aW9uIG9uIFNTUiBhbmQgU3VzcGVuc2UgYm91bmRhcmllczogaHR0cHM6Ly9yZWFjdC5kZXYvcmVmZXJlbmNlL3JlYWN0L1N1c3BlbnNlI3Byb3ZpZGluZy1hLWZhbGxiYWNrLWZvci1zZXJ2ZXItZXJyb3JzLWFuZC1jbGllbnQtb25seS1jb250ZW50XG4gICAgYCk7XG4gICAgdGhpcy5uYW1lID0gXCJOb1N1c3BlbnNlQm91bmRhcnlFcnJvclwiO1xuICAgIHRoaXMucmVhc29uID0gb3B0aW9ucy5jYWxsZXIgPz8gXCJzdXNwZW5kSWZTc3IoKVwiO1xuICAgIHRoaXMuZGlnZXN0ID0gXCJCQUlMT1VUX1RPX0NMSUVOVF9TSURFX1JFTkRFUklOR1wiO1xuICB9XG59O1xuZnVuY3Rpb24gc3VzcGVuZElmU3NyKGNhbGxlcikge1xuICBpZiAoIWlzQnJvd3Nlckxpa2UoKSkge1xuICAgIHRocm93IG5ldyBOb1N1c3BlbnNlQm91bmRhcnlFcnJvcih7IGNhbGxlciB9KTtcbiAgfVxufVxuZXhwb3J0IHtcbiAgTm9TdXNwZW5zZUJvdW5kYXJ5RXJyb3IsXG4gIGNvbXBvbmVudFdyYXBwZXIsXG4gIGZvcndhcmRSZWZJZk5lZWRlZCxcbiAgZ2V0Tm9kZVRleHQsXG4gIG1hcFJlZixcbiAgbWFwUmVmU3RhdGUsXG4gIHN1c3BlbmQsXG4gIHN1c3BlbmRJZlNzcixcbiAgdXNlUmVmU3RhdGVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFjdC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/react.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/results.js":
/*!*********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/results.js ***!
  \*********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncResult: () => (/* binding */ AsyncResult),\n/* harmony export */   Result: () => (/* binding */ Result)\n/* harmony export */ });\n/* harmony import */ var _promises_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./promises.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/promises.js\");\n/* harmony import */ var _strings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./strings.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/strings.js\");\n// src/utils/results.tsx\n\n\nvar Result = {\n  fromThrowing,\n  fromThrowingAsync,\n  fromPromise: promiseToResult,\n  ok(data) {\n    return {\n      status: \"ok\",\n      data\n    };\n  },\n  error(error) {\n    return {\n      status: \"error\",\n      error\n    };\n  },\n  map: mapResult,\n  or: (result, fallback) => {\n    return result.status === \"ok\" ? result.data : fallback;\n  },\n  orThrow: (result) => {\n    if (result.status === \"error\") {\n      throw result.error;\n    }\n    return result.data;\n  },\n  orThrowAsync: async (result) => {\n    return Result.orThrow(await result);\n  },\n  retry\n};\nvar AsyncResult = {\n  fromThrowing,\n  fromPromise: promiseToResult,\n  ok: Result.ok,\n  error: Result.error,\n  pending,\n  map: mapResult,\n  or: (result, fallback) => {\n    if (result.status === \"pending\") {\n      return fallback;\n    }\n    return Result.or(result, fallback);\n  },\n  orThrow: (result) => {\n    if (result.status === \"pending\") {\n      throw new Error(\"Result still pending\");\n    }\n    return Result.orThrow(result);\n  },\n  retry\n};\nfunction pending(progress) {\n  return {\n    status: \"pending\",\n    progress\n  };\n}\nasync function promiseToResult(promise) {\n  try {\n    const value = await promise;\n    return Result.ok(value);\n  } catch (error) {\n    return Result.error(error);\n  }\n}\nfunction fromThrowing(fn) {\n  try {\n    return Result.ok(fn());\n  } catch (error) {\n    return Result.error(error);\n  }\n}\nasync function fromThrowingAsync(fn) {\n  try {\n    return Result.ok(await fn());\n  } catch (error) {\n    return Result.error(error);\n  }\n}\nfunction mapResult(result, fn) {\n  if (result.status === \"error\") return {\n    status: \"error\",\n    error: result.error\n  };\n  if (result.status === \"pending\") return {\n    status: \"pending\",\n    ...\"progress\" in result ? { progress: result.progress } : {}\n  };\n  return Result.ok(fn(result.data));\n}\nvar RetryError = class extends AggregateError {\n  constructor(errors) {\n    const strings = errors.map((e) => (0,_strings_js__WEBPACK_IMPORTED_MODULE_1__.nicify)(e));\n    const isAllSame = strings.length > 1 && strings.every((s) => s === strings[0]);\n    super(\n      errors,\n      (0,_strings_js__WEBPACK_IMPORTED_MODULE_1__.deindent)`\n      Error after ${errors.length} attempts.\n      \n      ${isAllSame ? (0,_strings_js__WEBPACK_IMPORTED_MODULE_1__.deindent)`\n        Attempts 1-${errors.length}:\n          ${strings[0]}\n      ` : strings.map((s, i) => (0,_strings_js__WEBPACK_IMPORTED_MODULE_1__.deindent)`\n          Attempt ${i + 1}:\n            ${s}\n        `).join(\"\\n\\n\")}\n      `,\n      { cause: errors[errors.length - 1] }\n    );\n    this.errors = errors;\n    this.name = \"RetryError\";\n  }\n  get attempts() {\n    return this.errors.length;\n  }\n};\nRetryError.prototype.name = \"RetryError\";\nasync function retry(fn, totalAttempts, { exponentialDelayBase = 1e3 } = {}) {\n  const errors = [];\n  for (let i = 0; i < totalAttempts; i++) {\n    const res = await fn(i);\n    if (res.status === \"ok\") {\n      return Object.assign(Result.ok(res.data), { attempts: i + 1 });\n    } else {\n      errors.push(res.error);\n      if (i < totalAttempts - 1) {\n        await (0,_promises_js__WEBPACK_IMPORTED_MODULE_0__.wait)((Math.random() + 0.5) * exponentialDelayBase * 2 ** i);\n      }\n    }\n  }\n  return Object.assign(Result.error(new RetryError(errors)), { attempts: totalAttempts });\n}\n\n//# sourceMappingURL=results.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvcmVzdWx0cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDcUM7QUFDVztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyw0QkFBNEI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxtREFBTTtBQUM1QztBQUNBO0FBQ0E7QUFDQSxNQUFNLHFEQUFRO0FBQ2Qsb0JBQW9CLGVBQWU7QUFDbkM7QUFDQSxRQUFRLFlBQVkscURBQVE7QUFDNUIscUJBQXFCLGNBQWM7QUFDbkMsWUFBWTtBQUNaLGdDQUFnQyxxREFBUTtBQUN4QyxvQkFBb0IsTUFBTTtBQUMxQixjQUFjO0FBQ2Q7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsNkJBQTZCLElBQUk7QUFDM0U7QUFDQSxrQkFBa0IsbUJBQW1CO0FBQ3JDO0FBQ0E7QUFDQSxrREFBa0QsaUJBQWlCO0FBQ25FLE1BQU07QUFDTjtBQUNBO0FBQ0EsY0FBYyxrREFBSTtBQUNsQjtBQUNBO0FBQ0E7QUFDQSwrREFBK0QseUJBQXlCO0FBQ3hGO0FBSUU7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2dmeDJlZGVub2FzaXMvRG93bmxvYWRzL0RldmVsb3BtZW50L0VzcGFkYS9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvcmVzdWx0cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvcmVzdWx0cy50c3hcbmltcG9ydCB7IHdhaXQgfSBmcm9tIFwiLi9wcm9taXNlcy5qc1wiO1xuaW1wb3J0IHsgZGVpbmRlbnQsIG5pY2lmeSB9IGZyb20gXCIuL3N0cmluZ3MuanNcIjtcbnZhciBSZXN1bHQgPSB7XG4gIGZyb21UaHJvd2luZyxcbiAgZnJvbVRocm93aW5nQXN5bmMsXG4gIGZyb21Qcm9taXNlOiBwcm9taXNlVG9SZXN1bHQsXG4gIG9rKGRhdGEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiBcIm9rXCIsXG4gICAgICBkYXRhXG4gICAgfTtcbiAgfSxcbiAgZXJyb3IoZXJyb3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICBlcnJvclxuICAgIH07XG4gIH0sXG4gIG1hcDogbWFwUmVzdWx0LFxuICBvcjogKHJlc3VsdCwgZmFsbGJhY2spID0+IHtcbiAgICByZXR1cm4gcmVzdWx0LnN0YXR1cyA9PT0gXCJva1wiID8gcmVzdWx0LmRhdGEgOiBmYWxsYmFjaztcbiAgfSxcbiAgb3JUaHJvdzogKHJlc3VsdCkgPT4ge1xuICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImVycm9yXCIpIHtcbiAgICAgIHRocm93IHJlc3VsdC5lcnJvcjtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICB9LFxuICBvclRocm93QXN5bmM6IGFzeW5jIChyZXN1bHQpID0+IHtcbiAgICByZXR1cm4gUmVzdWx0Lm9yVGhyb3coYXdhaXQgcmVzdWx0KTtcbiAgfSxcbiAgcmV0cnlcbn07XG52YXIgQXN5bmNSZXN1bHQgPSB7XG4gIGZyb21UaHJvd2luZyxcbiAgZnJvbVByb21pc2U6IHByb21pc2VUb1Jlc3VsdCxcbiAgb2s6IFJlc3VsdC5vayxcbiAgZXJyb3I6IFJlc3VsdC5lcnJvcixcbiAgcGVuZGluZyxcbiAgbWFwOiBtYXBSZXN1bHQsXG4gIG9yOiAocmVzdWx0LCBmYWxsYmFjaykgPT4ge1xuICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcInBlbmRpbmdcIikge1xuICAgICAgcmV0dXJuIGZhbGxiYWNrO1xuICAgIH1cbiAgICByZXR1cm4gUmVzdWx0Lm9yKHJlc3VsdCwgZmFsbGJhY2spO1xuICB9LFxuICBvclRocm93OiAocmVzdWx0KSA9PiB7XG4gICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwicGVuZGluZ1wiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZXN1bHQgc3RpbGwgcGVuZGluZ1wiKTtcbiAgICB9XG4gICAgcmV0dXJuIFJlc3VsdC5vclRocm93KHJlc3VsdCk7XG4gIH0sXG4gIHJldHJ5XG59O1xuZnVuY3Rpb24gcGVuZGluZyhwcm9ncmVzcykge1xuICByZXR1cm4ge1xuICAgIHN0YXR1czogXCJwZW5kaW5nXCIsXG4gICAgcHJvZ3Jlc3NcbiAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHByb21pc2VUb1Jlc3VsdChwcm9taXNlKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdmFsdWUgPSBhd2FpdCBwcm9taXNlO1xuICAgIHJldHVybiBSZXN1bHQub2sodmFsdWUpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBSZXN1bHQuZXJyb3IoZXJyb3IpO1xuICB9XG59XG5mdW5jdGlvbiBmcm9tVGhyb3dpbmcoZm4pIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gUmVzdWx0Lm9rKGZuKCkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBSZXN1bHQuZXJyb3IoZXJyb3IpO1xuICB9XG59XG5hc3luYyBmdW5jdGlvbiBmcm9tVGhyb3dpbmdBc3luYyhmbikge1xuICB0cnkge1xuICAgIHJldHVybiBSZXN1bHQub2soYXdhaXQgZm4oKSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIFJlc3VsdC5lcnJvcihlcnJvcik7XG4gIH1cbn1cbmZ1bmN0aW9uIG1hcFJlc3VsdChyZXN1bHQsIGZuKSB7XG4gIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImVycm9yXCIpIHJldHVybiB7XG4gICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgZXJyb3I6IHJlc3VsdC5lcnJvclxuICB9O1xuICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJwZW5kaW5nXCIpIHJldHVybiB7XG4gICAgc3RhdHVzOiBcInBlbmRpbmdcIixcbiAgICAuLi5cInByb2dyZXNzXCIgaW4gcmVzdWx0ID8geyBwcm9ncmVzczogcmVzdWx0LnByb2dyZXNzIH0gOiB7fVxuICB9O1xuICByZXR1cm4gUmVzdWx0Lm9rKGZuKHJlc3VsdC5kYXRhKSk7XG59XG52YXIgUmV0cnlFcnJvciA9IGNsYXNzIGV4dGVuZHMgQWdncmVnYXRlRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihlcnJvcnMpIHtcbiAgICBjb25zdCBzdHJpbmdzID0gZXJyb3JzLm1hcCgoZSkgPT4gbmljaWZ5KGUpKTtcbiAgICBjb25zdCBpc0FsbFNhbWUgPSBzdHJpbmdzLmxlbmd0aCA+IDEgJiYgc3RyaW5ncy5ldmVyeSgocykgPT4gcyA9PT0gc3RyaW5nc1swXSk7XG4gICAgc3VwZXIoXG4gICAgICBlcnJvcnMsXG4gICAgICBkZWluZGVudGBcbiAgICAgIEVycm9yIGFmdGVyICR7ZXJyb3JzLmxlbmd0aH0gYXR0ZW1wdHMuXG4gICAgICBcbiAgICAgICR7aXNBbGxTYW1lID8gZGVpbmRlbnRgXG4gICAgICAgIEF0dGVtcHRzIDEtJHtlcnJvcnMubGVuZ3RofTpcbiAgICAgICAgICAke3N0cmluZ3NbMF19XG4gICAgICBgIDogc3RyaW5ncy5tYXAoKHMsIGkpID0+IGRlaW5kZW50YFxuICAgICAgICAgIEF0dGVtcHQgJHtpICsgMX06XG4gICAgICAgICAgICAke3N9XG4gICAgICAgIGApLmpvaW4oXCJcXG5cXG5cIil9XG4gICAgICBgLFxuICAgICAgeyBjYXVzZTogZXJyb3JzW2Vycm9ycy5sZW5ndGggLSAxXSB9XG4gICAgKTtcbiAgICB0aGlzLmVycm9ycyA9IGVycm9ycztcbiAgICB0aGlzLm5hbWUgPSBcIlJldHJ5RXJyb3JcIjtcbiAgfVxuICBnZXQgYXR0ZW1wdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZXJyb3JzLmxlbmd0aDtcbiAgfVxufTtcblJldHJ5RXJyb3IucHJvdG90eXBlLm5hbWUgPSBcIlJldHJ5RXJyb3JcIjtcbmFzeW5jIGZ1bmN0aW9uIHJldHJ5KGZuLCB0b3RhbEF0dGVtcHRzLCB7IGV4cG9uZW50aWFsRGVsYXlCYXNlID0gMWUzIH0gPSB7fSkge1xuICBjb25zdCBlcnJvcnMgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbEF0dGVtcHRzOyBpKyspIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmbihpKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJva1wiKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihSZXN1bHQub2socmVzLmRhdGEpLCB7IGF0dGVtcHRzOiBpICsgMSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXJyb3JzLnB1c2gocmVzLmVycm9yKTtcbiAgICAgIGlmIChpIDwgdG90YWxBdHRlbXB0cyAtIDEpIHtcbiAgICAgICAgYXdhaXQgd2FpdCgoTWF0aC5yYW5kb20oKSArIDAuNSkgKiBleHBvbmVudGlhbERlbGF5QmFzZSAqIDIgKiogaSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBPYmplY3QuYXNzaWduKFJlc3VsdC5lcnJvcihuZXcgUmV0cnlFcnJvcihlcnJvcnMpKSwgeyBhdHRlbXB0czogdG90YWxBdHRlbXB0cyB9KTtcbn1cbmV4cG9ydCB7XG4gIEFzeW5jUmVzdWx0LFxuICBSZXN1bHRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXN1bHRzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/results.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/stores.js":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/stores.js ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncStore: () => (/* binding */ AsyncStore),\n/* harmony export */   Store: () => (/* binding */ Store),\n/* harmony export */   storeLock: () => (/* binding */ storeLock)\n/* harmony export */ });\n/* harmony import */ var _locks_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./locks.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/locks.js\");\n/* harmony import */ var _promises_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./promises.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/promises.js\");\n/* harmony import */ var _results_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./results.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/results.js\");\n/* harmony import */ var _uuids_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./uuids.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/uuids.js\");\n// src/utils/stores.tsx\n\n\n\n\nvar Store = class {\n  constructor(_value) {\n    this._value = _value;\n    this._callbacks = /* @__PURE__ */ new Map();\n  }\n  get() {\n    return this._value;\n  }\n  set(value) {\n    const oldValue = this._value;\n    this._value = value;\n    this._callbacks.forEach((callback) => callback(value, oldValue));\n  }\n  update(updater) {\n    const value = updater(this._value);\n    this.set(value);\n    return value;\n  }\n  onChange(callback) {\n    const uuid = (0,_uuids_js__WEBPACK_IMPORTED_MODULE_3__.generateUuid)();\n    this._callbacks.set(uuid, callback);\n    return {\n      unsubscribe: () => {\n        this._callbacks.delete(uuid);\n      }\n    };\n  }\n  onceChange(callback) {\n    const { unsubscribe } = this.onChange((...args) => {\n      unsubscribe();\n      callback(...args);\n    });\n    return { unsubscribe };\n  }\n};\nvar storeLock = new _locks_js__WEBPACK_IMPORTED_MODULE_0__.ReadWriteLock();\nvar AsyncStore = class _AsyncStore {\n  constructor(...args) {\n    this._mostRecentOkValue = void 0;\n    this._isRejected = false;\n    this._waitingRejectFunctions = /* @__PURE__ */ new Map();\n    this._callbacks = /* @__PURE__ */ new Map();\n    this._updateCounter = 0;\n    this._lastSuccessfulUpdate = -1;\n    if (args.length === 0) {\n      this._isAvailable = false;\n    } else {\n      this._isAvailable = true;\n      this._mostRecentOkValue = args[0];\n    }\n  }\n  isAvailable() {\n    return this._isAvailable;\n  }\n  isRejected() {\n    return this._isRejected;\n  }\n  get() {\n    if (this.isRejected()) {\n      return _results_js__WEBPACK_IMPORTED_MODULE_2__.AsyncResult.error(this._rejectionError);\n    } else if (this.isAvailable()) {\n      return _results_js__WEBPACK_IMPORTED_MODULE_2__.AsyncResult.ok(this._mostRecentOkValue);\n    } else {\n      return _results_js__WEBPACK_IMPORTED_MODULE_2__.AsyncResult.pending();\n    }\n  }\n  getOrWait() {\n    const uuid = (0,_uuids_js__WEBPACK_IMPORTED_MODULE_3__.generateUuid)();\n    if (this.isRejected()) {\n      return (0,_promises_js__WEBPACK_IMPORTED_MODULE_1__.rejected)(this._rejectionError);\n    } else if (this.isAvailable()) {\n      return (0,_promises_js__WEBPACK_IMPORTED_MODULE_1__.resolved)(this._mostRecentOkValue);\n    }\n    const promise = new Promise((resolve, reject) => {\n      this.onceChange((value) => {\n        resolve(value);\n      });\n      this._waitingRejectFunctions.set(uuid, reject);\n    });\n    const withFinally = promise.finally(() => {\n      this._waitingRejectFunctions.delete(uuid);\n    });\n    return (0,_promises_js__WEBPACK_IMPORTED_MODULE_1__.pending)(withFinally);\n  }\n  _setIfLatest(result, curCounter) {\n    const oldState = this.get();\n    const oldValue = this._mostRecentOkValue;\n    if (curCounter > this._lastSuccessfulUpdate) {\n      switch (result.status) {\n        case \"ok\": {\n          if (!this._isAvailable || this._isRejected || this._mostRecentOkValue !== result.data) {\n            this._lastSuccessfulUpdate = curCounter;\n            this._isAvailable = true;\n            this._isRejected = false;\n            this._mostRecentOkValue = result.data;\n            this._rejectionError = void 0;\n            this._callbacks.forEach((callback) => callback({\n              state: this.get(),\n              oldState,\n              lastOkValue: oldValue\n            }));\n            return true;\n          }\n          return false;\n        }\n        case \"error\": {\n          this._lastSuccessfulUpdate = curCounter;\n          this._isAvailable = false;\n          this._isRejected = true;\n          this._rejectionError = result.error;\n          this._waitingRejectFunctions.forEach((reject) => reject(result.error));\n          this._callbacks.forEach((callback) => callback({\n            state: this.get(),\n            oldState,\n            lastOkValue: oldValue\n          }));\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n  set(value) {\n    this._setIfLatest(_results_js__WEBPACK_IMPORTED_MODULE_2__.Result.ok(value), ++this._updateCounter);\n  }\n  update(updater) {\n    const value = updater(this._mostRecentOkValue);\n    this.set(value);\n    return value;\n  }\n  async setAsync(promise) {\n    return await storeLock.withReadLock(async () => {\n      const curCounter = ++this._updateCounter;\n      const result = await _results_js__WEBPACK_IMPORTED_MODULE_2__.Result.fromPromise(promise);\n      return this._setIfLatest(result, curCounter);\n    });\n  }\n  setUnavailable() {\n    this._lastSuccessfulUpdate = ++this._updateCounter;\n    this._isAvailable = false;\n    this._isRejected = false;\n    this._rejectionError = void 0;\n  }\n  setRejected(error) {\n    this._setIfLatest(_results_js__WEBPACK_IMPORTED_MODULE_2__.Result.error(error), ++this._updateCounter);\n  }\n  map(mapper) {\n    const store = new _AsyncStore();\n    this.onChange((value) => {\n      store.set(mapper(value));\n    });\n    return store;\n  }\n  onChange(callback) {\n    return this.onStateChange(({ state, lastOkValue }) => {\n      if (state.status === \"ok\") {\n        callback(state.data, lastOkValue);\n      }\n    });\n  }\n  onStateChange(callback) {\n    const uuid = (0,_uuids_js__WEBPACK_IMPORTED_MODULE_3__.generateUuid)();\n    this._callbacks.set(uuid, callback);\n    return {\n      unsubscribe: () => {\n        this._callbacks.delete(uuid);\n      }\n    };\n  }\n  onceChange(callback) {\n    const { unsubscribe } = this.onChange((...args) => {\n      unsubscribe();\n      callback(...args);\n    });\n    return { unsubscribe };\n  }\n  onceStateChange(callback) {\n    const { unsubscribe } = this.onStateChange((...args) => {\n      unsubscribe();\n      callback(...args);\n    });\n    return { unsubscribe };\n  }\n};\n\n//# sourceMappingURL=stores.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvc3RvcmVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUMyQztBQUNpQjtBQUNUO0FBQ1Q7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsdURBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksY0FBYztBQUMxQjtBQUNBO0FBQ0EsS0FBSztBQUNMLGFBQWE7QUFDYjtBQUNBO0FBQ0Esb0JBQW9CLG9EQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsb0RBQVc7QUFDeEIsTUFBTTtBQUNOLGFBQWEsb0RBQVc7QUFDeEIsTUFBTTtBQUNOLGFBQWEsb0RBQVc7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHVEQUFZO0FBQzdCO0FBQ0EsYUFBYSxzREFBUTtBQUNyQixNQUFNO0FBQ04sYUFBYSxzREFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMLFdBQVcscURBQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLCtDQUFNO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiwrQ0FBTTtBQUNqQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLCtDQUFNO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLG9CQUFvQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGlCQUFpQix1REFBWTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxjQUFjO0FBQzFCO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsYUFBYTtBQUNiO0FBQ0E7QUFDQSxZQUFZLGNBQWM7QUFDMUI7QUFDQTtBQUNBLEtBQUs7QUFDTCxhQUFhO0FBQ2I7QUFDQTtBQUtFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZngyZWRlbm9hc2lzL0Rvd25sb2Fkcy9EZXZlbG9wbWVudC9Fc3BhZGEvbm9kZV9tb2R1bGVzLy5wbnBtL0BzdGFja2ZyYW1lK3N0YWNrLXNoYXJlZEAyLjguNDFfQGF3cy1zZGsrY3JlZGVudGlhbC1wcm92aWRlci13ZWItaWRlbnRpdHlAMy45MDEuMF9AdHlwZV83NGRiYTAxZjZkODllNzIwODk2YjRkZjM0NTgzMzk5MC9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvZXNtL3V0aWxzL3N0b3Jlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvc3RvcmVzLnRzeFxuaW1wb3J0IHsgUmVhZFdyaXRlTG9jayB9IGZyb20gXCIuL2xvY2tzLmpzXCI7XG5pbXBvcnQgeyBwZW5kaW5nLCByZWplY3RlZCwgcmVzb2x2ZWQgfSBmcm9tIFwiLi9wcm9taXNlcy5qc1wiO1xuaW1wb3J0IHsgQXN5bmNSZXN1bHQsIFJlc3VsdCB9IGZyb20gXCIuL3Jlc3VsdHMuanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlVXVpZCB9IGZyb20gXCIuL3V1aWRzLmpzXCI7XG52YXIgU3RvcmUgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKF92YWx1ZSkge1xuICAgIHRoaXMuX3ZhbHVlID0gX3ZhbHVlO1xuICAgIHRoaXMuX2NhbGxiYWNrcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIH1cbiAgZ2V0KCkge1xuICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgfVxuICBzZXQodmFsdWUpIHtcbiAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMuX3ZhbHVlO1xuICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy5fY2FsbGJhY2tzLmZvckVhY2goKGNhbGxiYWNrKSA9PiBjYWxsYmFjayh2YWx1ZSwgb2xkVmFsdWUpKTtcbiAgfVxuICB1cGRhdGUodXBkYXRlcikge1xuICAgIGNvbnN0IHZhbHVlID0gdXBkYXRlcih0aGlzLl92YWx1ZSk7XG4gICAgdGhpcy5zZXQodmFsdWUpO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBvbkNoYW5nZShjYWxsYmFjaykge1xuICAgIGNvbnN0IHV1aWQgPSBnZW5lcmF0ZVV1aWQoKTtcbiAgICB0aGlzLl9jYWxsYmFja3Muc2V0KHV1aWQsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4ge1xuICAgICAgdW5zdWJzY3JpYmU6ICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzLmRlbGV0ZSh1dWlkKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIG9uY2VDaGFuZ2UoY2FsbGJhY2spIHtcbiAgICBjb25zdCB7IHVuc3Vic2NyaWJlIH0gPSB0aGlzLm9uQ2hhbmdlKCguLi5hcmdzKSA9PiB7XG4gICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgY2FsbGJhY2soLi4uYXJncyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHsgdW5zdWJzY3JpYmUgfTtcbiAgfVxufTtcbnZhciBzdG9yZUxvY2sgPSBuZXcgUmVhZFdyaXRlTG9jaygpO1xudmFyIEFzeW5jU3RvcmUgPSBjbGFzcyBfQXN5bmNTdG9yZSB7XG4gIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHtcbiAgICB0aGlzLl9tb3N0UmVjZW50T2tWYWx1ZSA9IHZvaWQgMDtcbiAgICB0aGlzLl9pc1JlamVjdGVkID0gZmFsc2U7XG4gICAgdGhpcy5fd2FpdGluZ1JlamVjdEZ1bmN0aW9ucyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgdGhpcy5fY2FsbGJhY2tzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICB0aGlzLl91cGRhdGVDb3VudGVyID0gMDtcbiAgICB0aGlzLl9sYXN0U3VjY2Vzc2Z1bFVwZGF0ZSA9IC0xO1xuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5faXNBdmFpbGFibGUgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faXNBdmFpbGFibGUgPSB0cnVlO1xuICAgICAgdGhpcy5fbW9zdFJlY2VudE9rVmFsdWUgPSBhcmdzWzBdO1xuICAgIH1cbiAgfVxuICBpc0F2YWlsYWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNBdmFpbGFibGU7XG4gIH1cbiAgaXNSZWplY3RlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNSZWplY3RlZDtcbiAgfVxuICBnZXQoKSB7XG4gICAgaWYgKHRoaXMuaXNSZWplY3RlZCgpKSB7XG4gICAgICByZXR1cm4gQXN5bmNSZXN1bHQuZXJyb3IodGhpcy5fcmVqZWN0aW9uRXJyb3IpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5pc0F2YWlsYWJsZSgpKSB7XG4gICAgICByZXR1cm4gQXN5bmNSZXN1bHQub2sodGhpcy5fbW9zdFJlY2VudE9rVmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gQXN5bmNSZXN1bHQucGVuZGluZygpO1xuICAgIH1cbiAgfVxuICBnZXRPcldhaXQoKSB7XG4gICAgY29uc3QgdXVpZCA9IGdlbmVyYXRlVXVpZCgpO1xuICAgIGlmICh0aGlzLmlzUmVqZWN0ZWQoKSkge1xuICAgICAgcmV0dXJuIHJlamVjdGVkKHRoaXMuX3JlamVjdGlvbkVycm9yKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNBdmFpbGFibGUoKSkge1xuICAgICAgcmV0dXJuIHJlc29sdmVkKHRoaXMuX21vc3RSZWNlbnRPa1ZhbHVlKTtcbiAgICB9XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMub25jZUNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuX3dhaXRpbmdSZWplY3RGdW5jdGlvbnMuc2V0KHV1aWQsIHJlamVjdCk7XG4gICAgfSk7XG4gICAgY29uc3Qgd2l0aEZpbmFsbHkgPSBwcm9taXNlLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgdGhpcy5fd2FpdGluZ1JlamVjdEZ1bmN0aW9ucy5kZWxldGUodXVpZCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHBlbmRpbmcod2l0aEZpbmFsbHkpO1xuICB9XG4gIF9zZXRJZkxhdGVzdChyZXN1bHQsIGN1ckNvdW50ZXIpIHtcbiAgICBjb25zdCBvbGRTdGF0ZSA9IHRoaXMuZ2V0KCk7XG4gICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLl9tb3N0UmVjZW50T2tWYWx1ZTtcbiAgICBpZiAoY3VyQ291bnRlciA+IHRoaXMuX2xhc3RTdWNjZXNzZnVsVXBkYXRlKSB7XG4gICAgICBzd2l0Y2ggKHJlc3VsdC5zdGF0dXMpIHtcbiAgICAgICAgY2FzZSBcIm9rXCI6IHtcbiAgICAgICAgICBpZiAoIXRoaXMuX2lzQXZhaWxhYmxlIHx8IHRoaXMuX2lzUmVqZWN0ZWQgfHwgdGhpcy5fbW9zdFJlY2VudE9rVmFsdWUgIT09IHJlc3VsdC5kYXRhKSB7XG4gICAgICAgICAgICB0aGlzLl9sYXN0U3VjY2Vzc2Z1bFVwZGF0ZSA9IGN1ckNvdW50ZXI7XG4gICAgICAgICAgICB0aGlzLl9pc0F2YWlsYWJsZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9pc1JlamVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLl9tb3N0UmVjZW50T2tWYWx1ZSA9IHJlc3VsdC5kYXRhO1xuICAgICAgICAgICAgdGhpcy5fcmVqZWN0aW9uRXJyb3IgPSB2b2lkIDA7XG4gICAgICAgICAgICB0aGlzLl9jYWxsYmFja3MuZm9yRWFjaCgoY2FsbGJhY2spID0+IGNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgc3RhdGU6IHRoaXMuZ2V0KCksXG4gICAgICAgICAgICAgIG9sZFN0YXRlLFxuICAgICAgICAgICAgICBsYXN0T2tWYWx1ZTogb2xkVmFsdWVcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcImVycm9yXCI6IHtcbiAgICAgICAgICB0aGlzLl9sYXN0U3VjY2Vzc2Z1bFVwZGF0ZSA9IGN1ckNvdW50ZXI7XG4gICAgICAgICAgdGhpcy5faXNBdmFpbGFibGUgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLl9pc1JlamVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLl9yZWplY3Rpb25FcnJvciA9IHJlc3VsdC5lcnJvcjtcbiAgICAgICAgICB0aGlzLl93YWl0aW5nUmVqZWN0RnVuY3Rpb25zLmZvckVhY2goKHJlamVjdCkgPT4gcmVqZWN0KHJlc3VsdC5lcnJvcikpO1xuICAgICAgICAgIHRoaXMuX2NhbGxiYWNrcy5mb3JFYWNoKChjYWxsYmFjaykgPT4gY2FsbGJhY2soe1xuICAgICAgICAgICAgc3RhdGU6IHRoaXMuZ2V0KCksXG4gICAgICAgICAgICBvbGRTdGF0ZSxcbiAgICAgICAgICAgIGxhc3RPa1ZhbHVlOiBvbGRWYWx1ZVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgc2V0KHZhbHVlKSB7XG4gICAgdGhpcy5fc2V0SWZMYXRlc3QoUmVzdWx0Lm9rKHZhbHVlKSwgKyt0aGlzLl91cGRhdGVDb3VudGVyKTtcbiAgfVxuICB1cGRhdGUodXBkYXRlcikge1xuICAgIGNvbnN0IHZhbHVlID0gdXBkYXRlcih0aGlzLl9tb3N0UmVjZW50T2tWYWx1ZSk7XG4gICAgdGhpcy5zZXQodmFsdWUpO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBhc3luYyBzZXRBc3luYyhwcm9taXNlKSB7XG4gICAgcmV0dXJuIGF3YWl0IHN0b3JlTG9jay53aXRoUmVhZExvY2soYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY3VyQ291bnRlciA9ICsrdGhpcy5fdXBkYXRlQ291bnRlcjtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFJlc3VsdC5mcm9tUHJvbWlzZShwcm9taXNlKTtcbiAgICAgIHJldHVybiB0aGlzLl9zZXRJZkxhdGVzdChyZXN1bHQsIGN1ckNvdW50ZXIpO1xuICAgIH0pO1xuICB9XG4gIHNldFVuYXZhaWxhYmxlKCkge1xuICAgIHRoaXMuX2xhc3RTdWNjZXNzZnVsVXBkYXRlID0gKyt0aGlzLl91cGRhdGVDb3VudGVyO1xuICAgIHRoaXMuX2lzQXZhaWxhYmxlID0gZmFsc2U7XG4gICAgdGhpcy5faXNSZWplY3RlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3JlamVjdGlvbkVycm9yID0gdm9pZCAwO1xuICB9XG4gIHNldFJlamVjdGVkKGVycm9yKSB7XG4gICAgdGhpcy5fc2V0SWZMYXRlc3QoUmVzdWx0LmVycm9yKGVycm9yKSwgKyt0aGlzLl91cGRhdGVDb3VudGVyKTtcbiAgfVxuICBtYXAobWFwcGVyKSB7XG4gICAgY29uc3Qgc3RvcmUgPSBuZXcgX0FzeW5jU3RvcmUoKTtcbiAgICB0aGlzLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgc3RvcmUuc2V0KG1hcHBlcih2YWx1ZSkpO1xuICAgIH0pO1xuICAgIHJldHVybiBzdG9yZTtcbiAgfVxuICBvbkNoYW5nZShjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLm9uU3RhdGVDaGFuZ2UoKHsgc3RhdGUsIGxhc3RPa1ZhbHVlIH0pID0+IHtcbiAgICAgIGlmIChzdGF0ZS5zdGF0dXMgPT09IFwib2tcIikge1xuICAgICAgICBjYWxsYmFjayhzdGF0ZS5kYXRhLCBsYXN0T2tWYWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgb25TdGF0ZUNoYW5nZShjYWxsYmFjaykge1xuICAgIGNvbnN0IHV1aWQgPSBnZW5lcmF0ZVV1aWQoKTtcbiAgICB0aGlzLl9jYWxsYmFja3Muc2V0KHV1aWQsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4ge1xuICAgICAgdW5zdWJzY3JpYmU6ICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzLmRlbGV0ZSh1dWlkKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIG9uY2VDaGFuZ2UoY2FsbGJhY2spIHtcbiAgICBjb25zdCB7IHVuc3Vic2NyaWJlIH0gPSB0aGlzLm9uQ2hhbmdlKCguLi5hcmdzKSA9PiB7XG4gICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgY2FsbGJhY2soLi4uYXJncyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHsgdW5zdWJzY3JpYmUgfTtcbiAgfVxuICBvbmNlU3RhdGVDaGFuZ2UoY2FsbGJhY2spIHtcbiAgICBjb25zdCB7IHVuc3Vic2NyaWJlIH0gPSB0aGlzLm9uU3RhdGVDaGFuZ2UoKC4uLmFyZ3MpID0+IHtcbiAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICBjYWxsYmFjayguLi5hcmdzKTtcbiAgICB9KTtcbiAgICByZXR1cm4geyB1bnN1YnNjcmliZSB9O1xuICB9XG59O1xuZXhwb3J0IHtcbiAgQXN5bmNTdG9yZSxcbiAgU3RvcmUsXG4gIHN0b3JlTG9ja1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0b3Jlcy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/stores.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/strings.js":
/*!*********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/strings.js ***!
  \*********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deindent: () => (/* binding */ deindent),\n/* harmony export */   deindentTemplate: () => (/* binding */ deindentTemplate),\n/* harmony export */   escapeTemplateLiteral: () => (/* binding */ escapeTemplateLiteral),\n/* harmony export */   extractScopes: () => (/* binding */ extractScopes),\n/* harmony export */   getWhitespacePrefix: () => (/* binding */ getWhitespacePrefix),\n/* harmony export */   getWhitespaceSuffix: () => (/* binding */ getWhitespaceSuffix),\n/* harmony export */   mergeScopeStrings: () => (/* binding */ mergeScopeStrings),\n/* harmony export */   nicify: () => (/* binding */ nicify),\n/* harmony export */   replaceAll: () => (/* binding */ replaceAll),\n/* harmony export */   stringCompare: () => (/* binding */ stringCompare),\n/* harmony export */   templateIdentity: () => (/* binding */ templateIdentity),\n/* harmony export */   trimEmptyLinesEnd: () => (/* binding */ trimEmptyLinesEnd),\n/* harmony export */   trimEmptyLinesStart: () => (/* binding */ trimEmptyLinesStart),\n/* harmony export */   trimLines: () => (/* binding */ trimLines),\n/* harmony export */   typedCapitalize: () => (/* binding */ typedCapitalize),\n/* harmony export */   typedJoin: () => (/* binding */ typedJoin),\n/* harmony export */   typedToLowercase: () => (/* binding */ typedToLowercase),\n/* harmony export */   typedToUppercase: () => (/* binding */ typedToUppercase)\n/* harmony export */ });\n/* harmony import */ var _arrays_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./arrays.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/arrays.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/errors.js\");\n/* harmony import */ var _objects_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./objects.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/objects.js\");\n// src/utils/strings.tsx\n\n\n\nfunction typedJoin(strings, separator) {\n  return strings.join(separator);\n}\nfunction typedToLowercase(s) {\n  if (typeof s !== \"string\") throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Expected a string for typedToLowercase\", { s });\n  return s.toLowerCase();\n}\nfunction typedToUppercase(s) {\n  if (typeof s !== \"string\") throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Expected a string for typedToUppercase\", { s });\n  return s.toUpperCase();\n}\nfunction typedCapitalize(s) {\n  return s.charAt(0).toUpperCase() + s.slice(1);\n}\nfunction stringCompare(a, b) {\n  if (typeof a !== \"string\" || typeof b !== \"string\") throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(`Expected two strings for stringCompare, found ${typeof a} and ${typeof b}`, { a, b });\n  const cmp = (a2, b2) => a2 < b2 ? -1 : a2 > b2 ? 1 : 0;\n  return cmp(a.toUpperCase(), b.toUpperCase()) || cmp(b, a);\n}\nfunction getWhitespacePrefix(s) {\n  return s.substring(0, s.length - s.trimStart().length);\n}\nfunction getWhitespaceSuffix(s) {\n  return s.substring(s.trimEnd().length);\n}\nfunction trimEmptyLinesStart(s) {\n  const lines = s.split(\"\\n\");\n  const firstNonEmptyLineIndex = lines.findIndex((line) => line.trim() !== \"\");\n  if (firstNonEmptyLineIndex === -1) return \"\";\n  return lines.slice(firstNonEmptyLineIndex).join(\"\\n\");\n}\nfunction trimEmptyLinesEnd(s) {\n  const lines = s.split(\"\\n\");\n  const lastNonEmptyLineIndex = (0,_arrays_js__WEBPACK_IMPORTED_MODULE_0__.findLastIndex)(lines, (line) => line.trim() !== \"\");\n  return lines.slice(0, lastNonEmptyLineIndex + 1).join(\"\\n\");\n}\nfunction trimLines(s) {\n  return trimEmptyLinesEnd(trimEmptyLinesStart(s));\n}\nfunction templateIdentity(strings, ...values) {\n  if (values.length !== strings.length - 1) throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Invalid number of values; must be one less than strings\", { strings, values });\n  return strings.reduce((result, str, i) => result + str + (values[i] ?? \"\"), \"\");\n}\nfunction deindent(strings, ...values) {\n  if (typeof strings === \"string\") return deindent([strings]);\n  return templateIdentity(...deindentTemplate(strings, ...values));\n}\nfunction deindentTemplate(strings, ...values) {\n  if (values.length !== strings.length - 1) throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"Invalid number of values; must be one less than strings\", { strings, values });\n  const trimmedStrings = [...strings];\n  trimmedStrings[0] = trimEmptyLinesStart(trimmedStrings[0] + \"+\").slice(0, -1);\n  trimmedStrings[trimmedStrings.length - 1] = trimEmptyLinesEnd(\"+\" + trimmedStrings[trimmedStrings.length - 1]).slice(1);\n  const indentation = trimmedStrings.join(\"${SOME_VALUE}\").split(\"\\n\").filter((line) => line.trim() !== \"\").map((line) => getWhitespacePrefix(line).length).reduce((min, current) => Math.min(min, current), Infinity);\n  const deindentedStrings = trimmedStrings.map((string, stringIndex) => {\n    return string.split(\"\\n\").map((line, lineIndex) => stringIndex !== 0 && lineIndex === 0 ? line : line.substring(indentation)).join(\"\\n\");\n  });\n  const indentedValues = values.map((value, i) => {\n    const firstLineIndentation = getWhitespacePrefix(deindentedStrings[i].split(\"\\n\").at(-1));\n    return `${value}`.replaceAll(\"\\n\", `\n${firstLineIndentation}`);\n  });\n  return [deindentedStrings, ...indentedValues];\n}\nfunction extractScopes(scope, removeDuplicates = true) {\n  const trimmedString = scope.trim();\n  const scopesArray = trimmedString.split(/\\s+/);\n  const filtered = scopesArray.filter((scope2) => scope2.length > 0);\n  return removeDuplicates ? [...new Set(filtered)] : filtered;\n}\nfunction mergeScopeStrings(...scopes) {\n  const allScope = scopes.map((s) => extractScopes(s)).flat().join(\" \");\n  return extractScopes(allScope).join(\" \");\n}\nfunction escapeTemplateLiteral(s) {\n  return s.replaceAll(\"`\", \"\\\\`\").replaceAll(\"\\\\\", \"\\\\\\\\\").replaceAll(\"$\", \"\\\\$\");\n}\nvar nicifiableClassNameOverrides = new Map(Object.entries({\n  Headers\n}).map(([k, v]) => [v, k]));\nfunction nicify(value, options = {}) {\n  const fullOptions = {\n    maxDepth: 5,\n    currentIndent: \"\",\n    lineIndent: \"  \",\n    multiline: true,\n    refs: /* @__PURE__ */ new Map(),\n    path: \"value\",\n    parent: null,\n    overrides: () => null,\n    keyInParent: null,\n    hideFields: [],\n    ...(0,_objects_js__WEBPACK_IMPORTED_MODULE_2__.filterUndefined)(options)\n  };\n  const {\n    maxDepth,\n    currentIndent,\n    lineIndent,\n    multiline,\n    refs,\n    path,\n    overrides,\n    hideFields\n  } = fullOptions;\n  const nl = `\n${currentIndent}`;\n  const overrideResult = overrides(value, options);\n  if (overrideResult !== null) return overrideResult;\n  if ([\"function\", \"object\", \"symbol\"].includes(typeof value) && value !== null) {\n    if (refs.has(value)) {\n      return `Ref<${refs.get(value)}>`;\n    }\n    refs.set(value, path);\n  }\n  const newOptions = {\n    maxDepth: maxDepth - 1,\n    currentIndent,\n    lineIndent,\n    multiline,\n    refs,\n    path: path + \"->[unknown property]\",\n    overrides,\n    parent: { value, options: fullOptions },\n    keyInParent: null,\n    hideFields: []\n  };\n  const nestedNicify = (newValue, newPath, keyInParent, options2 = {}) => {\n    return nicify(newValue, {\n      ...newOptions,\n      path: newPath,\n      currentIndent: currentIndent + lineIndent,\n      keyInParent,\n      ...options2\n    });\n  };\n  switch (typeof value) {\n    case \"boolean\":\n    case \"number\": {\n      return JSON.stringify(value);\n    }\n    case \"string\": {\n      const isDeindentable = (v) => deindent(v) === v && v.includes(\"\\n\");\n      const wrapInDeindent = (v) => deindent`\n        deindent\\`\n        ${currentIndent + lineIndent}${escapeTemplateLiteral(v).replaceAll(\"\\n\", nl + lineIndent)}\n        ${currentIndent}\\`\n      `;\n      if (isDeindentable(value)) {\n        return wrapInDeindent(value);\n      } else if (value.endsWith(\"\\n\") && isDeindentable(value.slice(0, -1))) {\n        return wrapInDeindent(value.slice(0, -1)) + ' + \"\\\\n\"';\n      } else {\n        return JSON.stringify(value);\n      }\n    }\n    case \"undefined\": {\n      return \"undefined\";\n    }\n    case \"symbol\": {\n      return value.toString();\n    }\n    case \"bigint\": {\n      return `${value}n`;\n    }\n    case \"function\": {\n      if (value.name) return `function ${value.name}(...) { ... }`;\n      return `(...) => { ... }`;\n    }\n    case \"object\": {\n      if (value === null) return \"null\";\n      if (Array.isArray(value)) {\n        const extraLines2 = getNicifiedObjectExtraLines(value);\n        const resValueLength2 = value.length + extraLines2.length;\n        if (maxDepth <= 0 && resValueLength2 === 0) return \"[...]\";\n        const resValues2 = value.map((v, i) => nestedNicify(v, `${path}[${i}]`, i));\n        resValues2.push(...extraLines2);\n        if (resValues2.length !== resValueLength2) throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"nicify of object: resValues.length !== resValueLength\", { value, resValues: resValues2, resValueLength: resValueLength2 });\n        const shouldIndent2 = resValues2.length > 4 || resValues2.some((x) => resValues2.length > 1 && x.length > 4 || x.includes(\"\\n\"));\n        if (shouldIndent2) {\n          return `[${nl}${resValues2.map((x) => `${lineIndent}${x},${nl}`).join(\"\")}]`;\n        } else {\n          return `[${resValues2.join(\", \")}]`;\n        }\n      }\n      if (value instanceof URL) {\n        return `URL(${nestedNicify(value.toString(), `${path}.toString()`, null)})`;\n      }\n      if (ArrayBuffer.isView(value)) {\n        return `${value.constructor.name}([${value.toString()}])`;\n      }\n      if (value instanceof ArrayBuffer) {\n        return `ArrayBuffer [${new Uint8Array(value).toString()}]`;\n      }\n      if (value instanceof Error) {\n        let stack = value.stack ?? \"\";\n        const toString = value.toString();\n        if (!stack.startsWith(toString)) stack = `${toString}\n${stack}`;\n        stack = stack.trimEnd();\n        stack = stack.replace(/\\n\\s+/g, `\n${lineIndent}${lineIndent}`);\n        stack = stack.replace(\"\\n\", `\n${lineIndent}Stack:\n`);\n        if (Object.keys(value).length > 0) {\n          stack += `\n${lineIndent}Extra properties: ${nestedNicify(Object.fromEntries(Object.entries(value)), path, null)}`;\n        }\n        if (value.cause) {\n          stack += `\n${lineIndent}Cause:\n${lineIndent}${lineIndent}${nestedNicify(value.cause, path, null, { currentIndent: currentIndent + lineIndent + lineIndent })}`;\n        }\n        stack = stack.replaceAll(\"\\n\", `\n${currentIndent}`);\n        return stack;\n      }\n      const constructorName = [null, Object.prototype].includes(Object.getPrototypeOf(value)) ? null : nicifiableClassNameOverrides.get(value.constructor) ?? value.constructor.name;\n      const constructorString = constructorName ? `${constructorName} ` : \"\";\n      const entries = getNicifiableEntries(value).filter(([k]) => !hideFields.includes(k));\n      const extraLines = [\n        ...getNicifiedObjectExtraLines(value),\n        ...hideFields.length > 0 ? [`<some fields may have been hidden>`] : []\n      ];\n      const resValueLength = entries.length + extraLines.length;\n      if (resValueLength === 0) return `${constructorString}{}`;\n      if (maxDepth <= 0) return `${constructorString}{ ... }`;\n      const resValues = entries.map(([k, v], keyIndex) => {\n        const keyNicified = nestedNicify(k, `Object.keys(${path})[${keyIndex}]`, null);\n        const keyInObjectLiteral = typeof k === \"string\" ? nicifyPropertyString(k) : `[${keyNicified}]`;\n        if (typeof v === \"function\" && v.name === k) {\n          return `${keyInObjectLiteral}(...): { ... }`;\n        } else {\n          return `${keyInObjectLiteral}: ${nestedNicify(v, `${path}[${keyNicified}]`, k)}`;\n        }\n      });\n      resValues.push(...extraLines);\n      if (resValues.length !== resValueLength) throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"nicify of object: resValues.length !== resValueLength\", { value, resValues, resValueLength });\n      const shouldIndent = resValues.length > 1 || resValues.some((x) => x.includes(\"\\n\"));\n      if (resValues.length === 0) return `${constructorString}{}`;\n      if (shouldIndent) {\n        return `${constructorString}{${nl}${resValues.map((x) => `${lineIndent}${x},${nl}`).join(\"\")}}`;\n      } else {\n        return `${constructorString}{ ${resValues.join(\", \")} }`;\n      }\n    }\n    default: {\n      return `${typeof value}<${value}>`;\n    }\n  }\n}\nfunction replaceAll(input, searchValue, replaceValue) {\n  if (searchValue === \"\") throw new _errors_js__WEBPACK_IMPORTED_MODULE_1__.StackAssertionError(\"replaceAll: searchValue is empty\");\n  return input.split(searchValue).join(replaceValue);\n}\nfunction nicifyPropertyString(str) {\n  return JSON.stringify(str);\n}\nfunction getNicifiableKeys(value) {\n  const overridden = (\"getNicifiableKeys\" in value ? value.getNicifiableKeys?.bind(value) : null)?.();\n  if (overridden != null) return overridden;\n  if (value instanceof Response) {\n    return [\"status\", \"headers\"];\n  }\n  const keys = Object.keys(value).sort();\n  return (0,_arrays_js__WEBPACK_IMPORTED_MODULE_0__.unique)(keys);\n}\nfunction getNicifiableEntries(value) {\n  const recordLikes = [Headers];\n  function isRecordLike(value2) {\n    return recordLikes.some((x) => value2 instanceof x);\n  }\n  if (isRecordLike(value)) {\n    return [...value.entries()].sort(([a], [b]) => stringCompare(`${a}`, `${b}`));\n  }\n  const keys = getNicifiableKeys(value);\n  return keys.map((k) => [k, value[k]]);\n}\nfunction getNicifiedObjectExtraLines(value) {\n  return (\"getNicifiedObjectExtraLines\" in value ? value.getNicifiedObjectExtraLines : null)?.() ?? [];\n}\n\n//# sourceMappingURL=strings.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvc3RyaW5ncy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNvRDtBQUNGO0FBQ0g7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsMkRBQW1CLDZDQUE2QyxHQUFHO0FBQzFHO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QywyREFBbUIsNkNBQTZDLEdBQUc7QUFDMUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFLDJEQUFtQixrREFBa0QsVUFBVSxNQUFNLFNBQVMsS0FBSyxNQUFNO0FBQ3pLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MseURBQWE7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELDJEQUFtQiw0QkFBNEIsa0NBQWtDLGlCQUFpQjtBQUN4SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCwyREFBbUIsNEJBQTRCLGtDQUFrQyxpQkFBaUI7QUFDeEo7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLFdBQVc7QUFDeEQ7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsY0FBYyxNQUFNO0FBQ3BCLEVBQUUscUJBQXFCO0FBQ3ZCLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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O0FBQ0EsU0FBUyxrREFBTTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FLEVBQUUsTUFBTSxFQUFFO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBb0JFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZngyZWRlbm9hc2lzL0Rvd25sb2Fkcy9EZXZlbG9wbWVudC9Fc3BhZGEvbm9kZV9tb2R1bGVzLy5wbnBtL0BzdGFja2ZyYW1lK3N0YWNrLXNoYXJlZEAyLjguNDFfQGF3cy1zZGsrY3JlZGVudGlhbC1wcm92aWRlci13ZWItaWRlbnRpdHlAMy45MDEuMF9AdHlwZV83NGRiYTAxZjZkODllNzIwODk2YjRkZjM0NTgzMzk5MC9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvZXNtL3V0aWxzL3N0cmluZ3MuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3V0aWxzL3N0cmluZ3MudHN4XG5pbXBvcnQgeyBmaW5kTGFzdEluZGV4LCB1bmlxdWUgfSBmcm9tIFwiLi9hcnJheXMuanNcIjtcbmltcG9ydCB7IFN0YWNrQXNzZXJ0aW9uRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmltcG9ydCB7IGZpbHRlclVuZGVmaW5lZCB9IGZyb20gXCIuL29iamVjdHMuanNcIjtcbmZ1bmN0aW9uIHR5cGVkSm9pbihzdHJpbmdzLCBzZXBhcmF0b3IpIHtcbiAgcmV0dXJuIHN0cmluZ3Muam9pbihzZXBhcmF0b3IpO1xufVxuZnVuY3Rpb24gdHlwZWRUb0xvd2VyY2FzZShzKSB7XG4gIGlmICh0eXBlb2YgcyAhPT0gXCJzdHJpbmdcIikgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJFeHBlY3RlZCBhIHN0cmluZyBmb3IgdHlwZWRUb0xvd2VyY2FzZVwiLCB7IHMgfSk7XG4gIHJldHVybiBzLnRvTG93ZXJDYXNlKCk7XG59XG5mdW5jdGlvbiB0eXBlZFRvVXBwZXJjYXNlKHMpIHtcbiAgaWYgKHR5cGVvZiBzICE9PSBcInN0cmluZ1wiKSB0aHJvdyBuZXcgU3RhY2tBc3NlcnRpb25FcnJvcihcIkV4cGVjdGVkIGEgc3RyaW5nIGZvciB0eXBlZFRvVXBwZXJjYXNlXCIsIHsgcyB9KTtcbiAgcmV0dXJuIHMudG9VcHBlckNhc2UoKTtcbn1cbmZ1bmN0aW9uIHR5cGVkQ2FwaXRhbGl6ZShzKSB7XG4gIHJldHVybiBzLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcy5zbGljZSgxKTtcbn1cbmZ1bmN0aW9uIHN0cmluZ0NvbXBhcmUoYSwgYikge1xuICBpZiAodHlwZW9mIGEgIT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIGIgIT09IFwic3RyaW5nXCIpIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKGBFeHBlY3RlZCB0d28gc3RyaW5ncyBmb3Igc3RyaW5nQ29tcGFyZSwgZm91bmQgJHt0eXBlb2YgYX0gYW5kICR7dHlwZW9mIGJ9YCwgeyBhLCBiIH0pO1xuICBjb25zdCBjbXAgPSAoYTIsIGIyKSA9PiBhMiA8IGIyID8gLTEgOiBhMiA+IGIyID8gMSA6IDA7XG4gIHJldHVybiBjbXAoYS50b1VwcGVyQ2FzZSgpLCBiLnRvVXBwZXJDYXNlKCkpIHx8IGNtcChiLCBhKTtcbn1cbmZ1bmN0aW9uIGdldFdoaXRlc3BhY2VQcmVmaXgocykge1xuICByZXR1cm4gcy5zdWJzdHJpbmcoMCwgcy5sZW5ndGggLSBzLnRyaW1TdGFydCgpLmxlbmd0aCk7XG59XG5mdW5jdGlvbiBnZXRXaGl0ZXNwYWNlU3VmZml4KHMpIHtcbiAgcmV0dXJuIHMuc3Vic3RyaW5nKHMudHJpbUVuZCgpLmxlbmd0aCk7XG59XG5mdW5jdGlvbiB0cmltRW1wdHlMaW5lc1N0YXJ0KHMpIHtcbiAgY29uc3QgbGluZXMgPSBzLnNwbGl0KFwiXFxuXCIpO1xuICBjb25zdCBmaXJzdE5vbkVtcHR5TGluZUluZGV4ID0gbGluZXMuZmluZEluZGV4KChsaW5lKSA9PiBsaW5lLnRyaW0oKSAhPT0gXCJcIik7XG4gIGlmIChmaXJzdE5vbkVtcHR5TGluZUluZGV4ID09PSAtMSkgcmV0dXJuIFwiXCI7XG4gIHJldHVybiBsaW5lcy5zbGljZShmaXJzdE5vbkVtcHR5TGluZUluZGV4KS5qb2luKFwiXFxuXCIpO1xufVxuZnVuY3Rpb24gdHJpbUVtcHR5TGluZXNFbmQocykge1xuICBjb25zdCBsaW5lcyA9IHMuc3BsaXQoXCJcXG5cIik7XG4gIGNvbnN0IGxhc3ROb25FbXB0eUxpbmVJbmRleCA9IGZpbmRMYXN0SW5kZXgobGluZXMsIChsaW5lKSA9PiBsaW5lLnRyaW0oKSAhPT0gXCJcIik7XG4gIHJldHVybiBsaW5lcy5zbGljZSgwLCBsYXN0Tm9uRW1wdHlMaW5lSW5kZXggKyAxKS5qb2luKFwiXFxuXCIpO1xufVxuZnVuY3Rpb24gdHJpbUxpbmVzKHMpIHtcbiAgcmV0dXJuIHRyaW1FbXB0eUxpbmVzRW5kKHRyaW1FbXB0eUxpbmVzU3RhcnQocykpO1xufVxuZnVuY3Rpb24gdGVtcGxhdGVJZGVudGl0eShzdHJpbmdzLCAuLi52YWx1ZXMpIHtcbiAgaWYgKHZhbHVlcy5sZW5ndGggIT09IHN0cmluZ3MubGVuZ3RoIC0gMSkgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJJbnZhbGlkIG51bWJlciBvZiB2YWx1ZXM7IG11c3QgYmUgb25lIGxlc3MgdGhhbiBzdHJpbmdzXCIsIHsgc3RyaW5ncywgdmFsdWVzIH0pO1xuICByZXR1cm4gc3RyaW5ncy5yZWR1Y2UoKHJlc3VsdCwgc3RyLCBpKSA9PiByZXN1bHQgKyBzdHIgKyAodmFsdWVzW2ldID8/IFwiXCIpLCBcIlwiKTtcbn1cbmZ1bmN0aW9uIGRlaW5kZW50KHN0cmluZ3MsIC4uLnZhbHVlcykge1xuICBpZiAodHlwZW9mIHN0cmluZ3MgPT09IFwic3RyaW5nXCIpIHJldHVybiBkZWluZGVudChbc3RyaW5nc10pO1xuICByZXR1cm4gdGVtcGxhdGVJZGVudGl0eSguLi5kZWluZGVudFRlbXBsYXRlKHN0cmluZ3MsIC4uLnZhbHVlcykpO1xufVxuZnVuY3Rpb24gZGVpbmRlbnRUZW1wbGF0ZShzdHJpbmdzLCAuLi52YWx1ZXMpIHtcbiAgaWYgKHZhbHVlcy5sZW5ndGggIT09IHN0cmluZ3MubGVuZ3RoIC0gMSkgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJJbnZhbGlkIG51bWJlciBvZiB2YWx1ZXM7IG11c3QgYmUgb25lIGxlc3MgdGhhbiBzdHJpbmdzXCIsIHsgc3RyaW5ncywgdmFsdWVzIH0pO1xuICBjb25zdCB0cmltbWVkU3RyaW5ncyA9IFsuLi5zdHJpbmdzXTtcbiAgdHJpbW1lZFN0cmluZ3NbMF0gPSB0cmltRW1wdHlMaW5lc1N0YXJ0KHRyaW1tZWRTdHJpbmdzWzBdICsgXCIrXCIpLnNsaWNlKDAsIC0xKTtcbiAgdHJpbW1lZFN0cmluZ3NbdHJpbW1lZFN0cmluZ3MubGVuZ3RoIC0gMV0gPSB0cmltRW1wdHlMaW5lc0VuZChcIitcIiArIHRyaW1tZWRTdHJpbmdzW3RyaW1tZWRTdHJpbmdzLmxlbmd0aCAtIDFdKS5zbGljZSgxKTtcbiAgY29uc3QgaW5kZW50YXRpb24gPSB0cmltbWVkU3RyaW5ncy5qb2luKFwiJHtTT01FX1ZBTFVFfVwiKS5zcGxpdChcIlxcblwiKS5maWx0ZXIoKGxpbmUpID0+IGxpbmUudHJpbSgpICE9PSBcIlwiKS5tYXAoKGxpbmUpID0+IGdldFdoaXRlc3BhY2VQcmVmaXgobGluZSkubGVuZ3RoKS5yZWR1Y2UoKG1pbiwgY3VycmVudCkgPT4gTWF0aC5taW4obWluLCBjdXJyZW50KSwgSW5maW5pdHkpO1xuICBjb25zdCBkZWluZGVudGVkU3RyaW5ncyA9IHRyaW1tZWRTdHJpbmdzLm1hcCgoc3RyaW5nLCBzdHJpbmdJbmRleCkgPT4ge1xuICAgIHJldHVybiBzdHJpbmcuc3BsaXQoXCJcXG5cIikubWFwKChsaW5lLCBsaW5lSW5kZXgpID0+IHN0cmluZ0luZGV4ICE9PSAwICYmIGxpbmVJbmRleCA9PT0gMCA/IGxpbmUgOiBsaW5lLnN1YnN0cmluZyhpbmRlbnRhdGlvbikpLmpvaW4oXCJcXG5cIik7XG4gIH0pO1xuICBjb25zdCBpbmRlbnRlZFZhbHVlcyA9IHZhbHVlcy5tYXAoKHZhbHVlLCBpKSA9PiB7XG4gICAgY29uc3QgZmlyc3RMaW5lSW5kZW50YXRpb24gPSBnZXRXaGl0ZXNwYWNlUHJlZml4KGRlaW5kZW50ZWRTdHJpbmdzW2ldLnNwbGl0KFwiXFxuXCIpLmF0KC0xKSk7XG4gICAgcmV0dXJuIGAke3ZhbHVlfWAucmVwbGFjZUFsbChcIlxcblwiLCBgXG4ke2ZpcnN0TGluZUluZGVudGF0aW9ufWApO1xuICB9KTtcbiAgcmV0dXJuIFtkZWluZGVudGVkU3RyaW5ncywgLi4uaW5kZW50ZWRWYWx1ZXNdO1xufVxuZnVuY3Rpb24gZXh0cmFjdFNjb3BlcyhzY29wZSwgcmVtb3ZlRHVwbGljYXRlcyA9IHRydWUpIHtcbiAgY29uc3QgdHJpbW1lZFN0cmluZyA9IHNjb3BlLnRyaW0oKTtcbiAgY29uc3Qgc2NvcGVzQXJyYXkgPSB0cmltbWVkU3RyaW5nLnNwbGl0KC9cXHMrLyk7XG4gIGNvbnN0IGZpbHRlcmVkID0gc2NvcGVzQXJyYXkuZmlsdGVyKChzY29wZTIpID0+IHNjb3BlMi5sZW5ndGggPiAwKTtcbiAgcmV0dXJuIHJlbW92ZUR1cGxpY2F0ZXMgPyBbLi4ubmV3IFNldChmaWx0ZXJlZCldIDogZmlsdGVyZWQ7XG59XG5mdW5jdGlvbiBtZXJnZVNjb3BlU3RyaW5ncyguLi5zY29wZXMpIHtcbiAgY29uc3QgYWxsU2NvcGUgPSBzY29wZXMubWFwKChzKSA9PiBleHRyYWN0U2NvcGVzKHMpKS5mbGF0KCkuam9pbihcIiBcIik7XG4gIHJldHVybiBleHRyYWN0U2NvcGVzKGFsbFNjb3BlKS5qb2luKFwiIFwiKTtcbn1cbmZ1bmN0aW9uIGVzY2FwZVRlbXBsYXRlTGl0ZXJhbChzKSB7XG4gIHJldHVybiBzLnJlcGxhY2VBbGwoXCJgXCIsIFwiXFxcXGBcIikucmVwbGFjZUFsbChcIlxcXFxcIiwgXCJcXFxcXFxcXFwiKS5yZXBsYWNlQWxsKFwiJFwiLCBcIlxcXFwkXCIpO1xufVxudmFyIG5pY2lmaWFibGVDbGFzc05hbWVPdmVycmlkZXMgPSBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKHtcbiAgSGVhZGVyc1xufSkubWFwKChbaywgdl0pID0+IFt2LCBrXSkpO1xuZnVuY3Rpb24gbmljaWZ5KHZhbHVlLCBvcHRpb25zID0ge30pIHtcbiAgY29uc3QgZnVsbE9wdGlvbnMgPSB7XG4gICAgbWF4RGVwdGg6IDUsXG4gICAgY3VycmVudEluZGVudDogXCJcIixcbiAgICBsaW5lSW5kZW50OiBcIiAgXCIsXG4gICAgbXVsdGlsaW5lOiB0cnVlLFxuICAgIHJlZnM6IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCksXG4gICAgcGF0aDogXCJ2YWx1ZVwiLFxuICAgIHBhcmVudDogbnVsbCxcbiAgICBvdmVycmlkZXM6ICgpID0+IG51bGwsXG4gICAga2V5SW5QYXJlbnQ6IG51bGwsXG4gICAgaGlkZUZpZWxkczogW10sXG4gICAgLi4uZmlsdGVyVW5kZWZpbmVkKG9wdGlvbnMpXG4gIH07XG4gIGNvbnN0IHtcbiAgICBtYXhEZXB0aCxcbiAgICBjdXJyZW50SW5kZW50LFxuICAgIGxpbmVJbmRlbnQsXG4gICAgbXVsdGlsaW5lLFxuICAgIHJlZnMsXG4gICAgcGF0aCxcbiAgICBvdmVycmlkZXMsXG4gICAgaGlkZUZpZWxkc1xuICB9ID0gZnVsbE9wdGlvbnM7XG4gIGNvbnN0IG5sID0gYFxuJHtjdXJyZW50SW5kZW50fWA7XG4gIGNvbnN0IG92ZXJyaWRlUmVzdWx0ID0gb3ZlcnJpZGVzKHZhbHVlLCBvcHRpb25zKTtcbiAgaWYgKG92ZXJyaWRlUmVzdWx0ICE9PSBudWxsKSByZXR1cm4gb3ZlcnJpZGVSZXN1bHQ7XG4gIGlmIChbXCJmdW5jdGlvblwiLCBcIm9iamVjdFwiLCBcInN5bWJvbFwiXS5pbmNsdWRlcyh0eXBlb2YgdmFsdWUpICYmIHZhbHVlICE9PSBudWxsKSB7XG4gICAgaWYgKHJlZnMuaGFzKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGBSZWY8JHtyZWZzLmdldCh2YWx1ZSl9PmA7XG4gICAgfVxuICAgIHJlZnMuc2V0KHZhbHVlLCBwYXRoKTtcbiAgfVxuICBjb25zdCBuZXdPcHRpb25zID0ge1xuICAgIG1heERlcHRoOiBtYXhEZXB0aCAtIDEsXG4gICAgY3VycmVudEluZGVudCxcbiAgICBsaW5lSW5kZW50LFxuICAgIG11bHRpbGluZSxcbiAgICByZWZzLFxuICAgIHBhdGg6IHBhdGggKyBcIi0+W3Vua25vd24gcHJvcGVydHldXCIsXG4gICAgb3ZlcnJpZGVzLFxuICAgIHBhcmVudDogeyB2YWx1ZSwgb3B0aW9uczogZnVsbE9wdGlvbnMgfSxcbiAgICBrZXlJblBhcmVudDogbnVsbCxcbiAgICBoaWRlRmllbGRzOiBbXVxuICB9O1xuICBjb25zdCBuZXN0ZWROaWNpZnkgPSAobmV3VmFsdWUsIG5ld1BhdGgsIGtleUluUGFyZW50LCBvcHRpb25zMiA9IHt9KSA9PiB7XG4gICAgcmV0dXJuIG5pY2lmeShuZXdWYWx1ZSwge1xuICAgICAgLi4ubmV3T3B0aW9ucyxcbiAgICAgIHBhdGg6IG5ld1BhdGgsXG4gICAgICBjdXJyZW50SW5kZW50OiBjdXJyZW50SW5kZW50ICsgbGluZUluZGVudCxcbiAgICAgIGtleUluUGFyZW50LFxuICAgICAgLi4ub3B0aW9uczJcbiAgICB9KTtcbiAgfTtcbiAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHtcbiAgICBjYXNlIFwiYm9vbGVhblwiOlxuICAgIGNhc2UgXCJudW1iZXJcIjoge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICB9XG4gICAgY2FzZSBcInN0cmluZ1wiOiB7XG4gICAgICBjb25zdCBpc0RlaW5kZW50YWJsZSA9ICh2KSA9PiBkZWluZGVudCh2KSA9PT0gdiAmJiB2LmluY2x1ZGVzKFwiXFxuXCIpO1xuICAgICAgY29uc3Qgd3JhcEluRGVpbmRlbnQgPSAodikgPT4gZGVpbmRlbnRgXG4gICAgICAgIGRlaW5kZW50XFxgXG4gICAgICAgICR7Y3VycmVudEluZGVudCArIGxpbmVJbmRlbnR9JHtlc2NhcGVUZW1wbGF0ZUxpdGVyYWwodikucmVwbGFjZUFsbChcIlxcblwiLCBubCArIGxpbmVJbmRlbnQpfVxuICAgICAgICAke2N1cnJlbnRJbmRlbnR9XFxgXG4gICAgICBgO1xuICAgICAgaWYgKGlzRGVpbmRlbnRhYmxlKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gd3JhcEluRGVpbmRlbnQodmFsdWUpO1xuICAgICAgfSBlbHNlIGlmICh2YWx1ZS5lbmRzV2l0aChcIlxcblwiKSAmJiBpc0RlaW5kZW50YWJsZSh2YWx1ZS5zbGljZSgwLCAtMSkpKSB7XG4gICAgICAgIHJldHVybiB3cmFwSW5EZWluZGVudCh2YWx1ZS5zbGljZSgwLCAtMSkpICsgJyArIFwiXFxcXG5cIic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBjYXNlIFwidW5kZWZpbmVkXCI6IHtcbiAgICAgIHJldHVybiBcInVuZGVmaW5lZFwiO1xuICAgIH1cbiAgICBjYXNlIFwic3ltYm9sXCI6IHtcbiAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICAgIH1cbiAgICBjYXNlIFwiYmlnaW50XCI6IHtcbiAgICAgIHJldHVybiBgJHt2YWx1ZX1uYDtcbiAgICB9XG4gICAgY2FzZSBcImZ1bmN0aW9uXCI6IHtcbiAgICAgIGlmICh2YWx1ZS5uYW1lKSByZXR1cm4gYGZ1bmN0aW9uICR7dmFsdWUubmFtZX0oLi4uKSB7IC4uLiB9YDtcbiAgICAgIHJldHVybiBgKC4uLikgPT4geyAuLi4gfWA7XG4gICAgfVxuICAgIGNhc2UgXCJvYmplY3RcIjoge1xuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gXCJudWxsXCI7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgY29uc3QgZXh0cmFMaW5lczIgPSBnZXROaWNpZmllZE9iamVjdEV4dHJhTGluZXModmFsdWUpO1xuICAgICAgICBjb25zdCByZXNWYWx1ZUxlbmd0aDIgPSB2YWx1ZS5sZW5ndGggKyBleHRyYUxpbmVzMi5sZW5ndGg7XG4gICAgICAgIGlmIChtYXhEZXB0aCA8PSAwICYmIHJlc1ZhbHVlTGVuZ3RoMiA9PT0gMCkgcmV0dXJuIFwiWy4uLl1cIjtcbiAgICAgICAgY29uc3QgcmVzVmFsdWVzMiA9IHZhbHVlLm1hcCgodiwgaSkgPT4gbmVzdGVkTmljaWZ5KHYsIGAke3BhdGh9WyR7aX1dYCwgaSkpO1xuICAgICAgICByZXNWYWx1ZXMyLnB1c2goLi4uZXh0cmFMaW5lczIpO1xuICAgICAgICBpZiAocmVzVmFsdWVzMi5sZW5ndGggIT09IHJlc1ZhbHVlTGVuZ3RoMikgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJuaWNpZnkgb2Ygb2JqZWN0OiByZXNWYWx1ZXMubGVuZ3RoICE9PSByZXNWYWx1ZUxlbmd0aFwiLCB7IHZhbHVlLCByZXNWYWx1ZXM6IHJlc1ZhbHVlczIsIHJlc1ZhbHVlTGVuZ3RoOiByZXNWYWx1ZUxlbmd0aDIgfSk7XG4gICAgICAgIGNvbnN0IHNob3VsZEluZGVudDIgPSByZXNWYWx1ZXMyLmxlbmd0aCA+IDQgfHwgcmVzVmFsdWVzMi5zb21lKCh4KSA9PiByZXNWYWx1ZXMyLmxlbmd0aCA+IDEgJiYgeC5sZW5ndGggPiA0IHx8IHguaW5jbHVkZXMoXCJcXG5cIikpO1xuICAgICAgICBpZiAoc2hvdWxkSW5kZW50Mikge1xuICAgICAgICAgIHJldHVybiBgWyR7bmx9JHtyZXNWYWx1ZXMyLm1hcCgoeCkgPT4gYCR7bGluZUluZGVudH0ke3h9LCR7bmx9YCkuam9pbihcIlwiKX1dYDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gYFske3Jlc1ZhbHVlczIuam9pbihcIiwgXCIpfV1gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBVUkwpIHtcbiAgICAgICAgcmV0dXJuIGBVUkwoJHtuZXN0ZWROaWNpZnkodmFsdWUudG9TdHJpbmcoKSwgYCR7cGF0aH0udG9TdHJpbmcoKWAsIG51bGwpfSlgO1xuICAgICAgfVxuICAgICAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGAke3ZhbHVlLmNvbnN0cnVjdG9yLm5hbWV9KFske3ZhbHVlLnRvU3RyaW5nKCl9XSlgO1xuICAgICAgfVxuICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIGBBcnJheUJ1ZmZlciBbJHtuZXcgVWludDhBcnJheSh2YWx1ZSkudG9TdHJpbmcoKX1dYDtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIGxldCBzdGFjayA9IHZhbHVlLnN0YWNrID8/IFwiXCI7XG4gICAgICAgIGNvbnN0IHRvU3RyaW5nID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgaWYgKCFzdGFjay5zdGFydHNXaXRoKHRvU3RyaW5nKSkgc3RhY2sgPSBgJHt0b1N0cmluZ31cbiR7c3RhY2t9YDtcbiAgICAgICAgc3RhY2sgPSBzdGFjay50cmltRW5kKCk7XG4gICAgICAgIHN0YWNrID0gc3RhY2sucmVwbGFjZSgvXFxuXFxzKy9nLCBgXG4ke2xpbmVJbmRlbnR9JHtsaW5lSW5kZW50fWApO1xuICAgICAgICBzdGFjayA9IHN0YWNrLnJlcGxhY2UoXCJcXG5cIiwgYFxuJHtsaW5lSW5kZW50fVN0YWNrOlxuYCk7XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh2YWx1ZSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHN0YWNrICs9IGBcbiR7bGluZUluZGVudH1FeHRyYSBwcm9wZXJ0aWVzOiAke25lc3RlZE5pY2lmeShPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXModmFsdWUpKSwgcGF0aCwgbnVsbCl9YDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUuY2F1c2UpIHtcbiAgICAgICAgICBzdGFjayArPSBgXG4ke2xpbmVJbmRlbnR9Q2F1c2U6XG4ke2xpbmVJbmRlbnR9JHtsaW5lSW5kZW50fSR7bmVzdGVkTmljaWZ5KHZhbHVlLmNhdXNlLCBwYXRoLCBudWxsLCB7IGN1cnJlbnRJbmRlbnQ6IGN1cnJlbnRJbmRlbnQgKyBsaW5lSW5kZW50ICsgbGluZUluZGVudCB9KX1gO1xuICAgICAgICB9XG4gICAgICAgIHN0YWNrID0gc3RhY2sucmVwbGFjZUFsbChcIlxcblwiLCBgXG4ke2N1cnJlbnRJbmRlbnR9YCk7XG4gICAgICAgIHJldHVybiBzdGFjaztcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNvbnN0cnVjdG9yTmFtZSA9IFtudWxsLCBPYmplY3QucHJvdG90eXBlXS5pbmNsdWRlcyhPYmplY3QuZ2V0UHJvdG90eXBlT2YodmFsdWUpKSA/IG51bGwgOiBuaWNpZmlhYmxlQ2xhc3NOYW1lT3ZlcnJpZGVzLmdldCh2YWx1ZS5jb25zdHJ1Y3RvcikgPz8gdmFsdWUuY29uc3RydWN0b3IubmFtZTtcbiAgICAgIGNvbnN0IGNvbnN0cnVjdG9yU3RyaW5nID0gY29uc3RydWN0b3JOYW1lID8gYCR7Y29uc3RydWN0b3JOYW1lfSBgIDogXCJcIjtcbiAgICAgIGNvbnN0IGVudHJpZXMgPSBnZXROaWNpZmlhYmxlRW50cmllcyh2YWx1ZSkuZmlsdGVyKChba10pID0+ICFoaWRlRmllbGRzLmluY2x1ZGVzKGspKTtcbiAgICAgIGNvbnN0IGV4dHJhTGluZXMgPSBbXG4gICAgICAgIC4uLmdldE5pY2lmaWVkT2JqZWN0RXh0cmFMaW5lcyh2YWx1ZSksXG4gICAgICAgIC4uLmhpZGVGaWVsZHMubGVuZ3RoID4gMCA/IFtgPHNvbWUgZmllbGRzIG1heSBoYXZlIGJlZW4gaGlkZGVuPmBdIDogW11cbiAgICAgIF07XG4gICAgICBjb25zdCByZXNWYWx1ZUxlbmd0aCA9IGVudHJpZXMubGVuZ3RoICsgZXh0cmFMaW5lcy5sZW5ndGg7XG4gICAgICBpZiAocmVzVmFsdWVMZW5ndGggPT09IDApIHJldHVybiBgJHtjb25zdHJ1Y3RvclN0cmluZ317fWA7XG4gICAgICBpZiAobWF4RGVwdGggPD0gMCkgcmV0dXJuIGAke2NvbnN0cnVjdG9yU3RyaW5nfXsgLi4uIH1gO1xuICAgICAgY29uc3QgcmVzVmFsdWVzID0gZW50cmllcy5tYXAoKFtrLCB2XSwga2V5SW5kZXgpID0+IHtcbiAgICAgICAgY29uc3Qga2V5TmljaWZpZWQgPSBuZXN0ZWROaWNpZnkoaywgYE9iamVjdC5rZXlzKCR7cGF0aH0pWyR7a2V5SW5kZXh9XWAsIG51bGwpO1xuICAgICAgICBjb25zdCBrZXlJbk9iamVjdExpdGVyYWwgPSB0eXBlb2YgayA9PT0gXCJzdHJpbmdcIiA/IG5pY2lmeVByb3BlcnR5U3RyaW5nKGspIDogYFske2tleU5pY2lmaWVkfV1gO1xuICAgICAgICBpZiAodHlwZW9mIHYgPT09IFwiZnVuY3Rpb25cIiAmJiB2Lm5hbWUgPT09IGspIHtcbiAgICAgICAgICByZXR1cm4gYCR7a2V5SW5PYmplY3RMaXRlcmFsfSguLi4pOiB7IC4uLiB9YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gYCR7a2V5SW5PYmplY3RMaXRlcmFsfTogJHtuZXN0ZWROaWNpZnkodiwgYCR7cGF0aH1bJHtrZXlOaWNpZmllZH1dYCwgayl9YDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXNWYWx1ZXMucHVzaCguLi5leHRyYUxpbmVzKTtcbiAgICAgIGlmIChyZXNWYWx1ZXMubGVuZ3RoICE9PSByZXNWYWx1ZUxlbmd0aCkgdGhyb3cgbmV3IFN0YWNrQXNzZXJ0aW9uRXJyb3IoXCJuaWNpZnkgb2Ygb2JqZWN0OiByZXNWYWx1ZXMubGVuZ3RoICE9PSByZXNWYWx1ZUxlbmd0aFwiLCB7IHZhbHVlLCByZXNWYWx1ZXMsIHJlc1ZhbHVlTGVuZ3RoIH0pO1xuICAgICAgY29uc3Qgc2hvdWxkSW5kZW50ID0gcmVzVmFsdWVzLmxlbmd0aCA+IDEgfHwgcmVzVmFsdWVzLnNvbWUoKHgpID0+IHguaW5jbHVkZXMoXCJcXG5cIikpO1xuICAgICAgaWYgKHJlc1ZhbHVlcy5sZW5ndGggPT09IDApIHJldHVybiBgJHtjb25zdHJ1Y3RvclN0cmluZ317fWA7XG4gICAgICBpZiAoc2hvdWxkSW5kZW50KSB7XG4gICAgICAgIHJldHVybiBgJHtjb25zdHJ1Y3RvclN0cmluZ317JHtubH0ke3Jlc1ZhbHVlcy5tYXAoKHgpID0+IGAke2xpbmVJbmRlbnR9JHt4fSwke25sfWApLmpvaW4oXCJcIil9fWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYCR7Y29uc3RydWN0b3JTdHJpbmd9eyAke3Jlc1ZhbHVlcy5qb2luKFwiLCBcIil9IH1gO1xuICAgICAgfVxuICAgIH1cbiAgICBkZWZhdWx0OiB7XG4gICAgICByZXR1cm4gYCR7dHlwZW9mIHZhbHVlfTwke3ZhbHVlfT5gO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gcmVwbGFjZUFsbChpbnB1dCwgc2VhcmNoVmFsdWUsIHJlcGxhY2VWYWx1ZSkge1xuICBpZiAoc2VhcmNoVmFsdWUgPT09IFwiXCIpIHRocm93IG5ldyBTdGFja0Fzc2VydGlvbkVycm9yKFwicmVwbGFjZUFsbDogc2VhcmNoVmFsdWUgaXMgZW1wdHlcIik7XG4gIHJldHVybiBpbnB1dC5zcGxpdChzZWFyY2hWYWx1ZSkuam9pbihyZXBsYWNlVmFsdWUpO1xufVxuZnVuY3Rpb24gbmljaWZ5UHJvcGVydHlTdHJpbmcoc3RyKSB7XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShzdHIpO1xufVxuZnVuY3Rpb24gZ2V0TmljaWZpYWJsZUtleXModmFsdWUpIHtcbiAgY29uc3Qgb3ZlcnJpZGRlbiA9IChcImdldE5pY2lmaWFibGVLZXlzXCIgaW4gdmFsdWUgPyB2YWx1ZS5nZXROaWNpZmlhYmxlS2V5cz8uYmluZCh2YWx1ZSkgOiBudWxsKT8uKCk7XG4gIGlmIChvdmVycmlkZGVuICE9IG51bGwpIHJldHVybiBvdmVycmlkZGVuO1xuICBpZiAodmFsdWUgaW5zdGFuY2VvZiBSZXNwb25zZSkge1xuICAgIHJldHVybiBbXCJzdGF0dXNcIiwgXCJoZWFkZXJzXCJdO1xuICB9XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSkuc29ydCgpO1xuICByZXR1cm4gdW5pcXVlKGtleXMpO1xufVxuZnVuY3Rpb24gZ2V0TmljaWZpYWJsZUVudHJpZXModmFsdWUpIHtcbiAgY29uc3QgcmVjb3JkTGlrZXMgPSBbSGVhZGVyc107XG4gIGZ1bmN0aW9uIGlzUmVjb3JkTGlrZSh2YWx1ZTIpIHtcbiAgICByZXR1cm4gcmVjb3JkTGlrZXMuc29tZSgoeCkgPT4gdmFsdWUyIGluc3RhbmNlb2YgeCk7XG4gIH1cbiAgaWYgKGlzUmVjb3JkTGlrZSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gWy4uLnZhbHVlLmVudHJpZXMoKV0uc29ydCgoW2FdLCBbYl0pID0+IHN0cmluZ0NvbXBhcmUoYCR7YX1gLCBgJHtifWApKTtcbiAgfVxuICBjb25zdCBrZXlzID0gZ2V0TmljaWZpYWJsZUtleXModmFsdWUpO1xuICByZXR1cm4ga2V5cy5tYXAoKGspID0+IFtrLCB2YWx1ZVtrXV0pO1xufVxuZnVuY3Rpb24gZ2V0TmljaWZpZWRPYmplY3RFeHRyYUxpbmVzKHZhbHVlKSB7XG4gIHJldHVybiAoXCJnZXROaWNpZmllZE9iamVjdEV4dHJhTGluZXNcIiBpbiB2YWx1ZSA/IHZhbHVlLmdldE5pY2lmaWVkT2JqZWN0RXh0cmFMaW5lcyA6IG51bGwpPy4oKSA/PyBbXTtcbn1cbmV4cG9ydCB7XG4gIGRlaW5kZW50LFxuICBkZWluZGVudFRlbXBsYXRlLFxuICBlc2NhcGVUZW1wbGF0ZUxpdGVyYWwsXG4gIGV4dHJhY3RTY29wZXMsXG4gIGdldFdoaXRlc3BhY2VQcmVmaXgsXG4gIGdldFdoaXRlc3BhY2VTdWZmaXgsXG4gIG1lcmdlU2NvcGVTdHJpbmdzLFxuICBuaWNpZnksXG4gIHJlcGxhY2VBbGwsXG4gIHN0cmluZ0NvbXBhcmUsXG4gIHRlbXBsYXRlSWRlbnRpdHksXG4gIHRyaW1FbXB0eUxpbmVzRW5kLFxuICB0cmltRW1wdHlMaW5lc1N0YXJ0LFxuICB0cmltTGluZXMsXG4gIHR5cGVkQ2FwaXRhbGl6ZSxcbiAgdHlwZWRKb2luLFxuICB0eXBlZFRvTG93ZXJjYXNlLFxuICB0eXBlZFRvVXBwZXJjYXNlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RyaW5ncy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/strings.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/types.js":
/*!*******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/types.js ***!
  \*******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   typeAssert: () => (/* binding */ typeAssert),\n/* harmony export */   typeAssertExtends: () => (/* binding */ typeAssertExtends),\n/* harmony export */   typeAssertIs: () => (/* binding */ typeAssertIs)\n/* harmony export */ });\n// src/utils/types.tsx\ntypeAssertIs()();\ntypeAssertIs()();\ntypeAssertIs()();\nfunction typeAssert() {\n  return () => void 0;\n}\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\nfunction typeAssertExtends() {\n  return () => void 0;\n}\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\nfunction typeAssertIs() {\n  return () => void 0;\n}\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\ntypeAssertExtends()();\n\n//# sourceMappingURL=types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvdHlwZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS91dGlscy90eXBlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvdXRpbHMvdHlwZXMudHN4XG50eXBlQXNzZXJ0SXMoKSgpO1xudHlwZUFzc2VydElzKCkoKTtcbnR5cGVBc3NlcnRJcygpKCk7XG5mdW5jdGlvbiB0eXBlQXNzZXJ0KCkge1xuICByZXR1cm4gKCkgPT4gdm9pZCAwO1xufVxudHlwZUFzc2VydEV4dGVuZHMoKSgpO1xudHlwZUFzc2VydEV4dGVuZHMoKSgpO1xudHlwZUFzc2VydEV4dGVuZHMoKSgpO1xudHlwZUFzc2VydEV4dGVuZHMoKSgpO1xuZnVuY3Rpb24gdHlwZUFzc2VydEV4dGVuZHMoKSB7XG4gIHJldHVybiAoKSA9PiB2b2lkIDA7XG59XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG5mdW5jdGlvbiB0eXBlQXNzZXJ0SXMoKSB7XG4gIHJldHVybiAoKSA9PiB2b2lkIDA7XG59XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG50eXBlQXNzZXJ0RXh0ZW5kcygpKCk7XG5leHBvcnQge1xuICB0eXBlQXNzZXJ0LFxuICB0eXBlQXNzZXJ0RXh0ZW5kcyxcbiAgdHlwZUFzc2VydElzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHlwZXMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/types.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/urls.js":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/urls.js ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createUrlIfValid: () => (/* binding */ createUrlIfValid),\n/* harmony export */   getRelativePart: () => (/* binding */ getRelativePart),\n/* harmony export */   isLocalhost: () => (/* binding */ isLocalhost),\n/* harmony export */   isRelative: () => (/* binding */ isRelative),\n/* harmony export */   isValidHostname: () => (/* binding */ isValidHostname),\n/* harmony export */   isValidHostnameWithWildcards: () => (/* binding */ isValidHostnameWithWildcards),\n/* harmony export */   isValidUrl: () => (/* binding */ isValidUrl),\n/* harmony export */   matchHostnamePattern: () => (/* binding */ matchHostnamePattern),\n/* harmony export */   url: () => (/* binding */ url),\n/* harmony export */   urlString: () => (/* binding */ urlString)\n/* harmony export */ });\n/* harmony import */ var _crypto_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./crypto.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/crypto.js\");\n/* harmony import */ var _strings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./strings.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/strings.js\");\n// src/utils/urls.tsx\n\n\nfunction createUrlIfValid(...args) {\n  try {\n    return new URL(...args);\n  } catch (e) {\n    return null;\n  }\n}\nfunction isValidUrl(url2) {\n  return !!createUrlIfValid(url2);\n}\nfunction isValidHostname(hostname) {\n  if (!hostname || hostname.startsWith(\".\") || hostname.endsWith(\".\") || hostname.includes(\"..\")) {\n    return false;\n  }\n  const url2 = createUrlIfValid(`https://${hostname}`);\n  if (!url2) return false;\n  return url2.hostname === hostname;\n}\nfunction isValidHostnameWithWildcards(hostname) {\n  if (!hostname) return false;\n  const hasWildcard = hostname.includes(\"*\");\n  if (!hasWildcard) {\n    return isValidHostname(hostname);\n  }\n  if (hostname.startsWith(\".\") || hostname.endsWith(\".\")) {\n    return false;\n  }\n  if (hostname.includes(\"..\")) {\n    return false;\n  }\n  const testHostname = hostname.replace(/\\*+/g, \"wildcard\");\n  if (!/^[a-zA-Z0-9.-]+$/.test(testHostname)) {\n    return false;\n  }\n  const segments = hostname.split(/\\*+/);\n  for (let i = 0; i < segments.length; i++) {\n    const segment = segments[i];\n    if (segment === \"\") continue;\n    if (i === 0 && segment.startsWith(\".\")) {\n      return false;\n    }\n    if (i === segments.length - 1 && segment.endsWith(\".\")) {\n      return false;\n    }\n    if (segment.includes(\"..\")) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction matchHostnamePattern(pattern, hostname) {\n  if (!pattern.includes(\"*\")) {\n    return pattern === hostname;\n  }\n  let regexPattern = pattern.replace(/[.+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n  const doubleWildcardPlaceholder = \"\\0DOUBLE_WILDCARD\\0\";\n  regexPattern = regexPattern.replace(/\\*\\*/g, doubleWildcardPlaceholder);\n  regexPattern = regexPattern.replace(/\\*/g, \"[^.]*\");\n  regexPattern = regexPattern.replace(new RegExp(doubleWildcardPlaceholder, \"g\"), \".*\");\n  regexPattern = \"^\" + regexPattern + \"$\";\n  try {\n    const regex = new RegExp(regexPattern);\n    return regex.test(hostname);\n  } catch {\n    return false;\n  }\n}\nfunction isLocalhost(urlOrString) {\n  const url2 = createUrlIfValid(urlOrString);\n  if (!url2) return false;\n  if (url2.hostname === \"localhost\" || url2.hostname.endsWith(\".localhost\")) return true;\n  if (url2.hostname.match(/^127\\.\\d+\\.\\d+\\.\\d+$/)) return true;\n  return false;\n}\nfunction isRelative(url2) {\n  const randomDomain = `${(0,_crypto_js__WEBPACK_IMPORTED_MODULE_0__.generateSecureRandomString)()}.stack-auth.example.com`;\n  const u = createUrlIfValid(url2, `https://${randomDomain}`);\n  if (!u) return false;\n  if (u.host !== randomDomain) return false;\n  if (u.protocol !== \"https:\") return false;\n  return true;\n}\nfunction getRelativePart(url2) {\n  return url2.pathname + url2.search + url2.hash;\n}\nfunction url(strings, ...values) {\n  return new URL(urlString(strings, ...values));\n}\nfunction urlString(strings, ...values) {\n  return (0,_strings_js__WEBPACK_IMPORTED_MODULE_1__.templateIdentity)(strings, ...values.map(encodeURIComponent));\n}\n\n//# sourceMappingURL=urls.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvdXJscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUN5RDtBQUNUO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxTQUFTO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IscUJBQXFCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsc0VBQTBCLEdBQUc7QUFDdkQsOENBQThDLGFBQWE7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyw2REFBZ0I7QUFDekI7QUFZRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvZ2Z4MmVkZW5vYXNpcy9Eb3dubG9hZHMvRGV2ZWxvcG1lbnQvRXNwYWRhL25vZGVfbW9kdWxlcy8ucG5wbS9Ac3RhY2tmcmFtZStzdGFjay1zaGFyZWRAMi44LjQxX0Bhd3Mtc2RrK2NyZWRlbnRpYWwtcHJvdmlkZXItd2ViLWlkZW50aXR5QDMuOTAxLjBfQHR5cGVfNzRkYmEwMWY2ZDg5ZTcyMDg5NmI0ZGYzNDU4MzM5OTAvbm9kZV9tb2R1bGVzL0BzdGFja2ZyYW1lL3N0YWNrLXNoYXJlZC9kaXN0L2VzbS91dGlscy91cmxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy91cmxzLnRzeFxuaW1wb3J0IHsgZ2VuZXJhdGVTZWN1cmVSYW5kb21TdHJpbmcgfSBmcm9tIFwiLi9jcnlwdG8uanNcIjtcbmltcG9ydCB7IHRlbXBsYXRlSWRlbnRpdHkgfSBmcm9tIFwiLi9zdHJpbmdzLmpzXCI7XG5mdW5jdGlvbiBjcmVhdGVVcmxJZlZhbGlkKC4uLmFyZ3MpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gbmV3IFVSTCguLi5hcmdzKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5mdW5jdGlvbiBpc1ZhbGlkVXJsKHVybDIpIHtcbiAgcmV0dXJuICEhY3JlYXRlVXJsSWZWYWxpZCh1cmwyKTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRIb3N0bmFtZShob3N0bmFtZSkge1xuICBpZiAoIWhvc3RuYW1lIHx8IGhvc3RuYW1lLnN0YXJ0c1dpdGgoXCIuXCIpIHx8IGhvc3RuYW1lLmVuZHNXaXRoKFwiLlwiKSB8fCBob3N0bmFtZS5pbmNsdWRlcyhcIi4uXCIpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IHVybDIgPSBjcmVhdGVVcmxJZlZhbGlkKGBodHRwczovLyR7aG9zdG5hbWV9YCk7XG4gIGlmICghdXJsMikgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gdXJsMi5ob3N0bmFtZSA9PT0gaG9zdG5hbWU7XG59XG5mdW5jdGlvbiBpc1ZhbGlkSG9zdG5hbWVXaXRoV2lsZGNhcmRzKGhvc3RuYW1lKSB7XG4gIGlmICghaG9zdG5hbWUpIHJldHVybiBmYWxzZTtcbiAgY29uc3QgaGFzV2lsZGNhcmQgPSBob3N0bmFtZS5pbmNsdWRlcyhcIipcIik7XG4gIGlmICghaGFzV2lsZGNhcmQpIHtcbiAgICByZXR1cm4gaXNWYWxpZEhvc3RuYW1lKGhvc3RuYW1lKTtcbiAgfVxuICBpZiAoaG9zdG5hbWUuc3RhcnRzV2l0aChcIi5cIikgfHwgaG9zdG5hbWUuZW5kc1dpdGgoXCIuXCIpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChob3N0bmFtZS5pbmNsdWRlcyhcIi4uXCIpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IHRlc3RIb3N0bmFtZSA9IGhvc3RuYW1lLnJlcGxhY2UoL1xcKisvZywgXCJ3aWxkY2FyZFwiKTtcbiAgaWYgKCEvXlthLXpBLVowLTkuLV0rJC8udGVzdCh0ZXN0SG9zdG5hbWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IHNlZ21lbnRzID0gaG9zdG5hbWUuc3BsaXQoL1xcKisvKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHNlZ21lbnQgPSBzZWdtZW50c1tpXTtcbiAgICBpZiAoc2VnbWVudCA9PT0gXCJcIikgY29udGludWU7XG4gICAgaWYgKGkgPT09IDAgJiYgc2VnbWVudC5zdGFydHNXaXRoKFwiLlwiKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoaSA9PT0gc2VnbWVudHMubGVuZ3RoIC0gMSAmJiBzZWdtZW50LmVuZHNXaXRoKFwiLlwiKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoc2VnbWVudC5pbmNsdWRlcyhcIi4uXCIpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gbWF0Y2hIb3N0bmFtZVBhdHRlcm4ocGF0dGVybiwgaG9zdG5hbWUpIHtcbiAgaWYgKCFwYXR0ZXJuLmluY2x1ZGVzKFwiKlwiKSkge1xuICAgIHJldHVybiBwYXR0ZXJuID09PSBob3N0bmFtZTtcbiAgfVxuICBsZXQgcmVnZXhQYXR0ZXJuID0gcGF0dGVybi5yZXBsYWNlKC9bLis/XiR7fSgpfFtcXF1cXFxcXS9nLCBcIlxcXFwkJlwiKTtcbiAgY29uc3QgZG91YmxlV2lsZGNhcmRQbGFjZWhvbGRlciA9IFwiXFwwRE9VQkxFX1dJTERDQVJEXFwwXCI7XG4gIHJlZ2V4UGF0dGVybiA9IHJlZ2V4UGF0dGVybi5yZXBsYWNlKC9cXCpcXCovZywgZG91YmxlV2lsZGNhcmRQbGFjZWhvbGRlcik7XG4gIHJlZ2V4UGF0dGVybiA9IHJlZ2V4UGF0dGVybi5yZXBsYWNlKC9cXCovZywgXCJbXi5dKlwiKTtcbiAgcmVnZXhQYXR0ZXJuID0gcmVnZXhQYXR0ZXJuLnJlcGxhY2UobmV3IFJlZ0V4cChkb3VibGVXaWxkY2FyZFBsYWNlaG9sZGVyLCBcImdcIiksIFwiLipcIik7XG4gIHJlZ2V4UGF0dGVybiA9IFwiXlwiICsgcmVnZXhQYXR0ZXJuICsgXCIkXCI7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKHJlZ2V4UGF0dGVybik7XG4gICAgcmV0dXJuIHJlZ2V4LnRlc3QoaG9zdG5hbWUpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbmZ1bmN0aW9uIGlzTG9jYWxob3N0KHVybE9yU3RyaW5nKSB7XG4gIGNvbnN0IHVybDIgPSBjcmVhdGVVcmxJZlZhbGlkKHVybE9yU3RyaW5nKTtcbiAgaWYgKCF1cmwyKSByZXR1cm4gZmFsc2U7XG4gIGlmICh1cmwyLmhvc3RuYW1lID09PSBcImxvY2FsaG9zdFwiIHx8IHVybDIuaG9zdG5hbWUuZW5kc1dpdGgoXCIubG9jYWxob3N0XCIpKSByZXR1cm4gdHJ1ZTtcbiAgaWYgKHVybDIuaG9zdG5hbWUubWF0Y2goL14xMjdcXC5cXGQrXFwuXFxkK1xcLlxcZCskLykpIHJldHVybiB0cnVlO1xuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBpc1JlbGF0aXZlKHVybDIpIHtcbiAgY29uc3QgcmFuZG9tRG9tYWluID0gYCR7Z2VuZXJhdGVTZWN1cmVSYW5kb21TdHJpbmcoKX0uc3RhY2stYXV0aC5leGFtcGxlLmNvbWA7XG4gIGNvbnN0IHUgPSBjcmVhdGVVcmxJZlZhbGlkKHVybDIsIGBodHRwczovLyR7cmFuZG9tRG9tYWlufWApO1xuICBpZiAoIXUpIHJldHVybiBmYWxzZTtcbiAgaWYgKHUuaG9zdCAhPT0gcmFuZG9tRG9tYWluKSByZXR1cm4gZmFsc2U7XG4gIGlmICh1LnByb3RvY29sICE9PSBcImh0dHBzOlwiKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gZ2V0UmVsYXRpdmVQYXJ0KHVybDIpIHtcbiAgcmV0dXJuIHVybDIucGF0aG5hbWUgKyB1cmwyLnNlYXJjaCArIHVybDIuaGFzaDtcbn1cbmZ1bmN0aW9uIHVybChzdHJpbmdzLCAuLi52YWx1ZXMpIHtcbiAgcmV0dXJuIG5ldyBVUkwodXJsU3RyaW5nKHN0cmluZ3MsIC4uLnZhbHVlcykpO1xufVxuZnVuY3Rpb24gdXJsU3RyaW5nKHN0cmluZ3MsIC4uLnZhbHVlcykge1xuICByZXR1cm4gdGVtcGxhdGVJZGVudGl0eShzdHJpbmdzLCAuLi52YWx1ZXMubWFwKGVuY29kZVVSSUNvbXBvbmVudCkpO1xufVxuZXhwb3J0IHtcbiAgY3JlYXRlVXJsSWZWYWxpZCxcbiAgZ2V0UmVsYXRpdmVQYXJ0LFxuICBpc0xvY2FsaG9zdCxcbiAgaXNSZWxhdGl2ZSxcbiAgaXNWYWxpZEhvc3RuYW1lLFxuICBpc1ZhbGlkSG9zdG5hbWVXaXRoV2lsZGNhcmRzLFxuICBpc1ZhbGlkVXJsLFxuICBtYXRjaEhvc3RuYW1lUGF0dGVybixcbiAgdXJsLFxuICB1cmxTdHJpbmdcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11cmxzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/urls.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/uuids.js":
/*!*******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/uuids.js ***!
  \*******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateUuid: () => (/* binding */ generateUuid),\n/* harmony export */   isUuid: () => (/* binding */ isUuid)\n/* harmony export */ });\n/* harmony import */ var _crypto_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./crypto.js */ \"(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/crypto.js\");\n// src/utils/uuids.tsx\n\nfunction generateUuid() {\n  return \"10000000-1000-4000-8000-100000000000\".replace(\n    /[018]/g,\n    (c) => (+c ^ (0,_crypto_js__WEBPACK_IMPORTED_MODULE_0__.generateRandomValues)(new Uint8Array(1))[0] & 15 >> +c / 4).toString(16)\n  );\n}\nfunction isUuid(str) {\n  return /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/.test(str);\n}\n\n//# sourceMappingURL=uuids.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHN0YWNrZnJhbWUrc3RhY2stc2hhcmVkQDIuOC40MV9AYXdzLXNkaytjcmVkZW50aWFsLXByb3ZpZGVyLXdlYi1pZGVudGl0eUAzLjkwMS4wX0B0eXBlXzc0ZGJhMDFmNmQ4OWU3MjA4OTZiNGRmMzQ1ODMzOTkwL25vZGVfbW9kdWxlcy9Ac3RhY2tmcmFtZS9zdGFjay1zaGFyZWQvZGlzdC9lc20vdXRpbHMvdXVpZHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDbUQ7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGdFQUFvQjtBQUNyQztBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLGdCQUFnQixFQUFFLFVBQVUsR0FBRztBQUM5RTtBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nZngyZWRlbm9hc2lzL0Rvd25sb2Fkcy9EZXZlbG9wbWVudC9Fc3BhZGEvbm9kZV9tb2R1bGVzLy5wbnBtL0BzdGFja2ZyYW1lK3N0YWNrLXNoYXJlZEAyLjguNDFfQGF3cy1zZGsrY3JlZGVudGlhbC1wcm92aWRlci13ZWItaWRlbnRpdHlAMy45MDEuMF9AdHlwZV83NGRiYTAxZjZkODllNzIwODk2YjRkZjM0NTgzMzk5MC9ub2RlX21vZHVsZXMvQHN0YWNrZnJhbWUvc3RhY2stc2hhcmVkL2Rpc3QvZXNtL3V0aWxzL3V1aWRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy91dGlscy91dWlkcy50c3hcbmltcG9ydCB7IGdlbmVyYXRlUmFuZG9tVmFsdWVzIH0gZnJvbSBcIi4vY3J5cHRvLmpzXCI7XG5mdW5jdGlvbiBnZW5lcmF0ZVV1aWQoKSB7XG4gIHJldHVybiBcIjEwMDAwMDAwLTEwMDAtNDAwMC04MDAwLTEwMDAwMDAwMDAwMFwiLnJlcGxhY2UoXG4gICAgL1swMThdL2csXG4gICAgKGMpID0+ICgrYyBeIGdlbmVyYXRlUmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDEpKVswXSAmIDE1ID4+ICtjIC8gNCkudG9TdHJpbmcoMTYpXG4gICk7XG59XG5mdW5jdGlvbiBpc1V1aWQoc3RyKSB7XG4gIHJldHVybiAvXlswLTlhLWZdezh9LVswLTlhLWZdezR9LTRbMC05YS1mXXszfS1bODlhYl1bMC05YS1mXXszfS1bMC05YS1mXXsxMn0kLy50ZXN0KHN0cik7XG59XG5leHBvcnQge1xuICBnZW5lcmF0ZVV1aWQsXG4gIGlzVXVpZFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV1aWRzLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@stackframe+stack-shared@2.8.41_@aws-sdk+credential-provider-web-identity@3.901.0_@type_74dba01f6d89e720896b4df345833990/node_modules/@stackframe/stack-shared/dist/esm/utils/uuids.js\n");

/***/ })

};
;